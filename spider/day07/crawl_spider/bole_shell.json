[
{"art_title": ["\u63a2\u7d22 Php \u548c Python \u4e0b\u5bf9\u8c61\u7684\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d"], "art_url": ["http://python.jobbole.com/88889/"], "art_create_time": ["2017/11/19"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/11/ac652d1b0feb1192f18b75d650e1c73b.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u5357\u5c71younger\u00a0\u00a0\u00a0\u4e00\u3001\u6df1\u62f7\u8d1d\u4e0e\u6d45\u62f7\u8d1d\u6df1\u62f7\u8d1d\uff1a\u8d4b\u503c\u65f6\u503c\u5b8c\u5168\u590d\u5236\uff0c\u5b8c\u5168\u7684copy\uff0c\u5bf9\u5176\u4e2d\u4e00\u4e2a\u4f5c\u51fa\u6539\u53d8\uff0c\u4e0d\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u6d45\u62f7\u8d1d\uff1a\u8d4b\u503c\u65f6\uff0c\u5f15\u7528\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e\u53d6\u4e86\u4e00\u4e2a\u522b\u540d\u3002\u5bf9\u5176\u4e2d\u4e00\u4e2a\u4fee\u6539\uff0c\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u5bf9\u4e8ePHP\u800c\u8a00\uff0c=\u8d4b\u503c\u65f6\uff0c\u666e\u901a\u5bf9\u8c61\u662f\u6df1\u62f7\u8d1d\uff0c\u4f46\u5bf9\u5bf9\u8c61\u6765\u8bf4\uff0c\u662f\u6d45\u62f7\u8d1d\uff0c\u5373\u5f15\u7528\u8d4b\u503c\u3002\u5f53\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u65f6\uff0c\u65e0\u8bba\u53c2\u6570\u524d\u662f\u5426\u6709&\u5f15\u7528\u7b26\u53f7\uff0c\u90fd\u5c06\u88ab\u770b\u505a\u662f\u8d4b\u503c\u5f15\u7528\u3002\u5bf9\u4e8epython\u800c\u8a00\uff0c\u60c5\u51b5\u53ef\u80fd\u4f1a\u6709\u70b9\u5c0f\u590d\u6742\uff0c\u56e0\u4e3apython\u4e00\u5207\u7686\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5python\u7684\u666e\u901a\u8d4b\u503c\u3001\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d\u4e4b\u95f4\u90fd\u662f\u6709\u7ec6\u5fae\u533a\u522b\u7684\u3002\u4e8c\u3001php\u4e0b\u7684\u4ed6\u4eec\u5728php5\u4e2d\uff0c\u5bf9\u8c61\u7684=\u8d4b\u503c\u548c\u4f20\u9012\u90fd\u662f\u5f15\u7528\u3002\u8981\u60f3\u5b9e\u73b0\u62f7\u8d1d\u526f\u672c\uff0cphp\u63d0\u4f9b\u4e86clone\u51fd\u6570\u5b9e\u73b0\u3002clone\u5b8c\u5168copy\u4e86\u4e00\u4efd\u526f\u672c\u3002\u4f46\u662fclone\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4e0d\u5e0c\u671bcopy\u6e90\u5bf9\u8c61\u7684\u6240\u6709\u5185\u5bb9\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u5229\u7528__clone\u6765\u64cd\u4f5c\u3002\u8bf7\u770b\u5982\u4e0b\u4ee3\u7801\u6bb5\uff1aPython<?php//\u666e\u901a\u5bf9\u8c61\u8d4b\u503c\uff0c\u6df1\u62f7\u8d1d\uff0c\u5b8c\u5168\u503c\u590d\u5236$m=1;$n=$m;$n=2;echo$m;//\u503c\u590d\u5236\uff0c\u5bf9\u65b0\u5bf9\u8c61\u7684\u6539\u53d8\u4e0d\u4f1a\u5bf9m\u4f5c\u51fa\u6539\u53d8\uff0c\u8f93\u51fa1.\u6df1\u62f7\u8d1dechoPHP_EOL;/*==================*///\u5bf9\u8c61\u8d4b\u503c\uff0c\u6d45\u62f7\u8d1d\uff0c\u5f15\u7528\u8d4b\u503cclassTest{public$a=1;}$m=newTest();$n=$m;//\u5f15\u7528\u8d4b\u503c$m->a=2;//\u4fee\u6539m\uff0cn\u4e5f\u968f\u4e4b\u6539\u53d8echo$n->a;//\u8f93\u51fa2\uff0c\u6d45\u62f7\u8d1dechoPHP_EOL;?>12345678910111213141516171819<?php//\u666e\u901a\u5bf9\u8c61\u8d4b\u503c\uff0c\u6df1\u62f7\u8d1d\uff0c\u5b8c\u5168\u503c\u590d\u5236$m=1;$n=$m;$n=2;echo$m;//\u503c\u590d\u5236\uff0c\u5bf9\u65b0\u5bf9\u8c61\u7684\u6539\u53d8\u4e0d\u4f1a\u5bf9m\u4f5c\u51fa\u6539\u53d8\uff0c\u8f93\u51fa1.\u6df1\u62f7\u8d1dechoPHP_EOL;/*==================*///\u5bf9\u8c61\u8d4b\u503c\uff0c\u6d45\u62f7\u8d1d\uff0c\u5f15\u7528\u8d4b\u503cclassTest{\u00a0\u00a0\u00a0\u00a0public$a=1;}$m=newTest();$n=$m;//\u5f15\u7528\u8d4b\u503c$m->a=2;//\u4fee\u6539m\uff0cn\u4e5f\u968f\u4e4b\u6539\u53d8echo$n->a;//\u8f93\u51fa2\uff0c\u6d45\u62f7\u8d1dechoPHP_EOL;?>\u7531\u4e8e\u5bf9\u8c61\u7684\u8d4b\u503c\u65f6\u5f15\u7528\uff0c\u8981\u60f3\u5b9e\u73b0\u503c\u590d\u5236\uff0cphp\u63d0\u4f9b\u4e86clone\u51fd\u6570\u6765\u5b9e\u73b0\u590d\u5236\u5bf9\u8c61\u3002\u4f46\u662fclone\u51fd\u6570\u5b58\u5728\u8fd9\u4e48\u4e00\u4e2a\u95ee\u9898\uff0c\u514b\u9686\u5bf9\u8c61\u65f6\uff0c\u539f\u5bf9\u8c61\u7684\u666e\u901a\u5c5e\u6027\u80fd\u503c\u590d\u5236\uff0c\u4f46\u662f\u6e90\u5bf9\u8c61\u7684\u5bf9\u8c61\u5c5e\u6027\u8d4b\u503c\u65f6\u8fd8\u662f\u5f15\u7528\u8d4b\u503c\uff0c\u6d45\u62f7\u8d1d\u3002Python<?phpclassTest{public$a=1;}classTestOne{public$b=1;public$obj;//\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5c5e\u6027\uff0cclone\u65f6\uff0c\u5b83\u4f1a\u662f\u6d45\u62f7\u8d1dpublicfunction__construct(){$this->obj=newTest();}}$m=newTestOne();$n=$m;//\u8fd9\u662f\u5b8c\u5168\u7684\u6d45\u62f7\u8d1d\uff0c\u65e0\u8bba\u666e\u901a\u5c5e\u6027\u8fd8\u662f\u5bf9\u8c61\u5c5e\u6027$p=clone$m;//\u666e\u901a\u5c5e\u6027\u5b9e\u73b0\u4e86\u6df1\u62f7\u8d1d\uff0c\u6539\u53d8\u666e\u901a\u5c5e\u6027b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u5bf9\u8c61\u6709\u5f71\u54cd$p->b=2;echo$m->b;//\u8f93\u51fa\u539f\u6765\u76841echoPHP_EOL;//\u5bf9\u8c61\u5c5e\u6027\u662f\u6d45\u62f7\u8d1d\uff0c\u6539\u53d8\u5bf9\u8c61\u5c5e\u6027\u4e2d\u7684a\uff0c\u6e90\u5bf9\u8c61m\u4e2d\u7684\u5bf9\u8c61\u5c5e\u6027\u4e2da\u4e5f\u6539\u53d8$p->obj->a=3;echo$m->obj->a;//\u8f93\u51fa3\uff0c\u968f\u65b0\u5bf9\u8c61\u6539\u53d8?>12345678910111213141516171819202122232425262728<?phpclassTest{\u00a0\u00a0\u00a0\u00a0public$a=1;}classTestOne{\u00a0\u00a0\u00a0\u00a0public$b=1;\u00a0\u00a0\u00a0\u00a0public$obj;\u00a0\u00a0\u00a0\u00a0//\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5c5e\u6027\uff0cclone\u65f6\uff0c\u5b83\u4f1a\u662f\u6d45\u62f7\u8d1d\u00a0\u00a0\u00a0\u00a0publicfunction__construct(){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$this->obj=newTest();\u00a0\u00a0\u00a0\u00a0}}$m=newTestOne();$n=$m;//\u8fd9\u662f\u5b8c\u5168\u7684\u6d45\u62f7\u8d1d\uff0c\u65e0\u8bba\u666e\u901a\u5c5e\u6027\u8fd8\u662f\u5bf9\u8c61\u5c5e\u6027$p=clone$m;//\u666e\u901a\u5c5e\u6027\u5b9e\u73b0\u4e86\u6df1\u62f7\u8d1d\uff0c\u6539\u53d8\u666e\u901a\u5c5e\u6027b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u5bf9\u8c61\u6709\u5f71\u54cd$p->b=2;echo$m->b;//\u8f93\u51fa\u539f\u6765\u76841echoPHP_EOL;//\u5bf9\u8c61\u5c5e\u6027\u662f\u6d45\u62f7\u8d1d\uff0c\u6539\u53d8\u5bf9\u8c61\u5c5e\u6027\u4e2d\u7684a\uff0c\u6e90\u5bf9\u8c61m\u4e2d\u7684\u5bf9\u8c61\u5c5e\u6027\u4e2da\u4e5f\u6539\u53d8$p->obj->a=3;echo$m->obj->a;//\u8f93\u51fa3\uff0c\u968f\u65b0\u5bf9\u8c61\u6539\u53d8?>\u8981\u60f3\u5b9e\u73b0\u5bf9\u8c61\u771f\u6b63\u7684\u6df1\u62f7\u8d1d\uff0c\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6cd5\uff1a1\u3001\u5229\u7528\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u5b9e\u73b0Python<?phpclassTest{public$a=1;}classTestOne{public$b=1;public$obj;//\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5c5e\u6027\uff0cclone\u65f6\uff0c\u5b83\u4f1a\u662f\u6d45\u62f7\u8d1dpublicfunction__construct(){$this->obj=newTest();}}$m=newTestOne();//\u65b9\u6cd5\u4e8c\uff0c\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u5b9e\u73b0\u5bf9\u8c61\u6df1\u62f7\u8d1d$n=serialize($m);$n=unserialize($n);$n->b=2;echo$m->b;//\u8f93\u51fa\u539f\u6765\u76841echoPHP_EOL;//\u53ef\u4ee5\u770b\u5230\uff0c\u666e\u901a\u5c5e\u6027\u5b9e\u73b0\u4e86\u6df1\u62f7\u8d1d\uff0c\u6539\u53d8\u666e\u901a\u5c5e\u6027b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u5bf9\u8c61\u6709\u5f71\u54cd$n->obj->a=3;echo$m->obj->a;//\u8f93\u51fa1\uff0c\u4e0d\u968f\u65b0\u5bf9\u8c61\u6539\u53d8\uff0c\u8fd8\u662f\u4fdd\u6301\u4e86\u539f\u6765\u7684\u5c5e\u6027,\u53ef\u4ee5\u770b\u5230\uff0c\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u8c61\u7684\u6df1\u62f7\u8d1d?>123456789101112131415161718192021222324252627282930<?phpclassTest{\u00a0\u00a0\u00a0\u00a0public$a=1;}classTestOne{\u00a0\u00a0\u00a0\u00a0public$b=1;\u00a0\u00a0\u00a0\u00a0public$obj;\u00a0\u00a0\u00a0\u00a0//\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5c5e\u6027\uff0cclone\u65f6\uff0c\u5b83\u4f1a\u662f\u6d45\u62f7\u8d1d\u00a0\u00a0\u00a0\u00a0publicfunction__construct(){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$this->obj=newTest();\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0}$m=newTestOne();//\u65b9\u6cd5\u4e8c\uff0c\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316\u5b9e\u73b0\u5bf9\u8c61\u6df1\u62f7\u8d1d$n=serialize($m);$n=unserialize($n);$n->b=2;echo$m->b;//\u8f93\u51fa\u539f\u6765\u76841echoPHP_EOL;//\u53ef\u4ee5\u770b\u5230\uff0c\u666e\u901a\u5c5e\u6027\u5b9e\u73b0\u4e86\u6df1\u62f7\u8d1d\uff0c\u6539\u53d8\u666e\u901a\u5c5e\u6027b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u5bf9\u8c61\u6709\u5f71\u54cd$n->obj->a=3;echo$m->obj->a;//\u8f93\u51fa1\uff0c\u4e0d\u968f\u65b0\u5bf9\u8c61\u6539\u53d8\uff0c\u8fd8\u662f\u4fdd\u6301\u4e86\u539f\u6765\u7684\u5c5e\u6027,\u53ef\u4ee5\u770b\u5230\uff0c\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u8c61\u7684\u6df1\u62f7\u8d1d?>2\u3001\u5199clone\u51fd\u6570Python<?phpclassTest{public$a=1;}classTestOne{public$b=1;public$obj;//\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5c5e\u6027\uff0cclone\u65f6\uff0c\u5b83\u4f1a\u662f\u6d45\u62f7\u8d1dpublicfunction__construct(){$this->obj=newTest();}//\u65b9\u6cd5\u4e00\uff1a\u91cd\u5199clone\u51fd\u6570publicfunction__clone(){$this->obj=clone$this->obj;}}$m=newTestOne();$n=clone$m;$n->b=2;echo$m->b;//\u8f93\u51fa\u539f\u6765\u76841echoPHP_EOL;//\u53ef\u4ee5\u770b\u5230\uff0c\u666e\u901a\u5c5e\u6027\u5b9e\u73b0\u4e86\u6df1\u62f7\u8d1d\uff0c\u6539\u53d8\u666e\u901a\u5c5e\u6027b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u5bf9\u8c61\u6709\u5f71\u54cd//\u7531\u4e8e\u6539\u5199\u4e86clone\u51fd\u6570\uff0c\u73b0\u5728\u5bf9\u8c61\u5c5e\u6027\u4e5f\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u6df1\u62f7\u8d1d\uff0c\u5bf9\u65b0\u5bf9\u8c61\u7684\u6539\u53d8\uff0c\u4e0d\u4f1a\u5f71\u54cd\u6e90\u5bf9\u8c61$n->obj->a=3;echo$m->obj->a;//\u8f93\u51fa1\uff0c\u4e0d\u968f\u65b0\u5bf9\u8c61\u6539\u53d8\uff0c\u8fd8\u662f\u4fdd\u6301\u4e86\u539f\u6765\u7684\u5c5e\u6027?>1234567891011121314151617181920212223242526272829303132<?phpclassTest{\u00a0\u00a0\u00a0\u00a0public$a=1;}classTestOne{\u00a0\u00a0\u00a0\u00a0public$b=1;\u00a0\u00a0\u00a0\u00a0public$obj;\u00a0\u00a0\u00a0\u00a0//\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5c5e\u6027\uff0cclone\u65f6\uff0c\u5b83\u4f1a\u662f\u6d45\u62f7\u8d1d\u00a0\u00a0\u00a0\u00a0publicfunction__construct(){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$this->obj=newTest();\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u65b9\u6cd5\u4e00\uff1a\u91cd\u5199clone\u51fd\u6570\u00a0\u00a0\u00a0\u00a0publicfunction__clone(){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$this->obj=clone$this->obj;\u00a0\u00a0\u00a0\u00a0}}$m=newTestOne();$n=clone$m;$n->b=2;echo$m->b;//\u8f93\u51fa\u539f\u6765\u76841echoPHP_EOL;//\u53ef\u4ee5\u770b\u5230\uff0c\u666e\u901a\u5c5e\u6027\u5b9e\u73b0\u4e86\u6df1\u62f7\u8d1d\uff0c\u6539\u53d8\u666e\u901a\u5c5e\u6027b\uff0c\u4e0d\u4f1a\u5bf9\u6e90\u5bf9\u8c61\u6709\u5f71\u54cd//\u7531\u4e8e\u6539\u5199\u4e86clone\u51fd\u6570\uff0c\u73b0\u5728\u5bf9\u8c61\u5c5e\u6027\u4e5f\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u6df1\u62f7\u8d1d\uff0c\u5bf9\u65b0\u5bf9\u8c61\u7684\u6539\u53d8\uff0c\u4e0d\u4f1a\u5f71\u54cd\u6e90\u5bf9\u8c61$n->obj->a=3;echo$m->obj->a;//\u8f93\u51fa1\uff0c\u4e0d\u968f\u65b0\u5bf9\u8c61\u6539\u53d8\uff0c\u8fd8\u662f\u4fdd\u6301\u4e86\u539f\u6765\u7684\u5c5e\u6027?>\u4e09\u3001python\u4e0b\u7684\u4ed6\u4eec\u201c\u5bf9\u4e00\u4e2a\u5bf9\u8c61\u8fdb\u884c\u6d45\u62f7\u8d1d\u5176\u5b9e\u662f\u65b0\u521b\u5efa\u4e86\u4e00\u4e2a\u7c7b\u578b\u548c\u539f\u6765\u5bf9\u8c61\u4e00\u6837\uff0c\u4f46\u662f\u5185\u5bb9\u662f\u539f\u6765\u5bf9\u8c61\u5143\u7d20\u7684\u5f15\u7528\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fd9\u4e2a\u62f7\u8d1d\u7684\u5bf9\u8c61\u672c\u8eab\u662f\u65b0\u7684\uff0c\u4f46\u662f\u5b83\u7684\u5185\u5bb9\u4e0d\u662f\u201d\uff0c\u6458\u81ea\u300aPython\u6838\u5fc3\u7f16\u7a0b\u300b\u3002\u8fd9\u662f\u6211\u4e2a\u4eba\u5bf9python\u4e0b\u6d45\u62f7\u8d1d\u548c\u6df1\u62f7\u8d1d\u7684\u7406\u89e3\uff1a\u8d4b\u503c\uff1a\u7b80\u5355\u5730\u62f7\u8d1d\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u4e24\u4e2a\u5bf9\u8c61\u7684id\u76f8\u540c\u3002\u6d45\u62f7\u8d1d\uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ec4\u5408\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u65b0\u5bf9\u8c61\u4e0e\u539f\u5bf9\u8c61\u5171\u4eab\u5185\u5b58\u4e2d\u7684\u5b50\u5bf9\u8c61\u3002\u6df1\u62f7\u8d1d\uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ec4\u5408\u5bf9\u8c61\uff0c\u540c\u65f6\u9012\u5f52\u5730\u62f7\u8d1d\u6240\u6709\u5b50\u5bf9\u8c61\uff0c\u65b0\u7684\u7ec4\u5408\u5bf9\u8c61\u4e0e\u539f\u5bf9\u8c61\u6ca1\u6709\u4efb\u4f55\u5173\u8054\u3002\u867d\u7136\u5b9e\u9645\u4e0a\u4f1a\u5171\u4eab\u4e0d\u53ef\u53d8\u7684\u5b50\u5bf9\u8c61\uff0c\u4f46\u4e0d\u5f71\u54cd\u5b83\u4eec\u7684\u76f8\u4e92\u72ec\u7acb\u6027\u3002\u6d45\u62f7\u8d1d\u548c\u6df1\u62f7\u8d1d\u7684\u4e0d\u540c\u4ec5\u4ec5\u662f\u5bf9\u7ec4\u5408\u5bf9\u8c61\u6765\u8bf4\uff0c\u6240\u8c13\u7684\u7ec4\u5408\u5bf9\u8c61\u5c31\u662f\u5305\u542b\u4e86\u5176\u5b83\u5bf9\u8c61\u7684\u53ef\u53d8\u5bf9\u8c61\uff0c\u5982\u5217\u8868\uff0c\u7c7b\u5b9e\u4f8b\u3002\u800c\u5bf9\u4e8e\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u4ee5\u53ca\u5176\u5b83\u201c\u539f\u5b50\u201d\u7c7b\u578b\uff0c\u6ca1\u6709\u62f7\u8d1d\u4e00\u8bf4\uff0c\u4ea7\u751f\u7684\u90fd\u662f\u539f\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u5e0c\u671b\u80fd\u5bf9\u4f60\u6709\u8fdb\u4e00\u6b65\u7684\u5e2e\u52a9\uff1bPython#!/usr/bin/python#-*-coding:UTF-8-*-importcopy#\u6d45\u62f7\u8d1da=[1,\"a\",3,[4,5,6],[[7,8,9]]]b=ac=list(a)d=copy.deepcopy(a)print\"\u539f\u5730\u5740&&&\"printid(a)print\"\u8d4b\u503c\u5730\u5740&&&\"printid(b)print\"\u6d45\u62f7\u8d1d\u5730\u5740&&&\"printid(c)print\"\u6df1\u62f7\u8d1d\u5730\u5740&&&\"printid(d)print\"\u8d4b\u503c\u5730\u5740###\"fori,jinzip(a,b):printid(i),id(j)print\"\u6d45\u62f7\u8d1d\u5730\u5740###\"fori,jinzip(a,c):printid(i),id(j)print\"\u6df1\u62f7\u8d1d\u5730\u5740###\"fori,jinzip(a,d):printid(i),id(j)print\"######\"a[0]=2a[3][0]=14print\"\u539f\u503c\u53d8\u5316\u4e3a%d,%d\"%(a[0],a[3][0])print\"*******\"print\"\u8d4b\u503c\u53d8\u5316\"printb[0],b[3][0]print\"\u6d45\u62f7\u8d1d\u53d8\u5316\"printc[0],c[3][0]print\"\u6df1\u62f7\u8d1d\u53d8\u5316\"printd[0],d[3][0]print\"**##12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/usr/bin/python#-*-coding:UTF-8-*-?importcopy?#????a=[1,\"a\",3,[4,5,6],[[7,8,9]]]?b=a?c=list(a)?d=copy.deepcopy(a)print\"???&&&\"printid(a)print\"????&&&\"printid(b)print\"?????&&&\"printid(c)print\"?????&&&\"printid(d)?print\"????###\"fori,jinzip(a,b):????printid(i),id(j)print\"?????###\"fori,jinzip(a,c):????printid(i),id(j)print\"?????###\"fori,jinzip(a,d):????printid(i),id(j)print\"######\"?a[0]=2a[3][0]=14print\"?????%d,%d\"%(a[0],a[3][0])print\"*******\"print\"????\"printb[0],b[3][0]print\"?????\"printc[0],c[3][0]print\"?????\"printd[0],d[3][0]print\"**##\"/>\"printa</textarea></div><divclass=\"crayon-main\"style=\"\"><tableclass=\"crayon-table\"><trclass=\"crayon-row\"><tdclass=\"crayon-nums\"data-settings=\"show\"><divclass=\"crayon-nums-content\"style=\"font-size:13px!important;line-height:15px!important;\"><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-1\">1</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-2\">2</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-3\">3</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-4\">4</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-5\">5</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-6\">6</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-7\">7</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-8\">8</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-9\">9</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-10\">10</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-11\">11</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-12\">12</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-13\">13</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-14\">14</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-15\">15</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-16\">16</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-17\">17</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-18\">18</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-19\">19</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-20\">20</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-21\">21</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-22\">22</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-23\">23</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-24\">24</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-25\">25</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-26\">26</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-27\">27</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-28\">28</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-29\">29</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-30\">30</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-31\">31</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-32\">32</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-33\">33</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-34\">34</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-35\">35</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-36\">36</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-37\">37</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-38\">38</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-39\">39</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-40\">40</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-41\">41</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-42\">42</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-43\">43</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-44\">44</div><divclass=\"crayon-num\"data-line=\"crayon-5a9de2766148f471354834-45\">45</div><divclass=\"crayon-numcrayon-striped-num\"data-line=\"crayon-5a9de2766148f471354834-46\">46</div></div></td><tdclass=\"crayon-code\"><divclass=\"crayon-pre\"style=\"font-size:13px!important;line-height:15px!important;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4;tab-size:4;\"><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-1\"><spanclass=\"crayon-c\">#!/usr/bin/python</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-2\"><spanclass=\"crayon-c\">#-*-coding:UTF-8-*-</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-3\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-4\"><spanclass=\"crayon-r\">import</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">copy</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-5\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-6\"><spanclass=\"crayon-c\">#???</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-7\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-8\"><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">=</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">1</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"a\"</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">3</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">4</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">5</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">6</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">7</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">8</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">9</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">]</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-9\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-10\"><spanclass=\"crayon-v\">b</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">=</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-i\">a</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-11\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-12\"><spanclass=\"crayon-v\">c</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">=</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">list</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-13\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-14\"><spanclass=\"crayon-v\">d</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">=</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">copy</span><spanclass=\"crayon-sy\">.</span><spanclass=\"crayon-e\">deepcopy</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-15\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"???&&&\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-16\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-17\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"????&&&\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-18\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">b</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-19\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????&&&\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-20\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">c</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-21\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????&&&\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-22\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">d</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-23\">?</div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-24\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"????###\"</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-25\"><spanclass=\"crayon-st\">for</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">i</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-i\">j</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-st\">in</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">zip</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">b</span><spanclass=\"crayon-sy\">)</span><spanclass=\"crayon-o\">:</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-26\"><spanclass=\"crayon-h\">????</span><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">i</span><spanclass=\"crayon-sy\">)</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">j</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-27\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????###\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-28\"><spanclass=\"crayon-st\">for</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">i</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-i\">j</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-st\">in</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">zip</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">c</span><spanclass=\"crayon-sy\">)</span><spanclass=\"crayon-o\">:</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-29\"><spanclass=\"crayon-h\">????</span><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">i</span><spanclass=\"crayon-sy\">)</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">j</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-30\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????###\"</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-31\"><spanclass=\"crayon-st\">for</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">i</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-i\">j</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-st\">in</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">zip</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">d</span><spanclass=\"crayon-sy\">)</span><spanclass=\"crayon-o\">:</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-32\"><spanclass=\"crayon-h\">????</span><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">i</span><spanclass=\"crayon-sy\">)</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-k\">id</span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">j</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-33\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"######\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-34\">?</div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-35\"><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">=</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">2</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-36\"><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">3</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">=</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-cn\">14</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-37\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????%d,%d\"</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-o\">%</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-sy\">(</span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">a</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">3</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">)</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-38\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"*******\"</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-39\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"????\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-40\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">b</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">b</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">3</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-41\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-42\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">c</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">c</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">3</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-43\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"?????\"</span></div><divclass=\"crayon-linecrayon-striped-line\"id=\"crayon-5a9de2766148f471354834-44\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">d</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">,</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-v\">d</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">3</span><spanclass=\"crayon-sy\">]</span><spanclass=\"crayon-sy\">[</span><spanclass=\"crayon-cn\">0</span><spanclass=\"crayon-sy\">]</span></div><divclass=\"crayon-line\"id=\"crayon-5a9de2766148f471354834-45\"><spanclass=\"crayon-k\">print</span><spanclass=\"crayon-h\"></span><spanclass=\"crayon-s\">\"**##\"printa\u8f93\u51fa\u5982\u4e0b\uff1a\u00a0\u53c2\u8003\u535a\u6587http://www.cnblogs.com/taijun\u2026http://blog.csdn.net/u0115085\u2026http://www.cnblogs.com/zxlove\u20261\u8d5e2\u6536\u85cf1\u8bc4\u8bba"]},
{"art_title": ["Python \u4e3a\u4ec0\u4e48\u8bf4 Eval \u8981\u614e\u7528\uff1f\u4f7f\u7528 Eval \u5e26\u6765\u7684\u6f5c\u5728\u98ce\u9669\uff1f\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f7f\u7528 Eval\uff1f"], "art_url": ["http://python.jobbole.com/88767/"], "art_create_time": ["2017/10/25"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u98cev\u6708\u00a0\u00a0\u00a0eval\u524d\u8a00PythonIn[1]:eval(\"2+3\")Out[1]:5In[2]:eval('[xforxinrange(9)]')Out[2]:[0,1,2,3,4,5,6,7,8]12345In[1]:eval(\"2+3\")Out[1]:5\u00a0In[2]:eval('[xforxinrange(9)]')Out[2]:[0,1,2,3,4,5,6,7,8]\u5f53\u5185\u5b58\u4e2d\u7684\u5185\u7f6e\u6a21\u5757\u542b\u6709os\u7684\u8bdd\uff0ceval\u540c\u6837\u53ef\u4ee5\u505a\u5230\u547d\u4ee4\u6267\u884c\uff1aPythonIn[3]:importosIn[4]:eval(\"os.system('whoami')\")hy-201707271917\\administratorOut[4]:012345In[3]:importos\u00a0In[4]:eval(\"os.system('whoami')\")hy-201707271917\\administratorOut[4]:0\u5f53\u7136\uff0ceval\u53ea\u80fd\u6267\u884cPython\u7684\u8868\u8fbe\u5f0f\u7c7b\u578b\u7684\u4ee3\u7801\uff0c\u4e0d\u80fd\u76f4\u63a5\u7528\u5b83\u8fdb\u884cimport\u64cd\u4f5c\uff0c\u4f46exec\u53ef\u4ee5\u3002\u5982\u679c\u975e\u8981\u4f7f\u7528eval\u8fdb\u884cimport\uff0c\u5219\u4f7f\u7528__import__\uff1aPythonIn[8]:eval(\"__import__('os').system('whoami')\")hy-201707271917\\administratorOut[8]:0123In[8]:eval(\"__import__('os').system('whoami')\")hy-201707271917\\administratorOut[8]:0\u5728\u5b9e\u9645\u7684\u4ee3\u7801\u4e2d\uff0c\u5f80\u5f80\u6709\u4f7f\u7528\u5ba2\u6237\u7aef\u6570\u636e\u5e26\u5165eval\u4e2d\u6267\u884c\u7684\u9700\u6c42\u3002\u6bd4\u5982\u52a8\u6001\u6a21\u5757\u7684\u5f15\u5165\uff0c\u4e3e\u4e2a\u6817\u5b50\uff0c\u4e00\u4e2a\u5728\u7ebf\u722c\u866b\u5e73\u53f0\u4e0a\u722c\u866b\u53ef\u80fd\u6709\u591a\u4e2a\u5e76\u4e14\u4f4d\u4e8e\u4e0d\u540c\u7684\u6a21\u5757\u4e2d\uff0c\u670d\u52a1\u5668\u7aef\u4f46\u5f80\u5f80\u53ea\u9700\u8981\u8c03\u7528\u7528\u6237\u5728\u5ba2\u6237\u7aef\u9009\u62e9\u7684\u722c\u866b\u7c7b\u578b\uff0c\u5e76\u901a\u8fc7\u540e\u7aef\u7684exec\u6216\u8005eval\u8fdb\u884c\u52a8\u6001\u8c03\u7528\uff0c\u540e\u7aef\u7f16\u7801\u5b9e\u73b0\u975e\u5e38\u65b9\u4fbf\u3002\u4f46\u5982\u679c\u5bf9\u7528\u6237\u7684\u8bf7\u6c42\u5904\u7406\u4e0d\u6070\u5f53\uff0c\u5c31\u4f1a\u9020\u6210\u4e25\u91cd\u7684\u5b89\u5168\u6f0f\u6d1e\u3002\u5b89\u5168\u201d\u4f7f\u7528eval\u73b0\u5728\u63d0\u5021\u6700\u591a\u7684\u5c31\u662f\u4f7f\u7528eval\u7684\u540e\u4e24\u4e2a\u53c2\u6570\u6765\u8bbe\u7f6e\u51fd\u6570\u7684\u767d\u540d\u5355\uff1aEval\u51fd\u6570\u7684\u58f0\u660e\u4e3aeval(expression[,globals[,locals]])\u5176\u4e2d\uff0c\u7b2c\u4e8c\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u6307\u5b9a\u80fd\u591f\u5728eval\u4e2d\u4f7f\u7528\u7684\u51fd\u6570\u7b49\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u4e3aglobals()\u548clocals()\u51fd\u6570\u4e2d\u5305\u542b\u7684\u6a21\u5757\u548c\u51fd\u6570\u3002Python>>>importos>>>'os'inglobals()True>>>eval('os.system('whoami')')win-20140812chjadministrator0>>>eval('os.system('whoami')',{},{})Traceback(mostrecentcalllast):File\"\",line1,inFile\"\",line1,inNameError:name'os'isnotdefined1234567891011>>>importos>>>'os'inglobals()True>>>eval('os.system('whoami')')win-20140812chjadministrator0>>>eval('os.system('whoami')',{},{})Traceback(mostrecentcalllast):\u00a0\u00a0File\"\",line1,in\u00a0\u00a0File\"\",line1,inNameError:name'os'isnotdefined\u5982\u679c\u6307\u5b9a\u53ea\u5141\u8bb8\u8c03\u7528abs\u51fd\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\uff1aPython>>>eval('abs(-20)',{'abs':abs},{'abs':abs})20>>>eval('os.system('whoami')',{'abs':abs},{'abs':abs})Traceback(mostrecentcalllast):File\"\",line1,inFile\"\",line1,inNameError:name'os'isnotdefined>>>eval('os.system('whoami')')win-20140812chjadministrator012345678910>>>eval('abs(-20)',{'abs':abs},{'abs':abs})20>>>eval('os.system('whoami')',{'abs':abs},{'abs':abs})Traceback(mostrecentcalllast):\u00a0\u00a0File\"\",line1,in\u00a0\u00a0File\"\",line1,inNameError:name'os'isnotdefined>>>eval('os.system('whoami')')win-20140812chjadministrator0\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u6765\u9632\u62a4\uff0c\u786e\u5b9e\u53ef\u4ee5\u8d77\u5230\u4e00\u5b9a\u7684\u4f5c\u7528\uff0c\u4f46\u662f\uff0c\u8fd9\u79cd\u5904\u7406\u65b9\u6cd5\u53ef\u80fd\u4f1a\u88ab\u7ed5\u8fc7\uff0c\u4ece\u800c\u9020\u6210\u5176\u4ed6\u95ee\u9898\uff01\u7ed5\u8fc7\u6267\u884c\u4ee3\u78011\u88ab\u7ed5\u8fc7\u7684\u60c5\u666f\u5982\u4e0b\uff0c\u5c0f\u660e\u77e5\u9053\u4e86eval\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u5b89\u5168\u98ce\u9669\uff0c\u6240\u4ee5\u4f7f\u7528\u5982\u4e0b\u7684\u624b\u6bb5\u53bb\u9632\u6b62eval\u6267\u884c\u4efb\u610f\u4ee3\u7801\uff1aPythonenv={}env[\"locals\"]=Noneenv[\"globals\"]=Noneenv[\"__name__\"]=Noneenv[\"__file__\"]=Noneenv[\"__builtins__\"]=Noneeval(users_str,env)12345678env={}env[\"locals\"]\u00a0\u00a0=Noneenv[\"globals\"]\u00a0\u00a0=Noneenv[\"__name__\"]=Noneenv[\"__file__\"]=Noneenv[\"__builtins__\"]=Noneeval(users_str,env)Python\u4e2d\u7684__builtins__\u662f\u5185\u7f6e\u6a21\u5757\uff0c\u7528\u6765\u8bbe\u7f6e\u5185\u7f6e\u51fd\u6570\u7684\u6a21\u5757\u3002\u6bd4\u5982\u719f\u6089\u7684abs\uff0copen\u7b49\u5185\u7f6e\u51fd\u6570\uff0c\u90fd\u662f\u5728\u8be5\u6a21\u5757\u4e2d\u4ee5\u5b57\u5178\u7684\u65b9\u5f0f\u5b58\u50a8\u7684\uff0c\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u662f\u7b49\u4ef7\u7684\uff1aPython>>>__builtins__.abs(-20)20>>>abs(-20)201234>>>__builtins__.abs(-20)20>>>abs(-20)20\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5185\u7f6e\u51fd\u6570\uff0c\u5e76\u50cf\u4f7f\u7528Python\u4e2d\u7684\u5185\u7f6e\u51fd\u6570\u4e00\u6837\u4f7f\u7528\u5b83\u4eec\uff1aPython>>>defhello():...print'shabi'>>>__builtin__.__dict__['say_hello']=hello>>>say_hello()shabi12345>>>defhello():...\u00a0\u00a0\u00a0\u00a0print'shabi'>>>__builtin__.__dict__['say_hello']=hello>>>say_hello()shabi\u5c0f\u660e\u5c06eval\u51fd\u6570\u7684\u4f5c\u7528\u57df\u4e2d\u7684\u5185\u7f6e\u6a21\u5757\u8bbe\u7f6e\u4e3aNone\uff0c\u597d\u50cf\u770b\u8d77\u6765\u5f88\u5f7b\u5e95\u4e86\uff0c\u4f46\u4f9d\u7136\u53ef\u4ee5\u88ab\u7ed5\u8fc7\u3002__builtins__\u662f__builtin__\u7684\u4e00\u4e2a\u5f15\u7528\uff0c\u5728__main__\u6a21\u5757\u4e0b\uff0c\u4e24\u8005\u662f\u7b49\u4ef7\u7684\uff1aPython>>>id(__builtins__)3549136>>>id(__builtin__)35491361234>>>id(__builtins__)3549136>>>id(__builtin__)3549136\u6839\u636e\u4e4c\u4e91drops\u63d0\u5230\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u5373\u53ef\uff1aPython[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__==\"zipimporter\"][0](\"/home/liaoxinxi/eval_test/configobj-4.4.0-py2.5.egg\").load_module(\"configobj\").os.system(\"uname\")1[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__==\"zipimporter\"][0](\"/home/liaoxinxi/eval_test/configobj-4.4.0-py2.5.egg\").load_module(\"configobj\").os.system(\"uname\")\u4e0a\u9762\u7684\u4ee3\u7801\u9996\u5148\u5229\u7528__class__\u548c__subclasses__\u52a8\u6001\u52a0\u8f7d\u4e86object\u5bf9\u8c61\uff0c\u8fd9\u662f\u56e0\u4e3aeval\u4e2d\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528object\u3002\u7136\u540e\u4f7f\u7528object\u7684\u5b50\u7c7b\u7684zipimporter\u5bf9egg\u538b\u7f29\u6587\u4ef6\u4e2d\u7684configobj\u6a21\u5757\u8fdb\u884c\u5bfc\u5165\uff0c\u5e76\u8c03\u7528\u5176\u5185\u7f6e\u6a21\u5757\u4e2d\u7684os\u6a21\u5757\u4ece\u800c\u5b9e\u73b0\u547d\u4ee4\u6267\u884c\uff0c\u5f53\u7136\uff0c\u524d\u63d0\u662f\u8981\u6709configobj\u7684egg\u6587\u4ef6\u3002configobj\u6a21\u5757\u5f88\u6709\u610f\u601d\uff0c\u5c45\u7136\u5185\u7f6e\u4e86os\u6a21\u5757\uff1aPython>>>\"os\"inconfigobj.__dict__True>>>importurllib>>>\"os\"inurllib.__dict__True>>>importurllib2>>>\"os\"inurllib2.__dict__True>>>configobj.os.system(\"whoami\")win-20140812chjadministrator01234567891011>>>\"os\"inconfigobj.__dict__True>>>importurllib>>>\"os\"inurllib.__dict__True>>>importurllib2>>>\"os\"inurllib2.__dict__True>>>configobj.os.system(\"whoami\")win-20140812chjadministrator0\u548cconfigobj\u7c7b\u4f3c\u7684\u6a21\u5757\u5982urllib\uff0curllib2\uff0csetuptools\u7b49\u90fd\u6709os\u7684\u5185\u7f6e\uff0c\u7406\u8bba\u4e0a\u4f7f\u7528\u54ea\u4e2a\u90fd\u884c\u3002\u5982\u679c\u65e0\u6cd5\u4e0b\u8f7degg\u538b\u7f29\u6587\u4ef6\uff0c\u53ef\u4ee5\u4e0b\u8f7d\u5e26\u6709setup.py\u7684\u6587\u4ef6\u5939\uff0c\u52a0\u5165\uff1aPythonfromsetuptoolsimportsetup,find_packages1fromsetuptoolsimportsetup,find_packages\u7136\u540e\u6267\u884c:Pythonpythonsetup.pybdist_egg1pythonsetup.pybdist_egg\u5c31\u53ef\u4ee5\u5728dist\u6587\u4ef6\u5939\u4e2d\u627e\u5230\u5bf9\u5e94\u7684egg\u6587\u4ef6\u3002\u7ed5\u8fc7demo\u5982\u4e0b\uff1aPython>>>env={}>>>env[\"locals\"]=None>>>env[\"globals\"]=None>>>env[\"__name__\"]=None>>>env[\"__file__\"]=None>>>env[\"__builtins__\"]=None>>>users_str=\"[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__=='zipimporter'][0]('E:/internships/configobj-5.0.5-py2.7.egg').load_module('configobj').os.system('whoami')\">>>eval(users_str,env)win-20140812chjadministrator0>>>eval(users_str,{},{})win-20140812chjadministrator012345678910111213>>>env={}>>>env[\"locals\"]\u00a0\u00a0=None>>>env[\"globals\"]\u00a0\u00a0=None>>>env[\"__name__\"]=None>>>env[\"__file__\"]=None>>>env[\"__builtins__\"]=None>>>users_str=\"[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__=='zipimporter'][0]('E:/internships/configobj-5.0.5-py2.7.egg').load_module('configobj').os.system('whoami')\">>>eval(users_str,env)win-20140812chjadministrator0>>>eval(users_str,{},{})win-20140812chjadministrator0\u62d2\u7edd\u670d\u52a1\u653b\u51fb1object\u7684\u5b50\u7c7b\u4e2d\u6709\u5f88\u591a\u6709\u8da3\u7684\u4e1c\u897f\uff0c\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\u67e5\u770b\uff1aPython[x.__name__forxin().__class__.__bases__[0].__subclasses__()]1[x.__name__forxin().__class__.__bases__[0].__subclasses__()]\u8fd9\u91cc\u6211\u5c31\u4e0d\u8f93\u51fa\u7ed3\u679c\u4e86\uff0c\u5982\u679c\u4f60\u6267\u884c\u7684\u8bdd\uff0c\u53ef\u4ee5\u770b\u5230\u5f88\u591a\u6709\u8da3\u7684\u6a21\u5757\uff0c\u6bd4\u5982file\uff0czipimporter\uff0cQuitter\u7b49\u3002\u7ecf\u8fc7\u6d4b\u8bd5\uff0cfile\u7684\u6784\u9020\u51fd\u6570\u662f\u88ab\u89e3\u91ca\u5668\u6c99\u7bb1\u9694\u79bb\u7684\u3002\u7b80\u5355\u7684\uff0c\u6216\u8005\u76f4\u63a5\u4f7fobject\u66b4\u9732\u51fa\u7684\u5b50\u7c7bQuitter\u8fdb\u884c\u9000\u51fa\uff1aPython>>>eval(\"[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__=='Quitter'][0](0)()\",{'__builtins__':None})12>>>eval(\"[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__=='Quitter'][0](0)()\",{'__builtins__':None})C:/>\u5982\u679c\u8fd0\u6c14\u597d\uff0c\u9047\u5230\u5bf9\u65b9\u7a0b\u5e8f\u4e2d\u5bfc\u5165\u4e86os\u7b49\u654f\u611f\u6a21\u5757\uff0c\u90a3\u4e48Popen\u5c31\u53ef\u4ee5\u7528\uff0c\u5e76\u4e14\u7ed5\u8fc7__builins__\u4e3a\u7a7a\u7684\u9650\u5236\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1aPython>>>importsubprocess>>>eval(\"[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__=='Popen'][0](['ping','-n','1','127.0.0.1'])\",{'__builtins__':None})>>>\u6b63\u5728Ping127.0.0.1\u5177\u670932\u5b57\u8282\u7684\u6570\u636e:\u6765\u81ea127.0.0.1\u7684\u56de\u590d:\u5b57\u8282=32\u65f6\u95f4>>123456>>>importsubprocess>>>eval(\"[xforxin().__class__.__bases__[0].__subclasses__()ifx.__name__=='Popen'][0](['ping','-n','1','127.0.0.1'])\",{'__builtins__':None})>>>\u6b63\u5728Ping127.0.0.1\u5177\u670932\u5b57\u8282\u7684\u6570\u636e:\u6765\u81ea127.0.0.1\u7684\u56de\u590d:\u5b57\u8282=32\u65f6\u95f4>>\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u79cd\u60c5\u51b5\u975e\u5e38\u591a\uff0c\u6bd4\u5982\u5bfc\u5165os\u6a21\u5757\uff0c\u4e00\u822c\u7528\u6765\u5904\u7406\u8def\u5f84\u95ee\u9898\u3002\u6240\u4ee5\u8bf4\uff0c\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\uff0c\u5b8c\u5168\u53ef\u4ee5\u5217\u4e3e\u5927\u91cf\u7684\u529f\u80fd\u51fd\u6570\uff0c\u6765\u63a2\u6d4b\u76ee\u6807object\u7684\u5b50\u7c7b\u4e2d\u662f\u5426\u542b\u6709\u4e00\u4e9b\u5371\u9669\u7684\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002\u62d2\u7edd\u670d\u52a1\u653b\u51fb2\u540c\u6837\uff0c\u6211\u4eec\u751a\u81f3\u53ef\u4ee5\u7ed5\u8fc7__builtins__\u4e3aNone\uff0c\u9020\u6210\u4e00\u6b21\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff0cPayload(\u6765\u81ea\u8001\u5916blog)\u5982\u4e0b\uff1aPython>>>eval('(lambdafc=(lambdan:[c1=\"c\"2=\"in\"3=\"().__class__.__bases__[0\"language=\"for\"][/c].__subclasses__()ifc.__name__==n][0]):fc(\"function\")(fc(\"code\")(0,0,0,0,\"KABOOM\",(),(),(),\"\",\"\",0,\"\"),{})())()',{\"__builtins__\":None})1>>>eval('(lambdafc=(lambdan:[c1=\"c\"2=\"in\"3=\"().__class__.__bases__[0\"language=\"for\"][/c].__subclasses__()ifc.__name__==n][0]):fc(\"function\")(fc(\"code\")(0,0,0,0,\"KABOOM\",(),(),(),\"\",\"\",0,\"\"),{})())()',{\"__builtins__\":None})\u8fd0\u884c\u4e0a\u9762\u7684\u4ee3\u7801\uff0cPython\u76f4\u63a5crash\u6389\u4e86\uff0c\u9020\u6210\u62d2\u7edd\u670d\u52a1\u653b\u51fb\u3002\u539f\u7406\u662f\u901a\u8fc7\u5d4c\u5957\u7684lambda\u6765\u6784\u9020\u4e00\u7247\u4ee3\u7801\u6bb5\uff0c\u5373code\u5bf9\u8c61\u3002\u4e3a\u8fd9\u4e2acode\u5bf9\u8c61\u5206\u914d\u7a7a\u7684\u6808\uff0c\u5e76\u7ed9\u51fa\u76f8\u5e94\u7684\u4ee3\u7801\u5b57\u7b26\u4e32\uff0c\u8fd9\u91cc\u662fKABOOM\uff0c\u5728\u7a7a\u6808\u4e0a\u6267\u884c\u4ee3\u7801\uff0c\u4f1a\u51fa\u73b0crash\u3002\u6784\u9020\u5b8c\u6210\u540e\uff0c\u8c03\u7528fc\u51fd\u6570\u5373\u53ef\u89e6\u53d1\uff0c\u5176\u601d\u8def\u4e0d\u53ef\u8c13\u4e0d\u6deb\u8361\u3002\u603b\u7ed3\u4ece\u4e0a\u9762\u7684\u5185\u5bb9\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u5355\u5355\u5c06\u5185\u7f6e\u6a21\u5757\u7f6e\u4e3a\u7a7a\uff0c\u662f\u4e0d\u591f\u7684\uff0c\u6700\u597d\u7684\u673a\u5236\u662f\u6784\u9020\u767d\u540d\u5355\uff0c\u5982\u679c\u89c9\u5f97\u6bd4\u8f83\u9ebb\u70e6\uff0c\u53ef\u4ee5\u4f7f\u7528ast.literal_eval\u4ee3\u66ff\u4e0d\u5b89\u5168\u7684eval\u3002\u53c2\u8003\u8d44\u6599\uff1ahttp://nedbatchelder.com/blog\u2026http://drops.wooyun.org/web/7490http://stackoverflow.com/ques\u2026http://www.chenxm.cc/post/329\u20261\u8d5e3\u6536\u85cf1\u8bc4\u8bba"]},
{"art_title": ["Python \u9759\u6001\u65b9\u6cd5\u548c\u7c7b\u65b9\u6cd5\u7684\u533a\u522b"], "art_url": ["http://python.jobbole.com/88765/"], "art_create_time": ["2017/10/25"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/24004ba5c7c6660ad259e346b2d86114.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u9a7d\u9a6c\u00a0\u00a0\u00a0pythonstaticmethodandclassmethodThoughclassmethodandstaticmethodarequitesimilar,there\u2019saslightdifferenceinusageforbothentities:classmethodmusthaveareferencetoaclassobjectasthefirstparameter,whereasstaticmethodcanhavenoparametersatall.Let\u2019slookatallthatwassaidinrealexamples.\u5c3d\u7ba1classmethod\u548cstaticmethod\u975e\u5e38\u76f8\u4f3c\uff0c\u4f46\u5728\u7528\u6cd5\u4e0a\u4f9d\u7136\u6709\u4e00\u4e9b\u660e\u663e\u7684\u533a\u522b\u3002classmethod\u5fc5\u987b\u6709\u4e00\u4e2a\u6307\u5411\u00a0\u7c7b\u5bf9\u8c61\u00a0\u7684\u5f15\u7528\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u800cstaticmethod\u53ef\u4ee5\u6ca1\u6709\u4efb\u4f55\u53c2\u6570\u3002\u8ba9\u6211\u4eec\u770b\u51e0\u4e2a\u4f8b\u5b50\u3002\u4f8b\u5b50\u2013BoilerplateLet\u2019sassumeanexampleofaclass,dealingwithdateinformation(thisiswhatwillbeourboilerplatetocookon):PythonclassDate(object):def__init__(self,day=0,month=0,year=0):self.day=dayself.month=monthself.year=year123456classDate(object):\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,day=0,month=0,year=0):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.day=day\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.month=month\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.year=yearThisclassobviouslycouldbeusedtostoreinformationaboutcertaindates(withouttimezoneinformation;let\u2019sassumealldatesarepresentedinUTC).\u5f88\u660e\u663e\uff0c\u8fd9\u4e2a\u7c7b\u7684\u5bf9\u8c61\u53ef\u4ee5\u5b58\u50a8\u65e5\u671f\u4fe1\u606f\uff08\u4e0d\u5305\u62ec\u65f6\u533a\uff0c\u5047\u8bbe\u4ed6\u4eec\u90fd\u5b58\u50a8\u5728UTC\uff09\u3002Herewehave__init__,atypicalinitializerofPythonclassinstances,whichreceivesargumentsasatypicalinstancemethod,havingthefirstnon-optionalargument(self)thatholdsreferencetoanewlycreatedinstance.\u8fd9\u91cc\u7684\u00a0init\u00a0\u65b9\u6cd5\u7528\u4e8e\u521d\u59cb\u5316\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e00\u5b9a\u662fself\uff0c\u7528\u4e8e\u6307\u5411\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u5bf9\u8c61\u3002ClassMethodWehavesometasksthatcanbenicelydoneusingclassmethods.Let\u2019sassumethatwewanttocreatealotofDateclassinstanceshavingdateinformationcomingfromoutersourceencodedasastringofnextformat(\u2018dd-mm-yyyy\u2019).Wehavetodothatindifferentplacesofoursourcecodeinproject.\u5229\u7528classmethod\u53ef\u4ee5\u505a\u4e00\u4e9b\u5f88\u68d2\u7684\u4e1c\u897f\u3002\u6bd4\u5982\u6211\u4eec\u53ef\u4ee5\u652f\u6301\u4ece\u7279\u5b9a\u683c\u5f0f\u7684\u65e5\u671f\u5b57\u7b26\u4e32\u6765\u521b\u5efa\u5bf9\u8c61\uff0c\u5b83\u7684\u683c\u5f0f\u662f(\u2018dd-mm-yyyy\u2019)\u3002\u5f88\u660e\u663e\uff0c\u6211\u4eec\u53ea\u80fd\u5728\u5176\u4ed6\u5730\u65b9\u800c\u4e0d\u662f\u00a0init\u00a0\u65b9\u6cd5\u91cc\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002Sowhatwemustdohereis:Parseastringtoreceiveday,monthandyearasthreeintegervariablesora3-itemtupleconsistingofthatvariable.InstantiateDatebypassingthosevaluestoinitializationcall.Thiswilllooklike:\u5927\u6982\u6b65\u9aa4\uff1a\u89e3\u6790\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\u6574\u6570day\uff0cmonth\uff0cyear\u3002\u4f7f\u7528\u5f97\u5230\u7684\u4fe1\u606f\u521d\u59cb\u5316\u5bf9\u8c61\u4ee3\u7801\u5982\u4e0bPythonday,month,year=map(int,string_date.split('-'))date1=Date(day,month,year)12day,month,year=map(int,string_date.split('-'))date1=Date(day,month,year)\u7406\u60f3\u7684\u60c5\u51b5\u662fDate\u7c7b\u672c\u8eab\u53ef\u4ee5\u5177\u5907\u5904\u7406\u5b57\u7b26\u4e32\u65f6\u95f4\u7684\u80fd\u529b\uff0c\u89e3\u51b3\u4e86\u91cd\u7528\u6027\u95ee\u9898\uff0c\u6bd4\u5982\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u65b9\u6cd5\u3002Forthispurpose,C++hassuchfeatureasoverloading,butPythonlacksthatfeature-sohere\u2019swhenclassmethodapplies.Letscreateanother\u201cconstructor\u201d.C++\u53ef\u4ee5\u65b9\u4fbf\u7684\u4f7f\u7528\u91cd\u8f7d\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u662fpython\u4e0d\u5177\u5907\u7c7b\u4f3c\u7684\u7279\u6027\u3002\u6240\u4ee5\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u4f7f\u7528classmethod\u6765\u5e2e\u6211\u4eec\u5b9e\u73b0\u3002Python@classmethoddeffrom_string(cls,date_as_string):day,month,year=map(int,date_as_string.split('-'))date1=cls(day,month,year)returndate1date2=Date.from_string('11-09-2012')12345678@classmethod\u00a0\u00a0deffrom_string(cls,date_as_string):\u00a0\u00a0day,month,year=map(int,date_as_string.split('-'))\u00a0\u00a0date1=cls(day,month,year)\u00a0\u00a0returndate1\u00a0\u00a0date2=Date.from_string('11-09-2012')Let\u2019slookmorecarefullyattheaboveimplementation,andreviewwhatadvantageswehavehere:We\u2019veimplementeddatestringparsinginoneplaceandit\u2019sreusablenow.Encapsulationworksfinehere(ifyouthinkthatyoucouldimplementstringparsingasasinglefunctionelsewhere,thissolutionfitsOOPparadigmfarbetter).clsisanobjectthatholdsclassitself,notaninstanceoftheclass.It\u2019sprettycoolbecauseifweinheritourDateclass,allchildrenwillhavefrom_stringdefinedalso.\u8ba9\u6211\u4eec\u5728\u4ed4\u7ec6\u7684\u5206\u6790\u4e0b\u4e0a\u9762\u7684\u5b9e\u73b0\uff0c\u770b\u770b\u5b83\u7684\u597d\u5904\u3002\u6211\u4eec\u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u5b9e\u73b0\u4e86\u529f\u80fd\uff0c\u56e0\u6b64\u5b83\u662f\u53ef\u91cd\u7528\u7684\u3002\u8fd9\u91cc\u7684\u5c01\u88c5\u5904\u7406\u7684\u4e0d\u9519\uff08\u5982\u679c\u4f60\u53d1\u73b0\u8fd8\u53ef\u4ee5\u5728\u4ee3\u7801\u7684\u4efb\u610f\u5730\u65b9\u6dfb\u52a0\u4e00\u4e2a\u4e0d\u5c5e\u4e8eDate\u7684\u51fd\u6570\u6765\u5b9e\u73b0\u7c7b\u4f3c\u7684\u529f\u80fd\uff0c\u90a3\u5f88\u663e\u7136\u4e0a\u9762\u7684\u529e\u6cd5\u66f4\u7b26\u5408OOP\u89c4\u8303\uff09\u3002\u00a0cls\u00a0\u662f\u4e00\u4e2a\u4fdd\u5b58\u4e86\u00a0class\u00a0\u7684\u5bf9\u8c61\uff08\u6240\u6709\u7684\u4e00\u5207\u90fd\u662f\u5bf9\u8c61\uff09\u3002\u66f4\u5999\u7684\u662f\uff0cDate\u7c7b\u7684\u884d\u751f\u7c7b\u90fd\u4f1a\u5177\u6709from_string\u8fd9\u4e2a\u6709\u7528\u7684\u65b9\u6cd5\u3002StaticmethodWhataboutstaticmethod?It\u2019sprettysimilartoclassmethodbutdoesn\u2019ttakeanyobligatoryparameters(likeaclassmethodorinstancemethoddoes).Let\u2019slookatthenextusecase.Wehaveadatestringthatwewanttovalidatesomehow.ThistaskisalsologicallyboundtoDateclasswe\u2019veusedsofar,butstilldoesn\u2019trequireinstantiationofit.Hereiswherestaticmethodcanbeuseful.Let\u2019slookatthenextpieceofcode:staticmethod\u6ca1\u6709\u4efb\u4f55\u5fc5\u9009\u53c2\u6570\uff0c\u800cclassmethod\u7b2c\u4e00\u4e2a\u53c2\u6570\u6c38\u8fdc\u662fcls\uff0cinstancemethod\u7b2c\u4e00\u4e2a\u53c2\u6570\u6c38\u8fdc\u662fself\u3002Python@staticmethoddefis_date_valid(date_as_string):day,month,year=map(int,date_as_string.split('-'))returnday<=31andmonth<=12andyear<=3999#usage:is_date=Date.is_date_valid('11-09-2012')1234567@staticmethoddefis_date_valid(date_as_string):\u00a0\u00a0day,month,year=map(int,date_as_string.split('-'))\u00a0\u00a0returnday<=31andmonth<=12andyear<=3999\u00a0#usage:is_date=Date.is_date_valid('11-09-2012')So,aswecanseefromusageofstaticmethod,wedon\u2019thaveanyaccesstowhattheclassis-it\u2019sbasicallyjustafunction,calledsyntacticallylikeamethod,butwithoutaccesstotheobjectandit\u2019sinternals(fieldsandanothermethods),whileclassmethoddoes.\u6240\u4ee5\uff0c\u4ece\u9759\u6001\u65b9\u6cd5\u7684\u4f7f\u7528\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec\u4e0d\u4f1a\u8bbf\u95ee\u5230class\u672c\u8eab\u2013\u5b83\u57fa\u672c\u4e0a\u53ea\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5728\u8bed\u6cd5\u4e0a\u5c31\u50cf\u4e00\u4e2a\u65b9\u6cd5\u4e00\u6837\uff0c\u4f46\u662f\u6ca1\u6709\u8bbf\u95ee\u5bf9\u8c61\u548c\u5b83\u7684\u5185\u90e8\uff08\u5b57\u6bb5\u548c\u5176\u4ed6\u65b9\u6cd5\uff09\uff0c\u76f8\u53cdclassmethod\u4f1a\u8bbf\u95eecls\uff0cinstancemethod\u4f1a\u8bbf\u95eeself\u3002\u53c2\u8003Meaningof@classmethodand@staticmethodforbeginner?1\u8d5e5\u6536\u85cf1\u8bc4\u8bba"]},
{"art_title": ["\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-\u6807\u51c6\u4e0e\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52"], "art_url": ["http://python.jobbole.com/88747/"], "art_create_time": ["2017/10/25"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-10-24-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E5%AE%9E%E8%B7%B5-%E6%A0%87%E5%87%86%E4%B8%8E%E5%B1%80%E9%83%A8%E5%8A%A0%E6%9D%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/lwlr_k01.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u6700\u8fd1\u5f00\u59cb\u603b\u7ed3\u5b66\u4e60\u56de\u5f52\u76f8\u5173\u7684\u4e1c\u4e1c\u4e86\uff0c\u4e0e\u5206\u7c7b\u7684\u76ee\u6807\u53d8\u91cf\u662f\u6807\u79f0\u578b\u4e0d\u540c\uff0c\u56de\u5f52\u662f\u5bf9\u8fde\u7eed\u578b\u6570\u636e\u8fdb\u9884\u6d4b\u3002\u5f53\u7136\u8fd8\u662f\u4ece\u6700\u7b80\u5355\u7684\u7ebf\u6027\u56de\u5f52\u5f00\u59cb\uff0c\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u65e0\u504f\u5dee\u7684\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u548c\u6709\u504f\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u7684\u7406\u8bba\u57fa\u7840\u4ee5\u53ca\u76f8\u5e94\u7684Python\u5b9e\u73b0\u3002\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7684\u7406\u8bba\u77e5\u8bc6\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u65e2\u53ef\u4ee5\u5199\u51fa\u5b83\u7684\u6807\u91cf\u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u5199\u6210\u77e9\u9635\u7684\u5f62\u5f0f\uff0c\u5176\u4e2d\u77e9\u9635\u7684\u5f62\u5f0f\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6295\u5f71\u77e9\u9635\u8fdb\u884c\u63a8\u5230\u5f97\u5230\u3002\u672c\u90e8\u5206\u5c31\u5bf9\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u4e0b\u7b80\u5355\u7684\u63a8\u5bfc\u3002\u7ed9\u5b9a\u4e00\u7ec4\u6570\u636e\u5176\u4e2d\u5305\u62ec\u7279\u5f81\u77e9\u9635X,\u76ee\u6807\u53d8\u91cf\u5411\u91cfy:\u5176\u4e2dX\u7b2c\u4e00\u5217\u4e3a\u622a\u8ddd\u9879\uff0c\u6211\u4eec\u505a\u7ebf\u6027\u56de\u5f52\u662f\u4e3a\u4e86\u5f97\u5230\u4e00\u4e2a\u6700\u4f18\u56de\u5f52\u7cfb\u6570\u5411\u91cfw\u4f7f\u5f97\u5f53\u6211\u4eec\u7ed9\u5b9a\u4e00\u4e2ax\u80fd\u591f\u901a\u8fc7y=xw\u9884\u6d4by\u7684\u503c\u3002\u5176\u4e2d\u6700\u5c0f\u4e8c\u4e58\u6cd5\u83b7\u53d6\u56de\u5f52\u7cfb\u6570\u90a3\u4e48\u600e\u6837\u7684w\u624d\u662f\u6700\u4f18\u7684\u5462\uff1f\u5728\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u4e2d\u6211\u4eec\u9700\u8981\u627e\u5230\u662f\u8bef\u5dee\u6700\u5c0f\u7684w,\u5373\u9884\u6d4b\u7684y\u503c\u4e0e\u771f\u5b9e\u7684y\u503c\u4e4b\u95f4\u7684\u5dee\u503c\uff0c\u4e3a\u4e86\u907f\u514d\u7b80\u5355\u7d2f\u52a0\u9020\u6210\u7684\u6b63\u8d1f\u5dee\u503c\u76f8\u4e92\u62b5\u6d88\uff0c\u8fd9\u91cc\u91c7\u7528\u4e86\u5e73\u65b9\u8bef\u5dee:\u5bf9\u4e8e\u4e0a\u8ff0\u5f0f\u5b50f(w)\u53ef\u4ee5\u901a\u8fc7\u68af\u5ea6\u4e0b\u964d\u7b49\u65b9\u6cd5\u5f97\u5230\u6700\u4f18\u89e3\u3002\u4f46\u662f\u4f7f\u7528\u77e9\u9635\u8868\u793a\u5c06\u4f1a\u662f\u7684\u6c42\u89e3\u548c\u7a0b\u5e8f\u66f4\u4e3a\u7b80\u5355:\u5c06f(w)\u5bf9w\u6c42\u5bfc\u53ef\u5f97:\u4f7f\u5176\u7b49\u4e8e0\uff0c\u4fbf\u53ef\u5f97\u5230:\u901a\u8fc7\u6295\u5f71\u77e9\u9635\u83b7\u53d6\u56de\u5f52\u7cfb\u6570\u9664\u4e86\u901a\u8fc7\u6700\u5c0f\u5e73\u65b9\u5dee\u7684\u65b9\u6cd5\u63a8\u5bfc\u5f97\u5230w\u7684\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6295\u5f71\u77e9\u9635(ProjectionMatrix)\u6765\u5f97\u5230\u3002\u6211\u4eec\u77e5\u9053\u5982\u679c\u6211\u4eec\u80fd\u591f\u6c42\u5f97\u4e00\u4e2aw\u4f7f\u5f97Xw=y\u80af\u5b9a\u662f\u6700\u597d\u7684\uff0c\u4f46\u662f\u5b9e\u9645\u60c5\u51b5\u4e2dy\u4e00\u822c\u5e76\u4e0d\u5728\u77e9\u9635X\u7684\u5217\u7a7a\u95f4\u4e2d\uff0c\u4e5f\u5c31\u662f\u6b64\u65b9\u7a0b\u65e0\u89e3\uff0c\u4e8e\u662f\u6211\u4eec\u5e0c\u671b\u901a\u8fc7\u5c06\u5411\u91cfy\u6295\u5f71\u5230X\u7684\u5217\u7a7a\u95f4\u4e2d\u5f97\u5230\u6295\u5f71\u77e9\u9635p,\u7136\u540e\u6c42\u89e3Xw=p\u6765\u83b7\u53d6\u4e00\u4e2a\u6700\u63a5\u8fd1\u7684\u4e00\u4e2a\u89e3,\u77e9\u9635X\u7684\u6295\u5f71\u77e9\u9635\u5f62\u5f0f\u4e3a\u4e8e\u662f\u5f97\u5230y\u5728X\u5217\u7a7a\u95f4\u7684\u6295\u5f71\u4e3a\u6b64\u65f6\u65b9\u7a0bXw=p\u662f\u6709\u89e3\u7684\uff0c\u5f97\u5230\u6700\u63a5\u8fd1Xw=y\u7684\u89e3\u4e3a:\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7684Python\u5b9e\u73b0\u901a\u8fc7\u77e9\u9635\u5f62\u5f0f\u6211\u4e48\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u901a\u8fc7Numpy\u7684\u63a5\u53e3\u8fdb\u884c\u77e9\u9635\u8fd0\u7b97\u83b7\u53d6\u7ebf\u6027\u56de\u5f52\u7cfb\u6570\u5411\u91cfw\u0302\u00a0,\u5b9e\u73b0\u5982\u4e0b:Pythondefstd_linreg(X,Y):xTx=X.T*Xifnp.linalg.det(xTx)==0:print('xTxisasingularmatrix')returnreturnxTx.I*X.T*Y123456defstd_linreg(X,Y):\u00a0\u00a0\u00a0\u00a0xTx=X.T*X\u00a0\u00a0\u00a0\u00a0ifnp.linalg.det(xTx)==0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('xTxisasingularmatrix')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0returnxTx.I*X.T*Y\u901a\u8fc7\u5bf9\u73b0\u6709\u6570\u636e\u8fdb\u884c\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u5e76\u7ed8\u5236\u56de\u5f52\u76f4\u7ebf\u5f97\u5230\u5982\u4e0b\u56fe(\u5b8c\u6574\u4ee3\u7801\u548c\u6570\u636e\u89c1:\u00a0https://github.com/PytLab/MLBox/tree/master/linear_regression)Pythonw=[3.00774324,1.69532264]1w=[3.00774324,1.69532264]\u76f8\u5173\u7cfb\u6570(CorrelationCoefficient)\u8ba1\u7b97\u5982\u4f55\u5224\u65ad\u83b7\u5f97\u7684\u6a21\u578b\u9884\u6d4b\u80fd\u529b\u7684\u597d\u574f\u5462\uff1f\u6211\u4eec\u9700\u8981\u8ba1\u7b97\u6a21\u578b\u8ba1\u7b97\u5f97\u5230\u7684yy\u7684\u503c\u5411\u91cf\u4e0e\u5b9e\u9645yy\u503c\u5411\u91cf\u7684\u5339\u914d\u7a0b\u5ea6,\u4e5f\u5c31\u662f\u8ba1\u7b97\u76f8\u5173\u7cfb\u6570CorrelationCoefficient\u3002\u76f8\u5173\u7cfb\u6570\u7684\u8ba1\u7b97\u516c\u5f0f:\u4e5f\u5c31\u662f\u4e24\u4e2a\u6570\u636e\u5e8f\u5217\u7684\u534f\u65b9\u5dee\u5e76\u9664\u4e0a\u5404\u81ea\u7684\u6807\u51c6\u5dee\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u79cd\u5254\u9664\u4e86\u4e24\u4e2a\u53d8\u91cf\u91cf\u7eb2\u5f71\u54cd\u3001\u6807\u51c6\u5316\u540e\u7684\u7279\u6b8a\u534f\u65b9\u5dee\u3002\u800c\u534f\u65b9\u5dee\u4fbf\u662f\u8861\u91cf\u4e24\u4e2a\u53d8\u91cf\u53d8\u5316\u8d8b\u52bf\u662f\u5426\u76f8\u4f3c\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u662f\u540c\u5411\u53d8\u5316(\u540c\u65f6\u53d8\u5927\u6216\u53d8\u5c0f)\u8fd8\u662f\u53cd\u5411\u53d8\u5316(\u4e00\u4e2a\u53d8\u5927\u4e00\u4e2a\u53d8\u5c0f),\u540c\u5411\u6216\u8005\u53cd\u5411\u7684\u7a0b\u5ea6\u5982\u4f55\uff0c\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b:\u901a\u8fc7\u516c\u5f0f\u53ef\u4ee5\u770b\u51fa\uff0c\u5982\u679c\u5bf9\u4e8e\u5411\u91cf\u4e2d\u7684\u6bcf\u4e2ax,y\u540c\u65f6\u5927\u4e8e\u6216\u540c\u65f6\u5c0f\u4e8e\u5404\u81ea\u7684\u671f\u671b\u503c\uff0c\u534f\u65b9\u5dee\u4e3a\u6b63\uff0c\u76f8\u53cd\u5219\u4e3a\u8d1f\u3002\u53ef\u89c1\u5982\u679c\u534f\u65b9\u5dee\u8d8a\u5927\u76f8\u4f3c\u7a0b\u5ea6\u5c31\u8d8a\u9ad8\uff0c\u534f\u65b9\u5dee\u8d8a\u5c0f\u76f8\u4f3c\u7a0b\u5ea6\u5c31\u8d8a\u5c0f\u3002\u4e5f\u53ef\u4ee5\u770b\u5230\u5982\u679cX,Y\u76f8\u540c\uff0c\u534f\u65b9\u5dee\u5c31\u662f\u65b9\u5dee\uff0c\u4e5f\u5c31\u662f\u65b9\u5dee\u662f\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\u4e0b\u7684\u534f\u65b9\u5dee\u3002\u5173\u4e8e\u534f\u65b9\u5dee\u4e0e\u76f8\u5173\u7cfb\u6570\u7684\u901a\u4fd7\u89e3\u91ca\u53ef\u4ee5\u53c2\u8003\u77e5\u4e4e\u4e0a\u7684\u56de\u7b54:\u5982\u4f55\u901a\u4fd7\u6613\u61c2\u5730\u89e3\u91ca\u300c\u534f\u65b9\u5dee\u300d\u4e0e\u300c\u76f8\u5173\u7cfb\u6570\u300d\u7684\u6982\u5ff5\uff1f\u867d\u7136Numpy\u4e2d\u6709\u8ba1\u7b97\u534f\u65b9\u5dee\u7684\u63a5\u53e3numpy.corrcoef\uff0c\u662f\u5206\u522b\u5bf9\u4e24\u4e24\u5411\u91cf\u8fdb\u884c\u6bd4\u8f83\u5e76\u8ba1\u7b97\u534f\u65b9\u5dee\uff0c\u5f97\u5230\u534f\u65b9\u5dee\u77e9\u9635\u3002\u4e3a\u4e86\u7ec3\u4e60\uff0c\u6211\u8fd8\u662f\u7a0d\u5fae\u81ea\u5df1\u8ba1\u7b97\u4e86\u4e0b\u534f\u65b9\u5dee\u5e76\u53ea\u8ba1\u7b97\u4e24\u5217\u4e0d\u540c\u6570\u636e\u4e4b\u95f4\u7684\u76f8\u5173\u7cfb\u6570:Pythondefget_corrcoef(X,Y):#XY\u7684\u534f\u65b9\u5deecov=np.mean(X*Y)-np.mean(X)*np.mean(Y)returncov/(np.var(X)*np.var(Y))**0.51234defget_corrcoef(X,Y):\u00a0\u00a0\u00a0\u00a0#XY\u7684\u534f\u65b9\u5dee\u00a0\u00a0\u00a0\u00a0cov=np.mean(X*Y)-np.mean(X)*np.mean(Y)\u00a0\u00a0\u00a0\u00a0returncov/(np.var(X)*np.var(Y))**0.5\u901a\u8fc7\u5bf9\u4e0a\u9762\u5f97\u5230\u7684\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u5f97\u5230\u7684\u9884\u6d4b\u7684\u503c\u4e0e\u5b9e\u9645\u7684\u503c\u8fdb\u884c\u76f8\u5173\u7cfb\u6570\u8ba1\u7b97\u53ef\u4ee5\u5f97\u5230\u76f8\u5173\u7cfb\u6570\u4e3aPythonCorrelationcoeffient:0.98647356223351251Correlationcoeffient:0.9864735622335125\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52(LocalWeightedLinearRegression)\u4e0a\u9762\u7684\u6570\u636e\u70b9\u662f\u901a\u8fc7\u516c\u5f0fy=3+1.7x+0.1sin(30x)\u6dfb\u52a0\u566a\u58f0\u751f\u6210\u7684\u6570\u636e\uff0c\u800c\u6807\u51c6\u7684\u7ebf\u6027\u56de\u5f52\u662f\u4e00\u79cd\u65e0\u504f\u5dee\u4f30\u8ba1\uff0c\u5728\u8ba1\u7b97\u6240\u6709\u70b9\u7684\u65f6\u5019\u90fd\u662f\u65e0\u504f\u5dee\u7684\u8ba1\u7b97\u8bef\u5dee\u5e76\u901a\u8fc7\u4f18\u5316\u65b9\u6cd5\u4f18\u5316\u8bef\u5dee\uff0c\u5982\u679c\u9488\u5bf9\u4e0d\u540c\u7684\u70b9\u80fd\u591f\u5bf9\u8bef\u5dee\u8fdb\u884c\u8c03\u6574\u4fbf\u53ef\u4ee5\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u907f\u514d\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u5e26\u6765\u7684\u6b20\u62df\u5408\u73b0\u8c61\u3002\u4e5f\u5c31\u662f\u5f15\u5165\u504f\u5dee\u6765\u964d\u4f4e\u9884\u6d4b\u7684\u5747\u65b9\u8bef\u5dee\uff0c\u672c\u90e8\u5206\u603b\u7ed3\u4e0b\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u7684\u65b9\u6cd5\u3002\u5f53\u6211\u4eec\u83b7\u53d6\u67d0\u4e2axx\u7684\u9884\u6d4b\u503c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u8ba1\u7b97\u56de\u5f52\u7cfb\u6570w\uff0c\u4f46\u662f\u5982\u679c\u9488\u5bf9\u6837\u672c\u4e2d\u7684\u6570\u636e\uff0c\u8ddd\u79bbx\u8d8a\u8fd1\u6211\u4eec\u5c31\u7ed9\u4e2a\u8d8a\u5927\u7684\u6743\u91cd\uff0c\u5982\u679c\u8ddd\u79bb\u8d8a\u8fdc\u5c31\u7ed9\u4e00\u4e2a\u5c0f\u7684\u6743\u91cd\uff0c\u8fd9\u6837\u5c31\u4f1a\u4f7f\u5f97\u9488\u5bf9x\u7684\u9884\u6d4b\u503cypredict\u80fd\u591f\u66f4\u8d34\u5408\u6837\u672c\u6570\u636e\u3002\u5f53\u6211\u4eec\u9700\u8981\u5bf9\u6570\u636e\u70b9xx\u76f8\u5e94\u7684\u76ee\u6807\u503c\u8fdb\u884c\u9884\u6d4b\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u7ed9\u6837\u672c\u4e2d\u7684\u6bcf\u4e2a\u70b9\u8d4b\u4e88\u4e00\u4e2a\u6743\u91cd\u503cwi(\u4e3a\u4e86\u533a\u5206\u6743\u91cd\u548c\u56de\u5f52\u7cfb\u6570\uff0c\u5728\u8fd9\u91cc\u7528\u03b8\u8868\u793a\u56de\u5f52\u7cfb\u6570\uff0cw\u8868\u793a\u6743\u91cd),\u90a3\u4e48\u5e73\u65b9\u8bef\u5dee\u7684\u8868\u8fbe\u5f0f\u5c31\u53d8\u6210:\u901a\u8fc7\u77e9\u9635\u53ef\u4ee5\u8868\u793a\u6210:f(\u03b8)\u5bf9\u03b8\u6c42\u5bfc\u7b49\u4e8e0\u5f97\u5230:\u901a\u8fc7\u4e0a\u9762\u7684\u516c\u5f0f\uff0c\u5bf9\u4e8e\u4efb\u610f\u7ed9\u5b9a\u7684\u672a\u77e5\u6570\u636e\u53ef\u4ee5\u8ba1\u7b97\u51fa\u5bf9\u5e94\u7684\u56de\u5f52\u7cfb\u6570\u03b8\u03b8\uff0c\u5e76\u5f97\u5230\u76f8\u5e94\u7684\u9884\u6d4b\u503cy,\u5176\u4e2dW\u662f\u4e00\u4e2a\u5bf9\u89d2\u77e9\u9635\uff0c\u5bf9\u89d2\u7ebf\u4e0a\u7684\u5143\u7d20wii\u5bf9\u5e94\u6837\u672c\u70b9xi\u7684\u6743\u91cd\u503c\u3002\u4f7f\u7528\u9ad8\u65af\u6838\u6765\u8d4b\u503c\u6743\u91cd\u90a3\u4e48\u6743\u91cd\u7684\u8868\u8fbe\u5f0f\u53c8\u662f\u600e\u6837\u7684\u5462\uff0c\u6211\u4eec\u9700\u8981\u8ddd\u79bb\u7ed9\u5b9ax\u7684\u6837\u672c\u70b9\u7684\u6743\u91cd\u8d8a\u9ad8\uff0cLWRL\u4f7f\u7528\u6838\u6765\u5bf9\u9644\u8fd1\u7684\u70b9\u8d4b\u4e88\u66f4\u9ad8\u7684\u6743\u91cd\uff0c\u6700\u5e38\u7528\u7684\u662f\u9ad8\u65af\u6838\u51fd\u6570\uff0c\u5bf9\u5e94\u8868\u8fbe\u5f0f\u5982\u4e0b:\u901a\u8fc7\u516c\u5f0f\u53ef\u4ee5\u770b\u5230\u5982\u679cxi\u8ddd\u79bbxx\u7684\u8ddd\u79bb\u8d8a\u5c0f\uff0cwii\u5c31\u4f1a\u8d8a\u5927\uff0c\u5176\u4e2d\u53c2\u6570k\u51b3\u5b9a\u4e86\u6743\u91cd\u7684\u5927\u5c0f\u3002k\u8d8a\u5927\u6743\u91cd\u7684\u5dee\u8ddd\u5c31\u8d8a\u5c0f\uff0ck\u8d8a\u5c0f\u6743\u91cd\u7684\u5dee\u8ddd\u5c31\u5f88\u5927\uff0c\u4ec5\u6709\u5c40\u90e8\u7684\u70b9\u53c2\u4e0e\u8fdb\u56de\u5f52\u7cfb\u6570\u7684\u6c42\u53d6\uff0c\u5176\u4ed6\u8ddd\u79bb\u8f83\u8fdc\u7684\u6743\u91cd\u90fd\u8d8b\u8fd1\u4e8e\u96f6\u3002\u5982\u679ck\u53bb\u8fdb\u5165\u65e0\u7a77\u5927\uff0c\u6240\u6709\u7684\u6743\u91cd\u90fd\u8d8b\u8fd1\u4e8e1\uff0cW\u4e5f\u5c31\u8fd1\u4f3c\u7b49\u4e8e\u5355\u4f4d\u77e9\u9635\uff0c\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u53d8\u6210\u6807\u51c6\u7684\u65e0\u504f\u5dee\u7ebf\u6027\u56de\u5f52\uff0c\u4f1a\u9020\u6210\u6b20\u62df\u5408\u7684\u73b0\u8c61\uff1b\u5f53k\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u8ddd\u79bb\u8f83\u8fdc\u7684\u6837\u672c\u70b9\u65e0\u6cd5\u53c2\u4e0e\u56de\u5f52\u53c2\u6570\u7684\u6c42\u53d6\uff0c\u4f1a\u9020\u6210\u8fc7\u62df\u5408\u7684\u73b0\u8c61\u3002LWLR\u7684Python\u5b9e\u73b0\u672c\u90e8\u5206\u5bf9\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u8fdb\u884cPython\u5b9e\u73b0\uff0c\u5bf9\u4e8e\u7ed9\u5b9a\u6570\u636e\u6c42\u53d6\u76f8\u5e94\u56de\u5f52\u7cfb\u6570:Pythondeflwlr(x,X,Y,k):'''\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u70b9\uff0c\u83b7\u53d6\u76f8\u5e94\u6743\u91cd\u77e9\u9635\u5e76\u8fd4\u56de\u56de\u5f52\u7cfb\u6570'''m=X.shape[0]#\u521b\u5efa\u9488\u5bf9x\u7684\u6743\u91cd\u77e9\u9635W=np.matrix(np.zeros((m,m)))foriinrange(m):xi=np.array(X[i][0])x=np.array(x)W[i,i]=exp((np.linalg.norm(x-xi))/(-2*k**2))#\u83b7\u53d6\u6b64\u70b9\u76f8\u5e94\u7684\u56de\u5f52\u7cfb\u6570xWx=X.T*W*Xifnp.linalg.det(xWx)==0:print('xWxisasingularmatrix')returnw=xWx.I*X.T*W*Yreturnw1234567891011121314151617deflwlr(x,X,Y,k):\u00a0\u00a0\u00a0\u00a0'''\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u70b9\uff0c\u83b7\u53d6\u76f8\u5e94\u6743\u91cd\u77e9\u9635\u5e76\u8fd4\u56de\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0m=X.shape[0]\u00a0\u00a0\u00a0\u00a0#\u521b\u5efa\u9488\u5bf9x\u7684\u6743\u91cd\u77e9\u9635\u00a0\u00a0\u00a0\u00a0W=np.matrix(np.zeros((m,m)))\u00a0\u00a0\u00a0\u00a0foriinrange(m):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0xi=np.array(X[i][0])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0x=np.array(x)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0W[i,i]=exp((np.linalg.norm(x-xi))/(-2*k**2))\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u6b64\u70b9\u76f8\u5e94\u7684\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0xWx=X.T*W*X\u00a0\u00a0\u00a0\u00a0ifnp.linalg.det(xWx)==0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('xWxisasingularmatrix')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0w=xWx.I*X.T*W*Y\u00a0\u00a0\u00a0\u00a0returnw\u6211\u4eec\u5bf9\u4e0a\u90e8\u5206\u4f7f\u7528\u7684\u6570\u636e\u8fdb\u884c\u56de\u5f52\u5e76\u7ed8\u5236\u56de\u5f52\u66f2\u7ebf:\u5f53k=0.5,\u57fa\u672c\u4e0a\u5c31\u662f\u65e0\u504f\u5dee\u7684\u6807\u51c6\u7ebf\u6027\u56de\u5f52PythonCorrelationcoefficient:0.98692924251240141Correlationcoefficient:0.9869292425124014\u5f53k=0.1,\u53ef\u4ee5\u8f83\u597d\u7684\u53cd\u5e94\u6570\u636e\u7684\u6f5c\u5728\u89c4\u5f8bPythonCorrelationcoefficient:0.9978904026105831Correlationcoefficient:0.997890402610583\u5f53k=0.03,\u62df\u5408\u7684\u66f2\u7ebf\u8f83\u591a\u7684\u8003\u8651\u4e86\u566a\u58f0\u6570\u636e\u5bfc\u81f4\u8fc7\u62df\u5408\u7684\u73b0\u8c61PythonCorrelationcoefficient:0.99959754982853121Correlationcoefficient:0.9995975498285312\u603b\u7ed3\u672c\u6587\u603b\u7ed3\u4e86\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u4ee5\u53ca\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5e76\u5bf9\u4e24\u5f20\u56de\u5f52\u65b9\u5f0f\u7ed9\u4e0e\u4e86Python\u7684\u5b9e\u73b0\u3002\u53ef\u89c1\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u5728\u53d6\u5f97\u9002\u5f53\u7684k\uff0c\u4fbf\u53ef\u4ee5\u8f83\u597d\u7684\u53d1\u73b0\u6570\u636e\u7684\u5185\u5728\u6f5c\u8d28\uff0c\u4f46\u662f\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u6709\u4e2a\u7f3a\u70b9\u5c31\u662f\u7c7b\u4f3ckNN\u4e00\u6837\uff0c\u6bcf\u8ba1\u7b97\u4e00\u4e2a\u70b9\u7684\u9884\u6d4b\u503c\u5c31\u9700\u8981\u5229\u7528\u6240\u6709\u6570\u636e\u6837\u672c\u8fdb\u884c\u8ba1\u7b97\uff0c\u5982\u679c\u6570\u636e\u91cf\u5f88\u5927\uff0c\u8ba1\u7b97\u91cf\u4f1a\u662f\u4e00\u4e2a\u95ee\u9898\u3002\u53c2\u8003\u300aMachineLearninginAction\u300b\u5982\u4f55\u901a\u4fd7\u6613\u61c2\u5730\u89e3\u91ca\u300c\u534f\u65b9\u5dee\u300d\u4e0e\u300c\u76f8\u5173\u7cfb\u6570\u300d\u7684\u6982\u5ff5\uff1f\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff012\u8d5e2\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["Python \u548c SQL Server 2017 \u7684\u5f3a\u5927\u529f\u80fd"], "art_url": ["http://python.jobbole.com/88772/"], "art_create_time": ["2017/10/28"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/10/c35705911d053af37a78aff1f5b5d980.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u674e\u9756\u00a0\u00a0\u00a0Python\u662fSQLServer2017\u7684\u65b0\u529f\u80fd\u3002\u5b83\u4e3b\u8981\u662f\u4e3a\u4e86\u5141\u8bb8\u5728SQLServer\u4e2d\u4f7f\u7528\u57fa\u4e8ePython\u7684\u673a\u5668\u5b66\u4e60\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u4e0e\u4efb\u4f55Python\u5e93\u6216\u6846\u67b6\u4e00\u8d77\u4f7f\u7528\u3002\u4e3a\u4e86\u63d0\u4f9b\u53ef\u80fd\u7684\u4f8b\u5b50\uff0cHitendra\u5c55\u793a\u4e86\u5982\u4f55\u5b89\u5168\u5730\u4f7f\u7528\u8be5\u529f\u80fd\u6765\u63d0\u4f9b\u667a\u80fd\u5e94\u7528\u7a0b\u5e8f\u7f13\u5b58\uff0c\u5176\u4e2dSQLServer\u53ef\u4ee5\u81ea\u52a8\u6307\u793a\u6570\u636e\u4f55\u65f6\u66f4\u6539\u4ee5\u89e6\u53d1\u7f13\u5b58\u5237\u65b0\u3002MSSQLServer2017\u5df2\u7ecf\u901a\u8fc7\u542f\u7528SQL\u670d\u52a1\u5668\u901a\u8fc7\u201c\u4f7f\u7528Python\u7684\u673a\u5668\u5b66\u4e60\u670d\u52a1\u201d\u5728TSQL\u4e2d\u6267\u884cPython\u811a\u672c\uff0c\u6dfb\u52a0\u5230\u5176\u9ad8\u7ea7\u5206\u6790\u6269\u5c55\uff0c\u73b0\u5728\u79f0\u4e3a\u201c\u673a\u5668\u5b66\u4e60\u670d\u52a1\u201d\u3002\u8fd9\u57fa\u672c\u4e0a\u63d0\u4f9b\u4e86\u4e00\u79cd\u6570\u636e\u5e93\u7a0b\u5e8f\u5458\u53ef\u4ee5\u76f4\u63a5\u4ecePython\u4f20\u9012\u6570\u636e\u7684\u65b9\u6cd5\u3002\u8fd9\u6837\u505a\u7684\u6709\u7528\u6027\u4e0d\u4ec5\u9650\u4e8e\u4e3a\u6570\u636e\u5206\u6790\u63d0\u4f9b\u673a\u5668\u5b66\u4e60\u529f\u80fd\uff0c\u56e0\u4e3aPython\u5177\u6709\u8bb8\u591a\u6613\u4e8e\u4f7f\u7528\u7684\u6a21\u5757\u548c\u6846\u67b6\u6765\u89e3\u51b3\u8bb8\u591a\u95ee\u9898\uff0c\u4f8b\u5982\u4f7f\u7528\u6570\u636e\u7ed3\u6784\u6267\u884c\u5927\u91cf\u8ba1\u7b97\u5de5\u4f5c\uff0c\u7528\u4e8e\u5206\u6790\u7684\u56fe\u5f62\u5904\u7406\uff0c\u7f51\u7edc\u64cd\u4f5c\uff0c\u6570\u636e\u5e93\u64cd\u4f5c\uff0c\u7f51\u7edc\u64cd\u4f5c\u6216\u57fa\u4e8e\u672c\u5730/\u7f51\u7edc\u7684\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u3002\u663e\u7136\uff0c\u5176\u4e2d\u8bb8\u591a\u5728\u4e2d\u95f4\u4ef6\u65b9\u9762\u505a\u5f97\u6700\u597d\uff0c\u4f46\u662f\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6709\u65f6\u5019\u76f4\u63a5\u4e0e\u5916\u90e8\u7cfb\u7edf\u901a\u4fe1\uff0c\u800c\u4e0d\u662f\u4f9d\u9760\u5916\u90e8\u8fdb\u7a0b\u901a\u8fc7\u8f6e\u8be2\u6570\u636e\u6e90\u6765\u6267\u884c\u4efb\u52a1\u66f4\u65b9\u4fbf\u3002\u5982\u679c\u5728\u6570\u636e\u5e93\u6216\u6570\u636e\u5c42\u4e2d\u6709\u4e00\u4e2a\u8fd9\u6837\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u4e14\u4e0d\u63d0\u4f9b\u4efb\u4f55\u5b89\u5168\u6027\u95ee\u9898\u65f6\uff0c\u8fd9\u4e0d\u662f\u95ee\u9898\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u5c1d\u8bd5\u6f14\u793a\u5728AdvancedAnalyticsExtension\u4e2d\u4f7f\u7528Python\u7684\u793a\u4f8b\uff0c\u663e\u793a\u6570\u636e\u5e93\u5982\u4f55\u89e6\u53d1\u5916\u90e8\u8fdb\u7a0b\u6765\u5bf9\u4f5c\u4e3a\u53c2\u6570\u63d0\u4f9b\u7684\u6570\u636e\u6267\u884c\u6d3b\u52a8\u3002\u8fd9\u662f\u4e3a\u4e86\u8003\u8651\u5b89\u5168\u6027\uff0c\u6570\u636e\u53ef\u9760\u6027\u548c\u4e8b\u52a1\u54cd\u5e94\u65f6\u95f4\u7684\u95ee\u9898\u3002Python\u7684\u7528\u4f8b\u901a\u8fc7\u4eceSQL\u8c03\u7528Python\u811a\u672c\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u4e2d\u95f4\u4ef6\uff0c\u53ef\u4ee5\u66f4\u5bb9\u6613\u5730\u5b8c\u6210\u67d0\u4e9b\u4efb\u52a1\u3002\u7279\u522b\u662f\u5728\u6570\u636e\u5e93\u4e2d\u4e8b\u4ef6\u53d1\u8d77\u4efb\u52a1\u7684\u60c5\u51b5\u4e0b\u3002\u4efb\u52a1\u53ef\u80fd\u5305\u62ec\u901a\u8fc7TCP/HTTP/SOAP\u5411\u7f51\u7edc\u7cfb\u7edf\u53d1\u9001\u6570\u636e\u6216\u4ece\u57fa\u4e8e\u7f51\u7edc\u7684\u7cfb\u7edf\u63a5\u6536\u6570\u636e\u3002\u5229\u7528\u672c\u5730\u5e73\u53f0\u8d44\u6e90\uff0c\u5982\u6587\u4ef6\u7cfb\u7edf\uff0c\u7f51\u7edc\u6216GPU\u3002\u901a\u8fc7\u4f7f\u7528\u901a\u7528\u6570\u636e\u683c\u5f0f\uff08\u5982JSON\uff0cXML\u6216YAML\uff09\u6784\u5efa\u4e00\u4e2a\u6216\u591a\u4e2a\u7cfb\u7edf\u4e4b\u95f4\u7684\u5b9e\u65f6\u96c6\u6210\u3002\u901a\u8fc7\u4e0e\u5916\u90e8\u5e94\u7528\u7a0b\u5e8f\u901a\u4fe1\u751f\u6210\u6570\u636e\u6216\u6587\u4ef6\u3002\u5f53\u7136\u4e5f\u96be\u514d\u5b58\u5728\u4e00\u4e9b\u6f5c\u5728\u7684\u7f3a\u70b9\u5982\u679c\u60a8\u4f7f\u7528Python\u9700\u8981\u4e92\u8054\u7f51\u8bbf\u95ee\uff0c\u90a3\u4e48\u5b58\u5728\u5fc5\u987b\u4fdd\u6301\u5b89\u5168\u7684\u6570\u636e\u53ef\u80fd\u4f1a\u88ab\u610f\u5916\u5730\u901a\u8fc7\u4e92\u8054\u7f51\u5171\u4eab\u7684\u98ce\u9669\u3002\u4efb\u4f55\u4e92\u8054\u7f51\u8bbf\u95ee\u5fc5\u987b\u7531\u7f51\u7edc\u4ed4\u7ec6\u76d1\u7ba1\u3002\u5141\u8bb8\u901a\u8fc7\u201c\u542f\u7528\u5916\u90e8\u811a\u672c\u6267\u884c\u201d\u5728\u670d\u52a1\u5668\u4e0a\u6267\u884cPython\u811a\u672c\u6765\u66b4\u9732\u5b89\u5168\u98ce\u9669\u3002\u76f8\u540c\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u5bc6\u96c6\u578bPython\u811a\u672c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5927\u578bOLTP\u7cfb\u7edf\u4e0a\u6b63\u5728\u8fdb\u884c\u7684\u4e8b\u52a1\u7684\u6027\u80fd\u3002\u8861\u91cf\u8fd9\u4e9b\u4f18\u70b9\u548c\u7f3a\u70b9\uff0c\u4f3c\u4e4e\u6709\u65f6\u5019Python\u53ef\u4ee5\u53d1\u6325\u6709\u7528\u7684\u4f5c\u7528\uff0c\u5982\u679c\u53ef\u4ee5\u6700\u5c0f\u5316\u98ce\u9669\u3002\u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u6211\u4eec\u5982\u4f55\u4f7f\u7528Python\u6784\u5efa\u6570\u636e\u7f13\u5b58\u7cfb\u7edf\u4f9b\u5e94\u7528\u5c42\u4f7f\u7528\u3002\u7f13\u5b58\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u7f13\u5b58\u6570\u636e\u53ef\u4ee5\u63d0\u9ad8\u5e94\u7528\u7a0b\u5e8f\u7684\u6027\u80fd\u3002\u4ee5\u7f13\u5b58\u7684\u5b58\u50a8\u5f00\u9500\u4e3a\u4ee3\u4ef7\uff0c\u5f53\u9047\u5230\u4e0e\u6570\u636e\u5e93\u7684\u804a\u5929\u7f51\u7edc\u901a\u4fe1\u4ee5\u53ca\u6570\u636e\u5e93\u9762\u4e34\u91cd\u590d\u67e5\u8be2\u65f6\u8d44\u6e90\u6d88\u8017\u9ad8\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u6709\u7528\u7684\u6027\u80fd\u63d0\u5347\u3002\u5f53\u6211\u4eec\u6784\u5efa\u7f13\u5b58\u57fa\u7840\u67b6\u6784\u65f6\uff0c\u6211\u4eec\u9762\u4e34\u7740\u4ec0\u4e48\u65f6\u5019\u5237\u65b0\u7f13\u5b58\u7684\u5185\u5bb9\u7684\u5e38\u89c1\u95ee\u9898\u3002\u6211\u4eec\u503e\u5411\u4e8e\u5728\u4e00\u5b9a\u65f6\u95f4\u95f4\u9694\u4e4b\u540e\u91c7\u7528\u91cd\u5efa\u7f13\u5b58\u7684\u7b80\u5355\u89e3\u51b3\u65b9\u6848\u3002\u7136\u800c\uff0c\u8fd9\u662f\u975e\u5e38\u4f4e\u6548\u7684\u3002\u5f53\u6570\u636e\u66f4\u6539\u65f6\u5237\u65b0\u7f13\u5b58\u66f4\u597d\uff0c\u53ea\u5237\u65b0\u6539\u53d8\u7684\u5185\u5bb9\u3002\u5728\u521b\u5efa\uff0c\u66f4\u65b0\u6216\u5220\u9664\u6570\u636e\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u65f6\u63a5\u8fd1\u5b9e\u65f6\u3002\u6709\u8bb8\u591a\u5de5\u5177\u548c\u6846\u67b6\u53ef\u7528\u4e8e\u89e3\u51b3\u5237\u65b0\u95ee\u9898\uff0c\u4f46\u662f\u5b83\u4eec\u53d7\u5230\u5982\u4f55\u786e\u5b9a\u6570\u636e\u53d1\u751f\u53d8\u5316\u4ee5\u53ca\u4f55\u65f6\u53d1\u751f\u66f4\u6539\u7684\u95ee\u9898\u3002\u6570\u636e\u5e93\u662f\u6700\u597d\u7684\u6240\u6709\u80fd\u591f\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u5bf9\u4e8e\u6211\u4eec\u8fd9\u91cc\u63d0\u4f9b\u7684\u7f13\u5b58\u7cfb\u7edf\uff0c\u6211\u4eec\u5c06\u628a\u81ea\u5df1\u9650\u5236\u5728\u5fae\u8f6f\u5806\u6808\u4e2d\uff0c\u4ee5\u9632\u6b62Python\u672c\u8eab\u3002MicrosoftSQLServer2017\uff08CPT\uff09\u670d\u52a1\u4ee3\u7406\u9694\u79bb\u4e8b\u52a1\u6570\u636e\u5e93\u3002Python\u6267\u884c\u811a\u672c\uff0c\u53ef\u4ee5\u901a\u8fc7HTTP\u66f4\u65b0\u7f13\u5b58\uff08Python3.5\u53ef\u6267\u884c\u6587\u4ef6\u4e0eAnaconda\u53d1\u884c\u7248\u4e2d\u7684\u5e93\uff09.Net4.5.2ASP.NetMVC\u4e3a\u6211\u4eec\u7684\u793a\u4f8bWebUIASP.NetWebAPI\u5c01\u88c5\u7f13\u5b58\u5b58\u50a8\u4e3a\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u3002\u4ee5\u4e0b\u662f\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u7f13\u5b58\u7cfb\u7edf\u7684\u56fe\u793a\uff1aWebApplication\u63d0\u4f9b\u7528\u4e8e\u8bfb\u53d6\u548c\u66f4\u65b0\u6570\u636e\u7684\u7528\u6237\u754c\u9762\u3002\u6211\u4eec\u793a\u4f8b\u7f13\u5b58\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u4e2d\u7684RESTful.Cache\u5e94\u7528\u7a0b\u5e8f\u662f\u4f7f\u7528ASP.NetWebAPI2\u6784\u5efa\u7684\uff0c\u5176\u5185\u5bb9\u7c7b\u578b\u4e3aJSON\u3002HTTP-GET\u64cd\u4f5c\u4ece\u672c\u5730\u7f13\u5b58\uff08\u9759\u6001\u96c6\u5408\uff09\u4f20\u9001\u6570\u636e\u3002MSSQLServer2017\uff08CPT\uff09\u662f\u4e00\u4e2a\u6570\u636e\u5e93\u670d\u52a1\u5668TransDBOLTP\u6570\u636e\u5e93\uff0c\u5904\u7406\u4e8b\u52a1\u7e41\u5fd9\u3002Cacher\u6267\u884cPython\u811a\u672c\u6267\u884c\u7684\u4ee3\u7406\u6570\u636e\u5e93\uff0c\u542f\u7528\u4e86\u542f\u7528\u201c\u5916\u90e8\u811a\u672c\u542f\u7528\u201d\u9009\u9879\u7684\u811a\u672c\u6267\u884c\u3002\u8bf7\u53c2\u9605Microsoft.Doc\uff1a\u542f\u7528\u5916\u90e8\u811a\u672c\u7684\u670d\u52a1\u5668\u914d\u7f6e\u9009\u9879\u3002ServiceBroker\u662fSQL\u670d\u52a1\u5668\u7684\u53ef\u9760\u6d88\u606f\u4f20\u9012\u6846\u67b6\uff0c\u6709\u52a9\u4e8e\u6865\u63a5Cacher-Agent\u548cTransDB\u3002\u53ef\u4ee5\u5904\u7406Cacher-Agent\u63a5\u6536\u5230\u7684\u6d88\u606f\u6765\u66f4\u65b0\u7f13\u5b58\u3002Python\u662f\u4f7f\u7528SQL2017\uff08CPT\uff09\u7684\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u96c6\u6210\u811a\u672c\u8bed\u8a00\u89e3\u51b3\u65b9\u6848\u7684\u67b6\u6784\u5728\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0c\u6211\u4eec\u5c06\u5728RESTful.Cache\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7f13\u5b58\u5b9e\u4f53\u201c\u4ea7\u54c1\u7c7b\u578b\u540d\u79f0\u201d\uff0c\u5e76\u4e14WebApplication\u5c06\u5177\u6709\u521b\u5efa\u65b0\u4ea7\u54c1\u7c7b\u578b\u6761\u76ee\u5e76\u4eceRESTful.Cache\u8bfb\u53d6\u7684\u529f\u80fd\u3002\u6761\u4ef6\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5148\u51b3\u6761\u4ef6\u548c\u4e00\u4e9b\u6211\u4eec\u9700\u8981\u8003\u8651\u7684\u4fe1\u606f\u3002\u5b58\u50a8CacheDB\u7684SQL\u5b9e\u4f8b\u5fc5\u987b\u5b89\u88c5\u201c\u5177\u6709Python\u7684\u673a\u5668\u5b66\u4e60\u670d\u52a1\u201d\u8981\u5728CacheDB\u4e2d\u4f7f\u7528TSQL\u6267\u884cPython\u811a\u672c\uff0c\u5e94\u8fd0\u884cSQLServiceMSSQLLaunchpad\u6216SQLServerLaunchpad\u3002\u8bf7\u53c2\u9605Microsoft.Net\uff1aMicrosoft\u673a\u5668\u5b66\u4e60\u670d\u52a1\u4f7f\u7528SP_Configure\u542f\u7528\u5916\u90e8\u811a\u672c\u6267\u884c\uff0c\u8bf7\u53c2\u9605Microsoft.Doc\uff1a\u542f\u7528\u5916\u90e8\u811a\u672c\u7684\u670d\u52a1\u5668\u914d\u7f6e\u9009\u9879Pythonsp_configure'externalscriptsenabled',1;1sp_configure'externalscriptsenabled',1;RECONFIGURE;TransDB\u548cCacher\u6258\u7ba1\u7684\u73af\u5883\u5e94\u8be5\u5728\u5176\u5b9e\u4f8b\u4e0a\u521b\u5efa\u4e00\u4e2aServiceBroker\u7aef\u70b9\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u7aef\u70b9\u72ec\u7acb\u6258\u7ba1\u5728\u4e24\u4e2a\u4e0d\u540c\u7684SQL\u5b9e\u4f8b\u4e0a\uff0c\u90a3\u4e48\u6bcf\u4e2a\u5b9e\u4f8b\u5e94\u8be5\u6709\u81ea\u5df1\u7684\u7aef\u70b9\u3002TransDB\u548cCacher\u6570\u636e\u5e93\u5e94\u8be5\u542f\u7528\u4ee3\u7406\u3002\u8bf7\u53c2\u9605Microsoft.Technet\uff1a\u5982\u4f55\uff1a\u6fc0\u6d3b\u6570\u636e\u5e93\u4e2d\u7684ServiceBroker\u6d88\u606f\u4f20\u9012.aspx)PythonALTERDATABASETransDBSETENABLE_BROKER;1ALTERDATABASETransDBSETENABLE_BROKER;PythonGOALTERDATABASECacheDBSETENABLE_BROKER;GO1234GO\u00a0ALTERDATABASECacheDBSETENABLE_BROKER;GO.NET\u5e94\u7528\u7a0b\u5e8fWebApplication\u6709\u4e24\u4e2a\u4e3b\u8981\u7684MVC\u52a8\u4f5c;\u4e00\u4e2a\u4f7f\u7528HTTP\u52a8\u8bcdPOST\u66f4\u65b0TransDB\u4e2d\u7684\u4e00\u4e2a\u65b0\u5b9e\u4f53\uff0c\u53e6\u4e00\u4e2a\u4f7f\u7528HTTP\u52a8\u8bcdGET\u4ece\u7f13\u5b58\u8fd4\u56de\u4ea7\u54c1\u7c7b\u578b\u5217\u8868\u7684\u64cd\u4f5c\u3002RESTful.Cache\u6709\u4e24\u79cd\u64cd\u4f5c\u65b9\u6cd5\uff0c\u4e00\u79cd\u662f\u4f7f\u7528HTTP\u52a8\u8bcdPOST\u66f4\u65b0\u65b0\u6dfb\u52a0\u7684\u5b9e\u4f53\u4ea7\u54c1\u7c7b\u578b\u7684\u7f13\u5b58\uff0c\u53e6\u4e00\u79cd\u7528\u4e8e\u4ece\u672c\u5730\u7f13\u5b58\u83b7\u53d6\u6240\u6709\u7f13\u5b58\u7684\u4ea7\u54c1\u7c7b\u578b\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u4e24\u4e2a\u5e94\u7528\u7a0b\u5e8f\u90fd\u5728IIS\u4e2d\u6258\u7ba1\u5728\u5404\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6c60\u6807\u8bc6\u4e0b\uff0c\u4ee5\u4fdd\u62a4\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u4f46\u662f\u5bf9\u4e8e\u5b9e\u9645\u7684\u7cfb\u7edf\u5b9e\u73b0\uff0c\u6258\u7ba1\u73af\u5883\u53ef\u4ee5\u662f\u5185\u90e8\u7f51\u6216\u4e92\u8054\u7f51\u73af\u5883\u4e2d\u7684\u5355\u4e2aWeb\u670d\u52a1\u5668\u3002RESTful.Cache\u6388\u6743\u89c4\u5219\u53ea\u6709\u4e24\u4e2a\u670d\u52a1\u5e10\u6237\u6765\u5904\u7406HTTP\u8bf7\u6c42\uff0c\u5373abcWebApp_SVC\u548cabcCacherAgent_SVC\u3002abcCacherAgent_SVC\u670d\u52a1\u5e10\u6237\u5141\u8bb8SQL\u4e2d\u7684Python\u811a\u672c\u901a\u8fc7HTTP\u5230\u8fbe\u5e94\u7528\u7a0b\u5e8f\u6765\u5237\u65b0\u7f13\u5b58\u3002abcWebApp_SVC\u7528\u6237\u7528\u4e8e\u5177\u6709\u6388\u6743\u89c4\u5219\u6a21\u5f0f\u7684WebApplication\uff0c\u4ee5\u5141\u8bb8\u8bbf\u95eeRESTful.Cache\u5e94\u7528\u7a0b\u5e8f\u3002SQL\u6570\u636e\u5e93\u548c\u670d\u52a1\u4ee3\u7406OLTP\u6570\u636e\u5e93TransDB\u6709\u51e0\u4e2a\u5bf9\u8c61\uff0c\u5305\u62ec\u8868\uff0c\u5b58\u50a8\u8fc7\u7a0b\u548cServiceBroker\u5bf9\u8c61\u3002CacheIntegrationError\u8868\u3002\u6709\u5173ServiceBroker\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95eeMicrosoft.DOC\uff1aSQLServerServiceBroker\u5bf9\u4e8e\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\uff0cTransDB\u662f\u521b\u5efa\u65b0\u7684ProductType\u8bb0\u5f55\u65f6\u521b\u5efa\u66f4\u65b0\u7f13\u5b58\u6d88\u606f\u7684\u6e90\u6570\u636e\u5e93\uff0c\u6267\u884c\u64cd\u4f5c\u7684\u6d88\u606f\uff0c\u5b83\u5177\u6709UpdateMessage\u6d88\u606f\u7c7b\u578b\uff0cCacheIntegration\u5408\u540c\u5c06CacheSource\u670d\u52a1\u53d1\u9001\u5230\u76ee\u6807\u6570\u636e\u5e93\u3002\u8be5\u670d\u52a1\u5177\u6709CacheQueue\uff0c\u7531ServiceBroker\u7ec4\u4ef6\u7528\u4e8e\u6267\u884c\u53ef\u9760\u7684\u6d88\u606f\u4f20\u9012\u3002ToCacheTarget\u8def\u7531\u5177\u6709\u5c06\u6d88\u606f\u4f20\u9012\u5230\u5176\u76ee\u6807\u7684\u4fe1\u606f\u3002\u4e3a\u4e86\u6d88\u9664\u4efb\u4f55\u589e\u52a0\u4e8b\u52a1\u5904\u7406\u65f6\u95f4\u7684\u673a\u4f1a\u4ee5\u53ca\u907f\u514d\u4e8b\u52a1\u6570\u636e\u5e93\u4e2d\u5176\u4f59\u6570\u636e\u7684\u4efb\u4f55\u5b89\u5168\u98ce\u9669\uff0c\u6211\u4eec\u5c06\u901a\u8fc7\u4f7f\u7528\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u4e2d\u540d\u4e3aCacher\u6570\u636e\u5e93\u7684\u4ee3\u7406\u6570\u636e\u5e93\u6765\u89e3\u9664\u7f13\u5b58\u66f4\u65b0\u8fc7\u7a0b\u3002ServiceBroker\u6d88\u606f\u4f20\u9012\u57fa\u7840\u8bbe\u65bd\u5c06\u6709\u52a9\u4e8e\u8fde\u63a5TransDB\u548cCacher\u6570\u636e\u5e93\uff0c\u57fa\u4e8e\u4e8b\u4ef6\u7684\u6d88\u606f\u5904\u7406\u5c06\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u65b0\u9a7b\u7559\u5728\u57fa\u4e8e\u7f51\u7edc\u7684\u7cfb\u7edf\u4e0a\u7684\u7f13\u5b58\u5b58\u50a8\u3002Cacher\u6570\u636e\u5e93\u6b63\u5728\u626e\u6f14\u4ee3\u7406\u89d2\u8272\uff0c\u4ee5\u4fbf\u5728\u66f4\u65b0\u6d88\u606f\u5230\u8fbe\u65f6\u6267\u884c\u7f13\u5b58\u5237\u65b0\u3002\u5b83\u901a\u8fc7\u6267\u884cPython\u811a\u672c\u66f4\u65b0\u7f13\u5b58\u3002Cacher\u6570\u636e\u5e93\u5177\u6709\uff1aCacheLog\u548cCacheIntegrationError\u8868\uff0c\u4ee5\u8ddf\u8e2a\u7f13\u5b58\u4f55\u65f6\u88ab\u5237\u65b0\uff0c\u5e76\u4e14\u5177\u6709\u5728\u7f13\u5b58\u5237\u65b0\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u53d1\u751f\u7684\u4efb\u4f55\u9519\u8bef\u7684\u8bb0\u5f55\u3002PerformCacheUpdate\u8fc7\u7a0b\u901a\u8fc7ServiceBroker\u4eceTransDB\u63a5\u6536\u4f20\u5165\u6d88\u606f\u3002\u5982\u679c\u6d88\u606f\u7684\u7c7b\u578b\u662fUpdateMessage\uff0c\u90a3\u4e48\u5b83\u5c06\u6267\u884c\u53e6\u4e00\u4e2a\u8fc7\u7a0bUpdateWebCache\uff0c\u6267\u884cPython\u811a\u672c\u6267\u884c\u3002UpdateWebCache\u8fc7\u7a0b\u7684\u6267\u884c\u7ed3\u679c\u4fdd\u5b58\u5728\u8868\u53d8\u91cf\u4e2d\uff0c\u7136\u540e\u5728\u6d88\u606f\u5bf9\u8bdd\u7ed3\u675f\u65f6\u63d2\u5165\u5230CacheLog\u8868\u4e2d\u3002\u5f53\u63a5\u6536\u5230\u7684\u6d88\u606f\u5177\u6709\u9519\u8bef\u6216\u7ed3\u675f\u6d88\u606f\u7c7b\u578b\u65f6\uff0c\u8fc7\u7a0b\u4e5f\u4f1a\u7ed3\u675f\u4f1a\u8bdd\uff0c\u5e76\u4e14\u5728\u9519\u8bef\u7c7b\u578b\u4e0a\uff0c\u5c06\u5f02\u5e38\u65e5\u5fd7\u5199\u5165CacheIntegrationError\u8868\u4e2d\u3002UpdateWebCache\u8fc7\u7a0b\u4ece\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7684\u4f20\u5165XML\u6d88\u606f\u4e2d\u63d0\u53d6Id\u548cName\uff0c\u5e76\u5c06\u8fd9\u4e9b\u503c\u5d4c\u5165\u5230Python\u811a\u672c\u6587\u672c\u4e2d\u3002\u811a\u672c\u6267\u884c\u7ed3\u679c\u96c6\u662f\u7c7b\u578b\u4e3aUpddateCacheLog\u7684\u7ed3\u6784\u5316\u8868\u3002Cacher\u7684ServiceBroker\u5bf9\u8c61\uff0c\u4e3b\u8981\u662fUpdateMessage\u6d88\u606f\u7c7b\u578b\u548cCacheIntegration\u5951\u7ea6\u4e0eTransDB\u7684\u76f8\u540c\uff0cCacheQueue\u6709\u4e00\u4e2a\u79f0\u4e3aPerfomCacheUpdate\u7684\u6fc0\u6d3b\u8fc7\u7a0b\uff0c\u4e00\u4e2a\u540d\u4e3aCacheTarget\u7684\u670d\u52a1\uff0c\u8be5\u8def\u7531\u5177\u6709\u6709\u5173TransDB\u670d\u52a1CacheService\u548c\u7aef\u70b9\u5730\u5740\u7684\u4fe1\u606f\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\uff0c\u6570\u636e\u5e93\u961f\u5217\u7684\u6700\u5927\u961f\u5217\u8bfb\u53d6\u5668\u8bbe\u7f6e\u4e3a1\u3002\u5982\u679c\u9700\u8981\uff0c\u53ef\u4ee5\u589e\u52a0\u8fd9\u4e00\u70b9\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u6570\u636e\u4fee\u6539\u5f88\u9ad8\uff0c\u5e76\u4e14\u60a8\u9700\u8981\u589e\u52a0\u7f13\u5b58\u5237\u65b0\u7387\u3002\u670d\u52a1\u4ee3\u7406\u7aef\u70b9\u5bf9\u4e8e\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u6570\u636e\u5e93\u6258\u7ba1\u5728\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e0a\uff0c\u56e0\u6b64\u4e24\u8005\u90fd\u4f7f\u7528\u76f8\u540c\u7684ServiceBrokerEndpoint\u6765\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u8981\u5728\u5355\u4e2a\u5b9e\u4f8b\u4e0a\u6258\u7ba1\u6570\u636e\u5e93\uff0c\u90a3\u4e48\u6bcf\u4e2aSQL\u5b9e\u4f8b\u7684\u670d\u52a1\u5e10\u6237\u90fd\u5e94\u8be5\u6709\u4e00\u4e2aServiceBroker\u7aef\u70b9\u3002\u5e76\u4e14\u8fd9\u4e24\u4e2aSQL\u5b9e\u4f8b\u90fd\u5e94\u8be5\u6709\u6743\u9650\u5141\u8bb8\u5c06\u6d88\u606f\u53d1\u9001\u5230\u5bf9\u65b9\u7684\u7aef\u70b9\u3002\u8fde\u63a5\u7684\u6388\u6743\u548c\u6388\u4e88\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0bTSQL\u547d\u4ee4\u96c6\u5b8c\u6210\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u6d88\u606f\u4f20\u9012\u57fa\u7840\u7ed3\u6784\u4e2d\uff0c\u6709\u4e00\u4e2a\u53d1\u9001\u65b9\uff0c\u53e6\u4e00\u65b9\u662f\u63a5\u6536\u65b9\uff0c\u6b63\u5982\u6240\u63d0\u5230\u7684\uff0c\u5982\u679cSQL\u5b9e\u4f8b\u662f\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u7684\u4e00\u90e8\u5206\uff0c\u5219\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u5e94\u8be5\u6709\u81ea\u5df1\u7684\u8fdb\u7a0b\u6807\u8bc6\u3002\u4e0b\u56fe\u663e\u793a\u4e86\u6bcf\u4e2aSQLServer\u5728\u5176\u81ea\u8eab\u8eab\u4efd\u4e0b\u8fd0\u884c\u7684\u65b9\u5f0f\u3002\u8fd9\u662f\u7528\u4e8e\u5728Cacher\u6570\u636e\u5e93\u7684SQL\u5b9e\u4f8b\u4e2d\u6388\u6743\u548c\u6388\u4e88\u7aef\u70b9\u8fde\u63a5\u5230TransDB\u7684SQL\u5b9e\u4f8b\u670d\u52a1\u5e10\u6237[identity]\u7684SQL\u4ee3\u7801\u3002PythonALTERAUTHORIZATIONONENDPOINT::ServiceBrokerEndpointTO[abc\\TransDB_SVC]GOGRANTCONNECTONENDPOINT::ServiceBrokerEndpointTO[abc\\TransDB_SVC]GO1234\u00a0\u00a0\u00a0\u00a0ALTERAUTHORIZATIONONENDPOINT::ServiceBrokerEndpointTO[abc\\TransDB_SVC]\u00a0\u00a0GO\u00a0\u00a0GRANTCONNECTONENDPOINT::ServiceBrokerEndpointTO[abc\\TransDB_SVC]\u00a0\u00a0GO\u540c\u6837\uff0c\u8fd9\u91cc\u662f\u7528\u4e8e\u6388\u6743\u548c\u6388\u4e88\u7aef\u70b9\u8fde\u63a5\u5230CacheSQL\u6570\u636e\u5e93SQL\u5b9e\u4f8b\u670d\u52a1\u5e10\u6237[identity]\u7684\u4ee3\u7801\u3002PythonALTERAUTHORIZATIONONENDPOINT::ServiceBrokerEndpointTO[abc\\CacherAgent_SVC]GOGRANTCONNECTONENDPOINT::ServiceBrokerEndpointTO[abc\\CacherAgent_SVC]GO1234ALTERAUTHORIZATIONONENDPOINT::ServiceBrokerEndpointTO[abc\\CacherAgent_SVC]\u00a0\u00a0GO\u00a0\u00a0GRANTCONNECTONENDPOINT::ServiceBrokerEndpointTO[abc\\CacherAgent_SVC]\u00a0\u00a0GOPython\u811a\u672c\u8fd9\u662fPython\u811a\u672c\u6587\u672c\uff0c\u5728TSQL\u53d8\u91cf@UpdateCache\u4e2d\u4fdd\u5b58\u4e3a\u5b57\u7b26\u4e32\u3002\u5b83\u5177\u6709\u5177\u6709\u903b\u8f91\u7684UpdateCache\u65b9\u6cd5\uff0c\u901a\u8fc7\u4f20\u9012\u5177\u6709\u4f5c\u4e3a\u8f93\u5165\u53c2\u6570\u63a5\u6536\u7684Name\u548cId\u5b57\u6bb5\u7684\u6570\u636e\u5bf9\u8c61\u6765\u5bf9RESTful.Cache\u6267\u884cHTTPPOST\u8c03\u7528\u3002\u5b83\u63a5\u6536\u4e00\u4e2aJSON\u5bf9\u8c61\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u65b9\u6cd5\u7684\u8f93\u51fa\u7ed3\u679c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\u3002\u5728\u811a\u672c\u7ed3\u675f\u65f6\uff0c\u8fd4\u56de\u7684\u5bf9\u8c61\u88ab\u8f6c\u6362\u4e3a\u6570\u7ec4\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u5176\u7ed3\u6784\u5316\u4e3aSQL\u7ed3\u679c\u3002PythonDECLARE@UpdateCacheNVARCHAR(MAX)=N'importpandasasPND#datastructurepackagedefUpdateCache(name,id):importrequestsasHTTP#httprequestpackage#PerfomHTTPPOSTtoupdatecachehttpRequest=HTTP.post(http://localhost/RESTful.Cache/ProductType/UpdateCache,{Name:name,Id:id})cacheLog=httpRequest.json()returncacheLog#Updatecacheandbuildlogelementlog=[UpdateCache('+@Name+','+CAST(@IdasVARCHAR(10))+')]#Returndataframei.e.tablestructurefromSQLOutputDataSet=PND.DataFrame(data=log)';1234567891011121314DECLARE@UpdateCacheNVARCHAR(MAX)=N'importpandasasPND#datastructurepackagedefUpdateCache(name,id):\u00a0\u00a0importrequestsasHTTP#httprequestpackage\u00a0\u00a0#PerfomHTTPPOSTtoupdatecache\u00a0\u00a0httpRequest=HTTP.post(http://localhost/RESTful.Cache/ProductType/UpdateCache,{Name:name,Id:id})\u00a0\u00a0cacheLog=httpRequest.json()\u00a0\u00a0returncacheLog#Updatecacheandbuildlogelementlog=[UpdateCache('+@Name+','+CAST(@IdasVARCHAR(10))+')]#Returndataframei.e.tablestructurefromSQLOutputDataSet=PND.DataFrame(data=log)';\u5728SQLServer\u4e2d\u4f7f\u7528Python\u811a\u672c\u65f6\uff0c\u6709\u4e00\u4e9b\u503c\u5f97\u6ce8\u610f\u7684\u4e8b\u60c5\u3002\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a\u8fde\u7eed\u7684\u811a\u672c\u6216\u5c06\u5b83\u4eec\u5206\u7ec4\u5230\u6211\u4eec\u5728\u8fd9\u4e2a\u89e3\u51b3\u65b9\u6848\u4e2d\u6240\u505a\u7684\u65b9\u6cd5\u4e2d\u3002\u6216\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5185\u8054\u7c7b\u6216\u521b\u5efa\u4e00\u4e2a\u5305\uff0c\u5e76\u5728\u547d\u4ee4\u63d0\u793a\u7b26\u4e0b\u4f7f\u7528PIP\u547d\u4ee4\u5728python\u4e2d\u5bfc\u5165\u5b83\u4eec\u3002\u5728\u8fd9\u4e2aMST\u7684CPT\u7248\u672c\u4e2d\uff0cimport\u8bed\u53e5\u53ea\u80fd\u5728\u5b83\u653e\u7f6e\u7684\u8303\u56f4\u5185\u5bfc\u5165\u5305\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230ImportCache\u4e2d\u5b58\u5728\u5bfc\u5165\u8bf7\u6c42import\u8bed\u53e5\uff0c\u5e76\u4e14import\u8bed\u53e5\u5bfc\u5165\u718a\u732b\u5b58\u5728\u4e8e\u811a\u672c\u7684\u9876\u90e8\u5728\u811a\u672c\u7684\u6700\u540e\u3002\u65b9\u6cd5UpdateCache\u7684\u8f93\u51fa\u5bf9\u8c61\u7acb\u5373\u8f6c\u6362\u4e3a\u6570\u7ec4\uff0c\u8fd9\u6837pandas.DataFrame\u53ef\u4ee5\u5c06\u5bf9\u8c61\u8f6c\u6362\u6210\u6570\u636e\u7ed3\u6784\uff0cSQLServer\u53ef\u4ee5\u8f7b\u677e\u5730\u5c06\u5176\u89e3\u91ca\u4e3a\u5177\u6709\u884c\u548c\u5217\u7684\u8868\u3002\u5206\u914d\u7ed9OutputDataSet\u5bf9\u8c61\u7684\u6570\u636e\u7ed3\u6784\u5728SQLServer\u7684TSQL\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u53ef\u7528\u3002\u6700\u540e\u4e00\u884c\u7a0b\u5e8fdbo.UpdateWebCache\uff0cWITHRESULTSETS\uff08ASTYPEdbo.UpdateCacheLog\uff09;\u5177\u6709\u7528\u6237\u5b9a\u4e49\u7684\u8868\u7c7b\u578bdbo.UpdateCacheLog\uff0c\u5b83\u6709\u52a9\u4e8e\u4fdd\u6301\u5e95\u5c42\u5217\u7684\u987a\u5e8f\uff0c\u5e76\u907f\u514d\u5728\u4ece\u63a5\u6536\u7684\u6570\u636e\u7ed3\u6784\u751f\u6210\u7ed3\u679c\u96c6\u7684\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4efb\u4f55\u4e0d\u5339\u914d\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u5728Python\u548c\u7ed3\u679c\u96c6\u4e2d\u6784\u5efa\u6620\u5c04\u5217\u7ed3\u6784\u3002\u6570\u636e\u5e93\u5b89\u5168TransDB\u662f\u4e00\u4e2aOLTP\u6570\u636e\u5e93\uff0c\u6211\u4eec\u4e0d\u5e0c\u671b\u5bf9\u7cfb\u7edf\u53d1\u751f\u4efb\u4f55\u5b89\u5168\u6f0f\u6d1e\uff0c\u56e0\u6b64\uff0c\u901a\u8fc7\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u79cd\u6570\u636e\u5e93\u53ef\u4ee5\u6258\u7ba1\u5728\u672a\u5b89\u88c5\u201c\u673a\u5668\u5b66\u4e60\u670d\u52a1\u201d\u7684SQL\u5b9e\u4f8b\u4e0a\u3002Cacher\u662f\u80fd\u591f\u5230\u8fbe\u57fa\u4e8e\u7f51\u7edc\u7684\u7cfb\u7edf\u7684\u4ee3\u7406\uff0c\u56e0\u6b64\u53ef\u4ee5\u4fdd\u7559\u5728\u5b89\u88c5\u673a\u5668\u5b66\u4e60\u670d\u52a1\u7684SQL\u5b9e\u4f8b\u4e0a\u3002\u4e24\u4e2aSQL\u5b9e\u4f8b\u90fd\u53ef\u4ee5\u5177\u6709\u5355\u72ec\u7684\u670d\u52a1\u5e10\u6237\u8eab\u4efd\uff0c\u8be5\u8eab\u4efd\u5df2\u88ab\u6388\u6743\u4ec5\u8fde\u63a5\u5230\u7279\u5b9a\u7aef\u53e3\u7684ServiceBroker\u7aef\u70b9\u3002\u5b89\u5168\u8ba4\u8bc1\u901a\u4fe1\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528\u8bc1\u4e66\u3002\u5bf9\u4e8eServiceBroker\u7aef\u70b9\u6388\u6743\uff0c\u8bf7\u53c2\u9605Microsoft.Technet\uff1a\u5982\u4f55\uff1a\u901a\u8fc7\u4f7f\u7528\u8bc1\u4e66\uff08Transact-SQL\uff09\u5141\u8bb8\u670d\u52a1\u4ee3\u7406\u7a0b\u5e8f\u7f51\u7edc\u8bbf\u95ee.aspx)\u4ee5\u83b7\u53d6\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002\u6240\u6709\u7ec4\u4ef6\u653e\u5728\u4e00\u8d77\u653e\u7f6e\u6240\u6709\u7ec4\u4ef6\u540e\uff0c\u6211\u4eec\u7684WebApplication\u5141\u8bb8\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u65b0\u7684ProductType\uff0c\u5e76\u901a\u8fc7RESTfulHTTP\u8c03\u7528\u4ece\u5237\u65b0\u7684\u7f13\u5b58\u4e2d\u5217\u51fa\u76f8\u540c\u7684\u4ea7\u54c1\u7c7b\u578b\u3002\u5728\u5899\u540e\u9762\u6709\u7ba1\u7406\u6570\u636e\u7684\u7ec4\u4ef6\uff0c\u9ad8\u901f\u7f13\u5b58\u5bf9\u524d\u7aef\u5e94\u7528\u7a0b\u5e8f\u662f\u4e0d\u53ef\u89c1\u7684\u3002\u7ed3\u8bba\u8bf8\u5982\u7535\u5b50\u5546\u52a1\uff0c\u533b\u7597\u7535\u5b50\u6cbb\u7406\u7b49\u5e94\u7528\u53ef\u4ee5\u4ece\u826f\u597d\u7684\u7f13\u5b58\u5b9e\u73b0\u4e2d\u53d7\u76ca\u3002\u901a\u8fc7\u6269\u5c55\u6211\u4eec\u719f\u6089\u7684\u6280\u672f\u7684\u4f7f\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u6613\u4e8e\u7ef4\u62a4\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u800c\u65e0\u9700\u5b66\u4e60\u65b0\u6846\u67b6\u6216\u529f\u80fd\u7684\u6210\u672c\u3002\u6211\u4eec\u7684\u793a\u4f8b\u89e3\u51b3\u65b9\u6848\u7b26\u5408\u6211\u4eec\u6240\u9700\u8981\u7684\u5f53\u901a\u8fc7\u5176\u4e2d\u4e00\u4e2aOLTP\u4e8b\u52a1\u521b\u5efa\u6216\u4fee\u6539\u6570\u636e\u65f6\uff0c\u7cfb\u7edf\u5237\u65b0\u57fa\u4e8e\u7f51\u7edc\u7684\u7f13\u5b58\u7cfb\u7edf\u8fdb\u884c\u8bfb\u53d6\u8bbf\u95ee\u3002\u5b83\u80fd\u591f\u4f7f\u7528\u5f02\u6b65\u4e8b\u4ef6\u6765\u5237\u65b0\u7f13\u5b58\uff0c\u9760\u8fd1\u5b9e\u65f6\u3002\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u539f\u59cb\u4ea4\u6613\u7684\u8868\u73b0\u3002\u5b83\u53ef\u4ee5\u901a\u8fc7HTTP\u5728\u4e8b\u52a1\u548c\u7f13\u5b58\u7cfb\u7edf\u4e4b\u95f4\u7ed8\u5236\u4e00\u6761\u5b89\u5168\u7ebf\uff0c\u4ee5\u4fdd\u6301\u6570\u636e\u5728OLTP\u6570\u636e\u5e93\u4e2d\u7684\u5b89\u5168\u3002\u5b83\u5177\u6709\u6700\u5c0f\u7684\u76d1\u63a7\u529f\u80fd;\u4e00\u4e2a\u7f13\u5b58\u65e5\u5fd7\u548c\u5f02\u5e38\u65e5\u5fd7\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u52a0\u5f3a\u6784\u5efa\u7ba1\u7406\u63a7\u5236\u53f0\u3002\u4f7f\u7528ServiceBroker\u6d88\u606f\u7ec4\u4ef6\uff0c\u89e3\u51b3\u65b9\u6848\u8db3\u591f\u7075\u6d3b\uff0c\u53ef\u4ee5\u5728\u5f02\u6b65\u6d88\u606f\u5904\u7406\u53d1\u751f\u65f6\u89e6\u53d1\u6216\u5230\u8fbe\u57fa\u4e8e\u7f51\u7edc\u7684\u7cfb\u7edf\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6570\u636e\u5e93\u4e0eSQLServiceBroker\u6d88\u606f\u96c6\u6210\u5728\u4e00\u8d77\uff0c\u5e76\u4e14\u57fa\u4e8e\u63a5\u6536\u5230\u7684\u6570\u636e\uff0c\u6267\u884c\u4e00\u4e2a\u52a8\u4f5c\u6765\u83b7\u53d6\u6216\u53d1\u9001\u6570\u636e\u5230\u5916\u90e8\u6570\u636e\u5c42\u4ee5\u5916\u7684\u7cfb\u7edf\u3002\u901a\u8fc7\u4f7f\u7528\u670d\u52a1\u4ee3\u7406\u6d88\u606f\u9694\u79bb\u5916\u90e8\u7cfb\u7edf\u89e6\u53d1\u4e13\u7528\u6570\u636e\u5e93\u5185\u7684\u4e8b\u4ef6\u6709\u52a9\u4e8e\u4fdd\u62a4OLTP\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u548c\u6570\u636e\u3002Thesourcecodeforthisprojectisavailablehereingithib.https://github.com/hi10p/SQL17Python1\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u66f2\u7ebf\u70b9\u62bd\u7a00\u7b97\u6cd5- Python \u5b9e\u73b0"], "art_url": ["http://python.jobbole.com/88892/"], "art_create_time": ["2017/11/19"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/11/3be8f2c50649ea9862264793b74bdc66.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aj_hao104\u00a0\u00a0\u00a0\u4f55\u4e3a\u62bd\u7a00\u5728\u5904\u7406\u77e2\u91cf\u5316\u6570\u636e\u65f6\uff0c\u8bb0\u5f55\u4e2d\u5f80\u5f80\u4f1a\u6709\u5f88\u591a\u91cd\u590d\u6570\u636e\uff0c\u5bf9\u8fdb\u4e00\u6b65\u6570\u636e\u5904\u7406\u5e26\u6765\u8bf8\u591a\u4e0d\u4fbf\u3002\u591a\u4f59\u7684\u6570\u636e\u4e00\u65b9\u9762\u6d6a\u8d39\u4e86\u8f83\u591a\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u53e6\u4e00\u65b9\u9762\u9020\u6210\u6240\u8981\u8868\u8fbe\u7684\u56fe\u5f62\u4e0d\u5149\u6ed1\u6216\u4e0d\u7b26\u5408\u6807\u51c6\u3002\u56e0\u6b64\u8981\u901a\u8fc7\u67d0\u79cd\u89c4\u5219\uff0c\u5728\u4fdd\u8bc1\u77e2\u91cf\u66f2\u7ebf\u5f62\u72b6\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5927\u9650\u5ea6\u5730\u51cf\u5c11\u6570\u636e\u70b9\u4e2a\u6570\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a\u62bd\u7a00\u3002\u901a\u4fd7\u7684\u8bb2\u5c31\u662f\u5bf9\u66f2\u7ebf\u8fdb\u884c\u91c7\u6837\u7b80\u5316\uff0c\u5373\u5728\u66f2\u7ebf\u4e0a\u53d6\u6709\u9650\u4e2a\u70b9\uff0c\u5c06\u5176\u53d8\u4e3a\u6298\u7ebf\uff0c\u5e76\u4e14\u80fd\u591f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4fdd\u6301\u539f\u6709\u5f62\u72b6\u3002\u6bd4\u8f83\u5e38\u7528\u7684\u4e24\u79cd\u62bd\u7a00\u7b97\u6cd5\u662f\uff1a\u9053\u683c\u62c9\u65af-\u666e\u514b(Douglas-Peuker)\u7b97\u6cd5\u548c\u5782\u8ddd\u9650\u503c\u6cd5\u3002\u9053\u683c\u62c9\u65af-\u666e\u514b(Douglas-Peuker)\u7b97\u6cd5Douglas-Peuker\u7b97\u6cd5(DP\u7b97\u6cd5)\u8fc7\u7a0b\u5982\u4e0b:1\u3001\u8fde\u63a5\u66f2\u7ebf\u9996\u5c3e\u4e24\u70b9A\u3001B\uff1b2\u3001\u4f9d\u6b21\u8ba1\u7b97\u66f2\u7ebf\u4e0a\u6240\u6709\u70b9\u5230A\u3001B\u4e24\u70b9\u6240\u5728\u66f2\u7ebf\u7684\u8ddd\u79bb\uff1b3\u3001\u8ba1\u7b97\u6700\u5927\u8ddd\u79bbD\uff0c\u5982\u679cD\u5c0f\u4e8e\u9608\u503cthreshold,\u5219\u53bb\u6389\u66f2\u7ebf\u4e0a\u51faA\u3001B\u5916\u7684\u6240\u6709\u70b9\uff1b\u5982\u679cD\u5927\u4e8e\u9608\u503cthreshold,\u5219\u628a\u66f2\u7ebf\u4ee5\u6700\u5927\u8ddd\u79bb\u5206\u5272\u6210\u4e24\u6bb5\uff1b4\u3001\u5bf9\u6240\u6709\u66f2\u7ebf\u5206\u6bb5\u91cd\u590d1-3\u6b65\u9aa4\uff0c\u77e5\u9053\u6240\u6709D\u5747\u5c0f\u4e8e\u9608\u503c\u3002\u5373\u5b8c\u6210\u62bd\u7a00\u3002\u8fd9\u79cd\u7b97\u6cd5\u7684\u62bd\u7a00\u7cbe\u5ea6\u4e0e\u9608\u503c\u6709\u5f88\u5927\u5173\u7cfb\uff0c\u9608\u503c\u8d8a\u5927\uff0c\u7b80\u5316\u7a0b\u5ea6\u8d8a\u5927\uff0c\u70b9\u51cf\u5c11\u7684\u8d8a\u591a\uff1b\u53cd\u4e4b\u7b80\u5316\u7a0b\u5ea6\u8d8a\u4f4e\uff0c\u70b9\u4fdd\u7559\u7684\u8d8a\u591a\uff0c\u5f62\u72b6\u4e5f\u8d8a\u8d8b\u4e8e\u539f\u66f2\u7ebf\u3002\u4e0b\u9762\u662fPython\u4ee3\u7801\u5b9e\u73b0:Python#-*-coding:utf-8-*-\"\"\"-------------------------------------------------FileName\uff1aDouglasPeukerDescription:\u9053\u683c\u62c9\u65af-\u666e\u514b\u62bd\u7a00\u7b97\u6cd5Author:J_haodate\uff1a2017/8/16-------------------------------------------------ChangeActivity:2017/8/16:\u9053\u683c\u62c9\u65af-\u666e\u514b\u62bd\u7a00\u7b97\u6cd5-------------------------------------------------\"\"\"from__future__importdivisionfrommathimportsqrt,pow__author__='J_hao'THRESHOLD=0.0001#\u9608\u503cdefpoint2LineDistance(point_a,point_b,point_c):\"\"\"\u8ba1\u7b97\u70b9a\u5230\u70b9bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bb:parampoint_a::parampoint_b::parampoint_c::return:\"\"\"#\u9996\u5148\u8ba1\u7b97bc\u6240\u5728\u76f4\u7ebf\u7684\u659c\u7387\u548c\u622a\u8dddifpoint_b[0]==point_c[0]:return9999999slope=(point_b[1]-point_c[1])/(point_b[0]-point_c[0])intercept=point_b[1]-slope*point_b[0]#\u8ba1\u7b97\u70b9a\u5230bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bbdistance=abs(slope*point_a[0]-point_a[1]+intercept)/sqrt(1+pow(slope,2))returndistanceclassDouglasPeuker(object):def__init__(self):self.threshold=THRESHOLDself.qualify_list=list()self.disqualify_list=list()defdiluting(self,point_list):\"\"\"\u62bd\u7a00:parampoint_list:\u4e8c\u7ef4\u70b9\u5217\u8868:return:\"\"\"iflen(point_list)<3:self.qualify_list.extend(point_list[::-1])else:#\u627e\u5230\u4e0e\u6536\u5c3e\u4e24\u70b9\u8fde\u7ebf\u8ddd\u79bb\u6700\u5927\u7684\u70b9max_distance_index,max_distance=0,0forindex,pointinenumerate(point_list):ifindexin[0,len(point_list)-1]:continuedistance=point2LineDistance(point,point_list[0],point_list[-1])ifdistance>max_distance:max_distance_index=indexmax_distance=distance#\u82e5\u6700\u5927\u8ddd\u79bb\u5c0f\u4e8e\u9608\u503c\uff0c\u5219\u53bb\u6389\u6240\u6709\u4e2d\u95f4\u70b9\u3002\u53cd\u4e4b\uff0c\u5219\u5c06\u66f2\u7ebf\u6309\u6700\u5927\u8ddd\u79bb\u70b9\u5206\u5272ifmax_distance<self.threshold:self.qualify_list.append(point_list[-1])self.qualify_list.append(point_list[0])else:#\u5c06\u66f2\u7ebf\u6309\u6700\u5927\u8ddd\u79bb\u7684\u70b9\u5206\u5272\u6210\u4e24\u6bb5sequence_a=point_list[:max_distance_index]sequence_b=point_list[max_distance_index:]forsequencein[sequence_a,sequence_b]:iflen(sequence)<3andsequence==sequence_b:self.qualify_list.extend(sequence[::-1])else:self.disqualify_list.append(sequence)defmain(self,point_list):self.diluting(point_list)whilelen(self.disqualify_list)>0:self.diluting(self.disqualify_list.pop())printself.qualify_listprintlen(self.qualify_list)if__name__=='__main__':d=DouglasPeuker()d.main([[104.066228,30.644527],[104.066279,30.643528],[104.066296,30.642528],[104.066314,30.641529],[104.066332,30.640529],[104.066383,30.639530],[104.066400,30.638530],[104.066451,30.637531],[104.066468,30.636532],[104.066518,30.635533],[104.066535,30.634533],[104.066586,30.633534],[104.066636,30.632536],[104.066686,30.631537],[104.066735,30.630538],[104.066785,30.629539],[104.066802,30.628539],[104.066820,30.627540],[104.066871,30.626541],[104.066888,30.625541],[104.066906,30.624541],[104.066924,30.623541],[104.066942,30.622542],[104.066960,30.621542],[104.067011,30.620543],[104.066122,30.620086],[104.065124,30.620021],[104.064124,30.620022],[104.063124,30.619990],[104.062125,30.619958],[104.061125,30.619926],[104.060126,30.619894],[104.059126,30.619895],[104.058127,30.619928],[104.057518,30.620722],[104.057625,30.621716],[104.057735,30.622710],[104.057878,30.623700],[104.057984,30.624694],[104.058094,30.625688],[104.058204,30.626682],[104.058315,30.627676],[104.058425,30.628670],[104.058502,30.629667],[104.058518,30.630667],[104.058503,30.631667],[104.058521,30.632666],[104.057664,30.633182],[104.056664,30.633174],[104.055664,30.633166],[104.054672,30.633289],[104.053758,30.633694],[104.052852,30.634118],[104.052623,30.635091],[104.053145,30.635945],[104.053675,30.636793],[104.054200,30.637643],[104.054756,30.638475],[104.055295,30.639317],[104.055843,30.640153],[104.056387,30.640993],[104.056933,30.641830],[104.057478,30.642669],[104.058023,30.643507],[104.058595,30.644327],[104.059152,30.645158],[104.059663,30.646018],[104.060171,30.646879],[104.061170,30.646855],[104.062168,30.646781],[104.063167,30.646823],[104.064167,30.646814],[104.065163,30.646725],[104.066157,30.646618],[104.066231,30.645620],[104.066247,30.644621],])123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109#-*-coding:utf-8-*-\"\"\"-------------------------------------------------\u00a0\u00a0FileName\uff1a\u00a0\u00a0\u00a0\u00a0DouglasPeuker\u00a0\u00a0Description:\u00a0\u00a0\u9053\u683c\u62c9\u65af-\u666e\u514b\u62bd\u7a00\u7b97\u6cd5\u00a0\u00a0Author:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0J_hao\u00a0\u00a0date\uff1a\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02017/8/16-------------------------------------------------\u00a0\u00a0ChangeActivity:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02017/8/16:\u9053\u683c\u62c9\u65af-\u666e\u514b\u62bd\u7a00\u7b97\u6cd5-------------------------------------------------\"\"\"from__future__importdivision\u00a0frommathimportsqrt,pow\u00a0__author__='J_hao'\u00a0THRESHOLD=0.0001\u00a0\u00a0#\u9608\u503c\u00a0\u00a0defpoint2LineDistance(point_a,point_b,point_c):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u8ba1\u7b97\u70b9a\u5230\u70b9bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bb\u00a0\u00a0\u00a0\u00a0:parampoint_a:\u00a0\u00a0\u00a0\u00a0:parampoint_b:\u00a0\u00a0\u00a0\u00a0:parampoint_c:\u00a0\u00a0\u00a0\u00a0:return:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0#\u9996\u5148\u8ba1\u7b97bc\u6240\u5728\u76f4\u7ebf\u7684\u659c\u7387\u548c\u622a\u8ddd\u00a0\u00a0\u00a0\u00a0ifpoint_b[0]==point_c[0]:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return9999999\u00a0\u00a0\u00a0\u00a0slope=(point_b[1]-point_c[1])/(point_b[0]-point_c[0])\u00a0\u00a0\u00a0\u00a0intercept=point_b[1]-slope*point_b[0]\u00a0\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u70b9a\u5230bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bb\u00a0\u00a0\u00a0\u00a0distance=abs(slope*point_a[0]-point_a[1]+intercept)/sqrt(1+pow(slope,2))\u00a0\u00a0\u00a0\u00a0returndistance\u00a0\u00a0classDouglasPeuker(object):\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.threshold=THRESHOLD\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list=list()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.disqualify_list=list()\u00a0\u00a0\u00a0\u00a0\u00a0defdiluting(self,point_list):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u62bd\u7a00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:parampoint_list:\u4e8c\u7ef4\u70b9\u5217\u8868\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:return:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iflen(point_list)<3:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list.extend(point_list[::-1])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u627e\u5230\u4e0e\u6536\u5c3e\u4e24\u70b9\u8fde\u7ebf\u8ddd\u79bb\u6700\u5927\u7684\u70b9\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max_distance_index,max_distance=0,0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forindex,pointinenumerate(point_list):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifindexin[0,len(point_list)-1]:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0distance=point2LineDistance(point,point_list[0],point_list[-1])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdistance>max_distance:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max_distance_index=index\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max_distance=distance\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u82e5\u6700\u5927\u8ddd\u79bb\u5c0f\u4e8e\u9608\u503c\uff0c\u5219\u53bb\u6389\u6240\u6709\u4e2d\u95f4\u70b9\u3002\u53cd\u4e4b\uff0c\u5219\u5c06\u66f2\u7ebf\u6309\u6700\u5927\u8ddd\u79bb\u70b9\u5206\u5272\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifmax_distance<self.threshold:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list.append(point_list[-1])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list.append(point_list[0])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5c06\u66f2\u7ebf\u6309\u6700\u5927\u8ddd\u79bb\u7684\u70b9\u5206\u5272\u6210\u4e24\u6bb5\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sequence_a=point_list[:max_distance_index]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sequence_b=point_list[max_distance_index:]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forsequencein[sequence_a,sequence_b]:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iflen(sequence)<3andsequence==sequence_b:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list.extend(sequence[::-1])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.disqualify_list.append(sequence)\u00a0\u00a0\u00a0\u00a0\u00a0defmain(self,point_list):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.diluting(point_list)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0whilelen(self.disqualify_list)>0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.diluting(self.disqualify_list.pop())\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printself.qualify_list\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printlen(self.qualify_list)\u00a0\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0d=DouglasPeuker()\u00a0\u00a0\u00a0\u00a0d.main([[104.066228,30.644527],[104.066279,30.643528],[104.066296,30.642528],[104.066314,30.641529],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066332,30.640529],[104.066383,30.639530],[104.066400,30.638530],[104.066451,30.637531],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066468,30.636532],[104.066518,30.635533],[104.066535,30.634533],[104.066586,30.633534],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066636,30.632536],[104.066686,30.631537],[104.066735,30.630538],[104.066785,30.629539],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066802,30.628539],[104.066820,30.627540],[104.066871,30.626541],[104.066888,30.625541],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066906,30.624541],[104.066924,30.623541],[104.066942,30.622542],[104.066960,30.621542],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.067011,30.620543],[104.066122,30.620086],[104.065124,30.620021],[104.064124,30.620022],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.063124,30.619990],[104.062125,30.619958],[104.061125,30.619926],[104.060126,30.619894],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.059126,30.619895],[104.058127,30.619928],[104.057518,30.620722],[104.057625,30.621716],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.057735,30.622710],[104.057878,30.623700],[104.057984,30.624694],[104.058094,30.625688],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.058204,30.626682],[104.058315,30.627676],[104.058425,30.628670],[104.058502,30.629667],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.058518,30.630667],[104.058503,30.631667],[104.058521,30.632666],[104.057664,30.633182],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.056664,30.633174],[104.055664,30.633166],[104.054672,30.633289],[104.053758,30.633694],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.052852,30.634118],[104.052623,30.635091],[104.053145,30.635945],[104.053675,30.636793],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.054200,30.637643],[104.054756,30.638475],[104.055295,30.639317],[104.055843,30.640153],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.056387,30.640993],[104.056933,30.641830],[104.057478,30.642669],[104.058023,30.643507],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.058595,30.644327],[104.059152,30.645158],[104.059663,30.646018],[104.060171,30.646879],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.061170,30.646855],[104.062168,30.646781],[104.063167,30.646823],[104.064167,30.646814],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.065163,30.646725],[104.066157,30.646618],[104.066231,30.645620],[104.066247,30.644621],])\u5782\u8ddd\u9650\u503c\u6cd5\u5782\u8ddd\u9650\u503c\u6cd5\u5176\u5b9e\u548cDP\u7b97\u6cd5\u539f\u7406\u4e00\u6837\uff0c\u4f46\u662f\u5782\u8ddd\u9650\u503c\u4e0d\u662f\u4ece\u6574\u4f53\u89d2\u5ea6\u8003\u8651\uff0c\u800c\u662f\u4f9d\u6b21\u626b\u63cf\u6bcf\u4e00\u4e2a\u70b9\uff0c\u68c0\u67e5\u662f\u5426\u7b26\u5408\u8981\u6c42\u3002\u7b97\u6cd5\u8fc7\u7a0b\u5982\u4e0b:1\u3001\u4ee5\u7b2c\u4e8c\u4e2a\u70b9\u5f00\u59cb\uff0c\u8ba1\u7b97\u7b2c\u4e8c\u4e2a\u70b9\u5230\u524d\u4e00\u4e2a\u70b9\u548c\u540e\u4e00\u4e2a\u70b9\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bbd\uff1b2\u3001\u5982\u679cd\u5927\u4e8e\u9608\u503c\uff0c\u5219\u4fdd\u7559\u7b2c\u4e8c\u4e2a\u70b9\uff0c\u8ba1\u7b97\u7b2c\u4e09\u4e2a\u70b9\u5230\u7b2c\u4e8c\u4e2a\u70b9\u548c\u7b2c\u56db\u4e2a\u70b9\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bbd;\u82e5d\u5c0f\u4e8e\u9608\u503c\u5219\u820d\u5f03\u7b2c\u4e8c\u4e2a\u70b9\uff0c\u8ba1\u7b97\u7b2c\u4e09\u4e2a\u70b9\u5230\u7b2c\u4e00\u4e2a\u70b9\u548c\u7b2c\u56db\u4e2a\u70b9\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bbd;3\u3001\u4f9d\u6b21\u7c7b\u63a8\uff0c\u76f4\u7ebf\u66f2\u7ebf\u4e0a\u5012\u6570\u7b2c\u4e8c\u4e2a\u70b9\u3002\u4e0b\u9762\u662fPython\u4ee3\u7801\u5b9e\u73b0\uff1aPython#-*-coding:utf-8-*-\"\"\"-------------------------------------------------FileName\uff1aLimitVerticalDistanceDescription:\u5782\u8ddd\u9650\u503c\u62bd\u7a00\u7b97\u6cd5Author:J_haodate\uff1a2017/8/17-------------------------------------------------ChangeActivity:2017/8/17:-------------------------------------------------\"\"\"from__future__importdivisionfrommathimportsqrt,pow__author__='J_hao'THRESHOLD=0.0001#\u9608\u503cdefpoint2LineDistance(point_a,point_b,point_c):\"\"\"\u8ba1\u7b97\u70b9a\u5230\u70b9bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bb:parampoint_a::parampoint_b::parampoint_c::return:\"\"\"#\u9996\u5148\u8ba1\u7b97bc\u6240\u5728\u76f4\u7ebf\u7684\u659c\u7387\u548c\u622a\u8dddifpoint_b[0]==point_c[0]:return9999999slope=(point_b[1]-point_c[1])/(point_b[0]-point_c[0])intercept=point_b[1]-slope*point_b[0]#\u8ba1\u7b97\u70b9a\u5230bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bbdistance=abs(slope*point_a[0]-point_a[1]+intercept)/sqrt(1+pow(slope,2))returndistanceclassLimitVerticalDistance(object):def__init__(self):self.threshold=THRESHOLDself.qualify_list=list()defdiluting(self,point_list):\"\"\"\u62bd\u7a00:parampoint_list:\u4e8c\u7ef4\u70b9\u5217\u8868:return:\"\"\"self.qualify_list.append(point_list[0])check_index=1whilecheck_index<len(point_list)-1:distance=point2LineDistance(point_list[check_index],self.qualify_list[-1],point_list[check_index+1])ifdistance<self.threshold:check_index+=1else:self.qualify_list.append(point_list[check_index])check_index+=1returnself.qualify_listif__name__=='__main__':l=LimitVerticalDistance()diluting=l.diluting([[104.066228,30.644527],[104.066279,30.643528],[104.066296,30.642528],[104.066314,30.641529],[104.066332,30.640529],[104.066383,30.639530],[104.066400,30.638530],[104.066451,30.637531],[104.066468,30.636532],[104.066518,30.635533],[104.066535,30.634533],[104.066586,30.633534],[104.066636,30.632536],[104.066686,30.631537],[104.066735,30.630538],[104.066785,30.629539],[104.066802,30.628539],[104.066820,30.627540],[104.066871,30.626541],[104.066888,30.625541],[104.066906,30.624541],[104.066924,30.623541],[104.066942,30.622542],[104.066960,30.621542],[104.067011,30.620543],[104.066122,30.620086],[104.065124,30.620021],[104.064124,30.620022],[104.063124,30.619990],[104.062125,30.619958],[104.061125,30.619926],[104.060126,30.619894],[104.059126,30.619895],[104.058127,30.619928],[104.057518,30.620722],[104.057625,30.621716],[104.057735,30.622710],[104.057878,30.623700],[104.057984,30.624694],[104.058094,30.625688],[104.058204,30.626682],[104.058315,30.627676],[104.058425,30.628670],[104.058502,30.629667],[104.058518,30.630667],[104.058503,30.631667],[104.058521,30.632666],[104.057664,30.633182],[104.056664,30.633174],[104.055664,30.633166],[104.054672,30.633289],[104.053758,30.633694],[104.052852,30.634118],[104.052623,30.635091],[104.053145,30.635945],[104.053675,30.636793],[104.054200,30.637643],[104.054756,30.638475],[104.055295,30.639317],[104.055843,30.640153],[104.056387,30.640993],[104.056933,30.641830],[104.057478,30.642669],[104.058023,30.643507],[104.058595,30.644327],[104.059152,30.645158],[104.059663,30.646018],[104.060171,30.646879],[104.061170,30.646855],[104.062168,30.646781],[104.063167,30.646823],[104.064167,30.646814],[104.065163,30.646725],[104.066157,30.646618],[104.066231,30.645620],[104.066247,30.644621],])printlen(diluting)print(diluting)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#-*-coding:utf-8-*-\"\"\"-------------------------------------------------\u00a0\u00a0FileName\uff1a\u00a0\u00a0\u00a0\u00a0LimitVerticalDistance\u00a0\u00a0Description:\u00a0\u00a0\u5782\u8ddd\u9650\u503c\u62bd\u7a00\u7b97\u6cd5\u00a0\u00a0Author:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0J_hao\u00a0\u00a0date\uff1a\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02017/8/17-------------------------------------------------\u00a0\u00a0ChangeActivity:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02017/8/17:-------------------------------------------------\"\"\"from__future__importdivision\u00a0frommathimportsqrt,pow\u00a0__author__='J_hao'\u00a0THRESHOLD=0.0001\u00a0\u00a0#\u9608\u503c\u00a0\u00a0defpoint2LineDistance(point_a,point_b,point_c):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u8ba1\u7b97\u70b9a\u5230\u70b9bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bb\u00a0\u00a0\u00a0\u00a0:parampoint_a:\u00a0\u00a0\u00a0\u00a0:parampoint_b:\u00a0\u00a0\u00a0\u00a0:parampoint_c:\u00a0\u00a0\u00a0\u00a0:return:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0#\u9996\u5148\u8ba1\u7b97bc\u6240\u5728\u76f4\u7ebf\u7684\u659c\u7387\u548c\u622a\u8ddd\u00a0\u00a0\u00a0\u00a0ifpoint_b[0]==point_c[0]:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return9999999\u00a0\u00a0\u00a0\u00a0slope=(point_b[1]-point_c[1])/(point_b[0]-point_c[0])\u00a0\u00a0\u00a0\u00a0intercept=point_b[1]-slope*point_b[0]\u00a0\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u70b9a\u5230bc\u6240\u5728\u76f4\u7ebf\u7684\u8ddd\u79bb\u00a0\u00a0\u00a0\u00a0distance=abs(slope*point_a[0]-point_a[1]+intercept)/sqrt(1+pow(slope,2))\u00a0\u00a0\u00a0\u00a0returndistance\u00a0\u00a0classLimitVerticalDistance(object):\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.threshold=THRESHOLD\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list=list()\u00a0\u00a0\u00a0\u00a0\u00a0defdiluting(self,point_list):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u62bd\u7a00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:parampoint_list:\u4e8c\u7ef4\u70b9\u5217\u8868\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:return:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list.append(point_list[0])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0check_index=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0whilecheck_index<len(point_list)-1:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0distance=point2LineDistance(point_list[check_index],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list[-1],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0point_list[check_index+1])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdistance<self.threshold:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0check_index+=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.qualify_list.append(point_list[check_index])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0check_index+=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.qualify_list\u00a0\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0l=LimitVerticalDistance()\u00a0\u00a0\u00a0\u00a0diluting=l.diluting([[104.066228,30.644527],[104.066279,30.643528],[104.066296,30.642528],[104.066314,30.641529],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066332,30.640529],[104.066383,30.639530],[104.066400,30.638530],[104.066451,30.637531],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066468,30.636532],[104.066518,30.635533],[104.066535,30.634533],[104.066586,30.633534],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066636,30.632536],[104.066686,30.631537],[104.066735,30.630538],[104.066785,30.629539],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066802,30.628539],[104.066820,30.627540],[104.066871,30.626541],[104.066888,30.625541],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.066906,30.624541],[104.066924,30.623541],[104.066942,30.622542],[104.066960,30.621542],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.067011,30.620543],[104.066122,30.620086],[104.065124,30.620021],[104.064124,30.620022],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.063124,30.619990],[104.062125,30.619958],[104.061125,30.619926],[104.060126,30.619894],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.059126,30.619895],[104.058127,30.619928],[104.057518,30.620722],[104.057625,30.621716],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.057735,30.622710],[104.057878,30.623700],[104.057984,30.624694],[104.058094,30.625688],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.058204,30.626682],[104.058315,30.627676],[104.058425,30.628670],[104.058502,30.629667],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.058518,30.630667],[104.058503,30.631667],[104.058521,30.632666],[104.057664,30.633182],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.056664,30.633174],[104.055664,30.633166],[104.054672,30.633289],[104.053758,30.633694],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.052852,30.634118],[104.052623,30.635091],[104.053145,30.635945],[104.053675,30.636793],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.054200,30.637643],[104.054756,30.638475],[104.055295,30.639317],[104.055843,30.640153],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.056387,30.640993],[104.056933,30.641830],[104.057478,30.642669],[104.058023,30.643507],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.058595,30.644327],[104.059152,30.645158],[104.059663,30.646018],[104.060171,30.646879],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.061170,30.646855],[104.062168,30.646781],[104.063167,30.646823],[104.064167,30.646814],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[104.065163,30.646725],[104.066157,30.646618],[104.066231,30.645620],[104.066247,30.644621],])\u00a0\u00a0\u00a0\u00a0printlen(diluting)\u00a0\u00a0\u00a0\u00a0print(diluting)\u6700\u540e\u5176\u5b9eDP\u7b97\u6cd5\u548c\u5782\u8ddd\u9650\u503c\u6cd5\u539f\u7406\u4e00\u6837\uff0cDP\u7b97\u6cd5\u662f\u4ece\u6574\u4f53\u4e0a\u8003\u8651\u4e00\u6761\u5b8c\u6574\u7684\u66f2\u7ebf\uff0c\u5b9e\u73b0\u65f6\u8f83\u5782\u8ddd\u9650\u503c\u6cd5\u590d\u6742\uff0c\u4f46\u5782\u8ddd\u9650\u503c\u6cd5\u53ef\u80fd\u4f1a\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5bfc\u81f4\u5c40\u90e8\u6700\u4f18\u3002\u53e6\u5916\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u53d1\u73b0\u91c7\u7528\u70b9\u5230\u53e6\u5916\u4e24\u70b9\u6240\u5728\u76f4\u7ebf\u8ddd\u79bb\u7684\u65b9\u6cd5\u6765\u5224\u65ad\u504f\u79bb\uff0c\u5728\u66f2\u7ebf\u5f27\u5ea6\u6bd4\u8f83\u5927\u7684\u60c5\u51b5\u4e0b\u6bd4\u8f83\u51c6\u786e\u3002\u5982\u679c\u5728\u66f2\u7ebf\u5f27\u5ea6\u6bd4\u8f83\u5c0f\uff0c\u5f2f\u66f2\u7a0b\u5ea6\u4e0d\u660e\u663e\u65f6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u62bd\u7a00\u6548\u679c\u4e0d\u662f\u5f88\u7406\u60f3\uff0c\u5efa\u8bae\u4f7f\u7528\u4e09\u70b9\u6240\u56f4\u6210\u7684\u4e09\u89d2\u5f62\u9762\u79ef\u4f5c\u4e3a\u5224\u65ad\u6807\u51c6\u3002\u4e0b\u9762\u662f\u62bd\u7a00\u6548\u679c:1\u8d5e3\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u4e24\u53e5\u8bdd\u638c\u63e1 Python \u6700\u96be\u77e5\u8bc6\u70b9\u2014\u2014\u5143\u7c7b"], "art_url": ["http://python.jobbole.com/88795/"], "art_create_time": ["2017/10/28"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/10/74ba2ab488afb1a76de39b824fb36265.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u5218\u7fbd\u51b2\u00a0\u00a0\u00a0\u5343\u4e07\u4e0d\u8981\u88ab\u6240\u8c13\u201c\u5143\u7c7b\u662f99%\u7684python\u7a0b\u5e8f\u5458\u4e0d\u4f1a\u7528\u5230\u7684\u7279\u6027\u201d\u8fd9\u7c7b\u7684\u8bf4\u8f9e\u5413\u4f4f\u3002\u56e0\u4e3a\u6bcf\u4e2a\u4e2d\u56fd\u4eba\uff0c\u90fd\u662f\u5929\u751f\u7684\u5143\u7c7b\u4f7f\u7528\u8005\u5b66\u61c2\u5143\u7c7b\uff0c\u4f60\u53ea\u9700\u8981\u77e5\u9053\u4e24\u53e5\u8bdd\uff1a\u9053\u751f\u4e00\uff0c\u4e00\u751f\u4e8c\uff0c\u4e8c\u751f\u4e09\uff0c\u4e09\u751f\u4e07\u7269\u6211\u662f\u8c01\uff1f\u6211\u4ece\u54ea\u6765\u91cc\uff1f\u6211\u8981\u5230\u54ea\u91cc\u53bb\uff1f\u5728python\u4e16\u754c\uff0c\u62e5\u6709\u4e00\u4e2a\u6c38\u6052\u7684\u9053\uff0c\u90a3\u5c31\u662f\u201ctype\u201d\uff0c\u8bf7\u8bb0\u5728\u8111\u6d77\u4e2d\uff0ctype\u5c31\u662f\u9053\u3002\u5982\u6b64\u5e7f\u88a4\u65e0\u57a0\u7684python\u751f\u6001\u5708\uff0c\u90fd\u662f\u7531type\u4ea7\u751f\u51fa\u6765\u7684\u3002\u9053\u751f\u4e00\uff0c\u4e00\u751f\u4e8c\uff0c\u4e8c\u751f\u4e09\uff0c\u4e09\u751f\u4e07\u7269\u3002\u9053\u00a0\u5373\u662ftype\u4e00\u00a0\u5373\u662fmetaclass(\u5143\u7c7b\uff0c\u6216\u8005\u53eb\u7c7b\u751f\u6210\u5668)\u4e8c\u00a0\u5373\u662fclass(\u7c7b\uff0c\u6216\u8005\u53eb\u5b9e\u4f8b\u751f\u6210\u5668)\u4e09\u00a0\u5373\u662finstance(\u5b9e\u4f8b)\u4e07\u7269\u00a0\u5373\u662f\u5b9e\u4f8b\u7684\u5404\u79cd\u5c5e\u6027\u4e0e\u65b9\u6cd5\uff0c\u6211\u4eec\u5e73\u5e38\u4f7f\u7528python\u65f6\uff0c\u8c03\u7528\u7684\u5c31\u662f\u5b83\u4eec\u3002\u9053\u548c\u4e00\uff0c\u662f\u6211\u4eec\u4eca\u5929\u8ba8\u8bba\u7684\u547d\u9898\uff0c\u800c\u4e8c\u3001\u4e09\u3001\u548c\u4e07\u7269\uff0c\u5219\u662f\u6211\u4eec\u5e38\u5e38\u4f7f\u7528\u7684\u7c7b\u3001\u5b9e\u4f8b\u3001\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u7528helloworld\u6765\u4e3e\u4f8b\uff1aPython#\u521b\u5efa\u4e00\u4e2aHello\u7c7b\uff0c\u62e5\u6709\u5c5e\u6027say_hello----\u4e8c\u7684\u8d77\u6e90classHello():defsay_hello(self,name='world'):print('Hello,%s.'%name)#\u4eceHello\u7c7b\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bhello----\u4e8c\u751f\u4e09hello=Hello()#\u4f7f\u7528hello\u8c03\u7528\u65b9\u6cd5say_hello----\u4e09\u751f\u4e07\u7269hello.say_hello()1234567891011#\u521b\u5efa\u4e00\u4e2aHello\u7c7b\uff0c\u62e5\u6709\u5c5e\u6027say_hello----\u4e8c\u7684\u8d77\u6e90classHello():\u00a0\u00a0\u00a0\u00a0defsay_hello(self,name='world'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Hello,%s.'%name)\u00a0\u00a0#\u4eceHello\u7c7b\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bhello----\u4e8c\u751f\u4e09hello=Hello()\u00a0#\u4f7f\u7528hello\u8c03\u7528\u65b9\u6cd5say_hello----\u4e09\u751f\u4e07\u7269hello.say_hello()\u8f93\u51fa\u6548\u679c\uff1aPythonHello,world.1Hello,world.\u8fd9\u5c31\u662f\u4e00\u4e2a\u6807\u51c6\u7684\u201c\u4e8c\u751f\u4e09\uff0c\u4e09\u751f\u4e07\u7269\u201d\u8fc7\u7a0b\u3002\u00a0\u4ece\u7c7b\u5230\u6211\u4eec\u53ef\u4ee5\u8c03\u7528\u7684\u65b9\u6cd5\uff0c\u7528\u4e86\u8fd9\u4e24\u6b65\u3002\u90a3\u6211\u4eec\u4e0d\u7531\u81ea\u4e3b\u8981\u95ee\uff0c\u7c7b\u4ece\u4f55\u800c\u6765\u5462\uff1f\u56de\u5230\u4ee3\u7801\u7684\u7b2c\u4e00\u884c\u3002classHello\u5176\u5b9e\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u201c\u8bed\u4e49\u5316\u7b80\u79f0\u201d\uff0c\u53ea\u4e3a\u4e86\u8ba9\u4ee3\u7801\u66f4\u6d45\u663e\u6613\u61c2\uff0c\u5b83\u7684\u53e6\u4e00\u4e2a\u5199\u6cd5\u662f\uff1aPythondeffn(self,name='world'):#\u5047\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u51fd\u6570\u53ebfnprint('Hello,%s.'%name)Hello=type('Hello',(object,),dict(say_hello=fn))#\u901a\u8fc7type\u521b\u5efaHelloclass----\u795e\u79d8\u7684\u201c\u9053\u201d\uff0c\u53ef\u4ee5\u70b9\u5316\u4e00\u5207\uff0c\u8fd9\u6b21\u6211\u4eec\u76f4\u63a5\u4ece\u201c\u9053\u201d\u751f\u51fa\u4e86\u201c\u4e8c\u201d1234deffn(self,name='world'):#\u5047\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u51fd\u6570\u53ebfn\u00a0\u00a0\u00a0\u00a0print('Hello,%s.'%name)\u00a0\u00a0\u00a0\u00a0Hello=type('Hello',(object,),dict(say_hello=fn))#\u901a\u8fc7type\u521b\u5efaHelloclass----\u795e\u79d8\u7684\u201c\u9053\u201d\uff0c\u53ef\u4ee5\u70b9\u5316\u4e00\u5207\uff0c\u8fd9\u6b21\u6211\u4eec\u76f4\u63a5\u4ece\u201c\u9053\u201d\u751f\u51fa\u4e86\u201c\u4e8c\u201d\u8fd9\u6837\u7684\u5199\u6cd5\uff0c\u5c31\u548c\u4e4b\u524d\u7684ClassHello\u5199\u6cd5\u4f5c\u7528\u5b8c\u5168\u76f8\u540c\uff0c\u4f60\u53ef\u4ee5\u8bd5\u8bd5\u521b\u5efa\u5b9e\u4f8b\u5e76\u8c03\u7528Python#\u4eceHello\u7c7b\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bhello----\u4e8c\u751f\u4e09\uff0c\u5b8c\u5168\u4e00\u6837hello=Hello()#\u4f7f\u7528hello\u8c03\u7528\u65b9\u6cd5say_hello----\u4e09\u751f\u4e07\u7269\uff0c\u5b8c\u5168\u4e00\u6837hello.say_hello()12345#\u4eceHello\u7c7b\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bhello----\u4e8c\u751f\u4e09\uff0c\u5b8c\u5168\u4e00\u6837hello=Hello()\u00a0#\u4f7f\u7528hello\u8c03\u7528\u65b9\u6cd5say_hello----\u4e09\u751f\u4e07\u7269\uff0c\u5b8c\u5168\u4e00\u6837hello.say_hello()\u8f93\u51fa\u6548\u679c\uff1aPythonHello,world.----\u8c03\u7528\u7ed3\u679c\u5b8c\u5168\u4e00\u6837\u30021Hello,world.----\u8c03\u7528\u7ed3\u679c\u5b8c\u5168\u4e00\u6837\u3002\u6211\u4eec\u56de\u5934\u770b\u4e00\u773c\u6700\u7cbe\u5f69\u7684\u5730\u65b9\uff0c\u9053\u76f4\u63a5\u751f\u51fa\u4e86\u4e8c\uff1aHello=type(\u2018Hello\u2019,(object,),dict(say_hello=fn))\u8fd9\u5c31\u662f\u201c\u9053\u201d\uff0cpython\u4e16\u754c\u7684\u8d77\u6e90\uff0c\u4f60\u53ef\u4ee5\u4e3a\u6b64\u800c\u60ca\u53f9\u3002\u6ce8\u610f\u5b83\u7684\u4e09\u4e2a\u53c2\u6570\uff01\u6697\u5408\u4eba\u7c7b\u7684\u4e09\u5927\u6c38\u6052\u547d\u9898\uff1a\u6211\u662f\u8c01\uff0c\u6211\u4ece\u54ea\u91cc\u6765\uff0c\u6211\u8981\u5230\u54ea\u91cc\u53bb\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a\u6211\u662f\u8c01\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u9700\u8981\u4e00\u4e2a\u533a\u5206\u4e8e\u5176\u5b83\u4e00\u5207\u7684\u547d\u540d\uff0c\u4ee5\u4e0a\u7684\u5b9e\u4f8b\u5c06\u6211\u547d\u540d\u4e3a\u201cHello\u201d\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u6211\u4ece\u54ea\u91cc\u6765\u5728\u8fd9\u91cc\uff0c\u6211\u9700\u8981\u77e5\u9053\u4ece\u54ea\u91cc\u6765\uff0c\u4e5f\u5c31\u662f\u6211\u7684\u201c\u7236\u7c7b\u201d\uff0c\u4ee5\u4e0a\u5b9e\u4f8b\u4e2d\u6211\u7684\u7236\u7c7b\u662f\u201cobject\u201d\u2014\u2014python\u4e2d\u4e00\u79cd\u975e\u5e38\u521d\u7ea7\u7684\u7c7b\u3002\u7b2c\u4e09\u4e2a\u53c2\u6570\uff1a\u6211\u8981\u5230\u54ea\u91cc\u53bb\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u9700\u8981\u8c03\u7528\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\u5305\u542b\u5230\u4e00\u4e2a\u5b57\u5178\u91cc\uff0c\u518d\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u3002\u4ee5\u4e0a\u5b9e\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2asay_hello\u65b9\u6cd5\u5305\u88c5\u8fdb\u4e86\u5b57\u5178\u4e2d\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4e09\u5927\u6c38\u6052\u547d\u9898\uff0c\u662f\u4e00\u5207\u7c7b\uff0c\u4e00\u5207\u5b9e\u4f8b\uff0c\u751a\u81f3\u4e00\u5207\u5b9e\u4f8b\u5c5e\u6027\u4e0e\u65b9\u6cd5\u90fd\u5177\u6709\u7684\u3002\u7406\u6240\u5e94\u5f53\uff0c\u5b83\u4eec\u7684\u201c\u521b\u9020\u8005\u201d\uff0c\u9053\u548c\u4e00\uff0c\u5373type\u548c\u5143\u7c7b\uff0c\u4e5f\u5177\u6709\u8fd9\u4e09\u4e2a\u53c2\u6570\u3002\u4f46\u5e73\u5e38\uff0c\u7c7b\u7684\u4e09\u5927\u6c38\u6052\u547d\u9898\u5e76\u4e0d\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\uff0c\u800c\u662f\u4ee5\u5982\u4e0b\u65b9\u5f0f\u4f20\u5165PythonclassHello(object){#class\u540e\u58f0\u660e\u201c\u6211\u662f\u8c01\u201d#\u5c0f\u62ec\u53f7\u5185\u58f0\u660e\u201c\u6211\u6765\u81ea\u54ea\u91cc\u201d#\u4e2d\u62ec\u53f7\u5185\u58f0\u660e\u201c\u6211\u8981\u5230\u54ea\u91cc\u53bb\u201ddefsay_hello(){}}12345678classHello(object){#class\u540e\u58f0\u660e\u201c\u6211\u662f\u8c01\u201d#\u5c0f\u62ec\u53f7\u5185\u58f0\u660e\u201c\u6211\u6765\u81ea\u54ea\u91cc\u201d#\u4e2d\u62ec\u53f7\u5185\u58f0\u660e\u201c\u6211\u8981\u5230\u54ea\u91cc\u53bb\u201d\u00a0\u00a0\u00a0\u00a0defsay_hello(){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}}\u9020\u7269\u4e3b\uff0c\u53ef\u4ee5\u76f4\u63a5\u521b\u9020\u5355\u4e2a\u7684\u4eba\uff0c\u4f46\u8fd9\u662f\u4e00\u4ef6\u82e6\u5f79\u3002\u9020\u7269\u4e3b\u4f1a\u5148\u521b\u9020\u201c\u4eba\u201d\u8fd9\u4e00\u7269\u79cd\uff0c\u518d\u6279\u91cf\u521b\u9020\u5177\u4f53\u7684\u4e2a\u4eba\u3002\u5e76\u5c06\u4e09\u5927\u6c38\u6052\u547d\u9898\uff0c\u4e00\u76f4\u4f20\u9012\u4e0b\u53bb\u3002\u201c\u9053\u201d\u53ef\u4ee5\u76f4\u63a5\u751f\u51fa\u201c\u4e8c\u201d\uff0c\u4f46\u5b83\u4f1a\u5148\u751f\u51fa\u201c\u4e00\u201d\uff0c\u518d\u6279\u91cf\u5730\u5236\u9020\u201c\u4e8c\u201d\u3002type\u53ef\u4ee5\u76f4\u63a5\u751f\u6210\u7c7b\uff08class\uff09\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5148\u751f\u6210\u5143\u7c7b\uff08metaclass\uff09\uff0c\u518d\u4f7f\u7528\u5143\u7c7b\u6279\u91cf\u5b9a\u5236\u7c7b\uff08class\uff09\u3002\u5143\u7c7b\u2014\u2014\u9053\u751f\u4e00\uff0c\u4e00\u751f\u4e8c\u4e00\u822c\u6765\u8bf4\uff0c\u5143\u7c7b\u5747\u88ab\u547d\u540d\u540e\u7f00\u4e3aMetalass\u3002\u60f3\u8c61\u4e00\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u81ea\u52a8\u6253\u62db\u547c\u7684\u5143\u7c7b\uff0c\u5b83\u91cc\u9762\u7684\u7c7b\u65b9\u6cd5\u5462\uff0c\u6709\u65f6\u9700\u8981say_Hello\uff0c\u6709\u65f6\u9700\u8981say_Hi\uff0c\u6709\u65f6\u53c8\u9700\u8981say_Sayolala\uff0c\u6709\u65f6\u9700\u8981say_Nihao\u3002\u5982\u679c\u6bcf\u4e2a\u5185\u7f6e\u7684say_xxx\u90fd\u9700\u8981\u5728\u7c7b\u91cc\u9762\u58f0\u660e\u4e00\u6b21\uff0c\u90a3\u5c06\u662f\u591a\u4e48\u53ef\u6015\u7684\u82e6\u5f79\uff01\u4e0d\u5982\u4f7f\u7528\u5143\u7c7b\u6765\u89e3\u51b3\u95ee\u9898\u3002\u4ee5\u4e0b\u662f\u521b\u5efa\u4e00\u4e2a\u4e13\u95e8\u201c\u6253\u62db\u547c\u201d\u7528\u7684\u5143\u7c7b\u4ee3\u7801\uff1aPythonclassSayMetaClass(type):def__new__(cls,name,bases,attrs):attrs['say_'+name]=lambdaself,value,saying=name:print(saying+','+value+'!')returntype.__new__(cls,name,bases,attrs)12345classSayMetaClass(type):\u00a0\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,attrs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['say_'+name]=lambdaself,value,saying=name:print(saying+','+value+'!')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,attrs)\u8bb0\u4f4f\u4e24\u70b9\uff1a1\u3001\u5143\u7c7b\u662f\u7531\u201ctype\u201d\u884d\u751f\u800c\u51fa\uff0c\u6240\u4ee5\u7236\u7c7b\u9700\u8981\u4f20\u5165type\u3002\u3010\u9053\u751f\u4e00\uff0c\u6240\u4ee5\u4e00\u5fc5\u987b\u5305\u542b\u9053\u30112\u3001\u5143\u7c7b\u7684\u64cd\u4f5c\u90fd\u5728__new__\u4e2d\u5b8c\u6210\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5c06\u521b\u5efa\u7684\u7c7b\uff0c\u4e4b\u540e\u7684\u53c2\u6570\u5373\u662f\u4e09\u5927\u6c38\u6052\u547d\u9898\uff1a\u6211\u662f\u8c01\uff0c\u6211\u4ece\u54ea\u91cc\u6765\uff0c\u6211\u5c06\u5230\u54ea\u91cc\u53bb\u3002\u5b83\u8fd4\u56de\u7684\u5bf9\u8c61\u4e5f\u662f\u4e09\u5927\u6c38\u6052\u547d\u9898\uff0c\u63a5\u4e0b\u6765\uff0c\u8fd9\u4e09\u4e2a\u53c2\u6570\u5c06\u4e00\u76f4\u966a\u4f34\u6211\u4eec\u3002\u5728__new__\u4e2d\uff0c\u6211\u53ea\u8fdb\u884c\u4e86\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5c31\u662fPythonattrs['say_'+name]=lambdaself,value,saying=name:print(saying+','+value+'!')1attrs['say_'+name]=lambdaself,value,saying=name:print(saying+','+value+'!')\u5b83\u8ddf\u636e\u7c7b\u7684\u540d\u5b57\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u7c7b\u65b9\u6cd5\u3002\u6bd4\u5982\u6211\u4eec\u7531\u5143\u7c7b\u521b\u5efa\u7684\u7c7b\u53eb\u201cHello\u201d\uff0c\u90a3\u521b\u5efa\u65f6\u5c31\u81ea\u52a8\u6709\u4e86\u4e00\u4e2a\u53eb\u201csay_Hello\u201d\u7684\u7c7b\u65b9\u6cd5\uff0c\u7136\u540e\u53c8\u5c06\u7c7b\u7684\u540d\u5b57\u201cHello\u201d\u4f5c\u4e3a\u9ed8\u8ba4\u53c2\u6570saying\uff0c\u4f20\u5230\u4e86\u65b9\u6cd5\u91cc\u9762\u3002\u7136\u540e\u628ahello\u65b9\u6cd5\u8c03\u7528\u65f6\u7684\u4f20\u53c2\u4f5c\u4e3avalue\u4f20\u8fdb\u53bb\uff0c\u6700\u7ec8\u6253\u5370\u51fa\u6765\u3002\u90a3\u4e48\uff0c\u4e00\u4e2a\u5143\u7c7b\u662f\u600e\u4e48\u4ece\u521b\u5efa\u5230\u8c03\u7528\u7684\u5462\uff1f\u6765\uff01\u4e00\u8d77\u6839\u636e\u9053\u751f\u4e00\u3001\u4e00\u751f\u4e8c\u3001\u4e8c\u751f\u4e09\u3001\u4e09\u751f\u4e07\u7269\u7684\u51c6\u5219\uff0c\u8d70\u8fdb\u5143\u7c7b\u7684\u751f\u547d\u5468\u671f\u5427\uff01Python#\u9053\u751f\u4e00\uff1a\u4f20\u5165typeclassSayMetaClass(type):#\u4f20\u5165\u4e09\u5927\u6c38\u6052\u547d\u9898\uff1a\u7c7b\u540d\u79f0\u3001\u7236\u7c7b\u3001\u5c5e\u6027def__new__(cls,name,bases,attrs):#\u521b\u9020\u201c\u5929\u8d4b\u201dattrs['say_'+name]=lambdaself,value,saying=name:print(saying+','+value+'!')#\u4f20\u627f\u4e09\u5927\u6c38\u6052\u547d\u9898\uff1a\u7c7b\u540d\u79f0\u3001\u7236\u7c7b\u3001\u5c5e\u6027returntype.__new__(cls,name,bases,attrs)#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u7c7bclassHello(object,metaclass=SayMetaClass):pass#\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u5217hello=Hello()#\u4e09\u751f\u4e07\u7269\uff1a\u8c03\u7528\u5b9e\u4f8b\u65b9\u6cd5hello.say_Hello('world!')12345678910111213141516171819#\u9053\u751f\u4e00\uff1a\u4f20\u5165typeclassSayMetaClass(type):\u00a0\u00a0\u00a0\u00a0\u00a0#\u4f20\u5165\u4e09\u5927\u6c38\u6052\u547d\u9898\uff1a\u7c7b\u540d\u79f0\u3001\u7236\u7c7b\u3001\u5c5e\u6027\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,attrs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u521b\u9020\u201c\u5929\u8d4b\u201d\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['say_'+name]=lambdaself,value,saying=name:print(saying+','+value+'!')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4f20\u627f\u4e09\u5927\u6c38\u6052\u547d\u9898\uff1a\u7c7b\u540d\u79f0\u3001\u7236\u7c7b\u3001\u5c5e\u6027\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,attrs)\u00a0#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u7c7bclassHello(object,metaclass=SayMetaClass):\u00a0\u00a0\u00a0\u00a0pass\u00a0#\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u5217hello=Hello()\u00a0#\u4e09\u751f\u4e07\u7269\uff1a\u8c03\u7528\u5b9e\u4f8b\u65b9\u6cd5hello.say_Hello('world!')\u8f93\u51fa\u4e3aPythonHello,world!1Hello,world!\u6ce8\u610f\uff1a\u901a\u8fc7\u5143\u7c7b\u521b\u5efa\u7684\u7c7b\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7236\u7c7b\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fmetaclass\u666e\u901a\u4eba\u51fa\u751f\u90fd\u4e0d\u4f1a\u8bf4\u8bdd\uff0c\u4f46\u6709\u7684\u4eba\u51fa\u751f\u5c31\u4f1a\u6253\u62db\u547c\u8bf4\u201cHello\u201d\uff0c\u201c\u4f60\u597d\u201d,\u201csayolala\u201d\uff0c\u8fd9\u5c31\u662f\u5929\u8d4b\u7684\u529b\u91cf\u3002\u5b83\u4f1a\u7ed9\u6211\u4eec\u9762\u5411\u5bf9\u8c61\u7684\u7f16\u7a0b\u7701\u4e0b\u65e0\u6570\u7684\u9ebb\u70e6\u3002\u73b0\u5728\uff0c\u4fdd\u6301\u5143\u7c7b\u4e0d\u53d8\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u521b\u5efaSayolala\uff0cNihao\u7c7b\uff0c\u5982\u4e0b\uff1aPython#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u7c7bclassSayolala(object,metaclass=SayMetaClass):pass#\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u5217s=Sayolala()#\u4e09\u751f\u4e07\u7269\uff1a\u8c03\u7528\u5b9e\u4f8b\u65b9\u6cd5s.say_Sayolala('japan!')123456789#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u7c7bclassSayolala(object,metaclass=SayMetaClass):\u00a0\u00a0\u00a0\u00a0pass\u00a0#\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u5217s=Sayolala()\u00a0#\u4e09\u751f\u4e07\u7269\uff1a\u8c03\u7528\u5b9e\u4f8b\u65b9\u6cd5s.say_Sayolala('japan!')\u8f93\u51faPythonSayolala,japan!1Sayolala,japan!\u4e5f\u53ef\u4ee5\u8bf4\u4e2d\u6587Python#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u7c7bclassNihao(object,metaclass=SayMetaClass):pass#\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u5217n=Nihao()#\u4e09\u751f\u4e07\u7269\uff1a\u8c03\u7528\u5b9e\u4f8b\u65b9\u6cd5n.say_Nihao('\u4e2d\u534e!')123456789#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u7c7bclassNihao(object,metaclass=SayMetaClass):\u00a0\u00a0\u00a0\u00a0pass\u00a0#\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u5217n=Nihao()\u00a0#\u4e09\u751f\u4e07\u7269\uff1a\u8c03\u7528\u5b9e\u4f8b\u65b9\u6cd5n.say_Nihao('\u4e2d\u534e!')\u8f93\u51faPythonNihao,\u4e2d\u534e!1Nihao,\u4e2d\u534e!\u518d\u6765\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1aPython#\u9053\u751f\u4e00classListMetaclass(type):def__new__(cls,name,bases,attrs):#\u5929\u8d4b\uff1a\u901a\u8fc7add\u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9aattrs['add']=lambdaself,value:self.append(value)returntype.__new__(cls,name,bases,attrs)#\u4e00\u751f\u4e8cclassMyList(list,metaclass=ListMetaclass):pass#\u4e8c\u751f\u4e09L=MyList()#\u4e09\u751f\u4e07\u7269L.add(1)12345678910111213141516#\u9053\u751f\u4e00classListMetaclass(type):\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,attrs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5929\u8d4b\uff1a\u901a\u8fc7add\u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['add']=lambdaself,value:self.append(value)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,attrs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4e00\u751f\u4e8cclassMyList(list,metaclass=ListMetaclass):\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0#\u4e8c\u751f\u4e09L=MyList()\u00a0#\u4e09\u751f\u4e07\u7269L.add(1)\u73b0\u5728\u6211\u4eec\u6253\u5370\u4e00\u4e0bLPythonprint(L)>>>[1]123print(L)\u00a0>>>[1]\u800c\u666e\u901a\u7684list\u6ca1\u6709add()\u65b9\u6cd5PythonL2=list()L2.add(1)>>>AttributeError:'list'objecthasnoattribute'add'1234L2=list()L2.add(1)\u00a0>>>AttributeError:'list'objecthasnoattribute'add'\u592a\u68d2\u4e86\uff01\u5b66\u5230\u8fd9\u91cc\uff0c\u4f60\u662f\u4e0d\u662f\u5df2\u7ecf\u4f53\u9a8c\u5230\u4e86\u9020\u7269\u4e3b\u7684\u4e50\u8da3\uff1fpython\u4e16\u754c\u7684\u4e00\u5207\uff0c\u5c3d\u5728\u638c\u63e1\u3002\u5e74\u8f7b\u7684\u9020\u7269\u4e3b\uff0c\u8bf7\u968f\u6211\u4e00\u8d77\u5f00\u521b\u65b0\u4e16\u754c\u3002\u6211\u4eec\u9009\u62e9\u4e24\u4e2a\u9886\u57df\uff0c\u4e00\u4e2a\u662fDjango\u7684\u6838\u5fc3\u601d\u60f3\uff0c\u201cObjectRelationalMapping\u201d\uff0c\u5373\u5bf9\u8c61-\u5173\u7cfb\u6620\u5c04\uff0c\u7b80\u79f0ORM\u3002\u8fd9\u662fDjango\u7684\u4e00\u5927\u96be\u70b9\uff0c\u4f46\u5b66\u5b8c\u4e86\u5143\u7c7b\uff0c\u4e00\u5207\u53d8\u5f97\u6e05\u6670\u3002\u4f60\u5bf9Django\u7684\u7406\u89e3\u5c06\u66f4\u4e0a\u4e00\u5c42\u697c\uff01\u53e6\u4e00\u4e2a\u9886\u57df\u662f\u722c\u866b\u9886\u57df\uff08\u9ed1\u5ba2\u9886\u57df\uff09\uff0c\u4e00\u4e2a\u81ea\u52a8\u641c\u7d22\u7f51\u7edc\u4e0a\u7684\u53ef\u7528\u4ee3\u7406\uff0c\u7136\u540e\u6362\u7740IP\u53bb\u7a81\u7834\u522b\u7684\u4eba\u53cd\u722c\u866b\u9650\u5236\u3002\u8fd9\u4e24\u9879\u6280\u80fd\u975e\u5e38\u6709\u7528\uff0c\u4e5f\u975e\u5e38\u597d\u73a9\uff01\u6311\u6218\u4e00\uff1a\u901a\u8fc7\u5143\u7c7b\u521b\u5efaORM\u51c6\u5907\u5de5\u4f5c\uff0c\u521b\u5efa\u4e00\u4e2aField\u7c7bPythonclassField(object):def__init__(self,name,column_type):self.name=nameself.column_type=column_typedef__str__(self):return'<%s:%s>'%(self.__class__.__name__,self.name)12345678classField(object):\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,name,column_type):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.name=name\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.column_type=column_type\u00a0\u00a0\u00a0\u00a0\u00a0def__str__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return'<%s:%s>'%(self.__class__.__name__,self.name)\u5b83\u7684\u4f5c\u7528\u662f\u5728Field\u7c7b\u5b9e\u4f8b\u5316\u65f6\u5c06\u5f97\u5230\u4e24\u4e2a\u53c2\u6570\uff0cname\u548ccolumn_type\uff0c\u5b83\u4eec\u5c06\u88ab\u7ed1\u5b9a\u4e3aField\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u5982\u679c\u8981\u5c06Field\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\u65f6\uff0c\u5c06\u8fd4\u56de\u201cField:XXX\u201d\uff0cXXX\u662f\u4f20\u5165\u7684name\u540d\u79f0\u3002\u51c6\u5907\u5de5\u4f5c\uff1a\u521b\u5efaStringField\u548cIntergerFieldPythonclassStringField(Field):def__init__(self,name):super(StringField,self).__init__(name,'varchar(100)')classIntegerField(Field):def__init__(self,name):super(IntegerField,self).__init__(name,'bigint')123456789classStringField(Field):\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(StringField,self).__init__(name,'varchar(100)')\u00a0classIntegerField(Field):\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(IntegerField,self).__init__(name,'bigint')\u5b83\u7684\u4f5c\u7528\u662f\u5728StringField,IntegerField\u5b9e\u4f8b\u521d\u59cb\u5316\u65f6\uff0c\u65f6\u81ea\u52a8\u8c03\u7528\u7236\u7c7b\u7684\u521d\u59cb\u5316\u65b9\u5f0f\u3002\u9053\u751f\u4e00PythonclassModelMetaclass(type):def__new__(cls,name,bases,attrs):ifname=='Model':returntype.__new__(cls,name,bases,attrs)print('Foundmodel:%s'%name)mappings=dict()fork,vinattrs.items():ifisinstance(v,Field):print('Foundmapping:%s==>%s'%(k,v))mappings[k]=vforkinmappings.keys():attrs.pop(k)attrs['__mappings__']=mappings#\u4fdd\u5b58\u5c5e\u6027\u548c\u5217\u7684\u6620\u5c04\u5173\u7cfbattrs['__table__']=name#\u5047\u8bbe\u8868\u540d\u548c\u7c7b\u540d\u4e00\u81f4returntype.__new__(cls,name,bases,attrs)12345678910111213141516classModelMetaclass(type):\u00a0\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,attrs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifname=='Model':\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,attrs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Foundmodel:%s'%name)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mappings=dict()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fork,vinattrs.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifisinstance(v,Field):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Foundmapping:%s==>%s'%(k,v))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mappings[k]=v\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkinmappings.keys():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs.pop(k)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__mappings__']=mappings#\u4fdd\u5b58\u5c5e\u6027\u548c\u5217\u7684\u6620\u5c04\u5173\u7cfb\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__table__']=name#\u5047\u8bbe\u8868\u540d\u548c\u7c7b\u540d\u4e00\u81f4\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,attrs)\u5b83\u505a\u4e86\u4ee5\u4e0b\u51e0\u4ef6\u4e8b\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u5178mapping\u5c06\u6bcf\u4e00\u4e2a\u7c7b\u7684\u5c5e\u6027\uff0c\u901a\u8fc7.items()\u904d\u5386\u5176\u952e\u503c\u5bf9\u3002\u5982\u679c\u503c\u662fField\u7c7b\uff0c\u5219\u6253\u5370\u952e\u503c\uff0c\u5e76\u5c06\u8fd9\u4e00\u5bf9\u952e\u503c\u7ed1\u5b9a\u5230mapping\u5b57\u5178\u4e0a\u3002\u5c06\u521a\u521a\u4f20\u5165\u503c\u4e3aField\u7c7b\u7684\u5c5e\u6027\u5220\u9664\u3002\u521b\u5efa\u4e00\u4e2a\u4e13\u95e8\u7684__mappings__\u5c5e\u6027\uff0c\u4fdd\u5b58\u5b57\u5178mapping\u3002\u521b\u5efa\u4e00\u4e2a\u4e13\u95e8\u7684__table__\u5c5e\u6027\uff0c\u4fdd\u5b58\u4f20\u5165\u7684\u7c7b\u7684\u540d\u79f0\u3002\u4e00\u751f\u4e8cPythonclassModel(dict,metaclass=ModelMetaclass):def__init__(self,**kwarg):super(Model,self).__init__(**kwarg)def__getattr__(self,key):try:returnself[key]exceptKeyError:raiseAttributeError(\"'Model'objecthasnoattribute'%s'\"%key)def__setattr__(self,key,value):self[key]=value#\u6a21\u62df\u5efa\u8868\u64cd\u4f5cdefsave(self):fields=[]args=[]fork,vinself.__mappings__.items():fields.append(v.name)args.append(getattr(self,k,None))sql='insertinto%s(%s)values(%s)'%(self.__table__,','.join(fields),','.join([str(i)foriinargs]))print('SQL:%s'%sql)print('ARGS:%s'%str(args))123456789101112131415161718192021222324classModel(dict,metaclass=ModelMetaclass):\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,**kwarg):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(Model,self).__init__(**kwarg)\u00a0\u00a0\u00a0\u00a0\u00a0def__getattr__(self,key):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself[key]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptKeyError:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseAttributeError(\"'Model'objecthasnoattribute'%s'\"%key)\u00a0\u00a0\u00a0\u00a0\u00a0def__setattr__(self,key,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self[key]=value\u00a0\u00a0\u00a0\u00a0\u00a0#\u6a21\u62df\u5efa\u8868\u64cd\u4f5c\u00a0\u00a0\u00a0\u00a0defsave(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fields=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0args=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fork,vinself.__mappings__.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fields.append(v.name)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0args.append(getattr(self,k,None))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sql='insertinto%s(%s)values(%s)'%(self.__table__,','.join(fields),','.join([str(i)foriinargs]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('SQL:%s'%sql)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('ARGS:%s'%str(args))\u5982\u679c\u4eceModel\u521b\u5efa\u4e00\u4e2a\u5b50\u7c7bUser\uff1aPythonclassUser(Model):#\u5b9a\u4e49\u7c7b\u7684\u5c5e\u6027\u5230\u5217\u7684\u6620\u5c04\uff1aid=IntegerField('id')name=StringField('username')email=StringField('email')password=StringField('password')123456classUser(Model):\u00a0\u00a0\u00a0\u00a0#\u5b9a\u4e49\u7c7b\u7684\u5c5e\u6027\u5230\u5217\u7684\u6620\u5c04\uff1a\u00a0\u00a0\u00a0\u00a0id=IntegerField('id')\u00a0\u00a0\u00a0\u00a0name=StringField('username')\u00a0\u00a0\u00a0\u00a0email=StringField('email')\u00a0\u00a0\u00a0\u00a0password=StringField('password')\u8fd9\u65f6id=IntegerField(\u2018id\u2019)\u5c31\u4f1a\u81ea\u52a8\u89e3\u6790\u4e3a\uff1aModel.__setattr__(self,\u2018id\u2019,IntegerField(\u2018id\u2019))\u56e0\u4e3aIntergerField(\u2018id\u2019)\u662fField\u7684\u5b50\u7c7b\u7684\u5b9e\u4f8b\uff0c\u81ea\u52a8\u89e6\u53d1\u5143\u7c7b\u7684__new__\uff0c\u6240\u4ee5\u5c06IntergerField(\u2018id\u2019)\u5b58\u5165__mappings__\u5e76\u5220\u9664\u8fd9\u4e2a\u952e\u503c\u5bf9\u3002\u4e8c\u751f\u4e09\u3001\u4e09\u751f\u4e07\u7269\u5f53\u4f60\u521d\u59cb\u5316\u4e00\u4e2a\u5b9e\u4f8b\u7684\u65f6\u5019\u5e76\u8c03\u7528save()\u65b9\u6cd5\u65f6\u5019Pythonu=User(id=12345,name='Batman',email='batman@nasa.org',password='iamback')u.save()12u=User(id=12345,name='Batman',email='batman@nasa.org',password='iamback')u.save()\u8fd9\u65f6\u5148\u5b8c\u6210\u4e86\u4e8c\u751f\u4e09\u7684\u8fc7\u7a0b\uff1a\u5148\u8c03\u7528Model.__setattr__\uff0c\u5c06\u952e\u503c\u8f7d\u5165\u79c1\u6709\u5bf9\u8c61\u7136\u540e\u8c03\u7528\u5143\u7c7b\u7684\u201c\u5929\u8d4b\u201d\uff0cModelMetaclass.__new__\uff0c\u5c06Model\u4e2d\u7684\u79c1\u6709\u5bf9\u8c61\uff0c\u53ea\u8981\u662fField\u7684\u5b9e\u4f8b\uff0c\u90fd\u81ea\u52a8\u5b58\u5165u.__mappings__\u3002\u63a5\u4e0b\u6765\u5b8c\u6210\u4e86\u4e09\u751f\u4e07\u7269\u7684\u8fc7\u7a0b\uff1a\u901a\u8fc7u.save()\u6a21\u62df\u6570\u636e\u5e93\u5b58\u5165\u64cd\u4f5c\u3002\u8fd9\u91cc\u6211\u4eec\u4ec5\u4ec5\u505a\u4e86\u4e00\u4e0b\u904d\u5386__mappings__\u64cd\u4f5c\uff0c\u865a\u62df\u4e86sql\u5e76\u6253\u5370\uff0c\u5728\u73b0\u5b9e\u60c5\u51b5\u4e0b\u662f\u901a\u8fc7\u8f93\u5165sql\u8bed\u53e5\u4e0e\u6570\u636e\u5e93\u6765\u8fd0\u884c\u3002\u8f93\u51fa\u7ed3\u679c\u4e3aPythonFoundmodel:UserFoundmapping:name==><StringField:username>Foundmapping:password==><StringField:password>Foundmapping:id==><IntegerField:id>Foundmapping:email==><StringField:email>SQL:insertintoUser(username,password,id,email)values(Batman,iamback,12345,batman@nasa.org)ARGS:['Batman','iamback',12345,'batman@nasa.org']1234567Foundmodel:UserFoundmapping:name==><StringField:username>Foundmapping:password==><StringField:password>Foundmapping:id==><IntegerField:id>Foundmapping:email==><StringField:email>SQL:insertintoUser(username,password,id,email)values(Batman,iamback,12345,batman@nasa.org)ARGS:['Batman','iamback',12345,'batman@nasa.org']\u5e74\u8f7b\u7684\u9020\u7269\u4e3b\uff0c\u4f60\u5df2\u7ecf\u548c\u6211\u4e00\u8d77\u4f53\u9a8c\u4e86\u7531\u201c\u9053\u201d\u6f14\u5316\u201c\u4e07\u7269\u201d\u7684\u4f1f\u5927\u5386\u7a0b\uff0c\u8fd9\u4e5f\u662fDjango\u4e2d\u7684Model\u7248\u5757\u6838\u5fc3\u539f\u7406\u3002\u63a5\u4e0b\u6765\uff0c\u8bf7\u548c\u6211\u4e00\u8d77\u8fdb\u884c\u66f4\u597d\u73a9\u7684\u722c\u866b\u5b9e\u6218\uff08\u55ef\uff0c\u4f60\u73b0\u5728\u5df2\u7ecf\u662f\u521d\u7ea7\u9ed1\u5ba2\u4e86\uff09\uff1a\u7f51\u7edc\u4ee3\u7406\u7684\u722c\u53d6\u5427\uff01\u6311\u6218\u4e8c\uff1a\u7f51\u7edc\u4ee3\u7406\u7684\u722c\u53d6\u51c6\u5907\u5de5\u4f5c\uff0c\u5148\u722c\u4e2a\u9875\u9762\u73a9\u73a9\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5requests\u548cpyquery\u8fd9\u4e24\u4e2a\u5305\u3002Python#\u6587\u4ef6\uff1aget_page.pyimportrequestsbase_headers={'User-Agent':'Mozilla/5.0(WindowsNT10.0;Win64;x64)AppleWebKit/537.36(KHTML,likeGecko)Chrome/54.0.2840.71Safari/537.36','Accept-Encoding':'gzip,deflate,sdch','Accept-Language':'zh-CN,zh;q=0.8'}defget_page(url):headers=dict(base_headers)print('Getting',url)try:r=requests.get(url,headers=headers)print('Gettingresult',url,r.status_code)ifr.status_code==200:returnr.textexceptConnectionError:print('CrawlingFailed',url)returnNone123456789101112131415161718192021#\u6587\u4ef6\uff1aget_page.pyimportrequests\u00a0base_headers={\u00a0\u00a0\u00a0\u00a0'User-Agent':'Mozilla/5.0(WindowsNT10.0;Win64;x64)AppleWebKit/537.36(KHTML,likeGecko)Chrome/54.0.2840.71Safari/537.36',\u00a0\u00a0\u00a0\u00a0'Accept-Encoding':'gzip,deflate,sdch',\u00a0\u00a0\u00a0\u00a0'Accept-Language':'zh-CN,zh;q=0.8'}\u00a0\u00a0defget_page(url):\u00a0\u00a0\u00a0\u00a0headers=dict(base_headers)\u00a0\u00a0\u00a0\u00a0print('Getting',url)\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r=requests.get(url,headers=headers)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Gettingresult',url,r.status_code)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifr.status_code==200:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnr.text\u00a0\u00a0\u00a0\u00a0exceptConnectionError:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('CrawlingFailed',url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnNone\u8fd9\u91cc\uff0c\u6211\u4eec\u5229\u7528request\u5305\uff0c\u628a\u767e\u5ea6\u7684\u6e90\u7801\u722c\u4e86\u51fa\u6765\u3002\u8bd5\u4e00\u8bd5\u6293\u767e\u5ea6\u628a\u8fd9\u4e00\u6bb5\u7c98\u5728get_page.py\u540e\u9762\uff0c\u8bd5\u5b8c\u5220\u9664Pythonif(__name__=='__main__'):rs=get_page('https://www.baidu.com')print('result:\\r\\n',rs)123if(__name__=='__main__'):\u00a0\u00a0\u00a0\u00a0rs=get_page('https://www.baidu.com')\u00a0\u00a0\u00a0\u00a0print('result:\\r\\n',rs)\u8bd5\u4e00\u8bd5\u6293\u4ee3\u7406\u628a\u8fd9\u4e00\u6bb5\u7c98\u5728get_page.py\u540e\u9762\uff0c\u8bd5\u5b8c\u5220\u9664Pythonif(__name__=='__main__'):frompyqueryimportPyQueryaspqstart_url='http://www.proxy360.cn/Region/China'print('Crawling',start_url)html=get_page(start_url)ifhtml:doc=pq(html)lines=doc('div[name=\"list_proxy_ip\"]').items()forlineinlines:ip=line.find('.tbBottomLine:nth-child(1)').text()port=line.find('.tbBottomLine:nth-child(2)').text()print(ip+':'+port)123456789101112if(__name__=='__main__'):\u00a0\u00a0\u00a0\u00a0frompyqueryimportPyQueryaspq\u00a0\u00a0\u00a0\u00a0start_url='http://www.proxy360.cn/Region/China'\u00a0\u00a0\u00a0\u00a0print('Crawling',start_url)\u00a0\u00a0\u00a0\u00a0html=get_page(start_url)\u00a0\u00a0\u00a0\u00a0ifhtml:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc=pq(html)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lines=doc('div[name=\"list_proxy_ip\"]').items()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forlineinlines:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ip=line.find('.tbBottomLine:nth-child(1)').text()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0port=line.find('.tbBottomLine:nth-child(2)').text()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(ip+':'+port)\u63a5\u4e0b\u6765\u8fdb\u5165\u6b63\u9898\uff1a\u4f7f\u7528\u5143\u7c7b\u6279\u91cf\u6293\u53d6\u4ee3\u7406\u6279\u91cf\u5904\u7406\u6293\u53d6\u4ee3\u7406Pythonfromgetpageimportget_pagefrompyqueryimportPyQueryaspq#\u9053\u751f\u4e00\uff1a\u521b\u5efa\u62bd\u53d6\u4ee3\u7406\u7684metaclassclassProxyMetaclass(type):\"\"\"\u5143\u7c7b\uff0c\u5728FreeProxyGetter\u7c7b\u4e2d\u52a0\u5165__CrawlFunc__\u548c__CrawlFuncCount__\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u8868\u793a\u722c\u866b\u51fd\u6570\uff0c\u548c\u722c\u866b\u51fd\u6570\u7684\u6570\u91cf\u3002\"\"\"def__new__(cls,name,bases,attrs):count=0attrs['__CrawlFunc__']=[]attrs['__CrawlName__']=[]fork,vinattrs.items():if'crawl_'ink:attrs['__CrawlName__'].append(k)attrs['__CrawlFunc__'].append(v)count+=1forkinattrs['__CrawlName__']:attrs.pop(k)attrs['__CrawlFuncCount__']=countreturntype.__new__(cls,name,bases,attrs)#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u4ee3\u7406\u83b7\u53d6\u7c7bclassProxyGetter(object,metaclass=ProxyMetaclass):defget_raw_proxies(self,site):proxies=[]print('Site',site)forfuncinself.__CrawlFunc__:iffunc.__name__==site:this_page_proxies=func(self)forproxyinthis_page_proxies:print('Getting',proxy,'from',site)proxies.append(proxy)returnproxiesdefcrawl_daili66(self,page_count=4):start_url='http://www.66ip.cn/{}.html'urls=[start_url.format(page)forpageinrange(1,page_count+1)]forurlinurls:print('Crawling',url)html=get_page(url)ifhtml:doc=pq(html)trs=doc('.containerboxtabletr:gt(0)').items()fortrintrs:ip=tr.find('td:nth-child(1)').text()port=tr.find('td:nth-child(2)').text()yield':'.join([ip,port])defcrawl_proxy360(self):start_url='http://www.proxy360.cn/Region/China'print('Crawling',start_url)html=get_page(start_url)ifhtml:doc=pq(html)lines=doc('div[name=\"list_proxy_ip\"]').items()forlineinlines:ip=line.find('.tbBottomLine:nth-child(1)').text()port=line.find('.tbBottomLine:nth-child(2)').text()yield':'.join([ip,port])defcrawl_goubanjia(self):start_url='http://www.goubanjia.com/free/gngn/index.shtml'html=get_page(start_url)ifhtml:doc=pq(html)tds=doc('td.ip').items()fortdintds:td.find('p').remove()yieldtd.text().replace('','')if__name__=='__main__':#\u4e8c\u751f\u4e09\uff1a\u5b9e\u4f8b\u5316ProxyGettercrawler=ProxyGetter()print(crawler.__CrawlName__)#\u4e09\u751f\u4e07\u7269forsite_labelinrange(crawler.__CrawlFuncCount__):site=crawler.__CrawlName__[site_label]myProxies=crawler.get_raw_proxies(site)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586fromgetpageimportget_pagefrompyqueryimportPyQueryaspq\u00a0\u00a0#\u9053\u751f\u4e00\uff1a\u521b\u5efa\u62bd\u53d6\u4ee3\u7406\u7684metaclassclassProxyMetaclass(type):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u5143\u7c7b\uff0c\u5728FreeProxyGetter\u7c7b\u4e2d\u52a0\u5165\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0__CrawlFunc__\u548c__CrawlFuncCount__\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u8868\u793a\u722c\u866b\u51fd\u6570\uff0c\u548c\u722c\u866b\u51fd\u6570\u7684\u6570\u91cf\u3002\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,attrs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0count=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__CrawlFunc__']=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__CrawlName__']=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fork,vinattrs.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if'crawl_'ink:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__CrawlName__'].append(k)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__CrawlFunc__'].append(v)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0count+=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkinattrs['__CrawlName__']:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs.pop(k)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs['__CrawlFuncCount__']=count\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,attrs)\u00a0\u00a0#\u4e00\u751f\u4e8c\uff1a\u521b\u5efa\u4ee3\u7406\u83b7\u53d6\u7c7b\u00a0classProxyGetter(object,metaclass=ProxyMetaclass):\u00a0\u00a0\u00a0\u00a0defget_raw_proxies(self,site):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0proxies=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Site',site)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forfuncinself.__CrawlFunc__:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iffunc.__name__==site:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this_page_proxies=func(self)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forproxyinthis_page_proxies:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Getting',proxy,'from',site)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0proxies.append(proxy)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnproxies\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defcrawl_daili66(self,page_count=4):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0start_url='http://www.66ip.cn/{}.html'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0urls=[start_url.format(page)forpageinrange(1,page_count+1)]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forurlinurls:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Crawling',url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0html=get_page(url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhtml:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc=pq(html)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0trs=doc('.containerboxtabletr:gt(0)').items()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fortrintrs:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ip=tr.find('td:nth-child(1)').text()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0port=tr.find('td:nth-child(2)').text()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yield':'.join([ip,port])\u00a0\u00a0\u00a0\u00a0\u00a0defcrawl_proxy360(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0start_url='http://www.proxy360.cn/Region/China'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Crawling',start_url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0html=get_page(start_url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhtml:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc=pq(html)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lines=doc('div[name=\"list_proxy_ip\"]').items()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forlineinlines:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ip=line.find('.tbBottomLine:nth-child(1)').text()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0port=line.find('.tbBottomLine:nth-child(2)').text()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yield':'.join([ip,port])\u00a0\u00a0\u00a0\u00a0\u00a0defcrawl_goubanjia(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0start_url='http://www.goubanjia.com/free/gngn/index.shtml'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0html=get_page(start_url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhtml:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc=pq(html)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0tds=doc('td.ip').items()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fortdintds:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0td.find('p').remove()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldtd.text().replace('','')\u00a0\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0#\u4e8c\u751f\u4e09\uff1a\u5b9e\u4f8b\u5316ProxyGetter\u00a0\u00a0\u00a0\u00a0crawler=ProxyGetter()\u00a0\u00a0\u00a0\u00a0print(crawler.__CrawlName__)\u00a0\u00a0\u00a0\u00a0#\u4e09\u751f\u4e07\u7269\u00a0\u00a0\u00a0\u00a0forsite_labelinrange(crawler.__CrawlFuncCount__):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0site=crawler.__CrawlName__[site_label]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0myProxies=crawler.get_raw_proxies(site)\u9053\u751f\u4e00\uff1a\u5143\u7c7b\u7684__new__\u4e2d\uff0c\u505a\u4e86\u56db\u4ef6\u4e8b\uff1a\u5c06\u201ccrawl_\u201d\u5f00\u5934\u7684\u7c7b\u65b9\u6cd5\u7684\u540d\u79f0\u63a8\u5165ProxyGetter.__CrawlName__\u5c06\u201ccrawl_\u201d\u5f00\u5934\u7684\u7c7b\u65b9\u6cd5\u7684\u672c\u8eab\u63a8\u5165ProxyGetter.__CrawlFunc__\u8ba1\u7b97\u7b26\u5408\u201ccrawl_\u201d\u5f00\u5934\u7684\u7c7b\u65b9\u6cd5\u4e2a\u6570\u5220\u9664\u6240\u6709\u7b26\u5408\u201ccrawl_\u201d\u5f00\u5934\u7684\u7c7b\u65b9\u6cd5\u600e\u4e48\u6837\uff1f\u662f\u4e0d\u662f\u548c\u4e4b\u524d\u521b\u5efaORM\u7684__mappings__\u8fc7\u7a0b\u6781\u4e3a\u76f8\u4f3c\uff1f\u4e00\u751f\u4e8c\uff1a\u7c7b\u91cc\u9762\u5b9a\u4e49\u4e86\u4f7f\u7528pyquery\u6293\u53d6\u9875\u9762\u5143\u7d20\u7684\u65b9\u6cd5\u5206\u522b\u4ece\u4e09\u4e2a\u514d\u8d39\u4ee3\u7406\u7f51\u7ad9\u6293\u53d6\u4e86\u9875\u9762\u4e0a\u663e\u793a\u7684\u5168\u90e8\u4ee3\u7406\u3002\u5982\u679c\u5bf9yield\u7528\u6cd5\u4e0d\u719f\u6089\uff0c\u53ef\u4ee5\u67e5\u770b\uff1a\u5ed6\u96ea\u5cf0\u7684python\u6559\u7a0b\uff1a\u751f\u6210\u5668\u4e8c\u751f\u4e09\uff1a\u521b\u5efa\u5b9e\u4f8b\u5bf9\u8c61crawler\u7565\u4e09\u751f\u4e07\u7269\uff1a\u904d\u5386\u6bcf\u4e00\u4e2a__CrawlFunc__\u5728ProxyGetter.__CrawlName__\u4e0a\u9762\uff0c\u83b7\u53d6\u53ef\u4ee5\u6293\u53d6\u7684\u7684\u7f51\u5740\u540d\u3002\u89e6\u53d1\u7c7b\u65b9\u6cd5ProxyGetter.get_raw_proxies(site)\u904d\u5386ProxyGetter.__CrawlFunc__,\u5982\u679c\u65b9\u6cd5\u540d\u548c\u7f51\u5740\u540d\u79f0\u76f8\u540c\u7684\uff0c\u5219\u6267\u884c\u8fd9\u4e00\u4e2a\u65b9\u6cd5\u628a\u6bcf\u4e2a\u7f51\u5740\u83b7\u53d6\u5230\u7684\u4ee3\u7406\u6574\u5408\u6210\u6570\u7ec4\u8f93\u51fa\u3002\u90a3\u4e48\u3002\u3002\u3002\u600e\u4e48\u5229\u7528\u6279\u91cf\u4ee3\u7406\uff0c\u51b2\u51fb\u522b\u4eba\u7684\u7f51\u7ad9\uff0c\u5957\u53d6\u522b\u4eba\u7684\u5bc6\u7801\uff0c\u72c2\u53d1\u5e7f\u544a\u6c34\u8d34\uff0c\u5b9a\u65f6\u9a9a\u6270\u5ba2\u6237\uff1f\u5443\uff01\u60f3\u5565\u5462\uff01\u8fd9\u4e9b\u81ea\u5df1\u609f\uff01\u5982\u679c\u609f\u4e0d\u5230\uff0c\u8bf7\u542c\u4e0b\u56de\u5206\u89e3\uff01\u5e74\u8f7b\u7684\u9020\u7269\u4e3b\uff0c\u521b\u9020\u4e16\u754c\u7684\u5de5\u5177\u5df2\u7ecf\u5728\u4f60\u624b\u4e0a\uff0c\u8bf7\u4f60\u5c06\u5b83\u7684\u5a01\u529b\u53d1\u6325\u5230\u6781\u81f4\uff01\u8bf7\u8bb0\u4f4f\u6325\u52a8\u5de5\u5177\u7684\u53e3\u8bc0\uff1a\u9053\u751f\u4e00\uff0c\u4e00\u751f\u4e8c\uff0c\u4e8c\u751f\u4e09\uff0c\u4e09\u751f\u4e07\u7269\u6211\u662f\u8c01\uff0c\u6211\u6765\u81ea\u54ea\u91cc\uff0c\u6211\u8981\u5230\u54ea\u91cc\u53bb3\u8d5e15\u6536\u85cf7\u8bc4\u8bba"]},
{"art_title": ["Perl \u4e0e Python \u4e4b\u95f4\u7684\u4e00\u4e9b\u5f02\u540c"], "art_url": ["http://python.jobbole.com/88845/"], "art_create_time": ["2017/11/10"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u5f20\u98961\u8d5e\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u300a\u6d41\u7545\u7684 Python \u300b\u9605\u8bfb\u7b14\u8bb0"], "art_url": ["http://python.jobbole.com/88735/"], "art_create_time": ["2017/10/24"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/10/74fe6d8c7b47cda27671bb237522e294.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aweapon\u00a0\u00a0\u00a0\u8d77\u6b65\u300a\u6d41\u7545\u7684python\u300b\u662f\u4e00\u672c\u9002\u5408python\u8fdb\u9636\u7684\u4e66,\u91cc\u9762\u4ecb\u7ecd\u7684\u57fa\u672c\u90fd\u662f\u9ad8\u7ea7\u7684python\u7528\u6cd5.\u5bf9\u4e8e\u521d\u5b66python\u7684\u4eba\u6765\u8bf4,\u57fa\u7840\u5927\u6982\u4e5f\u5c31\u591f\u7528\u4e86,\u4f46\u5f80\u5f80\u7531\u4e8e\u591f\u7528\u8ba9\u4ed6\u4eec\u5fd8\u4e86\u6df1\u5165,\u53bb\u7cbe\u901a.\u6211\u4eec\u5e0c\u671b\u5168\u9762\u4e86\u89e3\u8fd9\u4e2a\u8bed\u8a00\u7684\u80fd\u529b\u8fb9\u754c,\u53ef\u80fd\u4e00\u4e9b\u9ad8\u7ea7\u7684\u7279\u6027\u5e76\u4e0d\u80fd\u9a6c\u4e0a\u638c\u63e1\u4f7f\u7528,\u56e0\u6b64\u8fd9\u672c\u4e66\u662f\u5de5\u4f5c\u4e4b\u4f59,\u8fd8\u6709\u4f59\u529b\u7684\u4eba\u6765\u9605\u8bfb,\u6211\u8fd9\u8fb9\u5c31\u5c06\u5176\u6709\u7528,\u7cbe\u5999\u7684\u8fdb\u9636\u5185\u5bb9\u6574\u7406\u51fa\u6765.\u8fd9\u672c\u4e66\u670921\u4e2a\u7ae0\u8282,\u6574\u7406\u4e5f\u662f\u6839\u636e\u8fd9\u4e9b\u7ae0\u8282\u8fc7\u6765.\u7b2c\u4e00\u7ae0:python\u6570\u636e\u6a21\u578b\u8fd9\u90e8\u5206\u4e3b\u8981\u4ecb\u7ecd\u4e86python\u7684\u9b54\u672f\u65b9\u6cd5,\u5b83\u4eec\u7ecf\u5e38\u662f\u4e24\u4e2a\u4e0b\u5212\u7ebf\u5305\u56f4\u6765\u547d\u540d\u7684(\u6bd4\u5982__init__,__lt__,__len__).\u8fd9\u4e9b\u7279\u6b8a\u65b9\u6cd5\u662f\u4e3a\u4e86\u88abpython\u89e3\u91ca\u5668\u8c03\u7528\u7684,\u8fd9\u4e9b\u65b9\u6cd5\u4f1a\u6ce8\u518c\u5230\u4ed6\u4eec\u7684\u7c7b\u578b\u4e2d\u65b9\u6cd5\u96c6\u5408\u4e2d,\u76f8\u5f53\u4e8e\u4e3acpython\u63d0\u4f9b\u6284\u8fd1\u8def.\u8fd9\u4e9b\u65b9\u6cd5\u7684\u901f\u5ea6\u4e5f\u6bd4\u666e\u901a\u65b9\u6cd5\u8981\u5feb,\u5f53\u7136\u5728\u81ea\u5df1\u4e0d\u6e05\u695a\u8fd9\u4e9b\u9b54\u672f\u65b9\u6cd5\u7684\u7528\u9014\u65f6,\u4e0d\u8981\u968f\u610f\u6dfb\u52a0.\u5173\u4e8e\u5b57\u7b26\u4e32\u7684\u8868\u73b0\u5f62\u5f0f\u662f\u4e24\u79cd,__str__\u4e0e__repr__.python\u7684\u5185\u7f6e\u51fd\u6570repr\u5c31\u662f\u901a\u8fc7__repr__\u8fd9\u4e2a\u7279\u6b8a\u65b9\u6cd5\u6765\u5f97\u5230\u4e00\u4e2a\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f.\u8fd9\u4e2a\u5728\u4ea4\u4e92\u6a21\u5f0f\u4e0b\u6bd4\u8f83\u5e38\u7528,\u5982\u679c\u6ca1\u6709\u5b9e\u73b0__repr__,\u5f53\u63a7\u5236\u53f0\u6253\u5370\u4e00\u4e2a\u5bf9\u8c61\u65f6\u5f80\u5f80\u662f.\u800c__str__\u5219\u662fstr()\u51fd\u6570\u65f6\u4f7f\u7528\u7684,\u6216\u662f\u5728print\u51fd\u6570\u6253\u5370\u4e00\u4e2a\u5bf9\u8c61\u7684\u65f6\u5019\u624d\u88ab\u8c03\u7528,\u7ec8\u7aef\u7528\u6237\u53cb\u597d.\u4e24\u8005\u8fd8\u6709\u4e00\u4e2a\u533a\u522b,\u5728\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u65f6,\u201c%s\u201d\u5bf9\u5e94\u4e86__str__.\u800c\u201c%r\u201d\u5bf9\u5e94\u4e86__repr__.__str__\u548c__repr__\u5728\u4f7f\u7528\u4e0a\u6bd4\u8f83\u63a8\u8350\u7684\u662f\uff0c\u524d\u8005\u662f\u7ed9\u7ec8\u7aef\u7528\u6237\u770b\uff0c\u800c\u540e\u8005\u5219\u66f4\u65b9\u4fbf\u6211\u4eec\u8c03\u8bd5\u548c\u8bb0\u5f55\u65e5\u5fd7.\u66f4\u591a\u7684\u7279\u6b8a\u65b9\u6cd5:https://docs.python.org/3/reference/datamodel.html\u7b2c\u4e8c\u7ae0:\u5e8f\u5217\u6784\u6210\u7684\u6570\u7ec4\u8fd9\u90e8\u5206\u4e3b\u8981\u662f\u4ecb\u7ecd\u5e8f\u5217,\u7740\u91cd\u4ecb\u7ecd\u6570\u7ec4\u548c\u5143\u7ec4\u7684\u4e00\u4e9b\u9ad8\u7ea7\u7528\u6cd5.\u5e8f\u5217\u6309\u7167\u5bb9\u7eb3\u6570\u636e\u7684\u7c7b\u578b\u53ef\u4ee5\u5206\u4e3a:\u5bb9\u5668\u5e8f\u5217:list\u3001tuple\u548ccollections.deque\u8fd9\u4e9b\u5e8f\u5217\u80fd\u5b58\u653e\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6241\u5e73\u5e8f\u5217:str\u3001bytes\u3001bytearray\u3001memoryview\u548carray.array\uff0c\u8fd9\u7c7b\u5e8f\u5217\u53ea\u80fd\u5bb9\u7eb3\u4e00\u79cd\u7c7b\u578b.\u5982\u679c\u6309\u7167\u662f\u5426\u80fd\u88ab\u4fee\u6539\u53ef\u4ee5\u5206\u4e3a:\u53ef\u53d8\u5e8f\u5217:list\u3001bytearray\u3001array.array\u3001collections.deque\u548cmemoryview\u4e0d\u53ef\u53d8\u5e8f\u5217:tuple\u3001str\u548cbytes\u5217\u8868\u63a8\u5bfc\u5217\u8868\u63a8\u5bfc\u662f\u6784\u5efa\u5217\u8868\u7684\u5feb\u6377\u65b9\u5f0f,\u53ef\u8bfb\u6027\u66f4\u597d\u4e14\u6548\u7387\u66f4\u9ad8.\u4f8b\u5982,\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u53d8\u6210unicode\u7684\u7801\u4f4d\u5217\u8868\u7684\u4f8b\u5b50,\u4e00\u822c:Pythonsymbols='$\u00a2\u00a3\u00a5\u20ac\u00a4'codes=[]forsymbolinsymbols:codes.append(ord(symbol))1234symbols='$\u00a2\u00a3\u00a5\u20ac\u00a4'codes=[]forsymbolinsymbols:\u00a0\u00a0\u00a0\u00a0codes.append(ord(symbol))\u4f7f\u7528\u5217\u8868\u63a8\u5bfc:Pythonsymbols='$\u00a2\u00a3\u00a5\u20ac\u00a4'codes=[ord(symbol)forsymbolinsymbols]12symbols='$\u00a2\u00a3\u00a5\u20ac\u00a4'codes=[ord(symbol)forsymbolinsymbols]\u80fd\u7528\u5217\u8868\u63a8\u5bfc\u6765\u521b\u5efa\u4e00\u4e2a\u5217\u8868,\u5c3d\u91cf\u4f7f\u7528\u63a8\u5bfc,\u5e76\u4e14\u4fdd\u6301\u5b83\u7b80\u77ed.\u7b1b\u5361\u5c14\u79ef\u4e0e\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u662f\u80fd\u9010\u4e2a\u4ea7\u51fa\u5143\u7d20,\u8282\u7701\u5185\u5b58.\u4f8b\u5982:Python>>>colors=['black','white']>>>sizes=['S','M','L']>>>fortshirtin('%s%s'%(c,s)forcincolorsforsinsizes):...print(tshirt)1234>>>colors=['black','white']>>>sizes=['S','M','L']>>>fortshirtin('%s%s'%(c,s)forcincolorsforsinsizes):...print(tshirt)\u5b9e\u4f8b\u4e2d\u5217\u8868\u5143\u7d20\u6bd4\u8f83\u5c11,\u5982\u679c\u6362\u6210\u4e24\u4e2a\u5404\u67091000\u4e2a\u5143\u7d20\u7684\u5217\u8868,\u663e\u7136\u8fd9\u6837\u7ec4\u5408\u7684\u7b1b\u5361\u5c14\u79ef\u662f\u4e00\u4e2a\u542b\u6709100\u4e07\u5143\u7d20\u7684\u5217\u8868,\u5185\u5b58\u5c06\u4f1a\u5360\u7528\u5f88\u5927,\u800c\u662f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u5c31\u53ef\u4ee5\u5e2e\u5fd9\u7701\u6389for\u5faa\u73af\u7684\u5f00\u9500.\u5177\u540d\u5143\u7ec4\u5143\u7ec4\u7ecf\u5e38\u88ab\u4f5c\u4e3a\u4e0d\u53ef\u53d8\u5217\u8868\u7684\u4ee3\u8868.\u7ecf\u5e38\u53ea\u8981\u6570\u5b57\u7d22\u5f15\u83b7\u53d6\u5143\u7d20,\u4f46\u5176\u5b9e\u5b83\u8fd8\u53ef\u4ee5\u7ed9\u5143\u7d20\u547d\u540d:Python>>>fromcollectionsimportnamedtuple>>>City=namedtuple('City','namecountrypopulationcoordinates')>>>tokyo=City('Tokyo','JP',36.933,(35.689722,139.691667))>>>tokyoCity(name='Tokyo',country='JP',population=36.933,coordinates=(35.689722,139.691667))>>>tokyo.population36.933>>>tokyo.coordinates(35.689722,139.691667)>>>tokyo[1]'JP'123456789101112>>>fromcollectionsimportnamedtuple>>>City=namedtuple('City','namecountrypopulationcoordinates')>>>tokyo=City('Tokyo','JP',36.933,(35.689722,139.691667))>>>tokyoCity(name='Tokyo',country='JP',population=36.933,coordinates=(35.689722,139.691667))>>>tokyo.population36.933>>>tokyo.coordinates(35.689722,139.691667)>>>tokyo[1]'JP'\u5207\u7247\u5217\u8868\u4e2d\u662f\u4ee50\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u6807,\u5207\u7247\u53ef\u4ee5\u6839\u636e\u4e0b\u6807\u63d0\u53d6\u67d0\u4e00\u4e2a\u7247\u6bb5.\u7528s[a:b:c]\u7684\u5f62\u5f0f\u5bf9s\u5728a\u548cb\u4e4b\u95f4\u4ee5c\u4e3a\u95f4\u9694\u53d6\u503c\u3002c\u7684\u503c\u8fd8\u53ef\u4ee5\u4e3a\u8d1f,\u8d1f\u503c\u610f\u5473\u7740\u53cd\u5411\u53d6\u503c.Python>>>s='bicycle'>>>s[::3]'bye'>>>s[::-1]'elcycib'>>>s[::-2]'eccb'1234567>>>s='bicycle'>>>s[::3]'bye'>>>s[::-1]'elcycib'>>>s[::-2]'eccb'\u7b2c\u4e09\u7ae0:\u5b57\u5178\u548c\u96c6\u5408dict\u7c7b\u578b\u4e0d\u4f46\u5728\u5404\u79cd\u7a0b\u5e8f\u91cc\u5e7f\u6cdb\u4f7f\u7528,\u5b83\u4e5f\u662fPython\u8bed\u8a00\u7684\u57fa\u77f3.\u6b63\u662f\u56e0\u4e3adict\u7c7b\u578b\u7684\u91cd\u8981,Python\u5bf9\u5176\u7684\u5b9e\u73b0\u505a\u4e86\u9ad8\u5ea6\u7684\u4f18\u5316,\u5176\u4e2d\u6700\u91cd\u8981\u7684\u539f\u56e0\u5c31\u662f\u80cc\u540e\u7684\u300c\u6563\u5217\u8868\u300dset\uff08\u96c6\u5408\uff09\u548cdict\u4e00\u6837,\u5176\u5b9e\u73b0\u57fa\u7840\u4e5f\u662f\u4f9d\u8d56\u4e8e\u6563\u5217\u8868.\u6563\u5217\u8868\u4e5f\u53eb\u54c8\u5e0c\u8868,\u5bf9\u4e8edict\u7c7b\u578b,\u5b83\u7684key\u5fc5\u987b\u662f\u53ef\u54c8\u5e0c\u7684\u6570\u636e\u7c7b\u578b.\u4ec0\u4e48\u662f\u53ef\u54c8\u5e0c\u7684\u6570\u636e\u7c7b\u578b\u5462,\u5b83\u7684\u5b98\u65b9\u89e3\u91ca\u662f:\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u662f\u53ef\u6563\u5217\u7684\uff0c\u90a3\u4e48\u5728\u8fd9\u4e2a\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u4e2d\uff0c\u5b83\u7684\u6563\u5217\u503c\u662f\u4e0d\u53d8\u7684\uff0c\u800c\u4e14\u8fd9\u4e2a\u5bf9\u8c61\u9700\u8981\u5b9e\u73b0__hash__()\u65b9\u6cd5\u3002\u53e6\u5916\u53ef\u6563\u5217\u5bf9\u8c61\u8fd8\u8981\u6709__qe__()\u65b9\u6cd5\uff0c\u8fd9\u6837\u624d\u80fd\u8ddf\u5176\u4ed6\u952e\u505a\u6bd4\u8f83\u3002\u5982\u679c\u4e24\u4e2a\u53ef\u6563\u5217\u5bf9\u8c61\u662f\u76f8\u7b49\u7684\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u6563\u5217\u503c\u4e00\u5b9a\u662f\u4e00\u6837\u7684\u2026\u2026str,bytes,frozenset\u548c\u6570\u503c\u90fd\u662f\u53ef\u6563\u5217\u7c7b\u578b.\u5b57\u5178\u63a8\u5bfc\u5f0fPythonDIAL_CODE=[(86,'China'),(91,'India'),(7,'Russia'),(81,'Japan'),]###\u5229\u7528\u5b57\u5178\u63a8\u5bfc\u5feb\u901f\u751f\u6210\u5b57\u5178country_code={country:codeforcode,countryinDIAL_CODE}print(country_code)'''OUT:{'China':86,'India':91,'Russia':7,'Japan':81}'''123456789101112131415DIAL_CODE=[\u00a0\u00a0\u00a0\u00a0(86,'China'),\u00a0\u00a0\u00a0\u00a0(91,'India'),\u00a0\u00a0\u00a0\u00a0(7,'Russia'),\u00a0\u00a0\u00a0\u00a0(81,'Japan'),]\u00a0###\u5229\u7528\u5b57\u5178\u63a8\u5bfc\u5feb\u901f\u751f\u6210\u5b57\u5178country_code={country:codeforcode,countryinDIAL_CODE}print(country_code)\u00a0'''OUT:{'China':86,'India':91,'Russia':7,'Japan':81}'''defaultdict\uff1a\u5904\u7406\u627e\u4e0d\u5230\u7684\u952e\u7684\u4e00\u4e2a\u9009\u62e9\u5f53\u67d0\u4e2a\u952e\u4e0d\u5728\u6620\u5c04\u91cc,\u6211\u4eec\u4e5f\u5e0c\u671b\u4e5f\u80fd\u5f97\u5230\u4e00\u4e2a\u9ed8\u8ba4\u503c.\u8fd9\u5c31\u662fdefaultdict,\u5b83\u662fdict\u7684\u5b50\u7c7b,\u5e76\u5b9e\u73b0\u4e86__missing__\u65b9\u6cd5.<strong>importcollectionsindex=collections.defaultdict(list)foriteminnums:key=item%2index[key].append(item)</strong>12345<strong>importcollectionsindex=collections.defaultdict(list)foriteminnums:\u00a0\u00a0\u00a0\u00a0key=item%2\u00a0\u00a0\u00a0\u00a0index[key].append(item)</strong>\u5b57\u5178\u7684\u53d8\u79cd\u6807\u51c6\u5e93\u91cccollections\u6a21\u5757\u4e2d\uff0c\u9664\u4e86defaultdict\u4e4b\u5916\u7684\u4e0d\u540c\u6620\u5c04\u7c7b\u578b:OrderDict\uff1a\u8fd9\u4e2a\u7c7b\u578b\u5728\u6dfb\u52a0\u952e\u7684\u65f6\u5019\uff0c\u4f1a\u4fdd\u5b58\u987a\u5e8f\uff0c\u56e0\u6b64\u952e\u7684\u8fed\u4ee3\u987a\u5e8f\u603b\u662f\u4e00\u81f4\u7684ChainMap\uff1a\u8be5\u7c7b\u578b\u53ef\u4ee5\u5bb9\u7eb3\u6570\u4e2a\u4e0d\u540c\u7684\u6620\u5c04\u5bf9\u50cf\uff0c\u5728\u8fdb\u884c\u952e\u7684\u67e5\u627e\u65f6\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u4f1a\u88ab\u5f53\u505a\u4e00\u4e2a\u6574\u4f53\u9010\u4e2a\u67e5\u627e\uff0c\u76f4\u5230\u952e\u88ab\u627e\u5230\u4e3a\u6b62pylookup=ChainMap(locals(),globals())Counter\uff1a\u8fd9\u4e2a\u6620\u5c04\u7c7b\u578b\u4f1a\u7ed9\u952e\u51c6\u5907\u4e00\u4e2a\u6574\u6570\u6280\u672f\u5668\uff0c\u6bcf\u6b21\u66f4\u884c\u4e00\u4e2a\u952e\u7684\u65f6\u5019\u90fd\u4f1a\u589e\u52a0\u8fd9\u4e2a\u8ba1\u6570\u5668\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7c7b\u578b\u53ef\u4ee5\u7528\u6765\u7ed9\u6563\u5217\u8868\u5bf9\u8c61\u8ba1\u6570\uff0c\u6216\u8005\u5f53\u6210\u591a\u91cd\u96c6\u6765\u7528.Pythonimportcollectionsct=collections.Counter('abracadabra')print(ct)#Counter({'a':5,'b':2,'r':2,'c':1,'d':1})ct.update('aaaaazzz')print(ct)#Counter({'a':10,'z':3,'b':2,'r':2,'c':1,'d':1})print(ct.most_common(2))#[('a',10),('z',3)]123456importcollectionsct=collections.Counter('abracadabra')print(ct)\u00a0\u00a0#Counter({'a':5,'b':2,'r':2,'c':1,'d':1})ct.update('aaaaazzz')print(ct)\u00a0\u00a0#Counter({'a':10,'z':3,'b':2,'r':2,'c':1,'d':1})print(ct.most_common(2))#[('a',10),('z',3)]UserDict:\u8fd9\u4e2a\u7c7b\u5176\u5b9e\u5c31\u662f\u628a\u6807\u51c6dict\u7528\u7eafPython\u53c8\u5b9e\u73b0\u4e86\u4e00\u904dPythonimportcollectionsclassStrKeyDict(collections.UserDict):def__missing__(self,key):ifisinstance(key,str):raiseKeyError(key)returnself[str(key)]def__contains__(self,key):returnstr(key)inself.datadef__setitem__(self,key,item):self.data[str(key)]=item123456789101112importcollectionsclassStrKeyDict(collections.UserDict):\u00a0\u00a0\u00a0\u00a0def__missing__(self,key):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifisinstance(key,str):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseKeyError(key)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself[str(key)]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__contains__(self,key):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnstr(key)inself.data\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__setitem__(self,key,item):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.data[str(key)]=item\u4e0d\u53ef\u53d8\u6620\u5c04\u7c7b\u578b\u8bf4\u5230\u4e0d\u53ef\u53d8,\u7b2c\u4e00\u60f3\u5230\u7684\u80af\u5b9a\u662f\u5143\u7ec4,\u4f46\u662f\u5bf9\u4e8e\u5b57\u5178\u6765\u8bf4,\u8981\u5c06key\u548cvalue\u7684\u5bf9\u5e94\u5173\u7cfb\u53d8\u6210\u4e0d\u53ef\u53d8,types\u6a21\u5757\u7684MappingProxyType\u53ef\u4ee5\u505a\u5230:PythonfromtypesimportMappingProxyTyped={1:'A'}d_proxy=MappingProxyType(d)d_proxy[1]='B'#TypeError:'mappingproxy'objectdoesnotsupportitemassignmentd[2]='B'print(d_proxy)#mappingproxy({1:'A',2:'B'})1234567fromtypesimportMappingProxyTyped={1:'A'}d_proxy=MappingProxyType(d)d_proxy[1]='B'#TypeError:'mappingproxy'objectdoesnotsupportitemassignment\u00a0d[2]='B'print(d_proxy)#mappingproxy({1:'A',2:'B'})d_proxy\u662f\u52a8\u6001\u7684,\u4e5f\u5c31\u662f\u8bf4\u5bf9d\u6240\u505a\u7684\u4efb\u4f55\u6539\u52a8\u90fd\u4f1a\u53cd\u9988\u5230\u5b83\u4e0a\u9762.\u96c6\u5408\u8bba\u96c6\u5408\u7684\u672c\u8d28\u662f\u8bb8\u591a\u552f\u4e00\u5bf9\u8c61\u7684\u805a\u96c6.\u56e0\u6b64,\u96c6\u5408\u53ef\u4ee5\u7528\u4e8e\u53bb\u91cd.\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u5fc5\u987b\u662f\u53ef\u6563\u5217\u7684,\u4f46\u662fset\u672c\u8eab\u662f\u4e0d\u53ef\u6563\u5217\u7684,\u800cfrozenset\u672c\u8eab\u53ef\u4ee5\u6563\u5217.\u96c6\u5408\u5177\u6709\u552f\u4e00\u6027,\u4e0e\u6b64\u540c\u65f6,\u96c6\u5408\u8fd8\u5b9e\u73b0\u4e86\u5f88\u591a\u57fa\u7840\u7684\u4e2d\u7f00\u8fd0\u7b97\u7b26.\u7ed9\u5b9a\u4e24\u4e2a\u96c6\u5408a\u548cb,a|b\u8fd4\u56de\u7684\u662f\u5b83\u4eec\u7684\u5408\u96c6,a&b\u5f97\u5230\u7684\u662f\u4ea4\u96c6,\u800ca\u2013b\u5f97\u5230\u7684\u662f\u5dee\u96c6.\u5408\u7406\u7684\u5229\u7528\u8fd9\u4e9b\u7279\u6027,\u4e0d\u4ec5\u80fd\u51cf\u5c11\u4ee3\u7801\u7684\u6570\u91cf,\u66f4\u80fd\u589e\u52a0\u8fd0\u884c\u6548\u7387.Python#\u96c6\u5408\u7684\u521b\u5efas=set([1,2,2,3])#\u7a7a\u96c6\u5408s=set()#\u96c6\u5408\u5b57\u9762\u91cfs={1,2}#\u96c6\u5408\u63a8\u5bfcs={chr(i)foriinrange(23,45)}1234567891011#\u96c6\u5408\u7684\u521b\u5efas=set([1,2,2,3])\u00a0#\u7a7a\u96c6\u5408s=set()\u00a0#\u96c6\u5408\u5b57\u9762\u91cfs={1,2}\u00a0#\u96c6\u5408\u63a8\u5bfcs={chr(i)foriinrange(23,45)}\u7b2c\u56db\u7ae0:\u6587\u672c\u548c\u5b57\u8282\u5e8f\u5217\u672c\u7ae0\u8ba8\u8bba\u4e86\u6587\u672c\u5b57\u7b26\u4e32\u548c\u5b57\u8282\u5e8f\u5217,\u4ee5\u53ca\u4e00\u4e9b\u7f16\u7801\u4e0a\u7684\u8f6c\u6362.\u672c\u7ae0\u8ba8\u8bba\u7684str\u6307\u7684\u662fpython3\u4e0b\u7684.\u5b57\u7b26\u95ee\u9898\u5b57\u7b26\u4e32\u662f\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u6982\u5ff5:\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u5b57\u7b26\u5e8f\u5217.\u4f46\u662f\u5173\u4e8e\u201c\u5b57\u7b26\u201d\u7684\u5b9a\u4e49\u5374\u4e94\u82b1\u516b\u95e8,\u5176\u4e2d,\u201c\u5b57\u7b26\u201d\u7684\u6700\u4f73\u5b9a\u4e49\u662fUnicode\u5b57\u7b26.\u56e0\u6b64,python3\u4e2d\u7684str\u5bf9\u8c61\u4e2d\u83b7\u5f97\u7684\u5143\u7d20\u5c31\u662funicode\u5b57\u7b26.\u628a\u7801\u4f4d\u8f6c\u6362\u6210\u5b57\u8282\u5e8f\u5217\u7684\u8fc7\u7a0b\u5c31\u662f\u7f16\u7801,\u628a\u5b57\u8282\u5e8f\u5217\u8f6c\u6362\u6210\u7801\u4f4d\u7684\u8fc7\u7a0b\u5c31\u662f\u7f16\u7801:Python>>>s='caf\u00e9'>>>len(s)4>>>b=s.encode('utf8')>>>bb'caf\\xc3\\xa9'>>>len(b)5>>>b.decode('utf8')#'caf\u00e9123456789>>>s='caf\u00e9'>>>len(s)4>>>b=s.encode('utf8')>>>bb'caf\\xc3\\xa9'>>>len(b)5>>>b.decode('utf8')#'caf\u00e9\u7801\u4f4d\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4eba\u7c7b\u53ef\u8bfb\u7684\u6587\u672c,\u800c\u5b57\u7b26\u5e8f\u5217\u5219\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5bf9\u673a\u5668\u66f4\u53cb\u597d.\u6240\u4ee5\u8981\u533a\u5206.decode()\u548c.encode()\u4e5f\u5f88\u7b80\u5355.\u4ece\u5b57\u8282\u5e8f\u5217\u5230\u4eba\u7c7b\u80fd\u7406\u89e3\u7684\u6587\u672c\u5c31\u662f\u89e3\u7801(decode).\u800c\u628a\u4eba\u7c7b\u80fd\u7406\u89e3\u7684\u53d8\u6210\u4eba\u7c7b\u4e0d\u597d\u7406\u89e3\u7684\u5b57\u8282\u5e8f\u5217\u5c31\u662f\u7f16\u7801(encode).\u5b57\u8282\u6982\u8981python3\u6709\u4e24\u79cd\u5b57\u8282\u5e8f\u5217,\u4e0d\u53ef\u53d8\u7684bytes\u7c7b\u578b\u548c\u53ef\u53d8\u7684bytearray\u7c7b\u578b.\u5b57\u8282\u5e8f\u5217\u4e2d\u7684\u5404\u4e2a\u5143\u7d20\u90fd\u662f\u4ecb\u4e8e[0,255]\u4e4b\u95f4\u7684\u6574\u6570.\u5904\u7406\u7f16\u7801\u95ee\u9898python\u81ea\u5e26\u4e86\u8d85\u8fc7100\u4e2d\u7f16\u89e3\u7801\u5668.\u6bcf\u4e2a\u7f16\u89e3\u7801\u5668\u90fd\u6709\u4e00\u4e2a\u540d\u79f0,\u751a\u81f3\u6709\u7684\u4f1a\u6709\u4e00\u4e9b\u522b\u540d,\u5982utf_8\u5c31\u6709utf8,utf-8,U8\u8fd9\u4e9b\u522b\u540d.\u5982\u679c\u5b57\u7b26\u5e8f\u5217\u548c\u9884\u671f\u4e0d\u7b26,\u5728\u8fdb\u884c\u89e3\u7801\u6216\u7f16\u7801\u65f6\u5bb9\u6613\u629b\u51faUnicode*Error\u7684\u5f02\u5e38.\u9020\u6210\u8fd9\u79cd\u9519\u8bef\u662f\u56e0\u4e3a\u76ee\u6807\u7f16\u7801\u4e2d\u6ca1\u6709\u5b9a\u4e49\u67d0\u4e2a\u5b57\u7b26(\u6ca1\u6709\u5b9a\u4e49\u67d0\u4e2a\u7801\u4f4d\u5bf9\u5e94\u7684\u5b57\u7b26),\u8fd9\u91cc\u8bf4\u8bf4\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898\u7684\u65b9\u5f0f.\u4f7f\u7528python3,python3\u53ef\u4ee5\u907f\u514d95%\u7684\u5b57\u7b26\u95ee\u9898.\u4e3b\u6d41\u7f16\u7801\u5c1d\u8bd5\u4e0b:latin1,cp1252,cp437,gb2312,utf-8,utf-16le\u7559\u610fBOM\u5934\u90e8b\u2019\\xff\\xfe\u2019,UTF-16\u7f16\u7801\u7684\u5e8f\u5217\u5f00\u5934\u4e5f\u4f1a\u6709\u8fd9\u51e0\u4e2a\u989d\u5916\u5b57\u8282.\u627e\u51fa\u5e8f\u5217\u7684\u7f16\u7801,\u5efa\u8bae\u4f7f\u7528codecs\u6a21\u5757\u89c4\u8303\u5316unicode\u5b57\u7b26\u4e32Pythons1='caf\u00e9's2='caf\\u00e9'12s1='caf\u00e9's2='caf\\u00e9'\u8fd9\u4e24\u884c\u4ee3\u7801\u5b8c\u5168\u7b49\u4ef7.\u800c\u6709\u4e00\u79cd\u662f\u8981\u907f\u514d\u7684\u662f,\u5728Unicode\u6807\u51c6\u4e2d\u00e9\u548ce\\u0301\u8fd9\u6837\u7684\u5e8f\u5217\u53eb\u201c\u6807\u51c6\u7b49\u4ef7\u7269\u201d.\u8fd9\u79cd\u60c5\u51b5\u7528NFC\u4f7f\u7528\u6700\u5c11\u7684\u7801\u4f4d\u6784\u6210\u7b49\u4ef7\u7684\u5b57\u7b26\u4e32:Python>>>s1='caf\u00e9'>>>s2='cafe\\u0301'>>>s1,s2('caf\u00e9','caf\u00e9')>>>len(s1),len(s2)(4,5)>>>s1==s2False12345678>>>s1='caf\u00e9'>>>s2='cafe\\u0301'>>>s1,s2('caf\u00e9','caf\u00e9')>>>len(s1),len(s2)(4,5)>>>s1==s2False\u6539\u8fdb\u540e:Python>>>fromunicodedataimportnormalize>>>s1='caf\u00e9'#\u628a\"e\"\u548c\u91cd\u97f3\u7b26\u7ec4\u5408\u5728\u4e00\u8d77>>>s2='cafe\\u0301'#\u5206\u89e3\u6210\"e\"\u548c\u91cd\u97f3\u7b26>>>len(s1),len(s2)(4,5)>>>len(normalize('NFC',s1)),len(normalize('NFC',s2))(4,4)>>>len(normalize('NFD',s1)),len(normalize('NFD',s2))(5,5)>>>normalize('NFC',s1)==normalize('NFC',s2)True>>>normalize('NFD',s1)==normalize('NFD',s2)True12345678910111213>>>fromunicodedataimportnormalize>>>s1='caf\u00e9'#\u628a\"e\"\u548c\u91cd\u97f3\u7b26\u7ec4\u5408\u5728\u4e00\u8d77>>>s2='cafe\\u0301'#\u5206\u89e3\u6210\"e\"\u548c\u91cd\u97f3\u7b26>>>len(s1),len(s2)(4,5)>>>len(normalize('NFC',s1)),len(normalize('NFC',s2))(4,4)>>>len(normalize('NFD',s1)),len(normalize('NFD',s2))(5,5)>>>normalize('NFC',s1)==normalize('NFC',s2)True>>>normalize('NFD',s1)==normalize('NFD',s2)Trueunicode\u6587\u672c\u6392\u5e8f\u5bf9\u4e8e\u5b57\u7b26\u4e32\u6765\u8bf4,\u6bd4\u8f83\u7684\u7801\u4f4d.\u6240\u4ee5\u5728\u975eascii\u5b57\u7b26\u65f6,\u5f97\u5230\u7684\u7ed3\u679c\u53ef\u80fd\u4f1a\u4e0d\u5c3d\u4eba\u610f.\u7b2c\u4e94\u7ae0:\u4e00\u7b49\u51fd\u6570\u5728python\u4e2d,\u51fd\u6570\u662f\u4e00\u7b49\u5bf9\u8c61.\u7f16\u7a0b\u8bed\u8a00\u628a\u201c\u4e00\u7b49\u5bf9\u8c61\u201d\u5b9a\u4e49\u4e3a\u6ee1\u8db3\u4e0b\u5217\u6761\u4ef6:\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u80fd\u8d4b\u503c\u7ed9\u53d8\u91cf\u6216\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u5143\u7d20\u80fd\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u51fd\u6570\u80fd\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c\u5728python\u4e2d,\u6574\u6570,\u5b57\u7b26\u4e32,\u5217\u8868,\u5b57\u5178\u90fd\u662f\u4e00\u7b49\u5bf9\u8c61.\u628a\u51fd\u6570\u89c6\u4f5c\u5bf9\u8c61Python\u5373\u53ef\u4ee5\u51fd\u6570\u5f0f\u7f16\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b.\u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u51fd\u6570,\u7136\u540e\u8bfb\u53d6\u5b83\u7684__doc__\u5c5e\u6027,\u5e76\u4e14\u786e\u5b9a\u51fd\u6570\u5bf9\u8c61\u5176\u5b9e\u662ffunction\u7c7b\u7684\u5b9e\u4f8b:Pythondeffactorial(n):'''returnn'''return1ifn<2elsen*factorial(n-1)print(factorial.__doc__)print(type(factorial))print(factorial(3))'''OUTreturnn<class'function'>6'''123456789101112131415161718deffactorial(n):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0returnn\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0return1ifn<2elsen*factorial(n-1)\u00a0print(factorial.__doc__)print(type(factorial))print(factorial(3))\u00a0'''OUT\u00a0\u00a0\u00a0\u00a0\u00a0returnn\u00a0<class'function'>6'''\u9ad8\u9636\u51fd\u6570\u9ad8\u9636\u51fd\u6570\u5c31\u662f\u63a5\u53d7\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570,\u6216\u8005\u628a\u51fd\u6570\u4f5c\u4e3a\u8fd4\u56de\u7ed3\u679c\u7684\u51fd\u6570.\u5982map,filter,reduce\u7b49.\u6bd4\u5982\u8c03\u7528sorted\u65f6,\u5c06len\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012:Pythonfruits=['strawberry','fig','apple','cherry','raspberry','banana']sorted(fruits,key=len)#['fig','apple','cherry','banana','raspberry','strawberry']123fruits=['strawberry','fig','apple','cherry','raspberry','banana']sorted(fruits,key=len)#['fig','apple','cherry','banana','raspberry','strawberry']\u533f\u540d\u51fd\u6570lambda\u5173\u952e\u5b57\u662f\u7528\u6765\u521b\u5efa\u533f\u540d\u51fd\u6570.\u533f\u540d\u51fd\u6570\u4e00\u4e9b\u9650\u5236,\u533f\u540d\u51fd\u6570\u7684\u5b9a\u4e49\u4f53\u53ea\u80fd\u4f7f\u7528\u7eaf\u8868\u8fbe\u5f0f.\u6362\u53e5\u8bdd\u8bf4,lambda\u51fd\u6570\u5185\u4e0d\u80fd\u8d4b\u503c,\u4e5f\u4e0d\u80fd\u4f7f\u7528while\u548ctry\u7b49\u8bed\u53e5.Pythonfruits=['strawberry','fig','apple','cherry','raspberry','banana']sorted(fruits,key=lambdaword:word[::-1])#['banana','apple','fig','raspberry','strawberry','cherry']123fruits=['strawberry','fig','apple','cherry','raspberry','banana']sorted(fruits,key=lambdaword:word[::-1])#['banana','apple','fig','raspberry','strawberry','cherry']\u53ef\u8c03\u7528\u5bf9\u8c61\u9664\u4e86\u7528\u6237\u5b9a\u4e49\u7684\u51fd\u6570,\u8c03\u7528\u8fd0\u7b97\u7b26\u5373()\u8fd8\u53ef\u4ee5\u5e94\u7528\u5230\u5176\u4ed6\u5bf9\u8c61\u4e0a.\u5982\u679c\u50cf\u5224\u65ad\u5bf9\u8c61\u80fd\u5426\u88ab\u8c03\u7528,\u53ef\u4ee5\u4f7f\u7528\u5185\u7f6e\u7684callable()\u51fd\u6570\u8fdb\u884c\u5224\u65ad.python\u7684\u6570\u636e\u6a21\u578b\u4e2d\u67097\u79cd\u53ef\u662f\u53ef\u4ee5\u88ab\u8c03\u7528\u7684:\u7528\u6237\u5b9a\u4e49\u7684\u51fd\u6570:\u4f7f\u7528def\u8bed\u53e5\u6216lambda\u8868\u8fbe\u5f0f\u521b\u5efa\u5185\u7f6e\u51fd\u6570:\u5982len\u5185\u7f6e\u65b9\u6cd5:\u5982dict.get\u65b9\u6cd5:\u5728\u7c7b\u5b9a\u4e49\u4f53\u4e2d\u7684\u51fd\u6570\u7c7b\u7c7b\u7684\u5b9e\u4f8b:\u5982\u679c\u7c7b\u5b9a\u4e49\u4e86__call__,\u90a3\u4e48\u5b83\u7684\u5b9e\u4f8b\u53ef\u4ee5\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528.\u751f\u6210\u5668\u51fd\u6570:\u4f7f\u7528yield\u5173\u952e\u5b57\u7684\u51fd\u6570\u6216\u65b9\u6cd5.\u4ece\u5b9a\u4f4d\u53c2\u6570\u5230\u4ec5\u9650\u5173\u952e\u5b57\u53c2\u6570\u5c31\u662f\u53ef\u53d8\u53c2\u6570\u548c\u5173\u952e\u5b57\u53c2\u6570:Pythondeffun(name,age,*args,**kwargs):pass12deffun(name,age,*args,**kwargs):\u00a0\u00a0\u00a0\u00a0pass\u5176\u4e2d*args\u548c**kwargs\u90fd\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61,\u5c55\u5f00\u540e\u6620\u5c04\u5230\u5355\u4e2a\u53c2\u6570.args\u662f\u4e2a\u5143\u7ec4,kwargs\u662f\u5b57\u5178.\u7b2c\u516d\u7ae0:\u4f7f\u7528\u4e00\u7b49\u51fd\u6570\u5b9e\u73b0\u8bbe\u8ba1\u6a21\u5f0f\u867d\u7136\u8bbe\u8ba1\u6a21\u5f0f\u4e0e\u8bed\u8a00\u65e0\u5173,\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u6bcf\u4e00\u4e2a\u6a21\u5f0f\u90fd\u80fd\u5728\u6bcf\u4e00\u4e2a\u8bed\u8a00\u4e2d\u4f7f\u7528.Gamma\u7b49\u4eba\u5408\u8457\u7684\u300a\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u53ef\u590d\u7528\u9762\u5411\u5bf9\u8c61\u8f6f\u4ef6\u7684\u57fa\u7840\u300b\u4e00\u4e66\u4e2d\u670923\u4e2a\u6a21\u5f0f,\u5176\u4e2d\u670916\u4e2a\u5728\u52a8\u6001\u8bed\u8a00\u4e2d\u201d\u4e0d\u89c1\u4e86,\u6216\u8005\u7b80\u5316\u4e86\u201d.\u8fd9\u91cc\u4e0d\u4e3e\u4f8b\u8bbe\u8ba1\u6a21\u5f0f,\u56e0\u4e3a\u4e66\u91cc\u7684\u6a21\u5f0f\u4e0d\u5e38\u7528.\u7b2c\u4e03\u7ae0:\u51fd\u6570\u88c5\u9970\u5668\u548c\u95ed\u5305\u51fd\u6570\u88c5\u9970\u5668\u7528\u4e8e\u5728\u6e90\u7801\u4e2d\u201c\u6807\u8bb0\u201d\u51fd\u6570\uff0c\u4ee5\u67d0\u79cd\u65b9\u5f0f\u589e\u5f3a\u51fd\u6570\u7684\u884c\u4e3a\u3002\u8fd9\u662f\u4e00\u9879\u5f3a\u5927\u7684\u529f\u80fd\uff0c\u4f46\u662f\u82e5\u60f3\u638c\u63e1\uff0c\u5fc5\u987b\u7406\u89e3\u95ed\u5305\u3002\u4fee\u9970\u5668\u548c\u95ed\u5305\u7ecf\u5e38\u5728\u4e00\u8d77\u8ba8\u8bba,\u56e0\u4e3a\u4fee\u9970\u5668\u5c31\u662f\u95ed\u5305\u7684\u4e00\u79cd\u5f62\u5f0f.\u95ed\u5305\u8fd8\u662f\u56de\u8c03\u5f0f\u5f02\u6b65\u7f16\u7a0b\u548c\u51fd\u6570\u5f0f\u7f16\u7a0b\u98ce\u683c\u7684\u57fa\u7840.\u88c5\u9970\u5668\u57fa\u7840\u77e5\u8bc6\u88c5\u9970\u5668\u662f\u53ef\u8c03\u7528\u7684\u5bf9\u8c61,\u5176\u53c2\u6570\u662f\u53e6\u4e00\u4e2a\u51fd\u6570(\u88ab\u88c5\u9970\u7684\u51fd\u6570).\u88c5\u9970\u5668\u53ef\u80fd\u4f1a\u5904\u7406\u88ab\u88c5\u9970\u7684\u51fd\u6570,\u7136\u540e\u628a\u5b83\u8fd4\u56de,\u6216\u8005\u5c06\u5176\u66ff\u6362\u6210\u53e6\u4e00\u4e2a\u51fd\u6570\u6216\u53ef\u8c03\u7528\u5bf9\u8c61.Python<ahref=\"http://www.jobbole.com/members/decorate\">@decorate</a>deftarget():print('runningtarget()')123<ahref=\"http://www.jobbole.com/members/decorate\">@decorate</a>deftarget():\u00a0\u00a0\u00a0\u00a0print('runningtarget()')\u8fd9\u79cd\u5199\u6cd5\u4e0e\u4e0b\u9762\u5199\u6cd5\u5b8c\u5168\u7b49\u4ef7:Pythondeftarget():print('runningtarget()')target=decorate(target)123deftarget():\u00a0\u00a0\u00a0\u00a0print('runningtarget()')target=decorate(target)\u88c5\u9970\u5668\u662f\u8bed\u6cd5\u7cd6,\u5b83\u5176\u5b9e\u662f\u5c06\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u8ba9\u5176\u4ed6\u51fd\u6570\u5904\u7406.\u88c5\u9970\u5668\u6709\u4e24\u5927\u7279\u5f81:\u628a\u88ab\u88c5\u9970\u7684\u51fd\u6570\u66ff\u6362\u6210\u5176\u4ed6\u51fd\u6570\u88c5\u9970\u5668\u5728\u52a0\u8f7d\u6a21\u5757\u65f6\u7acb\u5373\u6267\u884c\u8981\u7406\u89e3\u7acb\u5373\u6267\u884c\u770b\u4e0b\u7b49\u4ef7\u7684\u4ee3\u7801\u5c31\u77e5\u9053\u4e86,target=decorate(target)\u8fd9\u53e5\u8c03\u7528\u4e86\u51fd\u6570.\u4e00\u822c\u60c5\u51b5\u4e0b\u88c5\u9970\u51fd\u6570\u90fd\u4f1a\u5c06\u67d0\u4e2a\u51fd\u6570\u4f5c\u4e3a\u8fd4\u56de\u503c.\u53d8\u91cf\u4f5c\u7528\u57df\u89c4\u5219\u8981\u7406\u89e3\u88c5\u9970\u5668\u4e2d\u53d8\u91cf\u7684\u4f5c\u7528\u57df,\u5e94\u8be5\u8981\u7406\u89e3\u95ed\u5305,\u6211\u89c9\u5f97\u4e66\u91cc\u5c06\u95ed\u5305\u548c\u4f5c\u7528\u57df\u7684\u987a\u5e8f\u6362\u4e00\u4e0b\u6bd4\u8f83\u597d.\u5728python\u4e2d,\u4e00\u4e2a\u53d8\u91cf\u7684\u67e5\u627e\u987a\u5e8f\u662fLEGB(L\uff1aLocal\u5c40\u90e8\u73af\u5883\uff0cE\uff1aEnclosing\u95ed\u5305\uff0cG\uff1aGlobal\u5168\u5c40\uff0cB\uff1aBuilt-in\u5185\u5efa).Pythonbase=20defget_compare():base=10defreal_compare(value):returnvalue>basereturnreal_comparecompare_10=get_compare()print(compare_10(5))123456789base=20defget_compare():\u00a0\u00a0\u00a0\u00a0base=10\u00a0\u00a0\u00a0\u00a0defreal_compare(value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnvalue>base\u00a0\u00a0\u00a0\u00a0returnreal_compare\u00a0\u00a0\u00a0\u00a0compare_10=get_compare()print(compare_10(5))\u5728\u95ed\u5305\u7684\u51fd\u6570real_compare\u4e2d,\u4f7f\u7528\u7684\u53d8\u91cfbase\u5176\u5b9e\u662fbase=10\u7684.\u56e0\u4e3abase\u8fd9\u4e2a\u53d8\u91cf\u5728\u95ed\u5305\u4e2d\u5c31\u80fd\u547d\u4e2d,\u800c\u4e0d\u9700\u8981\u53bbglobal\u4e2d\u83b7\u53d6.\u95ed\u5305\u95ed\u5305\u5176\u5b9e\u633a\u597d\u7406\u89e3\u7684,\u5f53\u533f\u540d\u51fd\u6570\u51fa\u73b0\u7684\u65f6\u5019,\u624d\u4f7f\u5f97\u8fd9\u90e8\u5206\u96be\u4ee5\u638c\u63e1.\u7b80\u5355\u7b80\u77ed\u7684\u89e3\u91ca\u95ed\u5305\u5c31\u662f:\u540d\u5b57\u7a7a\u95f4\u4e0e\u51fd\u6570\u6346\u7ed1\u540e\u7684\u7ed3\u679c\u88ab\u79f0\u4e3a\u4e00\u4e2a\u95ed\u5305(closure).\u8fd9\u4e2a\u540d\u5b57\u7a7a\u95f4\u5c31\u662fLEGB\u4e2d\u7684E.\u6240\u4ee5\u95ed\u5305\u4e0d\u4ec5\u4ec5\u662f\u5c06\u51fd\u6570\u4f5c\u4e3a\u8fd4\u56de\u503c.\u800c\u662f\u5c06\u540d\u5b57\u7a7a\u95f4\u548c\u51fd\u6570\u6346\u7ed1\u540e\u4f5c\u4e3a\u8fd4\u56de\u503c\u7684.\u591a\u5c11\u4eba\u5fd8\u4e86\u7406\u89e3\u8fd9\u4e2a\u201c\u6346\u7ed1\u201d,\u4e0d\u77e5\u9053\u53d8\u91cf\u6700\u7ec8\u53d6\u7684\u54ea\u548c\u54ea\u554a.\u54ce.\u6807\u51c6\u5e93\u4e2d\u7684\u88c5\u9970\u5668python\u5185\u7f6e\u4e86\u4e09\u4e2a\u7528\u4e8e\u88c5\u9970\u65b9\u6cd5\u7684\u51fd\u6570:property\u3001classmethod\u548cstaticmethod.\u8fd9\u4e9b\u662f\u7528\u6765\u4e30\u5bcc\u7c7b\u7684.PythonclassA(object):@propertydefage():return121234classA(object):\u00a0\u00a0\u00a0\u00a0@property\u00a0\u00a0\u00a0\u00a0defage():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return12\u7b2c\u516b\u7ae0:\u5bf9\u8c61\u5f15\u7528\u3001\u53ef\u53d8\u6027\u548c\u5783\u573e\u56de\u6536\u53d8\u91cf\u4e0d\u662f\u76d2\u5b50\u5f88\u591a\u4eba\u628a\u53d8\u91cf\u7406\u89e3\u4e3a\u76d2\u5b50,\u8981\u5b58\u4ec0\u4e48\u6570\u636e\u5f80\u76d2\u5b50\u91cc\u6254\u5c31\u884c\u4e86.Pythona=[1,2,3]b=aa.append(4)print(b)#[1,2,3,4]1234a=[1,2,3]b=aa.append(4)print(b)#[1,2,3,4]\u53d8\u91cfa\u548cb\u5f15\u7528\u540c\u4e00\u4e2a\u5217\u8868,\u800c\u4e0d\u662f\u90a3\u4e2a\u5217\u8868\u7684\u526f\u672c.\u56e0\u6b64\u8d4b\u503c\u8bed\u53e5\u5e94\u8be5\u7406\u89e3\u4e3a\u5c06\u53d8\u91cf\u548c\u503c\u8fdb\u884c\u5f15\u7528\u7684\u5173\u7cfb\u800c\u5df2.\u6807\u8bc6\u3001\u76f8\u7b49\u6027\u548c\u522b\u540d\u8981\u77e5\u9053\u53d8\u91cfa\u548cb\u662f\u5426\u662f\u540c\u4e00\u4e2a\u503c\u7684\u5f15\u7528,\u53ef\u4ee5\u7528is\u6765\u8fdb\u884c\u5224\u65ad:Python>>>a=b=[4,5,6]>>>c=[4,5,6]>>>aisbTrue>>>xiscFalse123456>>>a=b=[4,5,6]>>>c=[4,5,6]>>>aisbTrue>>>xiscFalse\u5982\u679c\u4e24\u4e2a\u53d8\u91cf\u90fd\u662f\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61,\u6211\u4eec\u901a\u5e38\u4f1a\u8bf4\u53d8\u91cf\u662f\u53e6\u4e00\u4e2a\u53d8\u91cf\u7684\u522b\u540d.\u5728==\u548cis\u4e4b\u95f4\u9009\u62e9\u8fd0\u7b97\u7b26==\u662f\u7528\u6765\u5224\u65ad\u4e24\u4e2a\u5bf9\u8c61\u503c\u662f\u5426\u76f8\u7b49(\u6ce8\u610f\u662f\u5bf9\u8c61\u503c).\u800cis\u5219\u662f\u7528\u4e8e\u5224\u65ad\u4e24\u4e2a\u53d8\u91cf\u662f\u5426\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61,\u6216\u8005\u8bf4\u5224\u65ad\u53d8\u91cf\u662f\u4e0d\u662f\u4e24\u4e00\u4e2a\u7684\u522b\u540d,is\u5e76\u4e0d\u5173\u5fc3\u5bf9\u8c61\u7684\u503c.\u4ece\u4f7f\u7528\u4e0a,==\u4f7f\u7528\u6bd4\u8f83\u591a,\u800cis\u7684\u6267\u884c\u901f\u5ea6\u6bd4\u8f83\u5feb.\u9ed8\u8ba4\u505a\u6d45\u590d\u5236Pythonl1=[3,[55,44],(7,8,9)]l2=list(l1)#\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u8fdb\u884c\u590d\u5236l2=l1[:]#\u4e5f\u53ef\u4ee5\u8fd9\u6837\u60f3\u5199>>>l2==l1True>>>l2isl1False12345678l1=[3,[55,44],(7,8,9)]\u00a0l2=list(l1)#\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u8fdb\u884c\u590d\u5236l2=l1[:]\u00a0\u00a0#\u4e5f\u53ef\u4ee5\u8fd9\u6837\u60f3\u5199>>>l2==l1True>>>l2isl1False\u5c3d\u7ba1l2\u662fl1\u7684\u526f\u672c,\u4f46\u662f\u590d\u5236\u7684\u8fc7\u7a0b\u662f\u5148\u590d\u5236(\u5373\u590d\u5236\u4e86\u6700\u5916\u5c42\u5bb9\u5668\uff0c\u526f\u672c\u4e2d\u7684\u5143\u7d20\u662f\u6e90\u5bb9\u5668\u4e2d\u5143\u7d20\u7684\u5f15\u7528).\u56e0\u6b64\u5728\u64cd\u4f5cl2[1]\u65f6,l1[1]\u4e5f\u4f1a\u8ddf\u7740\u53d8\u5316.\u800c\u5982\u679c\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u662f\u4e0d\u53ef\u53d8\u7684,\u90a3\u4e48\u5c31\u6ca1\u6709\u8fd9\u6837\u7684\u95ee\u9898,\u800c\u4e14\u8fd8\u80fd\u8282\u7701\u5185\u5b58.\u4f46\u662f,\u5982\u679c\u6709\u53ef\u53d8\u5143\u7d20\u5b58\u5728,\u5c31\u53ef\u80fd\u9020\u6210\u610f\u60f3\u4e0d\u5230\u7684\u95ee\u9898.python\u6807\u51c6\u5e93\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5de5\u5177copy\u548cdeepcopy.\u5206\u522b\u7528\u4e8e\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d:Pythonimportcopyl1=[3,[55,44],(7,8,9)]l2=copy.copy(l1)l2=copy.deepcopy(l1)12345importcopyl1=[3,[55,44],(7,8,9)]\u00a0l2=copy.copy(l1)l2=copy.deepcopy(l1)\u51fd\u6570\u7684\u53c2\u6570\u505a\u5f15\u7528\u65f6python\u4e2d\u7684\u51fd\u6570\u53c2\u6570\u90fd\u662f\u91c7\u7528\u5171\u4eab\u4f20\u53c2.\u5171\u4eab\u4f20\u53c2\u6307\u51fd\u6570\u7684\u5404\u4e2a\u5f62\u5f0f\u53c2\u6570\u83b7\u5f97\u5b9e\u53c2\u4e2d\u5404\u4e2a\u5f15\u7528\u7684\u526f\u672c.\u4e5f\u5c31\u662f\u8bf4,\u51fd\u6570\u5185\u90e8\u7684\u5f62\u53c2\u662f\u5b9e\u53c2\u7684\u522b\u540d.\u8fd9\u79cd\u65b9\u6848\u5c31\u662f\u5f53\u4f20\u5165\u53c2\u6570\u662f\u53ef\u53d8\u5bf9\u8c61\u65f6,\u5728\u51fd\u6570\u5185\u5bf9\u53c2\u6570\u7684\u4fee\u6539\u4e5f\u5c31\u662f\u5bf9\u5916\u90e8\u53ef\u53d8\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539.\u4f46\u8fd9\u79cd\u53c2\u6570\u8bd5\u56fe\u91cd\u65b0\u8d4b\u503c\u4e3a\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u65f6\u5219\u65e0\u6548,\u56e0\u4e3a\u8fd9\u53ea\u662f\u76f8\u5f53\u4e8e\u628a\u53c2\u6570\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u4e1c\u897f\u7684\u5f15\u7528,\u539f\u6709\u7684\u5bf9\u8c61\u5e76\u4e0d\u53d8.\u4e5f\u5c31\u662f\u8bf4,\u5728\u51fd\u6570\u5185,\u53c2\u6570\u662f\u4e0d\u80fd\u628a\u4e00\u4e2a\u5bf9\u8c61\u66ff\u6362\u6210\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684.\u4e0d\u8981\u4f7f\u7528\u53ef\u53d8\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u53c2\u6570\u9ed8\u8ba4\u503c\u662f\u4e2a\u5f88\u68d2\u7684\u7279\u6027.\u5bf9\u4e8e\u5f00\u53d1\u8005\u6765\u8bf4,\u5e94\u8be5\u907f\u514d\u4f7f\u7528\u53ef\u53d8\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u9ed8\u8ba4\u503c.\u56e0\u4e3a\u5982\u679c\u53c2\u6570\u9ed8\u8ba4\u503c\u662f\u53ef\u53d8\u5bf9\u8c61,\u800c\u4e14\u4fee\u6539\u4e86\u5b83\u7684\u5185\u5bb9,\u90a3\u4e48\u540e\u7eed\u7684\u51fd\u6570\u8c03\u7528\u4e0a\u90fd\u4f1a\u6536\u5230\u5f71\u54cd.del\u548c\u5783\u573e\u56de\u6536\u5728python\u4e2d,\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5931\u53bb\u4e86\u6700\u540e\u4e00\u4e2a\u5f15\u7528\u65f6,\u4f1a\u5f53\u505a\u5783\u573e,\u7136\u540e\u88ab\u56de\u6536\u6389.\u867d\u7136python\u63d0\u4f9b\u4e86del\u8bed\u53e5\u7528\u6765\u5220\u9664\u53d8\u91cf.\u4f46\u5b9e\u9645\u4e0a\u53ea\u662f\u5220\u9664\u4e86\u53d8\u91cf\u548c\u5bf9\u8c61\u4e4b\u95f4\u7684\u5f15\u7528,\u5e76\u4e0d\u4e00\u5b9a\u80fd\u8ba9\u5bf9\u8c61\u8fdb\u884c\u56de\u6536,\u56e0\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u80fd\u8fd8\u5b58\u5728\u5176\u4ed6\u5f15\u7528.\u5728CPython\u4e2d,\u5783\u573e\u56de\u6536\u4e3b\u8981\u7528\u7684\u662f\u5f15\u7528\u8ba1\u6570\u7684\u7b97\u6cd5.\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u7edf\u8ba1\u6709\u591a\u5c11\u5f15\u7528\u6307\u5411\u81ea\u5df1.\u5f53\u5f15\u7528\u8ba1\u6570\u5f52\u96f6\u65f6,\u610f\u5473\u7740\u8fd9\u4e2a\u5bf9\u8c61\u6ca1\u6709\u5728\u4f7f\u7528,\u5bf9\u8c61\u5c31\u4f1a\u88ab\u7acb\u5373\u9500\u6bc1.\u7b26\u5408Python\u98ce\u683c\u7684\u5bf9\u8c61\u5f97\u76ca\u4e8ePython\u6570\u636e\u6a21\u578b\uff0c\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u884c\u4e3a\u53ef\u4ee5\u50cf\u5185\u7f6e\u7c7b\u578b\u90a3\u6837\u81ea\u7136\u3002\u5b9e\u73b0\u5982\u6b64\u81ea\u7136\u7684\u884c\u4e3a\uff0c\u9760\u7684\u4e0d\u662f\u7ee7\u627f\uff0c\u800c\u662f\u9e2d\u5b50\u7c7b\u578b\uff08ducktyping\uff09\uff1a\u6211\u4eec\u53ea\u9700\u6309\u7167\u9884\u5b9a\u884c\u4e3a\u5b9e\u73b0\u5bf9\u8c61\u6240\u9700\u7684\u65b9\u6cd5\u5373\u53ef\u3002\u5bf9\u8c61\u8868\u793a\u5f62\u5f0f\u6bcf\u95e8\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u81f3\u5c11\u90fd\u6709\u4e00\u79cd\u83b7\u53d6\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u7684\u6807\u51c6\u65b9\u5f0f\u3002Python\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u3002repr():\u4ee5\u4fbf\u4e8e\u5f00\u53d1\u8005\u7406\u89e3\u7684\u65b9\u5f0f\u8fd4\u56de\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002str():\u4ee5\u4fbf\u4e8e\u7528\u6237\u7406\u89e3\u7684\u65b9\u5f0f\u8fd4\u56de\u5bf9\u8c61\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002classmethod\u4e0estaticmethod\u8fd9\u4e24\u4e2a\u90fd\u662fpython\u5185\u7f6e\u63d0\u4f9b\u4e86\u88c5\u9970\u5668,\u4e00\u822cpython\u6559\u7a0b\u90fd\u6ca1\u6709\u63d0\u5230\u8fd9\u4e24\u4e2a\u88c5\u9970\u5668.\u8fd9\u4e24\u4e2a\u90fd\u662f\u5728\u7c7bclass\u5b9a\u4e49\u4e2d\u4f7f\u7528\u7684,\u4e00\u822c\u60c5\u51b5\u4e0b,class\u91cc\u9762\u5b9a\u4e49\u7684\u51fd\u6570\u662f\u4e0e\u5176\u7c7b\u7684\u5b9e\u4f8b\u8fdb\u884c\u7ed1\u5b9a\u7684.\u800c\u8fd9\u4e24\u4e2a\u88c5\u9970\u5668\u5219\u53ef\u4ee5\u6539\u53d8\u8fd9\u79cd\u8c03\u7528\u65b9\u5f0f.\u5148\u6765\u770b\u770bclassmethod,\u8fd9\u4e2a\u88c5\u9970\u5668\u4e0d\u662f\u64cd\u4f5c\u5b9e\u4f8b\u7684\u65b9\u6cd5,\u5e76\u4e14\u5c06\u7c7b\u672c\u8eab\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570.\u800cstaticmethod\u88c5\u9970\u5668\u4e5f\u4f1a\u6539\u53d8\u65b9\u6cd5\u7684\u8c03\u7528\u65b9\u5f0f,\u5b83\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u51fd\u6570,classmethod\u4e0estaticmethod\u7684\u533a\u522b\u5c31\u662fclassmethod\u4f1a\u628a\u7c7b\u672c\u8eab\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u5165,\u5176\u4ed6\u90fd\u4e00\u6837\u4e86.\u770b\u770b\u4f8b\u5b50:Python>>>classDemo:...@classmethod...defklassmeth(*args):...returnargs...@staticmethod...defstatmeth(*args):...returnargs...>>>Demo.klassmeth()(<class'__main__.Demo'>,)>>>Demo.klassmeth('spam')(<class'__main__.Demo'>,'spam')>>>Demo.statmeth()()>>>Demo.statmeth('spam')('spam',)12345678910111213141516>>>classDemo:...@classmethod...defklassmeth(*args):...\u00a0\u00a0\u00a0\u00a0returnargs...@staticmethod...defstatmeth(*args):...\u00a0\u00a0\u00a0\u00a0returnargs...>>>Demo.klassmeth()(<class'__main__.Demo'>,)>>>Demo.klassmeth('spam')(<class'__main__.Demo'>,'spam')>>>Demo.statmeth()()>>>Demo.statmeth('spam')('spam',)\u683c\u5f0f\u5316\u663e\u793a\u5185\u7f6e\u7684format()\u51fd\u6570\u548cstr.format()\u65b9\u6cd5\u628a\u5404\u4e2a\u7c7b\u578b\u7684\u683c\u5f0f\u5316\u65b9\u5f0f\u59d4\u6258\u7ed9\u76f8\u5e94\u7684.__format__(format_spec)\u65b9\u6cd5.format_spec\u662f\u683c\u5f0f\u8bf4\u660e\u7b26\uff0c\u5b83\u662f\uff1aformat(my_obj,format_spec)\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570str.format()\u65b9\u6cd5\u7684\u683c\u5f0f\u5b57\u7b26\u4e32\uff0c{}\u91cc\u4ee3\u6362\u5b57\u6bb5\u4e2d\u5192\u53f7\u540e\u9762\u7684\u90e8\u5206Python\u7684\u79c1\u6709\u5c5e\u6027\u548c\u201d\u53d7\u4fdd\u62a4\u7684\u201d\u5c5e\u6027python\u4e2d\u5bf9\u4e8e\u5b9e\u4f8b\u53d8\u91cf\u6ca1\u6709\u50cfprivate\u8fd9\u6837\u7684\u4fee\u9970\u7b26\u6765\u521b\u5efa\u79c1\u6709\u5c5e\u6027,\u5728python\u4e2d,\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u673a\u5236\u6765\u5904\u7406\u79c1\u6709\u5c5e\u6027.PythonclassA:def__init__(self):self.__x=1a=A()print(a.__x)#AttributeError:'A'objecthasnoattribute'__x'print(a.__dict__)12345678classA:\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__x=1\u00a0a=A()print(a.__x)#AttributeError:'A'objecthasnoattribute'__x'\u00a0print(a.__dict__)\u5982\u679c\u5c5e\u6027\u4ee5__name\u7684\u4e24\u4e2a\u4e0b\u5212\u7ebf\u4e3a\u524d\u7f00,\u5c3e\u90e8\u6700\u591a\u4e00\u4e2a\u4e0b\u5212\u7ebf\u547d\u540d\u7684\u5b9e\u4f8b\u5c5e\u6027,python\u4f1a\u628a\u5b83\u540d\u79f0\u524d\u9762\u52a0\u4e00\u4e2a\u4e0b\u5212\u7ebf\u52a0\u7c7b\u540d,\u518d\u653e\u5165__dict__\u4e2d,\u4ee5__name\u4e3a\u4f8b,\u5c31\u4f1a\u53d8\u6210_A__name.\u540d\u79f0\u6539\u5199\u7b97\u662f\u4e00\u79cd\u5b89\u5168\u63aa\u65bd,\u4f46\u662f\u4e0d\u80fd\u4fdd\u8bc1\u4e07\u65e0\u4e00\u5931,\u5b83\u80fd\u907f\u514d\u610f\u5916\u8bbf\u95ee,\u4f46\u4e0d\u80fd\u963b\u6b62\u6545\u610f\u505a\u574f\u4e8b.\u53ea\u8981\u77e5\u9053\u79c1\u6709\u5c5e\u6027\u7684\u673a\u5236,\u4efb\u4f55\u4eba\u90fd\u80fd\u76f4\u63a5\u8bfb\u53d6\u548c\u6539\u5199\u79c1\u6709\u5c5e\u6027.\u56e0\u6b64\u5f88\u591apython\u7a0b\u5e8f\u5458\u4e25\u683c\u89c4\u5b9a:\u9075\u5b88\u4f7f\u7528\u4e00\u4e2a\u4e0b\u5212\u7ebf\u6807\u8bb0\u5bf9\u8c61\u7684\u79c1\u6709\u5c5e\u6027.Python\u89e3\u91ca\u5668\u4e0d\u4f1a\u5bf9\u4f7f\u7528\u5355\u4e2a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u540d\u505a\u7279\u6b8a\u5904\u7406,\u7531\u7a0b\u5e8f\u5458\u81ea\u884c\u63a7\u5236,\u4e0d\u5728\u7c7b\u5916\u90e8\u8bbf\u95ee\u8fd9\u4e9b\u5c5e\u6027.\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u6240\u63a8\u8350\u7684,\u4e24\u4e2a\u4e0b\u5212\u7ebf\u7684\u90a3\u79cd\u65b9\u5f0f\u5c31\u4e0d\u8981\u518d\u7528\u4e86.\u5f15\u7528python\u5927\u795e\u7684\u8bdd:\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528\u4e24\u4e2a\u524d\u5bfc\u4e0b\u5212\u7ebf\uff0c\u8fd9\u662f\u5f88\u70e6\u4eba\u7684\u81ea\u79c1\u884c\u4e3a\u3002\u5982\u679c\u62c5\u5fc3\u540d\u79f0\u51b2\u7a81\uff0c\u5e94\u8be5\u660e\u786e\u4f7f\u7528\u4e00\u79cd\u540d\u79f0\u6539\u5199\u65b9\u5f0f\uff08\u5982_MyThing_blahblah\uff09\u3002\u8fd9\u5176\u5b9e\u4e0e\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\u4e00\u6837\uff0c\u4e0d\u8fc7\u81ea\u5df1\u5b9a\u7684\u89c4\u5219\u6bd4\u53cc\u4e0b\u5212\u7ebf\u6613\u4e8e\u7406\u89e3\u3002Python\u4e2d\u7684\u628a\u4f7f\u7528\u4e00\u4e2a\u4e0b\u5212\u7ebf\u524d\u7f00\u6807\u8bb0\u7684\u5c5e\u6027\u79f0\u4e3a\u201d\u53d7\u4fdd\u62a4\u7684\u201d\u5c5e\u6027\u4f7f\u7528slots\u7c7b\u5c5e\u6027\u8282\u7701\u7a7a\u95f4\u9ed8\u8ba4\u60c5\u51b5\u4e0b,python\u5728\u5404\u4e2a\u5b9e\u4f8b\u4e2d,\u7528__dict__\u7684\u5b57\u5178\u5b58\u50a8\u5b9e\u4f8b\u5c5e\u6027.\u56e0\u6b64\u5b9e\u4f8b\u7684\u5c5e\u6027\u662f\u52a8\u6001\u53d8\u5316\u7684,\u53ef\u4ee5\u5728\u8fd0\u884c\u671f\u95f4\u4efb\u610f\u6dfb\u52a0\u5c5e\u6027.\u800c\u5b57\u5178\u662f\u6d88\u8017\u5185\u5b58\u6bd4\u8f83\u5927\u7684\u7ed3\u6784.\u56e0\u6b64\u5f53\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u79f0\u786e\u5b9a\u65f6,\u4f7f\u7528__slots__\u53ef\u4ee5\u8282\u7ea6\u5185\u5b58.PythonclassVector2d:__slots__=('__x','__y')typecode='d'#\u4e0b\u9762\u662f\u5404\u4e2a\u65b9\u6cd5\uff08\u56e0\u6392\u7248\u9700\u8981\u800c\u7701\u7565\u4e86\uff091234classVector2d:\u00a0\u00a0\u00a0\u00a0__slots__=('__x','__y')\u00a0\u00a0\u00a0\u00a0typecode='d'\u00a0\u00a0\u00a0\u00a0#\u4e0b\u9762\u662f\u5404\u4e2a\u65b9\u6cd5\uff08\u56e0\u6392\u7248\u9700\u8981\u800c\u7701\u7565\u4e86\uff09\u5728\u7c7b\u4e2d\u5b9a\u4e49__slots__\u5c5e\u6027\u7684\u76ee\u7684\u662f\u544a\u8bc9\u89e3\u91ca\u5668\uff1a\u201d\u8fd9\u4e2a\u7c7b\u4e2d\u7684\u6240\u6709\u5b9e\u4f8b\u5c5e\u6027\u90fd\u5728\u8fd9\u513f\u4e86\uff01\u201d\u8fd9\u6837,Python\u4f1a\u5728\u5404\u4e2a\u5b9e\u4f8b\u4e2d\u4f7f\u7528\u7c7b\u4f3c\u5143\u7ec4\u7684\u7ed3\u6784\u5b58\u50a8\u5b9e\u4f8b\u53d8\u91cf,\u4ece\u800c\u907f\u514d\u4f7f\u7528\u6d88\u8017\u5185\u5b58\u7684__dict__\u5c5e\u6027.\u5982\u679c\u6709\u6570\u767e\u4e07\u4e2a\u5b9e\u4f8b\u540c\u65f6\u6d3b\u52a8,\u8fd9\u6837\u505a\u80fd\u8282\u7701\u5927\u91cf\u5185\u5b58.\u7b2c\u5341\u7ae0:\u5e8f\u5217\u7684\u4fee\u6539\u3001\u6563\u5217\u548c\u5207\u7247\u534f\u8bae\u548c\u9e2d\u5b50\u7c7b\u578b\u5728python\u4e2d,\u5e8f\u5217\u7c7b\u578b\u4e0d\u9700\u8981\u4f7f\u7528\u7ee7\u627f,\u53ea\u9700\u8981\u7b26\u5408\u5e8f\u5217\u534f\u8bae\u7684\u65b9\u6cd5\u5373\u53ef.\u8fd9\u91cc\u7684\u534f\u8bae\u5c31\u662f\u5b9e\u73b0__len__\u548c__getitem__\u4e24\u4e2a\u65b9\u6cd5.\u4efb\u4f55\u7c7b,\u53ea\u8981\u5b9e\u73b0\u4e86\u8fd9\u4e24\u4e2a\u65b9\u6cd5,\u5b83\u5c31\u6ee1\u8db3\u4e86\u5e8f\u5217\u64cd\u4f5c,\u56e0\u4e3a\u5b83\u7684\u884c\u4e3a\u50cf\u5e8f\u5217.\u534f\u8bae\u662f\u975e\u6b63\u5f0f\u7684,\u6ca1\u6709\u5f3a\u5236\u529b,\u56e0\u6b64\u4f60\u77e5\u9053\u7c7b\u7684\u5177\u4f53\u4f7f\u7528\u573a\u666f,\u901a\u5e38\u53ea\u8981\u5b9e\u73b0\u4e00\u4e2a\u534f\u8bae\u7684\u90e8\u5206.\u4f8b\u5982,\u4e3a\u4e86\u652f\u6301\u8fed\u4ee3,\u53ea\u9700\u5b9e\u73b0__getitem__\u65b9\u6cd5,\u6ca1\u5fc5\u8981\u63d0\u4f9b__len__\u65b9\u6cd5,\u8fd9\u4e5f\u5c31\u89e3\u91ca\u4e86\u9e2d\u5b50\u7c7b\u578b:\u5f53\u770b\u5230\u4e00\u53ea\u9e1f\u8d70\u8d77\u6765\u50cf\u9e2d\u5b50\u3001\u6e38\u6cf3\u8d77\u6765\u50cf\u9e2d\u5b50\u3001\u53eb\u8d77\u6765\u4e5f\u50cf\u9e2d\u5b50\uff0c\u90a3\u4e48\u8fd9\u53ea\u9e1f\u5c31\u53ef\u4ee5\u88ab\u79f0\u4e3a\u9e2d\u5b50\u53ef\u5207\u7247\u7684\u5e8f\u5217\u5207\u7247(Slice)\u662f\u7528\u6765\u83b7\u53d6\u5e8f\u5217\u67d0\u4e00\u6bb5\u8303\u56f4\u7684\u5143\u7d20.\u5207\u7247\u64cd\u4f5c\u4e5f\u662f\u901a\u8fc7__getitem__\u6765\u5b8c\u6210\u7684:PythonclassVector:#\u7701\u7565\u4e86\u5f88\u591a\u884c#...def__len__(self):returnlen(self._components)#\u7701\u7565\u4e86\u5f88\u591adef__getitem__(self,index):cls=type(self)#\u83b7\u53d6\u5b9e\u4f8b\u7684\u7c7b\u578bifisinstance(index,slice):#\u5982\u679cindex\u53c2\u6570\u503c\u662f\u5207\u7247\u7684\u5bf9\u8c61#\u8c03\u7528Vector\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u5207\u7247\u540e\u7684Vector\u7c7breturncls(self._components[index])elifisinstance(index,numbers.Integral):#\u5982\u679c\u53c2\u6570\u662f\u6574\u6570\u7c7b\u578breturnself._components[index]#\u6211\u4eec\u5c31\u5bf9\u6570\u7ec4\u8fdb\u884c\u5207\u7247else:#\u5426\u5219\u6211\u4eec\u5c31\u629b\u51fa\u5f02\u5e38msg='{cls.__name__}indicesmustbeintegers'raiseTypeError(msg.format(cls=cls))1234567891011121314151617classVector:\u00a0\u00a0\u00a0\u00a0#\u7701\u7565\u4e86\u5f88\u591a\u884c\u00a0\u00a0\u00a0\u00a0#...\u00a0\u00a0\u00a0\u00a0def__len__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnlen(self._components)\u00a0\u00a0\u00a0\u00a0#\u7701\u7565\u4e86\u5f88\u591a\u00a0\u00a0\u00a0\u00a0def__getitem__(self,index):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cls=type(self)\u00a0\u00a0#\u83b7\u53d6\u5b9e\u4f8b\u7684\u7c7b\u578b\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifisinstance(index,slice):\u00a0\u00a0#\u5982\u679cindex\u53c2\u6570\u503c\u662f\u5207\u7247\u7684\u5bf9\u8c61\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8c03\u7528Vector\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u5207\u7247\u540e\u7684Vector\u7c7b\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returncls(self._components[index])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifisinstance(index,numbers.Integral):\u00a0\u00a0#\u5982\u679c\u53c2\u6570\u662f\u6574\u6570\u7c7b\u578b\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself._components[index]\u00a0\u00a0#\u6211\u4eec\u5c31\u5bf9\u6570\u7ec4\u8fdb\u884c\u5207\u7247\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0#\u5426\u5219\u6211\u4eec\u5c31\u629b\u51fa\u5f02\u5e38\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0msg='{cls.__name__}indicesmustbeintegers'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseTypeError(msg.format(cls=cls))\u52a8\u6001\u5b58\u53d6\u5c5e\u6027\u901a\u8fc7\u8bbf\u95ee\u5206\u91cf\u540d\u6765\u83b7\u53d6\u5c5e\u6027:Pythonshortcut_names='xyzt'def__getattr__(self,name):cls=type(self)#\u83b7\u53d6\u7c7b\u578biflen(name)==1:#\u5224\u65ad\u5c5e\u6027\u540d\u662f\u5426\u5728\u6211\u4eec\u5b9a\u4e49\u7684names\u4e2dpos=cls.shortcut_names.find(name)if0<=pos<len(self._components):returnself._components[pos]msg='{}objectshasnoattribute{}'raiseAttributeError(msg.format(cls,name))test=Vector([3,4,5])print(test.x)print(test.y)print(test.z)print(test.c)123456789101112131415shortcut_names='xyzt'def__getattr__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cls=type(self)#\u83b7\u53d6\u7c7b\u578b\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iflen(name)==1:#\u5224\u65ad\u5c5e\u6027\u540d\u662f\u5426\u5728\u6211\u4eec\u5b9a\u4e49\u7684names\u4e2d\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pos=cls.shortcut_names.find(name)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if0<=pos<len(self._components):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself._components[pos]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0msg='{}objectshasnoattribute{}'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseAttributeError(msg.format(cls,name))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0test=Vector([3,4,5])print(test.x)print(test.y)print(test.z)print(test.c)\u6563\u5217\u548c\u5feb\u901f\u7b49\u503c\u6d4b\u8bd5\u5b9e\u73b0__hash__\u65b9\u6cd5\u3002\u52a0\u4e0a\u73b0\u6709\u7684__eq__\u65b9\u6cd5\uff0c\u8fd9\u4f1a\u628a\u5b9e\u4f8b\u53d8\u6210\u53ef\u6563\u5217\u7684\u5bf9\u8c61.\u5f53\u5e8f\u5217\u662f\u591a\u7ef4\u662f\u65f6\u5019,\u6211\u4eec\u6709\u4e00\u4e2a\u6548\u7387\u66f4\u9ad8\u7684\u65b9\u6cd5:Pythondef__eq__(self,other):iflen(self)!=len(other):#\u9996\u5148\u5224\u65ad\u957f\u5ea6\u662f\u5426\u76f8\u7b49returnFalsefora,binzip(self,other):#\u63a5\u7740\u9010\u4e00\u5224\u65ad\u6bcf\u4e2a\u5143\u7d20\u662f\u5426\u76f8\u7b49ifa!=b:returnFalsereturnTrue#\u6211\u4eec\u4e5f\u53ef\u4ee5\u5199\u7684\u6f02\u4eae\u70b9def__eq__(self,other):return(len(self)==len(other))andall(a==bfora,binzip(self,other))123456789101112def__eq__(self,other):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iflen(self)!=len(other):#\u9996\u5148\u5224\u65ad\u957f\u5ea6\u662f\u5426\u76f8\u7b49\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnFalse\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fora,binzip(self,other):#\u63a5\u7740\u9010\u4e00\u5224\u65ad\u6bcf\u4e2a\u5143\u7d20\u662f\u5426\u76f8\u7b49\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifa!=b:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnFalse\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnTrue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6211\u4eec\u4e5f\u53ef\u4ee5\u5199\u7684\u6f02\u4eae\u70b9\u00a0def__eq__(self,other):\u00a0\u00a0\u00a0\u00a0return(len(self)==len(other))andall(a==bfora,binzip(self,other))\u7b2c\u5341\u4e00\u7ae0:\u63a5\u53e3\uff1a\u4ece\u534f\u8bae\u5230\u62bd\u8c61\u57fa\u7c7b\u8fd9\u4e9b\u534f\u8bae\u5b9a\u4e49\u4e3a\u975e\u6b63\u5f0f\u7684\u63a5\u53e3,\u662f\u8ba9\u7f16\u7a0b\u8bed\u8a00\u5b9e\u73b0\u591a\u6001\u7684\u65b9\u5f0f.\u5728python\u4e2d,\u6ca1\u6709interface\u5173\u952e\u5b57,\u800c\u4e14\u9664\u4e86\u62bd\u8c61\u57fa\u7c7b,\u6bcf\u4e2a\u7c7b\u90fd\u6709\u63a5\u53e3:\u6240\u6709\u7c7b\u90fd\u53ef\u4ee5\u81ea\u884c\u5b9e\u73b0__getitem__\u548c__add__.\u6709\u5199\u89c4\u5b9a\u5219\u662f\u7a0b\u5e8f\u5458\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u6162\u6162\u603b\u7ed3\u51fa\u6765\u7684,\u5982\u53d7\u4fdd\u62a4\u7684\u5c5e\u6027\u547d\u540d\u91c7\u7528\u5355\u4e2a\u524d\u5bfc\u4e0b\u5212\u7ebf,\u8fd8\u6709\u4e00\u4e9b\u7f16\u7801\u89c4\u8303\u4e4b\u7c7b\u7684.\u534f\u8bae\u662f\u63a5\u53e3,\u4f46\u4e0d\u662f\u6b63\u5f0f\u7684,\u8fd9\u4e9b\u89c4\u5b9a\u5e76\u4e0d\u662f\u5f3a\u5236\u6027\u7684,\u4e00\u4e2a\u7c7b\u53ef\u80fd\u53ea\u5b9e\u73b0\u90e8\u5206\u63a5\u53e3,\u8fd9\u662f\u5141\u8bb8\u7684.\u65e2\u7136\u6709\u975e\u6b63\u5f0f\u7684\u534f\u8bae,\u90a3\u4e48\u6709\u6ca1\u6709\u6b63\u5f0f\u7684\u534f\u8bae\u5462?\u6709,\u62bd\u8c61\u57fa\u7c7b\u5c31\u662f\u4e00\u79cd\u5f3a\u5236\u6027\u7684\u534f\u8bae.\u62bd\u8c61\u57fa\u7c7b\u8981\u6c42\u5176\u5b50\u7c7b\u9700\u8981\u5b9e\u73b0\u5b9a\u4e49\u7684\u67d0\u4e2a\u63a5\u53e3,\u4e14\u62bd\u8c61\u57fa\u7c7b\u4e0d\u80fd\u5b9e\u4f8b\u5316.Python\u6587\u5316\u4e2d\u7684\u63a5\u53e3\u548c\u534f\u8bae\u5f15\u5165\u62bd\u8c61\u57fa\u7c7b\u4e4b\u524d,python\u5c31\u5df2\u7ecf\u975e\u5e38\u6210\u529f\u4e86,\u5373\u4f7f\u73b0\u5728\u4e5f\u5f88\u5c11\u4f7f\u7528\u62bd\u8c61\u57fa\u7c7b.\u901a\u8fc7\u9e2d\u5b50\u7c7b\u578b\u548c\u534f\u8bae,\u6211\u4eec\u628a\u534f\u8bae\u5b9a\u4e49\u4e3a\u975e\u6b63\u5f0f\u63a5\u53e3,\u662f\u8ba9python\u5b9e\u73b0\u591a\u6001\u7684\u65b9\u5f0f.\u53e6\u4e00\u8fb9\u9762,\u4e0d\u8981\u89c9\u5f97\u628a\u516c\u5f00\u6570\u636e\u5c5e\u6027\u653e\u5165\u5bf9\u8c61\u7684\u63a5\u53e3\u4e2d\u4e0d\u59a5,\u5982\u679c\u9700\u8981,\u603b\u80fd\u5b9e\u73b0\u8bfb\u503c\u548c\u8bbe\u503c\u65b9\u6cd5,\u628a\u6570\u636e\u5c5e\u6027\u53d8\u6210\u7279\u6027.\u5bf9\u8c61\u516c\u5f00\u65b9\u6cd5\u7684\u81ea\u5df1,\u8ba9\u5bf9\u8c61\u5728\u7cfb\u7edf\u4e2d\u626e\u6f14\u7279\u5b9a\u7684\u89d2\u8272.\u56e0\u6b64,\u63a5\u53e3\u662f\u5b9e\u73b0\u7279\u5b9a\u89d2\u8272\u7684\u65b9\u6cd5\u96c6\u5408.\u5e8f\u5217\u534f\u8bae\u662fpython\u6700\u57fa\u7840\u7684\u534f\u8bae\u4e4b\u4e00,\u5373\u4fbf\u5bf9\u8c61\u53ea\u5b9e\u73b0\u90a3\u4e2a\u534f\u8bae\u6700\u57fa\u672c\u7684\u4e00\u90e8\u5206,\u89e3\u91ca\u5668\u4e5f\u4f1a\u8d1f\u8d23\u5730\u5904\u7406.\u6c34\u79bd\u548c\u62bd\u8c61\u57fa\u7c7b\u9e2d\u5b50\u7c7b\u578b\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u5341\u5206\u6709\u7528,\u4f46\u662f\u968f\u7740\u53d1\u5c55,\u901a\u5e38\u7531\u4e86\u66f4\u597d\u7684\u65b9\u5f0f.\u8fd1\u4ee3,\u5c5e\u548c\u79cd\u57fa\u672c\u662f\u6839\u636e\u8868\u578b\u7cfb\u7edf\u5b66\u5206\u7c7b\u7684,\u9e2d\u79d1\u5c5e\u4e8e\u6c34\u79bd,\u800c\u6c34\u79bd\u8fd8\u5305\u62ec\u9e45,\u9e3f\u96c1\u7b49.\u6c34\u79bd\u662f\u5bf9\u67d0\u4e00\u7c7b\u8868\u73b0\u4e00\u81f4\u8fdb\u884c\u7684\u5206\u7c7b,\u4ed6\u4eec\u6709\u4e00\u4e9b\u7edf\u4e00\u201d\u63cf\u8ff0\u201d\u90e8\u5206.\u56e0\u6b64,\u6839\u636e\u5206\u7c7b\u7684\u6f14\u5316,\u9700\u8981\u6709\u4e2a\u6c34\u79bd\u7c7b\u578b,\u53ea\u8981cls\u662f\u62bd\u8c61\u57fa\u7c7b,\u5373cls\u7684\u5143\u7c7b\u662fabc.ABCMeta,\u5c31\u53ef\u4ee5\u4f7f\u7528isinstance(obj,cls)\u6765\u8fdb\u884c\u5224\u65ad.\u4e0e\u5177\u7c7b\u76f8\u6bd4,\u62bd\u8c61\u57fa\u7c7b\u6709\u5f88\u591a\u7406\u8bba\u4e0a\u7684\u4f18\u70b9,\u88ab\u6ce8\u518c\u7684\u7c7b\u5fc5\u987b\u6ee1\u8db3\u62bd\u8c61\u57fa\u7c7b\u5bf9\u65b9\u6cd5\u548c\u7b7e\u540d\u7684\u8981\u6c42,\u66f4\u91cd\u8981\u7684\u662f\u6ee1\u8db3\u5e95\u5c42\u8bed\u4e49\u5951\u7ea6.\u6807\u51c6\u5e93\u4e2d\u7684\u62bd\u8c61\u57fa\u7c7b\u5927\u591a\u6570\u7684\u6807\u51c6\u5e93\u7684\u62bd\u8c61\u57fa\u7c7b\u5728collections.abc\u6a21\u5757\u4e2d\u5b9a\u4e49.\u5c11\u90e8\u5206\u5728numbers\u548cio\u5305\u4e2d\u6709\u4e00\u4e9b\u62bd\u8c61\u57fa\u7c7b.\u6807\u51c6\u5e93\u4e2d\u6709\u4e24\u4e2aabc\u6a21\u5757,\u8fd9\u91cc\u53ea\u8ba8\u8bbacollections.abc.\u8fd9\u4e2a\u6a21\u5757\u4e2d\u5b9a\u4e49\u4e8616\u4e2a\u62bd\u8c61\u57fa\u7c7b.Iterable\u3001Container\u548cSized\u5404\u4e2a\u96c6\u5408\u5e94\u8be5\u7ee7\u627f\u8fd9\u4e09\u4e2a\u62bd\u8c61\u57fa\u7c7b\uff0c\u6216\u8005\u81f3\u5c11\u5b9e\u73b0\u517c\u5bb9\u7684\u534f\u8bae\u3002Iterable\u901a\u8fc7__iter__\u65b9\u6cd5\u652f\u6301\u8fed\u4ee3\uff0cContainer\u901a\u8fc7__contains__\u65b9\u6cd5\u652f\u6301in\u8fd0\u7b97\u7b26\uff0cSized\u901a\u8fc7__len__\u65b9\u6cd5\u652f\u6301len()\u51fd\u6570\u3002Sequence\u3001Mapping\u548cSet\u8fd9\u4e09\u4e2a\u662f\u4e3b\u8981\u7684\u4e0d\u53ef\u53d8\u96c6\u5408\u7c7b\u578b\uff0c\u800c\u4e14\u5404\u81ea\u90fd\u6709\u53ef\u53d8\u7684\u5b50\u7c7b\u3002MappingView\u5728Python3\u4e2d\uff0c\u6620\u5c04\u65b9\u6cd5.items()\u3001.keys()\u548c.values()\u8fd4\u56de\u7684\u5bf9\u8c61\u5206\u522b\u662fItemsView\u3001KeysView\u548cValuesView\u7684\u5b9e\u4f8b\u3002\u524d\u4e24\u4e2a\u7c7b\u8fd8\u4eceSet\u7c7b\u7ee7\u627f\u4e86\u4e30\u5bcc\u7684\u63a5\u53e3\u3002Callable\u548cHashable\u8fd9\u4e24\u4e2a\u62bd\u8c61\u57fa\u7c7b\u4e0e\u96c6\u5408\u6ca1\u6709\u592a\u5927\u7684\u5173\u7cfb\uff0c\u53ea\u4e0d\u8fc7\u56e0\u4e3acollections.abc\u662f\u6807\u51c6\u5e93\u4e2d\u5b9a\u4e49\u62bd\u8c61\u57fa\u7c7b\u7684\u7b2c\u4e00\u4e2a\u6a21\u5757\uff0c\u800c\u5b83\u4eec\u53c8\u592a\u91cd\u8981\u4e86\uff0c\u56e0\u6b64\u624d\u628a\u5b83\u4eec\u653e\u5230collections.abc\u6a21\u5757\u4e2d\u3002\u6211\u4ece\u672a\u89c1\u8fc7Callable\u6216Hashable\u7684\u5b50\u7c7b\u3002\u8fd9\u4e24\u4e2a\u62bd\u8c61\u57fa\u7c7b\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4e3a\u5185\u7f6e\u51fd\u6570isinstance\u63d0\u4f9b\u652f\u6301\uff0c\u4ee5\u4e00\u79cd\u5b89\u5168\u7684\u65b9\u5f0f\u5224\u65ad\u5bf9\u8c61\u80fd\u4e0d\u80fd\u8c03\u7528\u6216\u6563\u5217\u3002Iterator\u6ce8\u610f\u5b83\u662fIterable\u7684\u5b50\u7c7b\u3002\u7b2c\u5341\u4e8c\u7ae0:\u7ee7\u627f\u7684\u4f18\u7f3a\u70b9\u5f88\u591a\u4eba\u89c9\u5f97\u591a\u91cd\u7ee7\u627f\u5f97\u4e0d\u507f\u5931,\u90a3\u4e9b\u4e0d\u652f\u6301\u591a\u7ee7\u627f\u7684\u7f16\u7a0b\u8bed\u8a00\u597d\u50cf\u4e5f\u6ca1\u4ec0\u4e48\u635f\u5931.\u5b50\u7c7b\u5316\u5185\u7f6e\u7c7b\u578b\u5f88\u9ebb\u70e6python2.2\u4ee5\u524d,\u5185\u7f6e\u7c7b\u578b(\u5982list,dict)\u662f\u4e0d\u80fd\u5b50\u7c7b\u5316\u7684.\u5b83\u4eec\u662f\u4e0d\u80fd\u88ab\u5176\u4ed6\u7c7b\u6240\u7ee7\u627f\u7684,\u539f\u56e0\u662f\u5185\u7f6e\u7c7b\u578b\u662fC\u8bed\u8a00\u5b9e\u73b0\u7684,\u4e0d\u4f1a\u8c03\u7528\u7528\u6237\u5b9a\u4e49\u7684\u7c7b\u8986\u76d6\u7684\u65b9\u6cd5.\u81f3\u4e8e\u5185\u7f6e\u7c7b\u578b\u7684\u5b50\u7c7b\u8986\u76d6\u7684\u65b9\u6cd5\u4f1a\u4e0d\u4f1a\u9690\u5f0f\u8c03\u7528,CPython\u5b98\u65b9\u4e5f\u6ca1\u6709\u5236\u5b9a\u89c4\u5219.\u57fa\u672c\u4e0a,\u5185\u7f6e\u7c7b\u578b\u7684\u65b9\u6cd5\u4e0d\u4f1a\u8c03\u7528\u5b50\u7c7b\u8986\u76d6\u7684\u65b9\u6cd5.\u4f8b\u5982,dict\u7684\u5b50\u7c7b\u8986\u76d6\u7684__getitem__\u65b9\u6cd5\u4e0d\u4f1a\u8986\u76d6\u5185\u7f6e\u7c7b\u578b\u7684get()\u65b9\u6cd5\u8c03\u7528.\u591a\u91cd\u7ee7\u627f\u548c\u65b9\u6cd5\u89e3\u6790\u987a\u5e8f\u4efb\u4f55\u5b9e\u73b0\u591a\u91cd\u7ee7\u627f\u7684\u8bed\u8a00\u90fd\u8981\u5904\u7406\u6f5c\u5728\u7684\u547d\u540d\u51b2\u7a81\uff0c\u8fd9\u79cd\u51b2\u7a81\u7531\u4e0d\u76f8\u5173\u7684\u7956\u5148\u7c7b\u5b9e\u73b0\u540c\u540d\u65b9\u6cd5\u5f15\u8d77\u3002\u8fd9\u79cd\u51b2\u7a81\u79f0\u4e3a\u201c\u83f1\u5f62\u95ee\u9898\u201d\uff0c\u5982\u56fe.Python\u4f1a\u6309\u7167\u7279\u5b9a\u7684\u987a\u5e8f\u904d\u5386\u7ee7\u627f\u56fe\u3002\u8fd9\u4e2a\u987a\u5e8f\u53eb\u65b9\u6cd5\u89e3\u6790\u987a\u5e8f\uff08MethodResolutionOrder\uff0cMRO\uff09\u3002\u7c7b\u90fd\u6709\u4e00\u4e2a\u540d\u4e3amro\u7684\u5c5e\u6027\uff0c\u5b83\u7684\u503c\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u6309\u7167\u65b9\u6cd5\u89e3\u6790\u987a\u5e8f\u5217\u51fa\u5404\u4e2a\u8d85\u7c7b\uff0c\u4ece\u5f53\u524d\u7c7b\u4e00\u76f4\u5411\u4e0a\uff0c\u76f4\u5230object\u7c7b\u3002\u7b2c\u5341\u4e09\u7ae0:\u6b63\u786e\u91cd\u8f7d\u8fd0\u7b97\u7b26\u5728python\u4e2d,\u5927\u591a\u6570\u7684\u8fd0\u7b97\u7b26\u662f\u53ef\u4ee5\u91cd\u8f7d\u7684,\u5982==\u5bf9\u5e94\u4e86__eq__,+\u5bf9\u5e94__add__.\u67d0\u4e9b\u8fd0\u7b97\u7b26\u4e0d\u80fd\u91cd\u8f7d,\u5982is,and,or,and.\u7b2c\u5341\u56db\u7ae0:\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u3001\u8fed\u4ee3\u5668\u548c\u751f\u6210\u5668\u8fed\u4ee3\u662f\u6570\u636e\u5904\u7406\u7684\u57fa\u77f3.\u626b\u63cf\u5185\u5b58\u4e2d\u653e\u4e0d\u4e0b\u7684\u6570\u636e\u96c6\u65f6,\u6211\u4eec\u8981\u627e\u5230\u4e00\u79cd\u60f0\u6027\u83b7\u53d6\u6570\u636e\u7684\u65b9\u5f0f,\u5373\u6309\u9700\u4e00\u6b21\u83b7\u53d6\u4e00\u4e2a\u6570\u636e.\u8fd9\u5c31\u662f\u8fed\u4ee3\u5668\u6a21\u5f0f.python\u4e2d\u6709yield\u5173\u952e\u5b57,\u7528\u4e8e\u6784\u5efa\u751f\u6210\u5668(generator),\u5176\u4f5c\u7528\u7528\u4e8e\u8fed\u4ee3\u5668\u4e00\u6837.\u6240\u6709\u7684\u751f\u6210\u5668\u90fd\u662f\u8fed\u4ee3\u5668,\u56e0\u4e3a\u751f\u6210\u5668\u5b8c\u5168\u5b9e\u73b0\u4e86\u8fed\u4ee3\u5668\u7684\u63a5\u53e3.\u68c0\u67e5\u5bf9\u8c61x\u662f\u5426\u8fed\u4ee3,\u6700\u51c6\u786e\u7684\u65b9\u6cd5\u662f\u8c03\u7528iter(x),\u5982\u679c\u4e0d\u53ef\u8fed\u4ee3,\u5219\u629b\u51faTypeError\u5f02\u5e38.\u8fd9\u4e2a\u65b9\u6cd5\u6bd4isinstance(x,abc.Iterable)\u66f4\u51c6\u786e,\u56e0\u4e3a\u5b83\u8fd8\u8003\u8651\u5230\u9057\u7559\u7684__getitem__\u65b9\u6cd5.\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u4e0e\u8fed\u4ee3\u5668\u7684\u5bf9\u6bd4\u6211\u4eec\u9700\u8981\u5bf9\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u8fdb\u884c\u4e00\u4e0b\u5b9a\u4e49:\u4f7f\u7528iter\u5185\u7f6e\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u8fed\u4ee3\u5668\u7684\u5bf9\u8c61\u3002\u5982\u679c\u5bf9\u8c61\u5b9e\u73b0\u4e86\u80fd\u8fd4\u56de\u8fed\u4ee3\u5668\u7684iter\u65b9\u6cd5\uff0c\u90a3\u4e48\u5bf9\u8c61\u5c31\u662f\u53ef\u8fed\u4ee3\u7684\u3002\u5e8f\u5217\u90fd\u53ef\u4ee5\u8fed\u4ee3\uff1b\u5b9e\u73b0\u4e86getitem\u65b9\u6cd5\uff0c\u800c\u4e14\u5176\u53c2\u6570\u662f\u4ece\u96f6\u5f00\u59cb\u7684\u7d22\u5f15\uff0c\u8fd9\u79cd\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u8fed\u4ee3\u3002\u6211\u4eec\u8981\u660e\u786e\u53ef\u8fed\u4ee3\u5bf9\u8c61\u548c\u8fed\u4ee3\u5668\u4e4b\u95f4\u7684\u5173\u7cfb:\u4ece\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u4e2d\u83b7\u53d6\u8fed\u4ee3\u5668.\u6807\u51c6\u7684\u8fed\u4ee3\u5668\u63a5\u53e3\u6709\u4e24\u4e2a\u65b9\u6cd5:__next__:\u8fd4\u56de\u4e0b\u4e00\u4e2a\u53ef\u7528\u7684\u5143\u7d20,\u5982\u679c\u6ca1\u6709\u5143\u7d20\u4e86,\u629b\u51faStopIteration\u5f02\u5e38.__iter__:\u8fd4\u56deself,\u4ee5\u4fbf\u548b\u5e94\u8be5\u4f7f\u7528\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5730\u65b9\u4f7f\u7528\u8fed\u4ee3\u5668.\u5178\u578b\u7684\u8fed\u4ee3\u5668\u4e3a\u4e86\u6e05\u695a\u5730\u8bf4\u660e\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e0e\u8fed\u4ee3\u5668\u4e4b\u95f4\u7684\u91cd\u8981\u533a\u522b,\u6211\u4eec\u5c06\u4e24\u8005\u5206\u5f00,\u5199\u6210\u4e24\u4e2a\u7c7b:PythonimportreimportreprlibRE_WORD=re.compile('\\w+')classSentence:def__init__(self,text):self.text=text#\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3001\u5143\u7d20\u4e3a\u6b63\u5219\u6240\u5339\u914d\u5230\u7684\u975e\u91cd\u53e0\u5339\u914d\u3011self.words=RE_WORD.findall(text)def__repr__(self):#\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210\u5927\u578b\u6570\u636e\u7ed3\u6784\u7684\u7b80\u7565\u5b57\u7b26\u4e32\u7684\u8868\u73b0\u5f62\u5f0freturn'Sentence(%s)'%reprlib.repr(self.text)def__iter__(self):'''\u660e\u786e\u8868\u660e\u8be5\u7c7b\u578b\u662f\u53ef\u4ee5\u8fed\u4ee3\u7684'''returnSentenceIterator(self.words)#\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668classSentenceIterator:def__init__(self,words):self.words=words#\u8be5\u8fed\u4ee3\u5668\u5b9e\u4f8b\u5e94\u7528\u5355\u8bcd\u5217\u8868self.index=0#\u7528\u4e8e\u5b9a\u4f4d\u4e0b\u4e00\u4e2a\u5143\u7d20def__next__(self):try:word=self.words[self.index]#\u8fd4\u56de\u5f53\u524d\u7684\u5143\u7d20exceptIndexError:raiseStopIteration()self.index+=1#\u7d22\u5f15+1returnword#\u8fd4\u56de\u5355\u8bcddef__iter__(self):returnself#\u8fd4\u56deself12345678910111213141516171819202122232425262728293031323334353637importreimportreprlib\u00a0RE_WORD=re.compile('\\w+')\u00a0\u00a0classSentence:\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,text):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.text=text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3001\u5143\u7d20\u4e3a\u6b63\u5219\u6240\u5339\u914d\u5230\u7684\u975e\u91cd\u53e0\u5339\u914d\u3011\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.words=RE_WORD.findall(text)\u00a0\u00a0\u00a0\u00a0\u00a0def__repr__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210\u5927\u578b\u6570\u636e\u7ed3\u6784\u7684\u7b80\u7565\u5b57\u7b26\u4e32\u7684\u8868\u73b0\u5f62\u5f0f\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return'Sentence(%s)'%reprlib.repr(self.text)\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u660e\u786e\u8868\u660e\u8be5\u7c7b\u578b\u662f\u53ef\u4ee5\u8fed\u4ee3\u7684'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnSentenceIterator(self.words)#\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\u00a0\u00a0classSentenceIterator:\u00a0\u00a0\u00a0\u00a0def__init__(self,words):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.words=words\u00a0\u00a0#\u8be5\u8fed\u4ee3\u5668\u5b9e\u4f8b\u5e94\u7528\u5355\u8bcd\u5217\u8868\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.index=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7528\u4e8e\u5b9a\u4f4d\u4e0b\u4e00\u4e2a\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0def__next__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0word=self.words[self.index]#\u8fd4\u56de\u5f53\u524d\u7684\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptIndexError:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseStopIteration()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.index+=1#\u7d22\u5f15+1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnword#\u8fd4\u56de\u5355\u8bcd\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56deself\u8fd9\u4e2a\u4f8b\u5b50\u4e3b\u8981\u662f\u4e3a\u4e86\u533a\u5206\u53ef\u8fed\u4ee3\u5bf9\u8c61\u548c\u8fed\u4ee3\u5668,\u8fd9\u79cd\u60c5\u51b5\u5de5\u4f5c\u91cf\u4e00\u822c\u6bd4\u8f83\u5927,\u7a0b\u5e8f\u5458\u4e5f\u4e0d\u613f\u8fd9\u6837\u5199.\u6784\u5efa\u53ef\u8fed\u4ee3\u5bf9\u8c61\u548c\u8fed\u4ee3\u5668\u7ecf\u5e38\u4f1a\u51fa\u73b0\u9519\u8bef,\u539f\u56e0\u662f\u6df7\u6dc6\u4e86\u4e8c\u8005.\u8981\u77e5\u9053,\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u6709\u4e2a__iter__\u65b9\u6cd5,\u6bcf\u6b21\u90fd\u5b9e\u4f8b\u5316\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u5668;\u800c\u8fed\u4ee3\u5668\u662f\u8981\u5b9e\u73b0__next__\u65b9\u6cd5,\u8fd4\u56de\u5355\u4e2a\u5143\u7d20,\u540c\u65f6\u8fd8\u8981\u63d0\u4f9b__iter__\u65b9\u6cd5\u8fd4\u56de\u8fed\u4ee3\u5668\u672c\u8eab.\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e00\u5b9a\u4e0d\u80fd\u662f\u81ea\u8eab\u7684\u8fed\u4ee3\u5668.\u4e5f\u5c31\u662f\u8bf4,\u53ef\u8fed\u4ee3\u5bf9\u8c61\u5fc5\u987b\u5b9e\u73b0__iter__\u65b9\u6cd5,\u4f46\u4e0d\u80fd\u5b9e\u73b0__next__\u65b9\u6cd5.\u5c0f\u7ed3\u4e0b,\u8fed\u4ee3\u5668\u53ef\u4ee5\u8fed\u4ee3,\u4f46\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e0d\u662f\u8fed\u4ee3\u5668.\u751f\u6210\u5668\u51fd\u6570\u5b9e\u73b0\u76f8\u540c\u529f\u80fd,\u8986\u76d6python\u4e60\u60ef\u7684\u65b9\u5f0f,\u5c31\u662f\u7528\u751f\u6210\u5668\u4ee3\u66ff\u8fed\u4ee3\u5668SentenceIterator.\u5c06\u4e0a\u4e2a\u4f8b\u5b50\u6539\u6210\u751f\u6210\u5668\u7684\u65b9\u5f0f:PythonimportreimportreprlibRE_WORD=re.compile('\\w+')classSentence:def__init__(self,text):self.text=text#\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3001\u5143\u7d20\u4e3a\u6b63\u5219\u6240\u5339\u914d\u5230\u7684\u975e\u91cd\u53e0\u5339\u914d\u3011self.words=RE_WORD.findall(text)def__repr__(self):#\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210\u5927\u578b\u6570\u636e\u7ed3\u6784\u7684\u7b80\u7565\u5b57\u7b26\u4e32\u7684\u8868\u73b0\u5f62\u5f0freturn'Sentence(%s)'%reprlib.repr(self.text)def__iter__(self):'''\u751f\u6210\u5668\u7248\u672c'''forwordinself.words:#\u8fed\u4ee3\u5b9e\u4f8b\u7684wordsyieldword#\u751f\u6210\u5355\u8bcdreturn123456789101112131415161718192021importreimportreprlib\u00a0RE_WORD=re.compile('\\w+')\u00a0classSentence:\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,text):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.text=text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u5217\u8868\u3001\u5143\u7d20\u4e3a\u6b63\u5219\u6240\u5339\u914d\u5230\u7684\u975e\u91cd\u53e0\u5339\u914d\u3011\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.words=RE_WORD.findall(text)\u00a0\u00a0\u00a0\u00a0\u00a0def__repr__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8be5\u51fd\u6570\u7528\u4e8e\u751f\u6210\u5927\u578b\u6570\u636e\u7ed3\u6784\u7684\u7b80\u7565\u5b57\u7b26\u4e32\u7684\u8868\u73b0\u5f62\u5f0f\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return'Sentence(%s)'%reprlib.repr(self.text)\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u751f\u6210\u5668\u7248\u672c'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forwordinself.words:\u00a0\u00a0#\u8fed\u4ee3\u5b9e\u4f8b\u7684words\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldword\u00a0\u00a0#\u751f\u6210\u5355\u8bcd\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d,\u8fed\u4ee3\u5668\u5176\u5b9e\u5c31\u662f\u751f\u6210\u5668\u5bf9\u8c61,\u6bcf\u6b21\u8c03\u7528__iter__\u90fd\u4f1a\u81ea\u52a8\u521b\u5efa,\u56e0\u4e3a\u8fd9\u91cc\u7684__iter__\u65b9\u6cd5\u662f\u751f\u6210\u5668\u51fd\u6570.\u751f\u6210\u5668\u51fd\u6570\u7684\u5de5\u4f5c\u539f\u7406\u53ea\u8981python\u51fd\u6570\u7684\u5b9a\u4e49\u4f53\u4e2d\u6709yield\u5173\u952e\u5b57,\u6539\u51fd\u6570\u5c31\u662f\u751f\u6210\u5668\u51fd\u6570.\u8c03\u7528\u751f\u6210\u5668\u51fd\u6570\u65f6,\u4f1a\u8fd4\u56de\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61.\u4e5f\u5c31\u662f\u8bf4,\u751f\u6210\u5668\u51fd\u6570\u662f\u751f\u6210\u5668\u5de5\u5382.\u666e\u901a\u51fd\u6570\u4e0e\u751f\u6210\u5668\u51fd\u6570\u7684\u552f\u4e00\u533a\u522b\u5c31\u662f,\u751f\u6210\u5668\u51fd\u6570\u91cc\u9762\u6709yield\u5173\u952e\u5b57.\u751f\u6210\u5668\u51fd\u6570\u4f1a\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61,\u5305\u88c5\u751f\u6210\u5668\u51fd\u6570\u7684\u5b9a\u4e49\u4f53.\u5427\u751f\u6210\u5668\u4f20\u7ed9next(\u2026)\u51fd\u6570\u65f6,\u751f\u6210\u5668\u51fd\u6570\u4f1a\u5411\u524d,\u6267\u884c\u51fd\u6570\u4f53\u4e2d\u4e0b\u4e00\u4e2ayield\u8bed\u53e5,\u8fd4\u56de\u4ea7\u51fa\u7684\u503c,\u5e76\u5728\u51fd\u6570\u5b9a\u4e49\u4f53\u7684\u5f53\u524d\u4f4d\u7f6e\u6682\u505c.\u60f0\u6027\u5b9e\u73b0\u60f0\u6027\u7684\u65b9\u5f0f\u5c31\u662f\u7d22\u6027\u628a\u6240\u6709\u6570\u636e\u90fd\u4ea7\u51fa,\u8fd9\u662f\u533a\u522b\u4e8enext(\u2026)\u4e00\u6b21\u751f\u6210\u4e00\u6b21\u5143\u7d20\u7684.PythonimportreimportreprlibRE_WORD=re.compile('\\w+')classSentence:def__init__(self,text):self.text=textself.words=RE_WORD.findall(text)def__repr__(self):return'Sentence(%s)'%reprlib.repr(self.text)def__iter__(self):formatchinRE_WORD.finditer(self.text):yieldmatch.group()1234567891011121314151617importreimportreprlib\u00a0RE_WORD=re.compile('\\w+')\u00a0classSentence:\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,text):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.text=text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.words=RE_WORD.findall(text)\u00a0\u00a0\u00a0\u00a0\u00a0def__repr__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return'Sentence(%s)'%reprlib.repr(self.text)\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0formatchinRE_WORD.finditer(self.text):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldmatch.group()\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u53ef\u4ee5\u7406\u89e3\u4e3a\u5217\u8868\u63a8\u5bfc\u7684\u60f0\u6027\u7248\u672c:\u4e0d\u4f1a\u8feb\u5207\u5730\u6784\u5efa\u5217\u8868,\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u751f\u6210\u5668,\u6309\u9700\u60f0\u6027\u751f\u6210\u5143\u7d20.\u4e5f\u5c31\u662f,\u5982\u679c\u5217\u8868\u63a8\u5bfc\u662f\u4ea7\u51fa\u5217\u8868\u7684\u5de5\u5382,\u90a3\u4e48\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u5c31\u662f\u4ea7\u51fa\u751f\u6210\u5668\u7684\u5de5\u5382.Pythondefgen_AB():print('start')yield'A'print('continue')yield'B'print('end.')res1=[x*3forxingen_AB()]foriinres1:print('-->',i)12345678910defgen_AB():\u00a0\u00a0\u00a0\u00a0print('start')\u00a0\u00a0\u00a0\u00a0yield'A'\u00a0\u00a0\u00a0\u00a0print('continue')\u00a0\u00a0\u00a0\u00a0yield'B'\u00a0\u00a0\u00a0\u00a0print('end.')\u00a0res1=[x*3forxingen_AB()]foriinres1:\u00a0\u00a0\u00a0\u00a0print('-->',i)\u53ef\u4ee5\u770b\u51fa,\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u4f1a\u4ea7\u51fa\u751f\u6210\u5668,\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u51cf\u5c11\u4ee3\u7801:PythonimportreimportreprlibRE_WORD=re.compile('\\w+')classSentence:def__init__(self,text):self.text=textself.words=RE_WORD.findall(text)def__repr__(self):return'Sentence(%s)'%reprlib.repr(self.text)def__iter__(self):return(match.group()formatchinRE_WORD.finditer(self.text))12345678910111213141516importreimportreprlib\u00a0RE_WORD=re.compile('\\w+')\u00a0classSentence:\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,text):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.text=text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.words=RE_WORD.findall(text)\u00a0\u00a0\u00a0\u00a0\u00a0def__repr__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return'Sentence(%s)'%reprlib.repr(self.text)\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return(match.group()formatchinRE_WORD.finditer(self.text))\u8fd9\u91cc\u7684__iter__\u4e0d\u662f\u751f\u6210\u5668\u51fd\u6570\u4e86,\u800c\u662f\u4f7f\u7528\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u6784\u5efa\u751f\u6210\u5668,\u6700\u7ec8\u7684\u6548\u679c\u4e00\u6837.\u8c03\u7528__iter__\u65b9\u6cd5\u4f1a\u5f97\u5230\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61.\u751f\u6210\u5668\u8868\u8fbe\u5f0f\u662f\u8bed\u6cd5\u7cd6,\u5b8c\u5168\u53ef\u4ee5\u66ff\u6362\u751f\u6210\u5668\u51fd\u6570.\u6807\u51c6\u5e93\u4e2d\u7684\u751f\u6210\u5668\u51fd\u6570\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u5f88\u591a\u751f\u6210\u5668,\u6709\u7528\u4e8e\u9010\u884c\u8fed\u4ee3\u7eaf\u6587\u672c\u6587\u4ef6\u7684\u5bf9\u8c61,\u8fd8\u6709\u51fa\u8272\u7684os.walk\u51fd\u6570.\u8fd9\u4e2a\u51fd\u6570\u5728\u904d\u5386\u76ee\u5f55\u6811\u7684\u8fc7\u7a0b\u4e2d\u4ea7\u51fa\u6587\u4ef6\u540d,\u56e0\u6b64\u9012\u5f52\u641c\u7d22\u6587\u4ef6\u7cfb\u7edf\u50cffor\u5faa\u73af\u90a3\u6837\u7b80\u5355.\u6807\u51c6\u5e93\u4e2d\u7684\u751f\u6210\u5668\u5927\u591a\u5728itertools\u548cfunctools\u4e2d,\u8868\u683c\u4e2d\u4e0d\u4ee3\u8868\u6240\u6709.\u7528\u4e8e\u8fc7\u6ee4\u7684\u751f\u6210\u5668\u51fd\u6570\u6a21\u5757\u51fd\u6570\u8bf4\u660eitertoolscompress(it,selector_it)\u5e76\u884c\u5904\u7406\u4e24\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\uff1b\u5982\u679cselector_it\u4e2d\u7684\u5143\u7d20\u662f\u771f\u503c\uff0c\u4ea7\u51fait\u4e2d\u5bf9\u5e94\u7684\u5143\u7d20itertoolsdropwhile(predicate,it)\u5904\u7406it\uff0c\u8df3\u8fc7predicate\u7684\u8ba1\u7b97\u7ed3\u679c\u4e3a\u771f\u503c\u7684\u5143\u7d20\uff0c\u7136\u540e\u4ea7\u51fa\u5269\u4e0b\u7684\u5404\u4e2a\u5143\u7d20\uff08\u4e0d\u518d\u8fdb\u4e00\u6b65\u68c0\u67e5\uff09\uff08\u5185\u7f6e\uff09filter(predicate,it)\u628ait\u4e2d\u7684\u5404\u4e2a\u5143\u7d20\u4f20\u7ed9predicate\uff0c\u5982\u679cpredicate(item)\u8fd4\u56de\u771f\u503c\uff0c\u90a3\u4e48\u4ea7\u51fa\u5bf9\u5e94\u7684\u5143\u7d20\uff1b\u5982\u679cpredicate\u662fNone\uff0c\u90a3\u4e48\u53ea\u4ea7\u51fa\u771f\u503c\u5143\u7d20\u7528\u4e8e\u6620\u5c04\u7684\u751f\u6210\u5668\u51fd\u6570\u6a21\u5757\u51fd\u6570\u8bf4\u660eitertoolsaccumulate(it,[func])\u4ea7\u51fa\u7d2f\u79ef\u7684\u603b\u548c\uff1b\u5982\u679c\u63d0\u4f9b\u4e86func\uff0c\u90a3\u4e48\u628a\u524d\u4e24\u4e2a\u5143\u7d20\u4f20\u7ed9\u5b83\uff0c\u7136\u540e\u628a\u8ba1\u7b97\u7ed3\u679c\u548c\u4e0b\u4e00\u4e2a\u5143\u7d20\u4f20\u7ed9\u5b83\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6700\u540e\u4ea7\u51fa\u7ed3\u679c\uff08\u5185\u7f6e\uff09enumerate(iterable,start=0)\u4ea7\u51fa\u7531\u4e24\u4e2a\u5143\u7d20\u7ec4\u6210\u7684\u5143\u7ec4\uff0c\u7ed3\u6784\u662f(index,item)\uff0c\u5176\u4e2dindex\u4ecestart\u5f00\u59cb\u8ba1\u6570\uff0citem\u5219\u4eceiterable\u4e2d\u83b7\u53d6\uff08\u5185\u7f6e\uff09map(func,it1,[it2,\u2026,itN])\u628ait\u4e2d\u7684\u5404\u4e2a\u5143\u7d20\u4f20\u7ed9func\uff0c\u4ea7\u51fa\u7ed3\u679c\uff1b\u5982\u679c\u4f20\u5165N\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48func\u5fc5\u987b\u80fd\u63a5\u53d7N\u4e2a\u53c2\u6570\uff0c\u800c\u4e14\u8981\u5e76\u884c\u5904\u7406\u5404\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u5408\u5e76\u591a\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u751f\u6210\u5668\u51fd\u6570\u6a21\u5757\u51fd\u6570\u8bf4\u660eitertoolschain(it1,\u2026,itN)\u5148\u4ea7\u51fait1\u4e2d\u7684\u6240\u6709\u5143\u7d20\uff0c\u7136\u540e\u4ea7\u51fait2\u4e2d\u7684\u6240\u6709\u5143\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u65e0\u7f1d\u8fde\u63a5\u5728\u4e00\u8d77itertoolschain.from_iterable(it)\u4ea7\u51fait\u751f\u6210\u7684\u5404\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\uff0c\u4e00\u4e2a\u63a5\u4e00\u4e2a\uff0c\u65e0\u7f1d\u8fde\u63a5\u5728\u4e00\u8d77\uff1bit\u5e94\u8be5\u4ea7\u51fa\u53ef\u8fed\u4ee3\u7684\u5143\u7d20\uff0c\u4f8b\u5982\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u5217\u8868\uff08\u5185\u7f6e\uff09zip(it1,\u2026,itN)\u5e76\u884c\u4ece\u8f93\u5165\u7684\u5404\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u83b7\u53d6\u5143\u7d20\uff0c\u4ea7\u51fa\u7531N\u4e2a\u5143\u7d20\u7ec4\u6210\u7684\u5143\u7ec4\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u5230\u5934\u4e86\uff0c\u5c31\u9ed8\u9ed8\u5730\u505c\u6b62\u65b0\u7684\u53e5\u6cd5\uff1ayieldfrom\u5982\u679c\u751f\u6210\u5668\u51fd\u6570\u9700\u8981\u4ea7\u51fa\u53e6\u4e00\u4e2a\u751f\u6210\u5668\u751f\u6210\u7684\u503c,\u4f20\u7edf\u7684\u65b9\u5f0f\u662f\u5d4c\u5957\u7684for\u5faa\u73af,\u4f8b\u5982,\u6211\u4eec\u8981\u81ea\u5df1\u5b9e\u73b0chain\u751f\u6210\u5668:Python>>>defchain(*iterables):...foritiniterables:...foriinit:...yieldi...>>>s='ABC'>>>t=tuple(range(3))>>>list(chain(s,t))['A','B','C',0,1,2]123456789>>>defchain(*iterables):...\u00a0\u00a0\u00a0\u00a0foritiniterables:...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriinit:...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldi...>>>s='ABC'>>>t=tuple(range(3))>>>list(chain(s,t))['A','B','C',0,1,2]chain\u751f\u6210\u5668\u51fd\u6570\u628a\u64cd\u4f5c\u4f9d\u6b21\u4ea4\u7ed9\u63a5\u6536\u5230\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\u5904\u7406.\u800c\u6539\u7528yieldfrom\u8bed\u53e5\u53ef\u4ee5\u7b80\u5316:Python>>>defchain(*iterables):...foriiniterables:...yieldfromi...>>>list(chain(s,t))['A','B','C',0,1,2]123456>>>defchain(*iterables):...\u00a0\u00a0\u00a0\u00a0foriiniterables:...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldfromi...>>>list(chain(s,t))['A','B','C',0,1,2]\u53ef\u4ee5\u770b\u51fa,yieldfromi\u53d6\u4ee3\u4e00\u4e2afor\u5faa\u73af.\u5e76\u4e14\u8ba9\u4ee3\u7801\u8bfb\u8d77\u6765\u66f4\u6d41\u7545.\u53ef\u8fed\u4ee3\u7684\u5f52\u7ea6\u51fd\u6570\u6709\u4e9b\u51fd\u6570\u63a5\u53d7\u53ef\u8fed\u4ee3\u5bf9\u8c61,\u4f46\u4ec5\u8fd4\u56de\u5355\u4e2a\u7ed3\u679c,\u8fd9\u7c7b\u51fd\u6570\u53eb\u89c4\u7ea6\u51fd\u6570.\u6a21\u5757\u51fd\u6570\u8bf4\u660e\uff08\u5185\u7f6e\uff09sum(it,start=0)it\u4e2d\u6240\u6709\u5143\u7d20\u7684\u603b\u548c\uff0c\u5982\u679c\u63d0\u4f9b\u53ef\u9009\u7684start\uff0c\u4f1a\u628a\u5b83\u52a0\u4e0a\uff08\u8ba1\u7b97\u6d6e\u70b9\u6570\u7684\u52a0\u6cd5\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528math.fsum\u51fd\u6570\u63d0\u9ad8\u7cbe\u5ea6\uff09\uff08\u5185\u7f6e\uff09all(it)it\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u4e3a\u771f\u503c\u65f6\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse\uff1ball([])\u8fd4\u56deTrue\uff08\u5185\u7f6e\uff09any(it)\u53ea\u8981it\u4e2d\u6709\u5143\u7d20\u4e3a\u771f\u503c\u5c31\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse\uff1bany([])\u8fd4\u56deFalse\uff08\u5185\u7f6e\uff09max(it,[key=,][default=])\u8fd4\u56deit\u4e2d\u503c\u6700\u5927\u7684\u5143\u7d20\uff1b*key\u662f\u6392\u5e8f\u51fd\u6570\uff0c\u4e0esorted\u51fd\u6570\u4e2d\u7684\u4e00\u6837\uff1b\u5982\u679c\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u4e3a\u7a7a\uff0c\u8fd4\u56dedefaultfunctoolsreduce(func,it,[initial])\u628a\u524d\u4e24\u4e2a\u5143\u7d20\u4f20\u7ed9func\uff0c\u7136\u540e\u628a\u8ba1\u7b97\u7ed3\u679c\u548c\u7b2c\u4e09\u4e2a\u5143\u7d20\u4f20\u7ed9func\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u8fd4\u56de\u6700\u540e\u7684\u7ed3\u679c\uff1b\u5982\u679c\u63d0\u4f9b\u4e86initial\uff0c\u628a\u5b83\u5f53\u4f5c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4f20\u5165\u7b2c\u5341\u4e94\u7ae0:\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u548celse\u5757\u672c\u7ae0\u8ba8\u8bba\u7684\u662f\u5176\u4ed6\u8bed\u8a00\u4e0d\u5e38\u89c1\u7684\u6d41\u7a0b\u63a7\u5236\u7279\u6027,\u6b63\u56e0\u5982\u6b64,python\u65b0\u624b\u5f80\u5f80\u5ffd\u89c6\u6216\u6ca1\u6709\u5145\u5206\u4f7f\u7528\u8fd9\u4e9b\u7279\u6027.\u4e0b\u9762\u8ba8\u8bba\u7684\u7279\u6027\u6709:with\u8bed\u53e5\u548c\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668forwhiletry\u8bed\u53e5\u7684else\u5b50\u53e5with\u8bed\u53e5\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u4e34\u65f6\u7684\u4e0a\u4e0b\u6587,\u4ea4\u7ed9\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5bf9\u8c61\u63a7\u5236,\u5e76\u4e14\u8d1f\u8d23\u6e05\u7406\u4e0a\u4e0b\u6587.\u8fd9\u4e48\u505a\u80fd\u907f\u514d\u9519\u8bef\u5e76\u51cf\u5c11\u4ee3\u7801\u91cf,\u56e0\u6b64API\u66f4\u5b89\u5168,\u800c\u4e14\u66f4\u6613\u4e8e\u4f7f\u7528.\u9664\u4e86\u81ea\u52a8\u5173\u95ed\u6587\u4ef6\u4e4b\u5916,with\u5757\u8fd8\u6709\u5176\u4ed6\u5f88\u591a\u7528\u9014.else\u5b50\u53e5\u5148\u505a\u8fd9\u4e2a\uff0c\u9009\u62e9\u6027\u518d\u505a\u90a3\u4e2a\u7684\u4f5c\u7528.if\u8bed\u53e5\u4e4b\u5916\u7684else\u5757\u8fd9\u91cc\u7684else\u4e0d\u662f\u5728\u5728if\u8bed\u53e5\u4e2d\u4f7f\u7528\u7684,\u800c\u662f\u5728forwhiletry\u8bed\u53e5\u4e2d\u4f7f\u7528\u7684.Pythonforiinlst:ifi>10:breakelse:print(\"nonumbiggerthan10\")12345foriinlst:\u00a0\u00a0\u00a0\u00a0ifi>10:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0breakelse:\u00a0\u00a0\u00a0\u00a0print(\"nonumbiggerthan10\")else\u5b50\u53e5\u7684\u884c\u4e3a\u5982\u4e0b:for:\u4ec5\u5f53for\u5faa\u73af\u8fd0\u884c\u5b8c\u6bd5\u65f6\uff08\u5373for\u5faa\u73af\u6ca1\u6709\u88abbreak\u8bed\u53e5\u4e2d\u6b62\uff09\u624d\u8fd0\u884celse\u5757\u3002while:\u4ec5\u5f53while\u5faa\u73af\u56e0\u4e3a\u6761\u4ef6\u4e3a\u5047\u503c\u800c\u9000\u51fa\u65f6\uff08\u5373while\u5faa\u73af\u6ca1\u6709\u88abbreak\u8bed\u53e5\u4e2d\u6b62\uff09\u624d\u8fd0\u884celse\u5757\u3002try:\u4ec5\u5f53try\u5757\u4e2d\u6ca1\u6709\u5f02\u5e38\u629b\u51fa\u65f6\u624d\u8fd0\u884celse\u5757\u3002\u5728\u6240\u6709\u60c5\u51b5\u4e0b,\u5982\u679c\u5f02\u5e38\u6216\u8005return,break\u6216continue\u8bed\u53e5\u5bfc\u81f4\u63a7\u5236\u6743\u8df3\u5230\u4e86\u590d\u5408\u8bed\u53e5\u7684\u4f4f\u5757\u5916,else\u5b50\u53e5\u4e5f\u4f1a\u88ab\u8df3\u8fc7.\u8fd9\u4e00\u4e9b\u60c5\u51b5\u4e0b,\u4f7f\u7528else\u5b50\u53e5\u901a\u5e38\u8ba9\u4ee3\u7801\u66f4\u4fbf\u4e8e\u9605\u8bfb,\u800c\u4e14\u80fd\u7701\u53bb\u4e00\u4e9b\u9ebb\u70e6,\u4e0d\u7528\u8bbe\u7f6e\u63a7\u5236\u6807\u5fd7\u4f5c\u7528\u7684\u53d8\u91cf\u548c\u989d\u5916\u7684if\u5224\u65ad.\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u548cwith\u5757\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5bf9\u8c61\u7684\u76ee\u7684\u5c31\u662f\u7ba1\u7406with\u8bed\u53e5,with\u8bed\u53e5\u7684\u76ee\u7684\u662f\u7b80\u5316try/finally\u6a21\u5f0f.\u8fd9\u79cd\u6a21\u5f0f\u7528\u4e8e\u4fdd\u8bc1\u4e00\u6bb5\u4ee3\u7801\u8fd0\u884c\u5b8c\u6bd5\u540e\u6267\u884c\u67d0\u9879\u64cd\u4f5c,\u5373\u4fbf\u90a3\u6bb5\u4ee3\u7801\u7531\u4e8e\u5f02\u5e38,return\u6216\u8005sys.exit()\u8c03\u7528\u800c\u7ec8\u6b62,\u4e5f\u4f1a\u6267\u884c\u6267\u884c\u7684\u64cd\u4f5c.finally\u5b50\u53e5\u4e2d\u7684\u4ee3\u7801\u901a\u5e38\u7528\u4e8e\u91ca\u653e\u91cd\u8981\u7684\u8d44\u6e90,\u6216\u8005\u8fd8\u539f\u4e34\u65f6\u53d8\u66f4\u7684\u72b6\u6001.\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u534f\u8bae\u5305\u542b__enter__\u548c__exit__\u4e24\u4e2a\u65b9\u6cd5.with\u8bed\u53e5\u5f00\u59cb\u8fd0\u884c\u65f6,\u4f1a\u5728\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u4e0a\u8c03\u7528__enter__\u65b9\u6cd5,\u5f85with\u8bed\u53e5\u8fd0\u884c\u7ed3\u675f\u540e,\u518d\u8c03\u7528__exit__\u65b9\u6cd5,\u4ee5\u6b64\u626e\u6f14\u4e86finally\u5b50\u53e5\u7684\u89d2\u8272.with\u6700\u5e38\u89c1\u7684\u4f8b\u5b50\u5c31\u662f\u786e\u4fdd\u5173\u95ed\u6587\u4ef6\u5bf9\u8c61.\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u8c03\u7528__enter__\u6ca1\u6709\u53c2\u6570,\u800c\u8c03\u7528__exit__\u65f6,\u4f1a\u4f20\u51653\u4e2a\u53c2\u6570:exc_type:\u5f02\u5e38\u7c7b\uff08\u4f8b\u5982ZeroDivisionError\uff09exc_value:\u5f02\u5e38\u5b9e\u4f8b\u3002\u6709\u65f6\u4f1a\u6709\u53c2\u6570\u4f20\u7ed9\u5f02\u5e38\u6784\u9020\u65b9\u6cd5\uff0c\u4f8b\u5982\u9519\u8bef\u6d88\u606f\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528exc_value.args\u83b7\u53d6traceback:traceback\u5bf9\u8c61contextlib\u6a21\u5757\u4e2d\u7684\u5b9e\u7528\u5de5\u5177\u5728ptyhon\u7684\u6807\u51c6\u5e93\u4e2d,contextlib\u6a21\u5757\u4e2d\u8fd8\u6709\u4e00\u4e9b\u7c7b\u548c\u5176\u4ed6\u51fd\u6570\uff0c\u4f7f\u7528\u8303\u56f4\u66f4\u5e7f\u3002closing:\u5982\u679c\u5bf9\u8c61\u63d0\u4f9b\u4e86close()\u65b9\u6cd5\uff0c\u4f46\u6ca1\u6709\u5b9e\u73b0__enter__/__exit__\u534f\u8bae\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u6784\u5efa\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002suppress:\u6784\u5efa\u4e34\u65f6\u5ffd\u7565\u6307\u5b9a\u5f02\u5e38\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002@contextmanager:\u8fd9\u4e2a\u88c5\u9970\u5668\u628a\u7b80\u5355\u7684\u751f\u6210\u5668\u51fd\u6570\u53d8\u6210\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u521b\u5efa\u7c7b\u53bb\u5b9e\u73b0\u7ba1\u7406\u5668\u534f\u8bae\u4e86\u3002ContextDecorator:\u8fd9\u662f\u4e2a\u57fa\u7c7b\uff0c\u7528\u4e8e\u5b9a\u4e49\u57fa\u4e8e\u7c7b\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002\u8fd9\u79cd\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u4e5f\u80fd\u7528\u4e8e\u88c5\u9970\u51fd\u6570\uff0c\u5728\u53d7\u7ba1\u7406\u7684\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\u6574\u4e2a\u51fd\u6570\u3002ExitStack:\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u80fd\u8fdb\u5165\u591a\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002with\u5757\u7ed3\u675f\u65f6\uff0cExitStack\u6309\u7167\u540e\u8fdb\u5148\u51fa\u7684\u987a\u5e8f\u8c03\u7528\u6808\u4e2d\u5404\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684__exit__\u65b9\u6cd5\u3002\u5982\u679c\u4e8b\u5148\u4e0d\u77e5\u9053with\u5757\u8981\u8fdb\u5165\u591a\u5c11\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u3002\u4f8b\u5982\uff0c\u540c\u65f6\u6253\u5f00\u4efb\u610f\u4e00\u4e2a\u6587\u4ef6\u5217\u8868\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u3002\u663e\u7136\uff0c\u5728\u8fd9\u4e9b\u5b9e\u7528\u5de5\u5177\u4e2d\uff0c\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u662f@contextmanager\u88c5\u9970\u5668\uff0c\u56e0\u6b64\u8981\u683c\u5916\u7559\u5fc3\u3002\u8fd9\u4e2a\u88c5\u9970\u5668\u4e5f\u6709\u8ff7\u60d1\u4eba\u7684\u4e00\u9762\uff0c\u56e0\u4e3a\u5b83\u4e0e\u8fed\u4ee3\u65e0\u5173\uff0c\u5374\u8981\u4f7f\u7528yield\u8bed\u53e5\u3002\u4f7f\u7528@contextmanager@contextmanager\u88c5\u9970\u5668\u80fd\u51cf\u5c11\u521b\u5efa\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684\u6837\u677f\u4ee3\u7801\u91cf,\u56e0\u4e3a\u4e0d\u7528\u5b9a\u4e49__enter__\u548c__exit__\u65b9\u6cd5,\u53ea\u9700\u8981\u5b9e\u73b0\u4e00\u4e2ayield\u8bed\u53e5\u7684\u751f\u6210\u5668.Pythonimportsysimportcontextlib@contextlib.contextmanagerdeflooking_glass():original_write=sys.stdout.writedefreverse_write(text):original_write(text[::-1])sys.stdout.write=reverse_writeyield'JABBERWOCKY'sys.stdout.write=original_writewithlooking_glass()asf:print(f)#YKCOWREBBAJprint(\"ABCD\")#DCBA123456789101112131415importsysimportcontextlib@contextlib.contextmanagerdeflooking_glass():\u00a0\u00a0\u00a0\u00a0\u00a0original_write=sys.stdout.write\u00a0\u00a0\u00a0\u00a0defreverse_write(text):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0original_write(text[::-1])\u00a0\u00a0\u00a0\u00a0sys.stdout.write=reverse_write\u00a0\u00a0\u00a0\u00a0yield'JABBERWOCKY'\u00a0\u00a0\u00a0\u00a0sys.stdout.write=original_write\u00a0withlooking_glass()asf:\u00a0\u00a0\u00a0\u00a0print(f)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#YKCOWREBBAJ\u00a0\u00a0\u00a0\u00a0print(\"ABCD\")\u00a0\u00a0#DCBAyield\u8bed\u53e5\u8d77\u5230\u4e86\u5206\u5272\u7684\u4f5c\u7528,yield\u8bed\u53e5\u524d\u9762\u7684\u6240\u6709\u4ee3\u7801\u5728with\u5757\u5f00\u59cb\u65f6\uff08\u5373\u89e3\u91ca\u5668\u8c03\u7528__enter__\u65b9\u6cd5\u65f6\uff09\u6267\u884c\uff0cyield\u8bed\u53e5\u540e\u9762\u7684\u4ee3\u7801\u5728with\u5757\u7ed3\u675f\u65f6\uff08\u5373\u8c03\u7528__exit__\u65b9\u6cd5\u65f6\uff09\u6267\u884c.\u7b2c\u5341\u516d\u7ae0:\u534f\u7a0b\u4e3a\u4e86\u7406\u89e3\u534f\u7a0b\u7684\u6982\u5ff5,\u5148\u4eceyield\u6765\u8bf4.yielditem\u4f1a\u4ea7\u51fa\u4e00\u4e2a\u503c,\u63d0\u4f9b\u7ed9next(\u2026)\u8c03\u7528\u65b9;\u6b64\u5916\u8fd8\u4f1a\u505a\u51fa\u8ba9\u6b65,\u6682\u505c\u6267\u884c\u751f\u6210\u5668,\u8ba9\u8c03\u7528\u65b9\u7ee7\u7eed\u5de5\u4f5c,\u76f4\u5230\u9700\u8981\u4f7f\u7528\u53e6\u4e00\u4e2a\u503c\u65f6\u518d\u8c03\u7528next(\u2026)\u4ece\u6682\u505c\u7684\u5730\u65b9\u7ee7\u7eed\u6267\u884c.\u4ece\u53e5\u5b50\u8bed\u6cd5\u4e0a\u770b,\u534f\u7a0b\u4e0e\u751f\u6210\u5668\u7c7b\u4f3c,\u90fd\u662f\u901a\u8fc7yield\u5173\u952e\u5b57\u7684\u51fd\u6570.\u53ef\u662f,\u5728\u534f\u7a0b\u4e2d,yield\u901a\u5e38\u51fa\u73b0\u5728\u8868\u8fbe\u5f0f\u7684\u53f3\u8fb9(datum=yield),\u53ef\u4ee5\u4ea7\u51fa\u503c,\u4e5f\u53ef\u4ee5\u4e0d\u4ea7\u51fa(\u5982\u679cyield\u540e\u9762\u6ca1\u6709\u8868\u8fbe\u5f0f,\u90a3\u4e48\u4f1a\u4ea7\u51faNone).\u534f\u7a0b\u53ef\u80fd\u4f1a\u4ece\u8c03\u7528\u65b9\u63a5\u6536\u6570\u636e,\u4e0d\u8fc7\u8c03\u7528\u65b9\u628a\u6570\u636e\u63d0\u4f9b\u7ed9\u534f\u7a0b\u4f7f\u7528\u7684\u662f.send(datum)\u65b9\u6cd5.\u800c\u4e0d\u662fnext(\u2026).\u901a\u5e38,\u8c03\u7528\u65b9\u4f1a\u628a\u503c\u63a8\u9001\u7ed9\u534f\u7a0b.\u751f\u6210\u5668\u8c03\u7528\u65b9\u662f\u4e00\u76f4\u7d22\u8981\u6570\u636e,\u800c\u534f\u7a0b\u8fd9\u662f\u8c03\u7528\u65b9\u53ef\u4ee5\u60f3\u5b83\u4f20\u5165\u6570\u636e,\u534f\u7a0b\u4e5f\u4e0d\u4e00\u5b9a\u8981\u4ea7\u51fa\u6570\u636e.\u4e0d\u7ba1\u6570\u636e\u5982\u4f55\u6d41\u52a8,yield\u90fd\u662f\u4e00\u79cd\u6d41\u7a0b\u63a7\u5236\u5de5\u5177,\u4f7f\u7528\u5b83\u53ef\u4ee5\u5b9e\u73b0\u5199\u4f5c\u5f0f\u591a\u4efb\u52a1:\u534f\u7a0b\u53ef\u4ee5\u628a\u63a7\u5236\u5668\u8ba9\u6b65\u7ed9\u4e2d\u5fc3\u8c03\u5ea6\u7a0b\u5e8f,\u4ece\u800c\u6fc0\u6d3b\u5176\u4ed6\u7684\u534f\u7a0b.\u751f\u6210\u5668\u5982\u4f55\u8fdb\u5316\u6210\u534f\u7a0b\u534f\u7a0b\u7684\u5e95\u5c42\u6846\u67b6\u5b9e\u73b0\u540e,\u751f\u6210\u5668API\u4e2d\u589e\u52a0\u4e86.send(value)\u65b9\u6cd5.\u751f\u6210\u5668\u7684\u8c03\u7528\u65b9\u53ef\u4ee5\u4f7f\u7528.send(\u2026)\u6765\u53d1\u9001\u6570\u636e,\u53d1\u9001\u7684\u6570\u636e\u4f1a\u53d8\u6210\u751f\u6210\u5668\u51fd\u6570\u4e2dyield\u8868\u8fbe\u5f0f\u7684\u503c.\u56e0\u6b64,\u751f\u6210\u5668\u53ef\u4ee5\u4f5c\u4e3a\u534f\u7a0b\u4f7f\u7528.\u9664\u4e86.send(\u2026)\u65b9\u6cd5,\u8fd8\u6dfb\u52a0\u4e86.throw(\u2026)\u548c.close()\u65b9\u6cd5,\u7528\u6765\u8ba9\u8c03\u7528\u65b9\u629b\u51fa\u5f02\u5e38\u548c\u7ec8\u6b62\u751f\u6210\u5668.\u7528\u4f5c\u534f\u7a0b\u7684\u751f\u6210\u5668\u7684\u57fa\u672c\u884c\u4e3aPython>>>defsimple_coroutine():...print('->coroutinestarted')...x=yield...print('->coroutinereceived:',x)...>>>my_coro=simple_coroutine()>>>my_coro<generatorobjectsimple_coroutineat0x100c2be10>>>>next(my_coro)->coroutinestarted>>>my_coro.send(42)->coroutinereceived:42Traceback(mostrecentcalllast):...StopIteration123456789101112131415>>>defsimple_coroutine():...\u00a0\u00a0\u00a0\u00a0print('->coroutinestarted')...\u00a0\u00a0\u00a0\u00a0x=yield...\u00a0\u00a0\u00a0\u00a0print('->coroutinereceived:',x)...>>>my_coro=simple_coroutine()>>>my_coro<generatorobjectsimple_coroutineat0x100c2be10>>>>next(my_coro)->coroutinestarted>>>my_coro.send(42)->coroutinereceived:42Traceback(mostrecentcalllast):...StopIteration\u5728yield\u8868\u8fbe\u5f0f\u4e2d,\u5982\u679c\u534f\u7a0b\u53ea\u9700\u4ece\u8c03\u7528\u90a3\u63a5\u53d7\u6570\u636e,\u90a3\u4e48\u4ea7\u51fa\u7684\u503c\u662fNone.\u4e0e\u521b\u5efa\u751f\u6210\u5668\u7684\u65b9\u5f0f\u4e00\u6837,\u8c03\u7528\u51fd\u6570\u5f97\u5230\u751f\u6210\u5668\u5bf9\u8c61.\u534f\u7a0b\u90fd\u8981\u5148\u8c03\u7528next(\u2026)\u51fd\u6570,\u56e0\u4e3a\u751f\u6210\u5668\u8fd8\u6ca1\u542f\u52a8,\u6ca1\u5728yield\u51fa\u6682\u5b9a,\u6240\u4ee5\u4e00\u5f00\u59cb\u65e0\u6cd5\u53d1\u9001\u6570\u636e.\u5982\u679c\u63a7\u5236\u5668\u6d41\u52a8\u5230\u534f\u7a0b\u5b9a\u4e49\u4f53\u672b\u5c3e,\u4f1a\u50cf\u8fed\u4ee3\u5668\u4e00\u6837\u629b\u51faStopIteration\u5f02\u5e38.\u4f7f\u7528\u534f\u7a0b\u7684\u597d\u5904\u662f\u4e0d\u7528\u52a0\u9501,\u56e0\u4e3a\u6240\u6709\u534f\u7a0b\u53ea\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u8fd0\u884c,\u4ed6\u4eec\u662f\u975e\u62a2\u5360\u5f0f\u7684.\u534f\u7a0b\u4e5f\u6709\u4e00\u4e9b\u72b6\u6001,\u53ef\u4ee5\u8c03\u7528inspect.getgeneratorstate(\u2026)\u6765\u83b7\u5f97,\u534f\u7a0b\u90fd\u662f\u8fd94\u4e2a\u72b6\u6001\u4e2d\u7684\u4e00\u79cd:\u2018GEN_CREATED\u2019\u7b49\u5f85\u5f00\u59cb\u6267\u884c\u3002\u2018GEN_RUNNING\u2019\u89e3\u91ca\u5668\u6b63\u5728\u6267\u884c\u3002\u2018GEN_SUSPENDED\u2019\u5728yield\u8868\u8fbe\u5f0f\u5904\u6682\u505c\u3002\u2018GEN_CLOSED\u2019\u6267\u884c\u7ed3\u675f\u3002\u53ea\u6709\u5728\u591a\u7ebf\u7a0b\u5e94\u7528\u4e2d\u624d\u80fd\u770b\u5230\u8fd9\u4e2a\u72b6\u6001\u3002\u6b64\u5916\uff0c\u751f\u6210\u5668\u5bf9\u8c61\u5728\u81ea\u5df1\u8eab\u4e0a\u8c03\u7528getgeneratorstate\u51fd\u6570\u4e5f\u884c\uff0c\u4e0d\u8fc7\u8fd9\u6837\u505a\u6ca1\u4ec0\u4e48\u7528\u3002\u4e3a\u4e86\u66f4\u597d\u7406\u89e3\u7ee7\u627f\u7684\u884c\u4e3a,\u6765\u770b\u770b\u4ea7\u751f\u4e24\u4e2a\u503c\u7684\u534f\u7a0b:Python>>>frominspectimportgetgeneratorstate>>>defsimple_coro2(a):...print('->Started:a=',a)...b=yielda...print('->Received:b=',b)...c=yielda+b...print('->Received:c=',c)...>>>my_coro2=simple_coro2(14)>>>getgeneratorstate(my_coro2)#\u534f\u7a0b\u5904\u4e8e\u672a\u542f\u52a8\u7684\u72b6\u6001'GEN_CREATED'>>>next(my_coro2)#\u5411\u524d\u6267\u884c\u5230yield\u8868\u8fbe\u5f0f,\u4ea7\u51fa\u503ca,\u6682\u505c\u5e76\u7b49\u5f85b\u8d4b\u503c->Started:a=1414>>>getgeneratorstate(my_coro2)#\u534f\u7a0b\u5904\u4e8e\u6682\u505c\u72b6\u6001'GEN_SUSPENDED'>>>my_coro2.send(28)#\u6570\u5b5728\u53d1\u7ed9\u534f\u7a0b,yield\u8868\u8fbe\u5f0f\u4e2db\u5f97\u523028,\u534f\u7a0b\u5411\u524d\u6267\u884c,\u4ea7\u51faa+b\u503c->Received:b=2842>>>my_coro2.send(99)#\u540c\u7406,c\u5f97\u523099,\u4f46\u662f\u7531\u4e8e\u534f\u7a0b\u7ec8\u6b62,\u5bfc\u81f4\u751f\u6210\u5668\u5bf9\u8c61\u629b\u51faStopIteration\u5f02\u5e38->Received:c=99Traceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>StopIteration>>>getgeneratorstate(my_coro2)#\u534f\u7a0b\u5904\u4e8e\u7ec8\u6b62\u72b6\u6001'GEN_CLOSED'1234567891011121314151617181920212223242526>>>frominspectimportgetgeneratorstate>>>defsimple_coro2(a):...\u00a0\u00a0\u00a0\u00a0print('->Started:a=',a)...\u00a0\u00a0\u00a0\u00a0b=yielda...\u00a0\u00a0\u00a0\u00a0print('->Received:b=',b)...\u00a0\u00a0\u00a0\u00a0c=yielda+b...\u00a0\u00a0\u00a0\u00a0print('->Received:c=',c)...>>>my_coro2=simple_coro2(14)>>>getgeneratorstate(my_coro2)#\u534f\u7a0b\u5904\u4e8e\u672a\u542f\u52a8\u7684\u72b6\u6001'GEN_CREATED'>>>next(my_coro2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5411\u524d\u6267\u884c\u5230yield\u8868\u8fbe\u5f0f,\u4ea7\u51fa\u503ca,\u6682\u505c\u5e76\u7b49\u5f85b\u8d4b\u503c->Started:a=1414>>>getgeneratorstate(my_coro2)#\u534f\u7a0b\u5904\u4e8e\u6682\u505c\u72b6\u6001'GEN_SUSPENDED'>>>my_coro2.send(28)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6570\u5b5728\u53d1\u7ed9\u534f\u7a0b,yield\u8868\u8fbe\u5f0f\u4e2db\u5f97\u523028,\u534f\u7a0b\u5411\u524d\u6267\u884c,\u4ea7\u51faa+b\u503c->Received:b=2842>>>my_coro2.send(99)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u540c\u7406,c\u5f97\u523099,\u4f46\u662f\u7531\u4e8e\u534f\u7a0b\u7ec8\u6b62,\u5bfc\u81f4\u751f\u6210\u5668\u5bf9\u8c61\u629b\u51faStopIteration\u5f02\u5e38->Received:c=99Traceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>StopIteration>>>getgeneratorstate(my_coro2)#\u534f\u7a0b\u5904\u4e8e\u7ec8\u6b62\u72b6\u6001'GEN_CLOSED'\u5173\u952e\u7684\u4e00\u70b9\u662f,\u534f\u7a0b\u5728yield\u5173\u952e\u5b57\u6240\u5728\u7684\u4f4d\u7f6e\u6682\u505c\u6267\u884c.\u5bf9\u4e8eb=yielda\u8fd9\u884c\u4ee3\u7801\u6765\u8bf4,\u7b49\u5230\u5ba2\u6237\u7aef\u4ee3\u7801\u518d\u6fc0\u6d3b\u534f\u7a0b\u65f6\u624d\u4f1a\u8bbe\u5b9ab\u7684\u503c.\u8fd9\u79cd\u65b9\u5f0f\u8981\u82b1\u70b9\u65f6\u95f4\u624d\u80fd\u4e60\u60ef,\u7406\u89e3\u4e86\u8fd9\u4e2a,\u624d\u80fd\u5f04\u61c2\u5f02\u6b65\u7f16\u7a0b\u4e2dyield\u7684\u4f5c\u7528.\u5bf9\u4e8e\u5b9e\u4f8b\u7684\u4ee3\u7801\u4e2d\u51fd\u6570simple_coro2\u7684\u6267\u884c\u8fc7\u7a0b\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5:\u793a\u4f8b\uff1a\u4f7f\u7528\u534f\u7a0b\u8ba1\u7b97\u79fb\u52a8\u5e73\u5747\u503cPythondefaverager():total=0.0count=0average=NonewhileTrue:term=yieldaveragetotal+=termcount+=1average=total/count123456789defaverager():\u00a0\u00a0\u00a0\u00a0total=0.0\u00a0\u00a0\u00a0\u00a0count=0\u00a0\u00a0\u00a0\u00a0average=None\u00a0\u00a0\u00a0\u00a0whileTrue:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0term=yieldaverage\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0total+=term\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0count+=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0average=total/count\u8fd9\u662f\u4e00\u4e2a\u52a8\u6001\u8ba1\u7b97\u5e73\u5747\u503c\u7684\u534f\u7a0b\u4ee3\u7801,\u8fd9\u4e2a\u65e0\u9650\u5faa\u73af\u8868\u660e,\u5b83\u4f1a\u4e00\u76f4\u63a5\u6536\u503c\u7136\u540e\u751f\u6210\u7ed3\u679c.\u53ea\u6709\u5f53\u8c03\u7528\u65b9\u5728\u534f\u7a0b\u4e0a\u8c03\u7528.close()\u65b9\u6cd5,\u6216\u8005\u6ca1\u6709\u8be5\u534f\u7a0b\u7684\u5f15\u7528\u65f6,\u534f\u7a0b\u624d\u4f1a\u7ec8\u6b62.\u534f\u7a0b\u7684\u597d\u5904\u662f,\u65e0\u9700\u4f7f\u7528\u5b9e\u4f8b\u5c5e\u6027\u6216\u8005\u95ed\u5305,\u5728\u591a\u6b21\u8c03\u7528\u4e4b\u95f4\u90fd\u80fd\u4fdd\u6301\u4e0a\u4e0b\u6587.\u9884\u6fc0\u534f\u7a0b\u7684\u88c5\u9970\u5668\u5982\u679c\u6ca1\u6709\u6267\u884cnext(\u2026),\u534f\u7a0b\u6ca1\u4ec0\u4e48\u7528.\u4e3a\u4e86\u7b80\u5316\u534f\u7a0b\u7684\u7528\u6cd5,\u6709\u65f6\u4f1a\u4f7f\u7528\u4e00\u4e2a\u9884\u6fc0\u88c5\u9970\u5668.Pythonfromfunctoolsimportwrapsdefcoroutine(func):\"\"\"\u88c5\u9970\u5668\uff1a\u5411\u524d\u6267\u884c\u5230\u7b2c\u4e00\u4e2a`yield`\u8868\u8fbe\u5f0f\uff0c\u9884\u6fc0`func`\"\"\"@wraps(func)defprimer(*args,**kwargs):#\u8c03\u7528primer\u51fd\u6570\u65f6\uff0c\u8fd4\u56de\u9884\u6fc0\u540e\u7684\u751f\u6210\u5668gen=func(*args,**kwargs)#\u8c03\u7528\u88ab\u88c5\u9970\u7684\u51fd\u6570\uff0c\u83b7\u53d6\u751f\u6210\u5668\u5bf9\u8c61\u3002next(gen)#\u9884\u6fc0\u751f\u6210\u5668returngen#\u8fd4\u56de\u751f\u6210\u5668returnprimer123456789fromfunctoolsimportwrapsdefcoroutine(func):\u00a0\u00a0\u00a0\u00a0\"\"\"\u88c5\u9970\u5668\uff1a\u5411\u524d\u6267\u884c\u5230\u7b2c\u4e00\u4e2a`yield`\u8868\u8fbe\u5f0f\uff0c\u9884\u6fc0`func`\"\"\"\u00a0\u00a0\u00a0\u00a0@wraps(func)\u00a0\u00a0\u00a0\u00a0defprimer(*args,**kwargs):#\u8c03\u7528primer\u51fd\u6570\u65f6\uff0c\u8fd4\u56de\u9884\u6fc0\u540e\u7684\u751f\u6210\u5668\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0gen=func(*args,**kwargs)#\u8c03\u7528\u88ab\u88c5\u9970\u7684\u51fd\u6570\uff0c\u83b7\u53d6\u751f\u6210\u5668\u5bf9\u8c61\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0next(gen)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u9884\u6fc0\u751f\u6210\u5668\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returngen\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u751f\u6210\u5668\u00a0\u00a0\u00a0\u00a0returnprimer\u7ec8\u6b62\u534f\u7a0b\u548c\u5f02\u5e38\u5904\u7406\u534f\u7a0b\u4e2d\u672a\u5904\u7406\u7684\u5f02\u5e38\u4f1a\u5411\u4e0a\u5192\u6ce1,\u4f20\u7ed9next()\u51fd\u6570\u6216\u8005send()\u7684\u8c03\u7528\u65b9.\u5982\u679c\u8fd9\u4e2a\u5f02\u5e38\u6ca1\u6709\u5904\u7406,\u4f1a\u5bfc\u81f4\u534f\u7a0b\u7ec8\u6b62.Python>>>coro_avg.send(40)40.0>>>coro_avg.send(50)45.0>>>coro_avg.send('spam')#\u4f20\u5165\u4f1a\u4ea7\u751f\u5f02\u5e38\u7684\u503cTraceback(mostrecentcalllast):...TypeError:unsupportedoperandtype(s)for+=:'float'and'str'>>>coro_avg.send(60)Traceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>StopIteration123456789101112>>>coro_avg.send(40)40.0>>>coro_avg.send(50)45.0>>>coro_avg.send('spam')#\u4f20\u5165\u4f1a\u4ea7\u751f\u5f02\u5e38\u7684\u503cTraceback(mostrecentcalllast):...TypeError:unsupportedoperandtype(s)for+=:'float'and'str'>>>coro_avg.send(60)Traceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>StopIteration\u8fd9\u8981\u6c42\u5728\u534f\u7a0b\u5185\u90e8\u8981\u5904\u7406\u8fd9\u4e9b\u5f02\u5e38,\u53e6\u5916,\u5ba2\u6237\u7aef\u4ee3\u7801\u4e5f\u53ef\u4ee5\u663e\u793a\u7684\u53d1\u9001\u5f02\u5e38\u7ed9\u534f\u7a0b,\u65b9\u6cd5\u662fthrow\u548cclose:Pythoncoro_avg.throw(ZeroDivisionError)1coro_avg.throw(ZeroDivisionError)\u534f\u7a0b\u5185\u90e8\u5982\u679c\u4e0d\u80fd\u5904\u7406\u8fd9\u4e2a\u5f02\u5e38,\u5c31\u4f1a\u5bfc\u81f4\u534f\u7a0b\u7ec8\u6b62.\u800cclose\u662f\u81f4\u4f7f\u5728\u6682\u505c\u7684yield\u8868\u8fbe\u5f0f\u5904\u629b\u51faGeneratorExit\u5f02\u5e38.\u534f\u7a0b\u5185\u90e8\u5f53\u7136\u5141\u8bb8\u5904\u7406\u8fd9\u4e2a\u5f02\u5e38,\u4f46\u6536\u5230\u8fd9\u4e2a\u5f02\u5e38\u65f6\u4e00\u5b9a\u4e0d\u80fd\u4ea7\u51fa\u503c,\u4e0d\u7136\u89e3\u91ca\u5668\u4f1a\u629b\u51faRuntimeError\u5f02\u5e38.\u8ba9\u534f\u7a0b\u8fd4\u56de\u503cPythondefaverager():total=0.0count=0average=NonewhileTrue:term=yieldiftermisNone:breaktotal+=termcount+=1average=total/countreturn(count,average)coro_avg=averager()next(coro_avg)coro_avg.send(10)coro_avg.send(30)try:coro_avg.send(None)#\u53d1\u9001None\u8ba9\u534f\u7a0b\u7ec8\u6b62exceptStopIterationasexc:result=exc.value123456789101112131415161718192021defaverager():\u00a0\u00a0\u00a0\u00a0total=0.0\u00a0\u00a0\u00a0\u00a0count=0\u00a0\u00a0\u00a0\u00a0average=None\u00a0\u00a0\u00a0\u00a0whileTrue:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0term=yield\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iftermisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0total+=term\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0count+=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0average=total/count\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return(count,average)\u00a0coro_avg=averager()next(coro_avg)coro_avg.send(10)coro_avg.send(30)try:\u00a0\u00a0\u00a0\u00a0coro_avg.send(None)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u53d1\u9001None\u8ba9\u534f\u7a0b\u7ec8\u6b62exceptStopIterationasexc:\u00a0\u00a0\u00a0\u00a0result=exc.value\u4e3a\u4e86\u8fd4\u56de\u503c,\u534f\u7a0b\u5fc5\u987b\u6b63\u5e38\u7ec8\u6b62,\u800c\u6b63\u5e38\u7ec8\u6b62\u7684\u7684\u534f\u7a0b\u4f1a\u629b\u51faStopIteration\u5f02\u5e38,\u56e0\u6b64\u9700\u8981\u8c03\u7528\u65b9\u5904\u7406\u8fd9\u4e2a\u5f02\u5e38.\u4f7f\u7528yieldfromyieldfrom\u662f\u5168\u65b0\u7684\u8bed\u6cd5\u7ed3\u6784.\u5b83\u7684\u4f5c\u7528\u6bd4yield\u591a\u5f88\u591a.Python>>>defgen():...forcin'AB':...yieldc...foriinrange(1,3):...yieldi...>>>list(gen())['A','B',1,2]12345678>>>defgen():...\u00a0\u00a0\u00a0\u00a0forcin'AB':...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldc...\u00a0\u00a0\u00a0\u00a0foriinrange(1,3):...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldi...>>>list(gen())['A','B',1,2]\u53ef\u4ee5\u6539\u5199\u6210:Python>>>defgen():...yieldfrom'AB'...yieldfromrange(1,3)...>>>list(gen())['A','B',1,2]123456>>>defgen():...\u00a0\u00a0\u00a0\u00a0yieldfrom'AB'...\u00a0\u00a0\u00a0\u00a0yieldfromrange(1,3)...>>>list(gen())['A','B',1,2]\u5728\u751f\u6210\u5668gen\u4e2d\u4f7f\u7528yieldformsubgen()\u65f6,subgen\u4f1a\u5f97\u5230\u63a7\u5236\u6743,\u628a\u4ea7\u51fa\u7684\u503c\u4f20\u7ed9gen\u7684\u8c03\u7528\u65b9,\u65e2\u8c03\u7528\u65b9\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528subgen.\u800c\u6b64\u65f6,gen\u4f1a\u963b\u585e,\u7b49\u5f85subgen\u7ec8\u6b62.yieldfromx\u8868\u8fbe\u5f0f\u5bf9x\u5bf9\u8c61\u6240\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u662f,\u8c03\u7528iter(x)\u83b7\u5f97\u8fed\u4ee3\u5668.\u56e0\u6b64,x\u5bf9\u8c61\u53ef\u4ee5\u662f\u4efb\u4f55\u53ef\u8fed\u4ee3\u5bf9\u8c61.\u8fd9\u4e2a\u8bed\u4e49\u8fc7\u4e8e\u590d\u6742,\u6765\u770b\u770b\u4f5c\u8005GregEwing\u7684\u89e3\u91ca:\u201c\u628a\u8fed\u4ee3\u5668\u5f53\u4f5c\u751f\u6210\u5668\u4f7f\u7528\uff0c\u76f8\u5f53\u4e8e\u628a\u5b50\u751f\u6210\u5668\u7684\u5b9a\u4e49\u4f53\u5185\u8054\u5728yieldfrom\u8868\u8fbe\u5f0f\u4e2d\u3002\u6b64\u5916\uff0c\u5b50\u751f\u6210\u5668\u53ef\u4ee5\u6267\u884creturn\u8bed\u53e5\uff0c\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u800c\u8fd4\u56de\u7684\u503c\u4f1a\u6210\u4e3ayieldfrom\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u201d\u5b50\u751f\u6210\u5668\u662f\u4eceyieldfrom\u4e2d\u83b7\u5f97\u7684\u751f\u6210\u5668.\u800c\u540e,\u5982\u679c\u8c03\u7528\u65b9\u4f7f\u7528send()\u65b9\u6cd5,\u5176\u5b9e\u4e5f\u662f\u76f4\u63a5\u4f20\u7ed9\u5b50\u751f\u6210\u5668.\u5982\u679c\u53d1\u9001\u7684\u662fNone,\u90a3\u4e48\u4f1a\u8c03\u7528\u5b50\u751f\u6210\u5668\u7684__next__()\u65b9\u6cd5.\u5982\u679c\u4e0d\u662fNone,\u90a3\u4e48\u4f1a\u8c03\u7528\u5b50\u751f\u6210\u5668\u7684send()\u65b9\u6cd5.\u5f53\u5b50\u751f\u6210\u5668\u629b\u51faStopIteration\u5f02\u5e38,\u90a3\u4e48\u59d4\u6d3e\u751f\u6210\u5668\u6062\u590d\u8fd0\u884c.\u4efb\u4f55\u5176\u4ed6\u5f02\u5e38\u90fd\u4f1a\u5411\u4e0a\u5192\u6ce1,\u4f20\u7ed9\u59d4\u6d3e\u751f\u6210\u5668.\u751f\u6210\u5668\u5728returnexpr\u8868\u8fbe\u5f0f\u4e2d\u4f1a\u89e6\u53d1StopIteration\u5f02\u5e38.\u7b2c\u5341\u4e03\u7ae0:\u4f7f\u7528\u671f\u7269\u5904\u7406\u5e76\u53d1\u201c\u671f\u7269\u201d\u662f\u4ec0\u4e48\u6982\u5ff5\u5462?\u671f\u7269\u6307\u4e00\u79cd\u5bf9\u8c61,\u8868\u793a\u5f02\u6b65\u6267\u884c\u7684\u64cd\u4f5c.\u8fd9\u4e2a\u6982\u5ff5\u662fconcurrent.futures\u6a21\u5757\u548casyncio\u5305\u7684\u57fa\u7840.\u793a\u4f8b\uff1a\u7f51\u7edc\u4e0b\u8f7d\u7684\u4e09\u79cd\u98ce\u683c\u4e3a\u4e86\u9ad8\u6548\u5904\u7406\u7f51\u7edcio,\u9700\u8981\u4f7f\u7528\u5e76\u53d1,\u56e0\u4e3a\u7f51\u7edc\u6709\u5f88\u9ad8\u7684\u5ef6\u8fdf,\u6240\u4ee5\u4e3a\u4e86\u4e0d\u6d6a\u8d39CPU\u5468\u671f\u53bb\u7b49\u5f85.\u4ee5\u4e00\u4e2a\u4e0b\u8f7d\u7f51\u7edc20\u4e2a\u56fe\u7247\u7684\u7a0b\u5e8f\u770b,\u4e32\u884c\u4e0b\u8f7d\u7684\u8017\u65f67.18s.\u591a\u7ebf\u7a0b\u7684\u4e0b\u8f7d\u8017\u65f61.40s,asyncio\u7684\u8017\u65f61.35s.\u4e24\u4e2a\u5e76\u53d1\u4e0b\u8f7d\u7684\u811a\u672c\u4e4b\u95f4\u5dee\u5f02\u4e0d\u5927,\u5f53\u5bf9\u4e8e\u4e32\u884c\u7684\u6765\u8bf4,\u5feb\u4e86\u5f88\u591a.\u963b\u585e\u578bI/O\u548cGILCPython\u89e3\u91ca\u5668\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684,\u56e0\u6b64\u6709\u5168\u5c40\u89e3\u91ca\u9501(GIL),\u4e00\u6b21\u53ea\u5141\u8bb8\u4f7f\u7528\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884cpython\u5b57\u8282\u7801,\u6240\u4ee5\u4e00\u4e2apython\u8fdb\u7a0b\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\u591a\u4e2aCPU\u6838\u5fc3.python\u7a0b\u5e8f\u5458\u7f16\u5199\u4ee3\u7801\u65f6\u65e0\u6cd5\u63a7\u5236GIL,\u7136\u800c,\u5728\u6807\u51c6\u5e93\u4e2d\u6240\u6709\u6267\u884c\u963b\u585e\u578bI/O\u64cd\u4f5c\u7684\u51fd\u6570,\u5728\u767b\u53f0\u64cd\u4f5c\u7cfb\u7edf\u8fd4\u56de\u7ed3\u679c\u65f6\u90fd\u4f1a\u91ca\u653eGIL.\u8fd9\u610f\u5473\u7740IO\u5bc6\u96c6\u578bpython\u7a0b\u5e8f\u80fd\u4ece\u4e2d\u53d7\u76ca.\u4f7f\u7528concurrent.futures\u6a21\u5757\u542f\u52a8\u8fdb\u7a0b\u4e00\u4e2apython\u8fdb\u7a0b\u53ea\u6709\u4e00\u4e2aGIL.\u591a\u4e2apython\u8fdb\u7a0b\u5c31\u80fd\u7ed5\u5f00GIL,\u56e0\u6b64\u8fd9\u79cd\u65b9\u6cd5\u5c31\u80fd\u5229\u7528\u6240\u6709\u7684CPU\u6838\u5fc3.concurrent.futures\u6a21\u5757\u5c31\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u5e76\u884c\u8ba1\u7b97,\u56e0\u4e3a\u5b83\u4f7f\u7528ProcessPoolExecutor\u628a\u5de5\u4f5c\u4ea4\u4e2a\u591a\u4e2apython\u8fdb\u7a0b\u5904\u7406.ProcessPoolExecutor\u548cThreadPoolExecutor\u7c7b\u90fd\u5b9e\u73b0\u4e86\u901a\u7528\u7684Executor\u63a5\u53e3,\u56e0\u6b64\u4f7f\u7528concurrent.futures\u80fd\u5f88\u8f7b\u677e\u628a\u57fa\u4e8e\u7ebf\u7a0b\u7684\u65b9\u6848\u8f6c\u6210\u57fa\u4e8e\u8fdb\u7a0b\u7684\u65b9\u6848.Pythondefdownload_many(cc_list):workers=min(MAX_WORKERS,len(cc_list))withfutures.ThreadPoolExecutor(workers)asexecutor:res=executor.map(download_one,sorted(cc_list))1234defdownload_many(cc_list):\u00a0\u00a0\u00a0\u00a0workers=min(MAX_WORKERS,len(cc_list))\u00a0\u00a0\u00a0\u00a0withfutures.ThreadPoolExecutor(workers)asexecutor:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0res=executor.map(download_one,sorted(cc_list))\u6539\u6210:Pythondefdownload_many(cc_list):withfutures.ProcessPoolExecutor()asexecutor:res=executor.map(download_one,sorted(cc_list))123defdownload_many(cc_list):\u00a0\u00a0\u00a0\u00a0withfutures.ProcessPoolExecutor()asexecutor:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0res=executor.map(download_one,sorted(cc_list))ThreadPoolExecutor.__init__\u65b9\u6cd5\u9700\u8981max_workers\u53c2\u6570\uff0c\u6307\u5b9a\u7ebf\u7a0b\u6c60\u4e2d\u7ebf\u7a0b\u7684\u6570\u91cf;\u5728ProcessPoolExecutor\u7c7b\u4e2d,\u8fd9\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684.\u7b2c\u5341\u516b\u7ae0:\u4f7f\u7528asyncio\u5305\u5904\u7406\u5e76\u53d1\u5e76\u53d1\u662f\u6307\u4e00\u6b21\u5904\u7406\u591a\u4ef6\u4e8b\u3002\u5e76\u884c\u662f\u6307\u4e00\u6b21\u505a\u591a\u4ef6\u4e8b\u3002\u4e8c\u8005\u4e0d\u540c\uff0c\u4f46\u662f\u6709\u8054\u7cfb\u3002\u4e00\u4e2a\u5173\u4e8e\u7ed3\u6784\uff0c\u4e00\u4e2a\u5173\u4e8e\u6267\u884c\u3002\u5e76\u53d1\u7528\u4e8e\u5236\u5b9a\u65b9\u6848\uff0c\u7528\u6765\u89e3\u51b3\u53ef\u80fd\uff08\u4f46\u672a\u5fc5\uff09\u5e76\u884c\u7684\u95ee\u9898\u3002\u2014\u2014RobPikeGo\u8bed\u8a00\u7684\u521b\u9020\u8005\u4e4b\u4e00\u5e76\u884c\u662f\u6307\u4e24\u4e2a\u6216\u8005\u591a\u4e2a\u4e8b\u4ef6\u5728\u540c\u4e00\u65f6\u523b\u53d1\u751f,\u800c\u5e76\u53d1\u662f\u6307\u4e24\u4e2a\u6216\u591a\u4e2a\u4e8b\u4ef6\u5728\u540c\u4e00\u65f6\u95f4\u95f4\u9694\u53d1\u751f.\u771f\u6b63\u8fd0\u884c\u5e76\u884c\u9700\u8981\u591a\u4e2a\u6838\u5fc3,\u73b0\u5728\u7b14\u8bb0\u672c\u4e00\u822c\u67094\u4e2aCPU\u6838\u5fc3,\u4f46\u662f\u901a\u5e38\u5c31\u6709\u8d85\u8fc7100\u4e2a\u8fdb\u7a0b\u540c\u65f6\u8fd0\u884c.\u56e0\u6b64,\u5b9e\u9645\u4e0a\u5927\u591a\u6570\u8fdb\u7a0b\u90fd\u662f\u5e76\u53d1\u5904\u7406\u7684,\u800c\u4e0d\u662f\u5e76\u884c\u5904\u7406.\u8ba1\u7b97\u673a\u59cb\u7ec8\u8fd0\u884c\u7740100\u591a\u4e2a\u8fdb\u7a0b,\u786e\u4fdd\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u673a\u4f1a\u53d6\u5f97\u53d1\u5c55,\u4e0d\u8fc7CPU\u672c\u8eab\u540c\u65f6\u505a\u7684\u4e8b\u60c5\u4e0d\u4f1a\u8d85\u8fc7\u56db\u4ef6.\u672c\u7ae0\u4ecb\u7ecdasyncio\u5305,\u8fd9\u4e2a\u5305\u4f7f\u7528\u4e8b\u4ef6\u5faa\u73af\u9a71\u52a8\u7684\u534f\u7a0b\u5b9e\u73b0\u5e76\u53d1.\u8fd9\u4e2a\u5e93\u6709\u9f9f\u53d4\u4eb2\u81ea\u64cd\u5200.asyncio\u5927\u91cf\u4f7f\u7528yieldfrom\u8868\u8fbe\u5f0f,\u56e0\u6b64\u4e0d\u517c\u5bb9python3.3\u4ee5\u4e0b\u7684\u7248\u672c.\u7ebf\u7a0b\u4e0e\u534f\u7a0b\u5bf9\u6bd4\u4e00\u4e2a\u501f\u7531threading\u6a21\u5757\u4f7f\u7528\u7ebf\u7a0b,\u4e00\u4e2a\u501f\u7531asyncio\u5305\u4f7f\u7528\u534f\u7a0b\u5b9e\u73b0\u6765\u8fdb\u884c\u6bd4\u5bf9.Pythonimportthreadingimportitertoolsimporttimedefspin(msg,done):#\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5728\u5355\u72ec\u7684\u7ebf\u7a0b\u4e2d\u8fd0\u884cforcharinitertools.cycle('|/-\\\\'):#\u8fd9\u5176\u5b9e\u662f\u4e2a\u65e0\u9650\u5faa\u73af\uff0c\u56e0\u4e3aitertools.cycle\u51fd\u6570\u4f1a\u4ece\u6307\u5b9a\u7684\u5e8f\u5217\u4e2d\u53cd\u590d\u4e0d\u65ad\u5730\u751f\u6210\u5143\u7d20status=char+''+msgprint(status)ifdone.wait(.1):#\u5982\u679c\u8fdb\u7a0b\u88ab\u901a\u77e5\u7b49\u5f85,\u90a3\u5c31\u9000\u51fa\u5faa\u73afbreakdefslow_function():#\u5047\u8bbe\u8fd9\u662f\u8017\u65f6\u7684\u8ba1\u7b97#pretendwaitingalongtimeforI/Otime.sleep(3)#\u8c03\u7528sleep\u51fd\u6570\u4f1a\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u4e0d\u8fc7\u4e00\u5b9a\u8981\u8fd9\u4e48\u505a\uff0c\u4ee5\u4fbf\u91ca\u653eGIL\uff0c\u521b\u5efa\u4ece\u5c5e\u7ebf\u7a0breturn42defsupervisor():#\u8fd9\u4e2a\u51fd\u6570\u8bbe\u7f6e\u4ece\u5c5e\u7ebf\u7a0b\uff0c\u663e\u793a\u7ebf\u7a0b\u5bf9\u8c61\uff0c\u8fd0\u884c\u8017\u65f6\u7684\u8ba1\u7b97\uff0c\u6700\u540e\u6740\u6b7b\u7ebf\u7a0b\u3002done=threading.Event()spinner=threading.Thread(target=spin,args=('thinking!',done))print('spinnerobject:',spinner)#\u663e\u793a\u4ece\u5c5e\u7ebf\u7a0b\u5bf9\u8c61\u3002\u8f93\u51fa\u7c7b\u4f3c\u4e8e<Thread(Thread-1,initial)>spinner.start()#\u542f\u52a8\u4ece\u5c5e\u7ebf\u7a0bresult=slow_function()#\u8fd0\u884cslow_function\u51fd\u6570\uff0c\u963b\u585e\u4e3b\u7ebf\u7a0b\u3002\u540c\u65f6\uff0c\u4ece\u5c5e\u7ebf\u7a0b\u4ee5\u52a8\u753b\u5f62\u5f0f\u663e\u793a\u65cb\u8f6c\u6307\u9488done.set()#\u6539\u53d8signal\u7684\u72b6\u6001\uff1b\u8fd9\u4f1a\u7ec8\u6b62spin\u51fd\u6570\u4e2d\u7684\u90a3\u4e2afor\u5faa\u73afspinner.join()#\u7b49\u5f85spinner\u7ebf\u7a0b\u7ed3\u675freturnresultif__name__=='__main__':result=supervisor()print('Answer:',result)123456789101112131415161718192021222324252627282930importthreadingimportitertoolsimporttime\u00a0defspin(msg,done):\u00a0\u00a0#\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5728\u5355\u72ec\u7684\u7ebf\u7a0b\u4e2d\u8fd0\u884c\u00a0\u00a0\u00a0\u00a0forcharinitertools.cycle('|/-\\\\'):\u00a0\u00a0#\u8fd9\u5176\u5b9e\u662f\u4e2a\u65e0\u9650\u5faa\u73af\uff0c\u56e0\u4e3aitertools.cycle\u51fd\u6570\u4f1a\u4ece\u6307\u5b9a\u7684\u5e8f\u5217\u4e2d\u53cd\u590d\u4e0d\u65ad\u5730\u751f\u6210\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0status=char+''+msg\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(status)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdone.wait(.1):\u00a0\u00a0#\u5982\u679c\u8fdb\u7a0b\u88ab\u901a\u77e5\u7b49\u5f85,\u90a3\u5c31\u9000\u51fa\u5faa\u73af\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0defslow_function():\u00a0\u00a0#\u5047\u8bbe\u8fd9\u662f\u8017\u65f6\u7684\u8ba1\u7b97\u00a0\u00a0\u00a0\u00a0#pretendwaitingalongtimeforI/O\u00a0\u00a0\u00a0\u00a0time.sleep(3)\u00a0\u00a0#\u8c03\u7528sleep\u51fd\u6570\u4f1a\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u4e0d\u8fc7\u4e00\u5b9a\u8981\u8fd9\u4e48\u505a\uff0c\u4ee5\u4fbf\u91ca\u653eGIL\uff0c\u521b\u5efa\u4ece\u5c5e\u7ebf\u7a0b\u00a0\u00a0\u00a0\u00a0return42\u00a0defsupervisor():\u00a0\u00a0#\u8fd9\u4e2a\u51fd\u6570\u8bbe\u7f6e\u4ece\u5c5e\u7ebf\u7a0b\uff0c\u663e\u793a\u7ebf\u7a0b\u5bf9\u8c61\uff0c\u8fd0\u884c\u8017\u65f6\u7684\u8ba1\u7b97\uff0c\u6700\u540e\u6740\u6b7b\u7ebf\u7a0b\u3002\u00a0\u00a0\u00a0\u00a0done=threading.Event()\u00a0\u00a0\u00a0\u00a0spinner=threading.Thread(target=spin,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0args=('thinking!',done))\u00a0\u00a0\u00a0\u00a0print('spinnerobject:',spinner)\u00a0\u00a0#\u663e\u793a\u4ece\u5c5e\u7ebf\u7a0b\u5bf9\u8c61\u3002\u8f93\u51fa\u7c7b\u4f3c\u4e8e<Thread(Thread-1,initial)>\u00a0\u00a0\u00a0\u00a0spinner.start()\u00a0\u00a0#\u542f\u52a8\u4ece\u5c5e\u7ebf\u7a0b\u00a0\u00a0\u00a0\u00a0result=slow_function()\u00a0\u00a0#\u8fd0\u884cslow_function\u51fd\u6570\uff0c\u963b\u585e\u4e3b\u7ebf\u7a0b\u3002\u540c\u65f6\uff0c\u4ece\u5c5e\u7ebf\u7a0b\u4ee5\u52a8\u753b\u5f62\u5f0f\u663e\u793a\u65cb\u8f6c\u6307\u9488\u00a0\u00a0\u00a0\u00a0done.set()\u00a0\u00a0#\u6539\u53d8signal\u7684\u72b6\u6001\uff1b\u8fd9\u4f1a\u7ec8\u6b62spin\u51fd\u6570\u4e2d\u7684\u90a3\u4e2afor\u5faa\u73af\u00a0\u00a0\u00a0\u00a0spinner.join()\u00a0\u00a0#\u7b49\u5f85spinner\u7ebf\u7a0b\u7ed3\u675f\u00a0\u00a0\u00a0\u00a0returnresult\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0result=supervisor()\u00a0\u00a0\u00a0\u00a0print('Answer:',result)\u8fd9\u662f\u4f7f\u7528threading\u7684\u6848\u4f8b,\u8ba9\u5b50\u7ebf\u7a0b\u57283\u79d2\u5185\u4e0d\u65ad\u6253\u5370,\u5728python\u4e2d,\u6ca1\u6709\u63d0\u4f9b\u7ec8\u6b62\u7ebf\u7a0b\u7684API.\u82e5\u60f3\u5173\u95ed\u7ebf\u7a0b,\u5fc5\u987b\u7ed9\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f.\u4e0b\u9762\u770b\u770b\u4f7f\u7528@asyncio.coroutine\u88c5\u9970\u5668\u66ff\u4ee3\u534f\u7a0b,\u5b9e\u73b0\u76f8\u540c\u7684\u884c\u4e3a:Pythonimportasyncioimportitertools@asyncio.coroutine#\u4ea4\u7ed9asyncio\u5904\u7406\u7684\u534f\u7a0b\u8981\u4f7f\u7528@asyncio.coroutine\u88c5\u9970defspin(msg):forcharinitertools.cycle('|/-\\\\'):status=char+''+msgprint(status)try:yieldfromasyncio.sleep(.1)#\u4f7f\u7528yieldfromasyncio.sleep(.1)\u4ee3\u66fftime.sleep(.1)\uff0c\u8fd9\u6837\u7684\u4f11\u7720\u4e0d\u4f1a\u963b\u585e\u4e8b\u4ef6\u5faa\u73af\u3002exceptasyncio.CancelledError:#\u5982\u679cspin\u51fd\u6570\u82cf\u9192\u540e\u629b\u51faasyncio.CancelledError\u5f02\u5e38\uff0c\u5176\u539f\u56e0\u662f\u53d1\u51fa\u4e86\u53d6\u6d88\u8bf7\u6c42\uff0c\u56e0\u6b64\u9000\u51fa\u5faa\u73af\u3002break@asyncio.coroutinedefslow_function():#slow_function\u51fd\u6570\u662f\u534f\u7a0b\uff0c\u5728\u7528\u4f11\u7720\u5047\u88c5\u8fdb\u884cI/O\u64cd\u4f5c\u65f6\uff0c\u4f7f\u7528yieldfrom\u7ee7\u7eed\u6267\u884c\u4e8b\u4ef6\u5faa\u73af\u3002#pretendwaitingalongtimeforI/Oyieldfromasyncio.sleep(3)#yieldfromasyncio.sleep(3)\u8868\u8fbe\u5f0f\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u4e3b\u5faa\u73af\uff0c\u5728\u4f11\u7720\u7ed3\u675f\u540e\u6062\u590d\u8fd9\u4e2a\u534f\u7a0b\u3002return42@asyncio.coroutinedefsupervisor():#supervisor\u51fd\u6570\u4e5f\u662f\u534f\u7a0bspinner=asyncio.async(spin('thinking!'))#asyncio.async(...)\u51fd\u6570\u6392\u5b9aspin\u534f\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\uff0c\u4f7f\u7528\u4e00\u4e2aTask\u5bf9\u8c61\u5305\u88c5spin\u534f\u7a0b\uff0c\u5e76\u7acb\u5373\u8fd4\u56de\u3002print('spinnerobject:',spinner)result=yieldfromslow_function()#\u9a71\u52a8slow_function()\u51fd\u6570\u3002\u7ed3\u675f\u540e\uff0c\u83b7\u53d6\u8fd4\u56de\u503c\u3002#\u540c\u65f6\uff0c\u4e8b\u4ef6\u5faa\u73af\u7ee7\u7eed\u8fd0\u884c\uff0c\u56e0\u4e3aslow_function\u51fd\u6570\u6700\u540e\u4f7f\u7528yieldfromasyncio.sleep(3)\u8868\u8fbe\u5f0f\u628a\u63a7\u5236\u6743\u4ea4\u56de\u7ed9\u4e86\u4e3b\u5faa\u73af\u3002spinner.cancel()#Task\u5bf9\u8c61\u53ef\u4ee5\u53d6\u6d88\uff1b\u53d6\u6d88\u540e\u4f1a\u5728\u534f\u7a0b\u5f53\u524d\u6682\u505c\u7684yield\u5904\u629b\u51faasyncio.CancelledError\u5f02\u5e38\u3002\u534f\u7a0b\u53ef\u4ee5\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\uff0c\u4e5f\u53ef\u4ee5\u5ef6\u8fdf\u53d6\u6d88\uff0c\u751a\u81f3\u62d2\u7edd\u53d6\u6d88\u3002returnresultif__name__=='__main__':loop=asyncio.get_event_loop()#\u83b7\u53d6\u4e8b\u4ef6\u5faa\u73af\u7684\u5f15\u7528result=loop.run_until_complete(supervisor())#\u9a71\u52a8supervisor\u534f\u7a0b\uff0c\u8ba9\u5b83\u8fd0\u884c\u5b8c\u6bd5\uff1b\u8fd9\u4e2a\u534f\u7a0b\u7684\u8fd4\u56de\u503c\u662f\u8fd9\u6b21\u8c03\u7528\u7684\u8fd4\u56de\u503c\u3002loop.close()print('Answer:',result)123456789101112131415161718192021222324252627282930313233importasyncioimportitertools\u00a0@asyncio.coroutine\u00a0\u00a0#\u4ea4\u7ed9asyncio\u5904\u7406\u7684\u534f\u7a0b\u8981\u4f7f\u7528@asyncio.coroutine\u88c5\u9970defspin(msg):\u00a0\u00a0\u00a0\u00a0forcharinitertools.cycle('|/-\\\\'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0status=char+''+msg\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(status)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldfromasyncio.sleep(.1)\u00a0\u00a0#\u4f7f\u7528yieldfromasyncio.sleep(.1)\u4ee3\u66fftime.sleep(.1)\uff0c\u8fd9\u6837\u7684\u4f11\u7720\u4e0d\u4f1a\u963b\u585e\u4e8b\u4ef6\u5faa\u73af\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptasyncio.CancelledError:\u00a0\u00a0#\u5982\u679cspin\u51fd\u6570\u82cf\u9192\u540e\u629b\u51faasyncio.CancelledError\u5f02\u5e38\uff0c\u5176\u539f\u56e0\u662f\u53d1\u51fa\u4e86\u53d6\u6d88\u8bf7\u6c42\uff0c\u56e0\u6b64\u9000\u51fa\u5faa\u73af\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0@asyncio.coroutinedefslow_function():\u00a0\u00a0#slow_function\u51fd\u6570\u662f\u534f\u7a0b\uff0c\u5728\u7528\u4f11\u7720\u5047\u88c5\u8fdb\u884cI/O\u64cd\u4f5c\u65f6\uff0c\u4f7f\u7528yieldfrom\u7ee7\u7eed\u6267\u884c\u4e8b\u4ef6\u5faa\u73af\u3002\u00a0\u00a0\u00a0\u00a0#pretendwaitingalongtimeforI/O\u00a0\u00a0\u00a0\u00a0yieldfromasyncio.sleep(3)\u00a0\u00a0#yieldfromasyncio.sleep(3)\u8868\u8fbe\u5f0f\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u4e3b\u5faa\u73af\uff0c\u5728\u4f11\u7720\u7ed3\u675f\u540e\u6062\u590d\u8fd9\u4e2a\u534f\u7a0b\u3002\u00a0\u00a0\u00a0\u00a0return42\u00a0@asyncio.coroutinedefsupervisor():\u00a0\u00a0#supervisor\u51fd\u6570\u4e5f\u662f\u534f\u7a0b\u00a0\u00a0\u00a0\u00a0spinner=asyncio.async(spin('thinking!'))\u00a0\u00a0#asyncio.async(...)\u51fd\u6570\u6392\u5b9aspin\u534f\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4\uff0c\u4f7f\u7528\u4e00\u4e2aTask\u5bf9\u8c61\u5305\u88c5spin\u534f\u7a0b\uff0c\u5e76\u7acb\u5373\u8fd4\u56de\u3002\u00a0\u00a0\u00a0\u00a0print('spinnerobject:',spinner)\u00a0\u00a0\u00a0\u00a0result=yieldfromslow_function()\u00a0\u00a0#\u9a71\u52a8slow_function()\u51fd\u6570\u3002\u7ed3\u675f\u540e\uff0c\u83b7\u53d6\u8fd4\u56de\u503c\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u540c\u65f6\uff0c\u4e8b\u4ef6\u5faa\u73af\u7ee7\u7eed\u8fd0\u884c\uff0c\u56e0\u4e3aslow_function\u51fd\u6570\u6700\u540e\u4f7f\u7528yieldfromasyncio.sleep(3)\u8868\u8fbe\u5f0f\u628a\u63a7\u5236\u6743\u4ea4\u56de\u7ed9\u4e86\u4e3b\u5faa\u73af\u3002\u00a0\u00a0\u00a0\u00a0spinner.cancel()\u00a0\u00a0#Task\u5bf9\u8c61\u53ef\u4ee5\u53d6\u6d88\uff1b\u53d6\u6d88\u540e\u4f1a\u5728\u534f\u7a0b\u5f53\u524d\u6682\u505c\u7684yield\u5904\u629b\u51faasyncio.CancelledError\u5f02\u5e38\u3002\u534f\u7a0b\u53ef\u4ee5\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\uff0c\u4e5f\u53ef\u4ee5\u5ef6\u8fdf\u53d6\u6d88\uff0c\u751a\u81f3\u62d2\u7edd\u53d6\u6d88\u3002\u00a0\u00a0\u00a0\u00a0returnresult\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0loop=asyncio.get_event_loop()\u00a0\u00a0#\u83b7\u53d6\u4e8b\u4ef6\u5faa\u73af\u7684\u5f15\u7528\u00a0\u00a0\u00a0\u00a0result=loop.run_until_complete(supervisor())\u00a0\u00a0#\u9a71\u52a8supervisor\u534f\u7a0b\uff0c\u8ba9\u5b83\u8fd0\u884c\u5b8c\u6bd5\uff1b\u8fd9\u4e2a\u534f\u7a0b\u7684\u8fd4\u56de\u503c\u662f\u8fd9\u6b21\u8c03\u7528\u7684\u8fd4\u56de\u503c\u3002\u00a0\u00a0\u00a0\u00a0loop.close()\u00a0\u00a0\u00a0\u00a0print('Answer:',result)asyncio\u5305\u4f7f\u7528\u7684\u534f\u7a0b\u662f\u6bd4\u8f83\u4e25\u683c\u7684\u5b9a\u4e49,\u9002\u5408asyncioAPI\u7684\u534f\u7a0b\u5728\u5b9a\u4e49\u4f53\u4e2d\u5fc5\u987b\u4f7f\u7528yieldfrom,\u800c\u4e0d\u662f\u4f7f\u7528yield.\u6b64\u5916,asyncio\u7684\u534f\u7a0b\u8981\u7531\u8c03\u7528\u65b9\u9a71\u52a8,\u4f8b\u5982asyncio.async(\u2026),\u4ece\u800c\u9a71\u52a8\u534f\u7a0b.\u6700\u540e\u7531@asyncio.coroutine\u88c5\u9970\u5668\u5e94\u7528\u5728\u534f\u7a0b\u4e0a.\u8fd9\u4e24\u79cdsupervisor\u5b9e\u73b0\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\u6982\u8ff0\u5982\u4e0b:asyncio.Task\u5bf9\u8c61\u5dee\u4e0d\u591a\u4e0ethreading.Thread\u5bf9\u8c61\u7b49\u6548\u3002\u201cTask\u5bf9\u8c61\u50cf\u662f\u5b9e\u73b0\u534f\u4f5c\u5f0f\u591a\u4efb\u52a1\u7684\u5e93\uff08\u4f8b\u5982gevent\uff09\u4e2d\u7684\u7eff\u8272\u7ebf\u7a0b\uff08greenthread\uff09\u201d\u3002Task\u5bf9\u8c61\u7528\u4e8e\u9a71\u52a8\u534f\u7a0b\uff0cThread\u5bf9\u8c61\u7528\u4e8e\u8c03\u7528\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\u3002Task\u5bf9\u8c61\u4e0d\u7531\u81ea\u5df1\u52a8\u624b\u5b9e\u4f8b\u5316\uff0c\u800c\u662f\u901a\u8fc7\u628a\u534f\u7a0b\u4f20\u7ed9asyncio.async(\u2026)\u51fd\u6570\u6216loop.create_task(\u2026)\u65b9\u6cd5\u83b7\u53d6\u3002\u83b7\u53d6\u7684Task\u5bf9\u8c61\u5df2\u7ecf\u6392\u5b9a\u4e86\u8fd0\u884c\u65f6\u95f4\uff08\u4f8b\u5982\uff0c\u7531asyncio.async\u51fd\u6570\u6392\u5b9a\uff09\uff1bThread\u5b9e\u4f8b\u5219\u5fc5\u987b\u8c03\u7528start\u65b9\u6cd5\uff0c\u660e\u786e\u544a\u77e5\u8ba9\u5b83\u8fd0\u884c\u3002\u5728\u7ebf\u7a0b\u7248supervisor\u51fd\u6570\u4e2d\uff0cslow_function\u51fd\u6570\u662f\u666e\u901a\u7684\u51fd\u6570\uff0c\u76f4\u63a5\u7531\u7ebf\u7a0b\u8c03\u7528\u3002\u5728\u5f02\u6b65\u7248supervisor\u51fd\u6570\u4e2d\uff0cslow_function\u51fd\u6570\u662f\u534f\u7a0b\uff0c\u7531yieldfrom\u9a71\u52a8\u3002\u6ca1\u6709API\u80fd\u4ece\u5916\u90e8\u7ec8\u6b62\u7ebf\u7a0b\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u968f\u65f6\u53ef\u80fd\u88ab\u4e2d\u65ad\uff0c\u5bfc\u81f4\u7cfb\u7edf\u5904\u4e8e\u65e0\u6548\u72b6\u6001\u3002\u5982\u679c\u60f3\u7ec8\u6b62\u4efb\u52a1\uff0c\u53ef\u4ee5\u4f7f\u7528Task.cancel()\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u5728\u534f\u7a0b\u5185\u90e8\u629b\u51faCancelledError\u5f02\u5e38\u3002\u534f\u7a0b\u53ef\u4ee5\u5728\u6682\u505c\u7684yield\u5904\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\uff0c\u5904\u7406\u7ec8\u6b62\u8bf7\u6c42\u3002supervisor\u534f\u7a0b\u5fc5\u987b\u5728main\u51fd\u6570\u4e2d\u7531loop.run_until_complete\u65b9\u6cd5\u6267\u884c\u3002\u591a\u7ebf\u7a0b\u7f16\u7a0b\u662f\u6bd4\u8f83\u56f0\u96be\u7684,\u56e0\u4e3a\u8c03\u5ea6\u7a0b\u5e8f\u4efb\u4f55\u65f6\u5019\u90fd\u80fd\u4e2d\u65ad\u7ebf\u7a0b,\u5fc5\u987b\u8bb0\u4f4f\u4fdd\u7559\u9501,\u53bb\u4fdd\u62a4\u7a0b\u5e8f\u4e2d\u91cd\u8981\u90e8\u5206,\u9632\u6b62\u591a\u7ebf\u7a0b\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u65ad.\u800c\u534f\u7a0b\u9ed8\u8ba4\u4f1a\u505a\u597d\u5168\u65b9\u4f4d\u4fdd\u62a4,\u4ee5\u9632\u6b62\u4e2d\u65ad.\u6211\u4eec\u5fc5\u987b\u663e\u793a\u4ea7\u51fa\u624d\u80fd\u8ba9\u7a0b\u5e8f\u7684\u4f59\u4e0b\u90e8\u5206\u8fd0\u884c.\u5bf9\u534f\u7a0b\u6765\u8bf4,\u65e0\u9700\u4fdd\u7559\u9501,\u800c\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u540c\u6b65\u64cd\u4f5c,\u534f\u7a0b\u81ea\u8eab\u5c31\u4f1a\u540c\u6b65,\u56e0\u4e3a\u5728\u4efb\u610f\u65f6\u523b,\u53ea\u6709\u4e00\u4e2a\u534f\u7a0b\u8fd0\u884c.\u4ece\u671f\u7269\u3001\u4efb\u52a1\u548c\u534f\u7a0b\u4e2d\u4ea7\u51fa\u5728asyncio\u5305\u4e2d,\u671f\u7269\u548c\u534f\u7a0b\u5173\u7cfb\u7d27\u5bc6,\u56e0\u4e3a\u53ef\u4ee5\u4f7f\u7528yieldfrom\u4eceasyncio.Future\u5bf9\u8c61\u4e2d\u4ea7\u51fa\u7ed3\u679c.\u4e5f\u5c31\u662f\u8bf4,\u5982\u679cfoo\u662f\u534f\u7a0b\u51fd\u6570,\u6216\u8005\u662f\u8fd4\u56deFuture\u6216Task\u5b9e\u4f8b\u7684\u666e\u901a\u51fd\u6570,\u90a3\u4e48\u53ef\u4ee5\u7528res=yieldfromfoo().\u4e3a\u4e86\u6267\u884c\u8fd9\u4e2a\u64cd\u4f5c,\u5fc5\u987b\u6392\u5b9a\u534f\u7a0b\u7684\u8fd0\u884c\u65f6\u95f4,\u7136\u540e\u4f7f\u7528asyncio.Task\u5bf9\u8c61\u5305\u88c5\u534f\u7a0b.\u5bf9\u534f\u7a0b\u6765\u8bf4,\u83b7\u53d6Task\u5bf9\u8c61\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f:asyncio.async(coro_or_future,*,loop=None):\u8fd9\u4e2a\u51fd\u6570\u7edf\u4e00\u4e86\u534f\u7a0b\u548c\u671f\u7269\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f\u4e8c\u8005\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u3002\u5982\u679c\u662fFuture\u6216Task\u5bf9\u8c61\uff0c\u90a3\u5c31\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u3002\u5982\u679c\u662f\u534f\u7a0b\uff0c\u90a3\u4e48async\u51fd\u6570\u4f1a\u8c03\u7528loop.create_task(\u2026)\u65b9\u6cd5\u521b\u5efaTask\u5bf9\u8c61\u3002loop\u5173\u952e\u5b57\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u7528\u4e8e\u4f20\u5165\u4e8b\u4ef6\u5faa\u73af\uff1b\u5982\u679c\u6ca1\u6709\u4f20\u5165\uff0c\u90a3\u4e48async\u51fd\u6570\u4f1a\u901a\u8fc7\u8c03\u7528asyncio.get_event_loop()\u51fd\u6570\u83b7\u53d6\u5faa\u73af\u5bf9\u8c61\u3002BaseEventLoop.create_task(coro):\u8fd9\u4e2a\u65b9\u6cd5\u6392\u5b9a\u534f\u7a0b\u7684\u6267\u884c\u65f6\u95f4\uff0c\u8fd4\u56de\u4e00\u4e2aasyncio.Task\u5bf9\u8c61\u3002\u5982\u679c\u5728\u81ea\u5b9a\u4e49\u7684BaseEventLoop\u5b50\u7c7b\u4e0a\u8c03\u7528\uff0c\u8fd4\u56de\u7684\u5bf9\u8c61\u53ef\u80fd\u662f\u5916\u90e8\u5e93\uff08\u5982Tornado\uff09\u4e2d\u4e0eTask\u7c7b\u517c\u5bb9\u7684\u67d0\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u3002asyncio\u5305\u4e2d\u6709\u591a\u4e2a\u51fd\u6570\u4f1a\u81ea\u52a8(\u4f7f\u7528asyncio.async\u51fd\u6570)\u628a\u53c2\u6570\u6307\u5b9a\u7684\u534f\u7a0b\u5305\u88c5\u5728asyncio.Task\u5bf9\u8c61\u4e2d.\u4f7f\u7528asyncio\u548caiohttp\u5305\u4e0b\u8f7dasyncio\u5305\u53ea\u76f4\u63a5\u652f\u6301TCP\u548cUDP.\u5982\u679c\u50cf\u4f7f\u7528HTTP\u6216\u5176\u4ed6\u534f\u8bae,\u5c31\u9700\u8981\u501f\u52a9\u7b2c\u4e09\u65b9\u5305.\u4f7f\u7528\u7684\u51e0\u4e4e\u90fd\u662faiohttp\u5305.\u4ee5\u4e0b\u8f7d\u56fe\u7247\u4e3a\u4f8b:PythonimportasyncioimportaiohttpfromflagsimportBASE_URL,save_flag,show,main@asyncio.coroutinedefget_flag(cc):#\u534f\u7a0b\u5e94\u8be5\u4f7f\u7528@asyncio.coroutine\u88c5\u9970\u3002url='{}/{cc}/{cc}.gif'.format(BASE_URL,cc=cc.lower())resp=yieldfromaiohttp.request('GET',url)#\u963b\u585e\u7684\u64cd\u4f5c\u901a\u8fc7\u534f\u7a0b\u5b9e\u73b0image=yieldfromresp.read()#\u8bfb\u53d6\u54cd\u5e94\u5185\u5bb9\u662f\u4e00\u9879\u5355\u72ec\u7684\u5f02\u6b65\u64cd\u4f5creturnimage@asyncio.coroutinedefdownload_one(cc):#download_one\u51fd\u6570\u4e5f\u5fc5\u987b\u662f\u534f\u7a0b\uff0c\u56e0\u4e3a\u7528\u5230\u4e86yieldfromimage=yieldfromget_flag(cc)show(cc)save_flag(image,cc.lower()+'.gif')returnccdefdownload_many(cc_list):loop=asyncio.get_event_loop()#\u83b7\u53d6\u4e8b\u4ef6\u5faa\u73af\u5e95\u5c42\u5b9e\u73b0\u7684\u5f15\u7528to_do=[download_one(cc)forccinsorted(cc_list)]#\u8c03\u7528download_one\u51fd\u6570\u83b7\u53d6\u5404\u4e2a\u56fd\u65d7\uff0c\u7136\u540e\u6784\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61\u5217\u8868wait_coro=asyncio.wait(to_do)#\u867d\u7136\u51fd\u6570\u7684\u540d\u79f0\u662fwait\uff0c\u4f46\u5b83\u4e0d\u662f\u963b\u585e\u578b\u51fd\u6570\u3002wait\u662f\u4e00\u4e2a\u534f\u7a0b\uff0c\u7b49\u4f20\u7ed9\u5b83\u7684\u6240\u6709\u534f\u7a0b\u8fd0\u884c\u5b8c\u6bd5\u540e\u7ed3\u675fres,_=loop.run_until_complete(wait_coro)#\u6267\u884c\u4e8b\u4ef6\u5faa\u73af\uff0c\u76f4\u5230wait_coro\u8fd0\u884c\u7ed3\u675floop.close()#\u5173\u95ed\u4e8b\u4ef6\u5faa\u73afreturnlen(res)if__name__=='__main__':main(download_many)1234567891011121314151617181920212223242526importasyncioimportaiohttpfromflagsimportBASE_URL,save_flag,show,main\u00a0@asyncio.coroutinedefget_flag(cc):#\u534f\u7a0b\u5e94\u8be5\u4f7f\u7528@asyncio.coroutine\u88c5\u9970\u3002\u00a0\u00a0\u00a0\u00a0url='{}/{cc}/{cc}.gif'.format(BASE_URL,cc=cc.lower())\u00a0\u00a0\u00a0\u00a0resp=yieldfromaiohttp.request('GET',url)#\u963b\u585e\u7684\u64cd\u4f5c\u901a\u8fc7\u534f\u7a0b\u5b9e\u73b0\u00a0\u00a0\u00a0\u00a0image=yieldfromresp.read()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8bfb\u53d6\u54cd\u5e94\u5185\u5bb9\u662f\u4e00\u9879\u5355\u72ec\u7684\u5f02\u6b65\u64cd\u4f5c\u00a0\u00a0\u00a0\u00a0returnimage\u00a0@asyncio.coroutinedefdownload_one(cc):#download_one\u51fd\u6570\u4e5f\u5fc5\u987b\u662f\u534f\u7a0b\uff0c\u56e0\u4e3a\u7528\u5230\u4e86yieldfrom\u00a0\u00a0\u00a0\u00a0image=yieldfromget_flag(cc)\u00a0\u00a0\u00a0\u00a0show(cc)\u00a0\u00a0\u00a0\u00a0save_flag(image,cc.lower()+'.gif')\u00a0\u00a0\u00a0\u00a0returnccdefdownload_many(cc_list):\u00a0\u00a0\u00a0\u00a0loop=asyncio.get_event_loop()#\u83b7\u53d6\u4e8b\u4ef6\u5faa\u73af\u5e95\u5c42\u5b9e\u73b0\u7684\u5f15\u7528\u00a0\u00a0\u00a0\u00a0to_do=[download_one(cc)forccinsorted(cc_list)]#\u8c03\u7528download_one\u51fd\u6570\u83b7\u53d6\u5404\u4e2a\u56fd\u65d7\uff0c\u7136\u540e\u6784\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61\u5217\u8868\u00a0\u00a0\u00a0\u00a0wait_coro=asyncio.wait(to_do)#\u867d\u7136\u51fd\u6570\u7684\u540d\u79f0\u662fwait\uff0c\u4f46\u5b83\u4e0d\u662f\u963b\u585e\u578b\u51fd\u6570\u3002wait\u662f\u4e00\u4e2a\u534f\u7a0b\uff0c\u7b49\u4f20\u7ed9\u5b83\u7684\u6240\u6709\u534f\u7a0b\u8fd0\u884c\u5b8c\u6bd5\u540e\u7ed3\u675f\u00a0\u00a0\u00a0\u00a0res,_=loop.run_until_complete(wait_coro)#\u6267\u884c\u4e8b\u4ef6\u5faa\u73af\uff0c\u76f4\u5230wait_coro\u8fd0\u884c\u7ed3\u675f\u00a0\u00a0\u00a0\u00a0loop.close()\u00a0\u00a0#\u5173\u95ed\u4e8b\u4ef6\u5faa\u73af\u00a0\u00a0\u00a0\u00a0returnlen(res)if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0main(download_many)asyncio.wait(\u2026)\u534f\u7a0b\u53c2\u6570\u662f\u4e00\u4e2a\u7531\u671f\u7269\u6216\u534f\u7a0b\u6784\u6210\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61,wait\u4f1a\u5206\u522b\u628a\u5404\u4e2a\u534f\u7a0b\u88c5\u8fdb\u4e00\u4e2aTask\u5bf9\u8c61.\u6700\u7ec8\u7684\u7ed3\u679c\u662f,wait\u5904\u7406\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\u53d8\u6210Future\u7c7b\u7684\u5b9e\u4f8b.wait\u662f\u534f\u7a0b\u51fd\u6570,\u56e0\u6b64\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u534f\u7a0b\u6216\u751f\u6210\u5668\u5bf9\u8c61.\u4e3a\u4e86\u9a71\u52a8\u534f\u7a0b,\u6211\u4eec\u628a\u534f\u7a0b\u4f20\u7ed9loop.run_until_complete(\u2026)\u65b9\u6cd5.loop.run_until_complete\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u671f\u7269\u6216\u534f\u7a0b.\u5982\u679c\u662f\u534f\u7a0b,run_until_complete\u65b9\u6cd5\u4e0ewait\u51fd\u6570\u4e00\u6837,\u628a\u534f\u7a0b\u5305\u88c5\u8fdb\u4e00\u4e2aTask\u5bf9\u8c61\u4e2d.\u56e0\u4e3a\u534f\u7a0b\u90fd\u662f\u7531yieldfrom\u9a71\u52a8,\u8fd9\u6b63\u662frun_until_complete\u5bf9wait\u8fd4\u56de\u8fd4\u56de\u7684wait_coro\u5bf9\u8c61\u6240\u505a\u7684\u4e8b.\u8fd0\u884c\u7ed3\u675f\u540e\u8fd4\u56de\u4e24\u4e2a\u5143\u7d20,\u7b2c\u4e00\u4e2a\u662f\u662f\u7ed3\u675f\u7684\u671f\u7269,\u7b2c\u4e8c\u4e2a\u662f\u672a\u7ed3\u675f\u7684\u671f\u7269.\u907f\u514d\u963b\u585e\u578b\u8c03\u7528\u6709\u4e24\u79cd\u65b9\u6cd5\u80fd\u907f\u514d\u963b\u585e\u578b\u8c03\u7528\u4e2d\u6b62\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u8fdb\u7a0b:\u5728\u5355\u72ec\u7684\u7ebf\u7a0b\u4e2d\u8fd0\u884c\u5404\u4e2a\u963b\u585e\u578b\u64cd\u4f5c\u628a\u6bcf\u4e2a\u963b\u585e\u578b\u64cd\u4f5c\u8f6c\u6362\u6210\u975e\u963b\u585e\u7684\u5f02\u6b65\u8c03\u7528\u4f7f\u7528\u591a\u7ebf\u7a0b\u662f\u53ef\u4ee5\u7684,\u4f46\u662f\u4f1a\u6d88\u8017\u6bd4\u8f83\u5927\u7684\u5185\u5b58.\u4e3a\u4e86\u964d\u4f4e\u5185\u5b58\u7684\u6d88\u8017,\u901a\u5e38\u4f7f\u7528\u56de\u8c03\u6765\u5b9e\u73b0\u5f02\u6b65\u8c03\u7528.\u8fd9\u662f\u4e00\u79cd\u5e95\u5c42\u6982\u5ff5,\u7c7b\u4f3c\u6240\u6709\u5e76\u53d1\u673a\u5236\u4e2d\u6700\u53e4\u8001\u6700\u539f\u59cb\u7684\u90a3\u79cd\u2013\u786c\u4ef6\u4e2d\u65ad.\u4f7f\u7528\u56de\u8c03\u65f6,\u6211\u4eec\u4e0d\u7b49\u5f85\u54cd\u5e94,\u800c\u662f\u6ce8\u518c\u4e00\u4e2a\u51fd\u6570,\u5728\u53d1\u751f\u67d0\u4ef6\u4e8b\u65f6\u8c03\u7528.\u8fd9\u6837,\u6240\u6709\u7684\u8c03\u7528\u90fd\u662f\u975e\u963b\u585e\u7684.\u5f02\u6b65\u5e94\u7528\u7a0b\u5e8f\u5e95\u5c42\u7684\u4e8b\u4ef6\u5faa\u73af\u80fd\u4f9d\u9760\u57fa\u7840\u8bbe\u7f6e\u7684\u4e2d\u65ad,\u7ebf\u7a0b,\u8f6e\u8be2\u548c\u540e\u53f0\u8fdb\u7a0b\u7b49\u5f85\u7b49,\u786e\u4fdd\u591a\u4e2a\u5e76\u53d1\u8bf7\u6c42\u80fd\u53d6\u5f97\u8fdb\u5c55\u5e76\u6700\u7ec8\u5b8c\u6210,\u8fd9\u6837\u624d\u80fd\u4f7f\u7528\u56de\u8c03.\u4e8b\u4ef6\u5faa\u73af\u83b7\u5f97\u54cd\u5e94\u540e,\u4f1a\u56de\u8fc7\u5934\u6765\u8c03\u7528\u6211\u4eec\u6307\u5b9a\u7684\u56de\u8c03.\u5982\u679c\u505a\u6cd5\u6b63\u786e,\u4e8b\u4ef6\u5faa\u73af\u548c\u5e94\u7528\u4ee3\u7801\u516c\u5171\u7684\u4e3b\u7ebf\u7a0b\u7edd\u4e0d\u4f1a\u963b\u585e.\u628a\u751f\u6210\u5668\u5f53\u505a\u534f\u7a0b\u4f7f\u7528\u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f.\u5bf9\u4e8b\u4ef6\u5faa\u73af\u6765\u8bf4,\u8c03\u7528\u56de\u8c03\u4e0e\u5728\u6682\u505c\u7684\u534f\u7a0b\u4e0a\u8c03\u7528.send()\u6548\u679c\u5dee\u4e0d\u591a.\u4f7f\u7528Executor\u5bf9\u8c61\uff0c\u9632\u6b62\u963b\u585e\u4e8b\u4ef6\u5faa\u73af\u8bbf\u95ee\u672c\u5730\u6587\u4ef6\u4f1a\u963b\u585e,\u800cCPython\u5e95\u5c42\u5728\u963b\u585e\u578bI/O\u8c03\u7528\u65f6\u4f1a\u91ca\u653eGIL,\u56e0\u6b64\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u7ee7\u7eed.\u56e0\u4e3aasyncio\u4e8b\u4ef6\u4e0d\u662f\u901a\u8fc7\u591a\u7ebf\u7a0b\u6765\u5b8c\u6210,\u56e0\u6b64save_flag\u7528\u6765\u4fdd\u5b58\u56fe\u7247\u7684\u51fd\u6570\u963b\u585e\u4e86\u4e0easyncio\u4e8b\u4ef6\u5faa\u73af\u5171\u7528\u7684\u552f\u4e00\u7ebf\u7a0b,\u56e0\u6b64\u4fdd\u5b58\u6587\u4ef6\u65f6,\u771f\u4e2a\u5e94\u7528\u7a0b\u5e8f\u90fd\u4f1a\u51bb\u7ed3.\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u51b3\u529e\u6cd5\u662f,\u4f7f\u7528\u4e8b\u4ef6\u5faa\u73af\u5bf9\u8c61\u7684run_in_executor\u65b9\u6cd5.asyncio\u7684\u4e8b\u4ef6\u5faa\u73af\u80cc\u540e\u7ef4\u62a4\u8005\u4e00\u4e2aThreadPoolExecutor\u5bf9\u8c61,\u6211\u4eec\u53ef\u4ee5\u8c03\u7528run_in_executor\u65b9\u6cd5,\u628a\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\u53d1\u7ed9\u5b83\u6267\u884c:Python@asyncio.coroutinedefdownload_one(cc,base_url,semaphore,verbose):try:with(yieldfromsemaphore):image=yieldfromget_flag(base_url,cc)exceptweb.HTTPNotFound:status=HTTPStatus.not_foundmsg='notfound'exceptExceptionasexc:raiseFetchError(cc)fromexcelse:loop=asyncio.get_event_loop()#\u83b7\u53d6\u4e8b\u4ef6\u5faa\u73af\u5bf9\u8c61\u7684\u5f15\u7528loop.run_in_executor(None,#run_in_executor\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662fExecutor\u5b9e\u4f8b\uff1b\u5982\u679c\u8bbe\u4e3aNone\uff0c\u4f7f\u7528\u4e8b\u4ef6\u5faa\u73af\u7684\u9ed8\u8ba4ThreadPoolExecutor\u5b9e\u4f8b\u3002save_flag,image,cc.lower()+'.gif')#\u4f59\u4e0b\u7684\u53c2\u6570\u662f\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\uff0c\u4ee5\u53ca\u53ef\u8c03\u7528\u5bf9\u8c61\u7684\u4f4d\u7f6e\u53c2\u6570status=HTTPStatus.okmsg='OK'ifverboseandmsg:print(cc,msg)returnResult(status,cc)12345678910111213141516171819@asyncio.coroutine\u00a0\u00a0\u00a0\u00a0defdownload_one(cc,base_url,semaphore,verbose):\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0with(yieldfromsemaphore):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0image=yieldfromget_flag(base_url,cc)\u00a0\u00a0\u00a0\u00a0exceptweb.HTTPNotFound:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0status=HTTPStatus.not_found\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0msg='notfound'\u00a0\u00a0\u00a0\u00a0exceptExceptionasexc:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseFetchError(cc)fromexc\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0loop=asyncio.get_event_loop()#\u83b7\u53d6\u4e8b\u4ef6\u5faa\u73af\u5bf9\u8c61\u7684\u5f15\u7528\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0loop.run_in_executor(None,#run_in_executor\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662fExecutor\u5b9e\u4f8b\uff1b\u5982\u679c\u8bbe\u4e3aNone\uff0c\u4f7f\u7528\u4e8b\u4ef6\u5faa\u73af\u7684\u9ed8\u8ba4ThreadPoolExecutor\u5b9e\u4f8b\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0save_flag,image,cc.lower()+'.gif')#\u4f59\u4e0b\u7684\u53c2\u6570\u662f\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\uff0c\u4ee5\u53ca\u53ef\u8c03\u7528\u5bf9\u8c61\u7684\u4f4d\u7f6e\u53c2\u6570\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0status=HTTPStatus.ok\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0msg='OK'\u00a0\u00a0\u00a0\u00a0ifverboseandmsg:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(cc,msg)\u00a0\u00a0\u00a0\u00a0returnResult(status,cc)\u7b2c\u5341\u4e5d\u7ae0:\u52a8\u6001\u5c5e\u6027\u548c\u7279\u6027\u5728python\u4e2d,\u6570\u636e\u7684\u5c5e\u6027\u548c\u5904\u7406\u6570\u636e\u7684\u65b9\u6cd5\u90fd\u53ef\u4ee5\u79f0\u4e3a\u5c5e\u6027.\u9664\u4e86\u5c5e\u6027,pythpn\u8fd8\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684API,\u7528\u4e8e\u63a7\u5236\u5c5e\u6027\u7684\u8bbf\u95ee\u6743\u9650,\u4ee5\u53ca\u5b9e\u73b0\u52a8\u6001\u5c5e\u6027,\u5982obj.attr\u65b9\u5f0f\u548c__getattr__\u8ba1\u7b97\u5c5e\u6027.\u52a8\u6001\u521b\u5efa\u5c5e\u6027\u662f\u4e00\u79cd\u5143\u7f16\u7a0b,\u4f7f\u7528\u52a8\u6001\u5c5e\u6027\u8f6c\u6362\u6570\u636e\u901a\u5e38,\u89e3\u6790\u540e\u7684json\u6570\u636e\u9700\u8981\u5f62\u5982feed[\u2018Schedule\u2019][\u2018events\u2019][40][\u2018name\u2019]\u5f62\u5f0f\u8bbf\u95ee,\u5fc5\u8981\u60c5\u51b5\u4e0b\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u6362\u6210\u4ee5\u5c5e\u6027\u8bbf\u95ee\u65b9\u5f0ffeed.Schedule.events[40].name\u83b7\u5f97\u90a3\u4e2a\u503c.PythonfromcollectionsimportabcclassFrozenJSON:\"\"\"\u4e00\u4e2a\u53ea\u8bfb\u63a5\u53e3\uff0c\u4f7f\u7528\u5c5e\u6027\u8868\u793a\u6cd5\u8bbf\u95eeJSON\u7c7b\u5bf9\u8c61\"\"\"def__init__(self,mapping):self.__data=dict(mapping)def__getattr__(self,name):ifhasattr(self.__data,name):returngetattr(self.__data,name)else:returnFrozenJSON.build(self.__data[name])#\u4eceself.__data\u4e2d\u83b7\u53d6name\u952e\u5bf9\u5e94\u7684\u5143\u7d20@classmethoddefbuild(cls,obj):ifisinstance(obj,abc.Mapping):returncls(obj)elifisinstance(obj,abc.MutableSequence):return[cls.build(item)foriteminobj]else:#\u5982\u679c\u65e2\u4e0d\u662f\u5b57\u5178\u4e5f\u4e0d\u662f\u5217\u8868\uff0c\u90a3\u4e48\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u5143\u7d20returnobj12345678910111213141516171819fromcollectionsimportabcclassFrozenJSON:\u00a0\u00a0\u00a0\u00a0\"\"\"\u4e00\u4e2a\u53ea\u8bfb\u63a5\u53e3\uff0c\u4f7f\u7528\u5c5e\u6027\u8868\u793a\u6cd5\u8bbf\u95eeJSON\u7c7b\u5bf9\u8c61\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0def__init__(self,mapping):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__data=dict(mapping)\u00a0\u00a0\u00a0\u00a0def__getattr__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhasattr(self.__data,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returngetattr(self.__data,name)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnFrozenJSON.build(self.__data[name])#\u4eceself.__data\u4e2d\u83b7\u53d6name\u952e\u5bf9\u5e94\u7684\u5143\u7d20\u00a0\u00a0\u00a0\u00a0@classmethod\u00a0\u00a0\u00a0\u00a0defbuild(cls,obj):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifisinstance(obj,abc.Mapping):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returncls(obj)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifisinstance(obj,abc.MutableSequence):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return[cls.build(item)foriteminobj]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:#\u5982\u679c\u65e2\u4e0d\u662f\u5b57\u5178\u4e5f\u4e0d\u662f\u5217\u8868\uff0c\u90a3\u4e48\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnobj\u4f7f\u7528new\u65b9\u6cd5\u4ee5\u7075\u6d3b\u7684\u65b9\u5f0f\u521b\u5efa\u5bf9\u8c61\u6211\u4eec\u901a\u5e38\u628a__init__\u6210\u4e3a\u6784\u9020\u65b9\u6cd5,\u8fd9\u662f\u4ece\u5176\u4ed6\u8bed\u8a00\u501f\u9274\u8fc7\u6765\u7684\u672f\u8bed.\u5176\u5b9e,\u7528\u4e8e\u6784\u9020\u5b9e\u4f8b\u7684\u7279\u6b8a\u65b9\u6cd5\u662f__new__:\u8fd9\u662f\u4e2a\u7c7b\u65b9\u6cd5,\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5b9e\u4f8b.\u8fd4\u56de\u7684\u5b9e\u4f8b\u5c06\u4f5c\u4e3a\u4ee5\u540e\u7684self\u4f20\u7ed9__init__\u65b9\u6cd5.\u7b2c\u4e8c\u5341\u7ae0:\u5c5e\u6027\u63cf\u8ff0\u7b26\u63cf\u8ff0\u7b26\u662f\u5b9e\u73b0\u4e86\u7279\u6027\u534f\u8bae\u7684\u7c7b,\u8fd9\u4e2a\u534f\u8bae\u5305\u62ec__get__,__set__\u548c__delete__\u65b9\u6cd5.\u901a\u5e38,\u53ef\u4ee5\u5b9e\u73b0\u90e8\u5206\u534f\u8bae.\u8986\u76d6\u578b\u4e0e\u975e\u8986\u76d6\u578b\u63cf\u8ff0\u7b26\u5bf9\u6bd4python\u5b58\u53d6\u5c5e\u6027\u7684\u65b9\u5f0f\u662f\u4e0d\u5bf9\u7b49\u7684.\u901a\u8fc7\u5b9e\u4f8b\u8bfb\u53d6\u5c5e\u6027\u65f6,\u901a\u5e38\u8fd4\u56de\u7684\u662f\u5b9e\u4f8b\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027,\u4f46\u662f,\u5982\u679c\u5b9e\u4f8b\u4e2d\u6ca1\u6709\u6307\u5b9a\u7684\u5c5e\u6027,\u90a3\u4e48\u4f1a\u4ece\u83b7\u53d6\u7c7b\u5c5e\u6027.\u800c\u5b9e\u4f8b\u4e2d\u5c5e\u6027\u8d4b\u503c\u65f6,\u901a\u5e38\u4f1a\u5728\u5b9e\u4f8b\u4e2d\u521b\u5efa\u5c5e\u6027,\u6839\u672c\u4e0d\u5f71\u54cd\u7c7b.\u8fd9\u79cd\u4e0d\u5bf9\u7b49\u7684\u5904\u7406\u65b9\u5f0f\u5bf9\u63cf\u8ff0\u7b26\u4e5f\u6709\u5f71\u54cd.\u6839\u636e\u662f\u5426\u5b9a\u4e49__set__\u65b9\u6cd5,\u63cf\u8ff0\u7b26\u53ef\u5206\u4e3a\u4e24\u5927\u7c7b:\u8986\u76d6\u578b\u63cf\u8ff0\u7b26\u548c\u4e0e\u975e\u8986\u76d6\u578b\u63cf\u8ff0\u7b26.\u5b9e\u73b0__set__\u65b9\u6cd5\u7684\u63cf\u8ff0\u7b26\u5c5e\u4e8e\u8986\u76d6\u578b\u63cf\u8ff0\u7b26,\u56e0\u4e3a\u867d\u7136\u63cf\u8ff0\u7b26\u662f\u7c7b\u5c5e\u6027,\u4f46\u662f\u5b9e\u73b0__set__\u65b9\u6cd5\u7684\u8bdd,\u4f1a\u8986\u76d6\u5bf9\u5b9e\u4f8b\u5c5e\u6027\u7684\u8d4b\u503c\u64cd\u4f5c.\u56e0\u6b64\u4f5c\u4e3a\u7c7b\u65b9\u6cd5\u7684__set__\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u5b9e\u4f8binstance.\u770b\u4e2a\u4f8b\u5b50:Pythondefprint_args(*args):#\u6253\u5370\u529f\u80fdprint(args)classOverriding:#\u8bbe\u7f6e\u4e86__set__\u548c__get__def__get__(self,instance,owner):print_args('get',self,instance,owner)def__set__(self,instance,value):print_args('set',self,instance,value)classOverridingNoGet:#\u6ca1\u6709__get__\u65b9\u6cd5\u7684\u8986\u76d6\u578b\u63cf\u8ff0\u7b26def__set__(self,instance,value):print_args('set',self,instance,value)classNonOverriding:#\u6ca1\u6709__set__\u65b9\u6cd5\uff0c\u6240\u4ee5\u8fd9\u662f\u975e\u8986\u76d6\u578b\u63cf\u8ff0\u7b26def__get__(self,instance,owner):print_args('get',self,instance,owner)classManaged:#\u6258\u7ba1\u7c7b\uff0c\u4f7f\u7528\u5404\u4e2a\u63cf\u8ff0\u7b26\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8bover=Overriding()over_no_get=OverridingNoGet()non_over=NonOverriding()defspam(self):print('->Managed.spam({})'.format(repr(self)))12345678910111213141516171819202122232425defprint_args(*args):#\u6253\u5370\u529f\u80fd\u00a0\u00a0\u00a0\u00a0print(args)\u00a0classOverriding:\u00a0\u00a0#\u8bbe\u7f6e\u4e86__set__\u548c__get__\u00a0\u00a0\u00a0\u00a0def__get__(self,instance,owner):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print_args('get',self,instance,owner)\u00a0\u00a0\u00a0\u00a0\u00a0def__set__(self,instance,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print_args('set',self,instance,value)\u00a0classOverridingNoGet:\u00a0\u00a0#\u6ca1\u6709__get__\u65b9\u6cd5\u7684\u8986\u76d6\u578b\u63cf\u8ff0\u7b26\u00a0\u00a0\u00a0\u00a0def__set__(self,instance,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print_args('set',self,instance,value)\u00a0classNonOverriding:\u00a0\u00a0#\u6ca1\u6709__set__\u65b9\u6cd5\uff0c\u6240\u4ee5\u8fd9\u662f\u975e\u8986\u76d6\u578b\u63cf\u8ff0\u7b26\u00a0\u00a0\u00a0\u00a0def__get__(self,instance,owner):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print_args('get',self,instance,owner)\u00a0classManaged:\u00a0\u00a0#\u6258\u7ba1\u7c7b\uff0c\u4f7f\u7528\u5404\u4e2a\u63cf\u8ff0\u7b26\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u00a0\u00a0\u00a0\u00a0over=Overriding()\u00a0\u00a0\u00a0\u00a0over_no_get=OverridingNoGet()\u00a0\u00a0\u00a0\u00a0non_over=NonOverriding()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defspam(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('->Managed.spam({})'.format(repr(self)))\u8986\u76d6\u578b\u63cf\u8ff0\u7b26Pythonobj=Managed()obj.over#('get',<__main__.Overridingobject>,<__main__.Managedobject>,<class'__main__.Managed'>)obj.over=7#('set',<__main__.Overridingobject>,<__main__.Managedobject>,7)obj.over#('get',<__main__.Overridingobject>,<__main__.Managedobject>,<class'__main__.Managed'>)1234obj=Managed()obj.over\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#('get',<__main__.Overridingobject>,<__main__.Managedobject>,<class'__main__.Managed'>)obj.over=7\u00a0\u00a0\u00a0\u00a0#('set',<__main__.Overridingobject>,<__main__.Managedobject>,7)obj.over\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#('get',<__main__.Overridingobject>,<__main__.Managedobject>,<class'__main__.Managed'>)\u540d\u4e3aover\u7684\u5b9e\u4f8b\u5c5e\u6027,\u4f1a\u8986\u76d6\u8bfb\u53d6\u548c\u8d4b\u503cobj.over\u7684\u884c\u4e3a.\u6ca1\u6709__get__\u65b9\u6cd5\u7684\u8986\u76d6\u578b\u63cf\u8ff0\u7b26Pythonobj=Managed()obj.over_no_getobj.over_no_get=7#('set',<__main__.OverridingNoGetobject>,<__main__.Managedobject>,7)obj.over_no_get1234obj=Managed()obj.over_no_getobj.over_no_get=7\u00a0\u00a0#('set',<__main__.OverridingNoGetobject>,<__main__.Managedobject>,7)obj.over_no_get\u53ea\u6709\u5728\u8d4b\u503c\u64cd\u4f5c\u7684\u65f6\u5019\u624d\u56de\u8986\u76d6\u884c\u4e3a.\u65b9\u6cd5\u662f\u63cf\u8ff0\u7b26python\u7684\u7c7b\u4e2d\u5b9a\u4e49\u7684\u51fd\u6570\u5c5e\u4e8e\u7ed1\u5b9a\u65b9\u6cd5,\u5982\u679c\u7528\u6237\u5b9a\u4e49\u7684\u51fd\u6570\u90fd\u6709__get__\u65b9\u6cd5,\u6240\u4ee5\u4f9d\u9644\u5230\u7c7b\u4e0a,\u5c31\u76f8\u5f53\u4e8e\u63cf\u8ff0\u7b26.obj.spam\u548cManaged.spam\u83b7\u53d6\u7684\u662f\u4e0d\u540c\u7684\u5bf9\u8c61.\u524d\u8005\u662f\u540e\u8005\u662f.\u51fd\u6570\u90fd\u662f\u975e\u8986\u76d6\u578b\u63cf\u8ff0\u7b26.\u5728\u51fd\u6570\u4e0a\u8c03\u7528__get__\u65b9\u6cd5\u65f6\u4f20\u5165\u5b9e\u4f8b\u4f5c\u4e3aself,\u5f97\u5230\u7684\u662f\u7ed1\u5b9a\u5230\u90a3\u4e2a\u5b9e\u4f8b\u7684\u65b9\u6cd5.\u8c03\u7528\u51fd\u6570\u7684__get__\u65f6\u4f20\u5165\u7684instance\u662fNone,\u90a3\u4e48\u5f97\u5230\u7684\u662f\u51fd\u6570\u672c\u8eab.\u8fd9\u5c31\u662f\u5f62\u53c2self\u7684\u9690\u5f0f\u7ed1\u5b9a\u65b9\u5f0f.\u63cf\u8ff0\u7b26\u7528\u6cd5\u5efa\u8bae\u4f7f\u7528\u7279\u6027\u4ee5\u4fdd\u6301\u7b80\u5355\u5185\u7f6e\u7684property\u7c7b\u521b\u5efa\u7684\u662f\u8986\u76d6\u578b\u63cf\u8ff0\u7b26,__set__\u548c__get__\u90fd\u5b9e\u73b0\u4e86.\u53ea\u8bfb\u63cf\u8ff0\u7b26\u5fc5\u987b\u6709set\u65b9\u6cd5\u5982\u679c\u8981\u5b9e\u73b0\u53ea\u8bfb\u5c5e\u6027,__get__\u548c__set__\u4e24\u4e2a\u65b9\u6cd5\u5fc5\u987b\u90fd\u5b9a\u4e49,\u67d4\u5219,\u5b9e\u4f8b\u7684\u540c\u540d\u5c5e\u6027\u4f1a\u8986\u76d6\u63cf\u8ff0\u7b26.\u7528\u4e8e\u9a8c\u8bc1\u7684\u63cf\u8ff0\u7b26\u53ef\u4ee5\u53ea\u6709set\u65b9\u6cd5\u4ec0\u4e48\u662f\u7528\u4e8e\u9a8c\u8bc1\u7684\u63cf\u8ff0\u7b26,\u6bd4\u65b9\u6709\u4e2a\u5e74\u9f84\u5c5e\u6027,\u4f46\u5b83\u53ea\u80fd\u88ab\u8bbe\u7f6e\u4e3a\u6570\u5b57,\u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u53ea\u5b9a\u4e49__set__\u6765\u9a8c\u8bc1\u503c\u662f\u5426\u5408\u6cd5.\u8fd9\u79cd\u60c5\u51b5\u4e0d\u9700\u8981\u8bbe\u7f6e__get__,\u56e0\u4e3a\u5b9e\u4f8b\u5c5e\u6027\u76f4\u63a5\u4ece__dict__\u4e2d\u83b7\u53d6,\u800c\u4e0d\u7528\u53bb\u89e6\u53d1__get__\u65b9\u6cd5.\u7b2c\u4e8c\u5341\u4e00\u7ae0:\u7c7b\u5143\u7f16\u7a0b\u7c7b\u5143\u7f16\u7a0b\u662f\u6307\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u6216\u5b9a\u5236\u7c7b\u7684\u6280\u827a.\u5728python\u4e2d,\u7c7b\u662f\u4e00\u7b49\u5bf9\u8c61,\u56e0\u6b64\u4efb\u4f55\u65f6\u5019\u90fd\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u521b\u5efa\u7c7b,\u800c\u65e0\u9700\u4f7f\u7528class\u5173\u952e\u5b57.\u7c7b\u88c5\u9970\u5668\u4e5f\u662f\u51fd\u6570,\u4e0d\u8fc7\u80fd\u591f\u5ba1\u67e5,\u4fee\u6539,\u751a\u81f3\u628a\u88ab\u88c5\u9970\u7684\u7c7b\u66ff\u6362\u6210\u5176\u4ed6\u7c7b.\u5143\u7c7b\u662f\u7c7b\u5143\u7f16\u7a0b\u6700\u9ad8\u7ea7\u7684\u5de5\u5177.\u4ec0\u4e48\u662f\u5143\u7c7b\u5462?\u6bd4\u5982\u8bf4str\u662f\u521b\u5efa\u5b57\u7b26\u4e32\u7684\u7c7b,int\u662f\u521b\u5efa\u6574\u6570\u7684\u7c7b.\u90a3\u4e48\u5143\u7c7b\u5c31\u662f\u521b\u5efa\u7c7b\u7684\u7c7b.\u6240\u6709\u7684\u7c7b\u90fd\u7531\u5143\u7c7b\u521b\u5efa.\u5176\u4ed6class\u53ea\u662f\u539f\u6765\u7684\u201d\u5b9e\u4f8b\u201d.\u672c\u7ae0\u8ba8\u8bba\u5982\u4f55\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u7c7b.\u7c7b\u5de5\u5382\u51fd\u6570\u6807\u51c6\u5e93\u4e2d\u5c31\u6709\u4e00\u4e2a\u4f8b\u5b50\u662f\u7c7b\u5de5\u5382\u51fd\u6570\u2013\u5177\u540d\u5143\u7ec4(collections.namedtuple).\u6211\u4eec\u628a\u4e00\u4e2a\u7c7b\u540d\u548c\u51e0\u4e2a\u5c5e\u6027\u4f20\u7ed9\u8fd9\u4e2a\u51fd\u6570,\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2atuple\u7684\u5b50\u7c7b,\u5176\u4e2d\u7684\u5143\u7d20\u901a\u8fc7\u540d\u79f0\u83b7\u53d6.\u5047\u8bbe\u6211\u4eec\u521b\u5efa\u4e00\u4e2arecord_factory,\u4e0e\u5177\u540d\u5143\u7ec4\u5177\u6709\u76f8\u4f3c\u7684\u529f\u80fd:Python>>>Dog=record_factory('Dog','nameweightowner')>>>rex=Dog('Rex',30,'Bob')>>>rexDog(name='Rex',weight=30,owner='Bob')>>>rex.weight=32>>>Dog.__mro__(<class'factories.Dog'>,<class'object'>)1234567>>>Dog=record_factory('Dog','nameweightowner')>>>rex=Dog('Rex',30,'Bob')>>>rexDog(name='Rex',weight=30,owner='Bob')>>>rex.weight=32>>>Dog.__mro__(<class'factories.Dog'>,<class'object'>)\u6211\u4eec\u8981\u505a\u4e00\u4e2a\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u7c7b\u7684,\u7c7b\u5de5\u5382\u51fd\u6570:Pythondefrecord_factory(cls_name,field_names):try:field_names=field_names.replace(',','').split()#\u5c5e\u6027\u62c6\u5206exceptAttributeError:#no.replaceor.splitpass#assumeit'salreadyasequenceofidentifiersfield_names=tuple(field_names)#\u4f7f\u7528\u5c5e\u6027\u540d\u6784\u5efa\u5143\u7ec4\uff0c\u8fd9\u5c06\u6210\u4e3a\u65b0\u5efa\u7c7b\u7684__slots__\u5c5e\u6027def__init__(self,*args,**kwargs):#\u8fd9\u4e2a\u51fd\u6570\u5c06\u6210\u4e3a\u65b0\u5efa\u7c7b\u7684__init__\u65b9\u6cd5attrs=dict(zip(self.__slots__,args))attrs.update(kwargs)forname,valueinattrs.items():setattr(self,name,value)def__iter__(self):#\u5b9e\u73b0__iter__\u51fd\u6570,\u53d8\u6210\u53ef\u8fed\u4ee3\u5bf9\u8c61fornameinself.__slots__:yieldgetattr(self,name)def__repr__(self):#\u751f\u6210\u53cb\u597d\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0fvalues=','.join('{}={!r}'.format(*i)foriinzip(self.__slots__,self))return'{}({})'.format(self.__class__.__name__,values)cls_attrs=dict(__slots__=field_names,#\u7ec4\u5efa\u7c7b\u5c5e\u6027\u5b57\u5178__init__=__init__,__iter__=__iter__,__repr__=__repr__)returntype(cls_name,(object,),cls_attrs)#\u8c03\u7528\u5143\u7c7btype\u6784\u9020\u65b9\u6cd5\uff0c\u6784\u5efa\u65b0\u7c7b\uff0c\u7136\u540e\u5c06\u5176\u8fd4\u56de12345678910111213141516171819202122232425262728defrecord_factory(cls_name,field_names):\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0field_names=field_names.replace(',','').split()\u00a0\u00a0#\u5c5e\u6027\u62c6\u5206\u00a0\u00a0\u00a0\u00a0exceptAttributeError:\u00a0\u00a0#no.replaceor.split\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0#assumeit'salreadyasequenceofidentifiers\u00a0\u00a0\u00a0\u00a0field_names=tuple(field_names)\u00a0\u00a0#\u4f7f\u7528\u5c5e\u6027\u540d\u6784\u5efa\u5143\u7ec4\uff0c\u8fd9\u5c06\u6210\u4e3a\u65b0\u5efa\u7c7b\u7684__slots__\u5c5e\u6027\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,*args,**kwargs):\u00a0\u00a0#\u8fd9\u4e2a\u51fd\u6570\u5c06\u6210\u4e3a\u65b0\u5efa\u7c7b\u7684__init__\u65b9\u6cd5\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs=dict(zip(self.__slots__,args))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs.update(kwargs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forname,valueinattrs.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setattr(self,name,value)\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0#\u5b9e\u73b0__iter__\u51fd\u6570,\u53d8\u6210\u53ef\u8fed\u4ee3\u5bf9\u8c61\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fornameinself.__slots__:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldgetattr(self,name)\u00a0\u00a0\u00a0\u00a0\u00a0def__repr__(self):\u00a0\u00a0#\u751f\u6210\u53cb\u597d\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0values=','.join('{}={!r}'.format(*i)fori\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0inzip(self.__slots__,self))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return'{}({})'.format(self.__class__.__name__,values)\u00a0\u00a0\u00a0\u00a0\u00a0cls_attrs=dict(__slots__=field_names,\u00a0\u00a0#\u7ec4\u5efa\u7c7b\u5c5e\u6027\u5b57\u5178\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0__init__\u00a0\u00a0=__init__,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0__iter__\u00a0\u00a0=__iter__,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0__repr__\u00a0\u00a0=__repr__)\u00a0\u00a0\u00a0\u00a0\u00a0returntype(cls_name,(object,),cls_attrs)\u00a0\u00a0#\u8c03\u7528\u5143\u7c7btype\u6784\u9020\u65b9\u6cd5\uff0c\u6784\u5efa\u65b0\u7c7b\uff0c\u7136\u540e\u5c06\u5176\u8fd4\u56detype\u5c31\u662f\u5143\u7c7b,\u5b9e\u4f8b\u7684\u6700\u540e\u4e00\u884c\u4f1a\u6784\u9020\u4e00\u4e2a\u7c7b,\u7c7b\u540d\u662fcls_name,\u552f\u4e00\u76f4\u63a5\u7684\u8d85\u7c7b\u662fobject.\u5728python\u4e2d\u505a\u5143\u7f16\u7a0b\u65f6,\u6700\u597d\u4e0d\u8981\u7528exec\u548ceval\u51fd\u6570.\u8fd9\u4e24\u4e2a\u51fd\u6570\u4f1a\u5e26\u6765\u4e25\u91cd\u7684\u5b89\u5168\u98ce\u9669.\u5143\u7c7b\u57fa\u7840\u77e5\u8bc6\u5143\u7c7b\u662f\u5236\u9020\u7c7b\u7684\u5de5\u5382,\u4e0d\u8fc7\u4e0d\u662f\u51fd\u6570,\u672c\u8eab\u4e5f\u662f\u7c7b.\u5143\u7c7b\u662f\u7528\u4e8e\u6784\u5efa\u7c7b\u7684\u7c7b.\u4e3a\u4e86\u907f\u514d\u65e0\u9650\u56de\u6eaf,type\u662f\u5176\u81ea\u8eab\u7684\u5b9e\u4f8b.object\u7c7b\u548ctype\u7c7b\u5173\u7cfb\u5f88\u72ec\u7279,object\u662ftype\u7684\u5b9e\u4f8b,\u800ctype\u662fobject\u7684\u5b50\u7c7b.\u5143\u7c7b\u7684\u7279\u6b8a\u65b9\u6cd5preparetype\u6784\u9020\u65b9\u6cd5\u4ee5\u53ca\u5143\u7c7b\u7684__new__\u548c__init__\u65b9\u6cd5\u90fd\u4f1a\u6536\u5230\u8981\u8ba1\u7b97\u7684\u7c7b\u7684\u5b9a\u4e49\u4f53,\u5f62\u5f0f\u662f\u540d\u79f0\u5230\u5c5e\u6027\u7684\u6620\u50cf.\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u8fd9\u4e2a\u6620\u5c04\u662f\u5b57\u5178,\u5c5e\u6027\u5728\u7c7b\u7684\u5b9a\u4e49\u4f53\u4e2d\u987a\u5e8f\u4f1a\u4e22\u5931.\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u51b3\u529e\u6cd5\u662f,\u4f7f\u7528python3\u5f15\u5165\u7684\u7279\u6b8a\u65b9\u6cd5__prepare__,\u8fd9\u4e2a\u65b9\u6cd5\u53ea\u5728\u5143\u7c7b\u4e2d\u6709\u7528,\u800c\u4e14\u5fc5\u987b\u58f0\u660e\u4e3a\u7c7b\u65b9\u6cd5(\u5373\u8981\u4f7f\u7528@classmethod\u88c5\u9970\u5668\u5b9a\u4e49).\u89e3\u91ca\u5668\u8c03\u7528\u5143\u7c7b\u7684__new__\u65b9\u6cd5\u4e4b\u524d\u4f1a\u5148\u8c03\u7528__prepare__\u65b9\u6cd5,\u4f7f\u7528\u7c7b\u5b9a\u4e49\u4f53\u4e2d\u7684\u5c5e\u6027\u521b\u5efa\u6620\u5c04.__prepare__\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5143\u7c7b,\u968f\u540e\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f\u8981\u6784\u5efa\u7c7b\u7684\u540d\u79f0\u548c\u57fa\u7c7b\u7ec4\u6210\u7684\u539f\u5219,\u8fd4\u56de\u503c\u5fc5\u987b\u662f\u6620\u5c04.PythonclassEntityMeta(type):\"\"\"Metaclassforbusinessentitieswithvalidatedfields\"\"\"@classmethoddef__prepare__(cls,name,bases):returncollections.OrderedDict()#\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684OrderedDict\u5b9e\u4f8b\uff0c\u7c7b\u5c5e\u6027\u5c06\u5b58\u50a8\u5728\u91cc\u9762\u3002def__init__(cls,name,bases,attr_dict):super().__init__(name,bases,attr_dict)cls._field_names=[]#\u4e2d\u521b\u5efa\u4e00\u4e2a_field_names\u5c5e\u6027forkey,attrinattr_dict.items():ifisinstance(attr,Validated):type_name=type(attr).__name__attr.storage_name='_{}#{}'.format(type_name,key)cls._field_names.append(key)classEntity(metaclass=EntityMeta):\"\"\"Businessentitywithvalidatedfields\"\"\"@classmethoddeffield_names(cls):#field_names\u7c7b\u65b9\u6cd5\u7684\u4f5c\u7528\u7b80\u5355\uff1a\u6309\u7167\u6dfb\u52a0\u5b57\u6bb5\u7684\u987a\u5e8f\u4ea7\u51fa\u5b57\u6bb5\u7684\u540d\u79f0fornameincls._field_names:yieldname1234567891011121314151617181920212223classEntityMeta(type):\u00a0\u00a0\u00a0\u00a0\"\"\"Metaclassforbusinessentitieswithvalidatedfields\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0@classmethod\u00a0\u00a0\u00a0\u00a0def__prepare__(cls,name,bases):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returncollections.OrderedDict()\u00a0\u00a0#\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684OrderedDict\u5b9e\u4f8b\uff0c\u7c7b\u5c5e\u6027\u5c06\u5b58\u50a8\u5728\u91cc\u9762\u3002\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(cls,name,bases,attr_dict):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super().__init__(name,bases,attr_dict)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cls._field_names=[]\u00a0\u00a0#\u4e2d\u521b\u5efa\u4e00\u4e2a_field_names\u5c5e\u6027\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkey,attrinattr_dict.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifisinstance(attr,Validated):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type_name=type(attr).__name__\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attr.storage_name='_{}#{}'.format(type_name,key)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cls._field_names.append(key)\u00a0classEntity(metaclass=EntityMeta):\u00a0\u00a0\u00a0\u00a0\"\"\"Businessentitywithvalidatedfields\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0@classmethod\u00a0\u00a0\u00a0\u00a0deffield_names(cls):\u00a0\u00a0#field_names\u7c7b\u65b9\u6cd5\u7684\u4f5c\u7528\u7b80\u5355\uff1a\u6309\u7167\u6dfb\u52a0\u5b57\u6bb5\u7684\u987a\u5e8f\u4ea7\u51fa\u5b57\u6bb5\u7684\u540d\u79f0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fornameincls._field_names:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yieldname\u7ed3\u8bedpython\u662f\u4e00\u95e8\u5373\u5bb9\u6613\u4e0a\u624b\u53c8\u5f3a\u5927\u7684\u8bed\u8a00.3\u8d5e23\u6536\u85cf11\u8bc4\u8bba"]},
{"art_title": ["\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-\u5cad\u56de\u5f52\u548cLASSO"], "art_url": ["http://python.jobbole.com/88799/"], "art_create_time": ["2017/10/29"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-10-27-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5-%E5%B2%AD%E5%9B%9E%E5%BD%92%E5%92%8CLASSO%E5%9B%9E%E5%BD%92/bias_var.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u7ee7\u7eed\u7ebf\u6027\u56de\u5f52\u7684\u603b\u7ed3,\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e24\u79cd\u7ebf\u6027\u56de\u5f52\u7684\u7f29\u51cf(shrinkage)\u65b9\u6cd5\u7684\u57fa\u7840\u77e5\u8bc6:\u5cad\u56de\u5f52(RidgeRegression)\u548cLASSO(LeastAbsoluteShrinkageandSelectionOperator)\u5e76\u5bf9\u5176\u8fdb\u884c\u4e86Python\u5b9e\u73b0\u3002\u540c\u65f6\u4e5f\u5bf9\u4e00\u79cd\u66f4\u4e3a\u7b80\u5355\u7684\u5411\u524d\u9010\u6b65\u56de\u5f52\u8ba1\u7b97\u56de\u5f52\u7cfb\u6570\u7684\u65b9\u6cd5\u8fdb\u884c\u4e86\u76f8\u5e94\u7684\u5b9e\u73b0\u3002\u6b63\u6587\u901a\u8fc7\u4e0a\u4e00\u7bc7\u300a\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-\u6807\u51c6\u4e0e\u5c40\u90e8\u52a0\u6743\u7ebf\u6027\u56de\u5f52\u300b\u4e2d\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7684\u516c\u5f0fw=(X^T*X)^(-1)X^T*y\u4e2d\u53ef\u4ee5\u770b\u51fa\u5728\u8ba1\u7b97\u56de\u5f52\u7cfb\u6570\u7684\u65f6\u5019\u6211\u4eec\u9700\u8981\u8ba1\u7b97\u77e9\u9635X^TX\u7684\u9006\uff0c\u4f46\u662f\u5982\u679c\u8be5\u77e9\u9635\u662f\u4e2a\u5947\u5f02\u77e9\u9635\uff0c\u5219\u65e0\u6cd5\u5bf9\u5176\u8fdb\u884c\u6c42\u89e3\u3002\u90a3\u4e48\u4ec0\u4e48\u60c5\u51b5\u4e0b\u8be5\u77e9\u9635\u4f1a\u6709\u5947\u5f02\u6027\u5462?X\u672c\u8eab\u5b58\u5728\u7ebf\u6027\u76f8\u5173\u5173\u7cfb(\u591a\u91cd\u5171\u7ebf\u6027),\u5373\u975e\u6ee1\u79e9\u77e9\u9635\u3002\u5982\u679c\u6570\u636e\u7684\u7279\u5f81\u4e2d\u5b58\u5728\u4e24\u4e2a\u76f8\u5173\u7684\u53d8\u91cf\uff0c\u5373\u4f7f\u5e76\u4e0d\u662f\u5b8c\u5168\u7ebf\u6027\u76f8\u5173\uff0c\u4f46\u662f\u4e5f\u4f1a\u9020\u6210\u77e9\u9635\u6c42\u9006\u7684\u65f6\u5019\u9020\u6210\u6c42\u89e3\u4e0d\u7a33\u5b9a\u3002\u5f53\u6570\u636e\u7279\u5f81\u6bd4\u6570\u636e\u91cf\u8fd8\u8981\u591a\u7684\u65f6\u5019,\u5373m<n,\u8fd9\u65f6\u5019\u77e9\u9635XX\u662f\u4e00\u4e2a\u77ee\u80d6\u578b\u7684\u77e9\u9635\uff0c\u975e\u6ee1\u79e9\u3002\u5bf9\u4e8e\u4e0a\u9762\u7684\u4e24\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u6700\u521d\u7684\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u505a\u4e00\u5b9a\u7684\u53d8\u5316\u4f7f\u539f\u5148\u65e0\u6cd5\u6c42\u9006\u7684\u77e9\u9635\u53d8\u5f97\u975e\u5947\u5f02\uff0c\u4f7f\u5f97\u95ee\u9898\u53ef\u4ee5\u7a33\u5b9a\u6c42\u89e3\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7f29\u51cf\u7684\u65b9\u5f0f\u6765\u5904\u7406\u8fd9\u4e9b\u95ee\u9898\u4f8b\u5982\u5cad\u56de\u5f52\u548cLASSO.\u4e2d\u5fc3\u5316\u548c\u6807\u51c6\u5316\u8fd9\u91cc\u5148\u4ecb\u7ecd\u4e0b\u6570\u636e\u7684\u4e2d\u5fc3\u5316\u548c\u6807\u51c6\u5316\uff0c\u5728\u56de\u5f52\u95ee\u9898\u548c\u4e00\u4e9b\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u4e2d\u901a\u5e38\u8981\u5bf9\u539f\u59cb\u6570\u636e\u8fdb\u884c\u4e2d\u5fc3\u5316\u548c\u6807\u51c6\u5316\u5904\u7406\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u5c06\u6570\u636e\u7684\u5747\u503c\u8c03\u6574\u52300\uff0c\u6807\u51c6\u5dee\u8c03\u6574\u4e3a1,\u8ba1\u7b97\u8fc7\u7a0b\u5f88\u7b80\u5355\u5c31\u662f\u5c06\u6240\u6709\u6570\u636e\u51cf\u53bb\u5e73\u5747\u503c\u540e\u518d\u9664\u4ee5\u6807\u51c6\u5dee:\u8fd9\u6837\u8c03\u6574\u540e\u7684\u5747\u503c:\u8c03\u6574\u540e\u7684\u6807\u51c6\u5dee:\u4e4b\u6240\u4ee5\u9700\u8981\u8fdb\u884c\u4e2d\u5fc3\u5316\u5176\u5b9e\u5c31\u662f\u4e2a\u5e73\u79fb\u8fc7\u7a0b\uff0c\u5c06\u6240\u6709\u6570\u636e\u7684\u4e2d\u5fc3\u5e73\u79fb\u5230\u539f\u70b9\u3002\u800c\u6807\u51c6\u5316\u5219\u662f\u4f7f\u5f97\u6240\u6709\u6570\u636e\u7684\u4e0d\u540c\u7279\u5f81\u90fd\u6709\u76f8\u540c\u7684\u5c3a\u5ea6Scale,\u8fd9\u6837\u5728\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u4ee5\u53ca\u5176\u4ed6\u65b9\u6cd5\u4f18\u5316\u7684\u65f6\u5019\u4e0d\u540c\u7279\u5f81\u53c2\u6570\u7684\u5f71\u54cd\u7a0b\u5ea6\u5c31\u4f1a\u4e00\u81f4\u4e86\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u53ef\u4ee5\u770b\u51fa\u5f97\u5230\u7684\u6807\u51c6\u5316\u6570\u636e\u5728\u6bcf\u4e2a\u7ef4\u5ea6\u4e0a\u7684\u5c3a\u5ea6\u662f\u4e00\u81f4\u7684(\u56fe\u7247\u6765\u81ea\u7f51\u7edc\uff0c\u4fb5\u5220)\u5cad\u56de\u5f52(RidgeRegression)\u6807\u51c6\u6700\u5c0f\u4e8c\u4e58\u6cd5\u4f18\u5316\u95ee\u9898:\u4e5f\u53ef\u4ee5\u901a\u8fc7\u77e9\u9635\u8868\u793a:\u5f97\u5230\u7684\u56de\u5f52\u7cfb\u6570\u4e3a:\u8fd9\u4e2a\u95ee\u9898\u89e3\u5b58\u5728\u4e14\u552f\u4e00\u7684\u6761\u4ef6\u5c31\u662fXX\u5217\u6ee1\u79e9:rank(X)=dim(X).\u5373\u4f7fX\u5217\u6ee1\u79e9\uff0c\u4f46\u662f\u5f53\u6570\u636e\u7279\u5f81\u4e2d\u5b58\u5728\u5171\u7ebf\u6027\uff0c\u5373\u76f8\u5173\u6027\u6bd4\u8f83\u5927\u7684\u65f6\u5019\uff0c\u4f1a\u4f7f\u5f97\u6807\u51c6\u6700\u5c0f\u4e8c\u4e58\u6c42\u89e3\u4e0d\u7a33\u5b9a,\u00a0XTX\u7684\u884c\u5217\u5f0f\u63a5\u8fd1\u96f6\uff0c\u8ba1\u7b97XTX\u7684\u65f6\u5019\u8bef\u5dee\u4f1a\u5f88\u5927\u3002\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u9700\u8981\u5728costfunction\u4e0a\u6dfb\u52a0\u4e00\u4e2a\u60e9\u7f5a\u9879\u03bb\uff0c\u79f0\u4e3aL2\u6b63\u5219\u5316\u3002\u8fd9\u4e2a\u65f6\u5019\u7684costfunction\u7684\u5f62\u5f0f\u5c31\u4e3a:\u901a\u8fc7\u52a0\u5165\u6b64\u60e9\u7f5a\u9879\u8fdb\u884c\u4f18\u5316\u540e\uff0c\u9650\u5236\u4e86\u56de\u5f52\u7cfb\u6570wiwi\u7684\u7edd\u5bf9\u503c\uff0c\u6570\u5b66\u4e0a\u53ef\u4ee5\u8bc1\u660e\u4e0a\u5f0f\u7684\u7b49\u4ef7\u5f62\u5f0f\u5982\u4e0b:\u5176\u4e2dt\u4e3a\u67d0\u4e2a\u9608\u503c\u3002\u5c06\u5cad\u56de\u5f52\u7cfb\u6570\u7528\u77e9\u9635\u7684\u5f62\u5f0f\u8868\u793a:\u53ef\u4ee5\u770b\u5230\uff0c\u5c31\u662f\u901a\u8fc7\u5c06XTX\u52a0\u4e0a\u4e00\u4e2a\u5355\u4f4d\u77e9\u9635\u662f\u7684\u77e9\u9635\u53d8\u6210\u975e\u5947\u5f02\u77e9\u9635\u5e76\u53ef\u4ee5\u8fdb\u884c\u6c42\u4f60\u8fd0\u7b97\u3002\u5cad\u56de\u5f52\u7684\u51e0\u4f55\u610f\u4e49\u4ee5\u4e24\u4e2a\u53d8\u91cf\u4e3a\u4f8b,\u6b8b\u5dee\u5e73\u65b9\u548c\u53ef\u4ee5\u8868\u793a\u4e3aw1,w2\u7684\u4e00\u4e2a\u4e8c\u6b21\u51fd\u6570\uff0c\u662f\u4e00\u4e2a\u5728\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u7684\u629b\u7269\u9762\uff0c\u53ef\u4ee5\u7528\u7b49\u503c\u7ebf\u6765\u8868\u793a\u3002\u800c\u9650\u5236\u6761\u4ef6w21+w22<t\uff0c\u76f8\u5f53\u4e8e\u5728\u4e8c\u7ef4\u5e73\u9762\u7684\u4e00\u4e2a\u5706\u3002\u8fd9\u4e2a\u65f6\u5019\u7b49\u503c\u7ebf\u4e0e\u5706\u76f8\u5207\u7684\u70b9\u4fbf\u662f\u5728\u7ea6\u675f\u6761\u4ef6\u4e0b\u7684\u6700\u4f18\u70b9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5cad\u56de\u5f52\u7684\u4e00\u4e9b\u6027\u8d28\u5f53\u5cad\u53c2\u6570\u03bb=0\u65f6\uff0c\u5f97\u5230\u7684\u89e3\u662f\u6700\u5c0f\u4e8c\u4e58\u89e3\u5f53\u5cad\u53c2\u6570\u03bb\u8d8b\u5411\u66f4\u5927\u65f6\uff0c\u5cad\u56de\u5f52\u7cfb\u6570wi\u8d8b\u5411\u4e8e0\uff0c\u7ea6\u675f\u9879t\u5f88\u5c0f\u5cad\u56de\u5f52\u7684Python\u5b9e\u73b0\u901a\u8fc7\u77e9\u9635\u7684\u5f62\u5f0f\u8ba1\u7b97w\u0302\u00a0,\u53ef\u4ee5\u5f88\u7b80\u5355\u7684\u5b9e\u73b0Pythondefridge_regression(X,y,lambd=0.2):'''\u83b7\u53d6\u5cad\u56de\u5f52\u7cfb\u6570'''XTX=X.T*Xm,_=XTX.shapeI=np.matrix(np.eye(m))w=(XTX+lambd*I).I*X.T*yreturnw12345678defridge_regression(X,y,lambd=0.2):\u00a0\u00a0\u00a0\u00a0'''\u83b7\u53d6\u5cad\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0XTX=X.T*X\u00a0\u00a0\u00a0\u00a0m,_=XTX.shape\u00a0\u00a0\u00a0\u00a0I=np.matrix(np.eye(m))\u00a0\u00a0\u00a0\u00a0w=(XTX+lambd*I).I*X.T*y\u00a0\u00a0\u00a0\u00a0returnw\u5cad\u8ff9\u56fe\u53ef\u4ee5\u77e5\u9053\u6c42\u5f97\u7684\u5cad\u7cfb\u6570wi\u662f\u5cad\u53c2\u6570\u03bb\u7684\u51fd\u6570\uff0c\u4e0d\u540c\u7684\u03bb\u03bb\u5f97\u5230\u4e0d\u540c\u7684\u5cad\u53c2\u6570wi,\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u589e\u5927\u03bb\u03bb\u7684\u503c\u6765\u5f97\u5230\u5cad\u56de\u5f52\u7cfb\u6570\u7684\u53d8\u5316\uff0c\u4ee5\u53ca\u5cad\u53c2\u6570\u7684\u53d8\u5316\u8f68\u8ff9\u56fe(\u5cad\u8ff9\u56fe),\u4e0d\u5b58\u5728\u5947\u5f02\u6027\u65f6\uff0c\u5cad\u8ff9\u56fe\u5e94\u7a33\u5b9a\u7684\u9010\u6e10\u8d8b\u5411\u4e8e0\u3002\u901a\u8fc7\u5cad\u8ff9\u56fe\u6211\u4eec\u53ef\u4ee5:\u89c2\u5bdf\u8f83\u4f73\u7684\u03bb\u53d6\u503c\u89c2\u5bdf\u53d8\u91cf\u662f\u5426\u6709\u591a\u91cd\u5171\u7ebf\u6027\u7ed8\u5236\u5cad\u8ff9\u56fe\u4e0a\u9762\u6211\u4eec\u901a\u8fc7\u51fd\u6570ridge_regression\u5b9e\u73b0\u4e86\u8ba1\u7b97\u5cad\u56de\u5f52\u7cfb\u6570\u7684\u8ba1\u7b97\uff0c\u6211\u4eec\u4f7f\u7528\u300a\u673a\u5668\u5b66\u4e60\u5b9e\u6218\u300b\u4e2d\u7684\u9c8d\u9c7c\u5e74\u9f84\u7684\u6570\u636e\u6765\u8fdb\u884c\u8ba1\u7b97\u5e76\u7ed8\u5236\u4e0d\u540c\u03bb\u03bb\u7684\u5cad\u53c2\u6570\u53d8\u5316\u7684\u8f68\u8ff9\u56fe\u3002\u6570\u636e\u4ee5\u53ca\u5b8c\u6574\u4ee3\u7801\u8be6\u89c1\u00a0https://github.com/PytLab/MLBox/tree/master/linear_regression\u9009\u53d630\u7ec4\u4e0d\u540c\u7684\u03bb\u03bb\u6765\u83b7\u53d6\u5cad\u7cfb\u6570\u77e9\u9635\u5305\u542b30\u4e2a\u4e0d\u540c\u7684\u5cad\u7cfb\u6570\u3002Pythondefridge_traj(X,y,ntest=30):'''\u83b7\u53d6\u5cad\u8f68\u8ff9\u77e9\u9635'''_,n=X.shapews=np.zeros((ntest,n))foriinrange(ntest):w=ridge_regression(X,y,lambd=exp(i-10))ws[i,:]=w.Treturnws123456789defridge_traj(X,y,ntest=30):\u00a0\u00a0\u00a0\u00a0'''\u83b7\u53d6\u5cad\u8f68\u8ff9\u77e9\u9635\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0_,n=X.shape\u00a0\u00a0\u00a0\u00a0ws=np.zeros((ntest,n))\u00a0\u00a0\u00a0\u00a0foriinrange(ntest):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w=ridge_regression(X,y,lambd=exp(i-10))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ws[i,:]=w.T\u00a0\u00a0\u00a0\u00a0returnws\u7ed8\u5236\u5cad\u8f68\u8ff9\u56fePythonif'__main__'==__name__:ntest=30#\u52a0\u8f7d\u6570\u636eX,y=load_data('abalone.txt')#\u4e2d\u5fc3\u5316&\u6807\u51c6\u5316X,y=standarize(X),standarize(y)#\u7ed8\u5236\u5cad\u8f68\u8ff9ws=ridge_traj(X,y,ntest)fig=plt.figure()ax=fig.add_subplot(111)lambdas=[i-10foriinrange(ntest)]ax.plot(lambdas,ws)plt.show()12345678910111213if'__main__'==__name__:\u00a0\u00a0\u00a0\u00a0ntest=30\u00a0\u00a0\u00a0\u00a0#\u52a0\u8f7d\u6570\u636e\u00a0\u00a0\u00a0\u00a0X,y=load_data('abalone.txt')\u00a0\u00a0\u00a0\u00a0#\u4e2d\u5fc3\u5316&\u6807\u51c6\u5316\u00a0\u00a0\u00a0\u00a0X,y=standarize(X),standarize(y)\u00a0\u00a0\u00a0\u00a0#\u7ed8\u5236\u5cad\u8f68\u8ff9\u00a0\u00a0\u00a0\u00a0ws=ridge_traj(X,y,ntest)\u00a0\u00a0\u00a0\u00a0fig=plt.figure()\u00a0\u00a0\u00a0\u00a0ax=fig.add_subplot(111)\u00a0\u00a0\u00a0\u00a0lambdas=[i-10foriinrange(ntest)]\u00a0\u00a0\u00a0\u00a0ax.plot(lambdas,ws)\u00a0\u00a0\u00a0\u00a0plt.show()\u4e0a\u56fe\u7ed8\u5236\u4e86\u56de\u5f52\u7cfb\u6570wi\u4e0elog(\u03bb)\u7684\u5173\u7cfb\uff0c\u5728\u6700\u5de6\u8fb9\u03bb\u03bb\u7cfb\u6570\u6700\u5c0f\u65f6\uff0c\u53ef\u4ee5\u5f97\u5230\u6240\u6709\u7cfb\u6570\u7684\u539f\u59cb\u503c(\u4e0e\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u76f8\u540c);\u800c\u5728\u53f3\u8fb9\uff0c\u7cfb\u6570\u5168\u90e8\u7f29\u51cf\u4e3a0,\u4ece\u4e0d\u7a33\u5b9a\u8d8b\u4e8e\u7a33\u5b9a\uff1b\u4e3a\u4e86\u5b9a\u91cf\u7684\u627e\u5230\u6700\u4f73\u53c2\u6570\u503c\uff0c\u8fd8\u9700\u8981\u8fdb\u884c\u4ea4\u53c9\u9a8c\u8bc1\u3002\u8981\u5224\u65ad\u54ea\u4e9b\u53d8\u91cf\u5bf9\u7ed3\u679c\u7684\u9884\u6d4b\u6700\u5177\u5f71\u54cd\u529b\uff0c\u53ef\u4ee5\u89c2\u5bdf\u4ed6\u4eec\u7684\u7cfb\u6570\u5927\u5c0f\u5373\u53ef\u3002LASSO\u5cad\u56de\u5f52\u9650\u5b9a\u4e86\u6240\u6709\u56de\u5f52\u7cfb\u6570\u7684\u5e73\u65b9\u548c\u4e0d\u5927\u4e8ett,\u5728\u4f7f\u7528\u666e\u901a\u6700\u5c0f\u4e8c\u4e58\u6cd5\u56de\u5f52\u7684\u65f6\u5019\u5f53\u4e24\u4e2a\u53d8\u91cf\u5177\u6709\u76f8\u5173\u6027\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u4f7f\u5f97\u5176\u4e2d\u4e00\u4e2a\u7cfb\u6570\u662f\u4e2a\u5f88\u5927\u6b63\u6570\uff0c\u53e6\u4e00\u4e2a\u7cfb\u6570\u662f\u5f88\u5927\u7684\u8d1f\u6570\u3002\u901a\u8fc7\u5cad\u56de\u5f52\u6b63\u5219\u9879\u7684\u9650\u5236\uff0c\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u3002LASSO(TheLeastAbsoluteShrinkageandSelectionOperator)\u662f\u53e6\u4e00\u79cd\u7f29\u51cf\u65b9\u6cd5\uff0c\u5c06\u56de\u5f52\u7cfb\u6570\u6536\u7f29\u5728\u4e00\u5b9a\u7684\u533a\u57df\u5185\u3002LASSO\u7684\u4e3b\u8981\u601d\u60f3\u662f\u6784\u9020\u4e00\u4e2a\u4e00\u9636\u60e9\u7f5a\u51fd\u6570\u83b7\u5f97\u4e00\u4e2a\u7cbe\u70bc\u7684\u6a21\u578b,\u901a\u8fc7\u6700\u7ec8\u786e\u5b9a\u4e00\u4e9b\u53d8\u91cf\u7684\u7cfb\u6570\u4e3a0\u8fdb\u884c\u7279\u5f81\u7b5b\u9009\u3002LASSO\u7684\u60e9\u7f5a\u9879\u4e3a:\u4e0e\u5cad\u56de\u5f52\u7684\u4e0d\u540c\u5728\u4e8e\uff0c\u6b64\u7ea6\u675f\u6761\u4ef6\u4f7f\u7528\u4e86\u7edd\u5bf9\u503c\u7684\u4e00\u9636\u60e9\u7f5a\u51fd\u6570\u4ee3\u66ff\u4e86\u5e73\u65b9\u548c\u7684\u4e8c\u9636\u51fd\u6570\u3002\u867d\u7136\u53ea\u662f\u5f62\u5f0f\u7a0d\u6709\u4e0d\u540c\uff0c\u4f46\u662f\u5f97\u5230\u7684\u7ed3\u679c\u5374\u53c8\u5f88\u5927\u5dee\u522b\u3002\u5728LASSO\u4e2d\uff0c\u5f53\u03bb\u03bb\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u4e00\u4e9b\u7cfb\u6570\u4f1a\u968f\u7740\u53d8\u4e3a0\u800c\u5cad\u56de\u5f52\u5374\u5f88\u96be\u4f7f\u5f97\u67d0\u4e2a\u7cfb\u6570\u6070\u597d\u7f29\u51cf\u4e3a0.\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u51e0\u4f55\u89e3\u91ca\u770b\u5230LASSO\u4e0e\u5cad\u56de\u5f52\u4e4b\u95f4\u7684\u4e0d\u540c\u3002LASSO\u7684\u51e0\u4f55\u89e3\u91ca\u540c\u6837\u4ee5\u4e24\u4e2a\u53d8\u91cf\u4e3a\u4f8b\uff0c\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7684costfunction\u8fd8\u662f\u53ef\u4ee5\u7528\u4e8c\u7ef4\u5e73\u9762\u7684\u7b49\u503c\u7ebf\u8868\u793a\uff0c\u800c\u7ea6\u675f\u6761\u4ef6\u5219\u4e0e\u5cad\u56de\u5f52\u7684\u5706\u4e0d\u540c\uff0cLASSO\u7684\u7ea6\u675f\u6761\u4ef6\u53ef\u4ee5\u7528\u65b9\u5f62\u8868\u793a\uff0c\u5982\u4e0b\u56fe:\u76f8\u6bd4\u5706\uff0c\u65b9\u5f62\u7684\u9876\u70b9\u66f4\u5bb9\u6613\u4e0e\u629b\u7269\u9762\u76f8\u4ea4\uff0c\u9876\u70b9\u5c31\u610f\u5473\u7740\u5bf9\u5e94\u7684\u5f88\u591a\u7cfb\u6570\u4e3a0\uff0c\u800c\u5cad\u56de\u5f52\u4e2d\u7684\u5706\u4e0a\u7684\u4efb\u610f\u4e00\u70b9\u90fd\u5f88\u5bb9\u6613\u4e0e\u629b\u7269\u9762\u76f8\u4ea4\u5f88\u96be\u5f97\u5230\u6b63\u597d\u7b49\u4e8e0\u7684\u7cfb\u6570\u3002\u8fd9\u4e5f\u5c31\u610f\u5473\u7740\uff0classo\u8d77\u5230\u4e86\u5f88\u597d\u7684\u7b5b\u9009\u53d8\u91cf\u7684\u4f5c\u7528\u3002LASSO\u56de\u5f52\u7cfb\u6570\u7684\u8ba1\u7b97\u867d\u7136\u60e9\u7f5a\u51fd\u6570\u53ea\u662f\u505a\u4e86\u7ec6\u5fae\u7684\u53d8\u5316\uff0c\u4f46\u662f\u76f8\u6bd4\u5cad\u56de\u5f52\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u77e9\u9635\u8fd0\u7b97\u5f97\u5230\u56de\u5f52\u7cfb\u6570\u76f8\u6bd4\uff0cLASSO\u7684\u8ba1\u7b97\u53d8\u5f97\u76f8\u5bf9\u590d\u6742\u3002\u7531\u4e8e\u60e9\u7f5a\u9879\u4e2d\u542b\u6709\u7edd\u5bf9\u503c\uff0c\u6b64\u51fd\u6570\u7684\u5bfc\u6570\u662f\u8fde\u7eed\u4e0d\u5149\u6ed1\u7684\uff0c\u6240\u4ee5\u65e0\u6cd5\u8fdb\u884c\u6c42\u5bfc\u5e76\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u4f18\u5316\u3002\u672c\u90e8\u5206\u4f7f\u7528\u5750\u6807\u4e0b\u964d\u53d1\u5bf9LASSO\u56de\u5f52\u7cfb\u6570\u8fdb\u884c\u8ba1\u7b97\u3002\u5750\u6807\u4e0b\u964d\u6cd5\u662f\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u7ef4\u5ea6\u7684\u53c2\u6570\u8fdb\u884c\u4e00\u7ef4\u4f18\u5316\uff0c\u7136\u540e\u4e0d\u65ad\u7684\u8fed\u4ee3\u5bf9\u591a\u4e2a\u7ef4\u5ea6\u8fdb\u884c\u66f4\u65b0\u76f4\u5230\u51fd\u6570\u6536\u655b\u3002SVM\u5bf9\u5076\u95ee\u9898\u7684\u4f18\u5316\u7b97\u6cd5SMO\u4e5f\u662f\u7c7b\u4f3c\u7684\u539f\u7406\uff0c\u8fd9\u90e8\u5206\u7684\u8be6\u7ec6\u4ecb\u7ecd\u6211\u5728\u4e4b\u524d\u7684\u4e00\u7bc7\u535a\u5ba2\u4e2d\u8fdb\u884c\u4e86\u6574\u7406\uff0c\u53c2\u8003\u300a\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-SVM\u4e2d\u7684SMO\u7b97\u6cd5\u300b\u3002\u4e0b\u9762\u6211\u4eec\u5206\u522b\u5bf9LASSO\u7684costfunction\u7684\u4e24\u90e8\u5206\u6c42\u89e3\uff1a1\uff09RSS\u90e8\u5206\u6c42\u5bfc:2\uff09\u6b63\u5219\u9879\u5173\u4e8e\u60e9\u7f5a\u9879\u7684\u6c42\u5bfc\u6211\u4eec\u9700\u8981\u4f7f\u7528subgradient\uff0c\u53ef\u4ee5\u53c2\u8003LASSO\uff08leastabsoluteshrinkageandselectionoperator\uff09\u56de\u5f52\u4e2d\u5982\u4f55\u7528\u68af\u5ea6\u4e0b\u964d\u6cd5\u6c42\u89e3\uff1f\u901a\u8fc7\u4e0a\u9762\u7684\u516c\u5f0f\u6211\u4eec\u4fbf\u53ef\u4ee5\u6bcf\u6b21\u9009\u53d6\u4e00\u7ef4\u8fdb\u884c\u4f18\u5316\u5e76\u4e0d\u65ad\u8dcc\u6253\u5f97\u5230\u6700\u4f18\u56de\u5f52\u7cfb\u6570\u3002LASSO\u7684Python\u5b9e\u73b0\u6839\u636e\u4e0a\u9762\u4ee3\u7801\u6211\u4eec\u5b9e\u73b0\u68af\u5ea6\u4e0b\u964d\u6cd5\u5e76\u4f7f\u7528\u5176\u83b7\u53d6LASSO\u56de\u5f52\u7cfb\u6570\u3002Pythondeflasso_regression(X,y,lambd=0.2,threshold=0.1):'''\u901a\u8fc7\u5750\u6807\u4e0b\u964d(coordinatedescent)\u6cd5\u83b7\u53d6LASSO\u56de\u5f52\u7cfb\u6570'''#\u8ba1\u7b97\u6b8b\u5dee\u5e73\u65b9\u548crss=lambdaX,y,w:(y-X*w).T*(y-X*w)#\u521d\u59cb\u5316\u56de\u5f52\u7cfb\u6570w.m,n=X.shapew=np.matrix(np.zeros((n,1)))r=rss(X,y,w)#\u4f7f\u7528\u5750\u6807\u4e0b\u964d\u6cd5\u4f18\u5316\u56de\u5f52\u7cfb\u6570wniter=itertools.count(1)foritinniter:forkinrange(n):#\u8ba1\u7b97\u5e38\u91cf\u503cz_k\u548cp_kz_k=(X[:,k].T*X[:,k])[0,0]p_k=0foriinrange(m):p_k+=X[i,k]*(y[i,0]-sum([X[i,j]*w[j,0]forjinrange(n)ifj!=k]))ifp_k<-lambd/2:w_k=(p_k+lambd/2)/z_kelifp_k>lambd/2:w_k=(p_k-lambd/2)/z_kelse:w_k=0w[k,0]=w_kr_prime=rss(X,y,w)delta=abs(r_prime-r)[0,0]r=r_primeprint('Iteration:{},delta={}'.format(it,delta))ifdelta<threshold:breakreturnw1234567891011121314151617181920212223242526272829303132deflasso_regression(X,y,lambd=0.2,threshold=0.1):\u00a0\u00a0\u00a0\u00a0'''\u901a\u8fc7\u5750\u6807\u4e0b\u964d(coordinatedescent)\u6cd5\u83b7\u53d6LASSO\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u6b8b\u5dee\u5e73\u65b9\u548c\u00a0\u00a0\u00a0\u00a0rss=lambdaX,y,w:(y-X*w).T*(y-X*w)\u00a0\u00a0\u00a0\u00a0#\u521d\u59cb\u5316\u56de\u5f52\u7cfb\u6570w.\u00a0\u00a0\u00a0\u00a0m,n=X.shape\u00a0\u00a0\u00a0\u00a0w=np.matrix(np.zeros((n,1)))\u00a0\u00a0\u00a0\u00a0r=rss(X,y,w)\u00a0\u00a0\u00a0\u00a0#\u4f7f\u7528\u5750\u6807\u4e0b\u964d\u6cd5\u4f18\u5316\u56de\u5f52\u7cfb\u6570w\u00a0\u00a0\u00a0\u00a0niter=itertools.count(1)\u00a0\u00a0\u00a0\u00a0foritinniter:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkinrange(n):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u5e38\u91cf\u503cz_k\u548cp_k\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0z_k=(X[:,k].T*X[:,k])[0,0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p_k=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriinrange(m):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p_k+=X[i,k]*(y[i,0]-sum([X[i,j]*w[j,0]forjinrange(n)ifj!=k]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifp_k<-lambd/2:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w_k=(p_k+lambd/2)/z_k\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifp_k>lambd/2:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w_k=(p_k-lambd/2)/z_k\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w_k=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w[k,0]=w_k\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r_prime=rss(X,y,w)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delta=abs(r_prime-r)[0,0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r=r_prime\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Iteration:{},delta={}'.format(it,delta))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdelta<threshold:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0\u00a0\u00a0\u00a0returnw\u6211\u4eec\u9009\u53d6\u03bb=10,\u6536\u655b\u9608\u503c\u4e3a0.1\u6765\u83b7\u53d6\u56de\u5f52\u7cfb\u6570Pythonif'__main__'==__name__:X,y=load_data('abalone.txt')X,y=standarize(X),standarize(y)w=lasso_regression(X,y,lambd=10)y_prime=X*w#\u8ba1\u7b97\u76f8\u5173\u7cfb\u6570corrcoef=get_corrcoef(np.array(y.reshape(1,-1)),np.array(y_prime.reshape(1,-1)))print('Correlationcoefficient:{}'.format(corrcoef))123456789if'__main__'==__name__:\u00a0\u00a0\u00a0\u00a0X,y=load_data('abalone.txt')\u00a0\u00a0\u00a0\u00a0X,y=standarize(X),standarize(y)\u00a0\u00a0\u00a0\u00a0w=lasso_regression(X,y,lambd=10)\u00a0\u00a0\u00a0\u00a0y_prime=X*w\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u76f8\u5173\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0corrcoef=get_corrcoef(np.array(y.reshape(1,-1)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0np.array(y_prime.reshape(1,-1)))\u00a0\u00a0\u00a0\u00a0print('Correlationcoefficient:{}'.format(corrcoef))\u8fed\u4ee3\u4e86150\u6b65\u6536\u655b\u52300.1\uff0c\u8ba1\u7b97\u76f8\u5bf9\u6bd4\u8f83\u8017\u65f6:PythonIteration:146,delta=0.1081124857935265Iteration:147,delta=0.10565615985365184Iteration:148,delta=0.10326058648411163Iteration:149,delta=0.10092418256476776Iteration:150,delta=0.09864540659987142Correlationcoefficient:0.7255254877587117123456Iteration:146,delta=0.1081124857935265Iteration:147,delta=0.10565615985365184Iteration:148,delta=0.10326058648411163Iteration:149,delta=0.10092418256476776Iteration:150,delta=0.09864540659987142Correlationcoefficient:0.7255254877587117LASSO\u56de\u5f52\u7cfb\u6570\u8f68\u8ff9\u7c7b\u4f3c\u5cad\u8f68\u8ff9\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6539\u53d8\u03bb\u03bb\u7684\u503c\u5f97\u5230\u4e0d\u540c\u7684\u56de\u5f52\u7cfb\u6570\uff0c\u901a\u8fc7\u4f5c\u56fe\u53ef\u4ee5\u770b\u5230\u56de\u5f52\u7cfb\u6570\u7684\u8f68\u8ff9Pythonntest=30#\u7ed8\u5236\u8f68\u8ff9ws=lasso_traj(X,y,ntest)fig=plt.figure()ax=fig.add_subplot(111)lambdas=[i-10foriinrange(ntest)]ax.plot(lambdas,ws)plt.show()12345678ntest=30#\u7ed8\u5236\u8f68\u8ff9ws=lasso_traj(X,y,ntest)fig=plt.figure()ax=fig.add_subplot(111)lambdas=[i-10foriinrange(ntest)]ax.plot(lambdas,ws)plt.show()\u5f97\u5230\u7684\u8f68\u8ff9\u56fe\u5982\u4e0b:\u901a\u8fc7\u4e0e\u5cad\u8f68\u8ff9\u56fe\u8fdb\u884c\u5bf9\u6bd4\u53d1\u73b0\uff0c\u968f\u7740\u03bb\u03bb\u7684\u589e\u5927\uff0c\u7cfb\u6570\u9010\u6e10\u8d8b\u8fd1\u4e8e0\uff0c\u4f46\u662f\u5cad\u56de\u5f52\u6ca1\u6709\u7cfb\u6570\u771f\u6b63\u4e3a0\uff0c\u800classo\u4e2d\u4e0d\u65ad\u6709\u7cfb\u6570\u53d8\u4e3a0.\u9010\u6b65\u5411\u524d\u56de\u5f52LASSO\u8ba1\u7b97\u590d\u6742\u5ea6\u76f8\u5bf9\u8f83\u9ad8\uff0c\u672c\u90e8\u5206\u7a0d\u5fae\u4ecb\u7ecd\u4e00\u4e0b\u9010\u6b65\u5411\u524d\u56de\u5f52\uff0c\u4ed6\u5c5e\u4e8e\u4e00\u79cd\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u7ed9\u5b9a\u521d\u59cb\u7cfb\u6570\u5411\u91cf\uff0c\u7136\u540e\u4e0d\u65ad\u8fed\u4ee3\u904d\u5386\u6bcf\u4e2a\u7cfb\u6570\uff0c\u589e\u52a0\u6216\u51cf\u5c0f\u4e00\u4e2a\u5f88\u5c0f\u7684\u6570\uff0c\u770b\u770b\u4ee3\u4ef7\u51fd\u6570\u662f\u5426\u53d8\u5c0f\uff0c\u5982\u679c\u53d8\u5c0f\u5c31\u4fdd\u7559\uff0c\u5982\u679c\u53d8\u5927\u5c31\u820d\u5f03\uff0c\u7136\u540e\u4e0d\u65ad\u8fed\u4ee3\u76f4\u5230\u56de\u5f52\u7cfb\u6570\u8fbe\u5230\u7a33\u5b9a\u3002\u4e0b\u9762\u7ed9\u51fa\u5b9e\u73b0Pythondefstagewise_regression(X,y,eps=0.01,niter=100):'''\u901a\u8fc7\u5411\u524d\u9010\u6b65\u56de\u5f52\u83b7\u53d6\u56de\u5f52\u7cfb\u6570'''m,n=X.shapew=np.matrix(np.zeros((n,1)))min_error=float('inf')all_ws=np.matrix(np.zeros((niter,n)))#\u8ba1\u7b97\u6b8b\u5dee\u5e73\u65b9\u548crss=lambdaX,y,w:(y-X*w).T*(y-X*w)foriinrange(niter):print('{}:w={}'.format(i,w.T[0,:]))forjinrange(n):forsignin[-1,1]:w_test=w.copy()w_test[j,0]+=eps*signtest_error=rss(X,y,w_test)iftest_error<min_error:min_error=test_errorw=w_testall_ws[i,:]=w.Treturnall_ws123456789101112131415161718192021defstagewise_regression(X,y,eps=0.01,niter=100):\u00a0\u00a0\u00a0\u00a0'''\u901a\u8fc7\u5411\u524d\u9010\u6b65\u56de\u5f52\u83b7\u53d6\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0m,n=X.shape\u00a0\u00a0\u00a0\u00a0w=np.matrix(np.zeros((n,1)))\u00a0\u00a0\u00a0\u00a0min_error=float('inf')\u00a0\u00a0\u00a0\u00a0all_ws=np.matrix(np.zeros((niter,n)))\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u6b8b\u5dee\u5e73\u65b9\u548c\u00a0\u00a0\u00a0\u00a0rss=lambdaX,y,w:(y-X*w).T*(y-X*w)\u00a0\u00a0\u00a0\u00a0foriinrange(niter):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('{}:w={}'.format(i,w.T[0,:]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forjinrange(n):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forsignin[-1,1]:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w_test=w.copy()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w_test[j,0]+=eps*sign\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0test_error=rss(X,y,w_test)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iftest_error<min_error:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0min_error=test_error\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0w=w_test\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0all_ws[i,:]=w.T\u00a0\u00a0\u00a0\u00a0returnall_ws\u6211\u4eec\u53bb\u53d8\u5316\u91cf\u4e3a0.005\uff0c\u8fed\u4ee3\u6b65\u6570\u4e3a1000\u6b21\uff0c\u5f97\u5230\u56de\u5f52\u7cfb\u6570\u968f\u7740\u8fed\u4ee3\u6b21\u6570\u7684\u53d8\u5316\u66f2\u7ebf:\u9010\u6b65\u56de\u5f52\u7b97\u6cd5\u7684\u4e3b\u8981\u6709\u70b9\u5728\u4e8e\u4ed6\u53ef\u4ee5\u5e2e\u52a9\u4eba\u4eec\u7406\u89e3\u73b0\u6709\u7684\u6a21\u578b\u5e76\u4f5c\u51fa\u6539\u8fdb\u3002\u5f53\u6784\u5efa\u4e86\u4e00\u4e2a\u6a21\u578b\u540e\uff0c\u53ef\u4ee5\u8fd0\u884c\u9010\u6b65\u56de\u5f52\u7b97\u6cd5\u627e\u51fa\u91cd\u8981\u7684\u7279\u5f81\uff0c\u5373\u4f7f\u505c\u6b62\u90a3\u4e9b\u4e0d\u91cd\u8981\u7279\u5f81\u7684\u6536\u96c6\u3002\u603b\u7ed3\u672c\u6587\u4ecb\u7ecd\u4e86\u4e24\u79cd\u56de\u5f52\u4e2d\u7684\u7f29\u51cf\u65b9\u6cd5\uff0c\u5cad\u56de\u5f52\u548cLASSO\u3002\u4e24\u79cd\u56de\u5f52\u5747\u662f\u5728\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u6b63\u5219\u9879\u6765\u51cf\u5c0f\u6a21\u578b\u7684\u65b9\u5dee\u3002\u8fd9\u91cc\u5176\u5b9e\u4fbf\u6d89\u53ca\u5230\u4e86\u6743\u8861\u504f\u5dee(Bias)\u548c\u65b9\u5dee(Variance)\u7684\u95ee\u9898\u3002\u65b9\u5dee\u9488\u5bf9\u7684\u662f\u6a21\u578b\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5373\u4e0d\u540c\u7684\u8bad\u7ec3\u6570\u636e\u5f97\u5230\u6a21\u578b\u7684\u533a\u522b\u8d8a\u5927\u8bf4\u660e\u6a21\u578b\u7684\u65b9\u5dee\u8d8a\u5927\u3002\u800c\u504f\u5dee\u6307\u7684\u662f\u6a21\u578b\u9884\u6d4b\u503c\u4e0e\u6837\u672c\u6570\u636e\u4e4b\u95f4\u7684\u5dee\u5f02\u3002\u6240\u4ee5\u4e3a\u4e86\u5728\u8fc7\u62df\u5408\u548c\u6b20\u62df\u5408\u4e4b\u524d\u8fdb\u884c\u6743\u8861\uff0c\u6211\u4eec\u9700\u8981\u786e\u5b9a\u9002\u5f53\u7684\u6a21\u578b\u590d\u6742\u5ea6\u6765\u4f7f\u5f97\u603b\u8bef\u5dee\u6700\u5c0f\u3002\u53c2\u8003\u300aMachineLearninginAction\u300b\u673a\u5668\u5b66\u4e60\u4e2d\u7684Bias(\u504f\u5dee)\uff0cError(\u8bef\u5dee)\uff0c\u548cVariance(\u65b9\u5dee)\u6709\u4ec0\u4e48\u533a\u522b\u548c\u8054\u7cfb\uff1fLasso\u56de\u5f52\u7684\u5750\u6807\u4e0b\u964d\u6cd5\u63a8\u5bfc\u6570\u636e\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u505a\u4e2d\u5fc3\u5316\u548c\u6807\u51c6\u5316\u5904\u7406\uff1f\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff012\u8d5e2\u6536\u85cf2\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-\u6811\u56de\u5f52"], "art_url": ["http://python.jobbole.com/88822/"], "art_create_time": ["2017/11/04"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-11-03-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E5%AE%9E%E8%B7%B5-%E6%A0%91%E5%9B%9E%E5%BD%92/feature.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u6700\u8fd1\u7531\u4e8e\u5f00\u59cb\u8981\u628a\u7cbe\u529b\u96c6\u4e2d\u5728\u8bfe\u9898\u7684\u5e94\u7528\u4e0a\u9762\u4e86\uff0c\u8fd9\u7bc7\u603b\u7ed3\u4e4b\u540e\u7b97\u6cd5\u539f\u7406\u7684\u5b66\u4e60\u5148\u544a\u4e00\u6bb5\u843d\u3002\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u51b3\u7b56\u6811\u7528\u4e8e\u56de\u5f52\u95ee\u9898\u7684\u76f8\u5173\u7b97\u6cd5\u5b9e\u73b0\uff0c\u5176\u4e2d\u5305\u62ec\u56de\u5f52\u6811(regressiontree)\u548c\u6a21\u578b\u6811(modeltree)\u7684\u5b9e\u73b0\uff0c\u5e76\u4ecb\u7ecd\u4e86\u9884\u526a\u679d(preprune)\u548c\u540e\u526a\u679d(postprune)\u7684\u9632\u6b62\u6811\u8fc7\u62df\u5408\u7684\u6280\u672f\u4ee5\u53ca\u5b9e\u73b0\u3002\u6700\u540e\u5bf9\u56de\u5f52\u6811\u548c\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u8fdb\u884c\u4e86\u5bf9\u6bd4\u3002\u6b63\u6587\u5728\u4e4b\u524d\u7684\u6587\u7ae0\u4e2d\u6211\u603b\u7ed3\u4e86\u901a\u8fc7\u4f7f\u7528\u6784\u5efa\u51b3\u7b56\u6811\u6765\u8fdb\u884c\u7c7b\u578b\u9884\u6d4b\u3002\u76f4\u89c2\u6765\u770b\u6811\u7ed3\u6784\u6700\u5bb9\u6613\u5bf9\u5206\u7c7b\u95ee\u9898\u8fdb\u884c\u5904\u7406\uff0c\u901a\u8fc7\u9012\u5f52\u6211\u4eec\u5728\u6570\u636e\u4e2d\u9009\u53d6\u6700\u4f73\u5206\u5272\u7279\u5f81\u5bf9\u8bad\u7ec3\u6570\u636e\u8fdb\u884c\u5206\u5272\u5e76\u8fdb\u884c\u6811\u5206\u88c2\u6700\u7ec8\u5230\u8fbe\u89e6\u5e95\u6761\u4ef6\u83b7\u5f97\u8bad\u7ec3\u51fa\u6765\u51b3\u7b56\u6811\uff0c\u53ef\u4ee5\u901a\u8fc7\u53ef\u89c6\u5316\u7684\u65b9\u5f0f\u76f4\u89c2\u7684\u67e5\u770b\u8bad\u7ec3\u6a21\u578b\u5e76\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u7c7b\u3002\u901a\u5e38\u51b3\u7b56\u6811\u6811\u5206\u88c2\u9009\u62e9\u7279\u5f81\u7684\u65b9\u6cd5\u6709ID3,C4.5\u7b97\u6cd5,C5.0\u7b97\u6cd5\u548cCART\u6811\u3002\u5728\u300a\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-\u51b3\u7b56\u6811(DecisionTree)\u300b\u4e2d\u5bf9ID3\u4ee5\u53caC4.5\u7b97\u6cd5\u8fdb\u884c\u4e86\u4ecb\u7ecd\u5e76\u4f7f\u7528ID3\u7b97\u6cd5\u5904\u7406\u4e86\u5206\u7c7b\u95ee\u9898\u3002\u672c\u6587\u4e3b\u8981\u4f7f\u7528\u51b3\u7b56\u6811\u89e3\u51b3\u56de\u5f52\u95ee\u9898\uff0c\u4f7f\u7528CART(ClassificationAndRegressionTrees)\u7b97\u6cd5\u3002CARTCART\u662f\u4e00\u79cd\u4e8c\u5206\u9012\u5f52\u5206\u5272\u7684\u6280\u672f\uff0c\u5206\u5272\u65b9\u6cd5\u91c7\u7528\u57fa\u4e8e\u6700\u5c0f\u8ddd\u79bb\u7684\u57fa\u5c3c\u6307\u6570\u4f30\u8ba1\u51fd\u6570\uff0c\u5c06\u5f53\u524d\u7684\u6837\u672c\u96c6\u5206\u4e3a\u4e24\u4e2a\u5b50\u6837\u672c\u96c6\uff0c\u4f7f\u5f97\u751f\u6210\u7684\u7684\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u6709\u4e24\u4e2a\u5206\u652f\u3002\u56e0\u6b64\uff0cCART\u7b97\u6cd5\u751f\u6210\u7684\u51b3\u7b56\u6811\u662f\u7ed3\u6784\u7b80\u6d01\u7684\u4e8c\u53c9\u6811\u3002\u5206\u7c7b\u6811\u662f\u9488\u5bf9\u76ee\u6807\u53d8\u91cf\u662f\u79bb\u6563\u578b\u53d8\u91cf\uff0c\u901a\u8fc7\u4e8c\u53c9\u6811\u5c06\u6570\u636e\u8fdb\u884c\u5206\u5272\u6210\u79bb\u6563\u7c7b\u7684\u65b9\u6cd5\u3002\u800c\u56de\u5f52\u6811\u5219\u662f\u9488\u5bf9\u76ee\u6807\u53d8\u91cf\u662f\u8fde\u7eed\u6027\u7684\u53d8\u91cf\uff0c\u901a\u8fc7\u9009\u53d6\u6700\u4f18\u5206\u5272\u7279\u5f81\u7684\u67d0\u4e2a\u503c\uff0c\u7136\u540e\u6570\u636e\u6839\u636e\u5927\u4e8e\u6216\u8005\u5c0f\u4e8e\u8fd9\u4e2a\u503c\u8fdb\u884c\u5212\u5206\u8fdb\u884c\u6811\u5206\u88c2\u6700\u7ec8\u751f\u6210\u56de\u5f52\u6811\u3002\u7279\u5f81\u548c\u6700\u4f73\u5206\u5272\u70b9\u7684\u9009\u53d6\u5728\u4f7f\u7528\u51b3\u7b56\u6811\u89e3\u51b3\u56de\u5f52\u95ee\u9898\u4e2d\u6211\u4eec\u9700\u8981\u4e0d\u65ad\u7684\u9009\u53d6\u67d0\u4e00\u7279\u5f81\u7684\u4e00\u4e2a\u503c\u4f5c\u4e3a\u5206\u5272\u70b9\u6765\u751f\u6210\u5b50\u6811\u3002\u9009\u53d6\u7684\u6807\u51c6\u5c31\u662f\u4f7f\u5f97\u88ab\u5206\u5272\u7684\u4e24\u90e8\u5206\u6570\u636e\u80fd\u6709\u6700\u597d\u7684\u7eaf\u5ea6\u3002\u5bf9\u4e8e\u79bb\u6563\u578b\u6570\u636e\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8ba1\u7b97\u5206\u5272\u4e24\u90e8\u5206\u6570\u636e\u7684\u57fa\u5c3c\u4e0d\u7eaf\u5ea6\u7684\u53d8\u5316\u6765\u5224\u5b9a\u6700\u6709\u5206\u5272\u70b9\uff1b\u5bf9\u4e8e\u8fde\u7eed\u6027\u53d8\u91cf\u6211\u4eec\u901a\u8fc7\u8ba1\u7b97\u6700\u5c0f\u5e73\u65b9\u6b8b\u5dee\uff0c\u4e5f\u5c31\u662f\u9009\u62e9\u4f7f\u5f97\u5206\u5272\u540e\u6570\u636e\u65b9\u5dee\u53d8\u5f97\u6700\u5c0f\u7684\u7279\u5f81\u548c\u5206\u5272\u70b9\u3002\u76f4\u89c2\u7684\u7406\u89e3\u5c31\u662f\u4f7f\u5f97\u5206\u5272\u7684\u4e24\u90e8\u5206\u6570\u636e\u80fd\u591f\u6709\u6700\u76f8\u8fd1\u7684\u503c\u3002\u6811\u5206\u88c2\u7684\u7ec8\u6b62\u6761\u4ef6\u6709\u4e86\u9009\u53d6\u5206\u5272\u7279\u5f81\u548c\u6700\u4f73\u5206\u5272\u70b9\u7684\u65b9\u6cd5\uff0c\u6811\u4fbf\u53ef\u4ee5\u4f9d\u6b64\u8fdb\u884c\u5206\u88c2\uff0c\u4f46\u662f\u5206\u88c2\u7684\u7ec8\u6b62\u6761\u4ef6\u662f\u4ec0\u4e48\u5462?\u8282\u70b9\u4e2d\u6240\u6709\u76ee\u6807\u53d8\u91cf\u7684\u503c\u76f8\u540c,\u65e2\u7136\u90fd\u5df2\u7ecf\u662f\u76f8\u540c\u7684\u503c\u4e86\u81ea\u7136\u6ca1\u6709\u5fc5\u8981\u5728\u5206\u88c2\u4e86\uff0c\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u503c\u5c31\u597d\u4e86.\u6811\u7684\u6df1\u5ea6\u8fbe\u5230\u4e86\u9884\u5148\u6307\u5b9a\u7684\u6700\u5927\u503c\u4e0d\u7eaf\u5ea6\u7684\u51cf\u5c0f\u91cf\u5c0f\u4e8e\u9884\u5148\u5b9a\u597d\u7684\u9608\u503c,\u4e5f\u5c31\u662f\u4e4b\u8fdb\u4e00\u6b65\u7684\u5206\u5272\u6570\u636e\u5e76\u4e0d\u80fd\u66f4\u597d\u7684\u964d\u4f4e\u6570\u636e\u7684\u4e0d\u7eaf\u5ea6\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u505c\u6b62\u6811\u5206\u88c2\u4e86\u3002\u8282\u70b9\u7684\u6570\u636e\u91cf\u5c0f\u4e8e\u9884\u5148\u5b9a\u597d\u7684\u9608\u503c\u56de\u5f52\u6811\u7684Python\u5b9e\u73b0\u672c\u90e8\u5206\u4f7f\u7528Python\u5b9e\u73b0\u7b80\u5355\u7684\u56de\u5f52\u6811\uff0c\u5e76\u5bf9\u7ed9\u5b9a\u7684\u6570\u636e\u8fdb\u884c\u56de\u5f52\u5e76\u53ef\u89c6\u5316\u56de\u5f52\u66f2\u7ebf\u548c\u6811\u7ed3\u6784\u3002\u5b8c\u6574\u4ee3\u7801\u8be6\u89c1:https://github.com/PytLab/MLBox/tree/master/classification_and_regression_trees\u9996\u5148\u662f\u52a0\u8f7d\u6570\u636e\u7684\u90e8\u5206\uff0c\u8fd9\u91cc\u7684\u6240\u6709\u6d4b\u8bd5\u6570\u636e\u6211\u5747\u4f7f\u7528\u7684\u300aMachineLearninginAction\u300b\u4e2d\u7684\u6570\u636e\uff0c\u683c\u5f0f\u6bd4\u8f83\u89c4\u6574\u52a0\u8f7d\u65b9\u5f0f\u4e5f\u6bd4\u8f83\u4e00\u81f4,\u8fd9\u91cc\u7531\u4e8e\u505a\u6811\u56de\u5f52\uff0c\u81ea\u53d8\u91cf\u548c\u56e0\u53d8\u91cf\u90fd\u653e\u5728\u540c\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\u4e2d:Pythondefload_data(filename):'''\u52a0\u8f7d\u6587\u672c\u6587\u4ef6\u4e2d\u7684\u6570\u636e.'''dataset=[]withopen(filename,'r')asf:forlineinf:line_data=[float(data)fordatainline.split()]dataset.append(line_data)returndataset123456789defload_data(filename):\u00a0\u00a0\u00a0\u00a0'''\u52a0\u8f7d\u6587\u672c\u6587\u4ef6\u4e2d\u7684\u6570\u636e.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0dataset=[]\u00a0\u00a0\u00a0\u00a0withopen(filename,'r')asf:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forlineinf:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0line_data=[float(data)fordatainline.split()]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0dataset.append(line_data)\u00a0\u00a0\u00a0\u00a0returndataset\u6811\u56de\u5f52\u4e2d\u518d\u627e\u5230\u5206\u5272\u7279\u5f81\u548c\u5206\u5272\u503c\u4e4b\u540e\u9700\u8981\u5c06\u6570\u636e\u8fdb\u884c\u5212\u5206\u4ee5\u4fbf\u6784\u5efa\u5b50\u6811\u6216\u8005\u53f6\u5b50\u8282\u70b9:Pythondefsplit_dataset(dataset,feat_idx,value):'''\u6839\u636e\u7ed9\u5b9a\u7684\u7279\u5f81\u7f16\u53f7\u548c\u7279\u5f81\u503c\u5bf9\u6570\u636e\u96c6\u8fdb\u884c\u5206\u5272'''ldata,rdata=[],[]fordataindataset:ifdata[feat_idx]<value:ldata.append(data)else:rdata.append(data)returnldata,rdata12345678910defsplit_dataset(dataset,feat_idx,value):\u00a0\u00a0\u00a0\u00a0'''\u6839\u636e\u7ed9\u5b9a\u7684\u7279\u5f81\u7f16\u53f7\u548c\u7279\u5f81\u503c\u5bf9\u6570\u636e\u96c6\u8fdb\u884c\u5206\u5272\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0ldata,rdata=[],[]\u00a0\u00a0\u00a0\u00a0fordataindataset:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdata[feat_idx]<value:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ldata.append(data)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0rdata.append(data)\u00a0\u00a0\u00a0\u00a0returnldata,rdata\u7136\u540e\u5c31\u662f\u91cd\u8981\u7684\u9009\u53d6\u6700\u4f73\u5206\u5272\u7279\u5f81\u548c\u5206\u5272\u503c\u4e86\uff0c\u8fd9\u91cc\u6211\u4eec\u901a\u8fc7\u627e\u6253\u4f7f\u5f97\u5206\u5272\u540e\u7684\u65b9\u5dee\u6700\u5c0f\u7684\u5206\u5272\u70b9\u6700\u4e3a\u6700\u4f73\u5206\u5272\u70b9:Pythondefchoose_best_feature(dataset,fleaf,ferr,opt):'''\u9009\u53d6\u6700\u4f73\u5206\u5272\u7279\u5f81\u548c\u7279\u5f81\u503cdataset:\u5f85\u5212\u5206\u7684\u6570\u636e\u96c6fleaf:\u521b\u5efa\u53f6\u5b50\u8282\u70b9\u7684\u51fd\u6570ferr:\u8ba1\u7b97\u6570\u636e\u8bef\u5dee\u7684\u51fd\u6570opt:\u56de\u5f52\u6811\u53c2\u6570.err_tolerance:\u6700\u5c0f\u8bef\u5dee\u4e0b\u964d\u503c;n_tolerance:\u6570\u636e\u5207\u5206\u6700\u5c0f\u6837\u672c\u6570'''dataset=np.array(dataset)m,n=dataset.shapeerr_tolerance,n_tolerance=opt['err_tolerance'],opt['n_tolerance']err=ferr(dataset)best_feat_idx,best_feat_val,best_err=0,0,float('inf')#\u904d\u5386\u6240\u6709\u7279\u5f81forfeat_idxinrange(n-1):values=dataset[:,feat_idx]#\u904d\u5386\u6240\u6709\u7279\u5f81\u503cforvalinvalues:#\u6309\u7167\u5f53\u524d\u7279\u5f81\u548c\u7279\u5f81\u503c\u5206\u5272\u6570\u636eldata,rdata=split_dataset(dataset.tolist(),feat_idx,val)iflen(ldata)<n_toleranceorlen(rdata)<n_tolerance:#\u5982\u679c\u5207\u5206\u7684\u6837\u672c\u91cf\u592a\u5c0fcontinue#\u8ba1\u7b97\u8bef\u5deenew_err=ferr(ldata)+ferr(rdata)ifnew_err<best_err:best_feat_idx=feat_idxbest_feat_val=valbest_err=new_err#\u5982\u679c\u8bef\u5dee\u53d8\u5316\u5e76\u4e0d\u5927\u5f52\u4e3a\u4e00\u7c7bifabs(err-best_err)<err_tolerance:returnNone,fleaf(dataset)#\u68c0\u67e5\u5206\u5272\u6837\u672c\u91cf\u662f\u4e0d\u662f\u592a\u5c0fldata,rdata=split_dataset(dataset.tolist(),best_feat_idx,best_feat_val)iflen(ldata)<n_toleranceorlen(rdata)<n_tolerance:returnNone,fleaf(dataset)returnbest_feat_idx,best_feat_val1234567891011121314151617181920212223242526272829303132333435363738defchoose_best_feature(dataset,fleaf,ferr,opt):\u00a0\u00a0\u00a0\u00a0'''\u9009\u53d6\u6700\u4f73\u5206\u5272\u7279\u5f81\u548c\u7279\u5f81\u503c\u00a0\u00a0\u00a0\u00a0dataset:\u5f85\u5212\u5206\u7684\u6570\u636e\u96c6\u00a0\u00a0\u00a0\u00a0fleaf:\u521b\u5efa\u53f6\u5b50\u8282\u70b9\u7684\u51fd\u6570\u00a0\u00a0\u00a0\u00a0ferr:\u8ba1\u7b97\u6570\u636e\u8bef\u5dee\u7684\u51fd\u6570\u00a0\u00a0\u00a0\u00a0opt:\u56de\u5f52\u6811\u53c2\u6570.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0err_tolerance:\u6700\u5c0f\u8bef\u5dee\u4e0b\u964d\u503c;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0n_tolerance:\u6570\u636e\u5207\u5206\u6700\u5c0f\u6837\u672c\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0dataset=np.array(dataset)\u00a0\u00a0\u00a0\u00a0m,n=dataset.shape\u00a0\u00a0\u00a0\u00a0err_tolerance,n_tolerance=opt['err_tolerance'],opt['n_tolerance']\u00a0\u00a0\u00a0\u00a0err=ferr(dataset)\u00a0\u00a0\u00a0\u00a0best_feat_idx,best_feat_val,best_err=0,0,float('inf')\u00a0\u00a0\u00a0\u00a0#\u904d\u5386\u6240\u6709\u7279\u5f81\u00a0\u00a0\u00a0\u00a0forfeat_idxinrange(n-1):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0values=dataset[:,feat_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u904d\u5386\u6240\u6709\u7279\u5f81\u503c\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forvalinvalues:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6309\u7167\u5f53\u524d\u7279\u5f81\u548c\u7279\u5f81\u503c\u5206\u5272\u6570\u636e\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ldata,rdata=split_dataset(dataset.tolist(),feat_idx,val)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iflen(ldata)<n_toleranceorlen(rdata)<n_tolerance:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5982\u679c\u5207\u5206\u7684\u6837\u672c\u91cf\u592a\u5c0f\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8ba1\u7b97\u8bef\u5dee\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0new_err=ferr(ldata)+ferr(rdata)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnew_err<best_err:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0best_feat_idx=feat_idx\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0best_feat_val=val\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0best_err=new_err\u00a0\u00a0\u00a0\u00a0#\u5982\u679c\u8bef\u5dee\u53d8\u5316\u5e76\u4e0d\u5927\u5f52\u4e3a\u4e00\u7c7b\u00a0\u00a0\u00a0\u00a0ifabs(err-best_err)<err_tolerance:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnNone,fleaf(dataset)\u00a0\u00a0\u00a0\u00a0#\u68c0\u67e5\u5206\u5272\u6837\u672c\u91cf\u662f\u4e0d\u662f\u592a\u5c0f\u00a0\u00a0\u00a0\u00a0ldata,rdata=split_dataset(dataset.tolist(),best_feat_idx,best_feat_val)\u00a0\u00a0\u00a0\u00a0iflen(ldata)<n_toleranceorlen(rdata)<n_tolerance:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnNone,fleaf(dataset)\u00a0\u00a0\u00a0\u00a0returnbest_feat_idx,best_feat_val\u5176\u4e2d\uff0c\u505c\u6b62\u9009\u53d6\u7684\u6761\u4ef6\u6709\u4e24\u4e2a:\u4e00\u4e2a\u662f\u5f53\u5206\u5272\u7684\u5b50\u6570\u636e\u96c6\u7684\u5927\u5c0f\u5c0f\u4e8e\u4e00\u5b9a\u503c\uff1b\u4e00\u4e2a\u662f\u5f53\u9009\u53d6\u7684\u6700\u4f73\u5206\u5272\u70b9\u5206\u5272\u7684\u6570\u636e\u7684\u65b9\u5dee\u51cf\u5c0f\u91cf\u5c0f\u4e8e\u4e00\u5b9a\u7684\u503c\u3002fleaf\u662f\u521b\u5efa\u53f6\u5b50\u8282\u70b9\u7684\u51fd\u6570\u5f15\u7528\uff0c\u4e0d\u540c\u7684\u6811\u7ed3\u6784\u6b64\u51fd\u6570\u4e5f\u662f\u4e0d\u540c\u7684\uff0c\u4f8b\u5982\u672c\u90e8\u5206\u7684\u56de\u5f52\u6811\uff0c\u521b\u5efa\u53f6\u5b50\u8282\u70b9\u5c31\u662f\u6839\u636e\u5206\u5272\u540e\u7684\u6570\u636e\u96c6\u5e73\u5747\u503c\uff0c\u800c\u5bf9\u4e8e\u6a21\u578b\u6811\u6765\u8bf4\uff0c\u6b64\u51fd\u6570\u8fd4\u56de\u503c\u662f\u6839\u636e\u6570\u636e\u96c6\u5f97\u5230\u7684\u56de\u5f52\u7cfb\u6570\u3002ferr\u662f\u8ba1\u7b97\u6570\u636e\u96c6\u4e0d\u7eaf\u5ea6\u7684\u51fd\u6570\uff0c\u4e0d\u540c\u7684\u6811\u6a21\u578b\u8be5\u51fd\u6570\u4e5f\u4f1a\u4e0d\u540c\uff0c\u5bf9\u4e8e\u56de\u5f52\u6811\uff0c\u6b64\u51fd\u6570\u8ba1\u7b97\u6570\u636e\u96c6\u7684\u65b9\u5dee\u6765\u5224\u5b9a\u6570\u636e\u96c6\u7684\u7eaf\u5ea6\uff0c\u800c\u5bf9\u4e8e\u6a21\u578b\u6811\u6765\u8bf4\u6211\u4eec\u9700\u8981\u8ba1\u7b97\u7ebf\u6027\u6a21\u578b\u62df\u5408\u7a0b\u5ea6\u4e5f\u5c31\u662f\u7ebf\u6027\u6a21\u578b\u7684\u6b8b\u5dee\u5e73\u65b9\u548c\u3002\u7136\u540e\u5c31\u662f\u6700\u4e3b\u8981\u7684\u56de\u5f52\u6811\u7684\u751f\u6210\u51fd\u6570\u4e86\uff0c\u6811\u7ed3\u6784\u80af\u5b9a\u9700\u8981\u901a\u8fc7\u9012\u5f52\u521b\u5efa\u7684\uff0c\u9009\u4e0d\u51fa\u65b0\u7684\u5206\u5272\u70b9\u7684\u65f6\u5019\u5c31\u89e6\u5e95\uff1aPythondefcreate_tree(dataset,fleaf,ferr,opt=None):'''\u9012\u5f52\u521b\u5efa\u6811\u7ed3\u6784dataset:\u5f85\u5212\u5206\u7684\u6570\u636e\u96c6fleaf:\u521b\u5efa\u53f6\u5b50\u8282\u70b9\u7684\u51fd\u6570ferr:\u8ba1\u7b97\u6570\u636e\u8bef\u5dee\u7684\u51fd\u6570opt:\u56de\u5f52\u6811\u53c2\u6570.err_tolerance:\u6700\u5c0f\u8bef\u5dee\u4e0b\u964d\u503c;n_tolerance:\u6570\u636e\u5207\u5206\u6700\u5c0f\u6837\u672c\u6570'''ifoptisNone:opt={'err_tolerance':1,'n_tolerance':4}#\u9009\u62e9\u6700\u4f18\u5316\u5206\u7279\u5f81\u548c\u7279\u5f81\u503cfeat_idx,value=choose_best_feature(dataset,fleaf,ferr,opt)#\u89e6\u5e95\u6761\u4ef6iffeat_idxisNone:returnvalue#\u521b\u5efa\u56de\u5f52\u6811tree={'feat_idx':feat_idx,'feat_val':value}#\u9012\u5f52\u521b\u5efa\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811ldata,rdata=split_dataset(dataset,feat_idx,value)ltree=create_tree(ldata,fleaf,ferr,opt)rtree=create_tree(rdata,fleaf,ferr,opt)tree['left']=ltreetree['right']=rtreereturntree1234567891011121314151617181920212223242526defcreate_tree(dataset,fleaf,ferr,opt=None):\u00a0\u00a0\u00a0\u00a0'''\u9012\u5f52\u521b\u5efa\u6811\u7ed3\u6784\u00a0\u00a0\u00a0\u00a0dataset:\u5f85\u5212\u5206\u7684\u6570\u636e\u96c6\u00a0\u00a0\u00a0\u00a0fleaf:\u521b\u5efa\u53f6\u5b50\u8282\u70b9\u7684\u51fd\u6570\u00a0\u00a0\u00a0\u00a0ferr:\u8ba1\u7b97\u6570\u636e\u8bef\u5dee\u7684\u51fd\u6570\u00a0\u00a0\u00a0\u00a0opt:\u56de\u5f52\u6811\u53c2\u6570.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0err_tolerance:\u6700\u5c0f\u8bef\u5dee\u4e0b\u964d\u503c;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0n_tolerance:\u6570\u636e\u5207\u5206\u6700\u5c0f\u6837\u672c\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0ifoptisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0opt={'err_tolerance':1,'n_tolerance':4}\u00a0\u00a0\u00a0\u00a0#\u9009\u62e9\u6700\u4f18\u5316\u5206\u7279\u5f81\u548c\u7279\u5f81\u503c\u00a0\u00a0\u00a0\u00a0feat_idx,value=choose_best_feature(dataset,fleaf,ferr,opt)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u89e6\u5e95\u6761\u4ef6\u00a0\u00a0\u00a0\u00a0iffeat_idxisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnvalue\u00a0\u00a0\u00a0\u00a0#\u521b\u5efa\u56de\u5f52\u6811\u00a0\u00a0\u00a0\u00a0tree={'feat_idx':feat_idx,'feat_val':value}\u00a0\u00a0\u00a0\u00a0#\u9012\u5f52\u521b\u5efa\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u00a0\u00a0\u00a0\u00a0ldata,rdata=split_dataset(dataset,feat_idx,value)\u00a0\u00a0\u00a0\u00a0ltree=create_tree(ldata,fleaf,ferr,opt)\u00a0\u00a0\u00a0\u00a0rtree=create_tree(rdata,fleaf,ferr,opt)\u00a0\u00a0\u00a0\u00a0tree['left']=ltree\u00a0\u00a0\u00a0\u00a0tree['right']=rtree\u00a0\u00a0\u00a0\u00a0returntree\u4f7f\u7528\u56de\u5f52\u6811\u5bf9\u6570\u636e\u8fdb\u884c\u56de\u5f52\u8fd9\u91cc\u4f7f\u7528\u4e86\u73b0\u6210\u7684\u5206\u6bb5\u6570\u636e\u4f5c\u4e3a\u8bad\u7ec3\u6570\u636e\u751f\u6210\u56de\u5f52\u6811\uff0c\u672c\u6587\u6240\u6709\u4f7f\u7528\u7684\u6570\u636e\u8be6\u89c1:\u00a0https://github.com/PytLab/MLBox/tree/master/classification_and_regression_trees\u53ef\u89c6\u5316\u6570\u636e\u70b9Pythondataset=load_data('ex0.txt')dataset=np.array(dataset)#\u7ed8\u5236\u6563\u70b9plt.scatter(dataset[:,0],dataset[:,1])1234dataset=load_data('ex0.txt')dataset=np.array(dataset)#\u7ed8\u5236\u6563\u70b9plt.scatter(dataset[:,0],dataset[:,1])\u521b\u5efa\u56de\u5f52\u6811\u5e76\u53ef\u89c6\u5316\u770b\u5230\u8fd9\u79cd\u5206\u6bb5\u7684\u6570\u636e\uff0c\u56de\u5f52\u6811\u62df\u5408\u5b83\u53ef\u662f\u6700\u5408\u9002\u4e0d\u8fc7\u4e86\uff0c\u6211\u4eec\u521b\u5efa\u56de\u5f52\u6811:Pythontree=create_tree(dataset,fleaf,ferr,opt={'n_tolerance':4,'err_tolerance':1})12tree=create_tree(dataset,fleaf,ferr,opt={'n_tolerance':4,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'err_tolerance':1})\u901a\u8fc7Python\u5b57\u5178\u8868\u793a\u7684\u56de\u5f52\u6811\u7ed3\u6784:Python{'feat_idx':0,'feat_val':0.40015800000000001,'left':{'feat_idx':0,'feat_val':0.20819699999999999,'left':-0.023838155555555553,'right':1.0289583666666666},'right':{'feat_idx':0,'feat_val':0.609483,'left':1.980035071428571,'right':{'feat_idx':0,'feat_val':0.81674199999999997,'left':2.9836209534883724,'right':3.9871631999999999}}}12345678910111213{'feat_idx':0,'feat_val':0.40015800000000001,'left':{'feat_idx':0,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'feat_val':0.20819699999999999,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'left':-0.023838155555555553,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'right':1.0289583666666666},'right':{'feat_idx':0,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'feat_val':0.609483,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'left':1.980035071428571,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'right':{'feat_idx':0,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'feat_val':0.81674199999999997,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'left':2.9836209534883724,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'right':3.9871631999999999}}}\u8fd9\u91cc\u6211\u8fd8\u662f\u4f7f\u7528Graphviz\u6765\u53ef\u89c6\u5316\u56de\u5f52\u6811\uff0c\u7c7b\u4f3c\u4e4b\u524d\u51b3\u7b56\u6811\u505a\u5206\u7c7b\u7684\u6587\u7ae0\u4e2d\u7684dotify\u51fd\u6570\uff0c\u8fd9\u91cc\u7a0d\u5fae\u4fee\u6539\u4e0b\u53f6\u5b50\u8282\u70b9\u7684label\uff0c\u6211\u4eec\u4fbf\u53ef\u4ee5\u9012\u5f52\u5f97\u5230\u51b3\u7b56\u6811\u5bf9\u5e94\u7684dot\u6587\u4ef6,\u00a0dotify\u51fd\u6570\u7684\u5b9e\u73b0\u89c1:https://github.com/PytLab/MLBox/blob/master/classification_and_regression_trees/regression_tree.py#L159\u7136\u540e\u83b7\u53d6\u6811\u7ed3\u6784\u56fe:Pythondatafile='ex0.txt'dotfile='{}.dot'.format(datafile.split('.')[0])withopen(dotfile,'w')asf:content=dotify(tree)f.write(content)12345datafile='ex0.txt'dotfile='{}.dot'.format(datafile.split('.')[0])withopen(dotfile,'w')asf:\u00a0\u00a0\u00a0\u00a0content=dotify(tree)\u00a0\u00a0\u00a0\u00a0f.write(content)\u751f\u6210\u56de\u5f52\u6811\u56fe\u7247:Pythondot-Tpngex0.dot-oex0_tree.png1dot-Tpngex0.dot-oex0_tree.png\u5176\u4e2d\u8282\u70b9\u4e0a\u6570\u5b57\u4ee3\u8868:\u7279\u5f81\u7f16\u53f7:\u7279\u5f81\u5206\u5272\u503c\u7ed8\u5236\u56de\u5f52\u6811\u56de\u5f52\u66f2\u7ebf\u6709\u4e86\u56de\u5f52\u6811\uff0c\u6211\u4eec\u4fbf\u53ef\u4ee5\u7ed8\u5236\u56de\u5f52\u6811\u56de\u5f52\u66f2\u7ebf\uff0c\u770b\u770b\u5b83\u5bf9\u4e8e\u5206\u6bb5\u6570\u636e\u662f\u5426\u80fd\u6709\u8f83\u597d\u7684\u56de\u5f52\u6548\u679c\uff1aPython#\u7ed8\u5236\u56de\u5f52\u66f2\u7ebfx=np.linspace(0,1,50)y=[tree_predict([i],tree)foriinx]plt.plot(x,y,c='r')plt.show()12345#\u7ed8\u5236\u56de\u5f52\u66f2\u7ebfx=np.linspace(0,1,50)y=[tree_predict([i],tree)foriinx]plt.plot(x,y,c='r')plt.show()\u6811\u526a\u679d\u5728\u4ecb\u7ecd\u6811\u526a\u679d\u4e4b\u524d\u5148\u4f7f\u7528\u4e0a\u4e00\u90e8\u5206\u7684\u4ee3\u7801\u5bf9\u4e24\u7ec4\u7c7b\u4f3c\u7684\u6570\u636e\u8fdb\u884c\u56de\u5f52\uff0c\u53ef\u89c6\u5316\u540e\u7684\u6570\u636e\u4ee5\u53ca\u56de\u5f52\u66f2\u7ebf\u5982\u4e0b(\u6570\u636e\u6587\u4ef6\u5de6&\u6570\u636e\u6587\u4ef6\u53f3):\u5de6\u53f3\u4e24\u8fb9\u7684\u6570\u636e\u7684\u5206\u5e03\u57fa\u672c\u76f8\u540c\u4f46\u662f\u4f7f\u7528\u76f8\u540c\u7684\u53c2\u6570\u5f97\u5230\u7684\u56de\u5f52\u6811\u5374\u5b8c\u5168\u4e0d\u540c\u5de6\u8fb9\u7684\u56de\u5f52\u6811\u53ea\u6709\u4e24\u4e2a\u5206\u652f\uff0c\u800c\u53f3\u8fb9\u7684\u5206\u652f\u5219\u6709\u5f88\u591a\uff0c\u751a\u81f3\u6709\u65f6\u5019\u4f1a\u4e3a\u6240\u6709\u7684\u6570\u636e\u70b9\u5f97\u5230\u4e00\u4e2a\u5206\u652f\uff0c\u8fd9\u6837\u56de\u5f52\u6811\u5c06\u4f1a\u975e\u5e38\u7684\u5e9e\u5927,\u5982\u4e0b\u662f\u53ef\u89c6\u5316\u5f97\u5230\u7684\u4e24\u4e2a\u56de\u5f52\u6811:\u5982\u679c\u4e00\u68f5\u6811\u7684\u8282\u70b9\u8fc7\u591a\u5219\u8868\u660e\u8be5\u6a21\u578b\u53ef\u80fd\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u201c\u8fc7\u62df\u5408\u201d\u3002\u90a3\u4e48\u6211\u4eec\u9700\u8981\u964d\u4f4e\u51b3\u7b56\u6811\u7684\u590d\u6742\u5ea6\u6765\u907f\u514d\u8fc7\u62df\u5408\uff0c\u6b64\u8fc7\u7a0b\u5c31\u662f\u526a\u679d\u3002\u526a\u679d\u6280\u672f\u53c8\u5206\u4e3a\u9884\u526a\u679d\u548c\u540e\u526a\u679d\u3002\u9884\u526a\u679d\u9884\u526a\u679d\u662f\u5728\u751f\u6210\u51b3\u7b56\u6811\u4e4b\u524d\u901a\u8fc7\u6539\u53d8\u53c2\u6570\u7136\u540e\u5728\u6811\u751f\u6210\u7684\u8fc7\u7a0b\u4e2d\u8fdb\u884c\u7684\u3002\u6bd4\u5982\u5728\u4e0a\u6587\u4e2d\u6211\u4eec\u521b\u5efa\u56de\u5f52\u6811\u7684\u51fd\u6570\u4e2d\u6709\u4e2aopt\u53c2\u6570\uff0c\u5176\u4e2d\u5305\u542bn_tolerance\u548cerr_tolerance\uff0c\u4ed6\u4eec\u53ef\u4ee5\u63a7\u5236\u4f55\u65f6\u505c\u6b62\u6811\u7684\u5206\u88c2\uff0c\u5f53\u589e\u5927\u53f6\u5b50\u8282\u70b9\u7684\u6700\u5c0f\u6570\u636e\u91cf\u4ee5\u53ca\u589e\u5927\u8bef\u5dee\u5bb9\u5fcd\u5ea6\uff0c\u6811\u7684\u5206\u88c2\u4e5f\u4f1a\u8d8a\u63d0\u524d\u7684\u7ec8\u6b62\u3002\u5f53\u6211\u4eec\u628a\u8bef\u5dee\u53d8\u5316\u5bb9\u5fcd\u5ea6\u589e\u52a0\u52302000\u7684\u65f6\u5019\u5f97\u5230\u7684\u56de\u5f52\u6811\u4ee5\u53ca\u56de\u5f52\u66f2\u7ebf\u53ef\u89c6\u5316\u5982\u4e0b:\u540e\u526a\u679d\u9884\u526a\u679d\u6280\u672f\u9700\u8981\u7528\u4e8e\u9884\u5148\u6307\u5b9a\u53c2\u6570\uff0c\u4f46\u662f\u540e\u526a\u679d\u6280\u672f\u5219\u662f\u901a\u8fc7\u6d4b\u8bd5\u6570\u636e\u6765\u81ea\u52a8\u8fdb\u884c\u526a\u679d\u4e0d\u9700\u8981\u7528\u6237\u5e72\u9884\u56e0\u6b64\u662f\u4e00\u79cd\u66f4\u7406\u60f3\u7684\u526a\u679d\u6280\u672f\uff0c\u4f46\u662f\u6211\u4eec\u9700\u8981\u5199\u526a\u679d\u51fd\u6570\u6765\u5904\u7406\u3002\u540e\u526a\u679d\u7684\u5927\u81f4\u601d\u60f3\u5c31\u662f\u6211\u4eec\u9488\u5bf9\u4e00\u9897\u5b50\u6811\uff0c\u5c1d\u8bd5\u5c06\u5176\u5de6\u53f3\u5b50\u6811(\u8282\u70b9)\u5408\u5e76\uff0c\u901a\u8fc7\u6d4b\u8bd5\u6570\u636e\u8ba1\u7b97\u5408\u5e76\u524d\u540e\u7684\u65b9\u5dee\uff0c\u5982\u679c\u5408\u5e76\u540e\u7684\u65b9\u5dee\u6bd4\u5408\u5e76\u524d\u7684\u5c0f\uff0c\u8fd9\u8bf4\u660e\u53ef\u4ee5\u5408\u5e76\u6b64\u5b50\u6811\u3002\u5bf9\u6811\u8fdb\u884c\u584c\u9677\u5904\u7406:\u6211\u4eec\u5bf9\u4e00\u68f5\u6811\u8fdb\u884c\u584c\u9677\u5904\u7406\uff0c\u5c31\u662f\u9012\u5f52\u5c06\u8fd9\u68f5\u6811\u8fdb\u884c\u5408\u5e76\u8fd4\u56de\u8fd9\u68f5\u6811\u7684\u5e73\u5747\u503c\u3002Pythondefcollapse(tree):'''\u5bf9\u4e00\u68f5\u6811\u8fdb\u884c\u584c\u9677\u5904\u7406,\u5f97\u5230\u7ed9\u5b9a\u6811\u7ed3\u6784\u7684\u5e73\u5747\u503c'''ifnot_tree(tree):returntreeltree,rtree=tree['left'],tree['right']return(collapse(ltree)+collapse(rtree))/21234567defcollapse(tree):\u00a0\u00a0\u00a0\u00a0'''\u5bf9\u4e00\u68f5\u6811\u8fdb\u884c\u584c\u9677\u5904\u7406,\u5f97\u5230\u7ed9\u5b9a\u6811\u7ed3\u6784\u7684\u5e73\u5747\u503c\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0ifnot_tree(tree):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntree\u00a0\u00a0\u00a0\u00a0ltree,rtree=tree['left'],tree['right']\u00a0\u00a0\u00a0\u00a0return(collapse(ltree)+collapse(rtree))/2\u540e\u526a\u679d\u7684Python\u5b9e\u73b0:Pythondefpostprune(tree,test_data):'''\u6839\u636e\u6d4b\u8bd5\u6570\u636e\u5bf9\u6811\u7ed3\u6784\u8fdb\u884c\u540e\u526a\u679d'''ifnot_tree(tree):returntree#\u82e5\u6ca1\u6709\u6d4b\u8bd5\u6570\u636e\u5219\u76f4\u63a5\u8fd4\u56de\u6811\u5e73\u5747\u503cifnottest_data:returncollapse(tree)ltree,rtree=tree['left'],tree['right']ifnot_tree(ltree)andnot_tree(rtree):#\u5206\u5272\u6570\u636e\u7528\u4e8e\u6d4b\u8bd5ldata,rdata=split_dataset(test_data,tree['feat_idx'],tree['feat_val'])#\u5206\u522b\u8ba1\u7b97\u5408\u5e76\u524d\u548c\u5408\u5e76\u540e\u7684\u6d4b\u8bd5\u6570\u636e\u8bef\u5deeerr_no_merge=(np.sum((np.array(ldata)-ltree)**2)+np.sum((np.array(rdata)-rtree)**2))err_merge=np.sum((np.array(test_data)-(ltree+rtree)/2)**2)iferr_merge<err_no_merge:print('merged')return(ltree+rtree)/2else:returntreetree['left']=postprune(tree['left'],test_data)tree['right']=postprune(tree['right'],test_data)returntree123456789101112131415161718192021222324defpostprune(tree,test_data):\u00a0\u00a0\u00a0\u00a0'''\u6839\u636e\u6d4b\u8bd5\u6570\u636e\u5bf9\u6811\u7ed3\u6784\u8fdb\u884c\u540e\u526a\u679d\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0ifnot_tree(tree):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntree\u00a0\u00a0\u00a0\u00a0#\u82e5\u6ca1\u6709\u6d4b\u8bd5\u6570\u636e\u5219\u76f4\u63a5\u8fd4\u56de\u6811\u5e73\u5747\u503c\u00a0\u00a0\u00a0\u00a0ifnottest_data:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returncollapse(tree)\u00a0\u00a0\u00a0\u00a0ltree,rtree=tree['left'],tree['right']\u00a0\u00a0\u00a0\u00a0ifnot_tree(ltree)andnot_tree(rtree):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5206\u5272\u6570\u636e\u7528\u4e8e\u6d4b\u8bd5\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ldata,rdata=split_dataset(test_data,tree['feat_idx'],tree['feat_val'])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5206\u522b\u8ba1\u7b97\u5408\u5e76\u524d\u548c\u5408\u5e76\u540e\u7684\u6d4b\u8bd5\u6570\u636e\u8bef\u5dee\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0err_no_merge=(np.sum((np.array(ldata)-ltree)**2)+\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0np.sum((np.array(rdata)-rtree)**2))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0err_merge=np.sum((np.array(test_data)-(ltree+rtree)/2)**2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iferr_merge<err_no_merge:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('merged')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return(ltree+rtree)/2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntree\u00a0\u00a0\u00a0\u00a0tree['left']=postprune(tree['left'],test_data)\u00a0\u00a0\u00a0\u00a0tree['right']=postprune(tree['right'],test_data)\u00a0\u00a0\u00a0\u00a0returntree\u6211\u4eec\u770b\u4e00\u4e0b\u4e0d\u5bf9\u521a\u624d\u7684\u6811\u8fdb\u884c\u9884\u526a\u679d\u800c\u662f\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u8fdb\u884c\u540e\u526a\u679d\u7684\u6548\u679c:Pythondata_test=load_data('ex2test.txt')pruned_tree=postprune(tree,data_test)12data_test=load_data('ex2test.txt')pruned_tree=postprune(tree,data_test)Pythonmergedmergedmergedmergedmergedmergedmergedmerged12345678mergedmergedmergedmergedmergedmergedmergedmerged\u901a\u8fc7\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\u603b\u5171\u8fdb\u884c\u4e868\u6b21\u526a\u679d\u64cd\u4f5c\uff0c\u901a\u8fc7\u628a\u526a\u679d\u524d\u548c\u526a\u679d\u540e\u7684\u6811\u53ef\u89c6\u5316\u5bf9\u6bd4\u4e0b\u770b\u770b:\u6811\u7684\u89c4\u6a21\u7684\u786e\u662f\u51cf\u5c0f\u4e86\u3002\u6a21\u578b\u6811\u4e0a\u4e00\u90e8\u5206\u53f6\u5b50\u8282\u70b9\u4e0a\u653e\u7684\u662f\u5206\u5272\u540e\u6570\u636e\u7684\u5e73\u5747\u503c\u5e76\u4ee5\u4ed6\u4f5c\u4e3a\u6ee1\u8db3\u6761\u4ef6\u7684\u6837\u672c\u7684\u9884\u6d4b\u503c\uff0c\u672c\u90e8\u5206\u6211\u4eec\u5c06\u5728\u53f6\u5b50\u8282\u70b9\u4e0a\u653e\u4e00\u4e2a\u7ebf\u6027\u6a21\u578b\u6765\u505a\u9884\u6d4b\u3002\u4e5f\u5c31\u662f\u6307\u6211\u4eec\u7684\u6811\u662f\u7531\u591a\u4e2a\u7ebf\u6027\u6a21\u578b\u7ec4\u6210\u7684\uff0c\u663e\u7136\u4f1a\u6bd4\u5f3a\u884c\u7528\u5e73\u5747\u503c\u6765\u5efa\u6a21\u66f4\u6709\u4f18\u52bf\u3002\u6a21\u578b\u6811\u4f7f\u7528\u591a\u4e2a\u7ebf\u6027\u51fd\u6570\u6765\u505a\u56de\u5f52\u6bd4\u7528\u591a\u4e2a\u5e73\u5747\u503c\u7ec4\u6210\u4e00\u68f5\u5927\u6811\u7684\u6a21\u578b\u66f4\u6709\u53ef\u89e3\u91ca\u6027\u800c\u4e14\u7ebf\u6027\u6a21\u578b\u7684\u4f7f\u7528\u53ef\u4ee5\u4f7f\u6811\u7684\u89c4\u6a21\u51cf\u5c0f\uff0c\u6bd5\u7adf\u5e73\u5747\u503c\u7684\u8986\u76d6\u8303\u56f4\u53ea\u662f\u5c40\u90e8\u7684\uff0c\u800c\u7ebf\u6027\u6a21\u578b\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u5177\u6709\u7ebf\u6027\u5173\u7cfb\u7684\u6570\u636e\u3002\u6a21\u578b\u6811\u4e5f\u5177\u6709\u66f4\u9ad8\u7684\u9884\u6d4b\u51c6\u786e\u5ea6\u521b\u5efa\u6a21\u578b\u6811\u6a21\u578b\u6811\u548c\u56de\u5f52\u6811\u7684\u601d\u60f3\u662f\u5b8c\u5168\u4e00\u81f4\u7684\uff0c\u53ea\u662f\u5728\u751f\u6210\u53f6\u5b50\u8282\u70b9\u7684\u65b9\u6cd5\u4ee5\u53ca\u8ba1\u7b97\u6570\u636e\u8bef\u5dee(\u4e0d\u7eaf\u5ea6)\u7684\u65b9\u5f0f\u4e0d\u540c\u3002\u5728\u6a21\u578b\u6811\u91cc\u9488\u5bf9\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u6211\u4eec\u9700\u8981\u4f7f\u7528\u5206\u5272\u5230\u7684\u6570\u636e\u8fdb\u884c\u7ebf\u6027\u56de\u5f52\u5f97\u5230\u7ebf\u6027\u56de\u5f52\u7cfb\u6570\u800c\u4e0d\u662f\u7b80\u5355\u7684\u8ba1\u7b97\u6570\u636e\u7684\u5e73\u5747\u503c\u3002\u4e0d\u7eaf\u5ea6\u7684\u8ba1\u7b97\u4e5f\u4e0d\u662f\u7b80\u5355\u7684\u8ba1\u7b97\u6570\u636e\u7684\u65b9\u5dee\uff0c\u800c\u662f\u8ba1\u7b97\u7ebf\u6027\u6a21\u578b\u7684\u6b8b\u5dee\u5e73\u65b9\u548c\u3002\u4e3a\u4e86\u80fd\u4e3a\u53f6\u5b50\u8282\u70b9\u8ba1\u7b97\u7ebf\u6027\u6a21\u578b\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u51fd\u6570linear_regression,\u76f8\u5e94\u6a21\u578b\u6811\u7684ferr\u548cfleaf\u7684Python\u5b9e\u73b0Pythondeflinear_regression(dataset):'''\u83b7\u53d6\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7cfb\u6570'''dataset=np.matrix(dataset)#\u5206\u5272\u6570\u636e\u5e76\u6dfb\u52a0\u5e38\u6570\u5217X_ori,y=dataset[:,:-1],dataset[:,-1]X_ori,y=np.matrix(X_ori),np.matrix(y)m,n=X_ori.shapeX=np.matrix(np.ones((m,n+1)))X[:,1:]=X_ori#\u56de\u5f52\u7cfb\u6570w=(X.T*X).I*X.T*yreturnw,X,ydeffleaf(dataset):'''\u8ba1\u7b97\u7ed9\u5b9a\u6570\u636e\u96c6\u7684\u7ebf\u6027\u56de\u5f52\u7cfb\u6570'''w,_,_=linear_regression(dataset)returnwdefferr(dataset):'''\u5bf9\u7ed9\u5b9a\u6570\u636e\u96c6\u8fdb\u884c\u56de\u5f52\u5e76\u8ba1\u7b97\u8bef\u5dee'''w,X,y=linear_regression(dataset)y_prime=X*wreturnnp.var(y_prime-y)123456789101112131415161718192021222324deflinear_regression(dataset):\u00a0\u00a0\u00a0\u00a0'''\u83b7\u53d6\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0dataset=np.matrix(dataset)\u00a0\u00a0\u00a0\u00a0#\u5206\u5272\u6570\u636e\u5e76\u6dfb\u52a0\u5e38\u6570\u5217\u00a0\u00a0\u00a0\u00a0X_ori,y=dataset[:,:-1],dataset[:,-1]\u00a0\u00a0\u00a0\u00a0X_ori,y=np.matrix(X_ori),np.matrix(y)\u00a0\u00a0\u00a0\u00a0m,n=X_ori.shape\u00a0\u00a0\u00a0\u00a0X=np.matrix(np.ones((m,n+1)))\u00a0\u00a0\u00a0\u00a0X[:,1:]=X_ori\u00a0\u00a0\u00a0\u00a0#\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0w=(X.T*X).I*X.T*y\u00a0\u00a0\u00a0\u00a0returnw,X,ydeffleaf(dataset):\u00a0\u00a0\u00a0\u00a0'''\u8ba1\u7b97\u7ed9\u5b9a\u6570\u636e\u96c6\u7684\u7ebf\u6027\u56de\u5f52\u7cfb\u6570\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0w,_,_=linear_regression(dataset)\u00a0\u00a0\u00a0\u00a0returnwdefferr(dataset):\u00a0\u00a0\u00a0\u00a0'''\u5bf9\u7ed9\u5b9a\u6570\u636e\u96c6\u8fdb\u884c\u56de\u5f52\u5e76\u8ba1\u7b97\u8bef\u5dee\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0w,X,y=linear_regression(dataset)\u00a0\u00a0\u00a0\u00a0y_prime=X*w\u00a0\u00a0\u00a0\u00a0returnnp.var(y_prime-y)\u5728\u5206\u6bb5\u7ebf\u6027\u6570\u636e\u4e0a\u5e94\u7528\u6a21\u578b\u6811\u672c\u90e8\u5206\u4f7f\u7528\u4e86\u4e8b\u5148\u51c6\u5907\u597d\u7684\u5206\u6bb5\u7ebf\u6027\u6570\u636e\u6765\u6784\u5efa\u6a21\u578b\u6811\uff0c\u6570\u636e\u70b9\u53ef\u89c6\u5316\u5982\u4e0b:\u73b0\u5728\u6211\u4eec\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e\u6784\u5efa\u4e00\u4e2a\u6a21\u578b\u6811:Pythontree=create_tree(dataset,fleaf,ferr,opt={'err_tolerance':0.1,'n_tolerance':4})tree12tree=create_tree(dataset,fleaf,ferr,opt={'err_tolerance':0.1,'n_tolerance':4})tree\u5f97\u5230\u7684\u6811\u7ed3\u6784\uff1aPython{'feat_idx':0,'feat_val':0.30440099999999998,'left':matrix([[3.46877936],[1.18521743]]),'right':matrix([[1.69855694e-03],[1.19647739e+01]])}123456{'feat_idx':0,'feat_val':0.30440099999999998,'left':matrix([[3.46877936],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[1.18521743]]),'right':matrix([[\u00a0\u00a01.69855694e-03],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[\u00a0\u00a01.19647739e+01]])}\u53ef\u89c6\u5316:\u7ed8\u5236\u56de\u5f52\u66f2\u7ebf:\u53ef\u4ee5\u901a\u8fc7\u6a21\u578b\u6811\u770b\u5230\u5bf9\u4e8e\u6b64\u6570\u636e\u53ea\u9700\u8981\u4e24\u4e2a\u5206\u652f\uff0c\u6570\u7684\u6df1\u5ea6\u4e5f\u53ea\u67092\u5c42\u3002\u5f53x<0.304\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u7ebf\u6027\u6a21\u578by=3.47+1.19x\u6765\u56de\u5f52\u5f53x>0.304\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u7ebf\u6027\u6a21\u578by=0.0017+1.20x\u6765\u56de\u5f52\u56de\u5f52\u6811\u4e0e\u7ebf\u6027\u56de\u5f52\u7684\u5bf9\u6bd4\u672c\u90e8\u5206\u6211\u4eec\u4f7f\u7528\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u548c\u56de\u5f52\u6811\u5206\u522b\u5bf9\u540c\u4e00\u7ec4\u6570\u636e\u8fdb\u884c\u56de\u5f52\uff0c\u5e76\u4f7f\u7528\u540c\u4e00\u7ec4\u6d4b\u8bd5\u6570\u636e\u8ba1\u7b97\u76f8\u5173\u7cfb\u6570(CorrelationCoefficient)\u5bf9\u4e24\u79cd\u6a21\u578b\u7684\u56de\u5f52\u6548\u679c\u8fdb\u884c\u5bf9\u6bd4\u3002\u6570\u636e\u6211\u8fd8\u662f\u4f7f\u7528\u300aMachinieLearninginAction\u300b\u4e2d\u7684\u73b0\u6210\u6570\u636e\uff0c\u6570\u636e\u53ef\u89c6\u5316\u5982\u4e0b:\u73b0\u5728\u6211\u4eec\u5206\u522b\u4f7f\u7528\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u548c\u56de\u5f52\u6811\u5bf9\u8be5\u6570\u636e\u8fdb\u884c\u56de\u5f52\uff0c\u5e76\u8ba1\u7b97\u6a21\u578b\u9884\u6d4b\u503c\u548c\u6d4b\u8bd5\u6837\u672c\u7684\u76f8\u5173\u7cfb\u6570R2R2(\u5b8c\u6574\u4ee3\u7801\u89c1:https://github.com/PytLab/MLBox/blob/master/classification_and_regression_trees/compare.py)\u76f8\u5173\u7cfb\u6570\u8ba1\u7b97:Pythondefget_corrcoef(X,Y):#XY\u7684\u534f\u65b9\u5deecov=np.mean(X*Y)-np.mean(X)*np.mean(Y)returncov/(np.var(X)*np.var(Y))**0.51234defget_corrcoef(X,Y):\u00a0\u00a0\u00a0\u00a0#XY\u7684\u534f\u65b9\u5dee\u00a0\u00a0\u00a0\u00a0cov=np.mean(X*Y)-np.mean(X)*np.mean(Y)\u00a0\u00a0\u00a0\u00a0returncov/(np.var(X)*np.var(Y))**0.5\u83b7\u5f97\u7684\u76f8\u5173\u7cfb\u6570:Pythonlinearregressioncorrelationcoefficient:0.9434684235674773regressiontreecorrelationcoefficient:0.978030793270408912linearregressioncorrelationcoefficient:0.9434684235674773regressiontreecorrelationcoefficient:0.9780307932704089\u7ed8\u5236\u7ebf\u6027\u56de\u5f52\u548c\u6811\u56de\u5f52\u7684\u56de\u5f52\u66f2\u7ebf(\u9ec4\u8272\u4f1a\u6811\u56de\u5f52\u66f2\u7ebf\uff0c\u7ea2\u8272\u4f1a\u7ebf\u6027\u56de\u5f52):\u53ef\u89c1\u6811\u56de\u5f52\u65b9\u6cd5\u5728\u9884\u6d4b\u590d\u6742\u6570\u636e\u7684\u65f6\u5019\u4f1a\u6bd4\u7b80\u5355\u7684\u7ebf\u6027\u6a21\u578b\u66f4\u6709\u6548\u3002\u603b\u7ed3\u672c\u6587\u5bf9\u51b3\u7b56\u6811\u7528\u4e8e\u8fde\u7eed\u6570\u503c\u7684\u56de\u5f52\u9884\u6d4b\u8fdb\u884c\u4e86\u4ecb\u7ecd\uff0c\u5e76\u5b9e\u73b0\u4e86\u56de\u5f52\u6811,\u526a\u679d\u548c\u6a21\u578b\u6811\u4ee5\u53ca\u76f8\u5e94\u7684\u6811\u7ed3\u6784\u8f93\u51fa\u53ef\u89c6\u5316\u7b49\u3002\u5bf9\u4e8e\u6a21\u578b\u6811\u4e5f\u7ed9\u4e88\u4e86\u76f8\u5e94\u7684Python\u5b9e\u73b0\u5e76\u9488\u5bf9\u5206\u6bb5\u7ebf\u6027\u6570\u636e\u8fdb\u884c\u4e86\u56de\u5f52\u6d4b\u8bd5\u3002\u6700\u540e\u5e76\u5bf9\u56de\u5f52\u6811\u6a21\u578b\u548c\u7b80\u5355\u7684\u6807\u51c6\u7ebf\u6027\u56de\u5f52\u6a21\u578b\u8fdb\u884c\u4e86\u5bf9\u6bd4\u3002\u53c2\u8003\u300aMachineLearninginAction\u300bCART\u5206\u7c7b\u4e0e\u56de\u5f52\u6811\u7684\u539f\u7406\u4e0e\u5b9e\u73b0\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff011\u8d5e1\u6536\u85cf3\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["\u4f7f\u7528 GC\u3001Objgraph \u5e72\u6389 Python \u5185\u5b58\u6cc4\u9732\u4e0e\u5faa\u73af\u5f15\u7528\uff01"], "art_url": ["http://python.jobbole.com/88827/"], "art_create_time": ["2017/11/06"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/11/92f71271d02d70372302b5e0886d112d.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1axybaby\u00a0\u00a0\u00a0Python\u4f7f\u7528\u5f15\u7528\u8ba1\u6570\u548c\u5783\u573e\u56de\u6536\u6765\u505a\u5185\u5b58\u7ba1\u7406\uff0c\u524d\u9762\u4e5f\u5199\u8fc7\u4e00\u904d\u6587\u7ae0\u300aPython\u5185\u5b58\u4f18\u5316\u300b\uff0c\u4ecb\u7ecd\u4e86\u5728python\u4e2d\uff0c\u5982\u4f55profile\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5e76\u505a\u51fa\u76f8\u5e94\u7684\u4f18\u5316\u3002\u672c\u6587\u4ecb\u7ecd\u4e24\u4e2a\u66f4\u81f4\u547d\u7684\u95ee\u9898\uff1a\u5185\u5b58\u6cc4\u9732\u4e0e\u5faa\u73af\u5f15\u7528\u3002\u5185\u5b58\u6cc4\u9732\u662f\u8ba9\u6240\u6709\u7a0b\u5e8f\u5458\u90fd\u95fb\u98ce\u4e27\u80c6\u7684\u95ee\u9898\uff0c\u8f7b\u5219\u5bfc\u81f4\u7a0b\u5e8f\u8fd0\u884c\u901f\u5ea6\u51cf\u6162\uff0c\u91cd\u5219\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\uff1b\u800c\u5faa\u73af\u5f15\u7528\u662f\u4f7f\u7528\u4e86\u5f15\u7528\u8ba1\u6570\u7684\u6570\u636e\u7ed3\u6784\u3001\u7f16\u7a0b\u8bed\u8a00\u90fd\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u3002\u672c\u6587\u63ed\u6653\u8fd9\u4e24\u4e2a\u95ee\u9898\u5728python\u8bed\u8a00\u4e2d\u662f\u5982\u4f55\u5b58\u5728\u7684\uff0c\u7136\u540e\u8bd5\u56fe\u5229\u7528gc\u6a21\u5757\u548cobjgraph\u6765\u89e3\u51b3\u8fd9\u4e24\u4e2a\u95ee\u9898\u3002\u6ce8\u610f\uff1a\u672c\u6587\u7684\u76ee\u6807\u662fCpython\uff0c\u6d4b\u8bd5\u4ee3\u7801\u90fd\u662f\u8fd0\u884c\u5728Python2.7\u3002\u53e6\u5916\uff0c\u672c\u6587\u4e0d\u8003\u8651C\u6269\u5c55\u9020\u6210\u7684\u5185\u5b58\u6cc4\u9732\uff0c\u8fd9\u662f\u53e6\u4e00\u4e2a\u590d\u6742\u4e14\u5934\u75bc\u7684\u95ee\u9898\u3002\u4e00\u5206\u949f\u7248\u672cpython\u4f7f\u7528\u5f15\u7528\u8ba1\u6570\u548c\u5783\u573e\u56de\u6536\u6765\u91ca\u653e\uff08free\uff09Python\u5bf9\u8c61\u5f15\u7528\u8ba1\u6570\u7684\u4f18\u70b9\u662f\u539f\u7406\u7b80\u5355\u3001\u5c06\u6d88\u8017\u5747\u644a\u5230\u8fd0\u884c\u65f6\uff1b\u7f3a\u70b9\u662f\u65e0\u6cd5\u5904\u7406\u5faa\u73af\u5f15\u7528Python\u5783\u573e\u56de\u6536\u7528\u4e8e\u5904\u7406\u5faa\u73af\u5f15\u7528\uff0c\u4f46\u662f\u65e0\u6cd5\u5904\u7406\u5faa\u73af\u5f15\u7528\u4e2d\u7684\u5bf9\u8c61\u5b9a\u4e49\u4e86__del__\u7684\u60c5\u51b5\uff0c\u800c\u4e14\u6bcf\u6b21\u56de\u6536\u4f1a\u9020\u6210\u4e00\u5b9a\u7684\u5361\u987fgcmodule\u662fpython\u5783\u573e\u56de\u6536\u673a\u5236\u7684\u63a5\u53e3\u6a21\u5757\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5module\u542f\u505c\u5783\u573e\u56de\u6536\u3001\u8c03\u6574\u56de\u6536\u89e6\u53d1\u7684\u9608\u503c\u3001\u8bbe\u7f6e\u8c03\u8bd5\u9009\u9879\u5982\u679c\u6ca1\u6709\u7981\u7528\u5783\u573e\u56de\u6536\uff0c\u90a3\u4e48Python\u4e2d\u7684\u5185\u5b58\u6cc4\u9732\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\u8981\u4e48\u662f\u5bf9\u8c61\u88ab\u751f\u547d\u5468\u671f\u66f4\u957f\u7684\u5bf9\u8c61\u6240\u5f15\u7528\uff0c\u6bd4\u5982global\u4f5c\u7528\u57df\u5bf9\u8c61\uff1b\u8981\u4e48\u662f\u5faa\u73af\u5f15\u7528\u4e2d\u5b58\u5728__del__\u4f7f\u7528gcmodule\u3001objgraph\u53ef\u4ee5\u5b9a\u4f4d\u5185\u5b58\u6cc4\u9732\uff0c\u5b9a\u4f4d\u4e4b\u540e\uff0c\u89e3\u51b3\u5f88\u7b80\u5355\u5783\u573e\u56de\u6536\u6bd4\u8f83\u8017\u65f6\uff0c\u56e0\u6b64\u5728\u5bf9\u6027\u80fd\u548c\u5185\u5b58\u6bd4\u8f83\u654f\u611f\u7684\u573a\u666f\u4e5f\u662f\u65e0\u6cd5\u63a5\u53d7\u7684\uff0c\u5982\u679c\u80fd\u89e3\u9664\u5faa\u73af\u5f15\u7528\uff0c\u5c31\u53ef\u4ee5\u7981\u7528\u5783\u573e\u56de\u6536\u3002\u4f7f\u7528gcmodule\u7684DEBUG\u9009\u9879\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9a\u4f4d\u5faa\u73af\u5f15\u7528\uff0c\u89e3\u9664\u5faa\u73af\u5f15\u7528\u7684\u529e\u6cd5\u8981\u4e48\u662f\u624b\u52a8\u89e3\u9664\uff0c\u8981\u4e48\u662f\u4f7f\u7528weakrefpython\u5185\u5b58\u7ba1\u7406Python\u4e2d\uff0c\u4e00\u5207\u90fd\u662f\u5bf9\u8c61\uff0c\u53c8\u5206\u4e3amutable\u548cimmutable\u5bf9\u8c61\u3002\u4e8c\u8005\u533a\u5206\u7684\u6807\u51c6\u5728\u4e8e\u662f\u5426\u53ef\u4ee5\u539f\u5730\u4fee\u6539\uff0c\u201c\u539f\u5730\u201c\u201d\u53ef\u4ee5\u7406\u89e3\u4e3a\u76f8\u540c\u7684\u5730\u5740\u3002\u53ef\u4ee5\u901a\u8fc7id()\u67e5\u770b\u4e00\u4e2a\u5bf9\u8c61\u7684\u201c\u5730\u5740\u201d\uff0c\u5982\u679c\u901a\u8fc7\u53d8\u91cf\u4fee\u6539\u5bf9\u8c61\u7684\u503c\uff0c\u4f46id\u6ca1\u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u5c31\u662fmutable\uff0c\u5426\u5219\u5c31\u662fimmutable\u3002\u6bd4\u5982\uff1aPython>>>a=5;id(a)35170056>>>a=6;id(a)35170044>>>lst=[1,2,3];id(lst)39117168>>>lst.append(4);id(lst)39117168123456789>>>a=5;id(a)\u00a035170056>>>a=6;id(a)35170044>>>lst=[1,2,3];id(lst)39117168>>>lst.append(4);id(lst)39117168a\u6307\u5411\u7684\u5bf9\u8c61\uff08int\u7c7b\u578b\uff09\u5c31\u662fimmutable\uff0c\u8d4b\u503c\u8bed\u53e5\u53ea\u662f\u8ba9\u53d8\u91cfa\u6307\u5411\u4e86\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u56e0\u4e3aid\u53d1\u751f\u4e86\u53d8\u5316\u3002\u800clst\u6307\u5411\u7684\u5bf9\u8c61\uff08list\u7c7b\u578b\uff09\u4e3a\u53ef\u53d8\u5bf9\u8c61\uff0c\u901a\u8fc7\u65b9\u6cd5\uff08append\uff09\u53ef\u4ee5\u4fee\u6539\u5bf9\u8c61\u7684\u503c\uff0c\u540c\u65f6\u4fdd\u8bc1id\u4e00\u81f4\u3002\u5224\u65ad\u4e24\u4e2a\u53d8\u91cf\u662f\u5426\u76f8\u7b49\uff08\u503c\u76f8\u540c\uff09\u4f7f\u7528==\uff0c\u800c\u5224\u65ad\u4e24\u4e2a\u53d8\u91cf\u662f\u5426\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\u4f7f\u7528is\u3002\u6bd4\u5982\u4e0b\u9762a1a2\u8fd9\u4e24\u4e2a\u53d8\u91cf\u6307\u5411\u7684\u90fd\u662f\u7a7a\u7684\u5217\u8868\uff0c\u503c\u76f8\u540c\uff0c\u4f46\u662f\u4e0d\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002Python>>>a1,a2=[],[]>>>a1==a2True>>>a1isa2False12345>>>a1,a2=[],[]>>>a1==a2True>>>a1isa2False\u4e3a\u4e86\u907f\u514d\u9891\u7e41\u7684\u7533\u8bf7\u3001\u91ca\u653e\u5185\u5b58\uff0c\u907f\u514d\u5927\u91cf\u4f7f\u7528\u7684\u5c0f\u5bf9\u8c61\u7684\u6784\u9020\u6790\u6784\uff0cpython\u6709\u4e00\u5957\u81ea\u5df1\u7684\u5185\u5b58\u7ba1\u7406\u673a\u5236\u3002\u5728\u5de8\u8457\u300aPython\u6e90\u7801\u5256\u6790\u300b\u4e2d\u6709\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u5728python\u6e90\u7801obmalloc.h\u4e2d\u4e5f\u6709\u8be6\u7ec6\u7684\u63cf\u8ff0\u3002\u5982\u4e0b\u6240\u793a\uff1a\u53ef\u4ee5\u770b\u5230\uff0cpython\u4f1a\u6709\u81ea\u5df1\u7684\u5185\u5b58\u7f13\u51b2\u6c60\uff08layer2\uff09\u4ee5\u53ca\u5bf9\u8c61\u7f13\u51b2\u6c60\uff08layer3\uff09\u3002\u5728Linux\u4e0a\u8fd0\u884c\u8fc7Python\u670d\u52a1\u5668\u7684\u7a0b\u5e8f\u90fd\u77e5\u9053\uff0cpython\u4e0d\u4f1a\u7acb\u5373\u5c06\u91ca\u653e\u7684\u5185\u5b58\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff0c\u8fd9\u5c31\u662f\u5185\u5b58\u7f13\u51b2\u6c60\u7684\u539f\u56e0\u3002\u800c\u5bf9\u4e8e\u53ef\u80fd\u88ab\u7ecf\u5e38\u4f7f\u7528\u3001\u800c\u4e14\u662fimmutable\u7684\u5bf9\u8c61\uff0c\u6bd4\u5982\u8f83\u5c0f\u7684\u6574\u6570\u3001\u957f\u5ea6\u8f83\u77ed\u7684\u5b57\u7b26\u4e32\uff0cpython\u4f1a\u7f13\u5b58\u5728layer3\uff0c\u907f\u514d\u9891\u7e41\u521b\u5efa\u548c\u9500\u6bc1\u3002\u4f8b\u5982\uff1aPython>>>a,b=1,1>>>aisbTrue>>>a,b=(),()>>>aisbTrue>>>a,b={},{}>>>aisbFalse123456789>>>a,b=1,1>>>aisbTrue>>>a,b=(),()>>>aisbTrue>>>a,b={},{}>>>aisbFalse\u672c\u6587\u5e76\u4e0d\u5173\u5fc3python\u662f\u5982\u4f55\u7ba1\u7406\u5185\u5b58\u5757\u3001\u5982\u4f55\u7ba1\u7406\u5c0f\u5bf9\u8c61\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\u4f2f\u4e50\u5728\u7ebf\u548ccsdn\u4e0a\u7684\u8fd9\u4e24\u7bc7\u6587\u7ae0\u3002\u672c\u6587\u5173\u5fc3\u7684\u662f\uff0c\u4e00\u4e2a\u666e\u901a\u7684\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\uff0c\u66f4\u660e\u786e\u7684\u8bf4\uff0c\u5bf9\u8c61\u662f\u4ec0\u4e48\u65f6\u5019\u88ab\u91ca\u653e\u7684\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7406\u8bba\u4e0a\uff08\u6216\u8005\u903b\u8f91\u4e0a\uff09\u4e0d\u518d\u88ab\u4f7f\u7528\u4e86\uff0c\u4f46\u4e8b\u5b9e\u4e0a\u6ca1\u6709\u88ab\u91ca\u653e\uff0c\u90a3\u4e48\u5c31\u5b58\u5728\u5185\u5b58\u6cc4\u9732\uff1b\u5f53\u4e00\u4e2a\u5bf9\u8c61\u4e8b\u5b9e\u4e0a\u5df2\u7ecf\u4e0d\u53ef\u8fbe\uff08unreachable\uff09\uff0c\u5373\u4e0d\u80fd\u901a\u8fc7\u4efb\u4f55\u53d8\u91cf\u627e\u5230\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u4f46\u8fd9\u4e2a\u5bf9\u8c61\u6ca1\u6709\u7acb\u5373\u88ab\u91ca\u653e\uff0c\u90a3\u4e48\u5219\u53ef\u80fd\u5b58\u5728\u5faa\u73af\u5f15\u7528\u3002\u5f15\u7528\u8ba1\u6570\u5f15\u7528\u8ba1\u6570\uff08Referencescount\uff09\uff0c\u6307\u7684\u662f\u6bcf\u4e2aPython\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u8bb0\u5f55\u7740\u5f53\u524d\u6709\u591a\u5c11\u4e2a\u53d8\u91cf\u6307\u5411\u8fd9\u4e2a\u5bf9\u8c61\u3002\u5c06\u4e00\u4e2a\u5bf9\u8c61\u76f4\u63a5\u6216\u8005\u95f4\u63a5\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5bf9\u8c61\u7684\u8ba1\u6570\u5668\u4f1a\u52a01\uff1b\u5f53\u53d8\u91cf\u88abdel\u5220\u9664\uff0c\u6216\u8005\u79bb\u5f00\u53d8\u91cf\u6240\u5728\u4f5c\u7528\u57df\u65f6\uff0c\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u5668\u4f1a\u51cf1\u3002\u5f53\u8ba1\u6570\u5668\u5f52\u96f6\u7684\u65f6\u5019\uff0c\u4ee3\u8868\u8fd9\u4e2a\u5bf9\u8c61\u518d\u4e5f\u6ca1\u6709\u5730\u65b9\u53ef\u80fd\u4f7f\u7528\u4e86\uff0c\u56e0\u6b64\u53ef\u4ee5\u5c06\u5bf9\u8c61\u5b89\u5168\u7684\u9500\u6bc1\u3002Python\u6e90\u7801\u4e2d\uff0c\u901a\u8fc7Py_INCREF\u548cPy_DECREF\u4e24\u4e2a\u5b8f\u6765\u7ba1\u7406\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\uff0c\u4ee3\u7801\u5728object.h#definePy_INCREF(op)(\\_Py_INC_REFTOTAL_Py_REF_DEBUG_COMMA\\((PyObject*)(op))->ob_refcnt++)#definePy_DECREF(op)\\do{\\if(_Py_DEC_REFTOTAL_Py_REF_DEBUG_COMMA\\--((PyObject*)(op))->ob_refcnt!=0)\\_Py_CHECK_REFCNT(op)\\else\\_Py_Dealloc((PyObject*)(op));\\}while(0)123456789101112#definePy_INCREF(op)(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0_Py_INC_REFTOTAL\u00a0\u00a0_Py_REF_DEBUG_COMMA\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0((PyObject*)(op))->ob_refcnt++)\u00a0#definePy_DECREF(op)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0do{\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(_Py_DEC_REFTOTAL\u00a0\u00a0_Py_REF_DEBUG_COMMA\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0--((PyObject*)(op))->ob_refcnt!=0)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0_Py_CHECK_REFCNT(op)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0_Py_Dealloc((PyObject*)(op));\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\\u00a0\u00a0\u00a0\u00a0}while(0)\u901a\u8fc7sys.getrefcount(obj)\u5bf9\u8c61\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u6570\u76ee\uff0c\u8fd4\u56de\u503c\u662f\u771f\u5b9e\u5f15\u7528\u6570\u76ee\u52a01\uff08\u52a01\u7684\u539f\u56e0\u662fobj\u88ab\u5f53\u505a\u53c2\u6570\u4f20\u5165\u4e86getrefcount\u51fd\u6570\uff09\uff0c\u4f8b\u5982\uff1aPython>>>importsys>>>s='asdf'>>>sys.getrefcount(s)2>>>a=1>>>sys.getrefcount(a)6051234567>>>importsys>>>s='asdf'>>>sys.getrefcount(s)2>>>a=1>>>sys.getrefcount(a)605\u4ece\u5bf9\u8c611\u7684\u5f15\u7528\u8ba1\u6570\u4fe1\u606f\u4e5f\u53ef\u4ee5\u770b\u5230\uff0cpython\u7684\u5bf9\u8c61\u7f13\u51b2\u6c60\u4f1a\u7f13\u5b58\u5341\u5206\u5e38\u7528\u7684immutable\u5bf9\u8c61\uff0c\u6bd4\u5982\u8fd9\u91cc\u7684\u6574\u65701\u3002\u5f15\u7528\u8ba1\u6570\u7684\u4f18\u70b9\u5728\u4e8e\u539f\u7406\u901a\u4fd7\u6613\u61c2\uff1b\u4e14\u5c06\u5bf9\u8c61\u7684\u56de\u6536\u5206\u5e03\u5728\u4ee3\u7801\u8fd0\u884c\u65f6\uff1a\u4e00\u65e6\u5bf9\u8c61\u4e0d\u518d\u88ab\u5f15\u7528\uff0c\u5c31\u4f1a\u88ab\u91ca\u653e\u6389\uff08befreed\uff09\uff0c\u4e0d\u4f1a\u9020\u6210\u5361\u987f\u3002\u4f46\u4e5f\u6709\u7f3a\u70b9\uff1a\u989d\u5916\u7684\u5b57\u6bb5\uff08ob_refcnt\uff09\uff1b\u9891\u7e41\u7684\u52a0\u51cfob_refcnt\uff0c\u800c\u4e14\u53ef\u80fd\u9020\u6210\u8fde\u9501\u53cd\u5e94\u3002\u4f46\u8fd9\u4e9b\u7f3a\u70b9\u8ddf\u5faa\u73af\u5f15\u7528\u6bd4\u8d77\u6765\u90fd\u4e0d\u7b97\u4e8b\u513f\u3002\u4ec0\u4e48\u662f\u5faa\u73af\u5f15\u7528\uff0c\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\u76f4\u63a5\u6216\u8005\u95f4\u63a5\u5f15\u7528\u81ea\u5df1\u672c\u8eab\uff0c\u5f15\u7528\u94fe\u5f62\u6210\u4e00\u4e2a\u73af\u3002\u4e14\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a#-*-coding:utf-8-*-importobjgraph,sysclassOBJ(object):passdefshow_direct_cycle_reference():a=OBJ()a.attr=aobjgraph.show_backrefs(a,max_depth=5,filename=\"direct.dot\")defshow_indirect_cycle_reference():a,b=OBJ(),OBJ()a.attr_b=bb.attr_a=aobjgraph.show_backrefs(a,max_depth=5,filename=\"indirect.dot\")if__name__=='__main__':iflen(sys.argv)>1:show_direct_cycle_reference()else:show_indirect_cycle_reference()123456789101112131415161718192021#-*-coding:utf-8-*-importobjgraph,sysclassOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0defshow_direct_cycle_reference():\u00a0\u00a0\u00a0\u00a0a=OBJ()\u00a0\u00a0\u00a0\u00a0a.attr=a\u00a0\u00a0\u00a0\u00a0objgraph.show_backrefs(a,max_depth=5,filename=\"direct.dot\")\u00a0defshow_indirect_cycle_reference():\u00a0\u00a0\u00a0\u00a0a,b=OBJ(),OBJ()\u00a0\u00a0\u00a0\u00a0a.attr_b=b\u00a0\u00a0\u00a0\u00a0b.attr_a=a\u00a0\u00a0\u00a0\u00a0objgraph.show_backrefs(a,max_depth=5,filename=\"indirect.dot\")\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0iflen(sys.argv)>1:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0show_direct_cycle_reference()\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0show_indirect_cycle_reference()\u8fd0\u884c\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u4f7f\u7528graphviz\u5de5\u5177\u96c6\uff08\u672c\u6587\u4f7f\u7528\u7684\u662fdotty\uff09\u6253\u5f00\u751f\u6210\u7684\u4e24\u4e2a\u6587\u4ef6\uff0cdirect.dot\u548cindirect.dot\uff0c\u5f97\u5230\u4e0b\u9762\u4e24\u4e2a\u56fe\u901a\u8fc7\u5c5e\u6027\u540d(attr,attr_a,attr_b\uff09\u53ef\u4ee5\u5f88\u6e05\u6670\u7684\u770b\u51fa\u5faa\u73af\u5f15\u7528\u662f\u600e\u4e48\u4ea7\u751f\u7684\u524d\u9762\u5df2\u7ecf\u63d0\u5230\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u6ca1\u6709\u4efb\u4f55\u53d8\u91cf\u6307\u5411\u81ea\u5df1\u65f6\uff0c\u5f15\u7528\u8ba1\u6570\u964d\u52300\uff0c\u5c31\u4f1a\u88ab\u91ca\u653e\u6389\u3002\u6211\u4eec\u4ee5\u4e0a\u9762\u5de6\u8fb9\u90a3\u4e2a\u56fe\u4e3a\u4f8b\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u7ea2\u6846\u91cc\u9762\u7684OBJ\u5bf9\u8c61\u60f3\u5728\u6709\u4e24\u4e2a\u5f15\u7528\uff08\u4e24\u4e2a\u5165\u5ea6\uff09\uff0c\u5206\u522b\u6765\u81ea\u5e27\u5bf9\u8c61frame\uff08\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570\u5c40\u90e8\u7a7a\u95f4\u6301\u6709\u5bf9OBJ\u5b9e\u4f8b\u7684\u5f15\u7528\uff09\u3001attr\u53d8\u91cf\u3002\u6211\u4eec\u518d\u6539\u4e00\u4e0b\u4ee3\u7801\uff0c\u5728\u51fd\u6570\u8fd0\u884c\u6280\u672f\u4e4b\u540e\u770b\u770b\u662f\u5426\u8fd8\u6709OBJ\u7c7b\u7684\u5b9e\u4f8b\u5b58\u5728\uff0c\u5f15\u7528\u5173\u7cfb\u662f\u600e\u4e48\u6837\u7684\uff1a#-*-coding:utf-8-*-importobjgraph,sysclassOBJ(object):passdefdirect_cycle_reference():a=OBJ()a.attr=aif__name__=='__main__':direct_cycle_reference()objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=5,filename=\"direct.dot\"123456789101112#-*-coding:utf-8-*-importobjgraph,sysclassOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0defdirect_cycle_reference():\u00a0\u00a0\u00a0\u00a0a=OBJ()\u00a0\u00a0\u00a0\u00a0a.attr=a\u00a0\u00a0\u00a0\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0direct_cycle_reference()\u00a0\u00a0\u00a0\u00a0objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=5,filename=\"direct.dot\"\u4fee\u6539\u540e\u7684\u4ee3\u7801\uff0cOBJ\u5b9e\u4f8b(a)\u5b58\u5728\u4e8e\u51fd\u6570\u7684local\u4f5c\u7528\u57df\u3002\u56e0\u6b64\uff0c\u5f53\u51fd\u6570\u8c03\u7528\u7ed3\u675f\u4e4b\u540e\uff0c\u6765\u81ea\u5e27\u5bf9\u8c61frame\u7684\u5f15\u7528\u88ab\u89e3\u9664\u3002\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u524d\u5bf9\u8c61\u7684\u8ba1\u6570\u5668\uff08\u5165\u5ea6\uff09\u4e3a1\uff0c\u6309\u7167\u5f15\u7528\u8ba1\u6570\u7684\u539f\u7406\uff0c\u662f\u4e0d\u5e94\u8be5\u88ab\u91ca\u653e\u7684\uff0c\u4f46\u8fd9\u4e2a\u5bf9\u8c61\u5728\u51fd\u6570\u8c03\u7528\u7ed3\u675f\u4e4b\u540e\u5c31\u662f\u4e8b\u5b9e\u4e0a\u7684\u5783\u573e\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u53e6\u5916\u7684\u673a\u5236\u6765\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u4e86\u3002python\u7684\u4e16\u754c\uff0c\u5f88\u5bb9\u6613\u5c31\u4f1a\u51fa\u73b0\u5faa\u73af\u5f15\u7528\uff0c\u6bd4\u5982\u6807\u51c6\u5e93Collections\u4e2dOrderedDict\u7684\u5b9e\u73b0\uff08\u5df2\u53bb\u6389\u65e0\u5173\u6ce8\u91ca\uff09\uff1aclassOrderedDict(dict):def__init__(self,*args,**kwds):iflen(args)>1:raiseTypeError('expectedatmost1arguments,got%d'%len(args))try:self.__rootexceptAttributeError:self.__root=root=[]#sentinelnoderoot[:]=[root,root,None]self.__map={}self.__update(*args,**kwds)1234567891011classOrderedDict(dict):\u00a0\u00a0\u00a0\u00a0def__init__(self,*args,**kwds):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iflen(args)>1:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseTypeError('expectedatmost1arguments,got%d'%len(args))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__root\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptAttributeError:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__root=root=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#sentinelnode\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0root[:]=[root,root,None]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__map={}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__update(*args,**kwds)\u6ce8\u610f\u7b2c8\u30019\u884c\uff0croot\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u91cc\u9762\u7684\u5143\u7d20\u4e4b\u81ea\u5df1\u672c\u8eab\uff01\u5783\u573e\u56de\u6536\u8fd9\u91cc\u5f3a\u8c03\u4e00\u4e0b\uff0c\u672c\u6587\u4e2d\u7684\u7684\u5783\u573e\u56de\u6536\u662f\u72ed\u4e49\u7684\u5783\u573e\u56de\u6536\uff0c\u662f\u6307\u5f53\u51fa\u73b0\u5faa\u73af\u5f15\u7528\uff0c\u5f15\u7528\u8ba1\u6570\u65e0\u8ba1\u53ef\u65bd\u7684\u65f6\u5019\u91c7\u53d6\u7684\u5783\u573e\u6e05\u7406\u7b97\u6cd5\u3002\u5728python\u4e2d\uff0c\u4f7f\u7528\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff08mark-sweep\uff09\u548c\u5206\u4ee3\uff08generational\uff09\u7b97\u6cd5\u6765\u5783\u573e\u56de\u6536\u3002\u5728\u300aGarbageCollectionforPython\u300b\u4e00\u6587\u4e2d\u6709\u5bf9\u6807\u8bb0\u56de\u6536\u7b97\u6cd5\uff0c\u7136\u540e\u5728\u300aPython\u5185\u5b58\u7ba1\u7406\u673a\u5236\u53ca\u4f18\u5316\u7b80\u6790\u300b\u4e00\u6587\u4e2d\uff0c\u6709\u5bf9\u524d\u6587\u7684\u7ffb\u8bd1\uff0c\u5e76\u4e14\u6709\u5206\u4ee3\u56de\u6536\u7684\u4ecb\u7ecd\u3002\u5728\u8fd9\u91cc\uff0c\u5f15\u7528\u540e\u9762\u4e00\u7bc7\u6587\u7ae0\uff1a\u5728Python\u4e2d,\u6240\u6709\u80fd\u591f\u5f15\u7528\u5176\u4ed6\u5bf9\u8c61\u7684\u5bf9\u8c61\u90fd\u88ab\u79f0\u4e3a\u5bb9\u5668(container).\u56e0\u6b64\u53ea\u6709\u5bb9\u5668\u4e4b\u95f4\u624d\u53ef\u80fd\u5f62\u6210\u5faa\u73af\u5f15\u7528.Python\u7684\u5783\u573e\u56de\u6536\u673a\u5236\u5229\u7528\u4e86\u8fd9\u4e2a\u7279\u70b9\u6765\u5bfb\u627e\u9700\u8981\u88ab\u91ca\u653e\u7684\u5bf9\u8c61.\u4e3a\u4e86\u8bb0\u5f55\u4e0b\u6240\u6709\u7684\u5bb9\u5668\u5bf9\u8c61,Python\u5c06\u6bcf\u4e00\u4e2a\u5bb9\u5668\u90fd\u94fe\u5230\u4e86\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u4e2d,\u4e4b\u6240\u4ee5\u4f7f\u7528\u53cc\u5411\u94fe\u8868\u662f\u4e3a\u4e86\u65b9\u4fbf\u5feb\u901f\u7684\u5728\u5bb9\u5668\u96c6\u5408\u4e2d\u63d2\u5165\u548c\u5220\u9664\u5bf9\u8c61.\u6709\u4e86\u8fd9\u4e2a\u7ef4\u62a4\u4e86\u6240\u6709\u5bb9\u5668\u5bf9\u8c61\u7684\u53cc\u5411\u94fe\u8868\u4ee5\u540e,Python\u5728\u5783\u573e\u56de\u6536\u65f6\u4f7f\u7528\u5982\u4e0b\u6b65\u9aa4\u6765\u5bfb\u627e\u9700\u8981\u91ca\u653e\u7684\u5bf9\u8c61:\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5bb9\u5668\u5bf9\u8c61,\u8bbe\u7f6e\u4e00\u4e2agc_refs\u503c,\u5e76\u5c06\u5176\u521d\u59cb\u5316\u4e3a\u8be5\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u503c.\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5bb9\u5668\u5bf9\u8c61,\u627e\u5230\u6240\u6709\u5176\u5f15\u7528\u7684\u5bf9\u8c61,\u5c06\u88ab\u5f15\u7528\u5bf9\u8c61\u7684gc_refs\u503c\u51cf1.\u6267\u884c\u5b8c\u6b65\u9aa42\u4ee5\u540e\u6240\u6709gc_refs\u503c\u8fd8\u5927\u4e8e0\u7684\u5bf9\u8c61\u90fd\u88ab\u975e\u5bb9\u5668\u5bf9\u8c61\u5f15\u7528\u7740,\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u975e\u5faa\u73af\u5f15\u7528.\u56e0\u6b64\u4e0d\u80fd\u91ca\u653e\u8fd9\u4e9b\u5bf9\u8c61,\u5c06\u4ed6\u4eec\u653e\u5165\u53e6\u4e00\u4e2a\u96c6\u5408.\u5728\u6b65\u9aa43\u4e2d\u4e0d\u80fd\u88ab\u91ca\u653e\u7684\u5bf9\u8c61,\u5982\u679c\u4ed6\u4eec\u5f15\u7528\u7740\u67d0\u4e2a\u5bf9\u8c61,\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u4e5f\u662f\u4e0d\u80fd\u88ab\u91ca\u653e\u7684,\u56e0\u6b64\u5c06\u8fd9\u4e9b\u5bf9\u8c61\u4e5f\u653e\u5165\u53e6\u4e00\u4e2a\u96c6\u5408\u4e2d.\u6b64\u65f6\u8fd8\u5269\u4e0b\u7684\u5bf9\u8c61\u90fd\u662f\u65e0\u6cd5\u5230\u8fbe\u7684\u5bf9\u8c61.\u73b0\u5728\u53ef\u4ee5\u91ca\u653e\u8fd9\u4e9b\u5bf9\u8c61\u4e86.\u5173\u4e8e\u5206\u4ee3\u56de\u6536\uff1a\u9664\u6b64\u4e4b\u5916,Python\u8fd8\u5c06\u6240\u6709\u5bf9\u8c61\u6839\u636e\u2019\u751f\u5b58\u65f6\u95f4\u2019\u5206\u4e3a3\u4ee3,\u4ece0\u52302.\u6240\u6709\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u90fd\u5206\u914d\u4e3a\u7b2c0\u4ee3.\u5f53\u8fd9\u4e9b\u5bf9\u8c61\u7ecf\u8fc7\u4e00\u6b21\u5783\u573e\u56de\u6536\u4ecd\u7136\u5b58\u5728\u5219\u4f1a\u88ab\u653e\u5165\u7b2c1\u4ee3\u4e2d.\u5982\u679c\u7b2c1\u4ee3\u4e2d\u7684\u5bf9\u8c61\u5728\u4e00\u6b21\u5783\u573e\u56de\u6536\u4e4b\u540e\u4ecd\u7136\u5b58\u8d27\u5219\u88ab\u653e\u5165\u7b2c2\u4ee3.\u5bf9\u4e8e\u4e0d\u540c\u4ee3\u7684\u5bf9\u8c61Python\u7684\u56de\u6536\u7684\u9891\u7387\u4e5f\u4e0d\u4e00\u6837.\u53ef\u4ee5\u901a\u8fc7gc.set_threshold(threshold0[,threshold1[,threshold2]])\u00a0\u6765\u5b9a\u4e49.\u5f53Python\u7684\u5783\u573e\u56de\u6536\u5668\u4e2d\u65b0\u589e\u7684\u5bf9\u8c61\u6570\u91cf\u51cf\u53bb\u5220\u9664\u7684\u5bf9\u8c61\u6570\u91cf\u5927\u4e8ethreshold0\u65f6,Python\u4f1a\u5bf9\u7b2c0\u4ee3\u5bf9\u8c61\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536.\u6bcf\u5f53\u7b2c0\u4ee3\u88ab\u68c0\u67e5\u7684\u6b21\u6570\u8d85\u8fc7\u4e86threshold1\u65f6,\u7b2c1\u4ee3\u5bf9\u8c61\u5c31\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536.\u540c\u7406\u6bcf\u5f53\u7b2c1\u4ee3\u88ab\u68c0\u67e5\u7684\u6b21\u6570\u8d85\u8fc7\u4e86threshold2\u65f6,\u7b2c2\u4ee3\u5bf9\u8c61\u4e5f\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536.\u6ce8\u610f\uff0cthreshold0\uff0cthreshold1\uff0cthreshold2\u7684\u610f\u4e49\u5e76\u4e0d\u76f8\u540c\uff01\u4e3a\u4ec0\u4e48\u8981\u5206\u4ee3\u5462\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u7684\u6839\u6e90\u6765\u81ea\u4e8eweak\u00a0generational\u00a0hypothesis\u3002\u8fd9\u4e2a\u5047\u8bf4\u7531\u4e24\u4e2a\u89c2\u70b9\u6784\u6210\uff1a\u9996\u5148\u662f\u5e74\u4eb2\u7684\u5bf9\u8c61\u901a\u5e38\u6b7b\u5f97\u4e5f\u5feb\uff0c\u6bd4\u5982\u5927\u91cf\u7684\u5bf9\u8c61\u90fd\u5b58\u5728\u4e8elocal\u4f5c\u7528\u57df\uff1b\u800c\u8001\u5bf9\u8c61\u5219\u5f88\u6709\u53ef\u80fd\u5b58\u6d3b\u66f4\u957f\u7684\u65f6\u95f4\uff0c\u6bd4\u5982\u5168\u5c40\u5bf9\u8c61\uff0cmodule\uff0cclass\u3002\u5783\u573e\u56de\u6536\u7684\u539f\u7406\u5c31\u5982\u4e0a\u9762\u63d0\u793a\uff0c\u8be6\u7ec6\u7684\u53ef\u4ee5\u770bPython\u6e90\u7801\uff0c\u53ea\u4e0d\u8fc7\u4e8b\u5b9e\u4e0a\u5783\u573e\u56de\u6536\u5668\u8fd8\u8981\u8003\u8651__del__\uff0c\u5f31\u5f15\u7528\u7b49\u60c5\u51b5\uff0c\u4f1a\u7565\u5fae\u590d\u6742\u4e00\u4e9b\u3002\u4ec0\u4e48\u65f6\u5019\u4f1a\u89e6\u53d1\u5783\u573e\u56de\u6536\u5462\uff0c\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\u8fbe\u5230\u4e86\u5783\u573e\u56de\u6536\u7684\u9608\u503c\uff0cPython\u865a\u62df\u673a\u81ea\u52a8\u6267\u884c\u624b\u52a8\u8c03\u7528gc.collect()Python\u865a\u62df\u673a\u9000\u51fa\u7684\u65f6\u5019\u5bf9\u4e8e\u5783\u573e\u56de\u6536\uff0c\u6709\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u672f\u8bed\uff0c\u90a3\u5c31\u662freachable\u4e0ecollectable\uff08\u5f53\u7136\u8fd8\u6709\u4e0e\u4e4b\u5bf9\u5e94\u7684unreachable\u4e0euncollectable\uff09\uff0c\u540e\u6587\u4e5f\u4f1a\u5927\u91cf\u63d0\u53ca\u3002reachable\u662f\u9488\u5bf9python\u5bf9\u8c61\u800c\u8a00\uff0c\u5982\u679c\u4ece\u6839\u96c6\uff08root\uff09\u80fd\u5230\u627e\u5230\u5bf9\u8c61\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u5c31\u662freachable\uff0c\u4e0e\u4e4b\u76f8\u53cd\u5c31\u662funreachable\uff0c\u4e8b\u5b9e\u4e0a\u5c31\u662f\u53ea\u5b58\u5728\u4e8e\u5faa\u73af\u5f15\u7528\u4e2d\u7684\u5bf9\u8c61\uff0cPython\u7684\u5783\u573e\u56de\u6536\u5c31\u662f\u9488\u5bf9unreachable\u5bf9\u8c61\u3002\u800ccollectable\u662f\u9488\u5bf9unreachable\u5bf9\u8c61\u800c\u8a00\uff0c\u5982\u679c\u8fd9\u79cd\u5bf9\u8c61\u80fd\u88ab\u56de\u6536\uff0c\u90a3\u4e48\u662fcollectable\uff1b\u5982\u679c\u4e0d\u80fd\u88ab\u56de\u6536\uff0c\u5373\u5faa\u73af\u5f15\u7528\u4e2d\u7684\u5bf9\u8c61\u5b9a\u4e49\u4e86__del__\uff0c\u90a3\u4e48\u5c31\u662funcollectable\u3002Python\u5783\u573e\u56de\u6536\u5bf9uncollectable\u5bf9\u8c61\u65e0\u80fd\u4e3a\u529b\uff0c\u4f1a\u9020\u6210\u4e8b\u5b9e\u4e0a\u7684\u5185\u5b58\u6cc4\u9732\u3002gcmodule\u8fd9\u91cc\u7684gc\uff08garbagecollector\uff09\u662fPython\u6807\u51c6\u5e93\uff0c\u8be5module\u63d0\u4f9b\u4e86\u4e0e\u4e0a\u4e00\u8282\u201c\u5783\u573e\u56de\u6536\u201d\u5185\u5bb9\u76f8\u5bf9\u5e94\u7684\u63a5\u53e3\u3002\u901a\u8fc7\u8fd9\u4e2amodule\uff0c\u53ef\u4ee5\u5f00\u5173gc\u3001\u8c03\u6574\u5783\u573e\u56de\u6536\u7684\u9891\u7387\u3001\u8f93\u51fa\u8c03\u8bd5\u4fe1\u606f\u3002gc\u6a21\u5757\u662f\u5f88\u591a\u5176\u4ed6\u6a21\u5757\uff08\u6bd4\u5982objgraph\uff09\u5c01\u88c5\u7684\u57fa\u7840\uff0c\u5728\u8fd9\u91cc\u5148\u4ecb\u7ecdgc\u7684\u6838\u5fc3API\u3002gc.enable();gc.disable();gc.isenabled()\u5f00\u542fgc\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u5f00\u542f\u7684\uff09\uff1b\u5173\u95edgc\uff1b\u5224\u65adgc\u662f\u5426\u5f00\u542fgc.collection()\u3000\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536\uff0c\u4e0d\u7ba1gc\u662f\u5426\u5904\u4e8e\u5f00\u542f\u72b6\u6001\u90fd\u80fd\u4f7f\u7528gc.set_threshold(t0,t1,t2);gc.get_threshold()\u8bbe\u7f6e\u5783\u573e\u56de\u6536\u9608\u503c\uff1b\u83b7\u5f97\u5f53\u524d\u7684\u5783\u573e\u56de\u6536\u9608\u503c\u6ce8\u610f\uff1agc.set_threshold(0)\u4e5f\u6709\u7981\u7528gc\u7684\u6548\u679cgc.get_objects()\u8fd4\u56de\u6240\u6709\u88ab\u5783\u573e\u56de\u6536\u5668\uff08collector\uff09\u7ba1\u7406\u7684\u5bf9\u8c61\u3002\u8fd9\u4e2a\u51fd\u6570\u975e\u5e38\u57fa\u7840\uff01\u53ea\u8981python\u89e3\u91ca\u5668\u8fd0\u884c\u8d77\u6765\uff0c\u5c31\u6709\u5927\u91cf\u7684\u5bf9\u8c61\u88abcollector\u7ba1\u7406\uff0c\u56e0\u6b64\uff0c\u8be5\u51fd\u6570\u7684\u8c03\u7528\u6bd4\u8f83\u8017\u65f6\uff01\u6bd4\u5982\uff0c\u547d\u4ee4\u884c\u542f\u52a8pythonPython>>>importgc>>>len(gc.get_objects())3749123>>>importgc>>>len(gc.get_objects())3749gc.get_referents(*obj)\u8fd4\u56deobj\u5bf9\u8c61\u76f4\u63a5\u6307\u5411\u7684\u5bf9\u8c61gc.get_referrers(*obj)\u8fd4\u56de\u6240\u6709\u76f4\u63a5\u6307\u5411obj\u7684\u5bf9\u8c61\u4e0b\u9762\u7684\u5b9e\u4f8b\u5c55\u793a\u4e86get_referents\u4e0eget_referrers\u4e24\u4e2a\u51fd\u6570Python>>>classOBJ(object):...pass...>>>a,b=OBJ(),OBJ()>>>hex(id(a)),hex(id(b))('0x250e730','0x250e7f0')>>>gc.get_referents(a)[<class'__main__.OBJ'>]>>>a.attr=b>>>gc.get_referents(a)[{'attr':<__main__.OBJobjectat0x0250E7F0>},<class'__main__.OBJ'>]>>>gc.get_referrers(b)[{'attr':<__main__.OBJobjectat0x0250E7F0>},{'a':<__main__.OBJobjectat0x0250E730>,'b':<__main__.OBJobjectat0x0250E7F0>,'OBJ':<class'__main__.OBJ'>,'__builtins__':<module'__builtin__'(built-in)>,'__package__':None,'gc':<module'gc'(built-in)>,'__name__':'__main__','__doc__':None}]>>>123456789101112131415161718>>>classOBJ(object):\u00a0...pass...>>>a,b=OBJ(),OBJ()>>>hex(id(a)),hex(id(b))('0x250e730','0x250e7f0')\u00a0\u00a0>>>gc.get_referents(a)[<class'__main__.OBJ'>]>>>a.attr=b>>>gc.get_referents(a)[{'attr':<__main__.OBJobjectat0x0250E7F0>},<class'__main__.OBJ'>]>>>gc.get_referrers(b)[{'attr':<__main__.OBJobjectat0x0250E7F0>},{'a':<__main__.OBJobjectat0x0250E730>,'b':<__main__.OBJobjectat0x0250E7F0>,'OBJ':<class'__main__.OBJ'>,'__builtins__':<module'__builtin__'(built-in)>,'__package__':None,'gc':<module'gc'(built-in)>,'__name__':'__main__','__doc__':None}]>>>a,b\u90fd\u662f\u7c7bOBJ\u7684\u5b9e\u4f8b\uff0c\u6267\u884c\u201da.attr=b\u201d\u4e4b\u540e\uff0ca\u5c31\u901a\u8fc7\u2018\u2019attr\u201c\u8fd9\u4e2a\u5c5e\u6027\u6307\u5411\u4e86b\u3002gc.set_debug(flags)\u8bbe\u7f6e\u8c03\u8bd5\u9009\u9879\uff0c\u975e\u5e38\u6709\u7528\uff0c\u5e38\u7528\u7684flag\u7ec4\u5408\u5305\u542b\u4ee5\u4e0bgc.DEBUG_COLLETABLE\uff1a\u6253\u5370\u53ef\u4ee5\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\u7684\u5bf9\u8c61gc.DEBUG_UNCOLLETABLE\uff1a\u6253\u5370\u65e0\u6cd5\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\u7684\u5bf9\u8c61\uff0c\u5373\u5b9a\u4e49\u4e86__del__\u7684\u5bf9\u8c61gc.DEBUG_SAVEALL\uff1a\u5f53\u8bbe\u7f6e\u4e86\u8fd9\u4e2a\u9009\u9879\uff0c\u53ef\u4ee5\u88ab\u62c9\u8d77\u56de\u6536\u7684\u5bf9\u8c61\u4e0d\u4f1a\u88ab\u771f\u6b63\u9500\u6bc1\uff08free\uff09\uff0c\u800c\u662f\u653e\u5230gc.garbage\u8fd9\u4e2a\u5217\u8868\u91cc\u9762\uff0c\u5229\u4e8e\u5728\u7ebf\u4e0a\u67e5\u627e\u95ee\u9898\u5185\u5b58\u6cc4\u9732\u65e2\u7136Python\u4e2d\u901a\u8fc7\u5f15\u7528\u8ba1\u6570\u548c\u5783\u573e\u56de\u6536\u6765\u7ba1\u7406\u5185\u5b58\uff0c\u90a3\u4e48\u4ec0\u4e48\u60c5\u51b5\u4e0b\u8fd8\u4f1a\u4ea7\u751f\u5185\u5b58\u6cc4\u9732\u5462\uff1f\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\u7b2c\u4e00\u662f\u5bf9\u8c61\u88ab\u53e6\u4e00\u4e2a\u751f\u547d\u5468\u671f\u7279\u522b\u957f\u7684\u5bf9\u8c61\u6240\u5f15\u7528\uff0c\u6bd4\u5982\u7f51\u7edc\u670d\u52a1\u5668\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u4e2a\u5168\u5c40\u7684\u5355\u4f8bConnectionManager\uff0c\u7ba1\u7406\u6240\u6709\u7684\u8fde\u63a5Connection\uff0c\u5982\u679c\u5f53Connection\u7406\u8bba\u4e0a\u4e0d\u518d\u88ab\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4eceConnectionManager\u4e2d\u5220\u9664\uff0c\u90a3\u4e48\u5c31\u9020\u6210\u4e86\u5185\u5b58\u6cc4\u9732\u3002\u7b2c\u4e8c\u662f\u5faa\u73af\u5f15\u7528\u4e2d\u7684\u5bf9\u8c61\u5b9a\u4e49\u4e86__del__\u51fd\u6570\uff0c\u8fd9\u4e2a\u5728\u300a\u7a0b\u5e8f\u5458\u5fc5\u77e5\u7684Python\u9677\u9631\u4e0e\u7f3a\u9677\u5217\u8868\u300b\u4e00\u6587\u4e2d\u6709\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u7b80\u800c\u8a00\u4e4b\uff0c\u5982\u679c\u5b9a\u4e49\u4e86__del__\u51fd\u6570\uff0c\u90a3\u4e48\u5728\u5faa\u73af\u5f15\u7528\u4e2dPython\u89e3\u91ca\u5668\u65e0\u6cd5\u5224\u65ad\u6790\u6784\u5bf9\u8c61\u7684\u987a\u5e8f\uff0c\u56e0\u6b64\u5c31\u4e0d\u9519\u5904\u7406\u3002\u5728\u4efb\u4f55\u73af\u5883\uff0c\u4e0d\u7ba1\u662f\u670d\u52a1\u5668\uff0c\u5ba2\u6237\u7aef\uff0c\u5185\u5b58\u6cc4\u9732\u90fd\u662f\u975e\u5e38\u4e25\u91cd\u7684\u4e8b\u60c5\u3002\u5982\u679c\u662f\u7ebf\u4e0a\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u4e00\u5b9a\u5f97\u6709\u76d1\u63a7\uff0c\u5982\u679c\u53d1\u73b0\u5185\u5b58\u4f7f\u7528\u7387\u8d85\u8fc7\u8bbe\u7f6e\u7684\u9608\u503c\u5219\u7acb\u5373\u62a5\u8b66\uff0c\u5c3d\u65e9\u53d1\u73b0\u4e9b\u8bb8\u8fd8\u6709\u6551\u3002\u5f53\u7136\uff0c\u8c01\u4e5f\u4e0d\u5e0c\u671b\u5728\u7ebf\u4e0a\u4fee\u590d\u5185\u5b58\u6cc4\u9732\uff0c\u8fd9\u65e0\u7591\u662f\u7ed9\u884c\u9a76\u7684\u6c7d\u8f66\u6362\u8f6e\u5b50\uff0c\u56e0\u6b64\u5c3d\u91cf\u5728\u5f00\u53d1\u73af\u5883\u6216\u8005\u538b\u529b\u6d4b\u8bd5\u73af\u5883\u53d1\u73b0\u5e76\u89e3\u51b3\u6f5c\u5728\u7684\u5185\u5b58\u6cc4\u9732\u3002\u5728\u8fd9\u91cc\uff0c\u53d1\u73b0\u95ee\u9898\u6700\u4e3a\u5173\u952e\uff0c\u53ea\u8981\u53d1\u73b0\u4e86\u95ee\u9898\uff0c\u89e3\u51b3\u95ee\u9898\u5c31\u975e\u5e38\u5bb9\u6613\u4e86\uff0c\u56e0\u4e3a\u6309\u7167\u524d\u9762\u7684\u8bf4\u6cd5\uff0c\u51fa\u73b0\u5185\u5b58\u6cc4\u9732\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u5728\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u8981\u5728\u9002\u5f53\u7684\u65f6\u673a\u89e3\u9664\u5f15\u7528\u5c31\u53ef\u4ee5\u4e86\uff1b\u5728\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0b\uff0c\u8981\u4e48\u4e0d\u518d\u4f7f\u7528__del__\u51fd\u6570\uff0c\u6362\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff0c\u8981\u4e48\u89e3\u51b3\u5faa\u73af\u5f15\u7528\u3002\u90a3\u4e48\u600e\u4e48\u67e5\u627e\u54ea\u91cc\u5b58\u5728\u5185\u5b58\u6cc4\u9732\u5462\uff1f\u6b66\u5668\u5c31\u662f\u4e24\u4e2a\u5e93\uff1agc\u3001objgraph\u5728\u4e0a\u9762\u5df2\u7ecf\u4ecb\u7ecd\u4e86gc\u8fd9\u4e2a\u6a21\u5757\uff0c\u7406\u8bba\u4e0a\uff0c\u901a\u8fc7gc\u6a21\u5757\u80fd\u591f\u62ff\u5230\u6240\u6709\u7684\u88abgarbagecollector\u7ba1\u7406\u7684\u5bf9\u8c61\uff0c\u4e5f\u80fd\u77e5\u9053\u5bf9\u8c61\u4e4b\u95f4\u7684\u5f15\u7528\u548c\u88ab\u5f15\u7528\u5173\u7cfb\uff0c\u5c31\u53ef\u4ee5\u753b\u51fa\u5bf9\u8c61\u4e4b\u95f4\u5b8c\u6574\u7684\u5f15\u7528\u5173\u7cfb\u56fe\u3002\u4f46\u4e8b\u5b9e\u4e0a\u8fd8\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u56e0\u4e3a\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u4e00\u4e0d\u5c0f\u5fc3\u53c8\u4f1a\u5f15\u5165\u65b0\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u6240\u4ee5\uff0c\u6709\u597d\u7684\u8f6e\u5b50\u5c31\u76f4\u63a5\u7528\u5427\uff0c\u90a3\u5c31\u662fobjgraph\u3002objgraphobjgraph\u7684\u5b9e\u73b0\u8c03\u7528\u4e86gc\u7684\u8fd9\u51e0\u4e2a\u51fd\u6570\uff1agc.get_objects(),gc.get_referents(),gc.get_referers()\uff0c\u7136\u540e\u6784\u9020\u51fa\u5bf9\u8c61\u4e4b\u95f4\u7684\u5f15\u7528\u5173\u7cfb\u3002objgraph\u7684\u4ee3\u7801\u548c\u6587\u6863\u90fd\u5199\u5f97\u6bd4\u8f83\u597d\uff0c\u5efa\u8bae\u4e00\u8bfb\u3002\u4e0b\u9762\u5148\u4ecb\u7ecd\u51e0\u4e2a\u5341\u5206\u5b9e\u7528\u7684APIdefcount(typename)\u8fd4\u56de\u8be5\u7c7b\u578b\u5bf9\u8c61\u7684\u6570\u76ee\uff0c\u5176\u5b9e\u5c31\u662f\u901a\u8fc7gc.get_objects()\u62ff\u5230\u6240\u7528\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u7edf\u8ba1\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u76ee\u3002defby_type(typename)\u8fd4\u56de\u8be5\u7c7b\u578b\u7684\u5bf9\u8c61\u5217\u8868\u3002\u7ebf\u4e0a\u9879\u76ee\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a\u51fd\u6570\u5f88\u65b9\u4fbf\u627e\u5230\u4e00\u4e2a\u5355\u4f8b\u5bf9\u8c61defshow_most_common_types(limits=10)\u6253\u5370\u5b9e\u4f8b\u6700\u591a\u7684\u524dN\uff08limits\uff09\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u51fd\u6570\u975e\u5e38\u6709\u7528\u3002\u5728\u300aPython\u5185\u5b58\u4f18\u5316\u300b\u4e00\u6587\u4e2d\u4e5f\u63d0\u5230\uff0c\u8be5\u51fd\u6570\u80fd\u53d1\u73b0\u53ef\u4ee5\u7528slots\u8fdb\u884c\u5185\u5b58\u4f18\u5316\u7684\u5bf9\u8c61defshow_growth()\u7edf\u8ba1\u81ea\u4e0a\u6b21\u8c03\u7528\u4ee5\u6765\u589e\u52a0\u5f97\u6700\u591a\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u51fd\u6570\u975e\u5e38\u6709\u5229\u4e8e\u53d1\u73b0\u6f5c\u5728\u7684\u5185\u5b58\u6cc4\u9732\u3002\u51fd\u6570\u5185\u90e8\u8c03\u7528\u4e86gc.collect()\uff0c\u56e0\u6b64\u5373\u4f7f\u6709\u5faa\u73af\u5f15\u7528\u4e5f\u4e0d\u4f1a\u5bf9\u5224\u65ad\u9020\u6210\u5f71\u54cd\u3002\u503c\u5f97\u4e00\u63d0\uff0c\u8be5\u51fd\u6570\u7684\u5b9e\u73b0\u975e\u5e38\u6709\u610f\u601d\uff0c\u7b80\u5316\u540e\u7684\u4ee3\u7801\u5982\u4e0b\uff1adefshow_growth(limit=10,peak_stats={},shortnames=True,file=None):gc.collect()stats=typestats(shortnames=shortnames)deltas={}forname,countiniteritems(stats):old_count=peak_stats.get(name,0)ifcount>old_count:deltas[name]=count-old_countpeak_stats[name]=countdeltas=sorted(deltas.items(),key=operator.itemgetter(1),reverse=True)1234567891011defshow_growth(limit=10,peak_stats={},shortnames=True,file=None):\u00a0\u00a0\u00a0\u00a0gc.collect()\u00a0\u00a0\u00a0\u00a0stats=typestats(shortnames=shortnames)\u00a0\u00a0\u00a0\u00a0deltas={}\u00a0\u00a0\u00a0\u00a0forname,countiniteritems(stats):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0old_count=peak_stats.get(name,0)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifcount>old_count:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deltas[name]=count-old_count\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0peak_stats[name]=count\u00a0\u00a0\u00a0\u00a0deltas=sorted(deltas.items(),key=operator.itemgetter(1),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0reverse=True)\u6ce8\u610f\u5f62\u53c2peak_stats\u4f7f\u7528\u4e86\u53ef\u53d8\u53c2\u6570\u4f5c\u4e3a\u9ed8\u8ba4\u5f62\u53c2\uff0c\u8fd9\u6837\u5f88\u65b9\u4fbf\u8bb0\u5f55\u4e0a\u4e00\u6b21\u7684\u8fd0\u884c\u7ed3\u679c\u3002\u5728\u300a\u7a0b\u5e8f\u5458\u5fc5\u77e5\u7684Python\u9677\u9631\u4e0e\u7f3a\u9677\u5217\u8868\u300b\u4e2d\u63d0\u5230\uff0c\u4f7f\u7528\u53ef\u53d8\u5bf9\u8c61\u505a\u9ed8\u8ba4\u5f62\u53c2\u662f\u6700\u4e3a\u5e38\u89c1\u7684python\u9677\u9631\uff0c\u4f46\u5728\u8fd9\u91cc\uff0c\u5374\u6210\u4e3a\u4e86\u65b9\u4fbf\u7684\u5229\u5668\uff01def\u00a0show_backrefs()\u751f\u4ea7\u4e00\u5f20\u6709\u5173objs\u7684\u5f15\u7528\u56fe\uff0c\u770b\u51fa\u770b\u51fa\u5bf9\u8c61\u4e3a\u4ec0\u4e48\u4e0d\u91ca\u653e\uff0c\u540e\u9762\u4f1a\u5229\u7528\u8fd9\u4e2aAPI\u6765\u67e5\u5185\u5b58\u6cc4\u9732\u3002\u8be5API\u6709\u5f88\u591a\u6709\u7528\u7684\u53c2\u6570\uff0c\u6bd4\u5982\u5c42\u6570\u9650\u5236(max_depth)\u3001\u5bbd\u5ea6\u9650\u5236(too_many)\u3001\u8f93\u51fa\u683c\u5f0f\u63a7\u5236(filenameoutput)\u3001\u8282\u70b9\u8fc7\u6ee4(filter,extra_ignore)\uff0c\u5efa\u8bae\u4f7f\u7528\u4e4b\u95f4\u770b\u4e00\u4e9bdocument\u3002def\u00a0find_backref_chain(obj,\u00a0predicate,\u00a0max_depth=20,\u00a0extra_ignore=()):\u627e\u5230\u4e00\u6761\u6307\u5411obj\u5bf9\u8c61\u7684\u6700\u77ed\u8def\u5f84\uff0c\u4e14\u8def\u5f84\u7684\u5934\u90e8\u8282\u70b9\u9700\u8981\u6ee1\u8db3predicate\u51fd\u6570\uff08\u8fd4\u56de\u503c\u4e3aTrue\uff09\u53ef\u4ee5\u5feb\u6377\u3001\u6e05\u6670\u6307\u51fa\u5bf9\u8c61\u7684\u88ab\u5f15\u7528\u7684\u60c5\u51b5\uff0c\u540e\u9762\u4f1a\u5c55\u793a\u8fd9\u4e2a\u51fd\u6570\u7684\u5a01\u529bdefshow_chain():\u5c06find_backref_chain\u627e\u5230\u7684\u8def\u5f84\u753b\u51fa\u6765,\u8be5\u51fd\u6570\u4e8b\u5b9e\u4e0a\u8c03\u7528show_backrefs\uff0c\u53ea\u662f\u6392\u9664\u4e86\u6240\u6709\u4e0d\u5728\u8def\u5f84\u4e2d\u7684\u8282\u70b9\u3002\u67e5\u627e\u5185\u5b58\u6cc4\u9732\u5728\u8fd9\u4e00\u8282\uff0c\u4ecb\u7ecd\u5982\u4f55\u5229\u7528objgraph\u6765\u67e5\u627e\u5185\u5b58\u662f\u600e\u4e48\u6cc4\u9732\u7684\u5982\u679c\u6211\u4eec\u6000\u7591\u4e00\u6bb5\u4ee3\u7801\u3001\u4e00\u4e2a\u6a21\u5757\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u6cc4\u9732\uff0c\u90a3\u4e48\u9996\u5148\u8c03\u7528\u4e00\u6b21obj.show_growth()\uff0c\u7136\u540e\u8c03\u7528\u76f8\u5e94\u7684\u51fd\u6570\uff0c\u6700\u540e\u518d\u6b21\u8c03\u7528obj.show_growth()\uff0c\u770b\u770b\u662f\u5426\u6709\u589e\u52a0\u7684\u5bf9\u8c61\u3002\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a#-*-coding:utf-8-*-importobjgraph_cache=[]classOBJ(object):passdeffunc_to_leak():o=OBJ()_cache.append(o)#dosomethingwitho,thenremoveitfrom_cacheifTrue:#thisseemugly,butitalwaysexistsreturn_cache.remove(o)if__name__=='__main__':objgraph.show_growth()try:func_to_leak()except:passprint'aftercallfunc_to_leak'objgraph.show_growth()12345678910111213141516171819202122232425#-*-coding:utf-8-*-importobjgraph\u00a0_cache=[]\u00a0classOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0deffunc_to_leak():\u00a0\u00a0\u00a0\u00a0o\u00a0\u00a0=OBJ()\u00a0\u00a0\u00a0\u00a0_cache.append(o)\u00a0\u00a0\u00a0\u00a0#dosomethingwitho,thenremoveitfrom_cache\u00a0\u00a0\u00a0\u00a0\u00a0ifTrue:#thisseemugly,butitalwaysexists\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0_cache.remove(o)\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0objgraph.show_growth()\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0func_to_leak()\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0print'aftercallfunc_to_leak'\u00a0\u00a0\u00a0\u00a0objgraph.show_growth()\u8fd0\u884c\u7ed3\u679c\uff08\u6211\u4eec\u53ea\u5173\u5fc3\u540e\u4e00\u6b21show_growth\u7684\u7ed3\u679c\uff09\u5982\u4e0bPythonwrapper_descriptor1073+13member_descriptor204+5getset_descriptor168+5weakref338+3dict458+3OBJ1+1123456wrapper_descriptor1073+13member_descriptor204+5getset_descriptor168+5weakref338+3dict458+3OBJ1+1\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u51fd\u6570\u5f00\u59cb\u7684\u65f6\u5019\u8bb2\u5bf9\u8c61\u52a0\u5165\u4e86global\u4f5c\u7528\u57df\u7684_cache\u5217\u8868\uff0c\u7136\u540e\u671f\u671b\u662f\u5728\u51fd\u6570\u9000\u51fa\u4e4b\u524d\u4ece_cache\u5220\u9664\uff0c\u4f46\u662f\u7531\u4e8e\u63d0\u524d\u8fd4\u56de\u6216\u8005\u5f02\u5e38\uff0c\u5e76\u6ca1\u6709\u6267\u884c\u5230\u6700\u540e\u7684remove\u8bed\u53e5\u3002\u4ece\u8fd0\u884c\u7ed3\u679c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8c03\u7528\u51fd\u6570\u4e4b\u540e\uff0c\u589e\u52a0\u4e86\u4e00\u4e2a\u7c7bOBJ\u7684\u5b9e\u4f8b\uff0c\u7136\u800c\u7406\u8bba\u4e0a\u51fd\u6570\u8c03\u7528\u7ed3\u675f\u4e4b\u540e\uff0c\u6240\u6709\u5728\u51fd\u6570\u4f5c\u7528\u57df\uff08local\uff09\u4e2d\u58f0\u660e\u7684\u5bf9\u8c61\u90fd\u6539\u88ab\u9500\u6bc1\uff0c\u56e0\u6b64\u8fd9\u91cc\u5c31\u5b58\u5728\u5185\u5b58\u6cc4\u9732\u3002\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u4e5f\u4e0d\u6e05\u695a\u6cc4\u9732\u662f\u5728\u54ea\u6bb5\u4ee3\u7801\u3001\u54ea\u4e2a\u6a21\u5757\u4e2d\u53d1\u751f\u7684\uff0c\u800c\u4e14\u5f80\u5f80\u662f\u53d1\u751f\u4e86\u5185\u5b58\u6cc4\u9732\u4e4b\u540e\u518d\u53bb\u6392\u67e5\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f7f\u7528obj.show_most_common_types\u5c31\u6bd4\u8f83\u5408\u9002\u4e86\uff0c\u5982\u679c\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u7c7b\u7684\u5b9e\u4f8b\u6570\u76ee\u7279\u522b\u591a\uff0c\u90a3\u4e48\u5c31\u53ef\u80fd\u5b58\u5728\u5185\u5b58\u6cc4\u9732\u3002\u5982\u679c\u5728\u538b\u529b\u6d4b\u8bd5\u73af\u5883\uff0c\u505c\u6b62\u538b\u6d4b\uff0c\u8c03\u7528gc.collet\uff0c\u7136\u540e\u518d\u7528obj.show_most_common_types\u67e5\u770b\uff0c\u5982\u679c\u5bf9\u8c61\u7684\u6570\u76ee\u6ca1\u6709\u76f8\u5e94\u7684\u51cf\u5c11\uff0c\u90a3\u4e48\u80af\u5b9a\u5c31\u662f\u5b58\u5728\u6cc4\u9732\u3002\u5f53\u6211\u4eec\u5b9a\u4f4d\u4e86\u54ea\u4e2a\u5bf9\u8c61\u53d1\u751f\u4e86\u5185\u5b58\u6cc4\u9732\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u5c31\u662f\u5206\u6790\u600e\u4e48\u6cc4\u9732\u7684\uff0c\u5f15\u7528\u94fe\u662f\u600e\u4e48\u6837\u7684\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u8be5show_backrefs\u51fa\u9a6c\u4e86\uff0c\u8fd8\u662f\u4ee5\u4e4b\u524d\u7684\u4ee3\u7801\u4e3a\u4f8b\uff0c\u7a0d\u52a0\u4fee\u6539\uff1aimportobjgraph_cache=[]classOBJ(object):passdeffunc_to_leak():o=OBJ()_cache.append(o)#dosomethingwitho,thenremoveitfrom_cacheifTrue:#thisseemugly,butitalwaysexistsreturn_cache.remove(o)if__name__=='__main__':try:func_to_leak()except:passobjgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=10,filename='obj.dot')12345678910111213141516171819202122importobjgraph\u00a0_cache=[]\u00a0classOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0deffunc_to_leak():\u00a0\u00a0\u00a0\u00a0o\u00a0\u00a0=OBJ()\u00a0\u00a0\u00a0\u00a0_cache.append(o)\u00a0\u00a0\u00a0\u00a0#dosomethingwitho,thenremoveitfrom_cache\u00a0\u00a0\u00a0\u00a0\u00a0ifTrue:#thisseemugly,butitalwaysexists\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0_cache.remove(o)\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0func_to_leak()\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=10,filename='obj.dot')show_backrefs\u67e5\u770b\u5185\u5b58\u6cc4\u9732\u6ce8\u610f\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0cmax_depth\u53c2\u6570\u975e\u5e38\u5173\u952e\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u592a\u5c0f\uff0c\u90a3\u4e48\u770b\u4e0d\u5230\u5b8c\u6574\u7684\u5f15\u7528\u94fe\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u592a\u5927\uff0c\u8fd0\u884c\u7684\u65f6\u5019\u53c8\u975e\u5e38\u8017\u65f6\u95f4\u3002\u7136\u540e\u6253\u5f00dot\u6587\u4ef6\uff0c\u7ed3\u679c\u5982\u4e0b\u53ef\u4ee5\u770b\u5230\u6cc4\u9732\u7684\u5bf9\u8c61\uff08\u7ea2\u6846\u8868\u793a\uff09\uff0c\u662f\u88ab\u4e00\u4e2a\u53eb_cache\u7684list\u6240\u5f15\u7528\uff0c\u800c_cache\u53c8\u662f\u88ab__main__\u8fd9\u4e2amodule\u6240\u5f15\u7528\u3002\u5bf9\u4e8e\u793a\u4f8b\u4ee3\u7801\uff0cdot\u6587\u4ef6\u7684\u7ed3\u679c\u5df2\u7ecf\u975e\u5e38\u6e05\u6670\uff0c\u4f46\u662f\u5bf9\u4e8e\u771f\u5b9e\u9879\u76ee\uff0c\u5f15\u7528\u94fe\u4e2d\u7684\u8282\u70b9\u53ef\u80fd\u6210\u767e\u4e0a\u5343\uff0c\u770b\u8d77\u6765\u975e\u5e38\u5934\u5927\uff0c\u4e0b\u9762\u7528tornado\u8d77\u4e00\u4e2a\u6700\u6700\u7b80\u5355\u7684web\u670d\u52a1\u5668\uff08\u4ee3\u7801\u4e0d\u77e5\u9053\u6765\u81ea\u54ea\u91cc\uff0c\u4e14\u6ca1\u6709\u5185\u5b58\u6cc4\u9732\uff0c\u8fd9\u91cc\u53ea\u662f\u4e3a\u4e86\u663e\u793a\u5f15\u7528\u5173\u7cfb\uff09\uff0c\u7136\u540e\u7ed8\u5236socket\u7684\u5f15\u7528\u5173\u5173\u7cfb\u56fe\uff0c\u4ee3\u7801\u548c\u5f15\u7528\u5173\u7cfb\u56fe\u5982\u4e0b\uff1aimportobjgraphimporterrnoimportfunctoolsimporttornado.ioloopimportsocketdefconnection_ready(sock,fd,events):whileTrue:try:connection,address=sock.accept()print'connection_ready',addressexceptsocket.errorase:ife.args[0]notin(errno.EWOULDBLOCK,errno.EAGAIN):raisereturnconnection.setblocking(0)#dosthwithconnectionif__name__=='__main__':sock=socket.socket(socket.AF_INET,socket.SOCK_STREAM,0)sock.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)sock.setblocking(0)sock.bind((\"\",8888))sock.listen(128)io_loop=tornado.ioloop.IOLoop.current()callback=functools.partial(connection_ready,sock)io_loop.add_handler(sock.fileno(),callback,io_loop.READ)#objgraph.show_backrefs(sock,max_depth=10,filename='tornado.dot')#objgraph.show_chain(#objgraph.find_backref_chain(#sock,#objgraph.is_proper_module#),#filename='obj_chain.dot'#)io_loop.start()tornado_server\u5b9e\u4f8b12345678910111213141516171819202122232425262728293031323334353637383940importobjgraphimporterrnoimportfunctoolsimporttornado.ioloopimportsocket\u00a0defconnection_ready(sock,fd,events):\u00a0\u00a0\u00a0\u00a0whileTrue:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0connection,address=sock.accept()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print'connection_ready',address\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptsocket.errorase:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ife.args[0]notin(errno.EWOULDBLOCK,errno.EAGAIN):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raise\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0connection.setblocking(0)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#dosthwithconnection\u00a0\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0sock=socket.socket(socket.AF_INET,socket.SOCK_STREAM,0)\u00a0\u00a0\u00a0\u00a0sock.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)\u00a0\u00a0\u00a0\u00a0sock.setblocking(0)\u00a0\u00a0\u00a0\u00a0sock.bind((\"\",8888))\u00a0\u00a0\u00a0\u00a0sock.listen(128)\u00a0\u00a0\u00a0\u00a0\u00a0io_loop=tornado.ioloop.IOLoop.current()\u00a0\u00a0\u00a0\u00a0callback=functools.partial(connection_ready,sock)\u00a0\u00a0\u00a0\u00a0io_loop.add_handler(sock.fileno(),callback,io_loop.READ)\u00a0\u00a0\u00a0\u00a0#objgraph.show_backrefs(sock,max_depth=10,filename='tornado.dot')\u00a0\u00a0\u00a0\u00a0#objgraph.show_chain(\u00a0\u00a0\u00a0\u00a0#\u00a0\u00a0\u00a0\u00a0objgraph.find_backref_chain(\u00a0\u00a0\u00a0\u00a0#\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sock,\u00a0\u00a0\u00a0\u00a0#\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0objgraph.is_proper_module\u00a0\u00a0\u00a0\u00a0#\u00a0\u00a0\u00a0\u00a0),\u00a0\u00a0\u00a0\u00a0#\u00a0\u00a0\u00a0\u00a0filename='obj_chain.dot'\u00a0\u00a0\u00a0\u00a0#)\u00a0\u00a0\u00a0\u00a0io_loop.start()\u00a0tornado_server\u5b9e\u4f8b\u53ef\u89c1\uff0c\u4ee3\u7801\u8d8a\u590d\u6742\uff0c\u76f8\u4e92\u4e4b\u95f4\u7684\u5f15\u7528\u5173\u7cfb\u8d8a\u591a\uff0cshow_backrefs\u8d8a\u96be\u4ee5\u770b\u61c2\u3002\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f7f\u7528show_chain\u548cfind_backref_chain\u5427\uff0c\u8fd9\u79cd\u65b9\u6cd5\uff0c\u5728\u5b98\u65b9\u6587\u6863\u4e5f\u662f\u63a8\u8350\u7684\uff0c\u6211\u4eec\u7a0d\u5fae\u6539\u6539\u4ee3\u7801\uff0c\u7ed3\u679c\u5982\u4e0b\uff1aimportobjgraph_cache=[]classOBJ(object):passdeffunc_to_leak():o=OBJ()_cache.append(o)#dosomethingwitho,thenremoveitfrom_cacheifTrue:#thisseemugly,butitalwaysexistsreturn_cache.remove(o)if__name__=='__main__':try:func_to_leak()except:pass#objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=10,filename='obj.dot')objgraph.show_chain(objgraph.find_backref_chain(objgraph.by_type('OBJ')[0],objgraph.is_proper_module),filename='obj_chain.dot')1234567891011121314151617181920212223242526272829importobjgraph\u00a0_cache=[]\u00a0classOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0deffunc_to_leak():\u00a0\u00a0\u00a0\u00a0o\u00a0\u00a0=OBJ()\u00a0\u00a0\u00a0\u00a0_cache.append(o)\u00a0\u00a0\u00a0\u00a0#dosomethingwitho,thenremoveitfrom_cache\u00a0\u00a0\u00a0\u00a0\u00a0ifTrue:#thisseemugly,butitalwaysexists\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0_cache.remove(o)\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0func_to_leak()\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0#objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=10,filename='obj.dot')\u00a0\u00a0\u00a0\u00a0objgraph.show_chain(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0objgraph.find_backref_chain(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0objgraph.by_type('OBJ')[0],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0objgraph.is_proper_module\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0filename='obj_chain.dot'\u00a0\u00a0\u00a0\u00a0)\u4e0a\u9762\u4ecb\u7ecd\u4e86\u5185\u5b58\u6cc4\u9732\u7684\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u5bf9\u8c61\u88ab\u201c\u975e\u671f\u671b\u201d\u5730\u5f15\u7528\u7740\u3002\u4e0b\u9762\u770b\u770b\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u5faa\u73af\u5f15\u7528\u4e2d\u7684__del__\uff0c\u770b\u4e0b\u9762\u7684\u4ee3\u7801\uff1a#-*-coding:utf-8-*-importobjgraph,gcclassOBJ(object):def__del__(self):print('Dangerous!')defshow_leak_by_del():a,b=OBJ(),OBJ()a.attr_b=bb.attr_a=adela,bprintgc.collect()objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=10,filename='del_obj.dot')123456789101112131415#-*-coding:utf-8-*-importobjgraph,gcclassOBJ(object):\u00a0\u00a0\u00a0\u00a0def__del__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Dangerous!')\u00a0defshow_leak_by_del():\u00a0\u00a0\u00a0\u00a0a,b=OBJ(),OBJ()\u00a0\u00a0\u00a0\u00a0a.attr_b=b\u00a0\u00a0\u00a0\u00a0b.attr_a=a\u00a0\u00a0\u00a0\u00a0\u00a0dela,b\u00a0\u00a0\u00a0\u00a0printgc.collect()\u00a0\u00a0\u00a0\u00a0\u00a0objgraph.show_backrefs(objgraph.by_type('OBJ')[0],max_depth=10,filename='del_obj.dot')\u4e0a\u9762\u7684\u4ee3\u7801\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u800c\u4e14OBJ\u7c7b\u5b9a\u4e49\u4e86__del__\u51fd\u6570\u3002\u5982\u679c\u6ca1\u6709\u5b9a\u4e49__del__\u51fd\u6570\uff0c\u90a3\u4e48\u4e0a\u8ff0\u7684\u4ee3\u7801\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3agc.collect\u4f1a\u5c06\u5faa\u73af\u5f15\u7528\u5220\u9664\uff0cobjgraph.by_type(\u2018OBJ\u2019)\u8fd4\u56de\u7a7a\u5217\u8868\u3002\u800c\u56e0\u4e3a\u5b9a\u4e49\u4e86__del__\u51fd\u6570\uff0cgc.collect\u4e5f\u65e0\u80fd\u4e3a\u529b\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u8fd8\u662f\u6bd4\u8f83\u597d\u8fa8\u8bc6\u7684\uff0c\u56e0\u4e3aobjgraph\u5c06__del__\u51fd\u6570\u7528\u7279\u6b8a\u989c\u8272\u6807\u5fd7\u51fa\u6765\uff0c\u4e00\u773c\u5c31\u770b\u89c1\u4e86\u3002\u53e6\u5916\uff0c\u53ef\u4ee5\u770b\u89c1gc.garbage\uff08\u7c7b\u578b\u662flist\uff09\u4e5f\u5f15\u7528\u4e86\u8fd9\u4e24\u4e2a\u5bf9\u8c61\uff0c\u539f\u56e0\u5728document\u4e2d\u6709\u63cf\u8ff0\uff0c\u5f53\u6267\u884c\u5783\u573e\u56de\u6536\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u5b9a\u4e49\u4e86__del__\u51fd\u6570\u7684\u7c7b\u5b9e\u4f8b\uff08\u88ab\u79f0\u4e3auncollectableobject\uff09\u653e\u5230gc.garbage\u5217\u8868\uff0c\u56e0\u6b64\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u67e5\u770bgc.garbage\u6765\u627e\u51fa\u5b9a\u4e49\u4e86__del__\u7684\u5faa\u73af\u5f15\u7528\u3002\u5728\u8fd9\u91cc\uff0c\u901a\u8fc7\u589e\u52a0extra_ignore\u6765\u6392\u9664gc.garbage\u7684\u5f71\u54cd\uff1a\u5c06\u4e0a\u8ff0\u4ee3\u7801\u7684\u6700\u540e\u4e00\u884c\u6539\u6210\uff1aPython\u3000\u3000objgraph.show_backrefs(objgraph.by_type('OBJ')[0],extra_ignore=(id(gc.garbage),),max_depth=10,filename='del_obj.dot')1\u3000\u3000objgraph.show_backrefs(objgraph.by_type('OBJ')[0],extra_ignore=(id(gc.garbage),),\u00a0\u00a0max_depth=10,filename='del_obj.dot')\u53e6\u5916\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6eDEBUG_UNCOLLECTABLE\u9009\u9879\uff0c\u76f4\u63a5\u5c06uncollectable\u5bf9\u8c61\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u800c\u4e0d\u662f\u653e\u5230gc.garbage\u5faa\u73af\u5f15\u7528\u9664\u975e\u5b9a\u4e49\u4e86__del__\u65b9\u6cd5\uff0c\u90a3\u4e48\u5faa\u73af\u5f15\u7528\u4e5f\u4e0d\u662f\u4ec0\u4e48\u4e07\u6076\u4e0d\u8d66\u7684\u4e1c\u897f\uff0c\u56e0\u4e3a\u5783\u573e\u56de\u6536\u5668\u53ef\u4ee5\u5904\u7406\u5faa\u73af\u5f15\u7528\uff0c\u800c\u4e14\u4e0d\u51c6\u662fpython\u6807\u51c6\u5e93\u8fd8\u662f\u5927\u91cf\u4f7f\u7528\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u90fd\u53ef\u80fd\u5b58\u5728\u5faa\u73af\u5f15\u7528\u3002\u5982\u679c\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u90a3\u4e48Python\u7684gc\u5c31\u5fc5\u987b\u5f00\u542f\uff08gc.isenabled()\u8fd4\u56deTrue\uff09\uff0c\u5426\u5219\u5c31\u4f1a\u5185\u5b58\u6cc4\u9732\u3002\u4f46\u662f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u8fd8\u662f\u4e0d\u5e0c\u671b\u6709gc\uff0c\u6bd4\u5982\u5bf9\u5185\u5b58\u548c\u6027\u80fd\u6bd4\u8f83\u654f\u611f\u7684\u5e94\u7528\u573a\u666f\uff0c\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u63d0\u5230instagram\u901a\u8fc7\u7981\u7528gc\uff0c\u6027\u80fd\u63d0\u5347\u4e8610%\uff1b\u53e6\u5916\uff0c\u5728\u4e00\u4e9b\u5e94\u7528\u573a\u666f\uff0c\u5783\u573e\u56de\u6536\u5e26\u6765\u7684\u5361\u987f\u4e5f\u662f\u4e0d\u80fd\u63a5\u53d7\u7684\uff0c\u6bd4\u5982RPG\u6e38\u620f\u3002\u4ece\u524d\u9762\u5bf9\u5783\u573e\u56de\u6536\u7684\u63cf\u8ff0\u53ef\u4ee5\u770b\u5230\uff0c\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536\u662f\u5f88\u8017\u8d39\u65f6\u95f4\u7684\uff0c\u56e0\u4e3a\u9700\u8981\u904d\u5386\u6240\u6709\u88abcollector\u7ba1\u7406\u7684\u5bf9\u8c61\uff08\u5373\u4f7f\u5f88\u591a\u5bf9\u8c61\u4e0d\u5c5e\u4e8e\u5783\u573e\uff09\u3002\u56e0\u6b64\uff0c\u8981\u60f3\u7981\u7528GC\uff0c\u5c31\u5f97\u5148\u5f7b\u5e95\u5e72\u6389\u5faa\u73af\u5f15\u7528\u3002\u540c\u5185\u5b58\u6cc4\u9732\u4e00\u6837\uff0c\u89e3\u9664\u5faa\u73af\u5f15\u7528\u7684\u524d\u63d0\u662f\u5b9a\u4f4d\u54ea\u91cc\u51fa\u73b0\u4e86\u5faa\u73af\u5f15\u7528\u3002\u800c\u4e14\uff0c\u5982\u679c\u9700\u8981\u5728\u7ebf\u4e0a\u5e94\u7528\u5173\u95edgc\uff0c\u90a3\u4e48\u9700\u8981\u81ea\u52a8\u3001\u6301\u4e45\u5316\u7684\u8fdb\u884c\u68c0\u6d4b\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u5b9a\u4f4d\u5faa\u73af\u5f15\u7528\uff0c\u4ee5\u53ca\u5982\u4f55\u89e3\u51b3\u5faa\u73af\u5f15\u7528\u3002\u5b9a\u4f4d\u5faa\u73af\u5f15\u7528\u8fd9\u91cc\u8fd8\u662f\u662f\u7528GC\u6a21\u5757\u548cobjgraph\u6765\u5b9a\u4f4d\u5faa\u73af\u5f15\u7528\u3002\u9700\u8981\u6ce8\u610f\u7684\u4e8b\uff0c\u4e00\u5b9a\u8981\u5148\u7981\u7528gc\uff08\u8c03\u7528gc.disable()\uff09\uff0c\u9632\u6b62\u8bef\u5dee\u3002\u8fd9\u91cc\u5229\u7528\u4e4b\u524d\u4ecb\u7ecd\u5faa\u73af\u5f15\u7528\u65f6\u4f7f\u7528\u8fc7\u7684\u4f8b\u5b50\uff1aa\uff0cb\u4e24\u4e2aOBJ\u5bf9\u8c61\u5f62\u6210\u5faa\u73af\u5f15\u7528#-*-coding:utf-8-*-importobjgraph,gcclassOBJ(object):passdefshow_cycle_reference():a,b=OBJ(),OBJ()a.attr_b=bb.attr_a=aif__name__=='__main__':gc.disable()for_inxrange(50):show_cycle_reference()objgraph.show_most_common_types(20)123456789101112131415#-*-coding:utf-8-*-importobjgraph,gcclassOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0defshow_cycle_reference():\u00a0\u00a0\u00a0\u00a0a,b=OBJ(),OBJ()\u00a0\u00a0\u00a0\u00a0a.attr_b=b\u00a0\u00a0\u00a0\u00a0b.attr_a=a\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0gc.disable()\u00a0\u00a0\u00a0\u00a0for_inxrange(50):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0show_cycle_reference()\u00a0\u00a0\u00a0\u00a0objgraph.show_most_common_types(20)\u8fd0\u884c\u7ed3\u679c\uff08\u90e8\u5206\uff09\uff1aPythonwrapper_descriptor1060dict555OBJ100123wrapper_descriptor1060dict555OBJ100\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\u4f7f\u7528\u7684\u662fshow_most_common_types\uff0c\u800c\u6ca1\u6709\u4f7f\u7528show_growth\uff08\u56e0\u4e3agrowth\u4f1a\u624b\u52a8\u8c03\u7528gc.collect()\uff09\uff0c\u901a\u8fc7\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\uff0c\u5185\u5b58\u4e2d\u73b0\u5728\u6709100\u4e2aOBJ\u5bf9\u8c61\uff0c\u7b26\u5408\u9884\u671f\u3002\u5f53\u7136\u8fd9\u4e9bOBJ\u5bf9\u8c61\u6ca1\u6709\u5728\u51fd\u6570\u8c03\u7528\u540e\u88ab\u9500\u6bc1\uff0c\u4e0d\u4e00\u5b9a\u662f\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898\uff0c\u4e5f\u53ef\u80fd\u662f\u5185\u5b58\u6cc4\u9732\uff0c\u6bd4\u5982\u524d\u9762OBJ\u5bf9\u8c61\u88abglobal\u4f5c\u7528\u57df\u4e2d\u7684_cache\u5f15\u7528\u7684\u60c5\u51b5\u3002\u600e\u4e48\u6392\u9664\u662f\u5426\u662f\u88abglobal\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u5f15\u7528\u7684\u60c5\u51b5\u5462\uff0c\u65b9\u6cd5\u8fd8\u662fobjgraph.find_backref_chain(obj)\uff0c\u5728__doc__\u4e2d\u6307\u51fa\uff0c\u5982\u679c\u627e\u4e0d\u5230\u7b26\u5408\u6761\u4ef6\u7684\u5e94\u7528\u94fe\uff08chain\uff09\uff0c\u90a3\u4e48\u8fd4\u56de[obj]\uff0c\u7a0d\u5fae\u4fee\u6539\u4e0a\u9762\u7684\u4ee3\u7801\uff1a#-*-coding:utf-8-*-importobjgraph,gcclassOBJ(object):passdefshow_cycle_reference():a,b=OBJ(),OBJ()a.attr_b=bb.attr_a=aif__name__=='__main__':gc.disable()for_inxrange(50):show_cycle_reference()ret=objgraph.find_backref_chain(objgraph.by_type('OBJ')[0],objgraph.is_proper_module)printret12345678910111213141516#-*-coding:utf-8-*-importobjgraph,gcclassOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0defshow_cycle_reference():\u00a0\u00a0\u00a0\u00a0a,b=OBJ(),OBJ()\u00a0\u00a0\u00a0\u00a0a.attr_b=b\u00a0\u00a0\u00a0\u00a0b.attr_a=a\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0gc.disable()\u00a0\u00a0\u00a0\u00a0for_inxrange(50):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0show_cycle_reference()\u00a0\u00a0\u00a0\u00a0ret=objgraph.find_backref_chain(objgraph.by_type('OBJ')[0],objgraph.is_proper_module)\u00a0\u00a0\u00a0\u00a0printret\u4e0a\u9762\u7684\u4ee3\u7801\u8f93\u51fa\uff1aPython[<__main__.OBJobjectat0x0244F810>]1[<__main__.OBJobjectat0x0244F810>]\u9a8c\u8bc1\u4e86\u6211\u4eec\u7684\u60f3\u6cd5\uff0cOBJ\u5bf9\u8c61\u4e0d\u662f\u88abglobal\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u6240\u5f15\u7528\u3002\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u4e0d\u5927\u53ef\u80fd\u5230\u5904\u7528objgraph.show_most_common_types\u6216\u8005objgraph.by_type\u6765\u6392\u67e5\u5faa\u73af\u5f15\u7528\uff0c\u6548\u7387\u592a\u4f4e\u3002\u6709\u6ca1\u6709\u66f4\u597d\u7684\u529e\u6cd5\u5462\uff0c\u6709\u7684\uff0c\u90a3\u5c31\u662f\u4f7f\u7528gc\u6a21\u5757\u7684debug\u9009\u9879\u3002\u5728\u524d\u9762\u4ecb\u7ecdgc\u6a21\u5757\u7684\u65f6\u5019\uff0c\u5c31\u4ecb\u7ecd\u4e86gc.DEBUG_COLLECTABLE\u9009\u9879\uff0c\u6211\u4eec\u6765\u8bd5\u8bd5\uff1a#-*-coding:utf-8-*-importgc,timeclassOBJ(object):passdefshow_cycle_reference():a,b=OBJ(),OBJ()a.attr_b=bb.attr_a=aif__name__=='__main__':gc.disable()#\u8fd9\u91cc\u662f\u5426disable\u4e8b\u5b9e\u4e0a\u65e0\u6240\u8c13gc.set_debug(gc.DEBUG_COLLECTABLE|gc.DEBUG_OBJECTS)for_inxrange(1):show_cycle_reference()gc.collect()time.sleep(5)1234567891011121314151617#-*-coding:utf-8-*-importgc,timeclassOBJ(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0defshow_cycle_reference():\u00a0\u00a0\u00a0\u00a0a,b=OBJ(),OBJ()\u00a0\u00a0\u00a0\u00a0a.attr_b=b\u00a0\u00a0\u00a0\u00a0b.attr_a=a\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0gc.disable()#\u8fd9\u91cc\u662f\u5426disable\u4e8b\u5b9e\u4e0a\u65e0\u6240\u8c13\u00a0\u00a0\u00a0\u00a0gc.set_debug(gc.DEBUG_COLLECTABLE|gc.DEBUG_OBJECTS)\u00a0\u00a0\u00a0\u00a0for_inxrange(1):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0show_cycle_reference()\u00a0\u00a0\u00a0\u00a0gc.collect()\u00a0\u00a0\u00a0\u00a0time.sleep(5)\u4e0a\u9762\u4ee3\u7801\u7b2c13\u884c\u8bbe\u7f6e\u4e86debugflag\uff0c\u53ef\u4ee5\u6253\u5370\u51facollectable\u5bf9\u8c61\u3002\u53e6\u5916\uff0c\u53ea\u7528\u8c03\u7528\u4e00\u6b21show_cycle_reference\u51fd\u6570\u5c31\u8db3\u591f\u4e86\uff08\u8fd9\u4e5f\u6bd4objgraph.show_most_common_types\u65b9\u4fbf\u4e00\u70b9\uff09\u3002\u5728\u7b2c16\u884c\u624b\u52a8\u8c03\u7528gc.collect()\uff0c\u8f93\u51fa\u5982\u4e0b\uff1aPythongc:collectable<OBJ023B46F0>gc:collectable<OBJ023B4710>gc:collectable<dict023B7AE0>gc:collectable<dict023B7930>1234gc:collectable<OBJ023B46F0>gc:collectable<OBJ023B4710>gc:collectable<dict023B7AE0>gc:collectable<dict023B7930>\u6ce8\u610f\uff1a\u53ea\u6709\u5f53\u5bf9\u8c61\u662funreachable\u4e14collectable\u7684\u65f6\u5019\uff0c\u5728collect\u7684\u65f6\u5019\u624d\u4f1a\u88ab\u8f93\u51fa\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u662freachable\uff0c\u6bd4\u5982\u88abglobal\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u5f15\u7528\uff0c\u90a3\u4e48\u4e5f\u662f\u4e0d\u4f1a\u8f93\u51fa\u7684\u3002\u901a\u8fc7\u4e0a\u9762\u7684\u8f93\u51fa\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053OBJ\u7c7b\u7684\u5b9e\u4f8b\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u4f46\u662f\u8fd9\u4e2a\u65f6\u5019\uff0cobj\u5b9e\u4f8b\u5df2\u7ecf\u88ab\u56de\u6536\u4e86\u3002\u90a3\u4e48\u5982\u679c\u6211\u60f3\u901a\u8fc7show_backrefs\u627e\u51fa\u8fd9\u4e2a\u5f15\u7528\u5173\u7cfb\uff0c\u9700\u8981\u91cd\u65b0\u8c03\u7528show_cycle_reference\u51fd\u6570\uff0c\u7136\u540e\u4e0d\u8c03\u7528gc.collect\uff0c\u901a\u8fc7show_backrefs\u548cby_type\u7ed8\u5236\u3002\u6709\u6ca1\u6709\u66f4\u597d\u7684\u529e\u6cd5\u5462\uff0c\u53ef\u4ee5\u8ba9\u6211\u5728\u4e00\u6b21\u8fd0\u884c\u4e2d\u53d1\u73b0\u5faa\u73af\u5f15\u7528\uff0c\u5e76\u627e\u51fa\u5f15\u7528\u94fe\uff1f\u7b54\u6848\u5c31\u662f\u4f7f\u7528DEBUG_SAVEALL\uff0c\u4e0b\u9762\u4e3a\u4e86\u5c55\u793a\u65b9\u4fbf\uff0c\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u64cd\u4f5c\uff08\u5f53\u7136\uff0c\u4f7f\u7528ipython\u66f4\u597d\uff09Python>>>importgc,objgraph>>>classOBJ(object):...pass...>>>defshow_cycle_reference():...a,b=OBJ(),OBJ()...a.attr_b=b...b.attr_a=a...>>>gc.set_debug(gc.DEBUG_SAVEALL|gc.DEBUG_OBJECTS)>>>show_cycle_reference()>>>print'beforecollect',gc.garbagebeforecollect[]>>>printgc.collect()4>>>>>>foroingc.garbage:...printo...<__main__.OBJobjectat0x024BB7D0><__main__.OBJobjectat0x02586850>{'attr_b':<__main__.OBJobjectat0x02586850>}{'attr_a':<__main__.OBJobjectat0x024BB7D0>}>>>>>>objgraph.show_backrefs(objgraph.at(0x024BB7D0),5,filename='obj.dot')Graphwrittentoobj.dot(13nodes)>>>123456789101112131415161718192021222324252627>>>importgc,objgraph>>>classOBJ(object):...pass...>>>defshow_cycle_reference():...a,b=OBJ(),OBJ()...a.attr_b=b...b.attr_a=a...>>>gc.set_debug(gc.DEBUG_SAVEALL|gc.DEBUG_OBJECTS)>>>show_cycle_reference()>>>print'beforecollect',gc.garbagebeforecollect[]>>>printgc.collect()4>>>>>>foroingc.garbage:...printo...<__main__.OBJobjectat0x024BB7D0><__main__.OBJobjectat0x02586850>{'attr_b':<__main__.OBJobjectat0x02586850>}{'attr_a':<__main__.OBJobjectat0x024BB7D0>}>>>>>>objgraph.show_backrefs(objgraph.at(0x024BB7D0),5,filename='obj.dot')Graphwrittentoobj.dot(13nodes)>>>\u4e0a\u9762\u5728\u8c03\u7528gc.collect\u4e4b\u524d\uff0cgc.garbage\u91cc\u9762\u662f\u7a7a\u7684\uff0c\u7531\u4e8e\u8bbe\u7f6e\u4e86DEBUG_SAVEALL\uff0c\u90a3\u4e48\u8c03\u7528gc.collect\u65f6\uff0c\u4f1a\u5c06collectable\u5bf9\u8c61\u653e\u5230gc.garbage\u3002\u6b64\u65f6\uff0c\u5bf9\u8c61\u6ca1\u6709\u88ab\u91ca\u653e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u7ed8\u5236\u51fa\u5f15\u7528\u5173\u7cfb\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86objgraph.at\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528objgraph.by_type\uff0c\u6216\u8005\u76f4\u63a5\u4ecegc.garbage\u53d6\u5bf9\u8c61\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a\u51fa\u4e86\u5faa\u73af\u5f15\u7528\uff0c\u53ef\u4ee5\u770b\u89c1\u8fd8\u6709\u4e24\u4e2a\u5f15\u7528\uff0cgc.garbage\u4e0e\u5c40\u90e8\u53d8\u91cfo\uff0c\u76f8\u4fe1\u5927\u5bb6\u4e5f\u80fd\u7406\u89e3\u3002\u6d88\u706d\u5faa\u73af\u5f15\u7528\u627e\u5230\u5faa\u73af\u5f15\u7528\u5173\u7cfb\u4e4b\u540e\uff0c\u89e3\u9664\u5faa\u73af\u5f15\u7528\u5c31\u4e0d\u662f\u592a\u96be\u7684\u4e8b\u60c5\uff0c\u603b\u7684\u6765\u8bf4\uff0c\u6709\u4e24\u79cd\u529e\u6cd5\uff1a\u624b\u52a8\u89e3\u9664\u4e0e\u4f7f\u7528weakref\u3002\u624b\u52a8\u89e3\u9664\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u662f\u5728\u5408\u9002\u7684\u65f6\u673a\uff0c\u89e3\u9664\u5f15\u7528\u5173\u7cfb\u3002\u6bd4\u5982\uff0c\u524d\u9762\u63d0\u5230\u7684collections.OrderedDict\uff1aPython>>>root=[]>>>root[:]=[root,root,None]>>>>>>root[[...],[...],None]>>>>>>delroot[:]>>>root[]123456789>>>root=[]>>>root[:]=[root,root,None]>>>>>>root[[...],[...],None]>>>>>>delroot[:]>>>root[]\u66f4\u5e38\u89c1\u7684\u60c5\u51b5\uff0c\u662f\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u5bf9\u8c61\u4e4b\u95f4\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff1a\u8981\u4e48\u662f\u5355\u4e2a\u5bf9\u8c61\u5185\u7684\u5faa\u73af\u5f15\u7528\uff0c\u8981\u4e48\u662f\u591a\u4e2a\u5bf9\u8c61\u95f4\u7684\u5faa\u73af\u5f15\u7528\uff0c\u6211\u4eec\u770b\u4e00\u4e2a\u5355\u4e2a\u5bf9\u8c61\u5185\u5faa\u73af\u5f15\u7528\u7684\u4f8b\u5b50\uff1aclassConnection(object):MSG_TYPE_CHAT=0X01MSG_TYPE_CONTROL=0X02def__init__(self):self.msg_handlers={self.MSG_TYPE_CHAT:self.handle_chat_msg,self.MSG_TYPE_CONTROL:self.handle_control_msg}defon_msg(self,msg_type,*args):self.msg_handlers[msg_type](*args)defhandle_chat_msg(self,msg):passdefhandle_control_msg(self,msg):pass1234567891011121314151617classConnection(object):\u00a0\u00a0\u00a0\u00a0MSG_TYPE_CHAT=0X01\u00a0\u00a0\u00a0\u00a0MSG_TYPE_CONTROL=0X02\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.msg_handlers={\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.MSG_TYPE_CHAT:self.handle_chat_msg,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.MSG_TYPE_CONTROL:self.handle_control_msg\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0defon_msg(self,msg_type,*args):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.msg_handlers[msg_type](*args)\u00a0\u00a0\u00a0\u00a0\u00a0defhandle_chat_msg(self,msg):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0\u00a0defhandle_control_msg(self,msg):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u4e0a\u9762\u7684\u4ee3\u7801\u975e\u5e38\u5e38\u89c1\uff0c\u4ee3\u7801\u4e5f\u5f88\u7b80\u5355\uff0c\u521d\u59cb\u5316\u51fd\u6570\u4e2d\u4e3a\u6bcf\u79cd\u6d88\u606f\u7c7b\u578b\u5b9a\u4e49\u54cd\u5e94\u7684\u5904\u7406\u51fd\u6570\uff0c\u5f53\u6d88\u606f\u5230\u8fbe(on_msg)\u65f6\u6839\u636e\u6d88\u606f\u7c7b\u578b\u53d6\u51fa\u5904\u7406\u51fd\u6570\u3002\u4f46\u8fd9\u6837\u7684\u4ee3\u7801\u662f\u5b58\u5728\u5faa\u73af\u5f15\u7528\u7684\uff0c\u611f\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u7528objgraph\u770b\u770b\u5f15\u7528\u56fe\u3002\u5982\u4f55\u624b\u52a8\u89e3\u51b3\u5462\uff0c\u4e3aConnection\u589e\u52a0\u4e00\u4e2adestroy\uff08\u6216\u8005\u53ebclear\uff09\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5c06self.msg_handlers\u6e05\u7a7a\uff08self.msg_handlers.clear()\uff09\u3002\u5f53Connection\u7406\u8bba\u4e0a\u4e0d\u5728\u88ab\u4f7f\u7528\u7684\u65f6\u5019\u8c03\u7528destroy\u51fd\u6570\u5373\u53ef\u3002\u5bf9\u4e8e\u591a\u4e2a\u5bf9\u8c61\u95f4\u7684\u5faa\u73af\u5f15\u7528\uff0c\u5904\u7406\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u5c31\u662f\u5728\u201c\u9002\u5f53\u7684\u65f6\u673a\u201d\u8c03\u7528destroy\u51fd\u6570\uff0c\u96be\u70b9\u5728\u4e8e\u4ec0\u4e48\u662f\u9002\u5f53\u7684\u65f6\u673a\u3002\u53e6\u5916\u4e00\u79cd\u66f4\u65b9\u4fbf\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528\u5f31\u5f15\u7528weakref\uff0cweakref\u662fPython\u63d0\u4f9b\u7684\u6807\u51c6\u5e93\uff0c\u65e8\u5728\u89e3\u51b3\u5faa\u73af\u5f15\u7528\u3002weakref\u6a21\u5757\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u4e00\u4e9b\u6709\u7528\u7684API\uff1a\uff081\uff09weakref.ref(object,callback=None)\u521b\u5efa\u4e00\u4e2a\u5bf9object\u7684\u5f31\u5f15\u7528\uff0c\u8fd4\u56de\u503c\u4e3aweakref\u5bf9\u8c61\uff0ccallback:\u5f53object\u88ab\u5220\u9664\u7684\u65f6\u5019\uff0c\u4f1a\u8c03\u7528callback\u51fd\u6570\uff0c\u5728\u6807\u51c6\u5e93logging\uff08__init__.py\uff09\u4e2d\u6709\u4f7f\u7528\u8303\u4f8b\u3002\u4f7f\u7528\u7684\u65f6\u5019\u8981\u7528()\u89e3\u5f15\u7528\uff0c\u5982\u679creferant\u5df2\u7ecf\u88ab\u5220\u9664\uff0c\u90a3\u4e48\u8fd4\u56deNone\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50#-*-coding:utf-8-*-importweakrefclassOBJ(object):deff(self):print'HELLO'if__name__=='__main__':o=OBJ()w=weakref.ref(o)w().f()delow().f()123456789101112#-*-coding:utf-8-*-importweakrefclassOBJ(object):\u00a0\u00a0\u00a0\u00a0deff(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print'HELLO'\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0o=OBJ()\u00a0\u00a0\u00a0\u00a0w=weakref.ref(o)\u00a0\u00a0\u00a0\u00a0w().f()\u00a0\u00a0\u00a0\u00a0delo\u00a0\u00a0\u00a0\u00a0w().f()\u8fd0\u884c\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u7b2c12\u884c\u4f1a\u629b\u51fa\u5f02\u5e38\uff1aAttributeError:\u2018NoneType\u2019objecthasnoattribute\u2018f\u2019\u3002\u56e0\u4e3a\u8fd9\u4e2a\u65f6\u5019\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\uff082\uff09weakref.proxy(object,callback=None)\u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2aweakproxy\u5bf9\u8c61\uff0ccallback\u7684\u4f5c\u7528\u540c\u4e0a\u3002\u4f7f\u7528\u7684\u65f6\u5019\u76f4\u63a5\u7528\u548cobject\u4e00\u6837\uff0c\u5982\u679cobject\u5df2\u7ecf\u88ab\u5220\u9664\u90a3\u4e48\u8dd1\u51fa\u5f02\u5e38\u00a0\u00a0ReferenceError:weakly-referencedobjectnolongerexists\u3002#-*-coding:utf-8-*-importweakrefclassOBJ(object):deff(self):print'HELLO'if__name__=='__main__':o=OBJ()w=weakref.proxy(o)w.f()delow.f()123456789101112#-*-coding:utf-8-*-importweakrefclassOBJ(object):\u00a0\u00a0\u00a0\u00a0deff(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print'HELLO'\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0o=OBJ()\u00a0\u00a0\u00a0\u00a0w=weakref.proxy(o)\u00a0\u00a0\u00a0\u00a0w.f()\u00a0\u00a0\u00a0\u00a0delo\u00a0\u00a0\u00a0\u00a0w.f()\u6ce8\u610f\u7b2c10\u884c12\u884c\u4e0eweakref.ref\u793a\u4f8b\u4ee3\u7801\u7684\u533a\u522b\uff083\uff09weakref.WeakSet\u8fd9\u4e2a\u662f\u4e00\u4e2a\u5f31\u5f15\u7528\u96c6\u5408\uff0c\u5f53WeakSet\u4e2d\u7684\u5143\u7d20\u88ab\u56de\u6536\u7684\u65f6\u5019\uff0c\u4f1a\u81ea\u52a8\u4eceWeakSet\u4e2d\u5220\u9664\u3002WeakSet\u7684\u5b9e\u73b0\u4f7f\u7528\u4e86weakref.ref\uff0c\u5f53\u5bf9\u8c61\u52a0\u5165WeakSet\u7684\u65f6\u5019\uff0c\u4f7f\u7528weakref.ref\u5c01\u88c5\uff0c\u6307\u5b9a\u7684callback\u51fd\u6570\u5c31\u662f\u4eceWeakSet\u4e2d\u5220\u9664\u3002\u611f\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u76f4\u63a5\u770b\u6e90\u7801\uff08_weakrefset.py\uff09\uff0c\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2a\u53c2\u8003\u4f8b\u5b50\uff1a#-*-coding:utf-8-*-importweakrefclassOBJ(object):deff(self):print'HELLO'if__name__=='__main__':o=OBJ()ws=weakref.WeakSet()ws.add(o)printlen(ws)#1deloprintlen(ws)#012345678910111213#-*-coding:utf-8-*-importweakrefclassOBJ(object):\u00a0\u00a0\u00a0\u00a0deff(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print'HELLO'\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0o=OBJ()\u00a0\u00a0\u00a0\u00a0ws=weakref.WeakSet()\u00a0\u00a0\u00a0\u00a0ws.add(o)\u00a0\u00a0\u00a0\u00a0printlen(ws)#\u00a0\u00a01\u00a0\u00a0\u00a0\u00a0delo\u00a0\u00a0\u00a0\u00a0printlen(ws)#0\uff084\uff09weakref.WeakValueDictionary\uff0cweakref.WeakKeyDictionary\u5b9e\u73b0\u539f\u7406\u548c\u4f7f\u7528\u65b9\u6cd5\u57fa\u672c\u540cWeakSet\u603b\u7ed3\u672c\u6587\u7684\u7bc7\u5e45\u7565\u957f\uff0c\u9996\u9009\u662f\u7b80\u5355\u4ecb\u7ecd\u4e86python\u7684\u5185\u5b58\u7ba1\u7406\uff0c\u91cd\u70b9\u4ecb\u7ecd\u4e86\u5f15\u7528\u8ba1\u6570\u4e0e\u5783\u573e\u56de\u6536\uff0c\u7136\u540e\u9610\u8ff0Python\u4e2d\u5185\u5b58\u6cc4\u9732\u4e0e\u5faa\u73af\u5f15\u7528\u4ea7\u751f\u7684\u539f\u56e0\u4e0e\u5371\u5bb3\uff0c\u6700\u540e\u662f\u5229\u7528gc\u3001objgraph\u3001weakref\u7b49\u5de5\u5177\u6765\u5206\u6790\u5e76\u89e3\u51b3\u5185\u5b58\u6cc4\u9732\u3001\u5faa\u73af\u5f15\u7528\u95ee\u9898\u3002referencesGarbageCollectorInterfaceobjgraphGarbageCollectionforPython\u7981\u7528Python\u7684GC\u673a\u5236\u540e\uff0cInstagram\u6027\u80fd\u63d0\u534710%Python\u5185\u5b58\u7ba1\u7406\u673a\u5236\u53ca\u4f18\u5316\u7b80\u6790libraryweakref2\u8d5e3\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Numpy \u5c0f\u7ed3"], "art_url": ["http://python.jobbole.com/88860/"], "art_create_time": ["2017/11/15"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2014/12/6da94dec8f6f96417f14c8291e6345801.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u5f04\u6d6a\u7684\u9c7c\u00a0\u00a0\u00a0Python\u771f\u706b\u6765\u5b66\u4e60\u4e00\u4e0b\uff0c\u5148\u6765\u770b\u4e00\u4e2a\u5e93NumPy\u3002NumPy\u662fPython\u8bed\u8a00\u7684\u4e00\u4e2a\u6269\u5145\u7a0b\u5e8f\u5e93\u3002\u652f\u6301\u9ad8\u7ea7\u5927\u91cf\u7684\u7ef4\u5ea6\u6570\u7ec4\u4e0e\u77e9\u9635\u8fd0\u7b97\uff0c\u6b64\u5916\u4e5f\u9488\u5bf9\u6570\u7ec4\u8fd0\u7b97\u63d0\u4f9b\u5927\u91cf\u7684\u6570\u5b66\u51fd\u6570\u5e93\u30021.\u8bfb\u53d6\u6587\u4ef6numpy.genfromtxt()\u7528\u4e8e\u8bfb\u53d6txt\u6587\u4ef6\uff0c\u5176\u4e2d\u4f20\u5165\u7684\u53c2\u6570\u4f9d\u6b21\u4e3a\uff1a\u9700\u8981\u8bfb\u53d6\u7684txt\u6587\u4ef6\u4f4d\u7f6e\uff0c\u6b64\u5904\u6587\u4ef6\u4e0e\u7a0b\u5e8f\u4f4d\u4e8e\u540c\u4e00\u76ee\u5f55\u4e0b\u5206\u5272\u7684\u6807\u8bb0\u8f6c\u6362\u7c7b\u578b\uff0c\u5982\u679c\u6587\u4ef6\u4e2d\u65e2\u6709\u6587\u672c\u7c7b\u578b\u4e5f\u6709\u6570\u5b57\u7c7b\u578b\uff0c\u5c31\u5148\u8f6c\u6210\u6587\u672c\u7c7b\u578bhelp(numpy.genfromtxt)\u7528\u4e8e\u67e5\u770b\u5e2e\u52a9\u6587\u6863\uff1a\u5982\u679c\u4e0d\u60f3\u770bAPI\u53ef\u4ee5\u542f\u52a8\u4e00\u4e2a\u7a0b\u5e8f\u7528help\u67e5\u770b\u6307\u4ee4\u7684\u8be6\u7ec6\u7528\u6cd5Pythonimportnumpyworld_alcohol=numpy.genfromtxt(\"world_alcohol.txt\",delimiter=\",\",dtype=str)print(type(world_alcohol))print(world_alcohol)print(help(numpy.genfromtxt))123456importnumpy\u00a0world_alcohol=numpy.genfromtxt(\"world_alcohol.txt\",delimiter=\",\",dtype=str)print(type(world_alcohol))print(world_alcohol)print(help(numpy.genfromtxt))2.\u6784\u9020ndarraynumpy.array()\u6784\u9020ndarraynumpy.array()\u4e2d\u4f20\u5165\u6570\u7ec4\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u4e00\u7ef4\u7684\u4e5f\u53ef\u4ee5\u662f\u4e8c\u7ef4\u4e09\u7ef4\u7684\u3002numpy\u4f1a\u5c06\u5176\u8f6c\u53d8\u6210ndarray\u7684\u7ed3\u6784\u3002Pythonvector=numpy.array([1,2,3,4])matrix=numpy.array([[1,2,3],[4,5,6]])12vector=numpy.array([1,2,3,4])matrix=numpy.array([[1,2,3],[4,5,6]])\u4f20\u5165\u7684\u53c2\u6570\u5fc5\u987b\u662f\u540c\u4e00\u7ed3\u6784,\u4e0d\u662f\u540c\u4e00\u7ed3\u6784\u5c06\u53d1\u751f\u8f6c\u6362\u3002Pythonvector=numpy.array([1,2,3,4])array([1,2,3,4])123vector=numpy.array([1,2,3,4])\u00a0array([1,2,3,4])\u5747\u4e3aint\u7c7b\u578bPythonvector=numpy.array([1,2,3,4.0])array([1.,2.,3.,4.])123vector=numpy.array([1,2,3,4.0])\u00a0array([1.,\u00a0\u00a02.,\u00a0\u00a03.,\u00a0\u00a04.])\u8f6c\u4e3a\u6d6e\u70b9\u6570\u7c7b\u578bPythonvector=numpy.array([1,2,'3',4])array(['1','2','3','4'],dtype='<U21')123vector=numpy.array([1,2,'3',4])\u00a0array(['1','2','3','4'],dtype='<U21')\u8f6c\u4e3a\u5b57\u7b26\u7c7b\u578b\u5229\u7528.shape\u67e5\u770b\u7ed3\u6784\u80fd\u591f\u4e86\u89e3array\u7684\u7ed3\u6784\uff0cdebug\u65f6\u901a\u8fc7\u67e5\u770b\u7ed3\u6784\u80fd\u591f\u66f4\u597d\u5730\u4e86\u89e3\u7a0b\u5e8f\u8fd0\u884c\u7684\u8fc7\u7a0b\u3002Pythonprint(vector.shape)print(matrix.shape)(4,)(2,3)1234print(vector.shape)print(matrix.shape)(4,)(2,3)\u5229\u7528dtype\u67e5\u770b\u7c7b\u578bPythonvector=numpy.array([1,2,3,4])vector.dtypedtype('int64')1234vector=numpy.array([1,2,3,4])vector.dtype\u00a0dtype('int64')ndim\u67e5\u770b\u7ef4\u5ea6\u4e00\u7ef4Pythonvector=numpy.array([1,2,3,4])vector.ndim11234vector=numpy.array([1,2,3,4])vector.ndim\u00a01\u4e8c\u7ef4Pythonmatrix=numpy.array([[1,2,3],[4,5,6],[7,8,9]])matrix.ndim2123456matrix=numpy.array([[1,2,3],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[4,5,6],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[7,8,9]])matrix.ndim\u00a02size\u67e5\u770b\u5143\u7d20\u6570\u91cfPythonmatrix.size912matrix.size93.\u83b7\u53d6\u4e0e\u8ba1\u7b97numpy\u80fd\u4f7f\u7528\u5207\u7247\u83b7\u53d6\u6570\u636ePythonmatrix=numpy.array([[1,2,3],[4,5,6],[7,8,9]])123matrix=numpy.array([[1,2,3],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[4,5,6],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[7,8,9]])\u6839\u636e\u6761\u4ef6\u83b7\u53d6numpy\u80fd\u591f\u4f9d\u6b21\u6bd4\u8f83vector\u548c\u5143\u7d20\u4e4b\u95f4\u662f\u5426\u76f8\u540cPythonvector=numpy.array([5,10,15,20])vector==10array([False,True,False,False],dtype=bool)1234vector=numpy.array([5,10,15,20])vector==10\u00a0array([False,\u00a0\u00a0True,False,False],dtype=bool)\u6839\u636e\u8fd4\u56de\u503c\u83b7\u53d6\u5143\u7d20Pythonvector=numpy.array([5,10,15,20])equal_to_ten=(vector==10)print(equal_to_ten)print(vector[equal_to_ten])[FalseTrueFalseFalse][10]1234567vector=numpy.array([5,10,15,20])equal_to_ten=(vector==10)print(equal_to_ten)print(vector[equal_to_ten])\u00a0[False\u00a0\u00a0TrueFalseFalse][10]\u8fdb\u884c\u8fd0\u7b97\u4e4b\u540e\u83b7\u53d6Pythonvector=numpy.array([5,10,15,20])equal_to_ten_and_five=(vector==10)&(vector==5)12vector=numpy.array([5,10,15,20])equal_to_ten_and_five=(vector==10)&(vector==5)Pythonvector=numpy.array([5,10,15,20])equal_to_ten_or_five=(vector==10)|(vector==5)12vector=numpy.array([5,10,15,20])equal_to_ten_or_five=(vector==10)|(vector==5)\u7c7b\u578b\u8f6c\u6362\u5c06\u6574\u4f53\u7c7b\u578b\u8fdb\u884c\u8f6c\u6362Pythonvector=numpy.array([5,10,15,20])print(vector.dtype)vector=vector.astype(str)print(vector.dtype)int64<U211234567vector=numpy.array([5,10,15,20])print(vector.dtype)vector=vector.astype(str)print(vector.dtype)\u00a0int64<U21\u6c42\u548csum()\u80fd\u591f\u5bf9ndarray\u8fdb\u884c\u5404\u79cd\u6c42\u548c\u64cd\u4f5c\uff0c\u6bd4\u5982\u5206\u522b\u6309\u884c\u6309\u5217\u8fdb\u884c\u6c42\u548cPythonmatrix=numpy.array([[1,2,3],[4,5,6],[7,8,9]])print(matrix.sum())print(matrix.sum(1))print(matrix.sum(0))45[61524][121518]12345678910matrix=numpy.array([[1,2,3],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[4,5,6],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[7,8,9]])print(matrix.sum())print(matrix.sum(1))print(matrix.sum(0))\u00a045[61524][121518]sum(1)\u662fsum(axis=1))\u7684\u7f29\u5199\uff0c1\u8868\u793a\u6309\u7167x\u8f74\u65b9\u5411\u6c42\u548c\uff0c0\u8868\u793a\u6309\u7167y\u8f74\u65b9\u5411\u6c42\u548c4.\u5e38\u7528\u51fd\u6570reshape\u751f\u6210\u4ece0-14\u768415\u4e2a\u6570\u5b57\uff0c\u4f7f\u7528reshape(3,5)\u5c06\u5176\u6784\u9020\u6210\u4e00\u4e2a\u4e09\u884c\u4e94\u5217\u7684array\u3002Pythonimportnumpyasnparr=np.arange(15).reshape(3,5)arrarray([[0,1,2,3,4],[5,6,7,8,9],[10,11,12,13,14]])1234567importnumpyasnparr=np.arange(15).reshape(3,5)arr\u00a0array([[0,\u00a0\u00a01,\u00a0\u00a02,\u00a0\u00a03,\u00a0\u00a04],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[5,\u00a0\u00a06,\u00a0\u00a07,\u00a0\u00a08,\u00a0\u00a09],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[10,11,12,13,14]])zeros\u751f\u6210\u6307\u5b9a\u7ed3\u6784\u7684\u9ed8\u8ba4\u4e3a0.\u7684arrayPythonnp.zeros((3,4))array([[0.,0.,0.,0.],[0.,0.,0.,0.],[0.,0.,0.,0.]])12345np.zeros((3,4))\u00a0array([[0.,\u00a0\u00a00.,\u00a0\u00a00.,\u00a0\u00a00.],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[0.,\u00a0\u00a00.,\u00a0\u00a00.,\u00a0\u00a00.],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[0.,\u00a0\u00a00.,\u00a0\u00a00.,\u00a0\u00a00.]])ones\u751f\u6210\u4e00\u4e2a\u4e09\u7ef4\u7684array,\u901a\u8fc7dtype\u6307\u5b9a\u7c7b\u578bPythonnp.ones((2,3,4),dtype=np.int32)array([[[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,1,1,1],[1,1,1,1],[1,1,1,1]]])123456789np.ones((2,3,4),dtype=np.int32)\u00a0array([[[1,1,1,1],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[1,1,1,1],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[1,1,1,1]],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[[1,1,1,1],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[1,1,1,1],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[1,1,1,1]]])range\u6307\u5b9a\u8303\u56f4\u548c\u6570\u503c\u95f4\u7684\u95f4\u9694\u751f\u6210array\uff0c\u6ce8\u610f\u8303\u56f4\u5305\u5de6\u4e0d\u5305\u53f3Pythonnp.arange(0,10,2)array([0,2,4,6,8])123np.arange(0,10,2)\u00a0array([0,2,4,6,8])random\u968f\u673a\u6570\u751f\u6210\u6307\u5b9a\u7ed3\u6784\u7684\u968f\u673a\u6570\uff0c\u53ef\u4ee5\u7528\u4e8e\u751f\u6210\u968f\u673a\u6743\u91cdPythonnp.random.random((2,3))array([[0.86166627,0.37756207,0.94265883],[0.9768257,0.96915312,0.33495431]])1234np.random.random((2,3))\u00a0array([[0.86166627,\u00a0\u00a00.37756207,\u00a0\u00a00.94265883],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[0.9768257,\u00a0\u00a00.96915312,\u00a0\u00a00.33495431]])5.ndarray\u8fd0\u7b97\u5143\u7d20\u4e4b\u95f4\u4f9d\u6b21\u76f8\u51cf\u76f8\u51cfPythona=np.array([10,20,30,40])b=np.array(4)a-barray([6,16,26,36])12345a=np.array([10,20,30,40])b=np.array(4)\u00a0a-barray([6,16,26,36])\u4e58\u65b9Pythona**2array([100,400,900,1600])12a**2array([100,\u00a0\u00a0400,\u00a0\u00a0900,1600])\u5f00\u6839\u53f7Pythonnp.sqrt(B)array([[1.41421356,0.],[1.73205081,2.]])1234np.sqrt(B)\u00a0array([[1.41421356,\u00a0\u00a00.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[1.73205081,\u00a0\u00a02.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0]])e\u6c42\u65b9Pythonnp.exp(B)array([[7.3890561,1.],[20.08553692,54.59815003]])1234np.exp(B)\u00a0array([[\u00a0\u00a07.3890561,\u00a0\u00a01.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[20.08553692,\u00a0\u00a054.59815003]])\u5411\u4e0b\u53d6\u6574Pythona=np.floor(10*np.random.random((2,2)))aarray([[0.,0.],[3.,6.]])12345a=np.floor(10*np.random.random((2,2)))a\u00a0array([[0.,\u00a0\u00a00.],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[3.,\u00a0\u00a06.]])\u884c\u5217\u53d8\u6362Pythona.Tarray([[0.,3.],[0.,6.]])1234a.T\u00a0array([[0.,\u00a0\u00a03.],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[0.,\u00a0\u00a06.]])\u53d8\u6362\u7ed3\u6784Pythona.resize(1,4)aarray([[0.,0.,3.,6.]])1234a.resize(1,4)a\u00a0array([[0.,\u00a0\u00a00.,\u00a0\u00a03.,\u00a0\u00a06.]])6.\u77e9\u9635\u8fd0\u7b97\u77e9\u9635\u4e4b\u95f4\u7684\u8fd0\u7b97PythonA=np.array([[1,1],[0,1]])B=np.array([[2,0],[3,4]])1234A=np.array([[1,1],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[0,1]])B=np.array([[2,0],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[3,4]])\u5bf9\u5e94\u4f4d\u7f6e\u4e00\u6b21\u76f8\u4e58PythonA*Barray([[2,0],[0,4]])1234A*B\u00a0array([[2,0],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[0,4]])\u77e9\u9635\u4e58\u6cd5Pythonprint(A.dot(B))print(np.dot(A,B))[[54][34]]12345print(A.dot(B))print(np.dot(A,B))\u00a0[[54][34]]\u6a2a\u5411\u76f8\u52a0Pythona=np.floor(10*np.random.random((2,2)))b=np.floor(10*np.random.random((2,2)))print(a)print(b)print(np.hstack((a,b)))[[2.3.][9.3.]][[8.1.][0.0.]][[2.3.8.1.][9.3.0.0.]]12345678910111213a=np.floor(10*np.random.random((2,2)))b=np.floor(10*np.random.random((2,2)))\u00a0print(a)print(b)print(np.hstack((a,b)))\u00a0[[2.\u00a0\u00a03.][9.\u00a0\u00a03.]][[8.\u00a0\u00a01.][0.\u00a0\u00a00.]][[2.\u00a0\u00a03.\u00a0\u00a08.\u00a0\u00a01.][9.\u00a0\u00a03.\u00a0\u00a00.\u00a0\u00a00.]]\u7eb5\u5411\u76f8\u52a0Pythonprint(np.vstack((a,b)))[[2.3.][9.3.][8.1.][0.0.]]123456print(np.vstack((a,b)))\u00a0[[2.\u00a0\u00a03.][9.\u00a0\u00a03.][8.\u00a0\u00a01.][0.\u00a0\u00a00.]]\u77e9\u9635\u5206\u5272Python#\u6a2a\u5411\u5206\u5272print(np.hsplit(a,3))#\u7eb5\u5411\u98ce\u683cprint(np.vsplit(a,3))1234#\u6a2a\u5411\u5206\u5272print(np.hsplit(a,3))#\u7eb5\u5411\u98ce\u683cprint(np.vsplit(a,3))7.\u590d\u5236\u7684\u533a\u522b\u5730\u5740\u590d\u5236\u901a\u8fc7b=a\u590d\u5236a\u7684\u503c\uff0cb\u4e0ea\u6307\u5411\u540c\u4e00\u5730\u5740\uff0c\u6539\u53d8b\u540c\u65f6\u4e5f\u6539\u53d8a\u3002Pythona=np.arange(12)b=aprint(aisb)print(a.shape)print(b.shape)b.shape=(3,4)print(a.shape)print(b.shape)True(12,)(12,)(3,4)(3,4)123456789101112131415a=np.arange(12)b=aprint(aisb)\u00a0print(a.shape)print(b.shape)b.shape=(3,4)print(a.shape)print(b.shape)\u00a0True(12,)(12,)(3,4)(3,4)\u590d\u5236\u503c\u901a\u8fc7a.view()\u4ec5\u590d\u5236\u503c\uff0c\u5f53\u5bf9c\u503c\u8fdb\u884c\u6539\u53d8\u4f1a\u6539\u53d8a\u7684\u5bf9\u5e94\u7684\u503c\uff0c\u800c\u6539\u53d8c\u7684shape\u4e0d\u6539\u53d8a\u7684shapePythona=np.arange(12)c=a.view()print(cisa)c.shape=2,6c[0,0]=9999print(a)print(c)False[99991234567891011][[999912345][67891011]]1234567891011121314a=np.arange(12)c=a.view()print(cisa)\u00a0c.shape=2,6c[0,0]=9999\u00a0print(a)print(c)\u00a0False[9999\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0\u00a0\u00a02\u00a0\u00a0\u00a0\u00a03\u00a0\u00a0\u00a0\u00a04\u00a0\u00a0\u00a0\u00a05\u00a0\u00a0\u00a0\u00a06\u00a0\u00a0\u00a0\u00a07\u00a0\u00a0\u00a0\u00a08\u00a0\u00a0\u00a0\u00a09\u00a0\u00a010\u00a0\u00a011][[9999\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0\u00a0\u00a02\u00a0\u00a0\u00a0\u00a03\u00a0\u00a0\u00a0\u00a04\u00a0\u00a0\u00a0\u00a05][\u00a0\u00a06\u00a0\u00a0\u00a0\u00a07\u00a0\u00a0\u00a0\u00a08\u00a0\u00a0\u00a0\u00a09\u00a0\u00a010\u00a0\u00a011]]\u5b8c\u6574\u62f7\u8d1da.copy()\u8fdb\u884c\u7684\u5b8c\u6574\u7684\u62f7\u8d1d\uff0c\u4ea7\u751f\u4e00\u4efd\u5b8c\u5168\u76f8\u540c\u7684\u72ec\u7acb\u7684\u590d\u5236Pythona=np.arange(12)c=a.copy()print(cisa)c.shape=2,6c[0,0]=9999print(a)print(c)False[01234567891011][[999912345][67891011]]1234567891011121314a=np.arange(12)c=a.copy()print(cisa)\u00a0c.shape=2,6c[0,0]=9999\u00a0print(a)print(c)\u00a0False[0\u00a0\u00a01\u00a0\u00a02\u00a0\u00a03\u00a0\u00a04\u00a0\u00a05\u00a0\u00a06\u00a0\u00a07\u00a0\u00a08\u00a0\u00a091011][[9999\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0\u00a0\u00a02\u00a0\u00a0\u00a0\u00a03\u00a0\u00a0\u00a0\u00a04\u00a0\u00a0\u00a0\u00a05][\u00a0\u00a06\u00a0\u00a0\u00a0\u00a07\u00a0\u00a0\u00a0\u00a08\u00a0\u00a0\u00a0\u00a09\u00a0\u00a010\u00a0\u00a011]]1\u8d5e4\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u4f7f\u7528 Python \u5728 Linux \u4e0a\u5b9e\u73b0\u4e00\u952e\u56de\u5f52\u6d4b\u8bd5"], "art_url": ["http://python.jobbole.com/88842/"], "art_create_time": ["2017/11/10"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aIBMdeveloperWorks\u00a0\u00a0\u00a0\u4ece\u4ee3\u7801\u5e93\u8fc1\u51fa\u4ee3\u7801\u2014-pexpect\u7684\u4f7f\u7528\u6d4b\u8bd5\u4eba\u5458\u4ece\u4ee3\u7801\u5e93\uff08\u4f8b\u5982CVS\uff09\u8fc1\u51fa\u4ee3\u7801\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u624b\u52a8\u8f93\u5165\u8bbf\u95ee\u5bc6\u7801\uff0c\u800cPython\u63d0\u4f9b\u4e86Pexpect\u6a21\u5757\u5219\u80fd\u591f\u5c06\u624b\u52a8\u8f93\u5165\u5bc6\u7801\u8fd9\u4e00\u8fc7\u7a0b\u81ea\u52a8\u5316\u3002\u5f53\u7136Pexpect\u4e5f\u53ef\u4ee5\u7528\u6765\u548cssh\u3001ftp\u3001passwd\u3001telnet\u7b49\u547d\u4ee4\u884c\u8fdb\u884c\u81ea\u52a8\u5316\u4ea4\u4e92\u3002\u8fd9\u91cc\u6211\u4eec\u4ee5CVS\u4e3a\u4f8b\u5c55\u793a\u5982\u4f55\u5229\u7528Pexpect\u4ece\u4ee3\u7801\u5e93\u8fc1\u51fa\u4ee3\u7801\u3002\u6e05\u53551.\u7528pexpect\u8fc1\u51fa\u4ee3\u7801\u5e93\u4ee3\u7801try:chkout_cmd='cvscoproject_code'#\u4ece\u4ee3\u7801\u5e93\u8fc1\u51faproject_code\u7684\u5185\u5bb9child=pexpect.spawn(chkout_cmd)child.expect('password:')child.sendline('your-password')#\u8bf7\u66ff\u6362\"your-password\"\u4e3a\u771f\u5b9e\u5bc6\u7801child.interact()except:pass#\u5ffd\u7565\u8fc1\u51fa\u4ee3\u7801\u4e2d\u7684\u9519\u8bef12345678try:chkout_cmd='cvscoproject_code'#\u4ece\u4ee3\u7801\u5e93\u8fc1\u51faproject_code\u7684\u5185\u5bb9child=pexpect.spawn(chkout_cmd)child.expect('password:')child.sendline('your-password')#\u8bf7\u66ff\u6362\"your-password\"\u4e3a\u771f\u5b9e\u5bc6\u7801child.interact()except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass#\u5ffd\u7565\u8fc1\u51fa\u4ee3\u7801\u4e2d\u7684\u9519\u8bef\u5728\u6e05\u53551\u4e2d\uff0c\u6211\u4eec\u7528\u547d\u4ee4\u201dcvscoproject_code\u201d\u4ece\u4ee3\u7801\u5e93\u4e2d\u8fc1\u51fa\u4e86project_code\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7528\u8be5\u547d\u4ee4\u6765\u66f4\u65b0\u5df2\u7ecf\u8fc1\u51fa\u7684\u4ee3\u7801\u3002\u53ea\u9700\u8981\u5c06\u547d\u4ee4\u201dcvsupdate\u201d\u4f20\u7ed9\u7c7bpexpect.spawn()\u5373\u53ef\uff0c\u8be6\u7ec6\u7684\u5b9e\u73b0\u8bf7\u53c2\u8003\u4ee3\u7801\u6587\u4ef6\u3002\u8fd9\u91ccinteract()\u51fd\u6570\u662f\u5fc5\u987b\u7684\uff0c\u7528\u6765\u5728\u4ea4\u4e92\u7684\u65b9\u5f0f\u4e0b\u63a7\u5236\u8be5\u5b50\u8fdb\u7a0b\u3002\u6709\u65f6\u4ee3\u7801\u5e93\u4e2d\u4f1a\u5b58\u5728\u76ee\u5f55\u4e0d\u4e00\u81f4\u884c\u60c5\u51b5\uff0c\u8fc1\u51fa\u4ee3\u7801\u4f1a\u56e0\u62a5\u9519\u7ec8\u6b62\uff0c\u6240\u4ee5\u9700\u8981\u5f02\u5e38\u5904\u7406(try\u2026execpt)\u6765\u5ffd\u7565\u8be5\u9519\u8bef\u3002\u7f16\u8bd1\u4ee3\u7801\u548c\u8fd0\u884c\u6d4b\u8bd5\u811a\u672c\u2014-subprocess\u7684\u4f7f\u7528\u6d4b\u8bd5\u4eba\u5458\u83b7\u53d6\u6700\u65b0\u7684\u4ee3\u7801\u4e4b\u540e\uff0c\u5c31\u8981\u5bf9\u6e90\u7801\u8fdb\u884c\u7f16\u8bd1\uff0c\u5e76\u4e14\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u3002Python\u8bed\u8a00\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u6cd5\u5982os.system()/os.popen()\u6765\u6267\u884c\u4e00\u6761\u547d\u4ee4\uff0c\u8fd9\u91cc\u6211\u4eec\u63a8\u8350\u7528subprocess\u6a21\u5757\u6765\u521b\u5efa\u5b50\u8fdb\u7a0b\uff0c\u5b8c\u6210\u4ee3\u7801\u7f16\u8bd1\u548c\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u3002\u56e0\u4e3asubprocess\u652f\u6301\u4e3b\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u7684\u4ea4\u4e92\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u4e3b\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u662f\u540c\u6b65\u6267\u884c\u8fd8\u662f\u5f02\u6b65\u6267\u884c\u3002\u7531\u4e8e\u672c\u6587\u4e2d\u7684\u5404\u4e2a\u529f\u80fd\u6a21\u5757\u6709\u90fd\u5148\u540e\u4f9d\u8d56\u5173\u7cfb\uff0c\u6240\u4ee5\u5168\u90e8\u91c7\u7528\u7684\u662f\u4e3b\u8fdb\u7a0b\u548c\u5b50\u8fdb\u7a0b\u540c\u6b65\u6a21\u5f0f\u6267\u884c\u3002\u7f16\u8bd1\u4ee3\u7801\u6e05\u53552.\u7528subprocess\u7f16\u8bd1\u4ee3\u7801build_cmd='build_command_for_your_code'#\u8bf7\u5728\u8fd9\u91cc\u914d\u7f6e\u7f16\u8bd1\u547d\u4ee4build_proc=subprocess.Popen(build_cmd,stdin=None,stdout=None,stderr=None,shell=True)build_proc.wait()#\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675fassert(0==build_proc.returncode)1234build_cmd='build_command_for_your_code'#\u8bf7\u5728\u8fd9\u91cc\u914d\u7f6e\u7f16\u8bd1\u547d\u4ee4build_proc=subprocess.Popen(build_cmd,stdin=None,stdout=None,stderr=None,shell=True)build_proc.wait()#\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\u00a0\u00a0\u00a0\u00a0assert(0==build_proc.returncode)\u5728\u4e00\u4e9b\u7cfb\u7edf\u4e2d\u6211\u4eec\u7f16\u8bd1\u4ee3\u7801\u91c7\u7528\u7684\u662f\u811a\u672c\u6587\u4ef6\uff08\u5982shell\u811a\u672c\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u5982\u4e0b\u547d\u4ee4\u6765\u5b8c\u6210\u4ee3\u7801\u7f16\u8bd1\u5de5\u4f5c\u3002\u6e05\u53553.\u7528subprocess\u7684call\u51fd\u6570\u6267\u884c\u811a\u672c\u6587\u4ef6subprocess.call([\"code_compile.sh\"])1subprocess.call([\"code_compile.sh\"])\u8fd0\u884c\u6d4b\u8bd5\u811a\u672c\u5728\u7f16\u8bd1\u5b8c\u6210\u4ee3\u7801\u4e4b\u540e\uff0c\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u8c03\u7528subprocess.Popen\u6765\u521b\u5efa\u5b50\u8fdb\u7a0b\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u7684\u6d4b\u8bd5\u7528\u4f8b\u5df2\u7ecf\u5199\u6210\u4e86\u6d4b\u8bd5\u4f8b\u811a\u672c\uff0c\u6211\u4eec\u5219\u53ef\u4ee5\u7528subprocess.call()\u6765\u6267\u884c\u6d4b\u8bd5\u4f8b\u811a\u672c\u6587\u4ef6\uff0c\u4ee3\u7801\u5b9e\u73b0\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002\u6709\u4e9b\u7cfb\u7edf\u4f1a\u76f4\u63a5\u628a\u8be6\u7ec6\u65e5\u5fd7\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7528\u91cd\u5b9a\u5411\u547d\u4ee4\u201d2>&1\u2033\u628a\u5c4f\u5e55\u8f93\u51fa\u5199\u6587\u4ef6\u3002\u6e05\u53554.\u7528\u91cd\u5b9a\u5411\u547d\u4ee4\u628a\u8f93\u51fa\u5199\u6587\u4ef6ut_cmd='Your_unit_test_command2>&1>%s'%self.debug_log#debug_log\u5b9a\u4e49\u5728__init__\u51fd\u6570\u4e2d\uff0c\u7528\u6765\u5b58\u50a8\u8be6\u7ec6\u65e5\u5fd71ut_cmd='Your_unit_test_command\u00a0\u00a02>&1>%s'%self.debug_log#debug_log\u5b9a\u4e49\u5728__init__\u51fd\u6570\u4e2d\uff0c\u7528\u6765\u5b58\u50a8\u8be6\u7ec6\u65e5\u5fd7\u6d4b\u8bd5\u7ed3\u679c\u5b58\u50a8\u548c\u53d1\u5e03\u2014-XML\u89e3\u6790\u6211\u4eec\u7684\u9879\u76ee\u91c7\u7528\u654f\u6377\u5f00\u53d1\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u53cd\u5e94\u654f\u6377\u5f00\u53d1\u5468\u671f\uff0c\u6211\u4eec\u5e0c\u671b\u5b58\u50a8\u65e5\u5fd7\u7684\u76ee\u5f55\u540d\u4e0d\u4f46\u80fd\u591f\u6307\u660e\u7684\u5177\u4f53\u65e5\u671f\uff0c\u540c\u65f6\u4e5f\u80fd\u53cd\u6620\u654f\u6377\uff08\u8fed\u4ee3\uff09\u5f00\u53d1\u9636\u6bb5\uff0c\u8fd9\u6837\u76f8\u5173\u4eba\u5458\u5728\u67e5\u770b\u76f8\u5e94\u76ee\u5f55\u4e2d\u7684\u65e5\u5fd7\u65f6\uff0c\u80fd\u591f\u6e05\u695a\u7684\u660e\u767d\u65e5\u5fd7\u5b9e\u5728\u5728\u54ea\u4e2a\u8fed\u4ee3\u5468\u671f\u7684\u54ea\u4e00\u5929\u4ea7\u751f\u7684\u3002\u672c\u6587\u4f7f\u7528\u6587\u4ef6summary\u4f5c\u4e3a\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u540e\u751f\u6210\u7684\u6c47\u603b\u65e5\u5fd7\uff0c\u7528\u6587\u4ef6log.txt\u7528\u6765\u5b58\u50a8\u8be6\u7ec6\u65e5\u5fd7\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u5171\u4eab\u76ee\u5f55SharedFiles\u4e2d\u5b58\u50a8\u4e86\u4e00\u4e9b\u5217\u8fed\u4ee3\u5468\u671f\u4e2d\u7684\u65e5\u5fd7\u3002\u6e05\u53555.\u5171\u4eab\u76ee\u5f55\u7ed3\u6784SharedFiles\u251c\u2500\u2500Sprint10-20130823121500\u2502\u251c\u2500\u2500log.txt\u2502\u2514\u2500\u2500summary\u251c\u2500\u2500Sprint10-20130826152715\u2502\u251c\u2500\u2500log.txt\u2502\u2514\u2500\u2500summary\u251c\u2500\u2500Sprint10-2013082816523512345678SharedFiles\u251c\u2500\u2500Sprint10-20130823121500\u2502\u00a0\u00a0\u251c\u2500\u2500log.txt\u2502\u00a0\u00a0\u2514\u2500\u2500summary\u251c\u2500\u2500Sprint10-20130826152715\u2502\u00a0\u00a0\u251c\u2500\u2500log.txt\u2502\u00a0\u00a0\u2514\u2500\u2500summary\u251c\u2500\u2500Sprint10-20130828165235\u4e3a\u4e86\u80fd\u591f\u8ba9\u76ee\u5f55\u540d\u53cd\u6620\u654f\u6377\u5f00\u53d1\u5468\u671f\uff0c\u6211\u4eec\u9700\u8981\u81ea\u5df1\u5b9a\u4e49\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff08txt\u6216xml\u5747\u53ef\uff09\u3002\u7531\u4e8ePython\u5df2\u7ecf\u5f88\u597d\u7684\u652f\u6301\u4e86XML\u89e3\u6790\uff0c\u5e76\u4e14XML\u6587\u4ef6\u4f5c\u4e3a\u914d\u7f6e\u4e5f\u662f\u5f53\u524d\u7684\u6d41\u884c\u8d8b\u52bf\u3002\u672c\u6587\u5c31\u4ee5XML\u89e3\u6790\u4e3a\u4f8b\u8fdb\u884c\u8bf4\u660e\u3002\u672c\u6587\u4f7f\u7528\u7684XML\u6587\u4ef6\u540d\u662fSprint.xml\uff0c\u6e05\u53556\u662f\u8be5xml\u7684\u6982\u8981\u5185\u5bb9\u6e05\u53556.Sprint.xml\u6587\u4ef6\u7ed3\u6784<sprint-schedule><min-sprint>10</min-sprint><max-sprint>20</max-sprint><sprint10>20130814</sprint10><sprint11>20130828</sprint11>\u2026\u2026<sprint19>20131218</sprint19><sprint20>20140101</sprint20></sprint-schedule>123456789<sprint-schedule><min-sprint>10</min-sprint><max-sprint>20</max-sprint><sprint10>20130814</sprint10>\u00a0\u00a0\u00a0\u00a0<sprint11>20130828</sprint11>\u2026\u2026<sprint19>20131218</sprint19><sprint20>20140101</sprint20>\u00a0\u00a0\u00a0\u00a0</sprint-schedule>\u5173\u4e8exml\u89e3\u6790Python\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u6cd5\u3002\u672c\u6587\u91c7\u7528minidom\u5bf9xml\u6587\u4ef6\u8fdb\u884c\u89e3\u6790\uff0c\u6e05\u53557\u662f\u76f8\u5173\u5904\u7406\u4ee3\u7801\u3002\u6e05\u53557.xml\u89e3\u6790\u4ee3\u7801cur_date=time.strftime('%Y%m%d%H%M%S',time.localtime(time.time()))#\u9996\u5148\u83b7\u53d6\u5f53\u524d\u7cfb\u7edf\u65e5\u671fxmldoc=minidom.parse(xml_file)min_num_node=xmldoc.getElementsByTagName('min-sprint')[0]min_num=int(min_num_node.firstChild.data)#\u89e3\u6790\u51fa\u8fed\u4ee3\u5f00\u53d1\u5468\u671f\u7684\u8d77\u59cb\u5468\u671fmax_num_node=xmldoc.getElementsByTagName('max-sprint')[0]max_num=int(max_num_node.firstChild.data)#\u89e3\u6790\u51fa\u8fed\u4ee3\u5f00\u53d1\u5468\u671f\u7684\u7ec8\u6b62\u5468\u671fcur_num=min_num#\u904d\u5386\u6240\u6709\u8fed\u4ee3\u5468\u671f\uff0c\u53d6\u51fa\u5f53\u524d\u8fed\u4ee3\u5468\u671f\u7684\u5f00\u59cb\u65f6\u95f4\u548c\u5f53\u524d\u7684\u7cfb\u7edf\u65f6\u95f4\u5bf9\u6bd4\uff0c\u4ece\u800c\u786e\u5b9a\u5f53\u524d\u4f4d\u4e8e\u54ea\u4e00\u4e2a\u8fed\u4ee3\u5468\u671f\u3002whilecur_num<=max_num:node_name='sprint'+str(cur_num)cur_node=xmldoc.getElementsByTagName(node_name)[0]sprint_date=cur_node.firstChild.dataifsprint_date<cur_date[0:7]:cur_num=cur_num+1else:break12345678910111213141516171819cur_date=time.strftime('%Y%m%d%H%M%S',time.localtime(time.time()))#\u9996\u5148\u83b7\u53d6\u5f53\u524d\u7cfb\u7edf\u65e5\u671fxmldoc=minidom.parse(xml_file)min_num_node=xmldoc.getElementsByTagName('min-sprint')[0]min_num=int(min_num_node.firstChild.data)#\u89e3\u6790\u51fa\u8fed\u4ee3\u5f00\u53d1\u5468\u671f\u7684\u8d77\u59cb\u5468\u671fmax_num_node=xmldoc.getElementsByTagName('max-sprint')[0]max_num=int(max_num_node.firstChild.data)#\u89e3\u6790\u51fa\u8fed\u4ee3\u5f00\u53d1\u5468\u671f\u7684\u7ec8\u6b62\u5468\u671f\u00a0\u00a0\u00a0\u00a0cur_num=min_num#\u904d\u5386\u6240\u6709\u8fed\u4ee3\u5468\u671f\uff0c\u53d6\u51fa\u5f53\u524d\u8fed\u4ee3\u5468\u671f\u7684\u5f00\u59cb\u65f6\u95f4\u548c\u5f53\u524d\u7684\u7cfb\u7edf\u65f6\u95f4\u5bf9\u6bd4\uff0c\u4ece\u800c\u786e\u5b9a\u5f53\u524d\u4f4d\u4e8e\u54ea\u4e00\u4e2a\u8fed\u4ee3\u5468\u671f\u3002whilecur_num<=max_num:node_name='sprint'+str(cur_num)cur_node=xmldoc.getElementsByTagName(node_name)[0]sprint_date=cur_node.firstChild.dataifsprint_date<cur_date[0:7]:cur_num=cur_num+1else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u8fd9\u6837cur_num\u5c31\u6307\u5411\u4e86\u5f53\u524d\u7684\u8fed\u4ee3\u5f00\u53d1\u5468\u671f\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6839\u636e\u5f53\u524d\u65e5\u671f\u548c\u5f00\u53d1\u9636\u6bb5\u521b\u5efa\u5bf9\u5e94\u7684\u65e5\u5fd7\u76ee\u5f55\u540d\u4e86\uff0c\u6700\u540e\u628a\u8fd0\u884c\u7ed3\u679c\u5b58\u50a8\u5230\u8be5\u76ee\u5f55\u4e0b\uff0c\u53c2\u89c1\u6e05\u53558\u5b9e\u73b0\u3002\u6e05\u53558.\u65e5\u5fd7\u5b58\u50a8\u4ee3\u7801log_dir=self.share_dir+'/Sprint'+str(cur_num)+'-'+cur_date#share_dir\u4e3a\u5171\u4eab\u76ee\u5f55\uff0c\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2dos.mkdir(log_dir)os.system('mv%s%s'%(self.debug_fullname,log_dir))#debug_fullname\uff0c\u8be6\u7ec6\u65e5\u5fd7\u6587\u4ef6\u540d\uff08\u542b\u76ee\u5f55\uff09\uff0c\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2dos.system('mv%s%s'%(self.sum_fullname,log_dir))#sum_fullname\uff0c\u6c47\u603b\u65e5\u5fd7\u7684\u5168\u8def\u5f84\u6587\u4ef6\u540d\uff0c\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2d1234log_dir=self.share_dir+'/Sprint'+str(cur_num)+'-'+cur_date#share_dir\u4e3a\u5171\u4eab\u76ee\u5f55\uff0c\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2dos.mkdir(log_dir)os.system('mv%s%s'%(self.debug_fullname,log_dir))#debug_fullname\uff0c\u8be6\u7ec6\u65e5\u5fd7\u6587\u4ef6\u540d\uff08\u542b\u76ee\u5f55\uff09\uff0c\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2d\u00a0\u00a0\u00a0\u00a0os.system('mv%s%s'%(self.sum_fullname,log_dir))#sum_fullname\uff0c\u6c47\u603b\u65e5\u5fd7\u7684\u5168\u8def\u5f84\u6587\u4ef6\u540d\uff0c\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2d\u5173\u4e8e\u6d4b\u8bd5\u7ed3\u679c\u7684\u53d1\u5e03\uff0c\u672c\u6587\u5e76\u6ca1\u6709\u628a\u6d4b\u8bd5\u7ed3\u679c\u4ee5\u81ea\u52a8\u5316\u7684\u5f62\u5f0f\u53d1\u9001\u90ae\u4ef6\uff0c\u800c\u662f\u624b\u52a8\u5728\u6bcf\u4e2a\u5f00\u53d1\u5468\u671f\u7ed3\u675f\u65f6\uff0c\u7fa4\u53d1\u90ae\u4ef6\u7ed9\u76f8\u5173\u4eba\u5458\u3002\u6216\u8005\u5728\u9a8c\u8bc1\u5931\u8d25\u540e\uff0c\u901a\u77e5\u76f8\u5173\u7684\u5f00\u53d1\u4eba\u5458\uff0c\u8fd9\u662f\u7531\u4e8e\u4f5c\u8005\u6240\u5728\u56e2\u961f\u9879\u76ee\u4ee3\u7801\u63d0\u4ea4\u9891\u7387\u4e0d\u662f\u5f88\u9ad8\u3002\u5728\u66f4\u5927\u578b\u7684\u9879\u76ee\u4e2d\uff0c\u5f80\u5f80\u9700\u8981\u589e\u52a0\u81ea\u52a8\u53d1\u9001\u90ae\u4ef6\u7684\u529f\u80fd\uff0c\u76f8\u5173\u5b9e\u73b0\u672c\u6587\u4e0d\u518d\u8d58\u8ff0\u3002\u4e5f\u8c08\u754c\u9762\u8bbe\u8ba1\u2014-getopt\u7684\u4f7f\u7528\u5728\u65e5\u5e38\u7684\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5e76\u4e0d\u662f\u6bcf\u6b21\u90fd\u8981\u8fc1\u51fa\u4ee3\u7801\uff0c\u7f16\u8bd1\u4ee3\u7801\uff0c\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u548c\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\u3002\u8fd9\u6837\u5c31\u9700\u8981\u6211\u4eec\u80fd\u591f\u6709\u9009\u62e9\u7684\u8fd0\u884c\u90e8\u5206\u7a0b\u5e8f\u529f\u80fd\uff0c\u4f8b\u5982\u53ea\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u548c\u6536\u96c6\u7ed3\u679c\u3002\u8fd9\u91cc\u6211\u4eec\u63d0\u4f9b\u4e864\u4e2a\u8fd0\u884c\u9009\u6cfd\uff1a\u9009\u98791\uff1a\u8fc1\u51fa\u4ee3\u7801\u2013>\u7f16\u8bd1\u7248\u672c\u2013>\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u2013>\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\u9009\u98792\uff1a\u66f4\u65b0\u4ee3\u7801\u2013>\u7f16\u8bd1\u7248\u672c\u2013>\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u2013>\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\u9009\u98793\uff1a\u7f16\u8bd1\u7248\u672c\u2013>\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u2013>\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\u9009\u98794\uff1a\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u2013>\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\u5f53\u7136\u6211\u4eec\u8fd8\u9700\u8981\u63d0\u4f9b\u5e2e\u52a9\u4fe1\u606f\uff0c\u4ee5\u65b9\u4fbf\u4e0d\u719f\u6089\u8be5\u811a\u672c\u5b9e\u73b0\u7684\u4eba\u5458\u4f7f\u7528\u3002python\u4e5f\u63d0\u4f9b\u4e86getopt\u6a21\u5757\u8ba9\u6211\u4eec\u8f7b\u677e\u5b9e\u73b0\u4e0a\u8ff0\u529f\u80fd\u3002\u5b9e\u73b0\u4ee3\u7801\u53c2\u89c1\u6e05\u53559\u6e05\u53559.\u547d\u4ee4\u884c\u5199\u89e3\u6790\u4ee3\u7801try:opts,args=getopt.getopt(sys.argv[1:],'bchu',['build','checkout','help','update'])exceptgetopt.error,msg:self.usage()sys.exit(2)build_flag=0#\u6784\u5efa\u9009\u9879foro,ainopts:ifoin('-h','--help'):self.usage()sys.exit()elifoin('-c','--checkout'):print\"\u6267\u884c\u64cd\u4f5c\uff1a\u8fc1\u51fa\u4ee3\u7801-->\u7f16\u8bd1\u7248\u672c-->\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b-->\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\"build_flag=1breakelifoin('-u','--update'):print\"\u6267\u884c\u64cd\u4f5c\uff1a\u66f4\u65b0\u4ee3\u7801-->\u7f16\u8bd1\u7248\u672c-->\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b-->\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\"build_flag=2breakelifoin('-b','--build'):print\"\u6267\u884c\u64cd\u4f5c\uff1a\u7f16\u8bd1\u7248\u672c-->\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b-->\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\"build_flag=3breakelse:self.usage()sys.exit()if(0==build_flag):if2<=len(sys.argv):self.usage()sys.exit()raw_input('\\n\u6309Enter\u952e\u7ee7\u7eed\u3002\u3002\u3002(Ctrl+C\u9000\u51fa)\\t')if(1==build_flag):#\u8fc1\u51fa\u4ee3\u7801\uff0c\u5e76\u7f16\u8bd1\u4ee3\u7801self.checkout_code()self.build_code()elif(2==build_flag):#\u66f4\u65b0\u4ee3\u7801\uff0c\u5e76\u7f16\u8bd1\u4ee3\u7801self.update_code()self.build_code()elif(3==build_flag):#\u7f16\u8bd1\u4ee3\u7801self.build_code()#\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u5e76\u6536\u96c6\u8fd0\u884c\u7ed3\u679cself.set_python()self.run_testsuite()self.store_logs()12345678910111213141516171819202122232425262728293031323334353637383940414243444546try:\u00a0\u00a0opts,args=getopt.getopt(sys.argv[1:],'bchu',['build','checkout','help','update'])\u00a0\u00a0\u00a0\u00a0exceptgetopt.error,msg:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.usage()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.exit(2)\u00a0\u00a0\u00a0\u00a0build_flag=0#\u6784\u5efa\u9009\u9879\u00a0\u00a0\u00a0\u00a0foro,ainopts:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifoin('-h','--help'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.usage()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.exit()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifoin('-c','--checkout'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\"\u6267\u884c\u64cd\u4f5c\uff1a\u8fc1\u51fa\u4ee3\u7801-->\u7f16\u8bd1\u7248\u672c-->\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b-->\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0build_flag=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifoin('-u','--update'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\"\u6267\u884c\u64cd\u4f5c\uff1a\u66f4\u65b0\u4ee3\u7801-->\u7f16\u8bd1\u7248\u672c-->\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b-->\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0build_flag=2\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifoin('-b','--build'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\"\u6267\u884c\u64cd\u4f5c\uff1a\u7f16\u8bd1\u7248\u672c-->\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b-->\u6536\u96c6\u6d4b\u8bd5\u7ed3\u679c\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0build_flag=3\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.usage()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.exit()\u00a0\u00a0\u00a0\u00a0if(0==build_flag):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if2<=len(sys.argv):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.usage()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.exit()\u00a0\u00a0\u00a0\u00a0raw_input('\\n\u6309Enter\u952e\u7ee7\u7eed\u3002\u3002\u3002(Ctrl+C\u9000\u51fa)\\t')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(1==build_flag):#\u8fc1\u51fa\u4ee3\u7801\uff0c\u5e76\u7f16\u8bd1\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.checkout_code()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.build_code()\u00a0\u00a0\u00a0\u00a0elif(2==build_flag):#\u66f4\u65b0\u4ee3\u7801\uff0c\u5e76\u7f16\u8bd1\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.update_code()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.build_code()\u00a0\u00a0\u00a0\u00a0elif(3==build_flag):#\u7f16\u8bd1\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.build_code()\u00a0\u00a0\u00a0\u00a0#\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u5e76\u6536\u96c6\u8fd0\u884c\u7ed3\u679c\u00a0\u00a0\u00a0\u00a0self.set_python()\u00a0\u00a0\u00a0\u00a0self.run_testsuite()\u00a0\u00a0\u00a0\u00a0self.store_logs()\u5982\u679c\u6211\u4eec\u5728\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u60f3\u4e2d\u65ad\uff08\u5982\u5229\u7528Ctrl+C\uff09\u4e00\u952e\u56de\u5f52\u6d4b\u8bd5\u8fdb\u7a0b\u7684\u6267\u884c\u65f6\uff0c\u6709\u65f6\u6211\u4eec\u4f1a\u53d1\u73b0\u867d\u7136\u4e3b\u8fdb\u7a0b\u5df2\u7ecf\u88ab\u7ec8\u6b62\uff0c\u4f46\u5b50\u8fdb\u7a0b\u4ecd\u5728\u8fd0\u884c\u3002\u6211\u4eec\u80fd\u5426\u5728\u4e2d\u65ad\u4e3b\u8fdb\u7a0b\u7684\u540c\u65f6\u4e5f\u4e2d\u65ad\u5b50\u8fdb\u7a0b\u5462\uff1f\u7b54\u6848\u5f53\u7136\u662f\u80af\u5b9a\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u6355\u83b7\u4fe1\u53f7\uff08\u5982\u6355\u83b7Ctrl+C\u4ea7\u751f\u7684\u4e2d\u65ad\u4fe1\u53f7\uff09\uff0c\u7136\u540e\u5728\u663e\u5f0f\u7ec8\u6b62\u5bf9\u5e94\u7684\u5b50\u8fdb\u7a0b\u3002\u8fd9\u91cc\u5c31\u9700\u8981\u6211\u4eec\u5728\u521b\u5efa\u5b50\u8fdb\u7a0b\u7684\u65f6\u5019\uff0c\u5148\u4fdd\u5b58\u5b50\u8fdb\u7a0bID\uff0c\u5f53\u7136\u628a\u5b50\u8fdb\u7a0bID\u4fdd\u5b58\u5230\u521d\u59cb\u5316\u51fd\u6570\u4e2d\uff0c\u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\uff0c\u6e05\u535510\u662f\u76f8\u5173\u5b9e\u73b0\u3002\u6e05\u535510.\u4fe1\u53f7\u5904\u7406\u4ee3\u7801#\u7ec8\u6b62\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884cdefhandler(self,signum,frame):if(-1!=self.subproc_id):#subproc_id\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2d\uff0c\u7528\u6765\u5b58\u50a8\u5f53\u524d\u5b50\u8fdb\u7a0b\u7684IDos.killpg(self.subproc_id,signal.SIGINT)sys.exit(-1)12345#\u7ec8\u6b62\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884cdefhandler(self,signum,frame):\u00a0\u00a0\u00a0\u00a0if(-1!=self.subproc_id):#subproc_id\u5b9a\u4e49\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2d\uff0c\u7528\u6765\u5b58\u50a8\u5f53\u524d\u5b50\u8fdb\u7a0b\u7684ID\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0os.killpg(self.subproc_id,signal.SIGINT)\u00a0\u00a0\u00a0\u00a0sys.exit(-1)\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u5728\u521d\u59cb\u5316\u51fd\u6570\u4e2d\u6ce8\u518c\u8981\u6355\u83b7\u7684\u4fe1\u53f7\uff0c\u5e76\u4e14\u521b\u5efa\u6210\u5458\u53d8\u91cf\u7528\u6765\u4fdd\u5b58\u5b50\u8fdb\u7a0b\u7684ID\uff0c\u8be6\u7ec6\u5b9e\u73b0\u8bf7\u53c2\u89c1\u6e05\u535511\u3002\u57fa\u4e8e\u5bf9\u8c61\u7684\u8bbe\u8ba1\u2014-class\u7684\u4f7f\u7528\u6700\u540e\u7ec8\u4e8e\u8f6e\u5230class\u767b\u573a\u4e86\uff0c\u63d0\u5230class\u6211\u4eec\u5c31\u4e0d\u80fd\u4e0d\u8c08\u6784\u9020\u51fd\u6570\uff08\u521d\u59cb\u5316\u51fd\u6570\uff09\u548c\u6790\u6784\u51fd\u6570\u3002\u4e4b\u524d\u6211\u4eec\u591a\u6b21\u63d0\u5230\u521d\u59cb\u5316\u51fd\u6570\uff0c\u521d\u59cb\u5316\u51fd\u6570\u5141\u8bb8\u6211\u4eec\u5b9a\u4e49\u4e00\u4e9b\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u5728\u6574\u4e2a\u7c7b\u5bf9\u8c61\u7684\u751f\u5b58\u5468\u671f\u5185\u5747\u6709\u6548\u3002\u7531\u4e8e\u672c\u6587\u6ca1\u6709\u5411\u7cfb\u7edf\u7533\u8bf7\u8d44\u6e90\uff0c\u5c31\u518d\u4e0d\u5b9a\u4e49\u6790\u6784\u51fd\u6570\u4e86\u3002\u6e05\u535511.\u521d\u59cb\u5316\u5904\u7406\u4ee3\u7801def__init__(self):signal.signal(signal.SIGINT,self.handler)#\u6ce8\u518c\u9700\u8981\u6355\u83b7\u7684\u4fe1\u53f7\u91cfself.myafs_dir=os.getenv('myafs')self.subproc_id=-1#\u5b50\u8fdb\u7a0bID\uff0c\u7528\u6765\u5728\u7ec8\u6b62\u4e3b\u8fdb\u7a0b\u65f6\u4e5f\u540c\u65f6\u7ec8\u6b62\u5b50\u8fdb\u7a0bself.debug_log='log.txt'#\u5b58\u50a8\u8be6\u7ec6\u8fd0\u884c\u65e5\u5fd7\u7684\u6587\u4ef6\u540dself.debug_fullname=os.getcwd()+os.sep+self.debug_log#\u5168\u8def\u5f84\u6587\u4ef6\u540d\uff08\u5047\u8bbe\u4ea7\u751f\u5728\u8be5\u76ee\u5f55\u4e0b\uff09self.sum_log='summary'#\u5b58\u50a8\u6c47\u603b\u65e5\u5fd7\u7684\u6587\u4ef6\u540dself.sum_fullname=os.getcwd()+os.sep+self.sum_log#\u5168\u8def\u5f84\u6587\u4ef6\u540d\uff08\u5047\u8bbe\u4ea7\u751f\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff09self.share_dir=self.utafs_dir+'/SharedFiles'#\u5171\u4eab\u76ee\u5f55\u6587\u4ef6\u540d123456789def__init__(self):\u00a0\u00a0\u00a0\u00a0signal.signal(signal.SIGINT,self.handler)#\u6ce8\u518c\u9700\u8981\u6355\u83b7\u7684\u4fe1\u53f7\u91cf\u00a0\u00a0\u00a0\u00a0self.myafs_dir=os.getenv('myafs')\u00a0\u00a0\u00a0\u00a0self.subproc_id=-1#\u5b50\u8fdb\u7a0bID\uff0c\u7528\u6765\u5728\u7ec8\u6b62\u4e3b\u8fdb\u7a0b\u65f6\u4e5f\u540c\u65f6\u7ec8\u6b62\u5b50\u8fdb\u7a0b\u00a0\u00a0\u00a0\u00a0self.debug_log='log.txt'#\u5b58\u50a8\u8be6\u7ec6\u8fd0\u884c\u65e5\u5fd7\u7684\u6587\u4ef6\u540d\u00a0\u00a0\u00a0\u00a0self.debug_fullname=os.getcwd()+os.sep+self.debug_log#\u5168\u8def\u5f84\u6587\u4ef6\u540d\uff08\u5047\u8bbe\u4ea7\u751f\u5728\u8be5\u76ee\u5f55\u4e0b\uff09\u00a0\u00a0\u00a0\u00a0self.sum_log='summary'#\u5b58\u50a8\u6c47\u603b\u65e5\u5fd7\u7684\u6587\u4ef6\u540d\u00a0\u00a0\u00a0\u00a0self.sum_fullname=os.getcwd()+os.sep+self.sum_log#\u5168\u8def\u5f84\u6587\u4ef6\u540d\uff08\u5047\u8bbe\u4ea7\u751f\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff09\u00a0\u00a0\u00a0\u00a0self.share_dir=self.utafs_dir+'/SharedFiles'#\u5171\u4eab\u76ee\u5f55\u6587\u4ef6\u540d\u901a\u5e38\u6211\u4eec\u4e0d\u9700\u8981\u592a\u5173\u6ce8\u8bbe\u8ba1\u98ce\u683c\uff0c\u53ea\u8981Python\u811a\u672c\u80fd\u5b8c\u6210\u6211\u4eec\u7684\u6d4b\u8bd5\u8981\u6c42\u5373\u53ef\u3002\u5bf9\u4e8e\u8f83\u5c0f\u7684\u811a\u672c\uff0c\u51e0\u6761Python\u6307\u4ee4\u987a\u5e8f\u6267\u884c\u5373\u53ef\u3002\u4e3a\u4e86\u6a21\u5757\u529f\u80fd\u590d\u7528\u548c\u53ef\u8bfb\u6027\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u628a\u529f\u80fd\u6a21\u5757\u5c01\u88c5\u6210\u51fd\u6570\u3002\u672c\u6587\u5c06\u5b9e\u73b0\u7684\u6240\u6709\u51fd\u6570\u90fd\u5c01\u88c5\u5230\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u4f7f\u5f97\u8be5\u811a\u672c\u66f4\u52a0\u4e00\u4f53\u5316\u3002\u6e05\u535512.class\u6846\u67b6\u7ed3\u6784\u4ee3\u7801classCOneClickRegTest:#\u8bbe\u5b9a\u4e00\u4e9b\u7ecf\u5e38\u4f7f\u7528\u7684\u53d8\u91cf\uff0c\u5982\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff0c\u65e5\u5fd7\u540d\u79f0\u3001\u5b58\u50a8\u8def\u5f84\u7b49def__init__(self):#\u8bbe\u5b9apython\u73af\u5883\u53d8\u91cf\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6defset_python(self):#\u66f4\u65b0\u4ee3\u7801\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6defupdate_code(self):#\u8fc1\u51fa\u4ee3\u7801\uff0c\u5b9e\u73b0\u53c2\u89c1\u7b2c2\u7ae0\u4ee3\u7801defcheckout_code(self):#\u7f16\u8bd1\u7248\u672c\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u53551\u4ee3\u7801defbuild_code(self):#\u8fd0\u884c\u6d4b\u8bd5\u96c6\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6defrun_testsuite(self):#\u5b58\u50a8\u8fd0\u884c\u7ed3\u679c\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u53557\u548c\u6e05\u53558\u4ee3\u7801defstore_logs(self):#\u4fe1\u53f7\u5904\u7406\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u535510\u4ee3\u7801defhandler(self,signum,frame):#\u811a\u672c\u4f7f\u7528\u8bf4\u660e\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6defusage(self):#\u547d\u4ee4\u884c\u89e3\u6790\u4ee5\u53ca\u6267\u884c\u5bf9\u5e94\u7684\u529f\u80fd\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u53559\u4ee3\u7801defmain(self):123456789101112131415161718192021222324252627282930classCOneClickRegTest:\u00a0\u00a0\u00a0\u00a0#\u8bbe\u5b9a\u4e00\u4e9b\u7ecf\u5e38\u4f7f\u7528\u7684\u53d8\u91cf\uff0c\u5982\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff0c\u65e5\u5fd7\u540d\u79f0\u3001\u5b58\u50a8\u8def\u5f84\u7b49\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0#\u8bbe\u5b9apython\u73af\u5883\u53d8\u91cf\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6\u00a0\u00a0\u00a0\u00a0defset_python(self):\u00a0\u00a0\u00a0\u00a0#\u66f4\u65b0\u4ee3\u7801\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6\u00a0\u00a0\u00a0\u00a0defupdate_code(self):\u00a0\u00a0\u00a0\u00a0#\u8fc1\u51fa\u4ee3\u7801\uff0c\u5b9e\u73b0\u53c2\u89c1\u7b2c2\u7ae0\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0defcheckout_code(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7f16\u8bd1\u7248\u672c\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u53551\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0defbuild_code(self):\u00a0\u00a0\u00a0\u00a0#\u8fd0\u884c\u6d4b\u8bd5\u96c6\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6\u00a0\u00a0\u00a0\u00a0defrun_testsuite(self):\u00a0\u00a0\u00a0\u00a0#\u5b58\u50a8\u8fd0\u884c\u7ed3\u679c\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u53557\u548c\u6e05\u53558\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0defstore_logs(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4fe1\u53f7\u5904\u7406\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u535510\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0defhandler(self,signum,frame):\u00a0\u00a0\u00a0\u00a0#\u811a\u672c\u4f7f\u7528\u8bf4\u660e\uff0c\u5b9e\u73b0\u53c2\u89c1\u4ee3\u7801\u6587\u4ef6\u00a0\u00a0\u00a0\u00a0defusage(self):\u00a0\u00a0\u00a0\u00a0#\u547d\u4ee4\u884c\u89e3\u6790\u4ee5\u53ca\u6267\u884c\u5bf9\u5e94\u7684\u529f\u80fd\uff0c\u5b9e\u73b0\u53c2\u89c1\u6e05\u53559\u4ee3\u7801\u00a0\u00a0\u00a0\u00a0defmain(self):\u7ed3\u675f\u8bedPython\u8bed\u8a00\u662f\u4e00\u4e2a\u6613\u5b66\u6613\u7528\u7684\u811a\u672c\u8bed\u8a00\uff0c\u7b14\u8005\u6ca1\u6709\u591a\u4e45\u7684Python\u5f00\u53d1\u7ecf\u9a8c\uff0c\u4e0d\u8fc7\u5176\u4ed6\u8bed\u8a00\u6709\u7684\u529f\u80fd\u5728Python\u4e2d\u5927\u90fd\u53ef\u4ee5\u627e\u5230\u5bf9\u5e94\u7684\u5b9e\u73b0\uff0c\u8fd9\u4e5f\u662f\u7b14\u8005\u80fd\u591f\u5728\u5f88\u77ed\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u8be5\u6d4b\u8bd5\u811a\u672c\u7684\u539f\u56e0\u3002\u56e0\u6b64\uff0c\u7b14\u8005\u628a\u8be5\u8bed\u8a00\u548c\u4f7f\u7528\u8be5\u8bed\u8a00\u5b8c\u6210\u4e00\u952e\u56de\u5f52\u6d4b\u8bd5\u4ecb\u7ecd\u7ed9\u5927\u5bb6\uff0c\u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u6240\u5e2e\u52a9\u3002\u6b63\u50cf\u7b14\u8005\u8bf4\u7684\u5176\u4ed6\u8bed\u8a00\u6709\u7684\u529f\u80fd\u5728Python\u4e2d\u5927\u90fd\u53ef\u4ee5\u627e\u5230\u5bf9\u5e94\u7684\u5b9e\u73b0\uff0c\u540c\u6837\uff0c\u5982\u679c\u5927\u5bb6\u5bf9\u67d0\u4e00\u79cd\u7279\u5b9a\u7684\u811a\u672c\u8bed\u8a00\u6216\u8005\u5f00\u53d1\u8bed\u8a00\u7279\u522b\u719f\u6089\uff0c\u4e5f\u5b8c\u5168\u53ef\u4ee5\u91c7\u7528\u6240\u719f\u6089\u7684\u8bed\u8a00\u6765\u5b8c\u6210\u4e00\u952e\u56de\u5f52\u6d4b\u8bd5\u7684\u5de5\u4f5c\u3002\u4e0b\u8f7d\u8d44\u6e90\u793a\u4f8b\u4ee3\u7801(sample.zip|3KB)\u76f8\u5173\u4e3b\u9898Python\u7f51\u7ad9\u662f\u5173\u4e8ePython\u6240\u6709\u5185\u5bb9\u7684\u8d77\u59cb\u70b9\uff0c\u5176\u4e2d\u5305\u62ec\u6b63\u5f0fPython\u6587\u6863\u7b80\u660ePython\u6559\u7a0b\u4e3a\u201dAByteofPython\u201d\u7684\u7b80\u4f53\u4e2d\u6587\u8bd1\u672c\uff0c\u65e0\u8bba\u60a8\u521a\u63a5\u89e6\u7535\u8111\u8fd8\u662f\u4e00\u4e2a\u6709\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458\uff0c\u672c\u6559\u7a0b\u90fd\u6709\u52a9\u60a8\u5b66\u4e60\u4f7f\u7528Python\u8bed\u8a00\u3002Python\u6280\u672f\u624b\u518c\uff08\u7b2c2\u7248\uff09\u662f\u4e00\u672c\u5168\u9762\u4ecb\u7ecd\u6709\u5173Python\u8bed\u8a00\u548cPython\u7a0b\u5e8f\u5f00\u53d1\u4e13\u4e1a\u77e5\u8bc6\u7684\u53c2\u8003\u624b\u518c\u3002\u5728PyUnit\u7f51\u7ad9\u53ef\u4ee5\u4e0b\u8f7d\u5230\u6700\u65b0\u7684PyUnit\u8f6f\u4ef6\u5305\uff0c\u4ee5\u53ca\u8be6\u7ec6\u7684\u7528\u6237\u624b\u518c\u3002\u5728developerWorksLinux\u4e13\u533a\u5bfb\u627e\u4e3aLinux\u5f00\u53d1\u4eba\u5458\uff08\u5305\u62ecLinux\u65b0\u624b\u5165\u95e8\uff09\u51c6\u5907\u7684\u66f4\u591a\u53c2\u8003\u8d44\u6599\uff0c\u67e5\u9605\u6211\u4eec\u6700\u53d7\u6b22\u8fce\u7684\u6587\u7ae0\u548c\u6559\u7a0b\u3002\u5728developerWorks\u4e0a\u67e5\u9605\u6240\u6709Linux\u6280\u5de7\u548cLinux\u6559\u7a0b\u30021\u8d5e\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u8d70\u8fd1 Python (\u7c7b\u6bd4 JS )"], "art_url": ["http://python.jobbole.com/88850/"], "art_create_time": ["2017/11/11"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/11/c60f2447af38c6a464404d473257881e.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u7267\u4e91\u4e91\u00a0\u00a0\u00a0Python\u662f\u4e00\u95e8\u8fd0\u7528\u5f88\u5e7f\u6cdb\u7684\u8bed\u8a00\uff0c\u81ea\u52a8\u5316\u811a\u672c\u3001\u722c\u866b\uff0c\u751a\u81f3\u5728\u6df1\u5ea6\u5b66\u4e60\u9886\u57df\u4e5f\u90fd\u6709Python\u7684\u8eab\u5f71\u3002\u4f5c\u4e3a\u4e00\u540d\u524d\u7aef\u5f00\u53d1\u8005\uff0c\u4e5f\u4e86\u89e3ES6\u4e2d\u7684\u5f88\u591a\u7279\u6027\u501f\u9274\u81eaPython(\u6bd4\u5982\u9ed8\u8ba4\u53c2\u6570\u3001\u89e3\u6784\u8d4b\u503c\u3001Decorator\u7b49)\uff0c\u540c\u65f6\u672c\u6587\u4f1a\u5bf9Python\u7684\u4e00\u4e9b\u7528\u6cd5\u4e0eJS\u8fdb\u884c\u7c7b\u6bd4\u3002\u4e0d\u7ba1\u662f\u63d0\u5347\u81ea\u5df1\u7684\u77e5\u8bc6\u5e7f\u5ea6\uff0c\u8fd8\u662f\u66f4\u597d\u5730\u8fce\u63a5AI\u65f6\u4ee3\uff0cPython\u90fd\u662f\u4e00\u95e8\u503c\u5f97\u5b66\u4e60\u7684\u8bed\u8a00\u3002\u6570\u636e\u7c7b\u578b\u5728Python\u4e2d\uff0c\u6700\u5e38\u7528\u7684\u80fd\u591f\u76f4\u63a5\u5904\u7406\u7684\u6570\u636e\u7c7b\u578b\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a\u6570\u5b57[\u6574\u6570(int)\u3001\u6d6e\u70b9\u578b(float)\u3001\u957f\u6574\u578b(long)\u3001\u590d\u6570(complex)]\u5b57\u7b26\u4e32(str)\u5e03\u5c14\u503c(bool)\u7a7a\u503c(None)\u9664\u6b64\u4e4b\u5916\uff0cPython\u8fd8\u63d0\u4f9b\u4e86\u5217\u8868\uff08list\uff09\u3001\u5b57\u5178\uff08dict\uff09\u7b49\u591a\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u8fd9\u5728\u4e0b\u6587\u4e2d\u4f1a\u4ecb\u7ecd\u3002\u7c7b\u578b\u8f6c\u6362\u4e0e\u7c7b\u578b\u5224\u65ad\u4e0eJS\u5341\u5206\u7c7b\u4f3c\uff0cpython\u4e5f\u80fd\u5b9e\u73b0\u4e0d\u540c\u6570\u636e\u7c7b\u578b\u95f4\u7684\u5f3a\u5236\u4e0e\u9690\u5f0f\u8f6c\u6362\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1a\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362:Pythonint('3')#3str(3.14)#'3.14'float('3.14')#3.14#\u533a\u522b\u4e8eJS\u53ea\u6709Number\u4e00\u79cd\u7c7b\u578b\uff0cPython\u4e2d\u6570\u5b57\u4e2d\u7684\u4e0d\u540c\u7c7b\u578b\u4e5f\u80fd\u76f8\u4e92\u5f3a\u5236\u8f6c\u6362float(3)#3.0bool(3)#Truebool(0)#False1234567int('3')#3str(3.14)#'3.14'float('3.14')#3.14#\u533a\u522b\u4e8eJS\u53ea\u6709Number\u4e00\u79cd\u7c7b\u578b\uff0cPython\u4e2d\u6570\u5b57\u4e2d\u7684\u4e0d\u540c\u7c7b\u578b\u4e5f\u80fd\u76f8\u4e92\u5f3a\u5236\u8f6c\u6362float(3)#3.0bool(3)#Truebool(0)#False\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362:Python1+1.0#2.01+False#11.0+True#2.0#\u533a\u522b\u4e8eJS\u7684String+Number=String,py\u4e2dstr+int\u4f1a\u62a5\u95191+'1'#TypeError:cannotconcatenate'str'and'int'objects123451+1.0#2.01+False#11.0+True#2.0#\u533a\u522b\u4e8eJS\u7684String+Number=String,py\u4e2dstr+int\u4f1a\u62a5\u95191+'1'#TypeError:cannotconcatenate'str'and'int'objects\u6b64\u5916\u5199\u4ee3\u7801\u7684\u65f6\u5019\u7ecf\u5e38\u4f1a\u9700\u8981\u5224\u65ad\u503c\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528python\u63d0\u4f9b\u7684type()\u51fd\u6570\u83b7\u53d6\u53d8\u91cf\u7684\u7c7b\u578b\uff0c\u6216\u8005\u4f7f\u7528isinstance(x,type)\u6765\u5224\u65adx\u662f\u5426\u5c5e\u4e8e\u76f8\u5e94\u7684type\u7c7b\u578b\u3002Pythontype(1.3)==float#Trueisinstance('a',str)#Trueisinstance(1.3,int)#Falseisinstance(True,bool)#Trueisinstance([],list)#Trueisinstance({},dict)#True123456type(1.3)==float#Trueisinstance('a',str)#Trueisinstance(1.3,int)#Falseisinstance(True,bool)#Trueisinstance([],list)#Trueisinstance({},dict)#True\u6709\u5e8f\u96c6\u5408\u7c7b\u578b\u96c6\u5408\u662f\u6307\u5305\u542b\u4e00\u7ec4\u5143\u7d20\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6709\u5e8f\u96c6\u5408\u5373\u96c6\u5408\u91cc\u9762\u7684\u5143\u7d20\u662f\u662f\u6309\u7167\u987a\u5e8f\u6392\u5217\u7684\uff0cPython\u4e2d\u7684\u6709\u5e8f\u96c6\u5408\u5927\u6982\u6709\u4ee5\u4e0b\u51e0\u7c7b\uff1alist,tuple,str,unicode\u3002list\u7c7b\u578bPython\u4e2dList\u7c7b\u578b\u7c7b\u4f3c\u4e8eJS\u4e2d\u7684Array,PythonL=[1,2,3]printL[-1]#'3'L.append(4)#\u672b\u5c3e\u6dfb\u52a0\u5143\u7d20printL#[1,2,3,4]L.insert(0,'hi')#\u6307\u5b9a\u7d22\u5f15\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20printL#['hi',1,2,3,4]L.pop()#\u672b\u5c3e\u79fb\u9664\u5143\u7d20L.pop(2)??????2???printL#['hi',1,2,3]1234567891011L=[1,2,3]printL[-1]#'3'\u00a0L.append(4)#\u672b\u5c3e\u6dfb\u52a0\u5143\u7d20printL#[1,2,3,4]\u00a0L.insert(0,'hi')#\u6307\u5b9a\u7d22\u5f15\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20printL#['hi',1,2,3,4]\u00a0L.pop()#\u672b\u5c3e\u79fb\u9664\u5143\u7d20L.pop(2)??????2???printL#['hi',1,2,3]tuple\u7c7b\u578btuple\u7c7b\u578b\u662f\u53e6\u4e00\u79cd\u6709\u5e8f\u7684\u5217\u8868\uff0c\u4e2d\u6587\u7ffb\u8bd1\u4e3a\u201c\u5143\u7ec4\u201d\u3002tuple\u548clist\u975e\u5e38\u7c7b\u4f3c\uff0c\u4f46\u662f\uff0ctuple\u4e00\u65e6\u521b\u5efa\u5b8c\u6bd5\uff0c\u5c31\u4e0d\u80fd\u4fee\u6539\u4e86\u3002Pythont=(1,2,3)printt[0]#1t[0]=11#TypeError:'tuple'objectdoesnotsupportitemassignmentt=(1)printt#1t\u7684\u7ed3\u679c\u662f\u6574\u65701t=(1,)#\u4e3a\u4e86\u907f\u514d\u51fa\u73b0\u5982\u4e0a\u6709\u6b67\u4e49\u7684\u5355\u5143\u7d20tuple\uff0c\u6240\u4ee5Python\u89c4\u5b9a\uff0c\u5355\u5143\u7d20tuple\u8981\u591a\u52a0\u4e00\u4e2a\u9017\u53f7\u201c,\u201dprintt#(1,)123456789t=(1,2,3)printt[0]#1t[0]=11#TypeError:'tuple'objectdoesnotsupportitemassignment\u00a0t=(1)printt#1\u00a0\u00a0t\u7684\u7ed3\u679c\u662f\u6574\u65701\u00a0t=(1,)#\u4e3a\u4e86\u907f\u514d\u51fa\u73b0\u5982\u4e0a\u6709\u6b67\u4e49\u7684\u5355\u5143\u7d20tuple\uff0c\u6240\u4ee5Python\u89c4\u5b9a\uff0c\u5355\u5143\u7d20tuple\u8981\u591a\u52a0\u4e00\u4e2a\u9017\u53f7\u201c,\u201dprintt#(1,)\u65e0\u5e8f\u96c6\u5408\u7c7b\u578bdict\u7c7b\u578bPython\u4e2d\u7684dict\u7c7b\u578b\u7c7b\u4f3c\u4e8eJS\u4e2d\u7684{}(\u6700\u5927\u7684\u4e0d\u540c\u662f\u5b83\u662f\u6ca1\u6709\u987a\u5e8f\u7684),\u5b83\u6709\u5982\u4e0b\u7279\u70b9:\u67e5\u627e\u901f\u5ea6\u5feb(\u65e0\u8bbadict\u670910\u4e2a\u5143\u7d20\u8fd8\u662f10\u4e07\u4e2a\u5143\u7d20\uff0c\u67e5\u627e\u901f\u5ea6\u90fd\u4e00\u6837)\u5360\u7528\u5185\u5b58\u5927(\u4e0elist\u7c7b\u578b\u76f8\u53cd)dict\u4e2d\u7684key\u4e0d\u80fd\u91cd\u590ddict\u4e2d\u5b58\u50a8\u7684key-value\u5e8f\u5bf9\u662f\u6ca1\u6709\u987a\u5e8f\u7684Pythond={'a':1,'b':2,'c':3}printd#{'a':1,'c':3,'b':2}\u53ef\u4ee5\u770b\u51fa\u6253\u5370\u51fa\u7684\u5e8f\u5bf9\u6ca1\u6709\u6309\u6b63\u5e38\u7684\u987a\u5e8f\u6253\u51fa#\u904d\u5386dictforkey,valueind.items():print('%s:%s'%(key,value))#a:1#c:3#b:21234567891011121314d={\u00a0\u00a0\u00a0\u00a0'a':1,\u00a0\u00a0\u00a0\u00a0'b':2,\u00a0\u00a0\u00a0\u00a0'c':3}\u00a0printd#{'a':1,'c':3,'b':2}\u00a0\u00a0\u53ef\u4ee5\u770b\u51fa\u6253\u5370\u51fa\u7684\u5e8f\u5bf9\u6ca1\u6709\u6309\u6b63\u5e38\u7684\u987a\u5e8f\u6253\u51fa\u00a0#\u904d\u5386dictforkey,valueind.items():\u00a0\u00a0\u00a0\u00a0print('%s:%s'%(key,value))#a:1#c:3#b:2set\u7c7b\u578b\u6709\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u60f3\u8981dict\u7684key\uff0c\u4e0d\u5173\u5fc3key\u5bf9\u5e94\u7684value\uff0c\u800c\u4e14\u8981\u4fdd\u8bc1\u8fd9\u4e2a\u96c6\u5408\u7684\u5143\u7d20\u4e0d\u4f1a\u91cd\u590d\uff0c\u8fd9\u65f6\uff0cset\u7c7b\u578b\u5c31\u6d3e\u4e0a\u7528\u573a\u4e86\u3002set\u7c7b\u578b\u6709\u5982\u4e0b\u7279\u70b9\uff1aset\u5b58\u50a8\u7684\u5143\u7d20\u548cdict\u7684key\u7c7b\u4f3c\uff0c\u5fc5\u987b\u662f\u4e0d\u53d8\u5bf9\u8c61set\u5b58\u50a8\u7684\u5143\u7d20\u4e5f\u662f\u6ca1\u6709\u987a\u5e8f\u7684Pythons=set(['A','B','C','C'])prints#set(['A','C','B'])s.add('D')prints#set(['A','C','B','D'])s.remove('D')prints#set(['A','C','B'])12345678s=set(['A','B','C','C'])prints#set(['A','C','B'])\u00a0s.add('D')prints#set(['A','C','B','D'])\u00a0s.remove('D')prints#set(['A','C','B'])Python\u4e2d\u7684\u8fed\u4ee3\u5728\u4ecb\u7ecd\u5b8cPython\u4e2d\u7684\u6709\u5e8f\u96c6\u5408\u548c\u65e0\u5e8f\u96c6\u5408\u7c7b\u578b\u540e\uff0c\u5fc5\u7136\u5b58\u5728\u904d\u5386\u96c6\u5408\u7684for\u5faa\u73af\u3002\u4f46\u662f\u548c\u5176\u5b83\u8bed\u8a00\u7684\u6807\u51c6for\u5faa\u73af\u4e0d\u540c\uff0cPython\u4e2d\u7684\u6240\u6709\u8fed\u4ee3\u662f\u901a\u8fc7for\u2026in\u6765\u5b8c\u6210\u7684\u3002\u4ee5\u4e0b\u7ed9\u51fa\u4e00\u4e9b\u5e38\u7528\u7684\u8fed\u4ee3demos:\u7d22\u5f15\u8fed\u4ee3\uff1aPythonL=['apple','banana','orange']forindex,nameinenumerate(L):#enumerate()\u51fd\u6570\u628a['apple','banana','orange']\u53d8\u6210\u4e86\u7c7b\u4f3c[(0,'apple),(1,'banana'),(2,'orange')]\u7684\u5f62\u5f0fprintindex,'-',name#0-apple#1-banana#2-orange1234567L=['apple','banana','orange']forindex,nameinenumerate(L):\u00a0\u00a0#enumerate()\u51fd\u6570\u628a['apple','banana','orange']\u53d8\u6210\u4e86\u7c7b\u4f3c[(0,'apple),(1,'banana'),(2,'orange')]\u7684\u5f62\u5f0f\u00a0\u00a0\u00a0\u00a0printindex,'-',name\u00a0#0-apple#1-banana#2-orange\u8fed\u4ee3dict\u7684value:Pythond={'apple':6,'banana':8,'orange':5}printd.values()#[6,8,5]forvind.values()printv#6#8#51234567d={'apple':6,'banana':8,'orange':5}printd.values()#[6,8,5]forvind.values()\u00a0\u00a0\u00a0\u00a0printv#6#8#5\u8fed\u4ee3dict\u7684key\u548cvalue:Pythond={'apple':6,'banana':8,'orange':5}forkey,valueind.items()printkey,':',value#apple:6#banana:8#orange:5123456d={'apple':6,'banana':8,'orange':5}forkey,valueind.items()\u00a0\u00a0\u00a0\u00a0printkey,':',value#apple:6#banana:8#orange:5\u5207\u7247\u64cd\u4f5c\u7b26Python\u63d0\u4f9b\u7684\u5207\u7247\u64cd\u4f5c\u7b26\u7c7b\u4f3c\u4e8eJS\u63d0\u4f9b\u7684\u539f\u751f\u51fd\u6570slice()\u3002\u6709\u4e86\u5207\u7247\u64cd\u4f5c\u7b26\uff0c\u5927\u5927\u7b80\u5316\u4e86\u4e00\u4e9b\u539f\u6765\u5f97\u7528\u5faa\u73af\u7684\u64cd\u4f5c\u3002PythonL=['apple','banana','orange','pear']L[0:2]#['apple','banana']\u53d6\u524d2\u4e2a\u5143\u7d20L[:2]#['apple','banana']\u5982\u679c\u7b2c\u4e00\u4e2a\u7d22\u5f15\u662f0\uff0c\u53ef\u4ee5\u7701\u7565L[:]#['apple','banana','orange','pear']\u53ea\u7528\u4e00\u4e2a:\uff0c\u8868\u793a\u4ece\u5934\u5230\u5c3eL[::2]#['apple','orange']\u7b2c\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u6bcfN\u4e2a\u53d6\u4e00\u4e2a\uff0c\u8fd9\u91cc\u8868\u793a\u4ece\u5934\u5f00\u59cb\uff0c\u6bcf2\u4e2a\u5143\u7d20\u53d6\u51fa\u4e00\u4e2a\u676512345L=['apple','banana','orange','pear']L[0:2]#['apple','banana']\u53d6\u524d2\u4e2a\u5143\u7d20L[:2]#['apple','banana']\u5982\u679c\u7b2c\u4e00\u4e2a\u7d22\u5f15\u662f0\uff0c\u53ef\u4ee5\u7701\u7565L[:]#['apple','banana','orange','pear']\u53ea\u7528\u4e00\u4e2a:\uff0c\u8868\u793a\u4ece\u5934\u5230\u5c3eL[::2]#['apple','orange']\u7b2c\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u6bcfN\u4e2a\u53d6\u4e00\u4e2a\uff0c\u8fd9\u91cc\u8868\u793a\u4ece\u5934\u5f00\u59cb\uff0c\u6bcf2\u4e2a\u5143\u7d20\u53d6\u51fa\u4e00\u4e2a\u6765\u5217\u8868\u751f\u6210\u5668\u5982\u679c\u8981\u751f\u6210[1\u00d71,2\u00d72,3\u00d73,\u2026,10\u00d710]\u600e\u4e48\u505a\uff1f\u65b9\u6cd5\u4e00\u662f\u5faa\u73af\uff1aPythonL=[]forxinrange(1,11):L.append(x*x)123L=[]forxinrange(1,11):\u00a0\u00a0\u00a0\u00a0L.append(x*x)\u4f46\u662f\u5faa\u73af\u592a\u7e41\u7410\uff0c\u800c\u5217\u8868\u751f\u6210\u5f0f\u5219\u53ef\u4ee5\u7528\u4e00\u884c\u8bed\u53e5\u4ee3\u66ff\u5faa\u73af\u751f\u6210\u4e0a\u9762\u7684list\uff1aPython#\u628a\u8981\u751f\u6210\u7684\u5143\u7d20x*x\u653e\u5230\u524d\u9762\uff0c\u540e\u9762\u8ddffor\u5faa\u73af\uff0c\u5c31\u53ef\u4ee5\u628alist\u521b\u5efa\u51fa\u6765[x*xforxinrange(1,11)]#[1,4,9,16,25,36,49,64,81,100]123#\u628a\u8981\u751f\u6210\u7684\u5143\u7d20x*x\u653e\u5230\u524d\u9762\uff0c\u540e\u9762\u8ddffor\u5faa\u73af\uff0c\u5c31\u53ef\u4ee5\u628alist\u521b\u5efa\u51fa\u6765[x*xforxinrange(1,11)]#[1,4,9,16,25,36,49,64,81,100]\u5217\u8868\u751f\u6210\u5f0f\u7684for\u5faa\u73af\u540e\u9762\u8fd8\u53ef\u4ee5\u52a0\u4e0aif\u5224\u65ad(\u7c7b\u4f3c\u4e8eJS\u4e2d\u7684filter()\u51fd\u6570)\uff0c\u793a\u4f8b\u5982\u4e0b\uff1aPython[x*xforxinrange(1,11)ifx%2==0]#[4,16,36,64,100]12[x*xforxinrange(1,11)ifx%2==0]#[4,16,36,64,100]for\u5faa\u73af\u53ef\u4ee5\u5d4c\u5957\uff0c\u56e0\u6b64\uff0c\u5728\u5217\u8868\u751f\u6210\u5f0f\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7528\u591a\u5c42for\u5faa\u73af\u6765\u751f\u6210\u5217\u8868\u3002Python[m+nformin'ABC'fornin'123']#['A1','A2','A3','B1','B2','B3','C1','C2','C3']12[m+nformin'ABC'fornin'123']#['A1','A2','A3','B1','B2','B3','C1','C2','C3']Python\u51fd\u6570\u9ed8\u8ba4\u53c2\u6570JS\u4e2dES6\u7684\u9ed8\u8ba4\u53c2\u6570\u6b63\u662f\u501f\u9274\u4e8ePython\uff0c\u7528\u6cd5\u5982\u4e0b\uff1aPythondefgreet(name='World'):print'Hello,'+name+'.'greet()#Hello,World.greet('Python')#Hello,Python.12345defgreet(name='World'):\u00a0\u00a0\u00a0\u00a0print'Hello,'+name+'.'\u00a0greet()#Hello,World.greet('Python')#Hello,Python.\u53ef\u53d8\u53c2\u6570\u7c7b\u4f3c\u4e8eJS\u51fd\u6570\u4e2d\u81ea\u52a8\u8bc6\u522b\u4f20\u5165\u53c2\u6570\u7684\u4e2a\u6570\uff0cPython\u4e5f\u63d0\u4f9b\u4e86\u5b9a\u4e49\u53ef\u53d8\u53c2\u6570\uff0c\u5373\u5728\u53ef\u53d8\u53c2\u6570\u7684\u540d\u5b57\u524d\u9762\u5e26\u4e0a\u4e2a*\u53f7\u3002Pythondeffn(*args):printargsfn()#()fn('a')#('a',)fn('a','b')#('a','b')123456deffn(*args):\u00a0\u00a0\u00a0\u00a0printargs\u00a0fn()\u00a0\u00a0#()fn('a')#('a',)fn('a','b')#('a','b')Python\u89e3\u91ca\u5668\u4f1a\u628a\u4f20\u5165\u7684\u4e00\u7ec4\u53c2\u6570\u7ec4\u88c5\u6210\u4e00\u4e2atuple\u4f20\u9012\u7ed9\u53ef\u53d8\u53c2\u6570\uff0c\u56e0\u6b64\uff0c\u5728\u51fd\u6570\u5185\u90e8\uff0c\u76f4\u63a5\u628a\u53d8\u91cfargs\u770b\u6210\u4e00\u4e2atuple\u5c31\u597d\u4e86\u3002\u5e38\u7528\u9ad8\u9636\u51fd\u6570Python\u4e2d\u5e38\u7528\u7684\u51fd\u6570(map\u3001reduce\u3001filter)\u7684\u4f5c\u7528\u548cJS\u4e2d\u4e00\u81f4\uff0c\u53ea\u662f\u7528\u6cd5\u7a0d\u5fae\u4e0d\u540c\u3002map\u51fd\u6570:\u63a5\u6536\u4e00\u4e2a\u51fd\u6570f\u548c\u4e00\u4e2alist\uff0c\u5e76\u901a\u8fc7\u628a\u51fd\u6570f\u4f9d\u6b21\u4f5c\u7528\u5728list\u7684\u6bcf\u4e2a\u5143\u7d20\u4e0a\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u7684list\u5e76\u8fd4\u56de\u3002Pythondeff(x):returnx*xprintmap(f,[1,2,3,4,5,6,7,8,9])#[1,4,9,16,25,36,49,64,81]123deff(x):\u00a0\u00a0\u00a0\u00a0returnx*xprintmap(f,[1,2,3,4,5,6,7,8,9])#[1,4,9,16,25,36,49,64,81]reduce\u51fd\u6570:\u63a5\u6536\u4e00\u4e2a\u51fd\u6570f\u548c\u4e00\u4e2alist(\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e09\u4e2a\u503c\u4f5c\u4e3a\u521d\u59cb\u503c)\uff0creduce()\u5bf9list\u7684\u6bcf\u4e2a\u5143\u7d20\u53cd\u590d\u8c03\u7528\u51fd\u6570f\uff0c\u5e76\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\u503c\u3002Pythondeff(x,y):returnx*yreduce(f,[1,3,5])#151234deff(x,y):\u00a0\u00a0\u00a0\u00a0returnx*y\u00a0reduce(f,[1,3,5])#15filter\u51fd\u6570:\u63a5\u6536\u4e00\u4e2a\u51fd\u6570f\u548c\u4e00\u4e2alist\uff0c\u8fd9\u4e2a\u51fd\u6570f\u7684\u4f5c\u7528\u662f\u5bf9\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u5224\u65ad\uff0c\u8fd4\u56deTrue\u6216False\uff0cfilter()\u6839\u636e\u5224\u65ad\u7ed3\u679c\u81ea\u52a8\u8fc7\u6ee4\u6389\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u5143\u7d20\uff0c\u8fd4\u56de\u7531\u7b26\u5408\u6761\u4ef6\u5143\u7d20\u7ec4\u6210\u7684\u65b0list\u3002Pythondefis_odd(x):returnx%2==1filter(is_odd,[1,4,6,7,9,12,17])#[1,7,9,17]1234defis_odd(x):\u00a0\u00a0\u00a0\u00a0returnx%2==1\u00a0filter(is_odd,[1,4,6,7,9,12,17])#[1,7,9,17]\u533f\u540d\u51fd\u6570\u548cJS\u7684\u533f\u540d\u51fd\u6570\u4e0d\u540c\u7684\u5730\u65b9\u662f\uff0cPython\u7684\u533f\u540d\u51fd\u6570\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u4e14\u4e0d\u80fd\u5199return\u3002\u62ffmap()\u51fd\u6570\u4e3a\u4f8b\uff1aPythonmap(lambdax:x*x,[1,2,3,4,5,6,7,8,9])#[1,4,9,16,25,36,49,64,81]1map(lambdax:x*x,[1,2,3,4,5,6,7,8,9])#[1,4,9,16,25,36,49,64,81]\u5173\u952e\u8bcdlambda\u8868\u793a\u533f\u540d\u51fd\u6570\uff0c\u5192\u53f7\u524d\u9762\u7684x\u8868\u793a\u51fd\u6570\u53c2\u6570\uff0c\u53ef\u4ee5\u770b\u51fa\u533f\u540d\u51fd\u6570lambdax:x*x\u5b9e\u9645\u4e0a\u5c31\u662f:Pythondeff(x):returnx*x12deff(x):\u00a0\u00a0\u00a0\u00a0returnx*x\u95ed\u5305\u4e4b\u524d\u5199\u8fc7\u4e00\u4e9b\u5173\u4e8eJS\u95ed\u5305\u7684\u6587\u7ae0\uff0c\u6bd4\u5982\u6df1\u5165\u6d45\u51faJavaScript\u4e4b\u95ed\u5305\uff08Closure\uff09\u3001\u4ee5\u53ca\u8bfb\u4e66\u7b14\u8bb0-\u4f60\u4e0d\u77e5\u9053\u7684JavaScript(\u4e0a)\uff0cPython\u4e2d\u95ed\u5305\u7684\u5b9a\u4e49\u548cJS\u4e2d\u7684\u662f\u4e00\u81f4\u7684\u5373\uff1a\u5185\u5c42\u51fd\u6570\u5f15\u7528\u4e86\u5916\u5c42\u51fd\u6570\u7684\u53d8\u91cf\uff0c\u7136\u540e\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u3002\u4e0b\u9762\u6765\u770b\u4e0bPy\u4e2d\u95ed\u5305\u4e4bfor\u5faa\u73af\u7ecf\u5178\u95ee\u9898\uff1aPython#\u5e0c\u671b\u4e00\u6b21\u8fd4\u56de3\u4e2a\u51fd\u6570\uff0c\u5206\u522b\u8ba1\u7b971x1,2x2,3x3:defcount():fs=[]foriinrange(1,4):deff():returni*ifs.append(f)returnfsf1,f2,f3=count()#\u8fd9\u79cd\u5199\u6cd5\u76f8\u5f53\u4e8eES6\u4e2d\u7684\u89e3\u6784\u8d4b\u503cprintf1(),f2(),f3()#9991234567891011#\u5e0c\u671b\u4e00\u6b21\u8fd4\u56de3\u4e2a\u51fd\u6570\uff0c\u5206\u522b\u8ba1\u7b971x1,2x2,3x3:defcount():\u00a0\u00a0\u00a0\u00a0fs=[]\u00a0\u00a0\u00a0\u00a0foriinrange(1,4):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deff():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returni*i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fs.append(f)\u00a0\u00a0\u00a0\u00a0returnfs\u00a0f1,f2,f3=count()#\u8fd9\u79cd\u5199\u6cd5\u76f8\u5f53\u4e8eES6\u4e2d\u7684\u89e3\u6784\u8d4b\u503cprintf1(),f2(),f3()#999\u8001\u95ee\u9898\u4e86\uff0cf1(),f2(),f3()\u7ed3\u679c\u4e0d\u5e94\u8be5\u662f1,4,9\u5417\uff0c\u5b9e\u9645\u7ed3\u679c\u4e3a\u4ec0\u4e48\u90fd\u662f9\u5462\uff1f\u539f\u56e0\u5c31\u662f\u5f53count()\u51fd\u6570\u8fd4\u56de\u4e863\u4e2a\u51fd\u6570\u65f6\uff0c\u8fd93\u4e2a\u51fd\u6570\u6240\u5f15\u7528\u7684\u53d8\u91cfi\u7684\u503c\u5df2\u7ecf\u53d8\u6210\u4e863\u3002\u7531\u4e8ef1\u3001f2\u3001f3\u5e76\u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u6240\u4ee5\uff0c\u6b64\u65f6\u4ed6\u4eec\u5e76\u672a\u8ba1\u7b97i*i\uff0c\u5f53f1\u88ab\u8c03\u7528\u65f6\uff0ci\u5df2\u7ecf\u53d8\u4e3a3\u4e86\u3002\u8981\u6b63\u786e\u4f7f\u7528\u95ed\u5305\uff0c\u5c31\u8981\u786e\u4fdd\u5f15\u7528\u7684\u5c40\u90e8\u53d8\u91cf\u5728\u51fd\u6570\u8fd4\u56de\u540e\u4e0d\u80fd\u53d8\u3002\u4ee3\u7801\u4fee\u6539\u5982\u4e0b:\u65b9\u6cd5\u4e00:\u53ef\u4ee5\u7406\u89e3\u4e3a\u521b\u5efa\u4e86\u4e00\u4e2a\u5c01\u95ed\u7684\u4f5c\u7528\u57df\uff0ci\u7684\u503c\u4f20\u7ed9j\u4e4b\u540e\uff0c\u5c31\u548ci\u6ca1\u4efb\u4f55\u5173\u7cfb\u4e86\u3002\u6bcf\u6b21\u5faa\u73af\u5f62\u6210\u7684\u95ed\u5305\u90fd\u5b58\u8fdb\u4e86\u5185\u5b58\u4e2d\u3002Pythondefcount():fs=[]foriinrange(1,4):deff(j):defg():#\u65b9\u6cd5\u4e00returnj*jreturngr=f(i)fs.append(r)returnfsf1,f2,f3=count()printf1(),f2(),f3()#14912345678910111213defcount():\u00a0\u00a0\u00a0\u00a0fs=[]\u00a0\u00a0\u00a0\u00a0foriinrange(1,4):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deff(j):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defg():#\u65b9\u6cd5\u4e00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnj*j\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returng\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r=f(i)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fs.append(r)\u00a0\u00a0\u00a0\u00a0returnfs\u00a0f1,f2,f3=count()printf1(),f2(),f3()#149\u65b9\u6cd5\u4e8c\uff1a\u601d\u8def\u6bd4\u8f83\u5de7\u5999\uff0c\u7528\u5230\u4e86\u9ed8\u8ba4\u53c2\u6570j\u5728\u51fd\u6570\u5b9a\u4e49\u65f6\u53ef\u4ee5\u83b7\u53d6\u5230i\u7684\u503c\uff0c\u867d\u7136\u6ca1\u6709\u7528\u5230\u95ed\u5305\uff0c\u4f46\u662f\u548c\u65b9\u6cd5\u4e00\u6709\u5f02\u66f2\u540c\u5de5\u4e4b\u5904\u3002Pythondefcount():fs=[]foriinrange(1,4):deff(j=i):#\u65b9\u6cd5\u4e8creturnj*jfs.append(f)returnfsf1,f2,f3=count()printf1(),f2(),f3()#14912345678910defcount():\u00a0\u00a0\u00a0\u00a0fs=[]\u00a0\u00a0\u00a0\u00a0foriinrange(1,4):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deff(j=i):#\u65b9\u6cd5\u4e8c\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnj*j\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fs.append(f)\u00a0\u00a0\u00a0\u00a0returnfs\u00a0f1,f2,f3=count()printf1(),f2(),f3()#149decorator\u88c5\u9970\u5668ES6\u7684\u8bed\u6cd5\u4e2d\u7684decorator\u6b63\u662f\u501f\u9274\u4e86Python\u7684decorator\u3002decorator\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u9ad8\u9636\u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u3002\u90a3\u88c5\u9970\u5668\u7684\u4f5c\u7528\u5728\u54ea\u5462\uff1f\u5148\u4e0a\u4e00\u6bb5\u65e5\u5e38\u9879\u76ee\u4e2d\u7528ts\u5199\u7684\u7f51\u5173\u4ee3\u7801\uff1aPython@Post('/rider/detail')//URL\u8def\u7531@log()//\u6253\u5370\u65e5\u5fd7@ResponseBodypublicasyncgetRiderBasicInfo(@RequestBody('riderId')riderId:number,@RequestBody('cityId')cityId:number,){constresult=awaitthis.riderManager.findDetail(cityId,riderId)returnresult}12345678910@Post('/rider/detail')\u00a0\u00a0//URL\u8def\u7531@log()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u6253\u5370\u65e5\u5fd7\u00a0\u00a0@ResponseBody\u00a0\u00a0publicasyncgetRiderBasicInfo(\u00a0\u00a0\u00a0\u00a0@RequestBody('riderId')riderId:number,\u00a0\u00a0\u00a0\u00a0@RequestBody('cityId')cityId:number,\u00a0\u00a0){\u00a0\u00a0\u00a0\u00a0constresult=awaitthis.riderManager.findDetail(cityId,riderId)\u00a0\u00a0\u00a0\u00a0returnresult\u00a0\u00a0}\u53ef\u4ee5\u770b\u51fa\u4f7f\u7528\u88c5\u9970\u5668\u53ef\u4ee5\u6781\u5927\u5730\u7b80\u5316\u4ee3\u7801\uff0c\u907f\u514d\u6bcf\u4e2a\u51fd\u6570(\u6bd4\u5982\u65e5\u5fd7\u3001\u8def\u7531\u3001\u6027\u80fd\u68c0\u6d4b)\u7f16\u5199\u91cd\u590d\u6027\u4ee3\u7801\u3002\u56de\u5230Python\u4e0a\uff0cPython\u63d0\u4f9b\u7684@\u8bed\u6cd5\u6765\u4f7f\u7528decorator\uff0c@\u7b49\u4ef7\u4e8ef=decorate(f)\u3002\u4e0b\u9762\u6765\u770b\u770b@log()\u5728Python\u4e2d\u7684\u5b9e\u73b0:Python#\u6211\u4eec\u60f3\u628a\u8c03\u7528\u7684\u51fd\u6570\u540d\u5b57\u7ed9\u6253\u5370\u51fa\u6765@log()deffactorial(n):returnreduce(lambdax,y:x*y,range(1,n+1))printfactorial(10)#\u6765\u770b\u770b@log()\u7684\u5b9a\u4e49deflog():deflog_decorator(f):deffn(x):print'\u8c03\u7528\u4e86\u51fd\u6570'+f.__name__+'()'returnf(x)returnfnreturnlog_decorator#\u7ed3\u679c#\u8c03\u7528\u4e86\u51fd\u6570factorial()#3628800123456789101112131415161718#\u6211\u4eec\u60f3\u628a\u8c03\u7528\u7684\u51fd\u6570\u540d\u5b57\u7ed9\u6253\u5370\u51fa\u6765@log()deffactorial(n):\u00a0\u00a0\u00a0\u00a0returnreduce(lambdax,y:x*y,range(1,n+1))printfactorial(10)\u00a0#\u6765\u770b\u770b@log()\u7684\u5b9a\u4e49deflog():\u00a0\u00a0\u00a0\u00a0deflog_decorator(f):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deffn(x):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print'\u8c03\u7528\u4e86\u51fd\u6570'+f.__name__+'()'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnf(x)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnfn\u00a0\u00a0\u00a0\u00a0returnlog_decorator\u00a0#\u7ed3\u679c#\u8c03\u7528\u4e86\u51fd\u6570factorial()#3628800class\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u662f\u4e00\u79cd\u7a0b\u5e8f\u8bbe\u8ba1\u8303\u5f0f\uff0c\u57fa\u672c\u601d\u60f3\u662f\uff1a\u7528\u7c7b\u5b9a\u4e49\u62bd\u8c61\u7c7b\u578b\uff0c\u7136\u540e\u6839\u636e\u7c7b\u7684\u5b9a\u4e49\u521b\u5efa\u51fa\u5b9e\u4f8b\u3002\u5728\u638c\u63e1\u5176\u5b83\u8bed\u8a00\u7684\u57fa\u7840\u4e0a\uff0c\u8fd8\u662f\u6bd4\u8f83\u5bb9\u6613\u7406\u89e3\u8fd9\u5757\u77e5\u8bc6\u70b9\u7684\uff0c\u6bd4\u5982\u4ece\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u53ef\u4ee5\u770b\u51fa\u4e0d\u540c\u8bed\u8a00\u7684\u8bed\u8a00\u7279\u6027\u95f4\u7adf\u7136\u6709\u5982\u6b64\u591a\u7684\u5171\u6027\u3002es6:(\u9644\uff1a\u672c\u6587\u7684\u4e3b\u9898\u662fpython\uff0c\u6240\u4ee5\u53ea\u662f\u521d\u7565\u5c55\u793a\u4e0bjs\u4e2d\u7c7b\u7684\u5b9a\u4e49\u4ee5\u53ca\u5b9e\u4f8b\u7684\u521b\u5efa\uff0c\u4e3a\u4e86\u8bf4\u660e\u5199\u6cd5\u7684\u76f8\u4f3c\u6027)PythonclassPerson{constructor(name,age){this.name=namethis.age=age}}constchild1=newPerson('XiaoMing',10)12345678classPerson{\u00a0\u00a0\u00a0\u00a0constructor(name,age){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.name=name\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.age=age\u00a0\u00a0\u00a0\u00a0}}\u00a0constchild1=newPerson('XiaoMing',10)Python:(\u6838\u5fc3\u8981\u70b9\u5199\u5728\u6ce8\u91ca\u4e2d)Python#\u5b9a\u4e49\u4e00\u4e2aPerson\u7c7b\uff1a\u6839\u636ePerson\u7c7b\u5c31\u53ef\u4ee5\u9020\u6210\u5f88\u591achild\u5b9e\u4f8bclassPerson(object):address='Earth'#\u7c7b\u5c5e\u6027(\u5b9e\u4f8b\u516c\u6709)def__init__(self,name,age):#\u521b\u5efa\u5b9e\u4f8b\u65f6\uff0c__init__()\u65b9\u6cd5\u88ab\u81ea\u52a8\u8c03\u7528self.name=nameself.age=agedefget_age(self):#\u5b9a\u4e49\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6c38\u8fdc\u662fself\uff0c\u6307\u5411\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u5b9e\u4f8b\u672c\u8eab\uff0c\u5176\u4ed6\u53c2\u6570\u548c\u666e\u901a\u51fd\u6570\u662f\u4e00\u6837\u7684returnself.agechild1=Person('XiaoMing',10)child2=Person('XiaoHong',9)printchild1.name#'XiaoMing'printchild2.get_age()#9printchild1.address#'Earth'printchild2.address#'Earth'12345678910111213141516#\u5b9a\u4e49\u4e00\u4e2aPerson\u7c7b\uff1a\u6839\u636ePerson\u7c7b\u5c31\u53ef\u4ee5\u9020\u6210\u5f88\u591achild\u5b9e\u4f8bclassPerson(object):\u00a0\u00a0\u00a0\u00a0address='Earth'#\u7c7b\u5c5e\u6027(\u5b9e\u4f8b\u516c\u6709)\u00a0\u00a0\u00a0\u00a0def__init__(self,name,age):#\u521b\u5efa\u5b9e\u4f8b\u65f6\uff0c__init__()\u65b9\u6cd5\u88ab\u81ea\u52a8\u8c03\u7528\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.name=name\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.age=age\u00a0\u00a0\u00a0\u00a0defget_age(self):#\u5b9a\u4e49\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6c38\u8fdc\u662fself\uff0c\u6307\u5411\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u5b9e\u4f8b\u672c\u8eab\uff0c\u5176\u4ed6\u53c2\u6570\u548c\u666e\u901a\u51fd\u6570\u662f\u4e00\u6837\u7684\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.age\u00a0child1=Person('XiaoMing',10)child2=Person('XiaoHong',9)\u00a0printchild1.name#'XiaoMing'printchild2.get_age()#9printchild1.address#'Earth'printchild2.address#'Earth'\u7ee7\u627fchild\u5c5e\u4e8eStudent\u7c7b\uff0cStudent\u7c7b\u5c5e\u4e8ePeople\u7c7b\uff0c\u8fd9\u5c31\u5f15\u51fa\u4e86\u7ee7\u627f:\u5373\u83b7\u5f97\u4e86\u7236\u7c7b\u7684\u65b9\u6cd5\u5c5e\u6027\u540e\u53c8\u80fd\u6dfb\u52a0\u81ea\u5df1\u7684\u65b9\u6cd5\u5c5e\u6027\u3002PythonclassPerson(object):def__init__(self,name,age):self.name=nameself.age=ageclassStudent(Person):def__init__(self,name,age,grade):super(Student,self).__init__(name,age)#\u8fd9\u91cc\u4e5f\u80fd\u5199\u51faPerson.__init__(self,name,age)self.grade=grades=Student('XiaoMing',10,90)prints.name#'XiaoMing'prints.grade#9012345678910111213classPerson(object):\u00a0\u00a0\u00a0\u00a0def__init__(self,name,age):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.name=name\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.age=age\u00a0classStudent(Person):\u00a0\u00a0\u00a0\u00a0def__init__(self,name,age,grade):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(Student,self).__init__(name,age)#\u8fd9\u91cc\u4e5f\u80fd\u5199\u51faPerson.__init__(self,name,age)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.grade=grade\u00a0s=Student('XiaoMing',10,90)prints.name#'XiaoMing'prints.grade#90\u53ef\u4ee5\u770b\u5230\u5b50\u7c7b\u5728\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\u53c8\u589e\u52a0\u4e86grade\u5c5e\u6027\u3002\u6211\u4eec\u53ef\u4ee5\u518d\u6765\u770b\u770bs\u7684\u7c7b\u578b\u3002Pythonisinstance(s,Person)isinstance(s,Student)12isinstance(s,Person)isinstance(s,Student)\u53ef\u4ee5\u770b\u51fa\uff0cPython\u4e2d\u5728\u4e00\u6761\u7ee7\u627f\u94fe\u4e0a\uff0c\u4e00\u4e2a\u5b9e\u4f8b\u53ef\u4ee5\u770b\u6210\u5b83\u672c\u8eab\u7684\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u770b\u6210\u5b83\u7236\u7c7b\u7684\u7c7b\u578b\u30021\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u9057\u4f20\u7b97\u6cd5\u4e2d\u51e0\u79cd\u4e0d\u540c\u9009\u62e9\u7b97\u5b50\u53caPython\u5b9e\u73b0"], "art_url": ["http://python.jobbole.com/88608/"], "art_create_time": ["2017/09/19"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-09-19-%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E4%B8%AD%E5%87%A0%E7%A7%8D%E4%B8%8D%E5%90%8C%E9%80%89%E6%8B%A9%E7%AE%97%E5%AD%90%E7%9A%84%E6%AF%94%E8%BE%83/flowchart.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u672c\u6587\u5bf9\u9057\u4f20\u7b97\u6cd5\u4e2d\u7684\u51e0\u79cd\u9009\u62e9\u7b56\u7565\u8fdb\u884c\u4e86\u603b\u7ed3,\u5176\u4e2d\u5305\u62ec:ProportionateRouletteWheelSelectionLinearRankingSelectionExponentialRankingSelectionTournamentSelection\u5bf9\u4e8e\u6bcf\u79cd\u9009\u62e9\u7b56\u7565\u6211\u90fd\u4f7f\u7528Python\u8fdb\u884c\u4e86\u76f8\u5e94\u7684\u5b9e\u73b0\u5e76\u4ee5\u5185\u7f6e\u63d2\u4ef6\u7684\u5f62\u5f0f\u6574\u5408\u8fdb\u4e86\u672c\u4eba\u6240\u5199\u7684\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u4e2d\u3002\u5bf9\u9700\u8981\u4f7f\u7528\u9057\u4f20\u7b97\u6cd5\u4f18\u5316\u95ee\u9898\u4ee5\u53ca\u5b66\u4e60\u9057\u4f20\u7b97\u6cd5\u7684\u7ae5\u978b\u53ef\u4ee5\u4f5c\u4e3a\u53c2\u8003.\u9879\u76ee\u94fe\u63a5:GitHub:\u00a0https://github.com/PytLab/gaftPyPI:\u00a0https://pypi.python.org/pypi/gaft\u9057\u4f20\u7b97\u6cd5\u4e2d\u7684\u9009\u62e9\u7b97\u5b50\u9057\u4f20\u7b97\u6cd5(geneticalgorithms,GAs)\u662f\u4e00\u79cd\u81ea\u9002\u5e94\u7684\u542f\u53d1\u5f0f\u641c\u7d22\u7b97\u6cd5,\u5b83\u6a21\u4eff\u8fbe\u5c14\u6587\u8fdb\u5316\u8bba\u4e2d\u7684\u201c\u9002\u8005\u751f\u5b58\u201d\u7684\u539f\u5219,\u6700\u7ec8\u83b7\u53d6\u4f18\u5316\u76ee\u6807\u7684\u6700\u4f18\u89e3\u3002\u4e0b\u56fe\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u9057\u4f20\u7b97\u6cd5\u6d41\u7a0b:\u5bf9\u4e8e\u79cd\u7fa4\u4e2d\u9700\u8981\u8fdb\u884c\u6742\u4ea4\u7684\u7269\u79cd\u9009\u62e9\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u800c\u4e14\u9009\u62e9\u4e00\u79cd\u5408\u9002\u7684\u9009\u62e9\u7b56\u7565\u5bf9\u4e8e\u9057\u4f20\u7b97\u6cd5\u6574\u4f53\u6027\u80fd\u7684\u5f71\u54cd\u5c06\u662f\u5f88\u5927\u7684\u3002\u5982\u679c\u4e00\u4e2a\u9009\u62e9\u7b97\u6cd5\u9009\u62e9\u591a\u6837\u6027\u964d\u4f4e\uff0c\u4fbf\u4f1a\u5bfc\u81f4\u79cd\u7fa4\u8fc7\u65e9\u7684\u6536\u655b\u5230\u5c40\u90e8\u6700\u4f18\u70b9\u800c\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u5168\u5c40\u6700\u4f18\u70b9\uff0c\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u201d\u65e9\u719f\u201d\u3002\u800c\u9009\u62e9\u7b56\u7565\u8fc7\u4e8e\u53d1\u6563\u5219\u4f1a\u5bfc\u81f4\u7b97\u6cd5\u96be\u4ee5\u6536\u655b\u5230\u6700\u4f18\u70b9\u3002\u56e0\u6b64\u5728\u8fd9\u4e24\u70b9\u4e2d\u6211\u4eec\u9700\u8981\u8fdb\u884c\u5e73\u8861\u624d\u80fd\u4f7f\u9057\u4f20\u7b97\u6cd5\u4ee5\u4e00\u79cd\u9ad8\u6548\u7684\u65b9\u5f0f\u6536\u655b\u5230\u5168\u5c40\u6700\u4f18\u70b9\u3002GAFT\u6846\u67b6\u4e2d\u7684\u7b97\u5b50\u63d2\u4ef6GAFT\u662f\u6211\u6839\u636e\u81ea\u5df1\u9700\u6c42\u5f00\u53d1\u7684\u4e00\u4e2a\u9057\u4f20\u7b97\u6cd5\u6846\u67b6\uff0c\u76f8\u5173\u4ecb\u7ecd\u7684\u535a\u5ba2\u53ef\u4ee5\u53c2\u89c1\u300aGAFT-\u4e00\u4e2a\u4f7f\u7528Python\u5b9e\u73b0\u7684\u9057\u4f20\u7b97\u6cd5\u6846\u67b6\u300b,\u300a\u4f7f\u7528MPI\u5e76\u884c\u5316\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u300b\u3002\u8be5\u6846\u67b6\u63d0\u4f9b\u4e86\u63d2\u4ef6\u63a5\u53e3\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u7b97\u5b50\u4ee5\u53caon-the-fly\u5206\u6790\u63d2\u4ef6\u6765\u653e\u5230gaft\u6846\u67b6\u4e2d\u8fd0\u884c\u9057\u4f20\u7b97\u6cd5\u6d41\u7a0b\u5bf9\u76ee\u6807\u95ee\u9898\u8fdb\u884c\u4f18\u5316\u3002\u672c\u90e8\u5206\u6211\u7a0d\u5fae\u4ecb\u7ecd\u4e0bgaft\u5173\u4e8e\u9057\u4f20\u7b97\u5b50\u76f8\u5173\u63a5\u53e3\u89c4\u8303\uff0c\u4ee5\u53ca\u7f16\u5199\u80fd\u7528\u4e8egaft\u7684\u7b97\u5b50\u7684\u7f16\u5199\u65b9\u6cd5\u3002\u5728gaft\u4e2d\u9057\u4f20\u7b97\u5b50\u7684\u7f16\u5199\u90fd\u662f\u9700\u8981\u7ee7\u627f\u6846\u67b6\u5185\u7f6e\u7684\u57fa\u7c7b\uff0c\u7136\u540e\u6839\u636e\u57fa\u7c7b\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u5b9e\u73b0\u81ea\u5df1\u7684\u7b97\u5b50\u3002\u5176\u4e2d\u57fa\u7c7b\u7684\u5b9a\u4e49\u90fd\u5728/gaft/plugin_interfaces/operators/\u76ee\u5f55\u4e0b\uff0c\u4e0b\u9762\u6211\u4ee5\u9009\u62e9\u7b97\u5b50\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u4e0b\u63a5\u53e3\u3002gaft\u4e2d\u9009\u62e9\u7b97\u5b50\u7684\u57fa\u7c7b\u4e3aGASelection\uff0c\u5176\u4e2d\u5728\u9057\u4f20\u7b97\u6cd5\u6d41\u7a0b\u4e2d\u4f1a\u8c03\u7528\u8be5\u7c7b\u5b9e\u4f8b\u7684select\u65b9\u6cd5\uff0c\u8fdb\u800c\u6839\u636e\u7b97\u5b50\u4e2d\u7684\u76f8\u5173\u9009\u62e9\u7b56\u7565\u5b8c\u6210\u4ece\u79cd\u7fa4\u4e2d\u9009\u53d6\u4e00\u5bf9\u7269\u79cd\u4f5c\u4e3a\u7236\u4eb2\u548c\u6bcd\u4eb2\u4ea7\u751f\u5b50\u4ee3\u3002\u57fa\u7c7b\u7684\u5b9a\u4e49\u4e3a\uff1aPythonclassGASelection(metaclass=SelectionMeta):'''Classforprovidinganinterfacetoeasilyextendthebehaviorofselectionoperation.'''defselect(self,population,fitness):'''Calledwhenweneedtoselectparentsfromapopulationtolaterbreeding.:parampopulation:Thecurrentpopulation.:typepopulation:GAPopulation:returnparents:Twoselectedindividualsforcrossover.:typeparents:TupleoftowGAIndividualobjects.'''raiseNotImplementedError1234567891011121314classGASelection(metaclass=SelectionMeta):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0Classforprovidinganinterfacetoeasilyextendthebehaviorofselection\u00a0\u00a0\u00a0\u00a0operation.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0defselect(self,population,fitness):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Calledwhenweneedtoselectparentsfromapopulationtolaterbreeding.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:parampopulation:Thecurrentpopulation.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:typepopulation:GAPopulation\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:returnparents:Twoselectedindividualsforcrossover.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:typeparents:TupleoftowGAIndividualobjects.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseNotImplementedErrorselect\u7684\u65b9\u6cd5\u7684\u53c2\u6570\u4e3a\u5f53\u524d\u79cd\u7fa4population\u4ee5\u53ca\u76f8\u5e94\u7684\u9002\u5e94\u5ea6\u51fd\u6570fitness\uff0c\u5176\u4e2dpopulation\u9700\u8981\u662fGAPopulation\u5bf9\u8c61\uff0cfitness\u4e5f\u5fc5\u987b\u662fcallable\u7684\u5bf9\u8c61\u3002\u5f53\u7136\uff0c\u8fd9\u4e9b\u5728Python\u8fd9\u79cd\u52a8\u6001\u7c7b\u578b\u8bed\u8a00\u4e2d\u8c8c\u4f3c\u770b\u8d77\u6765\u6709\u4e9b\u9e21\u808b\uff0c\u4f46\u662f\u4e3a\u4e86\u80fd\u591f\u66f4\u52a0\u89c4\u8303\u4f7f\u7528\u8005\uff0c\u6211\u5229\u7528Python\u7684\u5143\u7c7b\u5728\u5b9e\u4f8b\u5316\u7c7b\u5bf9\u8c61\u7684\u65f6\u5019\u5bf9\u63a5\u53e3\u7684\u5b9e\u73b0\u4ee5\u53ca\u63a5\u53e3\u7684\u53c2\u6570\u7c7b\u578b\u52a0\u4ee5\u9650\u5236\u3002\u5177\u4f53\u7684\u5b9e\u73b0\u90fd\u5728/gaft/plugin_interfaces/metaclasses.py\u4e2d\uff0c\u6709\u5174\u8da3\u7684\u7ae5\u978b\u53ef\u4ee5\u770b\u770b\u5b9e\u73b0\u65b9\u6cd5\u3002\u5177\u4f53\u81ea\u5b9a\u4e49\u7b97\u5b50\u7684\u7f16\u5199\u65b9\u6cd5\u6211\u5c06\u5728\u4e0b\u4e00\u90e8\u5206\u540c\u9009\u62e9\u7b56\u7565\u4e00\u8d77\u8d34\u51fa\u6765\u3002\u4e0d\u540c\u7684\u9009\u62e9\u7b56\u7565\u672c\u90e8\u5206\u6211\u4e3b\u8981\u5bf9\u56db\u79cd\u4e0d\u540c\u7684\u9009\u62e9\u7b56\u7565\u8fdb\u884c\u603b\u7ed3\u5e76\u52a0\u4ee5gaft\u63d2\u4ef6\u5f62\u5f0f\u7684Python\u5b9e\u73b0\u3002\u9009\u62e9\u7b97\u5b50\u51b3\u5b9a\u4e86\u54ea\u4e9b\u4e2a\u4f53\u5c06\u4f1a\u4ece\u79cd\u7fa4\u4e2d\u88ab\u9009\u62e9\u51fa\u6765\u7528\u4e8e\u7e41\u884d\u4e0b\u4e00\u4ee3\u79cd\u7fa4\u4e2d\u7684\u65b0\u4e2a\u4f53\u3002\u5176\u4e3b\u8981\u7684\u539f\u5219\u5c31\u662f:thebetterisanindividual;thehigherisitschanceofbeingaparent\u9009\u62e9\u7b97\u5b50\u5728\u9057\u4f20\u7b97\u6cd5\u8fed\u4ee3\u4e2d\u5c06\u9002\u5e94\u5ea6\u51fd\u6570\u5f15\u5165\u8fdb\u6765\uff0c\u56e0\u4e3a\u9002\u5e94\u5ea6\u51fd\u6570\u5f0f\u6807\u5b9a\u4e00\u4e2a\u4e2a\u4f53\u662f\u5426\u8db3\u591f\u201c\u597d\u201d\u7684\u91cd\u8981\u6807\u51c6\u3002\u4f46\u662f\u9009\u62e9\u8fc7\u7a0b\u53c8\u4e0d\u80fd\u4ec5\u4ec5\u5b8c\u5168\u4f9d\u8d56\u4e8e\u9002\u5e94\u5ea6\u51fd\u6570\uff0c\u56e0\u4e3a\u4e00\u4e2a\u79cd\u7fa4\u4e2d\u7684\u6700\u4f18\u7269\u79cd\u5e76\u4e0d\u4e00\u5b9a\u662f\u5728\u5168\u5c40\u6700\u4f18\u70b9\u9644\u8fd1\u3002\u56e0\u6b64\u6211\u4eec\u4e5f\u5e94\u8be5\u7ed9\u76f8\u5bf9\u6765\u8bf4\u5e76\u90a3\u4e48\u201c\u597d\u201d\u7684\u4e2a\u4f53\u4e00\u70b9\u673a\u4f1a\u8ba9\u4ed6\u4eec\u7e41\u884d\u540e\u4ee3,\u907f\u514d\u201c\u65e9\u719f\u201d\u3002ProportionateRouletteWheelSelection\u6b64\u8f6e\u76d8\u8d4c\u9009\u62e9\u7b56\u7565\uff0c\u662f\u6700\u57fa\u672c\u7684\u9009\u62e9\u7b56\u7565\u4e4b\u4e00\uff0c\u79cd\u7fa4\u4e2d\u7684\u4e2a\u4f53\u88ab\u9009\u4e2d\u7684\u6982\u7387\u4e0e\u4e2a\u4f53\u76f8\u5e94\u7684\u9002\u5e94\u5ea6\u51fd\u6570\u7684\u503c\u6210\u6b63\u6bd4\u3002\u6211\u4eec\u9700\u8981\u5c06\u79cd\u7fa4\u4e2d\u6240\u6709\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\u503c\u8fdb\u884c\u7d2f\u52a0\u7136\u540e\u5f52\u4e00\u5316\uff0c\u6700\u7ec8\u901a\u8fc7\u968f\u673a\u6570\u5bf9\u968f\u673a\u6570\u843d\u5728\u7684\u533a\u57df\u5bf9\u5e94\u7684\u4e2a\u4f53\u8fdb\u884c\u9009\u53d6\uff0c\u7c7b\u4f3c\u8d4c\u573a\u91cc\u9762\u7684\u65cb\u8f6c\u7684\u8f6e\u76d8\u3002\u6bcf\u4e2a\u4e2a\u4f53ai\u88ab\u9009\u4e2d\u7684\u6982\u7387\u4e3a:\u597d\u4e86\uff0c\u4e0b\u9762\u53ef\u4ee5\u5c06\u6b64\u7b97\u6cd5\u5199\u6210\u4e00\u4e2a\u53ef\u4ee5gaft\u4e2d\u6267\u884c\u7684\u7b97\u5b50\u3002Pythonfromrandomimportrandomfrombisectimportbisect_rightfromitertoolsimportaccumulatefrom...plugin_interfaces.operators.selectionimportGASelectionclassRouletteWheelSelection(GASelection):def__init__(self):'''Selectionoperatorwithfitnessproportionateselection(FPS)orso-calledroulette-wheelselectionimplementation.'''passdefselect(self,population,fitness):'''SelectapairofparentusingFPSalgorithm.'''#Normalizefitnessvaluesforallindividuals.fit=[fitness(indv)forindvinpopulation.individuals]min_fit=min(fit)fit=[(i-min_fit)foriinfit]#Createroulettewheel.sum_fit=sum(fit)wheel=list(accumulate([i/sum_fitforiinfit]))#Selectafatherandamother.father_idx=bisect_right(wheel,random())father=population[father_idx]mother_idx=(father_idx+1)%len(wheel)mother=population[mother_idx]returnfather,mother12345678910111213141516171819202122232425262728293031323334fromrandomimportrandomfrombisectimportbisect_rightfromitertoolsimportaccumulate\u00a0from...plugin_interfaces.operators.selectionimportGASelection\u00a0classRouletteWheelSelection(GASelection):\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Selectionoperatorwithfitnessproportionateselection(FPS)or\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0so-calledroulette-wheelselectionimplementation.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0\u00a0defselect(self,population,fitness):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SelectapairofparentusingFPSalgorithm.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Normalizefitnessvaluesforallindividuals.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fit=[fitness(indv)forindvinpopulation.individuals]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0min_fit=min(fit)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fit=[(i-min_fit)foriinfit]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Createroulettewheel.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sum_fit=sum(fit)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0wheel=list(accumulate([i/sum_fitforiinfit]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Selectafatherandamother.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father_idx=bisect_right(wheel,random())\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father=population[father_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mother_idx=(father_idx+1)%len(wheel)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mother=population[mother_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnfather,mother\u8fc7\u7a0b\u4e3b\u8981\u5206\u4e3a\u4e0b\u9762\u51e0\u4e2a:\u7ee7\u627fGASelection\u7c7b\u5b9e\u73b0select\u65b9\u6cd5select\u7684\u53c2\u6570\u4e3aGAPopulation\u5b9e\u4f8b\u548c\u9002\u5e94\u5ea6\u51fd\u6570\u6839\u636e\u7b97\u6cd5\u9009\u62e9\u51fa\u4e24\u4e2a\u9700\u8981\u7e41\u884d\u7684\u7269\u79cd\u5e76\u8fd4\u56de\u5373\u53efTournamentSelection\u7531\u4e8e\u7b97\u6cd5\u6267\u884c\u7684\u6548\u7387\u4ee5\u53ca\u6613\u5b9e\u73b0\u7684\u7684\u7279\u70b9\uff0c\u9526\u6807\u8d5b\u9009\u62e9\u7b97\u6cd5\u662f\u9057\u4f20\u7b97\u6cd5\u4e2d\u6700\u6d41\u884c\u7684\u9009\u62e9\u7b56\u7565\u3002\u5728\u672c\u4eba\u7684\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u786e\u6b64\u7b56\u7565\u6bd4\u57fa\u672c\u7684\u8f6e\u76d8\u8d4c\u6548\u679c\u8981\u597d\u4e9b\u3002\u4ed6\u7684\u7b56\u7565\u4e5f\u5f88\u76f4\u89c2\uff0c\u5c31\u662f\u6211\u4eec\u518d\u6574\u4e2a\u79cd\u7fa4\u4e2d\u62bd\u53d6n\u4e2a\u4e2a\u4f53\uff0c\u8ba9\u4ed6\u4eec\u8fdb\u884c\u7ade\u4e89(\u9526\u6807\u8d5b)\uff0c\u62bd\u53d6\u5176\u4e2d\u7684\u6700\u4f18\u7684\u4e2a\u4f53\u3002\u53c2\u52a0\u9526\u6807\u8d5b\u7684\u4e2a\u4f53\u4e2a\u6570\u6210\u4e3atournamentsize\u3002\u901a\u5e38\u5f53n=2\u4fbf\u662f\u6700\u5e38\u4f7f\u7528\u7684\u5927\u5c0f\uff0c\u4e5f\u79f0\u4f5cBinaryTournamentSelection.TournamentSelection\u7684\u4f18\u52bf:\u66f4\u5c0f\u7684\u590d\u6742\u5ea6O(n)\u6613\u5e76\u884c\u5316\u5904\u7406\u4e0d\u6613\u9677\u5165\u5c40\u90e8\u6700\u4f18\u70b9\u4e0d\u9700\u8981\u5bf9\u6240\u6709\u7684\u9002\u5e94\u5ea6\u503c\u8fdb\u884c\u6392\u5e8f\u5904\u7406\u4e0b\u56fe\u663e\u793a\u4e86n=3\u7684TournamentSelection\u7684\u8fc7\u7a0b:\u53ef\u4ee5\u5f00\u59cb\u5199\u6210\u81ea\u5b9a\u4e49\u7b97\u5b50\u5728gaft\u8fd0\u884c\u4e86:Pythonfromrandomimportsamplefrom...plugin_interfaces.operators.selectionimportGASelectionclassTournamentSelection(GASelection):def__init__(self,tournament_size=2):'''SelectionoperatorusingTournamentStrategywithtournamentsizeequalstotwobydefault.'''self.tournament_size=tournament_sizedefselect(self,population,fitness):'''SelectapairofparentusingTournamentstrategy.'''#Competitionfunction.complete=lambdacompetitors:max(competitors,key=fitness)#Checkvalidityoftournamentsize.ifself.tournament_size>=len(population):msg='Tournamentsize({})islargerthanpopulationsize({})'raiseValueError(msg.format(self.tournament_size,len(population)))#Pickwinnersoftwogroupsasparent.competitors_1=sample(population.individuals,self.tournament_size)competitors_2=sample(population.individuals,self.tournament_size)father,mother=complete(competitors_1),complete(competitors_2)returnfather,mother123456789101112131415161718192021222324252627282930fromrandomimportsample\u00a0from...plugin_interfaces.operators.selectionimportGASelection\u00a0classTournamentSelection(GASelection):\u00a0\u00a0\u00a0\u00a0def__init__(self,tournament_size=2):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SelectionoperatorusingTournamentStrategywithtournamentsizeequals\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0totwobydefault.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.tournament_size=tournament_size\u00a0\u00a0\u00a0\u00a0\u00a0defselect(self,population,fitness):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SelectapairofparentusingTournamentstrategy.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Competitionfunction.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0complete=lambdacompetitors:max(competitors,key=fitness)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Checkvalidityoftournamentsize.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.tournament_size>=len(population):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0msg='Tournamentsize({})islargerthanpopulationsize({})'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseValueError(msg.format(self.tournament_size,len(population)))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Pickwinnersoftwogroupsasparent.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0competitors_1=sample(population.individuals,self.tournament_size)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0competitors_2=sample(population.individuals,self.tournament_size)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father,mother=complete(competitors_1),complete(competitors_2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnfather,motherLinearRankingSelection\u4e0b\u9762\u4e24\u4e2a\u4ecb\u7ecd\u7684\u9009\u62e9\u7b56\u7565\u90fd\u662f\u57fa\u4e8e\u6392\u5e8f\u7684\u9009\u62e9\u7b56\u7565\uff0c\u4e0a\u9762\u63d0\u5230\u7684\u7b2c\u4e00\u79cd\u57fa\u672c\u8f6e\u76d8\u8d4c\u9009\u62e9\u7b97\u6cd5\uff0c\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5c31\u662f\u5982\u679c\u4e00\u4e2a\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\u503c\u4e3a0\u7684\u8bdd\uff0c\u5219\u88ab\u9009\u4e2d\u7684\u6982\u7387\u5c06\u4f1a\u662f0,\u8fd9\u4e2a\u4e2a\u4f53\u5c06\u4e0d\u80fd\u4ea7\u751f\u540e\u4ee3\u3002\u4e8e\u662f\u6211\u4eec\u9700\u8981\u4e00\u79cd\u57fa\u4e8e\u6392\u5e8f\u7684\u7b97\u6cd5\uff0c\u6765\u7ed9\u6bcf\u4e2a\u4e2a\u4f53\u5b89\u6392\u76f8\u5e94\u7684\u9009\u4e2d\u6982\u7387\u3002\u5728LinearRankingSelection\u4e2d\uff0c\u79cd\u7fa4\u4e2d\u7684\u4e2a\u4f53\u9996\u5148\u6839\u636e\u9002\u5e94\u5ea6\u7684\u503c\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u7ed9\u6240\u6709\u4e2a\u4f53\u8d4b\u4e88\u4e00\u4e2a\u5e8f\u53f7\uff0c\u6700\u597d\u7684\u4e2a\u4f53\u4e3aN,\u88ab\u9009\u4e2d\u7684\u6982\u7387\u4e3aPmax,\u6700\u5dee\u7684\u4e2a\u4f53\u5e8f\u53f7\u4e3a1,\u88ab\u9009\u4e2d\u7684\u6982\u7387\u4e3aPmin\uff0c\u4e8e\u662f\u5176\u4ed6\u7684\u5728\u4ed6\u4eec\u4e2d\u95f4\u7684\u4e2a\u4f53\u7684\u6982\u7387\u4fbf\u53ef\u4ee5\u6839\u636e\u5982\u4e0b\u516c\u5f0f\u5f97\u5230:\u5b9e\u73b0\u4ee3\u7801:Pythonfromrandomimportrandomfromitertoolsimportaccumulatefrombisectimportbisect_rightfrom...plugin_interfaces.operators.selectionimportGASelectionclassLinearRankingSelection(GASelection):def__init__(self,pmin=0.1,pmax=0.9):'''SelectionoperatorusingLinearRankingselectionmethod.Reference:BakerJE.Adaptiveselectionmethodsforgeneticalgorithms[C]//ProceedingsofanInternationalConferenceonGeneticAlgorithmsandtheirapplications.1985:101-111.'''#Selectionprobabilitiesfortheworstandbestindividuals.self.pmin,self.pmax=pmin,pmaxdefselect(self,population,fitness):'''Selectapairofparentindividualsusinglinearrankingmethod.'''#Individualnumber.NP=len(population)#Addranktoallindividualsinpopulation.sorted_indvs=sorted(population.individuals,key=fitness,reverse=True)#Assignselectionprobabilitieslinearly.#NOTE:Heretherankibelongsto{1,...,N}p=lambdai:(self.pmin+(self.pmax-self.pmin)*(i-1)/(NP-1))probabilities=[self.pmin]+[p(i)foriinrange(2,NP)]+[self.pmax]#Normalizeprobabilities.psum=sum(probabilities)wheel=list(accumulate([p/psumforpinprobabilities]))#Selectparents.father_idx=bisect_right(wheel,random())father=population[father_idx]mother_idx=(father_idx+1)%len(wheel)mother=population[mother_idx]returnfather,mother123456789101112131415161718192021222324252627282930313233343536373839404142fromrandomimportrandomfromitertoolsimportaccumulatefrombisectimportbisect_right\u00a0from...plugin_interfaces.operators.selectionimportGASelection\u00a0classLinearRankingSelection(GASelection):\u00a0\u00a0\u00a0\u00a0def__init__(self,pmin=0.1,pmax=0.9):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SelectionoperatorusingLinearRankingselectionmethod.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Reference:BakerJE.Adaptiveselectionmethodsforgenetic\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0algorithms[C]//ProceedingsofanInternationalConferenceonGenetic\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Algorithmsandtheirapplications.1985:101-111.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Selectionprobabilitiesfortheworstandbestindividuals.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.pmin,self.pmax=pmin,pmax\u00a0\u00a0\u00a0\u00a0\u00a0defselect(self,population,fitness):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Selectapairofparentindividualsusinglinearrankingmethod.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Individualnumber.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0NP=len(population)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Addranktoallindividualsinpopulation.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sorted_indvs=sorted(population.individuals,key=fitness,reverse=True)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Assignselectionprobabilitieslinearly.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#NOTE:Heretherankibelongsto{1,...,N}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p=lambdai:(self.pmin+(self.pmax-self.pmin)*(i-1)/(NP-1))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0probabilities=[self.pmin]+[p(i)foriinrange(2,NP)]+[self.pmax]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Normalizeprobabilities.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0psum=sum(probabilities)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0wheel=list(accumulate([p/psumforpinprobabilities]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Selectparents.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father_idx=bisect_right(wheel,random())\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father=population[father_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mother_idx=(father_idx+1)%len(wheel)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mother=population[mother_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnfather,motherExponentialRankingSelection\u7c7b\u4f3c\u4e0a\u9762\u7684LinearRanking\u9009\u62e9\u7b56\u7565\uff0c\u8fd9\u79cd\u6307\u6570\u6392\u5e8f\u4fbf\u662f\u5728\u786e\u5b9a\u6bcf\u4e2a\u4e2a\u4f53\u7684\u9009\u62e9\u6982\u7387\u7684\u65f6\u5019\u4f7f\u7528\u4e86\u6307\u6570\u5f62\u5f0f\u7684\u8868\u8fbe\u5f0f,\u5176\u4e2dc\u4e3a\u5e95\u6570\uff0c\u6ee1\u8db30<c<1:\u5b9e\u73b0\u4ee3\u7801:Pythonfromrandomimportrandomfromitertoolsimportaccumulatefrombisectimportbisect_rightfrom...plugin_interfaces.operators.selectionimportGASelectionclassExponentialRankingSelection(GASelection):def__init__(self,base=0.5):'''SelectionoperatorusingExponentialRankingselectionmethod.:parambase:Thebaseofexponent:typebase:floatinrange(0.0,1.0)'''ifnot(0.0<base<1.0):raiseValueError('Thebaseofexponentcmustinrange(0.0,1.0)')self.base=basedefselect(self,population,fitness):'''Selectapairofparentindividualsusingexponentialrankingmethod.'''#Individualnumber.NP=len(population)#NOTE:Heretherankibelongsto{1,...,N}p=lambdai:self.base**(NP-i)probabilities=[p(i)foriinrange(1,NP+1)]#Normalizeprobabilities.psum=sum(probabilities)wheel=list(accumulate([p/psumforpinprobabilities]))#Selectparents.father_idx=bisect_right(wheel,random())father=population[father_idx]mother_idx=(father_idx+1)%len(wheel)mother=population[mother_idx]returnfather,mother1234567891011121314151617181920212223242526272829303132333435fromrandomimportrandomfromitertoolsimportaccumulatefrombisectimportbisect_right\u00a0from...plugin_interfaces.operators.selectionimportGASelection\u00a0classExponentialRankingSelection(GASelection):\u00a0\u00a0\u00a0\u00a0def__init__(self,base=0.5):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SelectionoperatorusingExponentialRankingselectionmethod.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:parambase:Thebaseofexponent\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:typebase:floatinrange(0.0,1.0)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnot(0.0<base<1.0):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseValueError('Thebaseofexponentcmustinrange(0.0,1.0)')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.base=base\u00a0\u00a0\u00a0\u00a0\u00a0defselect(self,population,fitness):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Selectapairofparentindividualsusingexponentialrankingmethod.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Individualnumber.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0NP=len(population)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#NOTE:Heretherankibelongsto{1,...,N}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p=lambdai:self.base**(NP-i)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0probabilities=[p(i)foriinrange(1,NP+1)]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Normalizeprobabilities.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0psum=sum(probabilities)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0wheel=list(accumulate([p/psumforpinprobabilities]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Selectparents.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father_idx=bisect_right(wheel,random())\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0father=population[father_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mother_idx=(father_idx+1)%len(wheel)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0mother=population[mother_idx]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnfather,mother\u603b\u7ed3\u672c\u6587\u5bf9\u4e8e\u9057\u4f20\u7b97\u6cd5\u4e2d\u56db\u79cd\u4e0d\u540c\u7684\u9009\u62e9\u7b56\u7565\u8fdb\u884c\u4e86\u4ecb\u7ecd\u548c\u603b\u7ed3\uff0c\u540c\u65f6\u5bf9\u4e8e\u672c\u6587\u6240\u5199\u7684\u9057\u4f20\u7b97\u6cd5\u6846\u67b6\u7684\u81ea\u5b9a\u4e49\u7b97\u5b50\u63a5\u53e3\u8fdb\u884c\u4e86\u7b80\u8981\u7684\u4ecb\u7ecd\uff0c\u9488\u5bf9\u672c\u6587\u4e2d\u7684\u9009\u62e9\u7b56\u7565\u5206\u522b\u6839\u636e\u63a5\u53e3\u7684\u8981\u6c42\u5b9e\u73b0\u4e86\u76f8\u5e94\u7684\u7b97\u5b50\uff0c\u8fd9\u4e9b\u7b97\u5b50\u4e5f\u4f5c\u4e3aGAFT\u6846\u67b6\u7684\u5185\u7f6e\u7b97\u5b50\u653e\u5165\u5230GAFT\u4e2d\uff0c\u5bf9\u4e8e\u4f7f\u7528GAFT\u7684\u7ae5\u978b\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u4f7f\u7528\u3002\u53c2\u8003Shukla,Anupriya,HariMohanPandey,andDeeptiMehrotra.\u201cComparativereviewofselectiontechniquesingeneticalgorithm.\u201dFuturisticTrendsonComputationalAnalysisandKnowledgeManagement(ABLAZE),2015InternationalConferenceon.IEEE,2015.\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff011\u8d5e2\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["\u4e3a\u4ec0\u4e48\u4f60\u5e94\u8be5\u5b66 Python \uff1f"], "art_url": ["http://python.jobbole.com/88622/"], "art_create_time": ["2017/09/20"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/86a1298ce44ca9807871520b81767e6f.gif"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u9006\u65c5\u7ffb\u8bd1\uff0c\u9ec4\u5229\u6c11\u6821\u7a3f\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1ailuxonchik\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u5f15\u8a00\u7b2c\u4e00\u6b21\u63a5\u89e6Python\u662f\u5728\u4e00\u8282\u7f16\u7a0b\u5165\u95e8\u8bfe\u4e0a\u3002\u5176\u5b9e\uff0c\u5728\u6b64\u4e4b\u524d\u4e86\u89e3\u8fc7\u5b83\uff0c\u6240\u4ee5\u5728\u4e0a\u8bfe\u4e4b\u524d\u6211\u5bf9\u5b83\u7684\u8bed\u6cd5\u5df2\u7ecf\u5f88\u719f\u6089\u4e86\uff0c\u4f46\u5728\u4e0a\u8bfe\u4e4b\u524d\u6211\u6ca1\u6709\u7528\u5b83\u505a\u8fc7\u771f\u6b63\u7684\u9879\u76ee\u3002\u5c3d\u7ba1\u5bf9\u5b83\u6ca1\u6709\u592a\u5927\u5174\u8da3\uff0c\u4f46\u6211\u8ba4\u4e3a\u628a\u5b83\u4ecb\u7ecd\u7ed9\u4eba\u4eec\u53bb\u5b66\u4e60\u7f16\u7a0b\u8fd8\u662f\u5f88\u597d\u7684\u3002\u6211\u5bf9\u5b83\u4e0d\u662f\u4e0d\u559c\u6b22\uff0c\u800c\u662f\u4e00\u79cd\u201c\u65e0\u6240\u8c13\u201d\u7684\u6001\u5ea6\u3002\u539f\u56e0\u5f88\u7b80\u5355\uff1a\u5b83\u91cc\u9762\u6709\u592a\u591a\u201c\u9b54\u6cd5\u201d\u3002C\u548cJava\u8fd9\u4e9b\u8bed\u8a00\uff0c\u5bf9\u5e95\u5c42\u7684\u884c\u4e3a\u63cf\u8ff0\u7684\u5f88\u6e05\u6670\uff0cPython\u5219\u5b8c\u5168\u76f8\u53cd\u3002\u53e6\u5916\uff0cPython\u7ed3\u6784\u677e\u6563\uff1a\u5199\u5927\u578b\u590d\u6742\u7a0b\u5e8f\u65f6\uff0c\u9047\u5230\u89c4\u5219\u4e25\u8c28\u7684\u7a0b\u5e8f\u7ed3\u6784\u4f53\uff08\u6bd4\u5982\u6bcf\u4e2a\u6587\u4ef6\u4e00\u4e2a\u516c\u5171\u7c7b\uff09\uff0c\u6bd4\u5176\u4ed6\u8bed\u8a00\uff08\u6bd4\u5982Java\uff09\u8981\u8d39\u4e9b\u529b\u6c14\u3002\u4f46\u662f\uff0c\u5728\u8fd9\u4e9b\u65b9\u9762Python\u7ed9\u4e86\u4f60\u5f88\u5927\u7684\u81ea\u7531\u3002\u53e6\u4e00\u4ef6\u4e8b\u662f\u4e25\u683c\u7684\u7f16\u7801\u98ce\u683c\u548c\u8c03\u8bd5\uff1a\u56e0\u4e3aPython\u662f\u89e3\u91ca\u578b\u8bed\u8a00\uff0c\u67e5\u627e\u95ee\u9898\u4e0d\u592a\u5bb9\u6613\uff1a\u5982\u679cC\u8bed\u8a00\u6709\u8bed\u6cd5\u9519\u8bef\uff0c\u7f16\u8bd1\u5668\u4f1a\u76f4\u63a5\u505c\u6b62\u7f16\u8bd1\uff0c\u4f46\u5728\u89e3\u91ca\u578b\u8bed\u8a00\u4e2d\uff0c\u76f4\u5230\u6267\u884c\u5230\u95ee\u9898\u884c\uff0c\u95ee\u9898\u624d\u4f1a\u88ab\u53d1\u73b0\u3002\u8bd5\u7740\u5728\u9700\u8981\u6574\u6570\u7684\u65f6\u5019\u4f20\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1fcc\u4f1a\u9a6c\u4e0a\u63d0\u9192\u4f60\uff0cPython\u89e3\u91ca\u5668\u5374\u5bf9\u6b64\u4e00\u70b9\u90fd\u4e0d\u4ecb\u610f\uff08\u867d\u7136\u6709\u5de5\u5177\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u95ee\u9898\uff0c\u6bd4\u5982mypy\uff0c\u4f46\u6211\u8ba8\u8bba\u7684\u662f\u901a\u7528\u7684Python\uff09\u3002\u6211\u63d0\u5230\u7684\u8fd9\u4e9b\u95ee\u9898\u662f\u89e3\u91ca\u578b\u8bed\u8a00\u7684\u901a\u75c5\uff0c\u5e76\u975ePython\u72ec\u6709\uff0c\u4f46\u8fd9\u4e9b\u662f\u6211\u4e0d\u559c\u6b22\u5b83\u7684\u4e3b\u8981\u539f\u56e0\u3002\u8fd8\u6709\u4e00\u4e2a\u70e6\u4eba\u7684\u95ee\u9898\u662f\u5f3a\u5236\u7f29\u8fdb\u3002\u6211\u4eec\u8001\u5e08\uff08\u5f88\u4f18\u79c0\uff09\u8ba4\u4e3a\u8fd9\u662f\u597d\u4e8b\u60c5\uff0c\u56e0\u4e3a\u201c\u5b83\u5f3a\u5236\u6211\u4eec\u5f62\u6210\u7b80\u6d01\u7684\u4ee3\u7801\u98ce\u683c\u201d\u3002\u786e\u5b9e\u5982\u6b64\uff0c\u4f46\u8fd8\u662f\u6709\u70b9\u70e6\uff0c\u5f53\u4ee3\u7801\u6ca1\u6709\u6309\u9884\u671f\u6267\u884c\u65f6\uff0c\u4f60\u5206\u6790\u4ee3\u7801\u60f3\u8981\u627e\u51fabug\uff0c\u5b83\u5374\u65e0\u5f71\u65e0\u8e2a\uff0c\u8fc7\u4e86\u5f88\u957f\u65f6\u95f4\u4e4b\u540e\u4f60\u53d1\u73b0if\u8bed\u53e5\u90a3\u4e00\u884c\u6709\u4e00\u4e2a\u591a\u4f59\u7684\u7a7a\u683c\u3002\u6211\u66fe\u7ecf\u548c\u540c\u4e8b\u804a\u8fc7Python\uff0c\u544a\u8bc9\u4ed6\u4e3a\u4ec0\u4e48\u6211\u4e4b\u524d\u5bf9\u8fd9\u4e2a\u8bed\u8a00\u4e0d\u611f\u5192\uff0c\u4ed6\u7b11\u7740\u95ee\u6211\u201c\u95ee\u4ec0\u4e48\u4e0d\u559c\u6b22Python\u5462\uff1f\u56e0\u4e3a\u5b83\u8bfb\u8d77\u6765\u5f88\u50cf\u82f1\u8bed\uff1f\u201d\u3002\u662f\u7684\u3002\u56e0\u4e3a\u8fd9\u4e2a\u8bed\u8a00\u505a\u4e86\u5f88\u591a\u5e95\u5c42\u7684\u5de5\u4f5c\uff0c\u6709\u65f6\u5019\u4f1a\u4e0d\u6e05\u695a\u53d1\u751f\u4e86\u4ec0\u4e48\u3002\u4e3e\u4e2a\u8bfb\u6587\u4ef6\u7684\u4f8b\u5b50\uff0c\u5047\u8bbe\u4f60\u60f3\u4e00\u884c\u4e00\u884c\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u5e76\u6253\u5370\u51fa\u6765\u3002C\u4f1a\u8fd9\u4e48\u505a\uff1aC#include<stdio>intmain(void){FILE*fp;charbuff[256];//assumingalinewon'tcontainmorethan256charsfp=fopen(\"hello.txt\",\"r\");while(fgets(buff,256,fp)){printf(\"%s\",buff);}fclose(fp);return0;}1234567891011121314#include<stdio>\u00a0intmain(void){\u00a0\u00a0\u00a0\u00a0FILE*fp;\u00a0\u00a0\u00a0\u00a0charbuff[256];//assumingalinewon'tcontainmorethan256chars\u00a0\u00a0\u00a0\u00a0fp=fopen(\"hello.txt\",\"r\");\u00a0\u00a0\u00a0\u00a0\u00a0while(fgets(buff,256,fp)){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printf(\"%s\",buff);\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0fclose(fp);\u00a0\u00a0\u00a0\u00a0return0;}python\u8fd9\u4e48\u505a\uff1aPythonwithopen('hello.txt')asf:forlineinf:print(line)123withopen('hello.txt')asf:\u00a0\u00a0\u00a0\u00a0forlineinf:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(line)\u73b0\u5728\uff0c\u5f88\u591a\u4eba\u4f1a\u8ba4\u4e3a\u8fd9\u662fpython\u7684\u4f18\u52bf\uff0c\u7136\u800c\uff0c\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5e72\u4e86\u4ec0\u4e48\u4e00\u76ee\u4e86\u7136\uff1a\u83b7\u53d6\u4e00\u4e2a\u6587\u4ef6\u6307\u9488\u4ece\u6587\u4ef6\u8bfb\u53d6\u6bcf\u4e00\u884c\u6570\u636e\u5230\u7f13\u5b58\u4e2d\uff0c\u6253\u5370\u7f13\u5b58\u4e2d\u7684\u5185\u5bb9\u5173\u95ed\u6587\u4ef6\u6d41python\u7684\u4f8b\u5b50\u4e2d\u770b\u4e0d\u5230\u8fd9\u4e9b\uff0c\u5b83\u662f\u4e00\u79cd\u201c\u9b54\u6cd5\u822c\u7684\u201d\u8fc7\u7a0b\u3002\u73b0\u5728\uff0c\u6709\u4eba\u8ba4\u4e3a\u8fd9\u662f\u597d\u4e8b\uff0c\u56e0\u4e3a\u5c06\u7a0b\u5e8f\u5458\u4e0e\u5e95\u5c42\u5b9e\u73b0\u7ec6\u8282\u9694\u79bb\uff08\u6211\u540c\u610f\u8fd9\u4e2a\u8bf4\u6cd5\uff09\uff0c\u4f46\u6211\u60f3\u77e5\u9053\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\u3002\u6709\u8da3\u7684\u662f\uff0c\u6211\u4ee5\u4e0a\u63d0\u5230\u7684\u7f3a\u70b9\uff0c\u6211\u73b0\u5728\u8ba4\u4e3a\u90fd\u662f\u4f18\u70b9\u3002\u4e3a\u4e86\u516c\u5e73\u8d77\u89c1\uff0c\u6211\u5f3a\u8c03\uff0cPython\u91cc\u8fb9\u6ca1\u6709\u9b54\u6cd5\uff0c\u5982\u679c\u4f60\u591a\u4e86\u89e3\u4e00\u70b9\uff0c\u4f60\u4f1a\u53d1\u73b0\u771f\u7684\u6ca1\u6709\uff0c\u6709\u7684\u53ea\u662f\u8bed\u8a00\u89e3\u91ca\u4ee3\u7801\u7684\u65b9\u5f0f\uff0c\u4ece\u8fd9\u70b9\u6765\u770b\uff0c\u6211\u53d1\u73b0\u5b83\u633a\u6709\u610f\u601d\u7684\u3002\u5982\u679c\u4f60\u4e5f\u8fd9\u4e48\u89c9\u5f97\uff0c\u6211\u5efa\u8bae\u4f60\u6df1\u5165\u4e86\u89e3\u5b83\u7684\u5de5\u4f5c\u673a\u5236\uff0c\u5982\u679c\u6709\u4e1c\u897f\u50cf\u9b54\u6cd5\uff0c\u5c31\u627e\u51fa\u6765\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\uff0c\u4e8b\u60c5\u5c31\u4f1a\u53d8\u5f97\u6e05\u6670\uff0c\u9b54\u6cd5\u5c31\u53d8\u6210\u4e86\u4fbf\u5229\u3002\u6211\u7684\u8ba4\u8bc6\u53d1\u751f\u5f88\u5927\u7684\u53d8\u5316\uff0c\u5c24\u5176\u662f\u6211\u51b3\u5b9a\u4f7f\u7528Python\u540e\uff0c\u4e8b\u5b9e\u4e0a\u6211\u73b0\u5728\u662fPython\u7684\u6b7b\u5fe0\uff01\u73b0\u5728\u4f60\u4e5f\u8bb8\u4f1a\u60f3\u6211\u5c06\u4f1a\u5728\u54ea\u91cc\u8bf4\u670d\u4f60\u5b66Python\u662f\u4e2a\u597d\u4e3b\u610f\uff0c\u4e0d\u8981\u62c5\u5fc3\uff0c\u9a6c\u4e0a\u5c31\u5230\u3002\u4f5c\u4e3a\u5f15\u8a00\u7684\u7ed3\u5c3e\uff0c\u6211\u60f3\u8bf4\u660e\uff0c\u8fd9\u53ea\u662f\u6211\u5bf9\u8fd9\u4e2a\u8bed\u8a00\u7684\u4e2a\u4eba\u611f\u53d7\uff0c\u53ea\u662f\u4e2a\u4eba\u504f\u597d\u3002\u6211\u6ca1\u6709\u8bd5\u56fe\u4ee5\u201c\u5982\u679c\u4f60\u7528Python\uff0c\u4f60\u5c31\u4e0d\u662f\u771f\u6b63\u7684\u7a0b\u5e8f\u5458\uff08\u5b9e\u9645\u4e0a\uff0c\u6211\u4e0d\u8fd9\u4e48\u8ba4\u4e3a\uff09\u201d\u7684\u7406\u7531\u529d\u8bf4\u4eba\u4eec\u5b66C\u3002\u5f53\u6709\u4eba\u95ee\u6211\u4ed6\u4eec\u7684\u5165\u95e8\u8bed\u8a00\u5e94\u8be5\u9009\u54ea\u4e2a\uff0c\u6211\u901a\u5e38\u5efa\u8bae\u4ed6\u4eec\u9009Python\uff0c\u57fa\u4e8e\u6211\u4e0a\u8fb9\u63d0\u5230\u7684\u201c\u7f3a\u70b9\u201d\u7684\u539f\u56e0\u3002\u6211\u7684\u611f\u89c9\u6765\u6e90\u4e8e\u6211\u7684\u5174\u8da3\uff0c\u6211\u66fe\u7ecf\u5728\u505a\u4e00\u4e9b\u5f88\u5e95\u5c42\u7684\u4e1c\u897f\uff0c\u4f60\u80fd\u60f3\u5230\uff0cPython\u5e76\u4e0d\u9002\u7528\u3002Python\u8bed\u8a00\u7cbe\u7cb9\u5728\u501f\u7528\u4e86JavaScript\u7545\u9500\u4e66\u300aJavaScript\u8bed\u8a00\u7cbe\u7cb9\u300b\u4f5c\u4e3a\u672c\u8282\u6807\u9898\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u8ba8\u8bba\u672c\u6587\u7684\u4e3b\u9898\uff1a\u4e3a\u4ec0\u4e48\u4f60(\u6ca1\u9519\uff0c\u5c31\u662f\u4f60\uff01)\u5e94\u8be5\u5b66Python\u30021\u3001\u901a\u7528\u811a\u672c\u8bed\u8a00\u8fd9\u662f\u6211\u4f7f\u7528Python\u7684\u4e3b\u8981\u539f\u56e0\u3002\u6211\u66fe\u7ecf\u548c\u5f88\u591a\u4eba\u505a\u8fc7\u5f88\u591a\u9879\u76ee\uff0c\u4e0d\u540c\u7684\u4eba\u7528\u4e0d\u540c\u7684\u7cfb\u7edf\u3002\u5c31\u6211\u800c\u8a00\uff0c\u6211\u7ecf\u5e38\u5728windows\u7cfb\u7edf\u548clinux\u7cfb\u7edf\u4e4b\u95f4\u5207\u6362\u3002\u4e3e\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\uff0c\u6709\u4e00\u4e2a\u9879\u76ee\uff0c\u6211\u5199\u4e86\u9879\u76ee\u7684\u81ea\u52a8\u6d4b\u8bd5\u811a\u672c\uff0c\u7ed3\u679c\u53d1\u73b0\u53ea\u6709\u6211\u80fd\u7528\uff0c\u56e0\u4e3a\u662f\u7528PowerShell\u5199\u7684\uff0c\u800c\u6211\u662f\u9879\u76ee\u4e2d\u552f\u4e00\u4f7f\u7528Windows\u7684\u3002\u5f53\u65f6\u540c\u4e8b\u4eec\u81ea\u7136\u8ba4\u4e3abash\u662f\u6700\u597d\u7684\uff0c\u6211\u8fd8\u5411\u4ed6\u4eec\u89e3\u91caPowerShell\u9075\u5faa\u4e00\u79cd\u4e0d\u540c\u7684\u6a21\u5f0f\u5e76\u4e14\u6709\u5b83\u7684\u5f3a\u9879\uff08\u4f8b\u5982\uff0c\u5b83\u63d0\u4f9b\u4e86.NET\u6846\u67b6\u63a5\u53e3\uff09\uff0c\u5b83\u662f\u9762\u5411\u5bf9\u8c61\u7684\u811a\u672c\u8bed\u8a00\uff0c\u548cbash\u5b8c\u5168\u4e0d\u4e00\u6837\u3002\u73b0\u5728\u6211\u4e0d\u60f3\u8ba8\u8bba\u54ea\u4e2a\u66f4\u597d\uff0c\u56e0\u4e3a\u8fd9\u4e0d\u662f\u672c\u6587\u7684\u91cd\u70b9\u3002\u90a3\u4e48\u8fd9\u4e2a\u95ee\u9898\u600e\u4e48\u89e3\u51b3\u5462\uff1f\u55ef\u2026\u73b0\u5728\uff0c\u662f\u5426\u6709\u4e00\u79cd\u811a\u672c\u8bed\u8a00\u53ef\u4ee5\u5728\u6240\u6709\u4e3b\u6d41\u5e73\u53f0\u4e0a\u8fd0\u884c\u5462\uff1f\u4f60\u731c\u5bf9\u4e86\uff0c\u5b83\u5c31\u662fPython\u3002\u9664\u4e86\u53ef\u4ee5\u5728\u4e3b\u6d41\u5e73\u53f0\u4e0a\u8fd0\u884c\uff0c\u5b83\u8fd8\u662f\u5f00\u7bb1\u5373\u7528\u7684\u811a\u672c\u8bed\u8a00\u3002\u6807\u51c6\u5e93\u5305\u542b\u4e0d\u5c11\u5b9e\u7528\u7a0b\u5e8f\uff0c\u63d0\u4f9b\u4e86\u72ec\u7acb\u4e8e\u7cfb\u7edf\u7684\u5e38\u7528\u63a5\u53e3\u3002\u4e3e\u4e00\u4e2a\u7b80\u6d01\u660e\u4e86\u7684\u4f8b\u5b50\uff0c\u5047\u8bbe\u4f60\u60f3\u83b7\u53d6\u6587\u4ef6\u5939\u4e0b\u6240\u6709\u6587\u4ef6\u7684\u6587\u4ef6\u540d\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u5904\u7406\uff0c\u5728UNIX\u4e0b\uff0c\u4f60\u8981\u8fd9\u4e48\u505a\uff1aforfin*;doecho\"Processing$ffile...\";done1forfin*;doecho\"Processing$ffile...\";done\u7528PowerShell\u505a\u7c7b\u4f3c\u7684\u4e8b\u60c5\uff1aGet-ChildItem\".\"|Foreach-Object{$name=$_.NameWrite-Output\"Processing$($name)file...\"}12345Get-ChildItem\".\"|Foreach-Object{\u00a0\u00a0\u00a0\u00a0$name=$_.Name\u00a0\u00a0\u00a0\u00a0Write-Output\"Processing$($name)file...\"}AnequivalentfunctionalityinPythoncanbeachievedwith:python\u8fd9\u4e48\u505a\uff1afromosimportlistdirforfinlistdir('.'):print('Processing{}file...'.format(f))1234fromosimportlistdir\u00a0forfinlistdir('.'):\u00a0\u00a0\u00a0\u00a0print('Processing{}file...'.format(f))\u73b0\u5728\u6211\u8ba4\u4e3a\uff0cPython\u9664\u4e86\u53ef\u4ee5\u8dd1\u5728Linux\uff0cMacOSX\u548cWindows\u4e0a\uff0c\u5b83\u4e5f\u5f88\u6613\u8bfb\u3002\u4e0a\u8fb9\u4f8b\u5b50\u4e2d\u7684\u811a\u672c\u5f88\u7b80\u5355\uff0c\u5728\u590d\u6742\u7684\u4f8b\u5b50\u4e2d\u4e0d\u540c\u8bed\u8a00\u7684\u6613\u8bfb\u6027\u5dee\u5f02\u4f1a\u66f4\u660e\u663e\u3002\u5c31\u50cf\u6211\u4e4b\u524d\u63d0\u5230\u7684\uff0cPython\u81ea\u5e26\u4e86\u8bb8\u591a\u5f3a\u5927\u7684\u5e93\u7528\u6765\u53d6\u4ee3shell\u811a\u672c\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u6700\u6709\u7528\u7684\u662f\uff1aos\u2013\u63d0\u4f9b\u7cfb\u7edf\u65e0\u5173\u529f\u80fd\uff0c\u6bd4\u5982\u6587\u4ef6\u76ee\u5f55\u548c\u6587\u4ef6\u8bfb\u5199\u3002subprocess\u2013\u4ea7\u751f\u65b0\u8fdb\u7a0b\u3001\u4e0e\u8f93\u5165\u8f93\u51fa\u6d41\u548c\u8fd4\u56de\u4ee3\u7801\u4ea4\u4e92\u3002\u53ef\u4ee5\u7528\u5b83\u6765\u542f\u52a8\u7cfb\u7edf\u5df2\u5b89\u88c5\u7684\u7a0b\u5e8f\uff0c\u4f46\u8bf7\u8bb0\u4f4f\u5982\u679c\u4f60\u62c5\u5fc3\u811a\u672c\u7684\u53ef\u79fb\u690d\u6027\uff0c\u8fd9\u4e0d\u662f\u6700\u597d\u7684\u9009\u62e9\u3002shutil\u2013\u63d0\u4f9b\u5bf9\u6587\u4ef6\u548c\u6587\u4ef6\u96c6\u5408\u7684\u9ad8\u7ea7\u64cd\u4f5c\u3002argparse\u2013\u89e3\u6790\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u6784\u5efa\u547d\u4ee4\u884c\u63a5\u53e3\u3002\u597d\u4e86\uff0c\u5047\u8bbe\u4f60get\u5230\u4e86\u91cd\u70b9\uff0c\u8de8\u5e73\u53f0\u548c\u6613\u8bfb\u6027\u542c\u8d77\u6765\u633a\u4e0d\u9519\u7684\uff0c\u4f46\u662f\u4f60\u771f\u7684\u559c\u6b22\u7c7bUNIXshell\u7c7b\u4f3c\u7684\u8bed\u6cd5\u600e\u4e48\u529e\uff1f\u544a\u8bc9\u4f60\u4e2a\u597d\u6d88\u606f\uff0c\u9c7c\u548c\u718a\u638c\u53ef\u4ee5\u517c\u5f97\uff01\u770b\u770bPlumbum\uff0c\u5b83\u662f\u4e00\u4e2aPython\u6a21\u5757\uff0c\u5b83\u7684\u5ea7\u53f3\u94ed\u662f\u201c\u518d\u4e5f\u4e0d\u5199shell\u811a\u672c\u201d\u3002\u5b83\u6a21\u4eff\u4e86shell\u8bed\u6cd5\uff0c\u540c\u65f6\u4fdd\u6301\u4e86\u8de8\u5e73\u53f0\u3002\u4e0d\u8981\u5b8c\u5168\u629b\u5f03shell\u811a\u672c\u5373\u4f7fPython\u53ef\u4ee5\u5b8c\u5168\u53d6\u4ee3shell\u811a\u672c\uff0c\u4f46\u4e5f\u4e0d\u662f\u5fc5\u987b\u8fd9\u4e48\u505a\uff0c\u56e0\u4e3aPython\u811a\u672c\u5929\u751f\u9002\u5408Unix\u547d\u4ee4\u884c\u7406\u5ff5\uff0c\u4f60\u8981\u505a\u7684\u5c31\u662f\u8ba9\u5b83\u4eec\u4ecesys.stdin(\u6807\u51c6\u8f93\u5165)\u8bfb\u6570\u636e\uff0c\u5411sys.stdout(\u6807\u51c6\u8f93\u51fa)\u5199\u6570\u636e\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u6587\u4ef6\uff0c\u6bcf\u884c\u6709\u4e00\u4e2a\u5355\u8bcd\uff0c\u4f60\u60f3\u77e5\u9053\u6bcf\u4e2a\u5355\u8bcd\u5728\u6587\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u3002\u8fd9\u79cd\u60c5\u51b5\u5c31\u6ca1\u5fc5\u8981\u5168\u90e8\u662f\u7528Python\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528cat\u547d\u4ee4\u548c\u6211\u4eec\u7684\u811a\u672c\uff0c\u79f0\u5b83\u4e3anamecount.py\u4e00\u8d77\u6765\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\u3002\u5047\u8bbe\u6709\u4e00\u4e2a\u6587\u4ef6\uff0c\u540d\u4e3anames.txt\uff0c\u5185\u5bb9\u5982\u4e0b\uff1acatdogmousebirdcatcatdog1234567catdogmousebirdcatcatdog\u73b0\u5728\u4f7f\u7528\u6211\u4eec\u7684\u811a\u672c\uff1a$>catnames.txt|namecount.py1$>catnames.txt|namecount.pyPowershell:$>Get-Contentnames.txt|pythonnamecount.py1$>Get-Contentnames.txt|pythonnamecount.py\u671f\u671b\u7684\u8f93\u51fa\u5982\u4e0b\uff08\u987a\u5e8f\u53ef\u80fd\u4f1a\u53d8\u5316\uff09\uff1abird1mouse1cat3dog21234bird1mouse1cat3dog2namecount.py\u6e90\u7801:#!/usr/bin/envpython3importsysdefcount_names():names={}fornameinsys.stdin.readlines():name=name.strip()ifnameinnames:names[name]+=1else:names[name]=1forname,countinnames.items():sys.stdout.write(\"{0}\\t{1}\\n\".format(name,count))if__name__==\"__main__\":count_names()123456789101112131415161718#!/usr/bin/envpython3importsys\u00a0defcount_names():\u00a0\u00a0\u00a0\u00a0names={}\u00a0\u00a0\u00a0\u00a0fornameinsys.stdin.readlines():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name=name.strip()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnameinnames:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0names[name]+=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0names[name]=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forname,countinnames.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.stdout.write(\"{0}\\t{1}\\n\".format(name,count))\u00a0if__name__==\"__main__\":\u00a0\u00a0\u00a0\u00a0count_names()\u65e0\u5e8f\u7684\u4fe1\u606f\u53ef\u8bfb\u6027\u5dee\uff0c\u4f60\u53ef\u80fd\u60f3\u6309\u5355\u8bcd\u51fa\u73b0\u7684\u6b21\u6570\u5bf9\u5176\u6392\u5e8f\uff0c\u8ba9\u6211\u4eec\u8bd5\u8bd5\u3002\u6211\u4eec\u8981\u7528\u7ba1\u9053\u8f93\u51fa\u6587\u4ef6\u5185\u5bb9\u4f9b\u5185\u5efa\u547d\u4ee4\u5904\u7406\u3002\u6309\u6570\u5b57\u964d\u5e8f\u6392\u5e8f\uff0c\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f$>catnames.txt|namecount.py|sort-rn\u3002\u5982\u679c\u4f7f\u7528PowerShell\u5e94\u8be5\u8fd9\u6837\uff1a$>Get-Contentnames.txt|pythonnamecount.py|Sort-Object{[int]$_.split()[-1]}-Descending\uff08\u4f60\u53ef\u80fd\u542c\u5230\u4e86Unixer\u7684\u5410\u69fd\u58f0\u4e86\uff0cPowerShell\u600e\u4e48\u8fd9\u4e48\u7e41\u7410\uff09\u3002\u8fd9\u56de\u6211\u4eec\u7684\u8f93\u51fa\u662f\u786e\u5b9a\u7684\uff0c\u5982\u4e0b\u6240\u793a\uff1acat3dog2bird1mouse11234cat3dog2bird1mouse1\uff08\u65c1\u6ce8\uff1a\u5982\u679c\u4f60\u7528PowerShell\uff0ccat\u662fGet-Content\u7684\u522b\u540d\uff0csort\u662fSort_object\u7684\u522b\u540d\uff0c\u6240\u4ee5\u4ee5\u4e0a\u547d\u4ee4\u53ef\u4ee5\u5199\u6210\uff1a$>catnames.txt|pythonnamecount.py\u548c$>catnames.txt|pythonnamecount.py|sort{[int]$_.split()[-1]}-Descending\uff09\u4f46\u613f\u6211\u6210\u529f\u8bf4\u670d\u4f60python\u662f\u4f60\u67d0\u4e9b\u811a\u672c\u7684\u66ff\u4ee3\u54c1\uff0c\u4f60\u4e0d\u5fc5\u5b8c\u5168\u629b\u5f03shell\u811a\u672c\uff0c\u56e0\u4e3a\u4f60\u53ef\u4ee5\u5c06Python\u878d\u5408\u5230\u4f60\u73b0\u6709\u7684\u5de5\u4f5c\u6d41\u548c\u5de5\u5177\u7bb1\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u4ece\u5b83\u8de8\u5e73\u53f0\uff0c\u66f4\u597d\u7684\u53ef\u8bfb\u6027\uff0c\u8fd8\u6709\u4e30\u5bcc\u7684\u5e93\u4e2d\u83b7\u76ca\uff08\u540e\u9762\u4f1a\u8bb2\uff09\u30022\u3001\u5927\u91cf\u4f18\u79c0\u7684\u5e93Python\u6709\u975e\u5e38\u4e30\u5bcc\u7684\u5e93\u3002\u6211\u7684\u610f\u601d\u662f\uff0c\u51e0\u4e4e\u4efb\u4f55\u4e8b\u90fd\u6709\u5e93\uff08\u6709\u8da3\u7684\u662f\uff1a\u5982\u679c\u4f60\u5728\u4f60\u7684Python\u89e3\u91ca\u5668\u4e2d\u8f93\u5165importantigravity\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00xkdc\u6f2b\u753b\u7684\u9875\u9762\uff0c\u662f\u4e0d\u662f\u5f88\u9177\uff1f\uff09\u3002\u6211\u4e0d\u662f\u5f88\u63a8\u5d07\u5806\u53e0\u6a21\u5757\u5f0f\u7684\u7f16\u7a0b\uff0c\u4f46\u4f60\u4e0d\u5fc5\u8fd9\u6837\u3002\u56e0\u4e3a\u6709\u592a\u591a\u7684\u5e93\uff0c\u4e0d\u8868\u793a\u4f60\u90fd\u8981\u4f7f\u7528\u3002\u6211\u4e5f\u4e0d\u559c\u6b22\u5806\u53e0\u6a21\u5757\uff08\u5b83\u6709\u70b9\u50cfCBSE\uff09\uff0c\u6211\u5728\u4e86\u89e3\u5b83\u4eec\u4e4b\u540e\u624d\u4f7f\u7528\u3002\u4f8b\u5982\uff0c\u6211\u51b3\u5b9a\u7814\u7a76\u9a6c\u5c14\u79d1\u592b\u94fe\uff0c\u6211\u60f3\u4e86\u4e00\u4e2a\u9879\u76ee\uff1a\u6293\u53d6\u4e00\u4e2a\u827a\u672f\u5bb6\u7684\u6240\u6709\u6b4c\u8bcd\uff0c\u5efa\u7acb\u4e00\u4e2a\u9a6c\u5c14\u79d1\u592b\u94fe\uff0c\u7136\u540e\u4ece\u5176\u4e2d\u751f\u6210\u6b4c\u66f2\u3002\u8fd9\u4e2a\u9879\u76ee\u7684\u76ee\u7684\u662f\u751f\u6210\u7684\u6b4c\u66f2\u5e94\u8be5\u80fd\u53cd\u6620\u51fa\u827a\u672f\u5bb6\u7684\u98ce\u683c\u3002\u6240\u4ee5\u6211\u5230\u5904\u627e\u76f8\u5173\u7684\u4e1c\u897f\uff0c\u641e\u51fa\u4e86lyricst\u9879\u76ee\uff08\u8fd9\u53ea\u662f\u4e2a\u6837\u54c1\uff0c\u8fd8\u4e0d\u6210\u719f\uff0c\u53ea\u662f\u4e00\u4e2a\u6d4b\u8bd5\u9879\u76ee\uff0c\u5982\u6211\u6240\u8a00\uff0c\u6211\u53ea\u662f\u968f\u4fbf\u641e\u4e86\u4e00\u4e0b\uff0c\u6ca1\u60f3\u6df1\u5165\u3002\u5982\u679c\u4f60\u60f3\u73a9\u7684\u8bdd\uff0c\u5b83\u5305\u542b\u6709\u547d\u4ee4\u884c\u754c\u9762\u548c\u793a\u4f8b\u7684\u8bf4\u660e\u6587\u6863\uff09\u3002\u6211\u8ba4\u4e3a\uff0c\u6700\u597d\u7684\u627e\u6b4c\u8bcd\u7684\u5730\u65b9\u662fRAPGenius\uff0c\u56e0\u4e3a\u5b83\u5f88\u6d3b\u8dc3\uff0c\u7ecf\u5e38\u66f4\u65b0\u3002\u4e3a\u4e86\u83b7\u53d6\u827a\u672f\u5bb6\u6240\u6709\u7684\u6b4c\u8bcd\uff0c\u6211\u5fc5\u987b\u4ece\u7f51\u7ad9\u4e0a\u722c\uff0c\u7136\u540e\u5904\u7406HTML\u3002\u5e78\u8fd0\u7684\u662f\uff0cPython\u5f88\u9002\u5408\u505a\u7f51\u7edc\u722c\u866b\uff0c\u5b83\u6709\u5f3a\u5927\u7684\u5e93\u50cfBeautifulSoup\u53ef\u4ee5\u5904\u7406HTML\u3002\u6240\u4ee5\u6211\u662f\u8fd9\u4e48\u505a\u7684\uff0c\u5148\u4f7f\u7528BeautifulSoup\u4ece\u7f51\u9875\u4e2d\u62bd\u53d6\u6211\u9700\u8981\u7684\u4fe1\u606f\uff08\u5c31\u662f\u6b4c\u8bcd\uff09\u7136\u540e\u7528\u8fd9\u4e9b\u4fe1\u606f\u6784\u5efa\u9a6c\u5c14\u79d1\u592b\u94fe\u3002\u5f53\u7136\u6211\u66fe\u7ecf\u60f3\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6784\u5efa\u81ea\u5df1\u7684HTML\u89e3\u6790\u5668\uff0c\u4f46\u662f\u8fd9\u4e2a\u5e93\u7684\u5b58\u5728\u8ba9\u6211\u66f4\u5173\u6ce8\u9879\u76ee\u7684\u6700\u7ec8\u76ee\u7684\uff1a\u628a\u73a9\u9a6c\u5c14\u79d1\u592b\u94fe\uff0c\u8ba9\u5b83\u66f4\u6709\u8da3\uff0c\u6bd4\u65b9\u8bf4\uff0c\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4e9b\u5185\u5bb9\u51fa\u6765\u30023\u3001\u7528\u6765\u505a\u6e17\u900f\u6d4b\u8bd5\u5f88\u5f3a\u5927\u5982\u679c\u4f60\u5728\u4f5c\u6e17\u900f\u6d4b\u8bd5\u6216\u4ec5\u4ec5\u662f\u559c\u6b22\u73a9\u73a9\uff0cPython\u662f\u4f60\u7684\u597d\u5e2e\u624b\uff01\u7531\u4e8ePython\u5728\u6240\u6709LInux\u548cMACOS\u673a\u5668\u4e0a\u90fd\u6709\u5b89\u88c5\uff0c\u8fd8\u6709\u4e30\u5bcc\u7684\u5e93\uff0c\u5b8c\u5584\u7684\u8bed\u6cd5\uff0c\u8fd8\u662f\u4e00\u95e8\u811a\u672c\u8bed\u8a00\uff0c\u8ba9\u5b83\u5f88\u9002\u5408\u5e72\u8fd9\u4e2a\u3002\u53e6\u4e00\u4e2a\u6211\u4e3a\u4ec0\u4e48\u51b3\u5b9a\u4f7f\u7528Python\u7684\u539f\u56e0\uff08\u9664\u4e86\u6211\u4e4b\u524d\u63d0\u5230\u7684\uff09\u662f\u6211\u5bf9\u5b89\u5168\u5f88\u611f\u5174\u8da3\uff0cPython\u662f\u7528\u6765\u505a\u6e17\u900f\u6d4b\u8bd5\u7684\u5b8c\u7f8e\u9009\u62e9\u3002\u6211\u5728\u7b2c\u4e00\u6b21\u8fdb\u5165\u9886\u57df\u662f\u901a\u8fc7Scapy\uff08\u6216Scapy3k\uff0cpython3\uff09\uff0c\u6211\u5370\u8c61\u5f88\u6df1\u3002Scapy\u80fd\u591f\u521b\u5efa\u3001\u76d1\u542c\u3001\u89e3\u6790\u6570\u636e\u5305\u3002\u5b83\u7684API\u5f88\u7b80\u5355\uff0c\u6587\u6863\u4e5f\u5f88\u5b8c\u5584\u3002\u4f60\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u521b\u5efa\u4e0d\u540c\u5c42\u7684\u6570\u636e\uff08\u6211\u6307\u7684\u662fOSI\u6a21\u578b\uff09\u6216\u8005\u6355\u83b7\u5b83\u4eec\u5bf9\u5176\u8fdb\u884c\u5206\u6790\u6216\u4fee\u6539\u3002\u4f60\u751a\u81f3\u53ef\u4ee5\u5bfc\u51fapcap\u6587\u4ef6\u7528Wireshark\u6253\u5f00\u3002\u867d\u7136\u9664\u4e86\u6293\u5305\u8fd8\u80fd\u505a\u5f88\u591a\u4e8b\u60c5\uff0c\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u7684\u5e93\u4e5f\u53ef\u4ee5\uff0c\u4f46\u6211\u5728\u8fd9\u91cc\u4e0d\u4f1a\u6d89\u53ca\uff0c\u56e0\u4e3a\u8fd9\u4e0d\u662f\u672c\u6587\u7684\u91cd\u70b9\u800c\u4e14\u8981\u5c55\u5f00\u8bb2\u7684\u8bdd\u9700\u8981\u4e00\u7bc7\u6587\u7ae0\u3002\u6709\u4eba\u53ef\u80fd\u4f1a\u8bf4\uff0c\u201c\u54e6\uff0c\u592a\u68d2\u4e86\uff0c\u4f46\u6211\u611f\u5174\u8da3\u7684\u662fWindows\u8bbe\u5907\uff0c\u91cc\u8fb9\u4e0d\u4f1a\u81ea\u5e26Python\u201d\u3002\u522b\u5f53\u5fc3\uff0c\u4f60\u53ef\u4ee5\u7528py2exe\u628a\u4f60\u7684\u811a\u672c\u7f16\u8bd1\u6210.exe\u6587\u4ef6\u3002\u6587\u4ef6\u53ef\u80fd\u4f1a\u6709\u70b9\u5927\uff08\u53d6\u51b3\u4e8e\u4f60\u662f\u7528\u7684\u5e93\u7684\u6570\u91cf\uff09\uff0c\u4f46\u8fd9\u4e0d\u662f\u91cd\u70b9\u3002\u5982\u679c\u4f60\u5f88\u597d\u5947\uff0c\u8bf7\u53c2\u8003listofPythonpentestingtools\u3002\u6587\u672b\u6211\u8fd8\u63a8\u8350\u4e86\u51e0\u672c\u4e66\u30024\u3001\u9ed1\u5ba2\u7684\u8bed\u8a00Python\u662f\u53ef\u5851\u6027\u5f88\u5f3a\u7684\u8bed\u8a00\u3002\u4f60\u53ef\u4ee5\u7528\u5404\u79cd\u65b9\u6cd5\u6539\u9020\u5b83\u3002\u53ef\u53c2\u89c1\u300aalteringthewayimportswork\u300b\u548c\u300amessingwithclassesbeforetheyarecreated\u300b\u8fd9\u4e24\u7bc7\u6587\u7ae0\u3002\u8fd9\u53ea\u662f\u4e00\u4e9b\u4f8b\u5b50\u3002\u4e5f\u8ba9\u5b83\u6210\u4e3a\u5f3a\u5927\u7684\u811a\u672c\u8bed\u8a00\uff08\u5728\u7b2c\u4e00\u8282\u6709\u8bf4\uff09\u9002\u5408\u505a\u6e17\u900f\u6d4b\u8bd5\uff08\u7b2c\u4e09\u8282\uff09\uff0c\u56e0\u4e3a\u5b83\u7ed9\u4e86\u4f60\u5f88\u5927\u7684\u81ea\u7531\u3002\u6211\u4e0d\u60f3\u8bb2\u592a\u591a\uff0c\u4f46\u6211\u4f1a\u8bb2\u8ff0\u5b83\u8ba9\u6211\u60ca\u8bb6\u7684\u5730\u65b9\u3002\u5f53\u65f6\uff0c\u6211\u5728\u505a\u4e00\u4e2a\u7f51\u7edc\u722c\u866b(Python\u5f88\u9002\u5408\u5e72\u8fd9\u4e2a\uff01)\uff0c\u6211\u7528\u7684\u5176\u4e2d\u4e00\u4e2a\u5de5\u5177\u662fBeautifulSoup\u3002\u8fd9\u662f\u6211\u7528\u6765\u5b66\u4e60Python\u7684\u9879\u76ee\u4e4b\u4e00\u3002Beautifulsoup\u5904\u7406HTML\u7684\u8bed\u6cd5\u6e05\u6670\u76f4\u89c2\uff0c\u539f\u56e0\u662f\u5728\u81ea\u5b9a\u4e49\u884c\u4e3a\u65b9\u9762\uff0cPython\u7ed9\u4e86\u4f60\u5f88\u5927\u7684\u81ea\u7531\u3002\u4e86\u89e3\u4e00\u756aAPI\u540e\uff0c\u53d1\u73b0\u6709\u201c\u9b54\u6cd5\u201d\u3002\u548c\u8fd9\u79cd\u60c5\u51b5\u7c7b\u4f3c\uff1aPythonfrombs4importBeautifulSoupsoup=BeautifulSoup('<pclass=\"someclass\">Hello</p>','html.parser')soup.p1234frombs4importBeautifulSoup\u00a0soup=BeautifulSoup('<pclass=\"someclass\">Hello</p>','html.parser')soup.p\u4e0a\u9762\u7684\u4ee3\u7801\u5229\u7528\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u53c2\u6570\u521b\u5efa\u4e86\u4e00\u4e2aBeautifulsSoup\u5b9e\u4f8b\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u6211\u60f3\u4f7f\u7528Python\u81ea\u5e26\u7684HTML\u89e3\u6790\u5668\uff08BeautifulSoup\u53ef\u4ee5\u642d\u914d\u591a\u79cd\u89e3\u6790\u5668\uff09\u3002soup.p\u8fd4\u56de\u4e00\u4e2aTag(bs4.element.Tag)\u5bf9\u8c61\uff0c\u8868\u793a\u5c06\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002\u4ee5\u4e0a\u4ee3\u7801\u7684\u8f93\u51fa\u662f\uff1aXHTML<pclass=\"someclass\">Hello</p>1<pclass=\"someclass\">Hello</p>\u73b0\u5728\u4f60\u53ef\u80fd\u4f1a\u60f3\uff0c\u4f60\u8bf4\u7684\u9b54\u6cd5\u5728\u54ea\uff1f\u9a6c\u4e0a\u5c31\u6765\u3002\u9b54\u6cd5\u5728\u4e8e\u4e0a\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u88ab\u4fee\u6539\u4e3a\u4efb\u4f55\u6807\u7b7e\uff0c\u751a\u81f3\u53ef\u4ee5\u662f\u81ea\u5b9a\u4e49\u7684\u3002\u5b83\u610f\u5473\u7740\u4e0b\u9762\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff1aPythonfrombs4importBeautifulSoupsoup=BeautifulSoup('<foobarfooclass=\"someclass\">Hello</foobarfoo>','html.parser')soup.foobarfoo1234frombs4importBeautifulSoupsoup=BeautifulSoup('<foobarfooclass=\"someclass\">Hello</foobarfoo>','html.parser')soup.foobarfooTheoutputisthefollowing:\u8f93\u51fa\u5982\u4e0b\uff1a<foobarfooclass=\"someclass\">Hello</foobarfoo>1<foobarfooclass=\"someclass\">Hello</foobarfoo>\u5f53\u6211\u53d1\u73b0\u8fd9\u6837\u4e5f\u80fd\u8fd0\u884c\uff0c\u6211\u7684\u53cd\u5e94\u662f\u201c\u600e\u4e48\u56de\u4e8b\uff1f\u201d\u3002\u56e0\u4e3a\uff0c\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u5f88\u5bb9\u6613\u5b9e\u73b0\uff0c\u6211\u7684\u610f\u601d\u662f\u6700\u76f4\u63a5\u7684\u65b9\u6cd5\u662f\u4e3a\u6bcf\u4e00\u4e2aHTML\u6807\u7b7e\u5b9a\u4e49\u4e00\u4e2a\u5c5e\u6027\uff08\u5b9e\u4f8b\u53d8\u91cf\uff09\uff0c\u5728\u89e3\u6790\u8fc7\u7a0b\u4e2d\u5982\u679c\u627e\u5230\u4e86\uff0c\u5c31\u8d4b\u503c\u7ed9\u5b83\u4eec\u3002\u4f46\u662f\u8fd9\u5bf9\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0d\u9002\u7528\uff0c\u4e0d\u53ef\u80fd\u5bf9\u6240\u6709\u7684\u5b57\u7b26\u4e32\u5b9a\u4e49\u5c5e\u6027\u3002\u6211\u60f3\u77e5\u9053\u5b83\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u6211\u6253\u5f00BeautifulSoups\u6e90\u4ee3\u7801\u5f00\u59cb\u5bfb\u627e\u3002\u6211\u6ca1\u6709\u53d1\u73b0\u4efb\u4f55\u547d\u540d\u4e3ap\u7684\u5c5e\u6027\uff0c\u8fd9\u4e00\u70b9\u4e5f\u4e0d\u5947\u602a\uff0c\u89e3\u6790\u51fd\u6570\u6ca1\u6709\u5bf9\u5176\u8d4b\u503c\u3002\u8c37\u6b4c\u4e00\u756a\u540e\uff0c\u6211\u627e\u5230\u4e86\u7b54\u6848\uff1a\u9b54\u6cd5\u65b9\u6cd5\u3002\u4ec0\u4e48\u662f\u9b54\u6cd5\u65b9\u6cd5\uff0c\u4e3a\u4ec0\u4e48\u8981\u53eb\u8fd9\u4e2a\u540d\u5b57\uff1f\u4e8b\u5b9e\u4e0a\uff0c\u9b54\u6cd5\u65b9\u6cd5\u662f\u7ed9\u4f60\u7684\u7c7b\u8d4b\u4e88\u9b54\u6cd5\u7684\u65b9\u6cd5\u3002\u8fd9\u79cd\u65b9\u6cd5\u901a\u5e38\u524d\u540e\u6709\u4e24\u6761\u4e0b\u5212\u7ebf\uff08\u4f8b\u5982__init__()\uff09,\u5728Python\u6587\u6863\u7684DataModelmodelsection\u6709\u5bf9\u5b83\u7684\u8bf4\u660e\u3002\u771f\u6b63\u8ba9BeautifulSoup\u62e5\u6709\u8fd9\u4e2a\u529f\u80fd\u7684\u9b54\u6cd5\u65b9\u6cd5\u662f__getattr__(self,name)\uff08self\u5728python\u4e2d\u6307\u5411\u5b9e\u4f8b\uff0c\u548cJava\u4e2d\u7684this\u7c7b\u4f3c\uff09\u3002\u5982\u679c\u53bb\u67e5\u770b\u6587\u6863\uff0c\u4f60\u4f1a\u53d1\u73b0\u7b2c\u4e00\u6bb5\u5982\u4e0b\uff1a\u5982\u679c\u5728\u5c5e\u6027\u5e38\u89c1\u5730\u65b9\u627e\u4e0d\u5230\u5c5e\u6027\u65f6\uff0c\u6bd4\u5982\u65e2\u4e0d\u662f\u5b9e\u4f8b\u5c5e\u6027\uff0c\u53c8\u6ca1\u6709\u5728self\u7c7b\u6811\u4e2d\u627e\u5230\uff0c\u5219\u8c03\u7528\u8be5\u65b9\u6cd5\uff08object.__getattr__(self,name)\uff09\u3002\u53c2\u6570name\u5c31\u662f\u5c5e\u6027\u540d\u8fd9\u4e2a\u65b9\u6cd5\u5e94\u5f53\u8fd4\u56de\uff08\u8ba1\u7b97\u8fc7\u7684\uff09\u5c5e\u6027\u503c\u6216\u629b\u51faAttributeError\u5f02\u5e38\u3002\u5f53\u4f60\u5c1d\u8bd5\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u5bf9\u8c61\u7684__getattr__(self,name)\u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\uff0c\u5c06\u8fd4\u56de\u4e00\u4e2a\u4ee5name\u4f5c\u4e3a\u540d\u5b57\u7684\u5c5e\u6027\u7684\u5b57\u7b26\u4e32\u3002\u4e3e\u4e2a\u4f8b\u5b50\u3002\u5047\u8bbe\u4f60\u6709\u4e00\u4e2aPerson\u7c7b\uff0c\u62e5\u6709first_name\u5c5e\u6027\u3002\u6211\u4eec\u7ed9\u4f7f\u7528\u8005\u8bbf\u95ee\u548cname\u76f8\u540c\u5c5e\u6027\u7684\u5185\u5bb9\u7684\u80fd\u529b\u3002\u4e0b\u9762\u662f\u4ee3\u7801\uff1aclassPerson(object):def__init__(self,first_name):self.first_name=first_namedef__getattr__(self,name):if(name=='name'):returnself.first_nameraiseAttributeError('Personobjecthasnoattribute\\'{}\\''.format(name))12345678classPerson(object):\u00a0\u00a0\u00a0\u00a0def__init__(self,first_name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.first_name=first_name\u00a0\u00a0\u00a0\u00a0\u00a0def__getattr__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(name=='name'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.first_name\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseAttributeError('Personobjecthasnoattribute\\'{}\\''.format(name))\u6211\u4eec\u5728\u7ec8\u7aef\u8fd0\u884c\u4ee3\u7801\uff1aperson=Person('Jason')>>>person.first_name'Jason'>>>person.name'Jason'>>>person.abcTraceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>File\"<stdin>\",line7,in__getattr__AttributeError:Personobjecthasnoattribute'abc'123456789101112person=Person('Jason')>>>person.first_name'Jason'\u00a0>>>person.name'Jason'\u00a0>>>person.abcTraceback(mostrecentcalllast):\u00a0\u00a0File\"<stdin>\",line1,in<module>\u00a0\u00a0File\"<stdin>\",line7,in__getattr__AttributeError:Personobjecthasnoattribute'abc'\u8fd9\u610f\u5473\u7740\u6211\u4eec\u80fd\u51ed\u7a7a\u6784\u9020\u5b9e\u4f8b\u5c5e\u6027\uff0c\u662f\u4e0d\u662f\u5f88\u68d2\uff1f\u6240\u4ee5\u4f60\u53ef\u4ee5\u5077\u5077\u7684\u8ba9\u4f60\u7684Dog\u9664\u4e86\u6c6a\u6c6a\u53eb\u4e4b\u5916\uff0c\u8fd8\u4f1a\u55b5\u55b5\u53eb\uff1aclassDog(object):defbark(self):print('Ruff,ruff!')def__getattr__(self,name):if(name=='meow'):returnlambda:print('Meeeeeeow')raiseAttributeError('Idon\\'tknowwhatyou\\'retalkingabout...')12345678classDog(object):\u00a0\u00a0\u00a0\u00a0defbark(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Ruff,ruff!')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__getattr__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(name=='meow'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnlambda:\u00a0\u00a0print('Meeeeeeow')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseAttributeError('Idon\\'tknowwhatyou\\'retalkingabout...')>>>snoop=Dog()>>>snoop.bark()Ruff,ruff!>>>snoop.meow()Meeeeeeow1234567>>>snoop=Dog()\u00a0>>>snoop.bark()Ruff,ruff!\u00a0>>>snoop.meow()Meeeeeeow\u4f60\u53ef\u4ee5\u5728\u6ca1\u6709reflection\u7684\u60c5\u51b5\u4e0b\uff0c\u968f\u610f\u6dfb\u52a0\u65b0\u5c5e\u6027\u3002object.__dict__\u662f\uff08\u5b57\u5178\uff09[https://docs.python.org/3.5/library/stdtypes.html#typesmapping]\u5305\u542bobject\u7684\u5c5e\u6027\u548c\u5b83\u4eec\u7684\u503c\uff08\u6ce8\u610f\u6211\u8bf4\u7684\u662fobject.dict,object\u662f\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u8fd8\u6709\u4e00\u4e2aclass.dict,\u662f\u7c7b\u7684\u5c5e\u6027\u7684\u5b57\u5178)\u3002\u610f\u601d\u662f\uff1aclassDog(object):def__init__(self):self.name='DoggyDogg'1234classDog(object):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.name='DoggyDogg'\u7b49\u4ef7\u4e8e\uff1aclassDog(object):def__init__(self):self.__dict__['name']='DoggyDogg'1234classDog(object):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__dict__['name']='DoggyDogg'\u4e24\u8005\u8f93\u51fa\u662f\u4e00\u6837\u7684\uff1asnoop=Dog()>>>snoop.name'DoggyDogg'1234snoop=Dog()\u00a0>>>snoop.name'DoggyDogg'\u5230\u8fd9\u91cc\u4f60\u4f1a\u60f3\uff0c\u662f\u633a\u597d\u7684\uff0c\u4f46\u662f\u6709\u4ec0\u4e48\u7528\u5462\uff1f\u7b54\u6848\u5f88\u7b80\u5355\uff1amagicalAPIs\u3002\u4f60\u6709\u6ca1\u6709\u7528\u8fc7\u4e00\u4e9bPython\u5e93\u8ba9\u4f60\u611f\u89c9\u50cf\u9b54\u6cd5\uff1f\u8fd9\u662f\u8ba9\u5b83\u4eec\u53d8\u7684\u6709\u201d\u9b54\u6cd5\u201d\u7684\u4e00\u79cd\u60c5\u51b5\u3002\u867d\u7136\u4e00\u65e6\u4f60\u61c2\u4e86\u5e95\u5c42\u53d1\u751f\u7684\u4e8b\u60c5,\u5c31\u4f1a\u53d1\u73b0\u6ca1\u6709\u9b54\u6cd5\u3002\u5982\u679c\u4f60\u8fd8\u60f3\u4e86\u89e3\u66f4\u591a\uff0c\u53ef\u4ee5\u67e5\u770b\u6587\u6863\u4e2d\u7684DescriptionProtocol\u3002Python\u7684\u9762\u5411\u5bf9\u8c61Python\u7684\u9762\u5411\u5bf9\u8c61\u6709\u70b9\u5947\u602a\u3002\u4f8b\u5982\uff0c\u7c7b\u4e2d\u6ca1\u6709\u79c1\u6709\u53d8\u91cf\u548c\u65b9\u6cd5\u3002\u6240\u4ee5\u4f60\u60f3\u5728\u7c7b\u4e2d\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u53d8\u91cf\u6216\u79c1\u6709\u65b9\u6cd5\uff0c\u4f60\u5fc5\u987b\u9075\u5b88\u89c4\u5219\uff1a\u4e00\u4e2a\u4e0b\u5212\u7ebf\u00a0(_)\u8868\u793a\u79c1\u6709\u53d8\u91cf\u548c\u65b9\u6cd5\u3002\u4e24\u4e2a\u4e0b\u5212\u7ebf(__)\u00a0\u8868\u793a\u7684\u53d8\u91cf\u548c\u65b9\u6cd5\uff0c\u5b83\u4eec\u7684\u540d\u5b57\u4f1a\u88ab\u4fee\u6539\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u4f60\u6709\u5982\u4e0b\u7c7b\uff1aclassFoo(object):def__init__(self):self.public='public'self._private='public'self.__secret='secret'12345classFoo(object):\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.public='public'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self._private='public'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__secret='secret'\u8f6c\u5230\u89e3\u91ca\u5668\uff1a>>>foo=Foo()>>>foo.public'public'>>>foo._private'public'>>>foo.__secretTraceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>AttributeError:'Foo'objecthasnoattribute'__secret'123456789>>>foo=Foo()>>>foo.public'public'>>>foo._private'public'>>>foo.__secretTraceback(mostrecentcalllast):\u00a0\u00a0File\"<stdin>\",line1,in<module>AttributeError:'Foo'objecthasnoattribute'__secret'\u5982\u4f60\u6240\u89c1\uff0c\u4f60\u53ef\u4ee5\u8bbf\u95ee_private\u53d8\u91cf\uff0c\u4f46\u662f\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u53d1\u751f\u4e86\u4ec0\u4e48\uff0c\u5b83\u662f\u5426\u610f\u5473\u7740\u6709\u4e24\u4e2a\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u662f\u771f\u6b63\u7684\u79c1\u6709\u53d8\u91cf\uff1f\u7b54\u6848\u662fNO\uff0c\u5b83\u4eec\u7684\u540d\u5b57\u88ab\u6539\u53d8\u4e86\uff0c\u5b9e\u9645\u4e0a\uff0c\u5b83\u88abPython\u66ff\u6362\u6210\u4e86_Foo_secret\u3002\u5982\u679c\u4f60\u60f3\u8bbf\u95ee\u7684\u8bdd\uff0c\u4f60\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\uff1a>>>foo._Foo__secret'secret'12>>>foo._Foo__secret'secret'\u7136\u800c\uff0cPEP8\u5efa\u8bae\u53ea\u5728\u7236\u7c7b\u4e2d\u4f7f\u7528\u53cc\u4e0b\u5212\u7ebf\u6765\u907f\u514d\u5c5e\u6027\u540d\u51b2\u7a81\u3002\u201cPEP\u201d\uff0c\u8868\u793a\u201cPythonEnhancementProposal\u201d\uff0c\u5b83\u7528\u6765\u63cf\u8ff0Python\u7279\u6027\u6216\u4f5c\u7528\u3002\u5982\u679c\u4f60\u60f3\u8981\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7279\u6027\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2aPEP\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u6574\u4e2a\u793e\u533a\u53ef\u4ee5\u770b\u5230\u5e76\u8ba8\u8bba\u3002\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u4e86\u89e3\u66f4\u591a\u7684PEPs\u3002\u53ef\u89c1\uff0cPython\u5f88\u4fe1\u4efb\u7a0b\u5e8f\u5458\u3002\u6211\u4e0d\u4f1a\u518d\u6df1\u5165\u8bb2OO\u4e86\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5355\u72ec\u4e00\u7bc7\u6587\u7ae0\uff08\u751a\u81f3\u662f\u4e00\u7cfb\u5217\uff09\u6765\u8bb2\u89e3\u3002\u6211\u786e\u5b9e\u60f3\u7ed9\u4f60\u63d0\u4e2a\u9192\uff0cPython\u7684OO\u53ef\u4e0d\u50cfJava\u8bed\u8a00\u90a3\u4e48\u81ea\u7136\uff0c\u4f60\u9700\u8981\u6162\u6162\u9002\u5e94\uff0c\u4f46\u4f60\u77e5\u9053\u5417\uff0c\u5b83\u53ea\u662f\u505a\u4e8b\u7684\u65b9\u6cd5\u4e0d\u540c\u800c\u5df2\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5b83\u6ca1\u6709\u62bd\u8c61\u7c7b\uff0c\u4f60\u5fc5\u987b\u4f7f\u7528\u88c5\u9970\u5668\u6765\u5b9e\u73b0\u8fd9\u4e2a\u884c\u4e3a\u3002\u7ed3\u8bed\u5e0c\u671b\u8fd9\u7bc7\u6587\u7ae0\uff0c\u80fd\u591f\u7ed9\u4f60\u4e00\u4e2a\u5b66\u4e60Python\u7684\u7406\u7531\u3002\u8fd9\u7bc7\u6587\u7ae0\u6765\u81ea\u4e00\u4e2a\u4e3a\u8fc7\u53bb\u8bf4\u4e86Python\u7684\u574f\u8bdd\u800c\u6127\u759a\uff0c\u5982\u4eca\u5728\u5230\u5904\u5ba3\u4f20Python\u7684\u4eba\u3002\u6211\u5148\u7533\u660e\u4e00\u70b9\uff0c\u8fd9\u53ea\u662f\u4e2a\u4eba\u559c\u597d\u95ee\u9898\uff0c\u5f53\u6709\u4eba\u95ee\u6211\u5148\u5b66\u54ea\u95e8\u8bed\u8a00\u65f6\uff0c\u6211\u901a\u5e38\u63a8\u8350Python\u3002\u5982\u679c\u4f60\u8fd8\u6ca1\u51b3\u5b9a\uff0c\u90a3\u5c31\u7ed9\u5b83\u4e00\u6b21\u673a\u4f1a\uff01\u7528\u4e0a\u4e00\u4e24\u4e2a\u5c0f\u65f6\uff0c\u591a\u8bfb\u4e9b\u5173\u4e8e\u5b83\u7684\u4e1c\u897f\u3002\u5982\u679c\u4f60\u559c\u6b22\u4ece\u4e66\u4e0a\u5b66\u4e60\uff0c\u6211\u4e5f\u4f1a\u5e2e\u4f60\uff0c\u770b\u770b\u300aFluentPython\u300b\uff0c\u4e0b\u8282\u8fd8\u6709\u66f4\u591a\u3002\u4e66\u7c4d\u63a8\u8350\u6211\u5151\u73b0\u4e86\u8bfa\u8a00\uff0c\u8fd9\u4e00\u8282\u63a8\u8350\u4e66\u7c4d\u3002\u6211\u4f1a\u5c3d\u91cf\u4fdd\u6301\u7b80\u77ed\u4e00\u4e9b\uff0c\u53ea\u5305\u542b\u4e00\u4e9b\u6211\u8bfb\u8fc7\u7684\u4e66\u7c4d\u3002\u300aFluentPython\u300b\u2014\u2014\u4e00\u672c\u8bb2Python3\u7684\u597d\u4e66\u3002\u65e0\u8bba\u4f60\u662f\u65b0\u624b\u3001\u719f\u624b\u8fd8\u662f\u9ad8\u624b\u90fd\u503c\u5f97\u4e00\u8bfb\u3002\u5305\u542b\u4e86Python\u7684\u6765\u9f99\u53bb\u8109\u3002\u300aWebScrapingWithPython\u300b\u2014\u2014\u6807\u9898\u5df2\u7ecf\u8bf4\u660e\u4e86\u4e00\u5207\uff0c\u8bb2\u5982\u4f55\u7528Python\u6765\u505a\u7f51\u7edc\u722c\u866b\u3002\u4f60\u4f1a\u63a2\u7d22\u5982\u4f55\u722c\u7f51\u4e0a\u7684\u5185\u5bb9\uff0c\u89e3\u6790HTML\u7b49\u3002\u6211\u89c9\u5f97\u8fd9\u672c\u4e66\u5bf9\u722c\u866b\u9886\u57df\u7684\u65b0\u624b\u548c\u719f\u624b\u5f88\u6709\u5e2e\u52a9\u3002\u5373\u4f7f\u4f60\u4e4b\u524d\u4ece\u6ca1\u7528\u8fc7Python\uff0c\u4f60\u4e5f\u53ef\u4ee5\u770b\u61c2\u3002\u5b83\u6ca1\u6709\u6d89\u53ca\u4efb\u4f55\u9ad8\u7ea7\u4e3b\u9898\u3002\u300aBlackHatPython\u300b\u2014\u2014\u8fd9\u4e2a\u6709\u8da3\uff01\u4f60\u53ef\u4ee5\u521b\u5efa\u53cd\u5f39SSHshell\uff0c\u6728\u9a6c\u7b49\u7b49\uff01\u5982\u679c\u4f60\u60f3\u77e5\u9053Python\u5982\u4f55\u505a\u6e17\u900f\u6d4b\u8bd5\uff0c\u8bf7\u4e00\u5b9a\u8981\u8bfb\u5b83\u3002\u6ce8\u610f\u5b83\u4f7f\u7528\u7684\u662fPython2\uff0c\u6211\u6709\u4e00\u4e2a\u4ed3\u5e93\uff0c\u7528\u7684\u662fPython3\u3002\u300aViolentPython:ACookbookforHackers,ForensicAnalysts,PenetrationTestersandSecurityEngineers\u300b\u2014\u2014\u6bd4\u4e0a\u9762\u7684\u4e3b\u9898\u8981\u591a\uff0c\u4f60\u4f1a\u5b66\u5230\u5982\u4f55\u5199\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4e8e\u5b9e\u6218\u7684\u6e17\u900f\u6d4b\u8bd5\uff0c\u53d6\u8bc1\u5206\u6790\u548c\u5b89\u5168\u811a\u672c\u3002\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff012\u8d5e11\u6536\u85cf5\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u9006\u65c5aprogrammer,Doone'slevelbestandleavetheresttoGod'swill.Ilovethissaying.\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b717"]},
{"art_title": ["SocketServer \u2014\u2014\u7f51\u7edc\u901a\u4fe1\u670d\u52a1\u5668"], "art_url": ["http://python.jobbole.com/88626/"], "art_create_time": ["2017/09/20"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/2c224095b3bd5c6fee7c908a481292f7.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aLearnPython\u00a0\u00a0\u00a0SocketServer\u662fPython\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u5176\u4f5c\u7528\u662f\u521b\u5efa\u7f51\u7edc\u670d\u52a1\u5668\u3002SocketServer\u6a21\u5757\u5b9a\u4e49\u4e86\u4e00\u4e9b\u7c7b\u6765\u5904\u7406\u8bf8\u5982TCP\u3001UDP\u3001UNIX\u6d41\u548cUNIX\u6570\u636e\u62a5\u4e4b\u4e0a\u7684\u540c\u6b65\u7f51\u7edc\u8bf7\u6c42\u3002SocketServer\u6a21\u5757\u5904\u7406\u7f51\u7edc\u8bf7\u6c42\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e24\u4e2a\u4e3b\u8981\u7684\u7c7b\u6765\u5b9e\u73b0\uff1a\u4e00\u4e2a\u662f\u670d\u52a1\u5668\u7c7b\uff0c\u4e00\u4e2a\u662f\u8bf7\u6c42\u5904\u7406\u7c7b\u3002\u670d\u52a1\u5668\u7c7b\u5904\u7406\u901a\u4fe1\u95ee\u9898\uff0c\u5982\u76d1\u542c\u4e00\u4e2a\u5957\u63a5\u5b57\u5e76\u63a5\u6536\u8fde\u63a5\u7b49\uff1b\u8bf7\u6c42\u5904\u7406\u7c7b\u5904\u7406\u201c\u534f\u8bae\u201d\u95ee\u9898\uff0c\u5982\u89e3\u91ca\u5230\u6765\u7684\u6570\u636e\u3001\u5904\u7406\u6570\u636e\u5e76\u628a\u6570\u636e\u53d1\u56de\u7ed9\u5ba2\u6237\u7aef\u7b49\u3002\u8fd9\u79cd\u5b9e\u73b0\u5c06\u670d\u52a1\u5668\u7684\u5b9e\u73b0\u8fc7\u7a0b\u548c\u8bf7\u6c42\u5904\u7406\u7684\u5b9e\u73b0\u8fc7\u7a0b\u89e3\u8026\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0d\u540c\u7684\u670d\u52a1\u5668\u5b9e\u73b0\u548c\u8bf7\u6c42\u5904\u7406\u5b9e\u73b0\u7ed3\u5408\u8d77\u6765\u6765\u5904\u7406\u4e00\u4e9b\u5b9a\u5236\u7684\u534f\u8bae\uff0c\u4f8b\u5982\u4e00\u4e2aTCP\u670d\u52a1\u5668\u7c7b\u548c\u4e00\u4e2a\u6d41\u8bf7\u6c42\u5904\u7406\u7c7b\u7ed3\u5408\uff0c\u5904\u7406\u57fa\u4e8eTCP\u7684\u7f51\u7edc\u8bf7\u6c42\u3002\u540c\u65f6\uff0c\u4e5f\u53ef\u4ee5\u57fa\u4e8eSocketServer\u6a21\u5757\u4e2d\u7684\u670d\u52a1\u5668\u7c7b\u548c\u8bf7\u6c42\u5904\u7406\u7c7b\uff0c\u5b9e\u73b0\u7f51\u7edc\u5c42\u4e4b\u4e0a\u5e94\u7528\u5c42\u7684\u670d\u52a1\u5668\u548c\u8bf7\u6c42\u5904\u7406\u5b9e\u73b0\uff0c\u4f8b\u5982\u57fa\u4e8eTCP\u670d\u52a1\u5668\u7c7b\u5b9e\u73b0HTTP\u670d\u52a1\u5668\uff0c\u57fa\u4e8e\u6d41\u5904\u7406\u8bf7\u6c42\u7c7b\u5b9e\u73b0HTTP\u8bf7\u6c42\u5904\u7406\u7c7b\u7b49\u3002\u670d\u52a1\u5668\u7c7bSocketServer\u6a21\u5757\u4e2d\u5b9a\u4e49\u4e86\u4e94\u79cd\u670d\u52a1\u5668\u7c7b\u3002BaseServer(\u670d\u52a1\u5668\u7684\u57fa\u7c7b\uff0c\u5b9a\u4e49\u4e86API)TCPServer(\u4f7f\u7528TCP/IP\u5957\u63a5\u5b57)UDPServer(\u4f7f\u7528\u6570\u636e\u62a5\u5957\u63a5\u5b57)UnixStreamServer(\u4f7f\u7528UNIX\u57df\u5957\u63a5\u5b57\uff0c\u53ea\u9002\u7528UNIX\u5e73\u53f0)UnixDatagramServer(\u4f7f\u7528UNIX\u57df\u5957\u63a5\u5b57\uff0c\u53ea\u9002\u7528UNIX\u5e73\u53f0)1.\u6784\u9020\u670d\u52a1\u5668\u5bf9\u8c61\u8981\u6784\u5efa\u4e00\u4e2a\u670d\u52a1\u5668\u5bf9\u8c61\uff0c\u9700\u8981\u5411\u5b83\u4f20\u9012\u4e00\u4e2a\u5730\u5740server_address\uff08\u670d\u52a1\u5668\u5c06\u5728\u8fd9\u4e2a\u5730\u5740\u4e0a\u76d1\u542c\u8bf7\u6c42\uff09\uff0c\u4ee5\u53ca\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u7c7bRequestHandlerClass\uff08\u4e0d\u662f\u8bf7\u6c42\u5904\u7406\u5b9e\u4f8b\uff09\u3002\u670d\u52a1\u5668\u7c7b\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5982\u4e0b\uff1aPythonclassBaseServer:def__init__(self,server_address,RequestHandlerClass):\"\"\"Constructor.Maybeextended,donotoverride.\"\"\"self.server_address=server_addressself.RequestHandlerClass=RequestHandlerClassself.__is_shut_down=threading.Event()self.__shutdown_request=False1234567classBaseServer:\u00a0\u00a0\u00a0\u00a0def__init__(self,server_address,RequestHandlerClass):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"Constructor.\u00a0\u00a0Maybeextended,donotoverride.\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.server_address=server_address\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.RequestHandlerClass=RequestHandlerClass\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__is_shut_down=threading.Event()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__shutdown_request=False\u4e4b\u540e\uff0c\u53ef\u4ee5\u6784\u9020TCPServer\u3001UDPServer\u3001UnixStreamServer\u3001UnixDatagramServer\u3002\u5176\u4e2d\uff0cTCPServer\u7ee7\u627f\u81eaBaseServer\uff0cUDPServer\u548cUnixStreamServer\u7ee7\u627f\u81eaTCPServer\uff0cUnixDatagramServer\u7ee7\u627f\u81eaUDPServer\u3002\u5404\u4e2a\u670d\u52a1\u5668\u7c7b\u578b\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u7279\u70b9\u5bf9\u57fa\u7c7b\u8fdb\u884c\u6269\u5c55\uff0c\u4f8b\u5982\u521b\u5efa\u76d1\u542c\u5957\u63a5\u5b57\u3001\u7ed1\u5b9a\u76d1\u542c\u5730\u5740\u548c\u7aef\u53e3\u3001\u8fdb\u884c\u76d1\u542c\u7b49\u3002\u4e00\u65e6\u5b9e\u4f8b\u5316\u670d\u52a1\u5668\u5bf9\u8c61\uff0c\u4fbf\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u5668\u7684\u65b9\u6cd5\u6765\u76d1\u542c\u548c\u5904\u7406\u8bf7\u6c42\u30022.\u5b9e\u73b0\u670d\u52a1\u5668\u7531\u4e8eSocketServer\u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u4e94\u79cd\u670d\u52a1\u5668\u7c7b\u4e2d\uff0c\u9664\u4e86\u57fa\u7c7bBaseServer\u548cTCPServer\u5916\uff0c\u5176\u4f59\u7684\u4e09\u4e2a\u7c7b\u90fd\u662f\u76f4\u63a5\u6216\u95f4\u63a5\u5730\u7ee7\u627f\u81eaTCPServer\u3002\u56e0\u6b64\uff0c\u4ee5\u4e0b\u4ee5TCPServer\u7684\u5b9e\u73b0\u8fc7\u7a0b\u4e3a\u4f8b\u8fdb\u884c\u8bf4\u660e\u3002\u6784\u9020TCPServer\u3002\u6784\u9020TCPServer\u65f6\uff0c\u6784\u9020\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u5957\u63a5\u5b57\uff08\u8fd9\u4e2a\u5957\u63a5\u5b57\u53ef\u4ee5\u901a\u8fc7\u66f4\u6539\u5730\u5740\u7c07\u548c\u7c7b\u578b\u7528\u4e8e\u5176\u4ed6\u670d\u52a1\u5668\uff09\u7528\u4e8e\u76d1\u542c\u8bf7\u6c42\u3002\u5e76\u4e14\u8c03\u7528server_bind()\u7ed1\u5b9a\u76d1\u542c\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u8c03\u7528server_activate()\u5f00\u59cb\u76d1\u542c\u3002\u542f\u52a8\u670d\u52a1\u5668\u3002\u670d\u52a1\u5668\u5b9e\u4f8b\u5316\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528serve_forever()\u6216\u8005handle_request()\u6765\u76d1\u542c\u548c\u5904\u7406\u8bf7\u6c42\uff0c\u5b9e\u73b0\u670d\u52a1\u5668\u529f\u80fd\u3002\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u7684\u5177\u4f53\u5b9e\u73b0\u4f9d\u8d56\u4e8e_handle_request_noblock()\u65b9\u6cd5\u3002\u8fd9\u4e2a\u65b9\u6cd5\u662fBaseServer\u7c7b\u4e2d\u5b9a\u4e49\u7684\u3002\u5177\u4f53\u5b9e\u73b0\u5982\u4e0b\uff1aPythondef_handle_request_noblock(self):\"\"\"Handleonerequest,withoutblocking.Iassumethatselect.selecthasreturnedthatthesocketisreadablebeforethisfunctionwascalled,sothereshouldbenoriskofblockinginget_request().\"\"\"try:request,client_address=self.get_request()exceptsocket.error:returnifself.verify_request(request,client_address):try:self.process_request(request,client_address)except:self.handle_error(request,client_address)self.shutdown_request(request)else:self.shutdown_request(request)123456789101112131415161718def_handle_request_noblock(self):\u00a0\u00a0\u00a0\u00a0\"\"\"Handleonerequest,withoutblocking.\u00a0\u00a0\u00a0\u00a0Iassumethatselect.selecthasreturnedthatthesocketis\u00a0\u00a0\u00a0\u00a0readablebeforethisfunctionwascalled,sothereshouldbe\u00a0\u00a0\u00a0\u00a0noriskofblockinginget_request().\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0request,client_address=self.get_request()\u00a0\u00a0\u00a0\u00a0exceptsocket.error:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0ifself.verify_request(request,client_address):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.process_request(request,client_address)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.handle_error(request,client_address)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.shutdown_request(request)\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.shutdown_request(request)\u5904\u7406\u8bf7\u6c42\u3002\u6839\u636e\u4e0a\u4e00\u6b65\u9aa4\u542f\u52a8\u670d\u52a1\u5668\u540e\uff0c\u670d\u52a1\u5668\u4fbf\u5f00\u59cb\u76d1\u542c\u8bf7\u6c42\u3002\u5982\u679c\u63a5\u6536\u5230\u8bf7\u6c42\u4fe1\u606f\uff0c\u4fbf\u5f00\u59cb\u5904\u7406\u8bf7\u6c42\u3002\u7531_handle_request_noblock()\u53ef\u4ee5\u770b\u51fa\u6709\u51e0\u4e2a\u51fd\u6570\u6bd4\u8f83\u91cd\u8981\u3002get_request()\u2014\u2014\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u5728\u5b50\u7c7b\u4e2d\u91cd\u5199\u3002\u5728TCPServer\u4e2d\uff0c\u8be5\u51fd\u6570\u8c03\u7528\u76d1\u542c\u5957\u63a5\u5b57\u7684accept()\u65b9\u6cd5\uff0c\u8fd4\u56de\u8bf7\u6c42request\u548c\u5ba2\u6237\u7aef\u5730\u5740client_address\u3002verify_request(request,client_address)\u2014\u2014\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u5728\u5b50\u7c7b\u4e2d\u91cd\u5199\u3002\u8be5\u51fd\u6570\u8fd4\u56deTrue\u8868\u793a\u5904\u7406\u8bf7\u6c42\uff0c\u8fd4\u56deFalse\u8868\u793a\u5ffd\u7565\u8bf7\u6c42\u3002process_request(request,client_address)\u2014\u2014\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u5728\u5b50\u7c7b\u4e2d\u91cd\u5199\u3002\u8be5\u51fd\u6570\u5c06\u8c03\u7528finish_request()\u5177\u4f53\u5b8c\u6210\u8bf7\u6c42\u7684\u5904\u7406\u8fc7\u7a0b\uff0c\u5e76\u4e14\u5728\u5904\u7406\u5b8c\u8bf7\u6c42\u540e\u5173\u95ed\u8bf7\u6c42\u3002finish_request(request,client_address)\u2014\u2014\u8be5\u51fd\u6570\u5c06\u6784\u9020\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u7c7b\u7684\u5b9e\u4f8b\u3002\u8bf7\u6c42\u5904\u7406\u7c7b\u88ab\u5b9e\u4f8b\u5316\u540e\u5c06\u8c03\u7528\u5176handle()\u65b9\u6cd5\u5904\u7406\u8bf7\u6c42\u30023.\u8fdb\u7a0b/\u7ebf\u7a0b\u652f\u6301SocketServer\u6a21\u5757\u4e2d\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u201dmix-in\u201d\u7c7b\uff1aForkingMixIn\u548cThreadingMixIn\u3002\u8fd9\u4e9b\u7c7b\u53ef\u4ee5\u548c\u670d\u52a1\u5668\u7c7b\u6df7\u5408\u4f7f\u7528\uff0c\u5f88\u5bb9\u6613\u6539\u53d8\u670d\u52a1\u5668\uff0c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u4f7f\u7528\u4e00\u4e2a\u5355\u72ec\u7684\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u3002\u5177\u4f53\u7684\u670d\u52a1\u5668\u7c7b\u6709\uff1aclassForkingUDPServer(ForkingMixIn,UDPServer)classForkingTCPServer(ForkingMixIn,TCPServer)classThreadingUDPServer(ThreadingMixIn,UDPServer)classThreadingTCPServer(ThreadingMixIn,TCPServer)classThreadingUnixStreamServer(ThreadingMixIn,UnixStreamServer)classThreadingUnixDatagramServer(ThreadingMixIn,UnixDatagramServer)\u8bf7\u6c42\u5904\u7406\u7c7b\u8981\u63a5\u6536\u5230\u6765\u7684\u8bf7\u6c42\u4ee5\u53ca\u786e\u5b9a\u91c7\u53d6\u4ec0\u4e48\u884c\u52a8\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u7684\u5de5\u4f5c\u90fd\u662f\u7531\u8bf7\u6c42\u5904\u7406\u7c7b\u5b8c\u6210\u7684\u3002\u8bf7\u6c42\u5904\u7406\u7c7b\u8d1f\u8d23\u5728\u5957\u63a5\u5b57\u5c42\u4e4b\u4e0a\u5b9e\u73b0\u534f\u8bae\u3002\u5177\u4f53\u8fc7\u7a0b\u4e3a\uff1a\u8bfb\u53d6\u8bf7\u6c42\u3001\u5904\u7406\u8bf7\u6c42\u3001\u5199\u56de\u54cd\u5e94\u3002\u8bf7\u6c42\u5904\u7406\u7c7b\u57fa\u7c7b\u4e2d\u5b9a\u4e49\u4e863\u4e2a\u65b9\u6cd5\uff0c\u5b50\u7c7b\u4e2d\u9700\u8981\u91cd\u5199\u3002setup()\u2014\u2014\u4e3a\u8bf7\u6c42\u51c6\u5907\u8bf7\u6c42\u5904\u7406\u5668handle()\u2014\u2014\u5bf9\u8bf7\u6c42\u5b8c\u6210\u5177\u4f53\u7684\u5de5\u4f5c\u3002\u8bf8\u5982\u89e3\u6790\u5230\u6765\u7684\u8bf7\u6c42\uff0c\u5904\u7406\u6570\u636e\uff0c\u5e76\u53d1\u56de\u54cd\u5e94\u7b49\u3002finish()\u2014\u2014\u6e05\u7406setup()\u671f\u95f4\u521b\u5efa\u7684\u6240\u6709\u6570\u636e1\u8d5e5\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Flask \u5e94\u7528\u4e2d\u7684 URL \u5904\u7406"], "art_url": ["http://python.jobbole.com/88618/"], "art_create_time": ["2017/09/20"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2014/12/6da94dec8f6f96417f14c8291e6345801.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aLearnPython\u00a0\u00a0\u00a0\u5728\u6587\u7ae0\uff1a\u4e00\u4e2aFlask\u5e94\u7528\u8fd0\u884c\u8fc7\u7a0b\u5256\u6790\u4e2d\uff0c\u5728\u4e00\u4e2a\u4e0a\u4e0b\u6587\u73af\u5883\u4e2d\u53ef\u4ee5\u5904\u7406\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u8003\u8651\u5728\u5904\u7406\u8bf7\u6c42\u524d\u540e\u505a\u7684\u4e00\u4e9b\u64cd\u4f5c\uff0cFlask\u6e90\u7801\u4e2d\u771f\u6b63\u5904\u7406\u8bf7\u6c42\u7684\u662fdispatch_request()\u65b9\u6cd5\u3002\u5176\u6e90\u7801\u5982\u4e0b\uff1aPythondefdispatch_request(self):\"\"\"Doestherequestdispatching.MatchestheURLandreturnsthereturnvalueofthevieworerrorhandler.Thisdoesnothavetobearesponseobject.Inordertoconvertthereturnvaluetoaproperresponseobject,call:func:`make_response`.\"\"\"try:endpoint,values=self.match_request()returnself.view_functions[endpoint](**values)exceptHTTPException,e:handler=self.error_handlers.get(e.code)ifhandlerisNone:returnereturnhandler(e)exceptException,e:handler=self.error_handlers.get(500)ifself.debugorhandlerisNone:raisereturnhandler(e)12345678910111213141516171819defdispatch_request(self):\u00a0\u00a0\u00a0\u00a0\"\"\"Doestherequestdispatching.\u00a0\u00a0MatchestheURLandreturnsthe\u00a0\u00a0\u00a0\u00a0returnvalueofthevieworerrorhandler.\u00a0\u00a0Thisdoesnothaveto\u00a0\u00a0\u00a0\u00a0bearesponseobject.\u00a0\u00a0Inordertoconvertthereturnvaluetoa\u00a0\u00a0\u00a0\u00a0properresponseobject,call:func:`make_response`.\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0endpoint,values=self.match_request()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.view_functions[endpoint](**values)\u00a0\u00a0\u00a0\u00a0exceptHTTPException,e:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0handler=self.error_handlers.get(e.code)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhandlerisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returne\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnhandler(e)\u00a0\u00a0\u00a0\u00a0exceptException,e:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0handler=self.error_handlers.get(500)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.debugorhandlerisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raise\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnhandler(e)\u4ece\u4e0a\u9762\u7684\u6e90\u7801\u4e2d\u53ef\u4ee5\u770b\u5230\uff0cdispatch_request()\u65b9\u6cd5\u505a\u4e86\u5982\u4e0b\u7684\u5de5\u4f5c\uff1a\u5bf9\u8bf7\u6c42\u7684URL\u8fdb\u884c\u5339\u914d\uff1b\u5982\u679cURL\u53ef\u4ee5\u5339\u914d\uff0c\u5219\u8fd4\u56de\u76f8\u5bf9\u5e94\u89c6\u56fe\u51fd\u6570\u7684\u7ed3\u679c\uff1b\u5982\u679c\u4e0d\u53ef\u4ee5\u5339\u914d\uff0c\u5219\u8fdb\u884c\u9519\u8bef\u5904\u7406\u3002\u5bf9\u4e8e\u9519\u8bef\u7684\u5904\u7406\uff0c\u672c\u6587\u6682\u4e0d\u505a\u4ecb\u7ecd\u3002\u672c\u6587\u4e3b\u8981\u5bf9Flask\u5e94\u7528\u7684URL\u6a21\u5f0f\u4ee5\u53ca\u8bf7\u6c42\u5904\u7406\u8fc7\u7a0b\u4e2d\u7684URL\u5339\u914d\u8fdb\u884c\u5256\u6790\u3002Flask\u5e94\u7528\u7684url_mapFlask\u5e94\u7528\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\uff0c\u4f1a\u4e3a\u5e94\u7528\u589e\u6dfb\u4e00\u4e2aurl_map\u5c5e\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e00\u4e2aMap\u7c7b\uff0c\u8fd9\u4e2a\u7c7b\u5728werkzeug.routing\u6a21\u5757\u4e2d\u5b9a\u4e49\uff0c\u5176\u4e3b\u8981\u7684\u529f\u80fd\u662f\u4e3a\u4e86\u7ed9\u5e94\u7528\u589e\u52a0\u4e00\u4e9bURL\u89c4\u5219\uff0c\u8fd9\u4e9bURL\u89c4\u5219\u5f62\u6210\u4e00\u4e2aMap\u5b9e\u4f8b\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u8fdb\u884cURL\u5339\u914d\u3002\u76f8\u5173\u7684\u6982\u5ff5\u548c\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003\uff1aWerkzeug\u5e93\u2014\u2014routing\u6a21\u5757\u3002\u5728Flask\u6e90\u7801\u4e2d\uff0c\u5b83\u901a\u8fc7\u4e24\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9a\u5236\u5e94\u7528\u7684URL\u3002\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u662f\uff1aroute\u88c5\u9970\u5668\u548cadd_url_rule\u65b9\u6cd5\u30021.add_url_rulePythondefadd_url_rule(self,rule,endpoint,**options):options['endpoint']=endpointoptions.setdefault('methods',('GET',))self.url_map.add(Rule(rule,**options))1234defadd_url_rule(self,rule,endpoint,**options):\u00a0\u00a0\u00a0\u00a0options['endpoint']=endpoint\u00a0\u00a0\u00a0\u00a0options.setdefault('methods',('GET',))\u00a0\u00a0\u00a0\u00a0self.url_map.add(Rule(rule,**options))add_url_rule\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u5411\u5176\u4f20\u9012\u4e00\u6761URL\u89c4\u5219rule\u548c\u4e00\u4e2aendpoint\u5373\u53ef\u3002endpoint\u4e00\u822c\u4e3a\u548c\u8fd9\u6761URL\u76f8\u5173\u7684\u89c6\u56fe\u51fd\u6570\u7684\u540d\u5b57\uff0c\u8fd9\u6837\u5904\u7406\u5c31\u53ef\u4ee5\u5c06URL\u548c\u89c6\u56fe\u51fd\u6570\u5173\u8054\u8d77\u6765\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f20\u9012\u4e00\u4e9b\u5173\u952e\u5b57\u53c2\u6570\u3002\u8c03\u7528\u8be5\u65b9\u6cd5\u540e\uff0c\u4f1a\u8c03\u7528Map\u5b9e\u4f8b\u7684add\u65b9\u6cd5\uff0c\u5b83\u4f1a\u5c06URL\u89c4\u5219\u6dfb\u52a0\u8fdbMap\u5b9e\u4f8b\u4e2d\u30022.route\u88c5\u9970\u5668\u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u3001\u4f18\u96c5\u5730\u5199\u5e94\u7528\u7684URL\uff0cFlask\u5b9e\u73b0\u4e86\u4e00\u4e2aroute\u88c5\u9970\u5668\u3002Pythondefroute(self,rule,**options):defdecorator(f):self.add_url_rule(rule,f.__name__,**options)self.view_functions[f.__name__]=freturnfreturndecorator123456defroute(self,rule,**options):\u00a0\u00a0\u00a0\u00a0defdecorator(f):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.add_url_rule(rule,f.__name__,**options)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.view_functions[f.__name__]=f\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnf\u00a0\u00a0\u00a0\u00a0returndecoratorroute\u88c5\u9970\u5668\u4f1a\u88c5\u9970\u4e00\u4e2a\u89c6\u56fe\u51fd\u6570\u3002\u7ecfroute\u88c5\u9970\u7684\u89c6\u56fe\u51fd\u6570\u9996\u5148\u4f1a\u8c03\u7528add_url_rule\u65b9\u6cd5\uff0c\u5c06\u88c5\u9970\u5668\u4e2d\u7684URL\u89c4\u5219\u6dfb\u52a0\u8fdbMap\u5b9e\u4f8b\u4e2d\uff0c\u89c6\u56fe\u51fd\u6570\u7684\u540d\u5b57\u4f1a\u4f5c\u4e3aendpoint\u8fdb\u884c\u4f20\u9012\u3002\u7136\u540e\u5728\u8be5\u5e94\u7528\u7684view_functions\u4e2d\u589e\u52a0endpoint\u548c\u89c6\u56fe\u51fd\u6570\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u8fd9\u79cd\u5bf9\u5e94\u5173\u7cfb\u53ef\u4ee5\u5728\u8bf7\u6c42\u6210\u529f\u65f6\u65b9\u4fbf\u5730\u8c03\u7528\u5bf9\u5e94\u7684\u89c6\u56fe\u51fd\u6570\u30023.\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6211\u4eec\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u8bf4\u660e\u4ee5\u4e0a\u8fc7\u7a0b\u7684\u5b9e\u73b0\uff1aPython>>>fromflaskimportFlask>>>app=Flask(__name__)>>>@app.route('/')defindex():return\"Hello,World!\">>>@app.route('/<username>')defuser(username):return\"Hello,%s\"%username>>>@app.route('/page/<int:id>')defpage(id):return\"Thisispage%d\"%id1234567891011>>>fromflaskimportFlask>>>app=Flask(__name__)>>>@app.route('/')\u00a0\u00a0\u00a0\u00a0defindex():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\"Hello,World!\">>>@app.route('/<username>')\u00a0\u00a0\u00a0\u00a0defuser(username):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\"Hello,%s\"%username>>>@app.route('/page/<int:id>')\u00a0\u00a0\u00a0\u00a0defpage(id):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\"Thisispage%d\"%id\u4ee5\u4e0a\u4ee3\u7801\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2aFlask\u5e94\u7528app\uff0c\u5e76\u4e14\u901a\u8fc7route\u88c5\u9970\u5668\u7684\u5f62\u5f0f\u4e3aapp\u589e\u52a0\u4e863\u6761URL\u89c4\u5219\u3002\u9996\u5148\uff1a\u6211\u4eec\u770b\u4e00\u4e0bFlask\u5e94\u7528\u7684url_map\u957f\u5565\u6837\uff1aPython>>>url_map=app.url_map>>>url_mapMap([<Rule'/'(HEAD,GET)->index>,<Rule'/static/<filename>'->static>,<Rule'/page/<id>'(HEAD,GET)->page>,<Rule'/<username>'(HEAD,GET)->user>])1234567>>>url_map=app.url_map>>>url_mapMap([<Rule'/'(HEAD,GET)->index>,\u00a0\u00a0\u00a0\u00a0<Rule'/static/<filename>'->static>,\u00a0\u00a0\u00a0\u00a0<Rule'/page/<id>'(HEAD,GET)->page>,\u00a0\u00a0\u00a0\u00a0<Rule'/<username>'(HEAD,GET)->user>\u00a0\u00a0\u00a0\u00a0])\u53ef\u4ee5\u770b\u5230\uff0curl_map\u662f\u4e00\u4e2aMap\u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u4e2d\u5305\u542b4\u4e2aRule\u5b9e\u4f8b\uff0c\u5206\u522b\u5bf9\u5e944\u6761URL\u89c4\u5219\uff0c\u5176\u4e2d/static/<filename>\u5728Flask\u5e94\u7528\u5b9e\u4f8b\u5316\u65f6\u4f1a\u81ea\u52a8\u6dfb\u52a0\uff0c\u5176\u4f593\u6761\u662f\u7528\u6237\u521b\u5efa\u7684\u3002\u6574\u4e2aMap\u7c7b\u4fbf\u6784\u6210\u4e86Flask\u5e94\u7528app\u7684URL\u201c\u5730\u56fe\u201d\uff0c\u53ef\u4ee5\u7528\u4f5cURL\u5339\u914d\u7684\u4f9d\u636e\u3002\u63a5\u4e0b\u6765\uff1a\u6211\u4eec\u770b\u4e00\u4e0burl_map\u4e2d\u7684\u4e00\u4e2a\u5c5e\u6027\uff1a_rules_by_endpoint\uff1aPython>>>rules_by_endpoint=url_map._rules_by_endpoint>>>rules_by_endpoint{'index':[<Rule'/'(HEAD,GET)->index>],'page':[<Rule'/page/<id>'(HEAD,GET)->page>],'static':[<Rule'/static/<filename>'->static>],'user':[<Rule'/<username>'(HEAD,GET)->user>]}1234567>>>rules_by_endpoint=url_map._rules_by_endpoint>>>rules_by_endpoint{'index':[<Rule'/'(HEAD,GET)->index>],'page':[<Rule'/page/<id>'(HEAD,GET)->page>],'static':[<Rule'/static/<filename>'->static>],'user':[<Rule'/<username>'(HEAD,GET)->user>]}\u53ef\u4ee5\u770b\u51fa\uff0c_rules_by_endpoint\u5c5e\u6027\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u53cd\u6620\u4e86endpoint\u548cURL\u89c4\u5219\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u7531\u4e8e\u7528route\u88c5\u9970\u5668\u521b\u5efaURL\u89c4\u5219\u65f6\uff0c\u4f1a\u5c06\u89c6\u56fe\u51fd\u6570\u7684\u540d\u5b57\u4f5c\u4e3aendpoint\u8fdb\u884c\u4f20\u9012\uff0c\u6240\u4ee5\u4ee5\u4e0a\u5b57\u5178\u7684\u5185\u5bb9\u4e5f\u53cd\u6620\u4e86\u89c6\u56fe\u51fd\u6570\u548cURL\u89c4\u5219\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u518d\u63a5\u4e0b\u6765\uff1a\u6211\u4eec\u770b\u4e00\u4e0bFlask\u5e94\u7528\u7684view_functions\uff1aPython>>>view_functions=app.view_functions>>>view_functions{'index':<function__main__.index>,'page':<function__main__.page>,'user':<function__main__.user>}123456>>>view_functions=app.view_functions>>>view_functions{'index':<function__main__.index>,'page':<function__main__.page>,'user':<function__main__.user>}\u5728\u7528route\u88c5\u9970\u5668\u521b\u5efaURL\u89c4\u5219\u65f6\uff0c\u5b83\u8fd8\u4f1a\u505a\u4e00\u4ef6\u4e8b\u60c5\uff1aself.view_functions[f.__name__]=f\u3002\u8fd9\u6837\u505a\u662f\u5c06\u51fd\u6570\u540d\u548c\u89c6\u56fe\u51fd\u6570\u7684\u5bf9\u5e94\u5173\u7cfb\u653e\u5728Flask\u5e94\u7528\u7684view_functions\u3002\u7531\u4e8eMap\u5b9e\u4f8b\u4e2d\u5b58\u50a8\u4e86\u51fd\u6570\u540d\u548cURL\u89c4\u5219\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u8fd9\u6837\u53ea\u8981\u5728\u5339\u914dURL\u89c4\u5219\u65f6\uff0c\u5982\u679c\u5339\u914d\u6210\u529f\uff0c\u53ea\u8981\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u540d\uff0c\u90a3\u4e48\u4fbf\u53ef\u4ee5\u5728view_functions\u4e2d\u8fd0\u884c\u5bf9\u5e94\u7684\u89c6\u56fe\u51fd\u6570\u3002\u6700\u540e\uff1a\u6211\u4eec\u770b\u4e00\u4e0bURL\u5982\u4f55\u548cMap\u5b9e\u4f8b\u4e2d\u7684URL\u89c4\u5219\u8fdb\u884c\u5339\u914d\u3002\u6211\u4eec\u4ee5/page/<int:id>\u8fd9\u6761\u89c4\u5219\u4e3a\u4f8b\uff1aPython>>>rule=url_map._rules[2]>>>rule<Rule'/page/<id>'(HEAD,GET)->page>>>>rule._regexre.compile(ur'^\\|\\/page\\/(?P<id>\\d+)$',re.UNICODE)>>>rule._regex.patternu'^\\\\|\\\\/page\\\\/(?P<id>\\\\d+)$'1234567>>>rule=url_map._rules[2]>>>rule<Rule'/page/<id>'(HEAD,GET)->page>>>>rule._regexre.compile(ur'^\\|\\/page\\/(?P<id>\\d+)$',re.UNICODE)>>>rule._regex.patternu'^\\\\|\\\\/page\\\\/(?P<id>\\\\d+)$'\u53ef\u4ee5\u770b\u5230\uff0c\u5728\u5c06\u4e00\u6761URL\u89c4\u5219\u7684\u5b9e\u4f8bRule\u6dfb\u52a0\u8fdbMap\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u4f1a\u4e3a\u8fd9\u4e2aRule\u751f\u6210\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5c5e\u6027_regex\u3002\u8fd9\u6837\u5f53\u8fd9\u4e2aFlask\u5e94\u7528\u5904\u7406\u8bf7\u6c42\u65f6\uff0c\u5b9e\u9645\u4e0a\u4f1a\u5c06\u8bf7\u6c42\u4e2d\u7684url\u548cFlask\u5e94\u7528\u4e2d\u6bcf\u4e00\u6761URL\u89c4\u5219\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\u3002\u5982\u679c\u5339\u914d\u6210\u529f\uff0c\u5219\u4f1a\u8fd4\u56deendpoint\u548c\u4e00\u4e9b\u53c2\u6570\uff0c\u8fd4\u56de\u7684endpoint\u53ef\u4ee5\u7528\u6765\u5728view_functions\u627e\u5230\u5bf9\u5e94\u7684\u89c6\u56fe\u51fd\u6570\uff0c\u8fd4\u56de\u7684\u53c2\u6570\u53ef\u4ee5\u4f20\u9012\u7ed9\u89c6\u56fe\u51fd\u6570\u3002\u5177\u4f53\u7684\u8fc7\u7a0b\u5c31\u662f\uff1aPythontry:#match_request()\u53ef\u4ee5\u8fdb\u884cURL\u5339\u914dendpoint,values=self.match_request()returnself.view_functions[endpoint](**values)...12345try:\u00a0\u00a0\u00a0\u00a0#match_request()\u53ef\u4ee5\u8fdb\u884cURL\u5339\u914d\u00a0\u00a0\u00a0\u00a0endpoint,values=self.match_request()\u00a0\u00a0\u00a0\u00a0returnself.view_functions[endpoint](**values)\u00a0\u00a0\u00a0\u00a0...1\u8d5e2\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python Re\u6a21\u5757"], "art_url": ["http://python.jobbole.com/88729/"], "art_create_time": ["2017/10/23"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2014/12/6da94dec8f6f96417f14c8291e6345801.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1achichao\u00a0\u00a0\u00a0re\u6a21\u5757\u4e0b\u7684\u51fd\u6570compile(pattern)\uff1a\u521b\u5efa\u6a21\u5f0f\u5bf9\u8c61Pythonimportrepat=re.compile('A')m=pat.search('CBA')#\u7b49\u4ef7\u4e8ere.search('A','CBA')printm<_sre.SRE_Matchobjectat0x9d690c8>#\u5339\u914d\u5230\u4e86\uff0c\u8fd4\u56deMatchObject\uff08True\uff09m=pat.search('CBD')printmNone#\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56deNone\uff08False\uff09123456789importrepat=re.compile('A')m=pat.search('CBA')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7b49\u4ef7\u4e8ere.search('A','CBA')printm<_sre.SRE_Matchobjectat0x9d690c8>\u00a0\u00a0#\u5339\u914d\u5230\u4e86\uff0c\u8fd4\u56deMatchObject\uff08True\uff09\u00a0m=pat.search('CBD')printmNone\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56deNone\uff08False\uff09search(pattern,string)\uff1a\u5728\u5b57\u7b26\u4e32\u4e2d\u5bfb\u627e\u6a21\u5f0fPythonm=re.search('asd','ASDasd')printm<_sre.SRE_Matchobjectat0xb72cd6e8>#\u5339\u914d\u5230\u4e86\uff0c\u8fd4\u56deMatchObject\uff08True\uff09m=re.search('asd','ASDASD')printmNone#\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56deNone\uff08False\uff09123456m=re.search('asd','ASDasd')printm<_sre.SRE_Matchobjectat0xb72cd6e8>\u00a0\u00a0#\u5339\u914d\u5230\u4e86\uff0c\u8fd4\u56deMatchObject\uff08True\uff09m=re.search('asd','ASDASD')printmNone\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56deNone\uff08False\uff09match(pattern,string)\uff1a\u5728\u5b57\u7b26\u4e32\u5f00\u59cb\u5904\u5339\u914d\u6a21\u5f0fPythonm=re.search('asd','ASDasd')printm<_sre.SRE_Matchobjectat0xb72cd6e8>#\u5339\u914d\u5230\u4e86\uff0c\u8fd4\u56deMatchObject\uff08True\uff09m=re.search('asd','ASDASD')printmNone#\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56deNone\uff08False\uff09123456m=re.search('asd','ASDasd')printm<_sre.SRE_Matchobjectat0xb72cd6e8>\u00a0\u00a0#\u5339\u914d\u5230\u4e86\uff0c\u8fd4\u56deMatchObject\uff08True\uff09m=re.search('asd','ASDASD')printmNone\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56deNone\uff08False\uff09\u7b49\u4ef7\u4e8ePythonpat=re.compile('a')printpat.match('Aasd')Noneprintpat.match('aASD')<_sre.SRE_Matchobjectat0xb72cd6e8>12345pat=re.compile('a')printpat.match('Aasd')Noneprintpat.match('aASD')<_sre.SRE_Matchobjectat0xb72cd6e8>\u4e0a\u9762\u7684\u51fd\u6570\u8fd4\u56de\u90fd\u53ef\u4ee5\u5728if\u6761\u4ef6\u8bed\u53e5\u4e2d\u8fdb\u884c\u5224\u65ad\uff1aPythonifpat.search('asd'):...print'OK'...OK#\u627e\u5230\u8fd4\u56deifre.search('a','ASD'):...print\"OK\"...#\u6ca1\u6709\u627e\u52301234567ifpat.search('asd'):...\u00a0\u00a0\u00a0\u00a0print'OK'...OK\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u627e\u5230\u8fd4\u56deifre.search('a','ASD'):...\u00a0\u00a0\u00a0\u00a0print\"OK\"...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6ca1\u6709\u627e\u5230split(pattern,string)\uff1a\u6839\u636e\u6a21\u5f0f\u5206\u5272\u5b57\u7b26\u4e32,\u8fd4\u56de\u5217\u8868Pythonre.split(',','a,s,d,asd')['a','s','d','asd']#\u8fd4\u56de\u5217\u8868pat=re.compile(',')pat.split('a,s,d,asd')['a','s','d','asd']#\u8fd4\u56de\u5217\u8868re.split('[,]+','a,s,d,,,,,asd')#\u6b63\u5219\u5339\u914d\uff1a[,]+\uff0c\u540e\u9762\u8bf4\u660e['a','s','d','asd']re.split('[,]+','a,s,d,,,,,asd',maxsplit=2)#maxsplit\u6700\u591a\u5206\u5272\u6b21\u6570['a','s','d,,,,,asd']pat=re.compile('[,]+')#\u6b63\u5219\u5339\u914d\uff1a[,]+\uff0c\u540e\u9762\u8bf4\u660epat.split('a,s,d,,,,,asd',maxsplit=2)#maxsplit\u6700\u591a\u5206\u5272\u6b21\u6570['a','s','d,,,,,asd']12345678910111213141516re.split(',','a,s,d,asd')['a','s','d','asd']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u5217\u8868\u00a0pat=re.compile(',')pat.split('a,s,d,asd')['a','s','d','asd']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u5217\u8868\u00a0re.split('[,]+','a,\u00a0\u00a0s\u00a0\u00a0,d\u00a0\u00a0\u00a0\u00a0,,,,,asd')\u00a0\u00a0#\u6b63\u5219\u5339\u914d\uff1a[,]+\uff0c\u540e\u9762\u8bf4\u660e['a','s','d','asd']\u00a0re.split('[,]+','a,\u00a0\u00a0s\u00a0\u00a0,d\u00a0\u00a0\u00a0\u00a0,,,,,asd',maxsplit=2)#maxsplit\u6700\u591a\u5206\u5272\u6b21\u6570['a','s','d\u00a0\u00a0\u00a0\u00a0,,,,,asd']\u00a0pat=re.compile('[,]+')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6b63\u5219\u5339\u914d\uff1a[,]+\uff0c\u540e\u9762\u8bf4\u660epat.split('a,\u00a0\u00a0s\u00a0\u00a0,d\u00a0\u00a0\u00a0\u00a0,,,,,asd',maxsplit=2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#maxsplit\u6700\u591a\u5206\u5272\u6b21\u6570['a','s','d\u00a0\u00a0\u00a0\u00a0,,,,,asd']findall(pattern,string)\uff1a\u5217\u8868\u5f62\u5f0f\u8fd4\u56de\u5339\u914d\u9879Pythonre.findall('a','ASDaDFGAa')['a','a']#\u5217\u8868\u5f62\u5f0f\u8fd4\u56de\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32pat=re.compile('a')pat.findall('ASDaDFGAa')['a','a']#\u5217\u8868\u5f62\u5f0f\u8fd4\u56de\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32pat=re.compile('[A-Z]+')#\u6b63\u5219\u5339\u914d\uff1a'[A-Z]+'\u540e\u9762\u6709\u8bf4\u660epat.findall('ASDcDFGAa')['ASD','DFGA']#\u627e\u5230\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32pat=re.compile('[A-Z]')pat.findall('ASDcDFGAa')#\u6b63\u5219\u5339\u914d\uff1a'[A-Z]+'\u540e\u9762\u6709\u8bf4\u660e['A','S','D','D','F','G','A']#\u627e\u5230\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32pat=re.compile('[A-Za-z]')#\u6b63\u5219\u5339\u914d\uff1a'[A-Za-z]+'\u5339\u914d\u6240\u6709\u5355\u8bcd\uff0c\u540e\u9762\u6709\u8bf4\u660epat.findall('ASDcDFGAa')['A','S','D','c','D','F','G','A','a']123456789101112131415161718re.findall('a','ASDaDFGAa')['a','a']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5217\u8868\u5f62\u5f0f\u8fd4\u56de\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u00a0pat=re.compile('a')pat.findall('ASDaDFGAa')['a','a']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5217\u8868\u5f62\u5f0f\u8fd4\u56de\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u00a0pat=re.compile('[A-Z]+')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6b63\u5219\u5339\u914d\uff1a'[A-Z]+'\u540e\u9762\u6709\u8bf4\u660epat.findall('ASDcDFGAa')['ASD','DFGA']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u627e\u5230\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u00a0pat=re.compile('[A-Z]')pat.findall('ASDcDFGAa')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6b63\u5219\u5339\u914d\uff1a'[A-Z]+'\u540e\u9762\u6709\u8bf4\u660e['A','S','D','D','F','G','A']\u00a0\u00a0#\u627e\u5230\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u00a0pat=re.compile('[A-Za-z]')\u00a0\u00a0\u00a0\u00a0#\u6b63\u5219\u5339\u914d\uff1a'[A-Za-z]+'\u5339\u914d\u6240\u6709\u5355\u8bcd\uff0c\u540e\u9762\u6709\u8bf4\u660epat.findall('ASDcDFGAa')['A','S','D','c','D','F','G','A','a']sub(pat,repl,string)\uff1a\u7528repl\u66ff\u6362pat\u5339\u914d\u9879(\u7559\u7684\u662f\u4e2d\u95f4\u7684\uff0c\u56e0\u4e3a\u4e2d\u95f4\u5728\u4e2d\u5fc3)Pythonre.sub('a','A','abcasd')#\u627e\u5230a\u7528A\u66ff\u6362\uff0c\u540e\u9762\u89c1\u548cgroup\u7684\u914d\u5408\u4f7f\u7528'AbcAsd'pat=re.compile('a')pat.sub('A','abcasd')'AbcAsd'pat=re.compile(r'www\\.(.*)\\..{3}')#\u6b63\u5219\u8868\u8fbe\u5f0f#\u5728Python\u7684string\u524d\u9762\u52a0\u4e0a\u2018r\u2019\uff0c\u662f\u4e3a\u4e86\u544a\u8bc9\u7f16\u8bd1\u5668\u8fd9\u4e2astring\u662f\u4e2arawstring\uff0c\u4e0d\u8981\u8f6c\u8bd1\u53cd\u659c\u6760'\\'\u3002#\u4f8b\u5982\uff0c\\n\u5728rawstring\u4e2d\uff0c\u662f\u4e24\u4e2a\u5b57\u7b26\uff0c\\\u548cn\uff0c\u800c\u4e0d\u4f1a\u8f6c\u8bd1\u4e3a\u6362\u884c\u7b26\u3002#\u7531\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\\\u4f1a\u6709\u51b2\u7a81\uff0c\u56e0\u6b64\uff0c\u5f53\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\u540e\uff0c\u6700\u597d\u5728\u524d\u9762\u52a0\u4e0a'r'\u3002#\u4e0e\u5927\u591a\u6570\u7f16\u7a0b\u8bed\u8a00\u76f8\u540c\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u4f7f\u7528\"\\\"\u4f5c\u4e3a\u8f6c\u4e49\u5b57\u7b26\uff0c\u8fd9\u5c31\u53ef\u80fd\u9020\u6210\u53cd\u659c\u6760\u56f0\u6270\u3002#\u5047\u5982\u4f60\u9700\u8981\u5339\u914d\u6587\u672c\u4e2d\u7684\u5b57\u7b26\"\\\"\uff0c\u90a3\u4e48\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u8868\u793a\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u5c06\u9700\u89814\u4e2a\u53cd\u659c\u6760\"\\\\\\\\\"\uff1a#\u524d\u4e24\u4e2a\u548c\u540e\u4e24\u4e2a\u5206\u522b\u7528\u4e8e\u5728\u7f16\u7a0b\u8bed\u8a00\u91cc\u8f6c\u4e49\u6210\u53cd\u659c\u6760\uff0c\u8f6c\u6362\u6210\u4e24\u4e2a\u53cd\u659c\u6760\u540e\u518d\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u8f6c\u4e49\u6210\u4e00\u4e2a\u53cd\u659c\u6760\u3002#Python\u91cc\u7684\u539f\u751f\u5b57\u7b26\u4e32\u5f88\u597d\u5730\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u4f7f\u7528r\"\\\\\"\u8868\u793a\u3002#\u540c\u6837\uff0c\u5339\u914d\u4e00\u4e2a\u6570\u5b57\u7684\"\\\\d\"\u53ef\u4ee5\u5199\u6210r\"\\d\"\u3002#\u6709\u4e86\u539f\u751f\u5b57\u7b26\u4e32\uff0c\u4f60\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u662f\u4e0d\u662f\u6f0f\u5199\u4e86\u53cd\u659c\u6760\uff0c\u5199\u51fa\u6765\u7684\u8868\u8fbe\u5f0f\u4e5f\u66f4\u76f4\u89c2\u3002#\u4e0d\u662f\u8bf4\u52a0\u4e86r\\\u5c31\u6ca1\u6709\u8f6c\u8bd1\u529f\u80fd\uff0c\u597d\u4e71\uff0c\u5c31\u76f4\u63a5\u8bb0\u4f4f1\u53e5\u8bdd\uff1a#\u5f53\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\u540e\uff0c\u6700\u597d\u5728\u524d\u9762\u52a0\u4e0a'r'\uff0c\u8fd9\u6837\u4f60\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u662f\u4e0d\u662f\u6f0f\u5199\u4e86\u53cd\u659c\u6760\uff0c\u5199\u51fa\u6765\u7684\u8868\u8fbe\u5f0f\u4e5f\u66f4\u76f4\u89c2pat.match('www.dxy.com').group(1)'dxy're.sub(r'www\\.(.*)\\..{3}',r'\\1','hello,www.dxy.com')pat.sub(r'\\1','hello,www.dxy.com')'hello,dxy'#r'1'\u662f\u7b2c\u4e00\u7ec4\u7684\u610f\u601d#\u901a\u8fc7\u6b63\u5219\u5339\u914d\u627e\u5230\u7b26\u5408\u89c4\u5219\u7684\"www.dxy.com\"\uff0c\u53d6\u5f97\u7ec41\u5b57\u7b26\u4e32\u53bb\u66ff\u6362\u6574\u4e2a\u5339\u914d\u3002pat=re.compile(r'(\\w+)(\\w+)')#\u6b63\u5219\u8868\u8fbe\u5f0fs='helloworld!hellohz!'pat.findall('helloworld!hellohz!')[('hello','world'),('hello','hz')]pat.sub(r'\\2\\1',s)#\u901a\u8fc7\u6b63\u5219\u5f97\u5230\u7ec41(hello)\uff0c\u7ec42(world)\uff0c\u518d\u901a\u8fc7sub\u53bb\u66ff\u6362\u3002\u5373\u7ec41\u66ff\u6362\u7ec42\uff0c\u7ec42\u66ff\u6362\u7ec41\uff0c\u8c03\u6362\u4f4d\u7f6e\u3002'worldhello!hzhello!'1234567891011121314151617181920212223242526272829303132333435363738394041re.sub('a','A','abcasd')\u00a0\u00a0#\u627e\u5230a\u7528A\u66ff\u6362\uff0c\u540e\u9762\u89c1\u548cgroup\u7684\u914d\u5408\u4f7f\u7528'AbcAsd'\u00a0pat=re.compile('a')pat.sub('A','abcasd')'AbcAsd'\u00a0pat=re.compile(r'www\\.(.*)\\..{3}')#\u6b63\u5219\u8868\u8fbe\u5f0f\u00a0\u00a0#\u5728Python\u7684string\u524d\u9762\u52a0\u4e0a\u2018r\u2019\uff0c\u662f\u4e3a\u4e86\u544a\u8bc9\u7f16\u8bd1\u5668\u8fd9\u4e2astring\u662f\u4e2arawstring\uff0c\u4e0d\u8981\u8f6c\u8bd1\u53cd\u659c\u6760'\\'\u3002\u00a0\u00a0#\u4f8b\u5982\uff0c\\n\u5728rawstring\u4e2d\uff0c\u662f\u4e24\u4e2a\u5b57\u7b26\uff0c\\\u548cn\uff0c\u800c\u4e0d\u4f1a\u8f6c\u8bd1\u4e3a\u6362\u884c\u7b26\u3002\u00a0\u00a0#\u7531\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\\\u4f1a\u6709\u51b2\u7a81\uff0c\u56e0\u6b64\uff0c\u5f53\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\u540e\uff0c\u6700\u597d\u5728\u524d\u9762\u52a0\u4e0a'r'\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4e0e\u5927\u591a\u6570\u7f16\u7a0b\u8bed\u8a00\u76f8\u540c\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u4f7f\u7528\"\\\"\u4f5c\u4e3a\u8f6c\u4e49\u5b57\u7b26\uff0c\u8fd9\u5c31\u53ef\u80fd\u9020\u6210\u53cd\u659c\u6760\u56f0\u6270\u3002\u00a0\u00a0#\u5047\u5982\u4f60\u9700\u8981\u5339\u914d\u6587\u672c\u4e2d\u7684\u5b57\u7b26\"\\\"\uff0c\u90a3\u4e48\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u8868\u793a\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u5c06\u9700\u89814\u4e2a\u53cd\u659c\u6760\"\\\\\\\\\"\uff1a\u00a0\u00a0#\u524d\u4e24\u4e2a\u548c\u540e\u4e24\u4e2a\u5206\u522b\u7528\u4e8e\u5728\u7f16\u7a0b\u8bed\u8a00\u91cc\u8f6c\u4e49\u6210\u53cd\u659c\u6760\uff0c\u8f6c\u6362\u6210\u4e24\u4e2a\u53cd\u659c\u6760\u540e\u518d\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u8f6c\u4e49\u6210\u4e00\u4e2a\u53cd\u659c\u6760\u3002\u00a0\u00a0#Python\u91cc\u7684\u539f\u751f\u5b57\u7b26\u4e32\u5f88\u597d\u5730\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u4f7f\u7528r\"\\\\\"\u8868\u793a\u3002\u00a0\u00a0#\u540c\u6837\uff0c\u5339\u914d\u4e00\u4e2a\u6570\u5b57\u7684\"\\\\d\"\u53ef\u4ee5\u5199\u6210r\"\\d\"\u3002\u00a0\u00a0#\u6709\u4e86\u539f\u751f\u5b57\u7b26\u4e32\uff0c\u4f60\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u662f\u4e0d\u662f\u6f0f\u5199\u4e86\u53cd\u659c\u6760\uff0c\u5199\u51fa\u6765\u7684\u8868\u8fbe\u5f0f\u4e5f\u66f4\u76f4\u89c2\u3002\u00a0\u00a0\u00a0\u00a0#\u4e0d\u662f\u8bf4\u52a0\u4e86r\\\u5c31\u6ca1\u6709\u8f6c\u8bd1\u529f\u80fd\uff0c\u597d\u4e71\uff0c\u5c31\u76f4\u63a5\u8bb0\u4f4f1\u53e5\u8bdd\uff1a\u00a0\u00a0#\u5f53\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\u540e\uff0c\u6700\u597d\u5728\u524d\u9762\u52a0\u4e0a'r'\uff0c\u8fd9\u6837\u4f60\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u662f\u4e0d\u662f\u6f0f\u5199\u4e86\u53cd\u659c\u6760\uff0c\u5199\u51fa\u6765\u7684\u8868\u8fbe\u5f0f\u4e5f\u66f4\u76f4\u89c2pat.match('www.dxy.com').group(1)'dxy'\u00a0re.sub(r'www\\.(.*)\\..{3}',r'\\1','hello,www.dxy.com')\u00a0pat.sub(r'\\1','hello,www.dxy.com')'hello,dxy'#r'1'\u662f\u7b2c\u4e00\u7ec4\u7684\u610f\u601d#\u901a\u8fc7\u6b63\u5219\u5339\u914d\u627e\u5230\u7b26\u5408\u89c4\u5219\u7684\"www.dxy.com\"\uff0c\u53d6\u5f97\u7ec41\u5b57\u7b26\u4e32\u53bb\u66ff\u6362\u6574\u4e2a\u5339\u914d\u3002\u00a0\u00a0pat=re.compile(r'(\\w+)(\\w+)')\u00a0\u00a0\u00a0\u00a0#\u6b63\u5219\u8868\u8fbe\u5f0fs='helloworld!hellohz!'\u00a0pat.findall('helloworld!hellohz!')[('hello','world'),('hello','hz')]pat.sub(r'\\2\\1',s)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u901a\u8fc7\u6b63\u5219\u5f97\u5230\u7ec41(hello)\uff0c\u7ec42(world)\uff0c\u518d\u901a\u8fc7sub\u53bb\u66ff\u6362\u3002\u5373\u7ec41\u66ff\u6362\u7ec42\uff0c\u7ec42\u66ff\u6362\u7ec41\uff0c\u8c03\u6362\u4f4d\u7f6e\u3002\u00a0\u00a0'worldhello!hzhello!'escape(string)\uff1a\u5bf9\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u7279\u6b8a\u5b57\u7b26\u4e32\u8fdb\u884c\u8f6c\u4e49Pythonre.escape('www.dxy.cn')'www\\\\.dxy\\\\.cn'#\u8f6c\u4e4912re.escape('www.dxy.cn')'www\\\\.dxy\\\\.cn'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8f6c\u4e49\u4e0a\u9762\u7684\u51fd\u6570\u4e2d\uff0c\u53ea\u6709match\u3001search\u6709group\u65b9\u6cd5\uff0c\u5176\u4ed6\u7684\u51fd\u6570\u6ca1\u6709\u3002\u51fd\u6570\u7684\u65b9\u6cd5group\uff1a\u83b7\u53d6\u5b50\u6a21\u5f0f(\u7ec4)\u7684\u5339\u914d\u9879Pythonpat=re.compile(r'www\\.(.*)\\.(.*)')#\u7528()\u8868\u793a1\u4e2a\u7ec4\uff0c2\u4e2a\u7ec4m=pat.match('www.dxy.com')m.group()#\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5339\u914d\u6574\u4e2a\u5b57\u7b26\u4e32'www.dxy.com'm.group(1)#\u8fd4\u56de\u7ed9\u5b9a\u7ec41\u5339\u914d\u7684\u5b50\u5b57\u7b26\u4e32'dxy'm.group(2)'com'12345678910pat=re.compile(r'www\\.(.*)\\.(.*)')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7528()\u8868\u793a1\u4e2a\u7ec4\uff0c2\u4e2a\u7ec4m=pat.match('www.dxy.com')m.group()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u5339\u914d\u6574\u4e2a\u5b57\u7b26\u4e32\u00a0\u00a0'www.dxy.com'\u00a0m.group(1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u7ed9\u5b9a\u7ec41\u5339\u914d\u7684\u5b50\u5b57\u7b26\u4e32'dxy'\u00a0m.group(2)'com'start\uff1a\u7ed9\u5b9a\u7ec4\u5339\u914d\u9879\u7684\u5f00\u59cb\u4f4d\u7f6ePythonm.start(2)#\u7ec42\u5f00\u59cb\u7684\u7d22\u5f15812m.start(2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7ec42\u5f00\u59cb\u7684\u7d22\u5f158end\uff1a\u7ed9\u5b9a\u7ec4\u5339\u914d\u9879\u7684\u7ed3\u675f\u4f4d\u7f6ePythonm.end(2)#\u7ec42\u7ed3\u675f\u7684\u7d22\u5f151112m.end(2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7ec42\u7ed3\u675f\u7684\u7d22\u5f1511span\uff1a\u7ed9\u5b9a\u7ec4\u5339\u914d\u9879\u7684\u5f00\u59cb\u7ed3\u675f\u4f4d\u7f6ePythonm.span(2)#\u7ec42\u5f00\u59cb\u3001\u7ed3\u675f\u7684\u7d22\u5f15(8,11)12m.span(2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7ec42\u5f00\u59cb\u3001\u7ed3\u675f\u7684\u7d22\u5f15(8,11)\u6b63\u5219\u8868\u8fbe\u5f0f\u5143\u5b57\u7b26\u201c.\u201d\uff1a\u901a\u914d\u7b26,\u9664\u6362\u884c\u7b26\u5916\u7684\u4efb\u610f\u76841\u4e2a\u5b57\u7b26Pythonpat=re.compile('.')pat.match('abc')<_sre.SRE_Matchobjectat0xb72b6170>pat.match('abc').group()'a'#\u5339\u914d\u5230\u4e86\u9996\u4e2a\u5b57\u7b26pat.search('abc').group()'a'pat.match('\\n').group()#\u6362\u884c\u7b26\u5339\u914d\u51fa\u9519Traceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>AttributeError:'NoneType'objecthasnoattribute'group'1234567891011pat=re.compile('.')pat.match('abc')<_sre.SRE_Matchobjectat0xb72b6170>pat.match('abc').group()'a'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u5230\u4e86\u9996\u4e2a\u5b57\u7b26pat.search('abc').group()'a'pat.match('\\n').group()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u6362\u884c\u7b26\u5339\u914d\u51fa\u9519Traceback(mostrecentcalllast):\u00a0\u00a0File\"<stdin>\",line1,in<module>AttributeError:'NoneType'objecthasnoattribute'group'\u201c\\\u201d:\u8f6c\u4e49\u7b26Pythonpat=re.compile('\\.')pat.search('abc.efg').group()#\u5339\u914d\u5230.'.'pat.findall('abc.efg')#\u4e0d\u7528group,\u8fd4\u56de\u5217\u8868['.']12345pat=re.compile('\\.')pat.search('abc.efg').group()\u00a0\u00a0#\u5339\u914d\u5230.'.'pat.findall('abc.efg')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4e0d\u7528group,\u8fd4\u56de\u5217\u8868['.']\u201c[\u2026]\u201d:\u5b57\u7b26\u96c6\u5408\uff0c\u5339\u914d\u91cc\u9762\u7684\u4efb\u610f\u4e00\u4e2a\u5143\u7d20Python>>>pat=re.compile('[abc]')>>>pat.match('axbycz').group()'a'>>>pat.search('axbycz').group()'a'>>>pat.findall('axbycz')['a','b','c']1234567>>>pat=re.compile('[abc]')>>>pat.match('axbycz').group()'a'>>>pat.search('axbycz').group()'a'>>>pat.findall('axbycz')['a','b','c']\u201c\\d\u201d:\u6570\u5b57Python>>>pat=re.compile('\\d')>>>pat.search('ax1by2cz3').group()#\u5339\u914d\u5230\u7b2c\u4e00\u4e2a\u6570\u5b57:1\uff0c\u8fd4\u56de'1'>>>pat.match('ax1by2cz3').group()#\u5339\u914d\u4e0d\u5230\uff08\u9996\u4e2a\u4e0d\u662f\uff09\u8fd4\u56deNone\uff0c\u62a5\u9519\uff0cmatch\u5339\u914d\u5b57\u7b26\u4e32\u5934Traceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>AttributeError:'NoneType'objecthasnoattribute'group'>>>pat.findall('ax1by2cz3')#\u5339\u914d\u6240\u6709\u7684\u6570\u5b57\uff0c\u5217\u8868\u8fd4\u56de['1','2','3']1234567891011>>>pat=re.compile('\\d')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0>>>pat.search('ax1by2cz3').group()\u00a0\u00a0#\u5339\u914d\u5230\u7b2c\u4e00\u4e2a\u6570\u5b57:1\uff0c\u8fd4\u56de'1'\u00a0>>>pat.match('ax1by2cz3').group()\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u4e0d\u5230\uff08\u9996\u4e2a\u4e0d\u662f\uff09\u8fd4\u56deNone\uff0c\u62a5\u9519\uff0cmatch\u5339\u914d\u5b57\u7b26\u4e32\u5934Traceback(mostrecentcalllast):\u00a0\u00a0File\"<stdin>\",line1,in<module>AttributeError:'NoneType'objecthasnoattribute'group'\u00a0>>>pat.findall('ax1by2cz3')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u6240\u6709\u7684\u6570\u5b57\uff0c\u5217\u8868\u8fd4\u56de['1','2','3']\u201c\\D\u201d:\u975e\u6570\u5b57Python>>>pat=re.compile('\\D')>>>pat.match('ax1by2cz3').group()'a'>>>pat.search('ax1by2cz3').group()'a'>>>pat.findall('ax1by2cz3')['a','x','b','y','c','z']1234567>>>pat=re.compile('\\D')>>>pat.match('ax1by2cz3').group()'a'>>>pat.search('ax1by2cz3').group()'a'>>>pat.findall('ax1by2cz3')['a','x','b','y','c','z']\u201c\\s\u201d\uff1a\u7a7a\u767d\u5b57\u7b26\u3001\\t\u3001\\r\u3001\\n\u3001\u7a7a\u683cPython>>>pat=re.compile('\\s')>>>pat.findall('\\rax1\\nby2\\tcz3')['\\r','','\\n','','\\t']>>>pat.search('\\rax1\\nby2\\tcz3').group()'\\r'>>>pat.match('\\rax1\\nby2\\tcz3').group()'\\r'1234567>>>pat=re.compile('\\s')>>>pat.findall('\\rax1\\nby2\\tcz3')['\\r','','\\n','','\\t']>>>pat.search('\\rax1\\nby2\\tcz3').group()'\\r'>>>pat.match('\\rax1\\nby2\\tcz3').group()'\\r'\u201cS\u201d:\u975e\u7a7a\u767d\u5b57\u7b26Python>>>pat=re.compile('\\S')>>>pat.search('\\rax1\\nby2\\tcz3').group()'a'>>>pat.findall('\\rax1\\nby2\\tcz3')['a','x','1','b','y','2','c','z','3']12345>>>pat=re.compile('\\S')>>>pat.search('\\rax1\\nby2\\tcz3').group()'a'>>>pat.findall('\\rax1\\nby2\\tcz3')['a','x','1','b','y','2','c','z','3']\u201c\\w\u201d\uff1a\u5355\u4e2a\u7684\u6570\u5b57\u548c\u5b57\u6bcd\uff0c[A-Za-z0-9]Python>>>pat=re.compile('\\w')>>>pat.search('1a2b3c').group()'1'>>>pat.findall('1a2b3c')['1','a','2','b','3','c']>>>pat.match('1a2b3c').group()'1'1234567>>>pat=re.compile('\\w')>>>pat.search('1a2b3c').group()'1'>>>pat.findall('1a2b3c')['1','a','2','b','3','c']>>>pat.match('1a2b3c').group()'1'\u201c\\W\u201d:\u975e\u5355\u8bcd\u5b57\u7b26,\u9664\u6570\u5b57\u548c\u5b57\u6bcd\u5916Python>>>pat=re.compile('\\W')>>>pat.findall('1a2\u6211b3c')#python\u662f\u7528\u4e09\u5b57\u8282\u8868\u793a\u4e00\u4e2a\u6c49\u5b57['\\xe6','\\x88','\\x91']>>>pat.search('1a2\u6211b3c').group()'\\xe6'12345>>>pat=re.compile('\\W')>>>pat.findall('1a2\u6211b3c')#python\u662f\u7528\u4e09\u5b57\u8282\u8868\u793a\u4e00\u4e2a\u6c49\u5b57['\\xe6','\\x88','\\x91']>>>pat.search('1a2\u6211b3c').group()'\\xe6'\u6570\u91cf\u8bcd\u201c*\u201d\uff1a0\u6b21\u6216\u591a\u6b21\uff08\u00a0\u4e580\u4f1a\u53d8\u62100\uff09Python>>>pat=re.compile('[abc]*')>>>pat.match('abcabcdefabc').group()'abcabc'#2\u6b21>>>pat.search('abcabcdefabc').group()'abcabc'#2\u6b21>>>pat.findall('abcabcdefabc')['abcabc','','','','abc','']#2\u6b21\u548c1\u6b21,\u56e0\u4e3a\u67090\u6b21\uff0c\u6240\u4ee5\u5339\u914d\u4e86''1234567>>>pat=re.compile('[abc]*')>>>pat.match('abcabcdefabc').group()'abcabc'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#2\u6b21>>>pat.search('abcabcdefabc').group()'abcabc'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#2\u6b21>>>pat.findall('abcabcdefabc')['abcabc','','','','abc','']\u00a0\u00a0\u00a0\u00a0#2\u6b21\u548c1\u6b21,\u56e0\u4e3a\u67090\u6b21\uff0c\u6240\u4ee5\u5339\u914d\u4e86''\u201c+\u201d\uff1a1\u6b21\u6216\u591a\u6b21\uff08\u00a0\u52a00\u4e0d\u4f1a\u53d8\u62100\uff09Python>>>pat=re.compile('[abc]+')>>>pat.match('abcdefabcabc').group()'abc'>>>pat.search('abcdefabcabc').group()'abc'>>>pat.findall('abcdefabcabc')['abc','abcabc']1234567>>>pat=re.compile('[abc]+')>>>pat.match('abcdefabcabc').group()'abc'>>>pat.search('abcdefabcabc').group()'abc'>>>pat.findall('abcdefabcabc')['abc','abcabc']\u201c?\u201d\uff1a0\u6b21\u62161\u6b21\uff0cmatch,search\u4e0d\u4f1a\u51fa\u73b0none\uff0c\u4f1a\u51fa\u73b0\u2019\u2018\uff08\u56e0\u4e3a0\u6b21\u4e5f\u662f\u7b26\u5408\u7684\uff090\u6b21\u62161\u6b21\u4e0d\u662f\u6307[xxx]\u8fd9\u4e2a\u96c6\u5408\uff0c\u800c\u662f\u5176\u4e2d\u7684\u4efb\u4f55\u7684\u4e00\u4e2a\u5b57\u7b26Python>>>pat=re.compile('[abc]?')>>>pat.match('defabc').group()#0\u6b21''>>>pat.match('abcdefabc').group()'a'>>>pat.search('defabc').group()#0\u6b21''>>>pat.findall('defabc')#0\u6b21\u548c1\u6b21['','','','a','b','c','']#\u540e\u9762\u603b\u518d\u52a0\u4e2a''123456789>>>pat=re.compile('[abc]?')>>>pat.match('defabc').group()\u00a0\u00a0\u00a0\u00a0#0\u6b21''>>>pat.match('abcdefabc').group()'a'>>>pat.search('defabc').group()\u00a0\u00a0\u00a0\u00a0#0\u6b21''>>>pat.findall('defabc')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#0\u6b21\u548c1\u6b21['','','','a','b','c','']\u00a0\u00a0\u00a0\u00a0#\u540e\u9762\u603b\u518d\u52a0\u4e2a''\u201c\u6570\u91cf\u8bcd?\u201d\uff1a\u975e\u8d2a\u5a6a\u6a21\u5f0f\uff1a\u53ea\u5339\u914d\u6700\u5c11\u7684\uff08\u5c3d\u53ef\u80fd\u5c11\uff09\uff1b\u9ed8\u8ba4\u8d2a\u5a6a\u6a21\u5f0f\uff1a\u5339\u914d\u6700\u591a\u7684\uff08\u5c3d\u53ef\u80fd\u591a\uff09Python>>>pat=re.compile('[abc]+')#\u8d2a\u5a6a\u6a21\u5f0f>>>pat.match('abcdefabcabc').group()#\u5339\u914d\u5c3d\u53ef\u80fd\u591a\u7684\uff1aabc'abc'>>>pat.match('bbabcdefabcabc').group()'bbabc'>>>pat.search('dbbabcdefabcabc').group()'bbabc'>>>pat.findall('abcdefabcabc')['abc','abcabc']>>>pat=re.compile('[abc]+?')#\u975e\u8d2a\u5a6a\u6a21\u5f0f\uff1a+?>>>pat.match('abcdefabcabc').group()#\u5339\u914d\u5c3d\u53ef\u80fd\u5c11\u7684\uff1aa\u3001b\u3001c'a'>>>pat.search('dbbabcdefabcabc').group()'b'>>>pat.findall('abcdefabcabc')['a','b','c','a','b','c','a','b','c']1234567891011121314151617>>>pat=re.compile('[abc]+')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8d2a\u5a6a\u6a21\u5f0f>>>pat.match('abcdefabcabc').group()\u00a0\u00a0#\u5339\u914d\u5c3d\u53ef\u80fd\u591a\u7684\uff1aabc'abc'>>>pat.match('bbabcdefabcabc').group()'bbabc'>>>pat.search('dbbabcdefabcabc').group()'bbabc'>>>pat.findall('abcdefabcabc')['abc','abcabc']\u00a0>>>pat=re.compile('[abc]+?')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u975e\u8d2a\u5a6a\u6a21\u5f0f\uff1a+?>>>pat.match('abcdefabcabc').group()\u00a0\u00a0#\u5339\u914d\u5c3d\u53ef\u80fd\u5c11\u7684\uff1aa\u3001b\u3001c'a'>>>pat.search('dbbabcdefabcabc').group()'b'>>>pat.findall('abcdefabcabc')['a','b','c','a','b','c','a','b','c']\u201c{m}\u201d\uff1a\u5339\u914d\u5b57\u7b26\u4e32\u51fa\u73b0m\u6b21Python>>>pat=re.compile('[op]{2}')#o\u6216p\u51fa\u73b02\u6b21>>>pat.search('abcooapp').group()#\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u5b57\u7b26\u4e32,o\u6bd4p\u5148\u51fa\u73b0'oo'>>>pat.findall('abcooapp')#\u5339\u914d\u51fa\u73b0\u7684\u6240\u6709\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u5f62\u5f0f\u8fd4\u56de['oo','pp']12345>>>pat=re.compile('[op]{2}')\u00a0\u00a0\u00a0\u00a0#o\u6216p\u51fa\u73b02\u6b21>>>pat.search('abcooapp').group()\u00a0\u00a0#\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u5b57\u7b26\u4e32,o\u6bd4p\u5148\u51fa\u73b0'oo'>>>pat.findall('abcooapp')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u51fa\u73b0\u7684\u6240\u6709\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u5f62\u5f0f\u8fd4\u56de['oo','pp']\u201c{m,n}\u201d\uff1a\u5339\u914d\u5b57\u7b26\u4e32\u51fa\u73b0m\u5230n\u6b21Python>>>pat=re.compile('[op]{2,4}')#o\u6216\u5219p\u51fa\u73b02\u52304\u6b21>>>pat.match('pppabcooapp').group()#\u5339\u914d\u5f00\u5934'ppp'>>>pat.search('pppabcooapp').group()#\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0'ppp'>>>pat.findall('pppabcooapp')#\u5339\u914d\u6240\u6709['ppp','oo','pp']1234567>>>pat=re.compile('[op]{2,4}')\u00a0\u00a0\u00a0\u00a0#o\u6216\u5219p\u51fa\u73b02\u52304\u6b21>>>pat.match('pppabcooapp').group()\u00a0\u00a0#\u5339\u914d\u5f00\u5934'ppp'>>>pat.search('pppabcooapp').group()#\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0'ppp'>>>pat.findall('pppabcooapp')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u6240\u6709['ppp','oo','pp'].group()#\u5339\u914d\u7b2c\u4e00\u6b21\u51fa\u73b0\u8fb9\u754c\u201c^\u201d\uff1a\u5339\u914d\u5b57\u7b26\u4e32\u5f00\u5934\u6216\u884c\u5934Python>>>pat=re.compile('^[abc]')#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a>>>pat.search('defabc').group()>>>pat.match('defabc').group()#\u5747\u627e\u4e0d\u5230>>>pat.findall('defabc')[]>>>pat.search('adefabc').group()'a'>>>pat.match('adefabc').group()#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a'a'>>>pat.findall('adefabc')['a']>>>pat=re.compile('^[abc]+')#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u4e00\u6b21\u6216\u5219\u591a\u6b21\uff0c\u8d2a\u5a6a\uff1a\u5339\u914d\u591a\u4e2a>>>pat.findall('cbadefab')['cba']>>>pat=re.compile(r'^[abc]+?')#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u4e00\u6b21\u6216\u5219\u591a\u6b21\uff0c\u975e\u8d2a\u5a6a\uff1a\u5339\u914d\u4e00\u4e2a>>>pat.findall('cbadefab')['c']12345678910111213141516171819>>>pat=re.compile('^[abc]')\u00a0\u00a0\u00a0\u00a0#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a>>>pat.search('defabc').group()\u00a0\u00a0\u00a0\u00a0>>>pat.match('defabc').group()\u00a0\u00a0\u00a0\u00a0#\u5747\u627e\u4e0d\u5230>>>pat.findall('defabc')[]\u00a0>>>pat.search('adefabc').group()'a'>>>pat.match('adefabc').group()\u00a0\u00a0#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a'a'>>>pat.findall('adefabc')['a']\u00a0>>>pat=re.compile('^[abc]+')\u00a0\u00a0\u00a0\u00a0#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u4e00\u6b21\u6216\u5219\u591a\u6b21\uff0c\u8d2a\u5a6a\uff1a\u5339\u914d\u591a\u4e2a>>>pat.findall('cbadefab')['cba']>>>pat=re.compile(r'^[abc]+?')\u00a0\u00a0#\u5f00\u5934\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u4e00\u6b21\u6216\u5219\u591a\u6b21\uff0c\u975e\u8d2a\u5a6a\uff1a\u5339\u914d\u4e00\u4e2a>>>pat.findall('cbadefab')['c']\u201c$\u201d\uff1a\u5339\u914d\u5b57\u7b26\u4e32\u7ed3\u5c3e\u6216\u5219\u884c\u5c3ePython>>>pat=re.compile('[abc]$')>>>pat.match('adefAbc').group()#match\u5339\u914d\u7684\u662f\u5b57\u7b26\u4e32\u5f00\u5934\uff0c\u6240\u4ee5\u67e5\u627e$\u7684\u65f6\uff0c\u603b\u662f\u8fd4\u56deNone>>>pat.search('adefAbc').group()#\u7ed3\u5c3e\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a'c'>>>pat.findall('adefAbc')['c']>>>pat=re.compile('[abc]+$')>>>pat.search('adefAbc').group()#\u7ed3\u5c3e\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u4e00\u6b21\u6216\u5219\u591a\u6b21\uff0c\u8d2a\u5a6a\uff1a\u5339\u914d\u591a\u4e2a'bc'>>>pat.findall('adefAbc')['bc']1234567891011>>>pat=re.compile('[abc]$')>>>pat.match('adefAbc').group()\u00a0\u00a0#match\u5339\u914d\u7684\u662f\u5b57\u7b26\u4e32\u5f00\u5934\uff0c\u6240\u4ee5\u67e5\u627e$\u7684\u65f6\uff0c\u603b\u662f\u8fd4\u56deNone>>>pat.search('adefAbc').group()\u00a0\u00a0#\u7ed3\u5c3e\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a'c'>>>pat.findall('adefAbc')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0['c']>>>pat=re.compile('[abc]+$')>>>pat.search('adefAbc').group()\u00a0\u00a0#\u7ed3\u5c3e\u662fa\u3001b\u3001c\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u4e00\u6b21\u6216\u5219\u591a\u6b21\uff0c\u8d2a\u5a6a\uff1a\u5339\u914d\u591a\u4e2a'bc'>>>pat.findall('adefAbc')['bc']\u201c\\A\u201d\uff1a\u5339\u914d\u5b57\u7b26\u4e32\u5f00\u5934Python>>>pat=re.compile('\\A[abc]+')>>>pat.findall('cbadefab')['cba']>>>pat.search('cbadefab').group()'cba'12345>>>pat=re.compile('\\A[abc]+')>>>pat.findall('cbadefab')['cba']>>>pat.search('cbadefab').group()'cba'\u201c\\Z\u201d\uff1a\u5339\u914d\u5b57\u7b26\u4e32\u7ed3\u5c3ePython>>>pat=re.compile('[abc]+\\Z')>>>pat.search('cbadefab').group()'ab'>>>pat.findall('cbadefab')['ab']12345>>>pat=re.compile('[abc]+\\Z')>>>pat.search('cbadefab').group()'ab'>>>pat.findall('cbadefab')['ab']\u5206\u7ec4(\u2026)\uff1a\u5206\u7ec4\u5339\u914d,\u4ece\u5de6\u5230\u53f3,\u6bcf\u9047\u5230\u4e00\u4e2a(\u7f16\u53f7+1\uff0c\u5206\u7ec4\u540e\u9762\u53ef\u52a0\u6570\u91cf\u8bcdPython>>>pat=re.compile(r'(a)\\w(c)')#\\w:\u5355\u4e2a\u7684\u6570\u5b57\u6216\u5b57\u6bcd[A-Za-z0-9]>>>pat.match('abcdef').group()'abc'>>>pat=re.compile('(a)b(c)')#\u52062\u7ec4\uff0c\u533f\u540d\u5206\u7ec4>>>pat.match('abcdef').group()#\u9ed8\u8ba4\u8fd4\u56de\u5339\u914d\u7684\u5b57\u7b26\u4e32'abc'>>>pat.match('abcdef').group(1)#\u53d6\u5206\u7ec41\uff0c\u9002\u7528\u4e8esearch'a'>>>pat.match('abcdef').group(2)#\u53d6\u5206\u7ec42\uff0c\u9002\u7528\u4e8esearch'c'>>>pat.match('abcdef').groups()#\u53d6\u6240\u6709\u5206\u7ec4\uff0c\u5143\u7ec4\u5f62\u5f0f\u8fd4\u56de('a','c')12345678910111213>>>pat=re.compile(r'(a)\\w(c)')\u00a0\u00a0#\\w:\u5355\u4e2a\u7684\u6570\u5b57\u6216\u5b57\u6bcd[A-Za-z0-9]>>>pat.match('abcdef').group()'abc'>>>pat=re.compile('(a)b(c)')\u00a0\u00a0\u00a0\u00a0#\u52062\u7ec4\uff0c\u533f\u540d\u5206\u7ec4\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0>>>pat.match('abcdef').group()\u00a0\u00a0#\u9ed8\u8ba4\u8fd4\u56de\u5339\u914d\u7684\u5b57\u7b26\u4e32'abc'>>>pat.match('abcdef').group(1)#\u53d6\u5206\u7ec41\uff0c\u9002\u7528\u4e8esearch'a'>>>pat.match('abcdef').group(2)#\u53d6\u5206\u7ec42\uff0c\u9002\u7528\u4e8esearch'c'>>>pat.match('abcdef').groups()#\u53d6\u6240\u6709\u5206\u7ec4\uff0c\u5143\u7ec4\u5f62\u5f0f\u8fd4\u56de('a','c')<number>\uff1a\u5f15\u7528\u7f16\u53f7\u4e3a<number>\u7684\u5206\u7ec4\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32Python>>>pat=re.compile(r'www\\.(.*)\\..{3}')>>>pat.match('www.dxy.com').group(1)'dxy'123>>>pat=re.compile(r'www\\.(.*)\\..{3}')>>>pat.match('www.dxy.com').group(1)'dxy'\u201c(?P<name>\u2026)\u201d\u00a0\uff1a\u5728\u6a21\u5f0f\u91cc\u9762\u7528()\u6765\u8868\u793a\u5206\u7ec4\uff08\u547d\u540d\u5206\u7ec4\uff09,\u9002\u7528\u4e8e\u63d0\u53d6\u76ee\u6807\u5b57\u7b26\u4e32\u4e2d\u7684\u67d0\u4e00\u4e9b\u90e8\u4f4d\u3002Python>>>pat=re.compile(r'(?P<K>a)\\w(c)')#\u52062\u7ec4\uff1a\u547d\u540d\u5206\u7ec4+\u533f\u540d\u5206\u7ec4>>>pat.search('abcdef').groups()#\u53d6\u6240\u6709\u5206\u7ec4\uff0c\u5143\u7ec4\u5f62\u5f0f\u8fd4\u56de('a','c')>>>pat.search('abcdef').group(1)#\u53d6\u5206\u7ec41\uff0c\u9002\u7528\u4e8ematch'a'>>>pat.search('abcdef').group(2)#\u53d6\u5206\u7ec42\uff0c\u9002\u7528\u4e8ematch'c'>>>pat.search('abcdef').group()#\u9ed8\u8ba4\u8fd4\u56de\u5339\u914d\u7684\u5b57\u7b26\u4e32'abc'>>>pat.search('abcdef').groupdict()#\u547d\u540d\u5206\u7ec4\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u5b57\u5178\u3010\u4e13\u6709\u3011\uff0c\u533f\u540d\u5206\u7ec4\u4e5f\u6ca1\u6709{'K':'a'}1234567891011>>>pat=re.compile(r'(?P<K>a)\\w(c)')\u00a0\u00a0\u00a0\u00a0#\u52062\u7ec4\uff1a\u547d\u540d\u5206\u7ec4+\u533f\u540d\u5206\u7ec4>>>pat.search('abcdef').groups()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u53d6\u6240\u6709\u5206\u7ec4\uff0c\u5143\u7ec4\u5f62\u5f0f\u8fd4\u56de('a','c')>>>pat.search('abcdef').group(1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u53d6\u5206\u7ec41\uff0c\u9002\u7528\u4e8ematch'a'>>>pat.search('abcdef').group(2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u53d6\u5206\u7ec42\uff0c\u9002\u7528\u4e8ematch'c'>>>pat.search('abcdef').group()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u9ed8\u8ba4\u8fd4\u56de\u5339\u914d\u7684\u5b57\u7b26\u4e32'abc'>>>pat.search('abcdef').groupdict()\u00a0\u00a0\u00a0\u00a0#\u547d\u540d\u5206\u7ec4\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u5b57\u5178\u3010\u4e13\u6709\u3011\uff0c\u533f\u540d\u5206\u7ec4\u4e5f\u6ca1\u6709{'K':'a'}\u201c(?P=name)\u201d\uff1a\u5f15\u7528\u522b\u540d\u4e3a<name>\u7684\u5206\u7ec4\u5339\u914d\u5230\u7684\u4e32Python>>>pat=re.compile(r'(?P<K>a)\\w(c)(?P=K)')#(?P=K)\u5f15\u7528\u5206\u7ec41\u7684\u503c\uff0c\u5c31\u662fa>>>pat.search('abcdef').group()#\u5339\u914d\u4e0d\u5230\uff0c\u56e0\u4e3a\u5b8c\u6574'a\\wca',\u6a21\u5f0f\u7684\u7b2c4\u4f4d\u662faTraceback(mostrecentcalllast):File\"<stdin>\",line1,in<module>AttributeError:'NoneType'objecthasnoattribute'group'>>>pat.search('abcadef').group()#\u5339\u914d\u5230\uff0c\u6a21\u5f0f\u7684\u7b2c4\u4f4d\u548c\u7ec41\u4e00\u6837,\u503c\u662fc'abca'>>>pat.search('abcadef').groups()('a','c')>>>pat.search('abcadef').group(1)'a'>>>pat.search('abcadef').group(2)'c1234567891011121314>>>pat=re.compile(r'(?P<K>a)\\w(c)(?P=K)')\u00a0\u00a0\u00a0\u00a0#(?P=K)\u5f15\u7528\u5206\u7ec41\u7684\u503c\uff0c\u5c31\u662fa>>>pat.search('abcdef').group()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u4e0d\u5230\uff0c\u56e0\u4e3a\u5b8c\u6574'a\\wca',\u6a21\u5f0f\u7684\u7b2c4\u4f4d\u662faTraceback(mostrecentcalllast):\u00a0\u00a0File\"<stdin>\",line1,in<module>AttributeError:'NoneType'objecthasnoattribute'group'\u00a0>>>pat.search('abcadef').group()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u5230\uff0c\u6a21\u5f0f\u7684\u7b2c4\u4f4d\u548c\u7ec41\u4e00\u6837,\u503c\u662fc'abca'>>>pat.search('abcadef').groups()('a','c')>>>pat.search('abcadef').group(1)'a'>>>pat.search('abcadef').group(2)'c\u201c<number>\u201d\uff1a\u5f15\u7528\u5206\u7ec4\u7f16\u53f7\u5339\u914d\uff1aPython>>>pat=re.compile(r'(?P<K>a)\\w(c)(?P=K)\\2')#\\2\u5f15\u7528\u5206\u7ec42\u7684\u503c\uff0c\u5c31\u662fc>>>pat.findall('Aabcadef')#\u5339\u914d\u4e0d\u5230\uff0c\u56e0\u4e3a\u5b8c\u6574'a\\wcac',\u6a21\u5f0f\u7684\u7b2c5\u4f4d\u662fc[]>>>pat.findall('Aabcacdef')#\u5339\u914d\u5230\uff0c\u6a21\u5f0f\u7684\u7b2c5\u4f4d\u548c\u7ec42\u4e00\u6837,\u503c\u662fc[('a','c')]>>>pat.search('Aabcacdef').groups()('a','c')>>>pat.search('Aabcacdef').group()'abcac'>>>pat.search('Aabcacdef').group(1)'a'>>>pat.search('Aabcacdef').group(2)'c'12345678910111213>>>pat=re.compile(r'(?P<K>a)\\w(c)(?P=K)\\2')\u00a0\u00a0#\\2\u5f15\u7528\u5206\u7ec42\u7684\u503c\uff0c\u5c31\u662fc>>>pat.findall('Aabcadef')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u4e0d\u5230\uff0c\u56e0\u4e3a\u5b8c\u6574'a\\wcac',\u6a21\u5f0f\u7684\u7b2c5\u4f4d\u662fc[]>>>pat.findall('Aabcacdef')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u5230\uff0c\u6a21\u5f0f\u7684\u7b2c5\u4f4d\u548c\u7ec42\u4e00\u6837,\u503c\u662fc[('a','c')]>>>pat.search('Aabcacdef').groups()('a','c')>>>pat.search('Aabcacdef').group()'abcac'>>>pat.search('Aabcacdef').group(1)'a'>>>pat.search('Aabcacdef').group(2)'c'\u7279\u6b8a\u6784\u9020(?:\u2026)(\u2026)\u4e0d\u5206\u7ec4\u7248\u672c,\u7528\u4e8e\u4f7f\u7528|\u6216\u8005\u540e\u63a5\u6570\u91cf\u8bcd(?iLmsux)iLmsux\u7684\u6bcf\u4e2a\u5b57\u7b26\u4ee3\u8868\u4e00\u4e2a\u5339\u914d\u6a21\u5f0f,\u53ea\u80fd\u7528\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5f00\u5934,\u53ef\u9009\u591a\u4e2a(?#\u2026)#\u53f7\u540e\u7684\u5185\u5bb9\u5c06\u4f5c\u4e3a\u6ce8\u91ca(?=\u2026)\u4e4b\u540e\u7684\u5b57\u7b26\u4e32\u5185\u5bb9\u9700\u8981\u5339\u914d\u8868\u8fbe\u5f0f\u624d\u80fd\u6210\u529f\u5339\u914d(?!\u2026)\u4e4b\u540e\u7684\u5b57\u7b26\u4e32\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\u624d\u80fd\u6210\u529f(?(?(?(id/name)yes|no)\u5982\u679c\u7f16\u53f7\u4e3aid/\u540d\u5b57\u4e3aname\u7684\u7ec4\u5339\u914d\u5230\u5b57\u7b26\u4e32,\u5219\u9700\u8981\u5339\u914dyes,\u5426\u5219\u5339\u914dno,no\u53ef\u4ee5\u7701\u7565\u201c(?:\u2026)\u201d\uff1a()\u91cc\u9762\u6709?:\u8868\u793a\u8be5()\u4e0d\u662f\u5206\u7ec4Python>>>pat=re.compile(r'a(?:bc)')>>>pat.findall('abc')['abc']>>>pat.match('abc').groups()#\u663e\u793a\u4e0d\u51fa\u5206\u7ec41234>>>pat=re.compile(r'a(?:bc)')>>>pat.findall('abc')['abc']>>>pat.match('abc').groups()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u663e\u793a\u4e0d\u51fa\u5206\u7ec4\u201c(?=\u2026)\u201d\uff1a\u5339\u914d\u2026\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de\u3002\u5bf9\u540e\u8fdb\u884c\u5339\u914d\uff0c\u603b\u662f\u5bf9\u540e\u9762\u8fdb\u884c\u5339\u914dPython>>>pat=re.compile(r'\\w(?=\\d)')#\u5339\u914d\u8868\u8fbe\u5f0f\\d\uff0c\u8fd4\u56de\u6570\u5b57\u7684\u524d\u4e00\u4f4d\uff0c\\w\uff1a\u5355\u8bcd\u5b57\u7b26[A-Za-z0-9]>>>pat.findall('abc1def1xyz1')['c','f','z']>>>pat.findall('zhoujy20130628hangzhou')#\u5339\u914d\u6570\u5b57\u7684\u524d\u4e00\u4f4d\uff0c\u5217\u8868\u8fd4\u56de['y','2','0','1','3','0','6','2']>>>pat=re.compile(r'\\w+(?=\\d)')>>>pat.findall('abc1,def1,xyz1')#\u5339\u914d\u6700\u672b\u6570\u5b57\u7684\u524d\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u8fd4\u56de['abc','def','xyz']>>>pat.findall('abc21,def31,xyz41')['abc2','def3','xyz4']>>>pat.findall('zhoujy20130628hangzhou')['zhoujy2013062']>>>pat=re.compile(r'[A-Za-z]+(?=\\d)')#[A-Za-z],\u5339\u914d\u5b57\u6bcd,\u53ef\u4ee5\u7528\u5176\u4ed6\u7684\u6b63\u5219\u65b9\u6cd5>>>pat.findall('zhoujy20130628hangzhou123')#\u5339\u914d\u540e\u9762\u5e26\u6709\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u8fd4\u56de['zhoujy','hangzhou']>>>pat.findall('abc21,def31,xyz41')['abc','def','xyz']1234567891011121314151617>>>pat=re.compile(r'\\w(?=\\d)')\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u8868\u8fbe\u5f0f\\d\uff0c\u8fd4\u56de\u6570\u5b57\u7684\u524d\u4e00\u4f4d\uff0c\\w\uff1a\u5355\u8bcd\u5b57\u7b26[A-Za-z0-9]>>>pat.findall('abc1def1xyz1')['c','f','z']>>>pat.findall('zhoujy20130628hangzhou')\u00a0\u00a0#\u5339\u914d\u6570\u5b57\u7684\u524d\u4e00\u4f4d\uff0c\u5217\u8868\u8fd4\u56de['y','2','0','1','3','0','6','2']>>>pat=re.compile(r'\\w+(?=\\d)')>>>pat.findall('abc1,def1,xyz1')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u6700\u672b\u6570\u5b57\u7684\u524d\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u8fd4\u56de['abc','def','xyz']>>>pat.findall('abc21,def31,xyz41')['abc2','def3','xyz4']>>>pat.findall('zhoujy20130628hangzhou')['zhoujy2013062']>>>pat=re.compile(r'[A-Za-z]+(?=\\d)')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#[A-Za-z],\u5339\u914d\u5b57\u6bcd,\u53ef\u4ee5\u7528\u5176\u4ed6\u7684\u6b63\u5219\u65b9\u6cd5>>>pat.findall('zhoujy20130628hangzhou123')#\u5339\u914d\u540e\u9762\u5e26\u6709\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u8fd4\u56de['zhoujy','hangzhou']>>>pat.findall('abc21,def31,xyz41')['abc','def','xyz']\u201c(?!\u2026)\u201d\u4e0d\u5339\u914d\u2026\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de\u3002\u5bf9\u540e\u8fdb\u884c\u5339\u914dPython>>>pat=re.compile(r'[A-Za-z]+(?!\\d)')#[A-Za-z],\u5339\u914d\u5b57\u6bcd,\u53ef\u4ee5\u7528\u5176\u4ed6\u7684\u6b63\u5219\u65b9\u6cd5>>>pat.findall('zhoujy20130628hangzhou123,12,binjiang310')#\u5339\u914d\u540e\u9762\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u8fd4\u56de['zhouj','hangzho','binjian']>>>pat.findall('abc21,def31,xyz41')['ab','de','xy']12345>>>pat=re.compile(r'[A-Za-z]+(?!\\d)')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#[A-Za-z],\u5339\u914d\u5b57\u6bcd,\u53ef\u4ee5\u7528\u5176\u4ed6\u7684\u6b63\u5219\u65b9\u6cd5>>>pat.findall('zhoujy20130628hangzhou123,12,binjiang310')\u00a0\u00a0#\u5339\u914d\u540e\u9762\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u5217\u8868\u8fd4\u56de['zhouj','hangzho','binjian']>>>pat.findall('abc21,def31,xyz41')['ab','de','xy']\u201c(?<=\u2026)\u201d\uff1a\u5339\u914d\u2026\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de\u3002\u5bf9\u524d\u8fdb\u884c\u5339\u914d,\u603b\u662f\u5bf9\u524d\u9762\u8fdb\u884c\u5339\u914dPython>>>pat=re.compile(r'(?<=\\d)[A-Za-z]+')#\u5339\u914d\u524d\u9762\u662f\u6570\u5b57\u7684\u5b57\u6bcd>>>pat.findall('abc21,def31,xyz41')[]>>>pat.findall('1abc21,2def31,3xyz41')['abc','def','xyz']>>>pat.findall('zhoujy20130628hangzhou123,12,binjiang310')['hangzhou']1234567>>>pat=re.compile(r'(?<=\\d)[A-Za-z]+')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u524d\u9762\u662f\u6570\u5b57\u7684\u5b57\u6bcd>>>pat.findall('abc21,def31,xyz41')[]>>>pat.findall('1abc21,2def31,3xyz41')['abc','def','xyz']>>>pat.findall('zhoujy20130628hangzhou123,12,binjiang310')['hangzhou']\u201c(?<!\u2026)\u201d\uff1a\u4e0d\u5339\u914d\u2026\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de\u3002\u5bf9\u524d\u8fdb\u884c\u5339\u914d,\u603b\u662f\u5bf9\u524d\u9762\u8fdb\u884c\u5339\u914dPython>>>pat=re.compile(r'(?<!\\d)[A-Za-z]+')#\u5339\u914d\u524d\u9762\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u6bcd>>>pat.findall('abc21,def31,xyz41')['abc','def','xyz']>>>pat.findall('zhoujy20130628hangzhou123,12,binjiang310')['zhoujy','angzhou','binjiang']12345>>>pat=re.compile(r'(?<!\\d)[A-Za-z]+')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5339\u914d\u524d\u9762\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u6bcd>>>pat.findall('abc21,def31,xyz41')['abc','def','xyz']>>>pat.findall('zhoujy20130628hangzhou123,12,binjiang310')['zhoujy','angzhou','binjiang']\u201c(?(id/name)yes|no)\u201d:\u7ec4\u662f\u5426\u5339\u914d\uff0c\u5339\u914d\u8fd4\u56dePython>>>pat=re.compile(r'a(\\d)?bc(?(1)\\d)')#no\u7701\u7565\u4e86\uff0c\u5b8c\u6574\u7684\u662fa\\dbc\\d==>a2bc3,\u603b\u51715\u4f4d\uff0c\u7b2c2\u4f4d\u662f\u53ef\u6709\u53ef\u65e0\u7684\u6570\u5b57\uff0c\u7b2c5\u4e3a\u662f\u6570\u5b57>>>pat.findall('abc9')#\u8fd4\u56de\u7ec41\uff0c\u4f46\u7b2c2\u4f4d\uff08\u7ec41\uff09\u6ca1\u6709\uff0c\u5373\u8fd4\u56de\u4e86''['']>>>pat.findall('a8bc9')#\u5b8c\u6574\u7684\u6a21\u5f0f\uff0c\u8fd4\u56de\u7ec41['8']>>>pat.match('a8bc9').group()'a8bc9'>>>pat.match('a8bc9').group(1)'8'>>>pat.findall('a8bc')#\u7b2c5\u4f4d\u4e0d\u5b58\u5728\uff0c\u5219\u6ca1\u6709\u5339\u914d\u5230[]1234567891011>>>pat=re.compile(r'a(\\d)?bc(?(1)\\d)')\u00a0\u00a0#no\u7701\u7565\u4e86\uff0c\u5b8c\u6574\u7684\u662fa\\dbc\\d==>a2bc3,\u603b\u51715\u4f4d\uff0c\u7b2c2\u4f4d\u662f\u53ef\u6709\u53ef\u65e0\u7684\u6570\u5b57\uff0c\u7b2c5\u4e3a\u662f\u6570\u5b57>>>pat.findall('abc9')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u7ec41\uff0c\u4f46\u7b2c2\u4f4d\uff08\u7ec41\uff09\u6ca1\u6709\uff0c\u5373\u8fd4\u56de\u4e86''['']>>>pat.findall('a8bc9')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5b8c\u6574\u7684\u6a21\u5f0f\uff0c\u8fd4\u56de\u7ec41['8']>>>pat.match('a8bc9').group()'a8bc9'>>>pat.match('a8bc9').group(1)'8'>>>pat.findall('a8bc')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u7b2c5\u4f4d\u4e0d\u5b58\u5728\uff0c\u5219\u6ca1\u6709\u5339\u914d\u5230[]\u201c(?iLmsux)\u201d:\u8fd9\u91cc\u5c31\u4ecb\u7ecd\u4e0bi\u53c2\u6570\uff1a\u5927\u5c0f\u5199\u533a\u5206\u5339\u914dPython>>>pat=re.compile(r'abc')>>>pat.findall('abc')['abc']>>>pat.findall('ABC')[]>>>pat=re.compile(r'(?i)abc')#(?i)\u4e0d\u533a\u5206\u5927\u5c0f\u5199>>>pat.findall('ABC')['ABC']>>>pat.findall('abc')['abc']>>>pat.findall('aBc')['aBc']>>>pat.findall('aBC')['aBC']>>>pat=re.compile(r'abc',re.I)#re.I\u4f5c\u4e3a\u53c2\u6570\u4f7f\u7528\uff0c\u63a8\u8350>>>pat.findall('aBC')['aBC']>>>pat.findall('abc')['abc']>>>pat.findall('ABC')['ABC']123456789101112131415161718192021>>>pat=re.compile(r'abc')>>>pat.findall('abc')['abc']>>>pat.findall('ABC')[]>>>pat=re.compile(r'(?i)abc')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#(?i)\u4e0d\u533a\u5206\u5927\u5c0f\u5199>>>pat.findall('ABC')['ABC']>>>pat.findall('abc')['abc']>>>pat.findall('aBc')['aBc']>>>pat.findall('aBC')['aBC']>>>pat=re.compile(r'abc',re.I)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#re.I\u4f5c\u4e3a\u53c2\u6570\u4f7f\u7528\uff0c\u63a8\u8350>>>pat.findall('aBC')['aBC']>>>pat.findall('abc')['abc']>>>pat.findall('ABC')['ABC']http://www.cnblogs.com/huxi/a\u20262\u8d5e14\u6536\u85cf5\u8bc4\u8bba"]},
{"art_title": ["BaseHTTPServer \u2014\u2014\u5b9e\u73b0 Web \u670d\u52a1\u5668"], "art_url": ["http://python.jobbole.com/88629/"], "art_create_time": ["2017/09/20"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aLearnPython\u00a0\u00a0\u00a0\u5728SocketServer\u2014\u2014\u7f51\u7edc\u901a\u4fe1\u670d\u52a1\u5668\u4e2d\u6211\u4eec\u4ecb\u7ecd\u4e86Python\u6807\u51c6\u5e93\u4e2d\u7684SocketServer\u6a21\u5757\uff0c\u4e86\u89e3\u4e86\u8981\u5b9e\u73b0\u7f51\u7edc\u901a\u4fe1\u670d\u52a1\uff0c\u5c31\u8981\u6784\u5efa\u4e00\u4e2a\u670d\u52a1\u5668\u7c7b\u548c\u8bf7\u6c42\u5904\u7406\u7c7b\u3002\u540c\u65f6\uff0c\u8be5\u6a21\u5757\u8fd8\u4e3a\u6211\u4eec\u521b\u5efa\u4e86\u4e0d\u540c\u7684\u670d\u52a1\u5668\u7c7b\u548c\u8bf7\u6c42\u5904\u7406\u7c7b\u30021.\u670d\u52a1\u5668\u7c7bBaseServerTCPServer(BaseServer)UDPServer(TCPServer)UnixStreamServerUnixDatagramServer2.\u8bf7\u6c42\u5904\u7406\u7c7bBaseRequestHandlerStreamRequestHandler(BaseRequestHandler)DatagramRequestHandler(BaseRequestHandler)\u901a\u8fc7\u670d\u52a1\u5668\u7c7b\u548c\u8bf7\u6c42\u5904\u7406\u7c7b\u7684\u642d\u914d\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u4e0d\u540c\u7684\u534f\u8bae\u7c7b\u578b\u3002\u672c\u6587\u4ecb\u7ecd\u7684BaseHTTPServer\u6a21\u5757\u4fbf\u662f\u7ee7\u627fTCPServer\u548cStreamRequestHandler\uff0c\u5b9e\u73b0\u4e86Web\u670d\u52a1\u5668\u7684\u901a\u4fe1\u3002HTTP\u670d\u52a1\u5668HTTP\u670d\u52a1\u5668\u7ee7\u627f\u81eaSocketServer\u6a21\u5757\u4e2d\u7684TCPServer\u7c7b\u3002\u5b83\u7684\u5b9a\u4e49\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u662f\u91cd\u5199\u4e86\u5176\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\u3002PythonclassHTTPServer(SocketServer.TCPServer):allow_reuse_address=1#Seemstomakesenseintestingenvironmentdefserver_bind(self):\"\"\"Overrideserver_bindtostoretheservername.\"\"\"SocketServer.TCPServer.server_bind(self)host,port=self.socket.getsockname()[:2]self.server_name=socket.getfqdn(host)self.server_port=port12345678classHTTPServer(SocketServer.TCPServer):\u00a0\u00a0\u00a0\u00a0allow_reuse_address=1\u00a0\u00a0\u00a0\u00a0#Seemstomakesenseintestingenvironment\u00a0\u00a0\u00a0\u00a0defserver_bind(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"Overrideserver_bindtostoretheservername.\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SocketServer.TCPServer.server_bind(self)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0host,port=self.socket.getsockname()[:2]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.server_name=socket.getfqdn(host)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.server_port=port\u91cd\u5199\u7684server_bind()\u65b9\u6cd5\u4e3b\u8981\u662f\u4e3a\u4e86\u83b7\u53d6\u670d\u52a1\u5668\u540d\u548c\u7aef\u53e3\u3002\u5176\u4f59\u65b9\u6cd5\u4ee5\u53ca\u670d\u52a1\u5668\u7684\u5b9e\u73b0\u8fc7\u7a0b\u8be6\u89c1SocketServer\u2014\u2014\u7f51\u7edc\u901a\u4fe1\u670d\u52a1\u5668\u3002\u6b64\u5916\uff0c\u8fd8\u53ef\u4ee5\u4eceSocketServer\u6a21\u5757\u4e2d\u5f15\u5165\u2019mix-in\u2019\u7c7b\uff0c\u57fa\u4e8eHTTPServer\u521b\u5efa\u652f\u6301\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u7684\u670d\u52a1\u5668\u3002HTTP\u8bf7\u6c42\u5904\u7406\u57fa\u7c7b\u4e3a\u4e86\u5904\u7406HTTP\u8bf7\u6c42\uff0cBaseHTTPServer\u6a21\u5757\u6784\u9020\u4e86HTTP\u8bf7\u6c42\u5904\u7406\u57fa\u7c7bBaseHTTPRequestHandler\uff0c\u5b83\u7ee7\u627f\u81eaSocketServer\u6a21\u5757\u4e2d\u7684StreamRequestHandler\u7c7b\u3002HTTP\u8bf7\u6c42\u5904\u7406\u57fa\u7c7b\u4e2d\u6709\u4e00\u4e9b\u91cd\u8981\u7684\u65b9\u6cd5\uff1a1.handle()\u2014\u2014\u8fd9\u4e2a\u65b9\u6cd5\u662f\u8bf7\u6c42\u5904\u7406\u7c7b\u771f\u6b63\u5904\u7406\u8bf7\u6c42\u5177\u4f53\u5de5\u4f5c\u7684\u65b9\u6cd5\uff0c\u4f8b\u5982\u89e3\u6790\u5230\u6765\u7684\u8bf7\u6c42\uff0c\u5904\u7406\u6570\u636e\uff0c\u5e76\u53d1\u56de\u54cd\u5e94\u7b49\u3002\u5728BaseHTTPRequestHandler\u4e2d\u5b83\u662f\u4e00\u4e2a\u5165\u53e3\u6587\u4ef6\uff0c\u5c06\u8c03\u7528\u5176\u4ed6\u7684\u65b9\u6cd5\u5b8c\u6210\u8bf7\u6c42\u5904\u7406\u30022.handle_one_request()\u2014\u2014\u7531handle()\u8c03\u7528\uff0c\u7528\u4e8e\u5904\u7406\u8bf7\u6c42\u3002\u5176\u4e3b\u8981\u5de5\u4f5c\u5305\u62ec\uff1a\u8c03\u7528parse_request()\u65b9\u6cd5\uff0c\u89e3\u6790\u8bf7\u6c42\uff0c\u83b7\u53d6\u8bf7\u6c42\u62a5\u6587\u4e2d\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u8bf7\u6c42\u7684\u65b9\u6cd5\u3001\u8bf7\u6c42URL\u3001\u8bf7\u6c42\u7684HTTP\u7248\u672c\u53f7\u3001\u8bf7\u6c42\u9996\u90e8\u7b49\u3002\u5982\u679c\u89e3\u6790\u5931\u8d25\uff0c\u5219\u8c03\u7528send_error()\u65b9\u6cd5\u53d1\u56de\u4e00\u4e2a\u9519\u8bef\u54cd\u5e94\u3002\u8c03\u7528do_SPAM()\u65b9\u6cd5\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u7684SPAM\u6307\u4ee3GET\u3001POST\u3001HEAD\u7b49\u8bf7\u6c42\u65b9\u6cd5\uff0c\u9700\u8981\u5728\u8bf7\u6c42\u5904\u7406\u7c7b\u4e2d\u6784\u5efa\u5177\u4f53\u7684\u8bf7\u6c42\u5904\u7406\u65b9\u6cd5\uff0c\u4f8b\u5982do_GET\u5904\u7406GET\u8bf7\u6c42\uff0cdo_POST\u5904\u7406POST\u8bf7\u6c42\u3002do_SPAM()\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528send_response()\u3001send_header()\u3001end_headers()\u7b49\u65b9\u6cd5\u521b\u5efa\u54cd\u5e94\u9996\u884c\u548c\u54cd\u5e94\u9996\u90e8\u7b49\u5185\u5bb9\u30023.parse_request()\u2014\u2014\u89e3\u6790\u8bf7\u6c42\u30024.send_error()\u2014\u2014\u53d1\u56de\u9519\u8bef\u54cd\u5e94\u30025.send_response()\u2014\u2014\u521b\u5efa\u54cd\u5e94\u9996\u884c\u548c\u54cd\u5e94\u9996\u90e8\u7b49\u5185\u5bb9\u30026.send_header()\u2014\u2014\u8bbe\u7f6e\u54cd\u5e94\u9996\u90e8\u5185\u5bb9\u30027.end_headers()\u2014\u2014\u8c03\u7528\u6b64\u65b9\u6cd5\u53ef\u4ee5\u5728\u9996\u90e8\u540e\u589e\u52a0\u4e00\u4e2a\u7a7a\u884c\uff0c\u8868\u793a\u9996\u90e8\u5185\u5bb9\u7ed3\u675f\uff08\u4e0d\u9002\u7528\u4e8eHTTP/0.9\uff098.\u8fd8\u5305\u62ec\u5176\u4ed6\u7684\u4e00\u4e9b\u8f85\u52a9\u51fd\u6570\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1aBaseHTTPRequestHandler\u662fHTTP\u8bf7\u6c42\u5904\u7406\u7684\u57fa\u7c7b\uff0c\u5e76\u4e0d\u5305\u542b\u8bf8\u5982do_GET\u3001do_POST\u7b49\u65b9\u6cd5\uff0c\u5176\u4ed6\u7ee7\u627f\u8be5\u7c7b\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u9700\u8981\u81ea\u5df1\u5b9e\u73b0\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u5df2\u5b8c\u6210\u5bf9\u5177\u4f53\u8bf7\u6c42\u7684\u5904\u7406\u3002\u5bf9\u6b64\uff0c\u53ef\u4ee5\u53c2\u8003SimpleHTTPServer\u6a21\u5757\uff0c\u4e5f\u53ef\u67e5\u770b\u6587\u7ae0SimpleHTTPServer\u2014\u2014\u4e00\u4e2a\u7b80\u5355\u7684HTTP\u670d\u52a1\u5668\u30021\u8d5e5\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["SimpleHTTPServer \u2014\u2014\u4e00\u4e2a\u7b80\u5355\u7684HTTP\u670d\u52a1\u5668"], "art_url": ["http://python.jobbole.com/88632/"], "art_create_time": ["2017/09/20"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/3cccc8c943fe706b4be2fc3d02ba4a1e.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aLearnPython\u00a0\u00a0\u00a0Python\u6807\u51c6\u5e93\u4e2d\u7684BaseHTTPServer\u6a21\u5757\u5b9e\u73b0\u4e86\u4e00\u4e2a\u57fa\u7840\u7684HTTP\u670d\u52a1\u5668\u57fa\u7c7b\u548cHTTP\u8bf7\u6c42\u5904\u7406\u7c7b\u3002\u8fd9\u5728\u6587\u7ae0BaseHTTPServer\u2014\u2014\u5b9e\u73b0Web\u670d\u52a1\u5668\u4e2d\u8fdb\u884c\u4e86\u76f8\u5173\u7684\u4ecb\u7ecd\u3002\u7136\u800c\uff0cBaseHTTPServer\u6a21\u5757\u4e2d\u5e76\u6ca1\u6709\u5b9a\u4e49\u76f8\u5173\u7684\u8bf7\u6c42\u65b9\u6cd5\uff0c\u8bf8\u5982GET\u3001HEAD\u3001POST\u7b49\u3002\u5728BaseHTTPServer\u6a21\u5757\u7684\u57fa\u7840\u4e0a\uff0cPython\u6807\u51c6\u5e93\u4e2d\u7684SimpleHTTPServer\u6a21\u5757\u5b9e\u73b0\u4e86\u7b80\u5355\u7684GET\u3001HEAD\u8bf7\u6c42\u3002\u5728\u8be5\u6a21\u5757\u4e2d\uff0c\u5b83\u6cbf\u7528\u4e86BaseHTTPServer\u6a21\u5757\u4e2d\u5b9e\u73b0\u7684HTTPServer\u670d\u52a1\u5668\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002\u800c\u8bf7\u6c42\u5904\u7406\u7c7b\u5219\u662f\u7ee7\u627f\u4e86BaseHTTPServer\u6a21\u5757\u4e2d\u7684BaseHTTPRequestHandler\u7c7b\u3002SimpleHTTPServer\u6a21\u5757\u5b9e\u73b0\u4e86\u5177\u6709GET\u3001HEAD\u8bf7\u6c42\u65b9\u6cd5\u7684HTTP\u901a\u4fe1\u670d\u52a1\u3002\u6839\u636e\u6587\u7ae0BaseHTTPServer\u2014\u2014\u5b9e\u73b0Web\u670d\u52a1\u5668\u4e2d\u7684\u4ecb\u7ecd\uff0c\u53ea\u9700\u8981\u5728\u8bf7\u6c42\u5904\u7406\u7c7b\u4e2d\u5b9a\u4e49do_GET()\u548cdo_HEAD()\u65b9\u6cd5\u5373\u53ef\u3002do_GET()do_GET()\u65b9\u6cd5\u7684\u6e90\u7801\u5982\u4e0b\uff1aPythondefdo_GET(self):\"\"\"ServeaGETrequest.\"\"\"f=self.send_head()iff:try:self.copyfile(f,self.wfile)finally:f.close()12345678defdo_GET(self):\u00a0\u00a0\u00a0\u00a0\"\"\"ServeaGETrequest.\"\"\"\u00a0\u00a0\u00a0\u00a0f=self.send_head()\u00a0\u00a0\u00a0\u00a0iff:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.copyfile(f,self.wfile)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0finally:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f.close()\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\uff0c\u5b83\u8c03\u7528\u4e86send_head()\u65b9\u6cd5\u6765\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u3002send_head()\u65b9\u6cd5\u4f1a\u8c03\u7528send_response()\u3001send_header()\u3001send_error()\u65b9\u6cd5\u7b49\u8bbe\u7f6e\u54cd\u5e94\u62a5\u6587\u7b49\u3002do_HEAD()do_HEAD()\u65b9\u6cd5\u7684\u6e90\u7801\u5982\u4e0b\uff1aPythondefdo_HEAD(self):\"\"\"ServeaHEADrequest.\"\"\"f=self.send_head()iff:f.close()12345defdo_HEAD(self):\u00a0\u00a0\u00a0\u00a0\"\"\"ServeaHEADrequest.\"\"\"\u00a0\u00a0\u00a0\u00a0f=self.send_head()\u00a0\u00a0\u00a0\u00a0iff:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f.close()do_HEAD()\u65b9\u6cd5\u548cdo_GET()\u65b9\u6cd5\u7684\u5b9e\u73b0\u7c7b\u4f3c\u3002\u6d4b\u8bd5\u4f8b\u5b50SimpleHTTPServer\u6a21\u5757\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6d4b\u8bd5\u51fd\u6570\u3002\u53ea\u9700\u8981\u5728\u547d\u4ee4\u884c\u4e2d\u8fd0\u884c\u5982\u4e0b\u4ee3\u7801\uff1aPythonpythonSimpleHTTPServer.py#SimpleHTTPServer.py\u6307\u4ee3Python\u6807\u51c6\u5e93\u4e2d\u7684SimpleHTTPServer\u6a21\u5757\uff0c\u6ce8\u610f\u6587\u4ef6\u4f4d\u7f6e\u30021pythonSimpleHTTPServer.py\u00a0\u00a0#SimpleHTTPServer.py\u6307\u4ee3Python\u6807\u51c6\u5e93\u4e2d\u7684SimpleHTTPServer\u6a21\u5757\uff0c\u6ce8\u610f\u6587\u4ef6\u4f4d\u7f6e\u3002\u5982\u679c\u5728\u672c\u5730\u73af\u5883\u4e2d\u8fd0\u884c\u4ee5\u4e0a\u4ee3\u7801\uff0c\u5c06\u4f1a\u8c03\u7528\u8bf7\u6c42\u5904\u7406\u7c7b\u7684translate_path\u548clist_directory\u65b9\u6cd5\u5c55\u793a\u4e00\u4e2a\u6587\u4ef6\u76ee\u5f55\u3002\u7136\u540e\u5728\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee127.0.0.1:8000\u5373\u53ef\u67e5\u770bSimpleHTTPServer.py\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u30021\u8d5e5\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Wsgiref \u5305\u2014\u2014\u7b26\u5408 WSGI \u6807\u51c6\u7684 Web \u670d\u52a1\u5b9e\u73b0\uff08\u4e00\uff09"], "art_url": ["http://python.jobbole.com/88637/"], "art_create_time": ["2017/09/23"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aLearnPython\u00a0\u00a0\u00a0\u5f15\u5b50\u5728\u524d\u51e0\u7bc7\u6587\u7ae0\uff1aSocketServer\u2014\u2014\u7f51\u7edc\u901a\u4fe1\u670d\u52a1\u5668\u3001BaseHTTPServer\u2014\u2014\u5b9e\u73b0Web\u670d\u52a1\u5668\u3001SimpleHTTPServer\u2014\u2014\u4e00\u4e2a\u7b80\u5355\u7684HTTP\u670d\u52a1\u5668\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86Python\u6807\u51c6\u5e93\u5bf9\u4e8e\u7f51\u7edc\u901a\u4fe1\u7684\u652f\u6301\uff0c\u5e76\u4e14\u8fd8\u4ecb\u7ecd\u4e86\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e9b\u6a21\u5757\uff0c\u4f8b\u5982TCPServer\u3001UDPServer\u3001BaseHTTPServer\u7b49\u3002\u8fd9\u4e9b\u6a21\u5757\u80fd\u591f\u5b9e\u73b0\u57fa\u7840\u7684\u7f51\u8def\u901a\u4fe1\u670d\u52a1\uff0c\u4f8b\u5982TCP/UDP\u5c42\u7684\u901a\u4fe1\u3001HTTP\u5e94\u7528\u5c42\u7684\u901a\u4fe1\u3002\u4e0a\u8ff0\u6a21\u5757\u5bf9\u4e8e\u7f51\u7edc\u901a\u4fe1\u7684\u5b9e\u73b0\uff0c\u57fa\u672c\u7684\u6d41\u7a0b\u662f\uff1a\u521b\u5efa\u4e00\u4e2a\u670d\u52a1\u5668\u3002\u4f8b\u5982TCP\u670d\u52a1\u5668\u3001UDP\u670d\u52a1\u5668\u3001HTTP\u670d\u52a1\u5668\u3002\u670d\u52a1\u5668\u53ef\u4ee5\u76d1\u542c\u548c\u63a5\u6536\u8bf7\u6c42\uff1b\u521b\u5efa\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u3002\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u53ef\u4ee5\u89e3\u6790\u5230\u8fbe\u7684\u8bf7\u6c42\uff0c\u5e76\u53d1\u56de\u4e00\u4e2a\u54cd\u5e94\u3002\u4ee5\u4e0a\u6d41\u7a0b\u57fa\u672c\u4e0a\u53cd\u6620\u4e86Python\u6807\u51c6\u5e93\u4e2d\u5173\u4e8e\u7f51\u7edc\u901a\u4fe1\u7684\u57fa\u672c\u8fc7\u7a0b\u3002\u670d\u52a1\u5668\u7c7b\u548c\u8bf7\u6c42\u5904\u7406\u7c7b\u7684\u89e3\u8026\uff0c\u610f\u5473\u7740\u5f88\u591a\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528\u67d0\u4e2a\u73b0\u6709\u7684\u670d\u52a1\u5668\u7c7b\uff0c\u800c\u4e0d\u9700\u8981\u5176\u4ed6\u4efb\u4f55\u7684\u4fee\u6539\uff0c\u53ea\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u53ef\u4ee5\u5904\u7406\u8fd9\u4e9b\u5e94\u7528\u7684\u8bf7\u6c42\u5904\u7406\u7c7b\u5373\u53ef\u3002\u4f46\u968f\u7740\u8fd1\u4e9b\u5e74\u7f51\u7edc\u7f16\u7a0b\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u5bf9\u4e8e\u670d\u52a1\u5668\u7f51\u7edc\u901a\u4fe1\u63d0\u51fa\u4e86\u8f83\u5927\u7684\u6311\u6218\u3002\u4ee5Web\u7f16\u7a0b\u4e3a\u4f8b\uff0c\u6311\u6218\u4e3b\u8981\u5728\u4e8e\uff1a\u670d\u52a1\u5668\u4e0d\u518d\u4ec5\u4ec5\u63d0\u4f9b\u7b80\u5355\u7684\u3001\u9759\u6001\u7684HTML\u9875\u9762\uff0c\u66f4\u591a\u7684\u662f\u8981\u4e0e\u4e30\u5bcc\u7684Web\u5e94\u7528\u8fdb\u884c\u76f8\u4e92\u901a\u4fe1\u3002\u5982\u679c\u5c06\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u7684\u6784\u5efa\u653e\u5728\u670d\u52a1\u5668\u7aef\u5b9e\u73b0\uff0c\u90a3\u5bf9\u4e8e\u6bcf\u4e2aWeb\u5e94\u7528\u6784\u5efa\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u663e\u7136\u4e0d\u73b0\u5b9e\uff1b\u5982\u679c\u5c06\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u7684\u6784\u5efa\u653e\u5728\u5f00\u53d1Web\u5e94\u7528\u7684\u8fc7\u7a0b\u4e2d\uff0c\u90a3\u65e0\u7591\u589e\u52a0\u4e86Web\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684\u96be\u5ea6\u548c\u590d\u6742\u5ea6\uff0c\u4e5f\u662f\u4e0d\u592a\u7406\u60f3\u7684\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u5e38\u7528\u7684\u505a\u6cd5\u662f\u63d0\u4f9b\u4e00\u4e2a\u4e2d\u95f4\u5c42\uff0c\u901a\u5e38\u79f0\u4e3a\u7f51\u5173\u63a5\u53e3\u3002\u7f51\u5173\u63a5\u53e3\u5728\u670d\u52a1\u5668\u548c\u5e94\u7528\u4e2d\u95f4\u627f\u62c5\u4e00\u4e2a\u201c\u7ffb\u8bd1\u5b98\u201d\u7684\u89d2\u8272\u3002\u53ea\u8981\u5e94\u7528\u7a0b\u5e8f\u7b26\u5408\u7f51\u5173\u63a5\u53e3\u7684\u6807\u51c6\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5c31\u53ea\u8981\u505a\u597d\u670d\u52a1\u5668\u7684\u89d2\u8272\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ea\u8981\u505a\u597d\u5e94\u7528\u7a0b\u5e8f\u7684\u4f5c\u7528\uff0c\u670d\u52a1\u5668\u548c\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u901a\u4fe1\u5168\u9760\u7f51\u5173\u63a5\u53e3\u6765\u534f\u8c03\u3002\u5e38\u7528\u7684\u7f51\u5173\u63a5\u53e3\u6709CGI\u3001WSGI\uff0c\u672c\u6587\u5c31\u4ee5WSGI\u7f51\u5173\u63a5\u53e3\u6765\u5bf9\u6b64\u8fdb\u884c\u8bf4\u660e\u3002WSGI\u7f51\u5173\u63a5\u53e3WSGI(PythonWebServerGatewayInterface,PythonWeb\u670d\u52a1\u5668\u7f51\u5173\u63a5\u53e3)\u662f\u4e00\u4e2aWeb\u670d\u52a1\u5668\u548cWeb\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6807\u51c6\u5316\u63a5\u53e3\uff0c\u7528\u4e8e\u589e\u8fdb\u5e94\u7528\u7a0b\u5e8f\u5728\u4e0d\u540c\u7684Web\u670d\u52a1\u5668\u548c\u6846\u67b6\u4e4b\u95f4\u7684\u53ef\u79fb\u690d\u6027\u3002\u5173\u4e8e\u8be5\u6807\u51c6\u7684\u5b98\u65b9\u8bf4\u660e\u53ef\u4ee5\u53c2\u8003PEP333\u3002WSGI\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5728Web\u670d\u52a1\u5668\u548cWeb\u5e94\u7528\u7a0b\u5e8f\u627f\u62c5\u201c\u7ffb\u8bd1\u5b98\u201d\u7684\u89d2\u8272\u3002\u5bf9\u4e8e\u8fd9\u4e00\u89d2\u8272\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1aWeb\u670d\u52a1\u5668\u7684\u8d23\u4efb\u5728\u4e8e\u76d1\u542c\u548c\u63a5\u6536\u8bf7\u6c42\u3002\u5728\u5904\u7406\u8bf7\u6c42\u7684\u65f6\u5019\u8c03\u7528WSGI\u63d0\u4f9b\u7684\u6807\u51c6\u5316\u63a5\u53e3\uff0c\u5c06\u8bf7\u6c42\u7684\u4fe1\u606f\u8f6c\u7ed9WSGI\uff1bWSGI\u7684\u8d23\u4efb\u5728\u4e8e\u201c\u4e2d\u8f6c\u201d\u8bf7\u6c42\u548c\u54cd\u5e94\u4fe1\u606f\u3002WSGI\u63a5\u6536\u5230Web\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u8bf7\u6c42\u4fe1\u606f\u540e\u53ef\u4ee5\u505a\u4e00\u4e9b\u5904\u7406\uff0c\u4e4b\u540e\u901a\u8fc7\u6807\u51c6\u5316\u63a5\u53e3\u8c03\u7528Web\u5e94\u7528\uff0c\u5e76\u5c06\u8bf7\u6c42\u4fe1\u606f\u4f20\u9012\u7ed9Web\u5e94\u7528\u3002\u540c\u65f6\uff0cWSGI\u8fd8\u5c06\u4f1a\u5904\u7406Web\u5e94\u7528\u8fd4\u56de\u7684\u54cd\u5e94\u4fe1\u606f\uff0c\u5e76\u901a\u8fc7\u670d\u52a1\u5668\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1bWeb\u5e94\u7528\u7684\u8d23\u4efb\u5728\u4e8e\u63a5\u6536\u8bf7\u6c42\u4fe1\u606f\uff0c\u5e76\u4e14\u751f\u6210\u54cd\u5e94\u3002\u6839\u636e\u4ee5\u4e0a\u5206\u6790\uff0c\u8981\u5b9e\u73b0\u7b26\u5408WSGI\u6807\u51c6\u7684Web\u670d\u52a1\uff0c\u670d\u52a1\u5668\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u8bbe\u8ba1\u5c31\u8981\u7b26\u5408WSGI\u89c4\u8303\u3002WSGI\u89c4\u8303WSGI\u89c4\u8303\u5982\u4e0b\uff1a\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u5904\u7406\u7a0b\u5e8f\u4e2d\u8981\u8c03\u7528\u7b26\u5408WSGI\u89c4\u8303\u7684\u7f51\u5173\u63a5\u53e3\uff1b\u7f51\u5173\u63a5\u53e3\u8c03\u7528\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u4e14\u8981\u5b9a\u4e49start_response(status,headers)\u51fd\u6570\uff0c\u7528\u4e8e\u8fd4\u56de\u54cd\u5e94\uff1b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5b9e\u73b0\u4e00\u4e2a\u51fd\u6570\u6216\u8005\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61webapp(environ,start_response)\u3002\u5176\u4e2denviron\u662f\u73af\u5883\u8bbe\u7f6e\u7684\u5b57\u5178\uff0c\u7531\u670d\u52a1\u5668\u548cWSGI\u7f51\u5173\u63a5\u53e3\u8bbe\u7f6e\uff0cstart_response\u662f\u7531\u7f51\u5173\u63a5\u53e3\u5b9a\u4e49\u7684\u51fd\u6570\u3002\u5728Python\u6807\u51c6\u5e93\u4e2d\uff0cwsgiref\u5305\u5c31\u662f\u7b26\u5408WSGI\u6807\u51c6\u7684Web\u670d\u52a1\u5b9e\u73b0\u3002\u540e\u9762\u7b80\u5355\u5bf9wsgiref\u5305\u8fdb\u884c\u4ecb\u7ecd\uff0c\u4ee5\u6b64\u6765\u5bf9\u7b26\u5408WSGI\u6807\u51c6\u7684Web\u670d\u52a1\u7684\u5b9e\u73b0\u8fc7\u7a0b\u8fdb\u884c\u68b3\u7406\u3002wsgiref\u5305wsgiref\u5305\u4e3a\u5b9e\u73b0WSGI\u6807\u51c6\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53c2\u8003\uff0c\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u72ec\u7acb\u7684\u670d\u52a1\u5668\u6d4b\u8bd5\u548c\u8c03\u8bd5\u5e94\u7528\u7a0b\u5e8f\u3002\u5728\u5b9e\u9645\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u3002wsgiref\u5305\u542b\u6709\u4ee5\u4e0b\u6a21\u5757\uff1asimple_server\u6a21\u5757\u2014\u2014simple_server\u6a21\u5757\u5b9e\u73b0\u4e86\u53ef\u4ee5\u8fd0\u884c\u5355\u4e2aWSGI\u5e94\u7528\u7684\u7b80\u5355\u7684HTTP\u670d\u52a1\u5668\u3002headers\u6a21\u5757\u2014\u2014\u7ba1\u7406\u54cd\u5e94\u9996\u90e8\u7684\u6a21\u5757\u3002handlers\u6a21\u5757\u2014\u2014\u7b26\u5408WSGI\u6807\u51c6\u7684Web\u670d\u52a1\u7f51\u5173\u63a5\u53e3\u5b9e\u73b0\u3002\u8be5\u6a21\u5757\u5305\u542b\u4e86\u4e00\u4e9b\u5904\u7406\u7a0b\u5e8f\u5bf9\u8c61\uff0c\u7528\u6765\u8bbe\u7f6eWSGI\u6267\u884c\u73af\u5883\uff0c\u4ee5\u4fbf\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u5728\u5176\u4ed6\u7684Web\u670d\u52a1\u5668\u4e2d\u8fd0\u884c\u3002validate\u6a21\u5757\u2014\u2014\u201c\u9a8c\u8bc1\u5305\u88c5\u201d\u6a21\u5757\uff0c\u786e\u4fdd\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u5668\u90fd\u80fd\u591f\u6309\u7167WSGI\u6807\u51c6\u8fdb\u884c\u64cd\u4f5c\u3002util\u6a21\u5757\u2014\u2014\u4e00\u4e9b\u6709\u7528\u7684\u5de5\u5177\u96c6\u3002\u4ee5\u4e0a\u6a21\u5757\u6682\u65f6\u4e0d\u505a\u8be6\u7ec6\u7684\u4ecb\u7ecd\u3002\u672c\u6587\u5269\u4f59\u5185\u5bb9\u5c06simple_server\u6a21\u5757\u5355\u72ec\u62ff\u51fa\u6765\uff0c\u4ee5\u5176\u4e2d\u7684\u6d4b\u8bd5\u4f8b\u5b50\u7b80\u5355\u8bf4\u660e\u7b26\u5408WSGI\u6807\u51c6\u7684Web\u670d\u52a1\u5668\u7684\u5b9e\u73b0\u8fc7\u7a0b\u3002simple_server\u2014\u2014\u4e00\u4e2a\u7b80\u5355\u7684\u7b26\u5408WSGI\u89c4\u8303\u7684\u670d\u52a1\u5668wsgiref\u5305\u7684simple_server\u6a21\u5757\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b26\u5408WSGI\u89c4\u8303\u7684\u670d\u52a1\u5668\u3002\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1aPythonif__name__=='__main__':httpd=make_server('',8000,demo_app)sa=httpd.socket.getsockname()print\"ServingHTTPon\",sa[0],\"port\",sa[1],\"...\"importwebbrowserwebbrowser.open('http://localhost:8000/xyz?abc')httpd.handle_request()#serveonerequest,thenexithttpd.server_close()12345678if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0httpd=make_server('',8000,demo_app)\u00a0\u00a0\u00a0\u00a0sa=httpd.socket.getsockname()\u00a0\u00a0\u00a0\u00a0print\"ServingHTTPon\",sa[0],\"port\",sa[1],\"...\"\u00a0\u00a0\u00a0\u00a0importwebbrowser\u00a0\u00a0\u00a0\u00a0webbrowser.open('http://localhost:8000/xyz?abc')\u00a0\u00a0\u00a0\u00a0httpd.handle_request()\u00a0\u00a0#serveonerequest,thenexit\u00a0\u00a0\u00a0\u00a0httpd.server_close()1.\u521b\u5efaHTTP\u670d\u52a1\u5668\u4e0a\u8ff0\u6d4b\u8bd5\u4ee3\u7801\u4e2dhttpd=make_server(\u201d,8000,demo_app)\u521b\u5efa\u4e86\u4e00\u4e2aHTTP\u670d\u52a1\u5668\u3002\u5176\u4e2dmake_server\u51fd\u6570\u7528\u6765\u521b\u5efa\u670d\u52a1\u5668\uff1aPythondefmake_server(host,port,app,server_class=WSGIServer,handler_class=WSGIRequestHandler):\"\"\"CreateanewWSGIserverlisteningon`host`and`port`for`app`\"\"\"server=server_class((host,port),handler_class)server.set_app(app)returnserver1234567defmake_server(\u00a0\u00a0\u00a0\u00a0host,port,app,server_class=WSGIServer,handler_class=WSGIRequestHandler):\u00a0\u00a0\u00a0\u00a0\"\"\"CreateanewWSGIserverlisteningon`host`and`port`for`app`\"\"\"\u00a0\u00a0\u00a0\u00a0server=server_class((host,port),handler_class)\u00a0\u00a0\u00a0\u00a0server.set_app(app)\u00a0\u00a0\u00a0\u00a0returnservermake_server\u51fd\u6570\u4f7f\u7528WSGIServer\u7c7b\u6784\u5efa\u7b26\u5408WSGI\u89c4\u8303\u7684HTTP\u670d\u52a1\u5668\uff0c\u4f7f\u7528WSGIRequestHandler\u7c7b\u4f5c\u4e3a\u5904\u7406\u8bf7\u6c42\u7684\u7c7b\uff0c\u4f7f\u7528demo_app\u4f5c\u4e3a\u4e00\u4e2aWeb\u5e94\u7528\u3002\u8be5\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u670d\u52a1\u5668\u5b9e\u4f8b\uff0c\u5e76\u5f00\u59cb\u76d1\u542c\u8bf7\u6c42\u3002\u53ef\u4ee5\u901a\u8fc7httpd.socket.getsockname()\u83b7\u53d6\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u53f7\u30022.\u4f7f\u7528webbrowser\u6a21\u5757\u521b\u5efa\u8bf7\u6c42\u7d27\u63a5\u7740\uff0c\u6d4b\u8bd5\u4f8b\u5b50\u5bfc\u5165webbrowser\u6a21\u5757\uff0c\u4f7f\u7528\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u8bf7\u6c42\u3002Pythonwebbrowser.open('http://localhost:8000/xyz?abc')1webbrowser.open('http://localhost:8000/xyz?abc')3.\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u670d\u52a1\u5668\u901a\u8fc7handle_request()\u65b9\u6cd5\u5904\u7406\u8bf7\u6c42\u3002\u5173\u4e8e\u5904\u7406\u8bf7\u6c42\u7684\u8fc7\u7a0b\u7b80\u5355\u4ecb\u7ecd\u5982\u4e0b\uff1ahandle_request()\u65b9\u6cd5\u901a\u8fc7\u8c03\u7528get_request\u3001verify_request\u3001process_request\u3001finish_request\u7b49\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u5b9e\u4f8b\uff08\u8be5\u8fc7\u7a0b\u53ef\u4ee5\u53c2\u8003TCPServer\u3001HTTPServer\u7684\u5b9e\u73b0\u8fc7\u7a0b\uff09\uff1b\u8bf7\u6c42\u5904\u7406\u5b9e\u4f8b\u8c03\u7528handle()\u65b9\u6cd5\u5904\u7406\u8bf7\u6c42\u3002handle()\u5728WSGIRequestHandler\u7c7b\u4e2d\u8fdb\u884c\u4e86\u91cd\u5199\u3002\u4ee3\u7801\u5982\u4e0b\uff1aPythondefhandle(self):\"\"\"HandleasingleHTTPrequest\"\"\"self.raw_requestline=self.rfile.readline(65537)iflen(self.raw_requestline)>65536:self.requestline=''self.request_version=''self.command=''self.send_error(414)returnifnotself.parse_request():#Anerrorcodehasbeensent,justexitreturnhandler=ServerHandler(self.rfile,self.wfile,self.get_stderr(),self.get_environ())handler.request_handler=self#backpointerforlogginghandler.run(self.server.get_app())12345678910111213141516defhandle(self):\u00a0\u00a0\u00a0\u00a0\"\"\"HandleasingleHTTPrequest\"\"\"\u00a0\u00a0\u00a0\u00a0self.raw_requestline=self.rfile.readline(65537)\u00a0\u00a0\u00a0\u00a0iflen(self.raw_requestline)>65536:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.requestline=''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.request_version=''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.command=''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.send_error(414)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0ifnotself.parse_request():#Anerrorcodehasbeensent,justexit\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0handler=ServerHandler(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.rfile,self.wfile,self.get_stderr(),self.get_environ()\u00a0\u00a0\u00a0\u00a0)\u00a0\u00a0\u00a0\u00a0handler.request_handler=self\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#backpointerforlogging\u00a0\u00a0\u00a0\u00a0handler.run(self.server.get_app())\u4e0a\u9762handle()\u51fd\u6570\u5148\u89e3\u6790\u4e86\u8bf7\u6c42\uff0c\u4e4b\u540e\u521b\u5efa\u4e86\u4e00\u4e2aWSGI\u7f51\u5173\u7c7b\u5b9e\u4f8bhandler\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u53ef\u4ee5\u4f5c\u4e3a\u670d\u52a1\u5668\u548c\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u63a5\u53e3\u5b58\u5728\u30024.WSGI\u7f51\u5173\u7684\u8bf7\u6c42\u5904\u7406\u8fc7\u7a0bWSGI\u7f51\u5173\u7684\u5b9a\u4e49\u5728handlers\u6a21\u5757\u3002\u4e0a\u4e00\u6b65\u9aa4\u4e2d\u901a\u8fc7\u8c03\u7528WSGI\u7f51\u5173\u7c7b\u5b9e\u4f8bhandler\u7684run\u65b9\u6cd5\uff0cWSGI\u7f51\u5173\u5f00\u59cb\u5904\u7406\u8bf7\u6c42\u3002run\u65b9\u6cd5\u7684\u4ee3\u7801\u5982\u4e0b\uff1aPythondefrun(self,application):\"\"\"Invoketheapplication\"\"\"#Notetoself:don'tmovetheclose()!Asynchronousserversshouldn't#callclose()fromfinish_response(),soifyouclose()anywherebut#thedouble-errorbranchhere,you'llbreakasynchronousserversby#prematurelyclosing.Asyncserversmustreturnfrom'run()'without#closingiftheremightstillbeoutputtoiterateover.try:self.setup_environ()self.result=application(self.environ,self.start_response)self.finish_response()except:try:self.handle_error()except:#Ifwegetanerrorhandlinganerror,justgiveupalready!self.close()raise#...andlettheactualserverfigureitout.123456789101112131415161718defrun(self,application):\u00a0\u00a0\u00a0\u00a0\"\"\"Invoketheapplication\"\"\"\u00a0\u00a0\u00a0\u00a0#Notetoself:don'tmovetheclose()!\u00a0\u00a0Asynchronousserversshouldn't\u00a0\u00a0\u00a0\u00a0#callclose()fromfinish_response(),soifyouclose()anywherebut\u00a0\u00a0\u00a0\u00a0#thedouble-errorbranchhere,you'llbreakasynchronousserversby\u00a0\u00a0\u00a0\u00a0#prematurelyclosing.\u00a0\u00a0Asyncserversmustreturnfrom'run()'without\u00a0\u00a0\u00a0\u00a0#closingiftheremightstillbeoutputtoiterateover.\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.setup_environ()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.result=application(self.environ,self.start_response)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.finish_response()\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.handle_error()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Ifwegetanerrorhandlinganerror,justgiveupalready!\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.close()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raise\u00a0\u00a0#...andlettheactualserverfigureitout.run\u65b9\u6cd5\u7684\u4e3b\u8981\u529f\u80fd\u6709\uff1a\u901a\u8fc7setup_environ()\u65b9\u6cd5\u521b\u5efaWSGI\u76f8\u5173\u7684\u73af\u5883\uff1b\u8c03\u7528WSGI\u5e94\u7528\u7684\u51fd\u6570\u6216\u8005WSGI\u5e94\u7528\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u3002\u672c\u6d4b\u8bd5\u4f8b\u5b50\u4e2d\u7684WSGI\u5e94\u7528\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\uff0c\u5176\u4f5c\u7528\u662f\u5c06\u8bf7\u6c42\u7684environ\u4fe1\u606f\u6253\u5370\u51fa\u6765\u3002\u8c03\u7528finish_response()\u65b9\u6cd5\u5c06WSGI\u5e94\u7528\u8fd4\u56de\u7684\u6570\u636e\u4f5c\u4e3a\u54cd\u5e94\u53d1\u56de\u30025.\u5173\u95ed\u670d\u52a1\u5668\u8bf7\u6c42\u7ed3\u675f\u540e\uff0c\u670d\u52a1\u5668\u4f1a\u8c03\u7528\u4e00\u7cfb\u5217\u51fd\u6570\u5173\u95ed\u8bf7\u6c42\u8fde\u63a5\u3002\u4e4b\u540e\u6d4b\u8bd5\u4ee3\u7801\u8c03\u7528server_close()\u65b9\u6cd5\u5173\u95ed\u670d\u52a1\u5668\u30021\u8d5e2\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Flask \u6846\u67b6\u7b80\u4ecb"], "art_url": ["http://python.jobbole.com/88621/"], "art_create_time": ["2017/09/23"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aLearnPython\u00a0\u00a0\u00a0Flask\u662f\u5f53\u4e0b\u6d41\u884c\u7684Web\u6846\u67b6\uff0c\u5b83\u662f\u7528Python\u5b9e\u73b0\u7684\u3002Flask\u663e\u8457\u7684\u7279\u70b9\u662f\uff1a\u5b83\u662f\u4e00\u4e2a\u201c\u5fae\u201d\u6846\u67b6\u3002\u201d\u5fae\u201d\u610f\u5473\u7740Flask\u65e8\u5728\u4fdd\u6301\u6838\u5fc3\u7684\u7b80\u5355\uff0c\u4f46\u540c\u65f6\u53c8\u6613\u4e8e\u6269\u5c55\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cFlask\u4e0d\u5305\u542b\u6570\u636e\u5e93\u62bd\u8c61\u5c42\u3001\u8868\u5355\u9a8c\u8bc1\uff0c\u6216\u662f\u5176\u5b83\u4efb\u4f55\u5df2\u6709\u591a\u79cd\u5e93\u53ef\u4ee5\u80dc\u4efb\u7684\u529f\u80fd\u3002\u7136\u800c\uff0cFlask\u652f\u6301\u7528\u6269\u5c55\u6765\u7ed9\u5e94\u7528\u6dfb\u52a0\u8fd9\u4e9b\u529f\u80fd\u3002\u4f17\u591a\u7684\u6269\u5c55\u63d0\u4f9b\u4e86\u6570\u636e\u5e93\u96c6\u6210\u3001\u8868\u5355\u9a8c\u8bc1\u3001\u4e0a\u4f20\u5904\u7406\u3001\u5404\u79cd\u5404\u6837\u7684\u5f00\u653e\u8ba4\u8bc1\u6280\u672f\u7b49\u529f\u80fd\u3002Flask\u7684\u8fd9\u4e9b\u7279\u6027\uff0c\u4f7f\u5f97\u5b83\u5728Web\u5f00\u53d1\u65b9\u9762\u53d8\u5f97\u975e\u5e38\u6d41\u884c\u3002\u6587\u7ae0\u76ee\u5f55\u672c\u677f\u5757\u5c06\u5bf9Flask\u7684\u8fd0\u884c\u673a\u5236\u8fdb\u884c\u5206\u6790\u548c\u63a2\u8ba8\uff0c\u540c\u65f6\u8fd8\u5c06\u5305\u62ec\u4f7f\u7528Flask\u8fc7\u7a0b\u4e2d\u7684\u5fc3\u5f97\u4f53\u4f1a\u3001\u7591\u95ee\u7b49\u7b49\u3002\u4e00\u4e2aFlask\u5e94\u7528\u8fd0\u884c\u8fc7\u7a0b\u5256\u6790Flask\u5e94\u7528\u4e2d\u7684URL\u5904\u7406Flask\u4e2d\u6a21\u5757\u5316\u5e94\u7528\u7684\u5b9e\u73b0Flask\u4e2d\u7684\u84dd\u56fe\u7ba1\u7406Flask\u4e2d\u7684\u8bf7\u6c42\u4e0a\u4e0b\u6587\u548c\u5e94\u7528\u4e0a\u4e0b\u6587\u540e\u7eed\u5c06\u7ee7\u7eed\u66f4\u65b0\u00b7\u00b7\u00b7\u00b7\u00b7\u00b71\u8d5e2\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u9057\u4f20\u7b97\u6cd5\u4e2d\u9002\u503c\u51fd\u6570\u7684\u6807\u5b9a\u4e0e\u5927\u53d8\u5f02\u7b97\u6cd5"], "art_url": ["http://python.jobbole.com/88641/"], "art_create_time": ["2017/09/24"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-09-23-\u9057\u4f20\u7b97\u6cd5\u4e2d\u9002\u503c\u51fd\u6570\u7684\u6807\u5b9a\u4e0e\u5927\u53d8\u5f02\u7b97\u6cd5/feature.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u672c\u6587\u5c1d\u8bd5\u5bf9\u9057\u4f20\u7b97\u6cd5\u4e2d\u4e0d\u540c\u9002\u503c\u51fd\u6570\u7684\u6807\u5b9a(Scaling)\u65b9\u6cd5\u8fdb\u884c\u4e0b\u603b\u7ed3\uff0c\u5e76\u9488\u5bf9\u5e38\u7528\u7684\u7ebf\u6027\u6807\u5b9a\u548c\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u8fdb\u884c\u4e86Python\u5b9e\u73b0\uff0c\u4ee5\u88c5\u9970\u5668\u7684\u5f62\u5f0f\u6dfb\u52a0\u5230\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u4e2d\uff0c\u8fd9\u6837\u5728\u4f7f\u7528GAFT\u8fd0\u884c\u9057\u4f20\u7b97\u6cd5\u8fed\u4ee3\u7684\u65f6\u5019\u53ef\u4ee5\u66f4\u52a0Pythonic\u7684\u7ed9\u81ea\u5b9a\u4e49\u7684\u9002\u503c\u51fd\u6570\u8fdb\u884c\u6807\u5b9a\u3002\u6700\u540e\u9488\u5bf9\u80fd\u591f\u9632\u6b62\u65e9\u719f\u60c5\u51b5\u7684\u5927\u53d8\u5f02\u7b97\u6cd5\u8fdb\u884c\u4e86\u76f8\u5e94\u7684\u5b9e\u73b0\u3002\u76ee\u524d(\u52a8\u6001)\u7ebf\u6027\u6807\u5b9a\u88c5\u9970\u5668\u4ee5\u53ca\u5927\u53d8\u5f02\u7b97\u5b50\u5747\u5df2\u6dfb\u52a0\u5230GAFT\u4e2d\uff0cgaft\u9879\u76ee\u94fe\u63a5:GitHub:\u00a0https://github.com/PytLab/gaftPyPI:\u00a0https://pypi.python.org/pypi/gaft\u9002\u503c\u51fd\u6570\u7684\u6807\u5b9a\u9009\u62e9\u538b\u529bThetendencytoselectthebestmemberofthecurrentgenerationisknownasselectivepressure.\u9009\u62e9\u538b\u529b\u4e5f\u5c31\u662f\u79cd\u7fa4\u4e2d\u6700\u597d\u4e2a\u4f53\u4e0e\u6700\u574f\u4e2a\u4f53\u88ab\u9009\u4e2d\u6982\u7387\u7684\u5dee\u503c\uff0c\u8fd9\u4e2a\u5dee\u8ddd\u8d8a\u5927\uff0c\u9009\u4e2d\u597d\u4e2a\u4f53\u7684\u8d8b\u52bf\u5c31\u8d8a\u5927\uff0c\u5219\u6210\u4e3a\u9009\u62e9\u538b\u529b\u5927\u3002\u9002\u503c\u51fd\u6570\u7684\u6807\u5b9a\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u62ff\u76ee\u6807\u51fd\u6570\u4f5c\u4e3a\u9002\u503c\u51fd\u6570\u5341\u5206\u7684\u65b9\u4fbf\uff0c\u4f46\u662f\u5f88\u591a\u60c5\u51b5\u4e0b\u5374\u4e0d\u80fd\u8fd9\u4e48\u505a\uff0c\u4f8b\u5982\u5bf9\u4e8e\u6c42\u6700\u5c0f\u503c\u95ee\u9898\uff0c\u6211\u4eec\u5fc5\u987b\u5c06\u76ee\u6807\u51fd\u6570\u53d6\u53cd\u624d\u80fd\u4f5c\u4e3a\u9002\u503c\u51fd\u6570(\u8fd9\u662f\u6700\u7b80\u5355\u7684\u60c5\u51b5)\u3002\u5f53\u6211\u4eec\u9057\u4f20\u7b97\u6cd5\u4e2d\u4e0d\u540c\u4e2a\u4f53\u9002\u503c\u51fd\u6570\u7684\u503c\u76f8\u5bf9\u5dee\u522b\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u6211\u4eec\u6839\u636e\u9002\u5e94\u5ea6\u503c\u7684\u5927\u5c0f\u8fdb\u884c\u4e2a\u4f53\u9009\u62e9\u7684\u9009\u62e9\u538b\u529b(Selectivepressure)\u5c31\u4f1a\u53d8\u5c0f\uff0c\u9009\u4f18\u7684\u80fd\u529b\u5f31\u5316\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u9700\u8981\u5bf9\u539f\u59cb\u7684\u9002\u503c\u51fd\u6570\u8fdb\u884c\u6807\u5b9a(Scaling)\u662f\u7684\u4ed6\u4eec\u76f8\u5bf9\u5dee\u522b\u589e\u5927\uff0c\u8fdb\u800c\u589e\u5927\u9009\u62e9\u538b\u529b\uff0c\u589e\u5f3a\u7b97\u6cd5\u7684\u9009\u4f18\u80fd\u529b\u3002\u4f8b\u5982:\u00a0\u5c40\u90e8\u641c\u7d22\u3001\u5e7f\u57df\u641c\u7d22\u4e0e\u9009\u62e9\u538b\u529b\u7684\u5173\u7cfb\u5728\u9057\u4f20\u7b97\u6cd5\u4e2d\uff0c\u5c40\u90e8\u641c\u7d22\u540c\u5e7f\u57df\u641c\u7d22\u5176\u5b9e\u76f8\u4e92\u77db\u76fe\u7684\uff0c\u6ce8\u91cd\u5c40\u90e8\u641c\u7d22\u5219\u4f1a\u9677\u5165\u5c40\u90e8\u6700\u4f18\uff0c\u4f46\u662f\u6ce8\u91cd\u5e7f\u57df\u641c\u7d22\u4f1a\u5bfc\u81f4\u7b97\u6cd5\u7cbe\u786e\u5f00\u53d1\u80fd\u529b\u4e0d\u5f3a\u3002\u56e0\u6b64\u9700\u8981\u7efc\u5408\u4e24\u8005\u8003\u8651\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u641c\u7d22\u521a\u521a\u5f00\u59cb\u7684\u65f6\u5019\u4f7f\u7528\u8f83\u5c0f\u7684\u9009\u62e9\u538b\u529b\u6765\u5e7f\u57df\u641c\u7d22\uff0c\u968f\u7740\u8fed\u4ee3\u7684\u8fdb\u884c\u53ef\u4ee5\u52a8\u6001\u7684\u589e\u5927\u9009\u62e9\u538b\u529b\u6765\u4f7f\u7b97\u6cd5\u504f\u5411\u4e8e\u5c40\u90e8\u641c\u7d22\u3002\u51e0\u79cd\u4e0d\u540c\u7684\u9002\u503c\u51fd\u6570\u6807\u5b9a\u65b9\u6cd5\u5bf9\u76ee\u6807\u51fd\u6570\u7684\u6807\u5b9a\u65b9\u6cd5\u4e00\u822c\u6709:\u7ebf\u6027\u6807\u5b9a\u3001\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u3001\u5e42\u5f8b\u6807\u5b9a\u3001\u5bf9\u6570\u6807\u5b9a\u7b49\u7ebf\u6027\u6807\u5b9a\u7ebf\u6027\u6807\u5b9a\u7684\u5f62\u5f0f:\u5176\u4e2df\u2032\u4e3a\u6807\u5b9a\u540e\u7684\u9002\u503c\u51fd\u6570\uff0cff\u4e3a\u539f\u59cb\u7684\u76ee\u6807\u51fd\u6570\u3002\u6c42\u6700\u5927\u503c\u5bf9\u4e8e\u6c42\u76ee\u6807\u51fd\u6570\u7684\u6700\u5927\u503c\u7684\u65f6\u5019,\u5373\u00a0argmaxf(x)\u6211\u4eec\u53d6a=1,b=\u2212fmin+\u03be,\u5176\u4e2d\u03be\u662f\u4e00\u4e2a\u8f83\u5c0f\u7684\u6570\uff0c\u76ee\u7684\u662f\u4f7f\u5f97\u79cd\u7fa4\u4e2d\u6700\u5dee\u4e2a\u4f53\u4e5f\u6709\u88ab\u9009\u4e2d\u7684\u673a\u4f1a\uff0c\u4e0d\u7136\u81ea\u8eab\u51cf\u6389f\u2212fmin=0,\u00a0\u03be\u7684\u5b58\u5728\u53ef\u4ee5\u589e\u52a0\u79cd\u7fa4\u7684\u591a\u6837\u6027\u3002\u6700\u7ec8\u7684\u9002\u503c\u51fd\u6570\u8868\u8fbe\u5f0f:\u6c42\u6700\u5c0f\u503c\u5f53\u6211\u4eec\u9700\u8981\u6c42\u76ee\u6807\u51fd\u6570\u6700\u5c0f\u503c\u7684\u65f6\u5019\uff0cargminf(x)\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u53d6\u53cd\u64cd\u4f5c,\u5373a=\u22121,b=fmax\u2212f(x)+\u03be\u6700\u7ec8\u7684\u9002\u503c\u51fd\u6570\u8868\u8fbe\u5f0f:GAFT\u4e2d\u6dfb\u52a0\u5bf9\u4e8e\u76ee\u6807\u51fd\u6570\u7684\u6807\u5b9a\u7531\u4e8e\u9002\u503c\u51fd\u6570\u6807\u5b9a\u5e76\u4e0d\u9488\u5bf9\u67d0\u4e2a\u76ee\u6807\u51fd\u6570\uff0c\u6211\u4fbf\u60f3\u901a\u8fc7\u88c5\u9970\u5668\u7684\u65b9\u5f0f\u6765\u65b9\u4fbf\u7ed9\u4efb\u4f55\u81ea\u5b9a\u4e49\u7684fitness\u51fd\u6570\u8fdb\u884c\u6807\u5b9a\u3002\u5bf9\u4e8e\u57fa\u672c\u7684\u7ebf\u6027\u6807\u5b9a\uff0c\u6211\u5728GAEngine\u4e2d\u6dfb\u52a0\u4e86\u4e2a\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668:Pythondeflinear_scaling(self,target='max',ksi=0.5):'''Adecoratorconstructorforfitnessfunctionlinearscaling.:paramtarget:Theoptimizationtarget,maximizationorminimization.:typetarget:str,'max'or'min':paramksi:Selectivepressureadjustmentvalue.:typeksi:floatLinearScaling:1.argmaxf(x),thenf'=f-min{f(x)}+ksi;2.argminf(x),thenf'=max{f(x)}-f(x)+ksi;'''def_linear_scaling(fn):#Fororiginalfitnesscalculation.self.ori_fitness=fn@wraps(fn)def_fn_with_linear_scaling(indv):#Originalfitnessvalue.f=fn(indv)#Determinethevalueofaandb.iftarget=='max':f_prime=f-self.ori_fmin+ksieliftarget=='min':f_prime=self.ori_fmax-f+ksielse:raiseValueError('Invalidtargettype({})'.format(target))returnf_primereturn_fn_with_linear_scalingreturn_linear_scaling12345678910111213141516171819202122232425262728deflinear_scaling(self,target='max',ksi=0.5):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0Adecoratorconstructorforfitnessfunctionlinearscaling.\u00a0\u00a0\u00a0\u00a0:paramtarget:Theoptimizationtarget,maximizationorminimization.\u00a0\u00a0\u00a0\u00a0:typetarget:str,'max'or'min'\u00a0\u00a0\u00a0\u00a0:paramksi:Selectivepressureadjustmentvalue.\u00a0\u00a0\u00a0\u00a0:typeksi:float\u00a0\u00a0\u00a0\u00a0LinearScaling:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.argmaxf(x),thenf'=f-min{f(x)}+ksi;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02.argminf(x),thenf'=max{f(x)}-f(x)+ksi;\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0def_linear_scaling(fn):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Fororiginalfitnesscalculation.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.ori_fitness=fn\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0@wraps(fn)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def_fn_with_linear_scaling(indv):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Originalfitnessvalue.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f=fn(indv)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Determinethevalueofaandb.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iftarget=='max':\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f_prime=f-self.ori_fmin+ksi\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0eliftarget=='min':\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f_prime=self.ori_fmax-f+ksi\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseValueError('Invalidtargettype({})'.format(target))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnf_prime\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return_fn_with_linear_scaling\u00a0\u00a0\u00a0\u00a0return_linear_scaling\u8fd9\u4e2a\u65f6\u5019\u5982\u679c\u6211\u4eec\u5728\u5b9a\u4e49\u4e86\u4e00\u4e2a\u81ea\u5df1\u7684\u76ee\u6807\u51fd\u6570\u4ee5\u540e\uff0c\u60f3\u5bf9\u5176\u8fdb\u884c\u7ebf\u6027\u6807\u5b9a\u4fbf\u53ef\u4ee5\u4f7f\u7528engine\u7684\u8fd9\u4e2a\u88c5\u9970\u5668\u5bf9\u51fd\u6570\u8fdb\u884c\u4fee\u9970\u5373\u53ef,\u50cf\u4e0b\u9762\u8fd9\u6837:Python#CreateaGAengine...#\u5148\u6807\u5b9a\uff0c\u540e\u6ce8\u518c\u5230\u5f15\u64ce\u4e2d@engine.fitness_register@engine.linear_scaling(target='min',ksi=0.5)deffitness(indv):x,=indv.variantsreturnx+10*sin(5*x)+7*cos(4*x)1234567#CreateaGAengine...#\u5148\u6807\u5b9a\uff0c\u540e\u6ce8\u518c\u5230\u5f15\u64ce\u4e2d@engine.fitness_register@engine.linear_scaling(target='min',ksi=0.5)deffitness(indv):\u00a0\u00a0\u00a0\u00a0x,=indv.variants\u00a0\u00a0\u00a0\u00a0returnx+10*sin(5*x)+7*cos(4*x)\u5176\u4e2d\u88c5\u9970\u5668\u4e2d\u7684\u53c2\u6570\u5206\u522b\u4e3a:target:\u4f18\u5316\u76ee\u6807\u51fd\u6570\u5230\u6700\u5c0f\u503c\u8fd8\u662f\u6700\u5927\u503c\uff0c\u503c\u53ef\u4ee5\u662f:'max'\u6216\u8005'min'ksi:\u5373\u516c\u5f0f\u4e2d\u03be\u03be\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u662f\u9057\u4f20\u7b97\u6cd5\u4e2d\u6700\u5e38\u7528\u7684\u6807\u5b9a\u65b9\u6cd5\uff0c\u4ed6\u662f\u57fa\u4e8e\u4e0a\u9762\u63d0\u5230\u7684\u7ebf\u6027\u6807\u5b9a\uff0c\u5728\u7ebf\u6027\u6807\u5b9a\u4e2d\u7684\u03be\u03be\u5728\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u4e2d\u5e76\u4e0d\u662f\u4e00\u6210\u4e0d\u53d8\u7684\uff0c\u800c\u662f\u968f\u7740\u8fed\u4ee3\u6b21\u6570\u7684\u589e\u52a0\u800c\u53d8\u5316\u3002\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u7684\u51fd\u6570\u8868\u8fbe\u5f0f:\u5176\u4e2d\uff0ck\u4e3a\u8fed\u4ee3\u6307\u6807\uff0c\u8868\u793a\u03be\u4f1a\u968f\u7740\u8fed\u4ee3\u6570\u800c\u4e0d\u540c\u3002\u6c42\u6700\u5927\u503c\u5f53\u6211\u4eec\u7684\u4f18\u5316\u76ee\u6807\u662f\u76ee\u6807\u51fd\u6570\u7684\u6700\u5927\u503c\uff0c\u8fd9\u662f\u6211\u4eec\u53d6ak=1,bk=\u2212fmin+\u03bek,\u8fd9\u662f\u7684\u51fd\u6570\u8868\u8fbe\u4e3a:\u6c42\u6700\u5c0f\u503c\u6c42\u6700\u5c0f\u503c\u7684\u65f6\u5019\u9700\u8981\u53d6\u53cd\u64cd\u4f5c\uff0c\u8fd9\u65f6\u53d6ak=\u22121,bk=fmax+\u03bek,\u6700\u7ec8\u51fd\u6570\u8868\u8fbe\u5f0f:\u5173\u4e8e\u03bek\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u4e2d\u7684\u03bek\u4f5c\u7528\u540c\u7ebf\u6027\u6807\u5b9a\u4e2d\u7684\u03be\u4e3a\u9009\u62e9\u538b\u529b\u8c03\u8282\u503c,\u5b83\u7684\u5b58\u5728\u4f7f\u5f97\u79cd\u7fa4\u4e2d\u6700\u574f\u7684\u4e2a\u4f53\u4ecd\u6709\u88ab\u9009\u4e2d\u7684\u673a\u4f1a\uff0c\u4f46\u662f\u52a8\u6001\u6807\u5b9a\u4e2d\u7684\u03bek\u03bek\u7684\u503c\u4f1a\u968f\u7740kk\u589e\u5927\u800c\u51cf\u5c0f\u3002\u03bek\u03bek\u7684\u53d6\u503c:\u00a0\u03be0=M,\u03bek=\u03bek\u22121\u22c5r,r\u2208[0.9,0.999],\u6211\u4eec\u901a\u8fc7\u8c03\u8282M\u548cr\u6765\u8c03\u8282\u03bek\u901a\u8fc7\u53ef\u4ee5\u52a8\u6001\u53d8\u5316\u7684\u03bek\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u5e7f\u57df\u641c\u7d22\u8303\u56f4\u5bbd\u4fdd\u6301\u79cd\u7fa4\u7684\u591a\u6837\u6027\uff0c\u5c40\u90e8\u641c\u7d22\u4fdd\u6301\u6536\u655b\u6027\uff0c\u5373\uff0c\u5f00\u59cb\u65f6\u5e0c\u671b\u9009\u62e9\u5c0f\uff0c\u8fed\u4ee3\u5230\u540e\u9762\u5e0c\u671b\u9009\u62e9\u538b\u529b\u9010\u6e10\u53d8\u5927.GAFT\u4e2d\u6dfb\u52a0\u7ed9\u76ee\u6807\u51fd\u6570\u6dfb\u52a0\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u4e0e\u4e0a\u9762\u7ebf\u6027\u6807\u5b9a\u7684\u65b9\u6cd5\u76f8\u540c\uff0cGAFT\u4e2d\u540c\u6837\u4f7f\u7528\u4e86\u6807\u5b9a\u88c5\u9970\u5668\u6765\u88c5\u9970\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5b9e\u73b0\u4ee3\u7801:Pythondefdynamic_linear_scaling(self,target='max',ksi0=2,r=0.9):'''Adecoratorconstructorforfitnessdynamiclinearscaling.:paramtarget:Theoptimizationtarget,maximizationorminimization.:typetarget:str,'max'or'min':paramksi0:Initialselectivepressureadjustmentvalue,defaultvalueis2:typeksi0:float:paramr:Thereductionfactorforselectivepressureadjustmentvalue,ksi^(k-1)*ristheadjustmentvalueforgenerationk,defaultvalueis0.9:typer:floatinrange[0.9,0.999]DynamicLinearScaling:Formaximizaiton,f'=f(x)-min{f(x)}+ksi^k,kisgenerationnumber.'''def_dynamic_linear_scaling(fn):#Fororiginalfitnesscalculation.self.ori_fitness=fn@wraps(fn)def_fn_with_dynamic_linear_scaling(indv):f=fn(indv)k=self.current_generation+1iftarget=='max':f_prime=f-self.ori_fmin+ksi0*(r**k)eliftarget=='min':f_prime=self.ori_fmax-f+ksi0*(r**k)else:raiseValueError('Invalidtargettype({})'.format(target))returnf_primereturn_fn_with_dynamic_linear_scalingreturn_dynamic_linear_scaling12345678910111213141516171819202122232425262728293031defdynamic_linear_scaling(self,target='max',ksi0=2,r=0.9):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0Adecoratorconstructorforfitnessdynamiclinearscaling.\u00a0\u00a0\u00a0\u00a0:paramtarget:Theoptimizationtarget,maximizationorminimization.\u00a0\u00a0\u00a0\u00a0:typetarget:str,'max'or'min'\u00a0\u00a0\u00a0\u00a0:paramksi0:Initialselectivepressureadjustmentvalue,defaultvalue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0is2\u00a0\u00a0\u00a0\u00a0:typeksi0:float\u00a0\u00a0\u00a0\u00a0:paramr:Thereductionfactorforselectivepressureadjustmentvalue,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ksi^(k-1)*ristheadjustmentvalueforgenerationk,default\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0valueis0.9\u00a0\u00a0\u00a0\u00a0:typer:floatinrange[0.9,0.999]\u00a0\u00a0\u00a0\u00a0DynamicLinearScaling:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Formaximizaiton,f'=f(x)-min{f(x)}+ksi^k,kisgenerationnumber.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0def_dynamic_linear_scaling(fn):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Fororiginalfitnesscalculation.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.ori_fitness=fn\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0@wraps(fn)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def_fn_with_dynamic_linear_scaling(indv):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f=fn(indv)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0k=self.current_generation+1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iftarget=='max':\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f_prime=f-self.ori_fmin+ksi0*(r**k)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0eliftarget=='min':\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f_prime=self.ori_fmax-f+ksi0*(r**k)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseValueError('Invalidtargettype({})'.format(target))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnf_prime\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return_fn_with_dynamic_linear_scaling\u00a0\u00a0\u00a0\u00a0return_dynamic_linear_scaling\u8fd9\u91cc\u5145\u5206\u7684\u5229\u7528Python\u7684\u95ed\u5305\uff0c\u5728engine\u4e2d\u83b7\u53d6\u5f53\u524d\u79cd\u7fa4\u6700\u5927\u503c\u4e0e\u6700\u5c0f\u503c\u7684\u76f8\u5173\u6570\u636e\u3002\u5728\u811a\u672c\u4e2d\u4fee\u9970\u76ee\u6807\u51fd\u6570\u4fbf\u53ef\u4ee5\u8fd9\u6837:Python@engine.fitness_register@engine.dynamic_linear_scaling(target='max',ksi0=2,r=0.9)deffitness(indv):x,=indv.variantsreturnx+10*sin(5*x)+7*cos(4*x)12345@engine.fitness_register@engine.dynamic_linear_scaling(target='max',ksi0=2,r=0.9)deffitness(indv):\u00a0\u00a0\u00a0\u00a0x,=indv.variants\u00a0\u00a0\u00a0\u00a0returnx+10*sin(5*x)+7*cos(4*x)\u5176\u4ed6\u6807\u5b9a\u65b9\u6cd5\u8fd9\u91cc\u7b80\u8981\u7684\u4ecb\u7ecd\u4e0b\u5176\u4ed6\u6807\u5b9a\u65b9\u6cd5\u3002\u5e42\u5f8b\u6807\u5b9a\u51fd\u6570\u8868\u8fbe\u5f0f:\u00a0f\u2032=f\u03b1\u03b1\u7684\u53d6\u503c,\u00a0\u03b1>1\u589e\u5927\u9009\u62e9\u538b\u529b,\u00a0\u03b1<1\u51cf\u5c0f\u9009\u62e9\u538b\u529b\u5bf9\u6570\u6807\u5b9a\u51fd\u6570\u8868\u8fbe\u5f0f:\u00a0f\u2032=aLnf+b\u4f5c\u7528:\u7f29\u5c0f\u76ee\u6807\u51fd\u6570\u4e4b\u95f4\u7684\u5dee\u522b\u6307\u6570\u6807\u5b9a\u51fd\u6570\u8868\u8fbe\u5f0f:\u00a0f\u2032=aebf+c\u4f5c\u7528:\u6269\u5927\u76ee\u6807\u51fd\u6570\u95f4\u7684\u5dee\u522b\u7a97\u53e3\u6280\u672f\u51fd\u6570\u8868\u8fbe\u5f0f:\u00a0f\u2032=af\u2212fwfw\u4e3a\u524dW\u4ee3\u4e2d\u7684\u76ee\u6807\u51fd\u6570\u6700\u5c0f\u503c\uff0c\u4ed6\u8003\u8651\u4e86\u5404\u4ee3fmin\u7684\u6ce2\u52a8\uff0c\u8fd9\u6837fw\u5177\u6709\u8bb0\u5fc6\u6027\u5927\u53d8\u5f02\u7b97\u6cd5\u4f17\u6240\u5468\u77e5\uff0c\u7b80\u5355\u7684\u9057\u4f20\u7b97\u6cd5\u5b58\u5728\u201c\u65e9\u719f\u201d\u7684\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u7b97\u6cd5\u8fc7\u65e9\u7684\u6536\u655b\u5230\u4e00\u4e2a\u975e\u5168\u5c40\u6700\u4f18\u70b9\uff0c\u51fa\u73b0\u6b64\u95ee\u9898\u7684\u4e3b\u8981\u539f\u56e0\u662f\u4e00\u79cd\u88ab\u79f0\u4e3a\u201c\u9876\u7aef\u4f18\u52bf\u201d\u7684\u73b0\u8c61\u5b58\u5728\uff0c\u5373\u5f53\u7b97\u6cd5\u8fdb\u884c\u5230\u67d0\u4e00\u4ee3\u65f6\uff0c\u5728\u79cd\u7fa4\u4e2d\u67d0\u4e2a\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\u8fdc\u8fdc\u5927\u4e8e\u4efb\u4f55\u4e00\u4e2a\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\uff0c\u5bfc\u81f4\u9009\u62e9\u7b97\u6cd5\u603b\u662f\u4f1a\u9009\u5230\u6b64\u4e2a\u4f53\u751f\u6210\u5b50\u4ee3\u4e2a\u4f53\uff0c\u6781\u9650\u60c5\u51b5\u4e0b\u5c31\u662f\u6240\u6709\u4e2a\u4f53\u90fd\u6765\u81ea\u7edf\u4e00\u7956\u5148\uff0c\u5373\u201d\u65e9\u719f\u201d\u3002\u9664\u4e86\u5bf9\u76ee\u6807\u51fd\u6570\u8fdb\u884c\u6807\u5b9a\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5927\u53d8\u5f02\u7b97\u6cd5\u6765\u907f\u514d\u65e9\u719f\u3002\u5927\u81f4\u601d\u8def:\u5f53\u67d0\u4ee3\u4e2d\u6240\u6709\u4e2a\u4f53\u96c6\u4e2d\u5728\u4e00\u8d77\u65f6\uff0c\u6211\u4eec\u4ee5\u4e00\u4e2a\u8fdc\u5927\u4e8e\u901a\u5e38\u53d8\u5f02\u6982\u7387\u7684\u6982\u7387\u6267\u884c\u4e00\u6b21\u53d8\u5f02\u64cd\u4f5c\uff0c\u5177\u6709\u5927\u53d8\u5f02\u6982\u7387\u7684\u53d8\u5f02\u64cd\u4f5c\u80fd\u591f\u968f\u673a\u3001\u72ec\u7acb\u7684\u4ea7\u751f\u8bb8\u591a\u65b0\u7684\u4e2a\u4f53\uff0c\u4ece\u800c\u662f\u6574\u4e2a\u79cd\u7fa4\u8131\u4e86\u201c\u65e9\u719f\u201d\u3002\u5982\u4f55\u5224\u65ad\u79cd\u7fa4\u4e2a\u4f53\u7684\u96c6\u4e2d\u7a0b\u5ea6\u901a\u5e38\u91c7\u53d6\u6bd4\u8f83\u79cd\u7fa4\u4e2d\u6240\u6709\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\u503c\u7684\u5e73\u5747\u503cfavg\u4e0e\u6700\u5927\u503cfmax\u7684\u63a5\u8fd1\u7a0b\u5ea6\u6765\u5224\u65ad\uff0c\u5982\u679c\u6700\u5927\u503c\u4e0e\u5e73\u5747\u503c\u8d8a\u63a5\u8fd1\u8bf4\u660e\u4e2a\u4f53\u5c31\u8d8a\u96c6\u4e2d\u3002\u5177\u4f53\u8fc7\u7a0b\u5f53\u67d0\u4e00\u4ee3\u7684\u6700\u5927\u9002\u5e94\u5ea6fmax\u4e0e\u5e73\u5747\u9002\u5e94\u5ea6\u503cfavg\u6ee1\u8db3:\u5176\u4e2d\uff0c0.5<\u03b1<1,\u88ab\u79f0\u4e3a\u5bc6\u96c6\u56e0\u5b50\uff0c\u8868\u5f81\u4e2a\u4f53\u96c6\u4e2d\u7a0b\u5ea6\u3002\u968f\u540e\uff0c\u6211\u4eec\u4ee5\u4e00\u4e2a\u5927\u53d8\u5f02\u6982\u7387\u8fdb\u884c\u4e00\u6b21\u53d8\u5f02\u64cd\u4f5c(\u901a\u5e38\u59275\u500d\u4ee5\u4e0a),\u5373\u201c\u6253\u6563\u201d\u3002\u5927\u53d8\u5f02\u64cd\u4f5c\u7684\u4e24\u4e2a\u53c2\u6570\u5bc6\u96c6\u56e0\u5b50\u03b1:\u51b3\u5b9a\u5927\u53d8\u5f02\u64cd\u4f5c\u5728\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u6240\u5360\u7684\u6bd4\u91cd\uff0c\u5176\u6570\u503c\u7ea6\u63a5\u8fd10.5\uff0c\u5927\u53d8\u5f02\u64cd\u4f5c\u8d8a\u9891\u7e41\u5927\u53d8\u5f02\u6982\u7387:\u6982\u7387\u8d8a\u5927\uff0c\u5927\u53d8\u5f02\u7b97\u6cd5\u7684\u7a33\u5b9a\u6027\u5c31\u8d8a\u597d\uff0c\u4f46\u662f\u6536\u655b\u901f\u5ea6\u53ef\u80fd\u4f1a\u964d\u4f4e\uff0c\u5f53\u5927\u53d8\u5f02\u6982\u7387\u7684\u6570\u503c\u4e3a0.5\u7684\u65f6\u5019\uff0c\u5927\u53d8\u5f02\u64cd\u4f5c\u5c31\u8fd1\u4f3c\u9000\u5316\u4e3a\u968f\u673a\u641c\u7d22GAFT\u4e2d\u7684\u5927\u53d8\u5f02\u7b97\u5b50\u5927\u53d8\u5f02\u64cd\u4f5c\u4e0e\u5177\u4f53\u7684\u53d8\u5f02\u7b97\u5b50\u5b9e\u73b0\u65e0\u5173\uff0c\u8fd9\u91cc\u6211\u8fd8\u662f\u4f9d\u636e\u5185\u7f6e\u7684FlipBitMutation\u7b97\u5b50\u4e3a\u57fa\u7840,\u5177\u4f53\u7684\u4ee3\u7801\u5b9e\u73b0\u53c2\u89c1https://github.com/PytLab/gaft/blob/master/gaft/operators/mutation/flip_bit_mutation.pyPythonclassFlipBitBigMutation(FlipBitMutation):def__init__(self,pm,pbm,alpha):'''MutationoperatorusingFlipBitmutationimplementationwithadaptivebigmutationratetoovercomeprematureorlocal-bestsolution.:parampm:Theprobabilityofmutation(usuallybetween0.001~0.1):typepm:floatin(0.0,1.0]:parampbm:Theprobabilityofbigmutation,usuallymorethan5timesbiggerthanpm.:typepbm:float:paramalpha:intensivefactor:typealpha:float,inrange(0.5,1)'''super(self.__class__,self).__init__(pm)ifnot(0.0<pbm<1.0):raiseValueError('Invalidbigmutationprobability')ifpbm<5*pm:self.logger.warning('Relativelowprobabilityforbigmutation')self.pbm=pbm#Intensivefactor.ifnot(0.5<alpha<1.0):raiseValueError('Invalidintensivefactor,shouldbein(0.5,1.0)')self.alpha=alphadefmutate(self,individual,engine):'''Mutatetheindividualwithadaptivebigmutationrate.'''pm=self.pmifengine.fmax*self.alpha<engine.fmean:self.pm=self.pbmself.logger.info('Bigmutationprobabilty:{}->{}'.format(pm,self.pm))#Mutatewithbigprobability.individual=super(self.__class__,self).mutate(individual,engine)#Recoverprobability.self.pm=pmreturnindividual123456789101112131415161718192021222324252627282930313233343536classFlipBitBigMutation(FlipBitMutation):\u00a0\u00a0\u00a0\u00a0def__init__(self,pm,pbm,alpha):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0MutationoperatorusingFlipBitmutationimplementationwithadaptive\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0bigmutationratetoovercomeprematureorlocal-bestsolution.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:parampm:Theprobabilityofmutation(usuallybetween0.001~0.1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:typepm:floatin(0.0,1.0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:parampbm:Theprobabilityofbigmutation,usuallymorethan5times\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0biggerthanpm.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:typepbm:float\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:paramalpha:intensivefactor\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:typealpha:float,inrange(0.5,1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(self.__class__,self).__init__(pm)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnot(0.0<pbm<1.0):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseValueError('Invalidbigmutationprobability')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifpbm<5*pm:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.logger.warning('Relativelowprobabilityforbigmutation')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.pbm=pbm\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Intensivefactor.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnot(0.5<alpha<1.0):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseValueError('Invalidintensivefactor,shouldbein(0.5,1.0)')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.alpha=alpha\u00a0\u00a0\u00a0\u00a0defmutate(self,individual,engine):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Mutatetheindividualwithadaptivebigmutationrate.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pm=self.pm\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifengine.fmax*self.alpha<engine.fmean:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.pm=self.pbm\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.logger.info('Bigmutationprobabilty:{}->{}'.format(pm,self.pm))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Mutatewithbigprobability.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0individual=super(self.__class__,self).mutate(individual,engine)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Recoverprobability.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.pm=pm\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnindividual\u603b\u7ed3\u672c\u6587\u5c1d\u8bd5\u5bf9\u9057\u4f20\u7b97\u6cd5\u4e2d\u4e0d\u540c\u9002\u503c\u51fd\u6570\u7684\u6807\u5b9a(Scaling)\u65b9\u6cd5\u8fdb\u884c\u4e0b\u603b\u7ed3\uff0c\u5e76\u9488\u5bf9\u5e38\u7528\u7684\u7ebf\u6027\u6807\u5b9a\u548c\u52a8\u6001\u7ebf\u6027\u6807\u5b9a\u8fdb\u884c\u4e86Python\u5b9e\u73b0\uff0c\u4ee5\u88c5\u9970\u5668\u7684\u5f62\u5f0f\u6dfb\u52a0\u5230\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u4e2d\uff0c\u8fd9\u6837\u5728\u4f7f\u7528GAFT\u8fd0\u884c\u9057\u4f20\u7b97\u6cd5\u8fed\u4ee3\u7684\u65f6\u5019\u53ef\u4ee5\u66f4\u52a0Pythonic\u7684\u7ed9\u81ea\u5b9a\u4e49\u7684\u9002\u503c\u51fd\u6570\u8fdb\u884c\u6807\u5b9a\u3002\u6700\u540e\u9488\u5bf9\u80fd\u591f\u9632\u6b62\u65e9\u719f\u60c5\u51b5\u7684\u5927\u53d8\u5f02\u7b97\u6cd5\u8fdb\u884c\u4e86\u76f8\u5e94\u7684\u5b9e\u73b0\u3002\u53c2\u8003\u300aMATLAB\u6700\u4f18\u5316\u8ba1\u7b97(\u7b2c\u4e09\u7248)\u300b\u9a6c\u94a7\u6c34,\u5218\u8d35\u5fe0,\u8d3e\u7389\u5170.\u6539\u8fdb\u9057\u4f20\u7b97\u6cd5\u641c\u7d22\u6027\u80fd\u7684\u5927\u53d8\u5f02\u64cd\u4f5c[J].\u63a7\u5236\u7406\u8bba\u4e0e\u5e94\u7528,1998(3):404-408.\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff012\u8d5e2\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["Python Web\u5f00\u53d1\u6700\u96be\u61c2\u7684WSGI\u534f\u8bae\uff0c\u5230\u5e95\u5305\u542b\u54ea\u4e9b\u5185\u5bb9\uff1f"], "art_url": ["http://python.jobbole.com/88653/"], "art_create_time": ["2017/09/30"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/09/c817a776a88a62b252eaaef8c27f8271.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aPythonScientists\u00a0\u00a0\u00a0\u6211\u60f3\u5927\u90e8\u5206Python\u5f00\u53d1\u8005\u6700\u5148\u63a5\u89e6\u5230\u7684\u65b9\u5411\u662fWEB\u65b9\u5411\uff08\u56e0\u4e3a\u603b\u662f\u6709\u5f00\u53d1\u8005\u5e0c\u671b\u9a6c\u4e0a\u7ed9\u81ea\u5df1\u505a\u4e2a\u535a\u5ba2\u51fa\u6765\uff0c\u4f8b\u5982\u6211\uff09\uff0c\u65e2\u7136\u662fWEB\uff0c\u514d\u4e0d\u4e86\u63a5\u89e6\u5230\u4e00\u4e9bWEB\u6846\u67b6\uff0c\u4f8b\u5982Django,Flask,Torando\u7b49\u7b49\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u770b\u8fc7\u4e00\u4e9b\u6587\u6863\u603b\u4f1a\u4ecb\u7ecd\u751f\u4ea7\u73af\u5883\u548c\u5f00\u53d1\u73af\u5883\u670d\u52a1\u5668\u7684\u914d\u7f6e\u95ee\u9898\uff0c\u670d\u52a1\u5668\u53c8\u8bbe\u8ba1web\u670d\u52a1\u5668\u548c\u5e94\u7528\u670d\u52a1\u5668\uff0c\u603b\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u78b0\u5230\u6700\u591a\u7684\uff0c\u5fc5\u5b9a\u662f\u8fd9\u4e2a\u8bcd\u2014WSGI\u3002\u63a5\u4e0b\u6765\u7684\u6587\u7ae0\uff0c\u4f1a\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a1.WSGI\u4ecb\u7ecd1.1\u4ec0\u4e48\u662fWSGI1.2\u600e\u4e48\u5b9e\u73b0WSGI2.\u7531Django\u6846\u67b6\u5206\u6790WSGI3.\u5b9e\u9645\u73af\u5883\u4f7f\u7528\u7684wsgi\u670d\u52a1\u56684.WSGI\u670d\u52a1\u5668\u6bd4\u8f83\u5f00\u59cb1WSGI\u4ecb\u7ecd1.1\u4ec0\u4e48\u662fWSGI\u9996\u5148\u4ecb\u7ecd\u51e0\u4e2a\u5173\u4e8eWSGI\u76f8\u5173\u7684\u6982\u5ff5WSGI\uff1a\u5168\u79f0\u662fWebServerGatewayInterface\uff0cWSGI\u4e0d\u662f\u670d\u52a1\u5668\uff0cpython\u6a21\u5757\uff0c\u6846\u67b6\uff0cAPI\u6216\u8005\u4efb\u4f55\u8f6f\u4ef6\uff0c\u53ea\u662f\u4e00\u79cd\u89c4\u8303\uff0c\u63cf\u8ff0webserver\u5982\u4f55\u4e0ewebapplication\u901a\u4fe1\u7684\u89c4\u8303\u3002server\u548capplication\u7684\u89c4\u8303\u5728PEP3333\u4e2d\u6709\u5177\u4f53\u63cf\u8ff0\u3002\u8981\u5b9e\u73b0WSGI\u534f\u8bae\uff0c\u5fc5\u987b\u540c\u65f6\u5b9e\u73b0webserver\u548cwebapplication\uff0c\u5f53\u524d\u8fd0\u884c\u5728WSGI\u534f\u8bae\u4e4b\u4e0a\u7684web\u6846\u67b6\u6709Torando,Flask,Djangouwsgi\uff1a\u4e0eWSGI\u4e00\u6837\u662f\u4e00\u79cd\u901a\u4fe1\u534f\u8bae\uff0c\u662fuWSGI\u670d\u52a1\u5668\u7684\u72ec\u5360\u534f\u8bae\uff0c\u7528\u4e8e\u5b9a\u4e49\u4f20\u8f93\u4fe1\u606f\u7684\u7c7b\u578b(typeofinformation)\uff0c\u6bcf\u4e00\u4e2auwsgipacket\u524d4byte\u4e3a\u4f20\u8f93\u4fe1\u606f\u7c7b\u578b\u7684\u63cf\u8ff0\uff0c\u4e0eWSGI\u534f\u8bae\u662f\u4e24\u79cd\u4e1c\u897f\uff0c\u636e\u8bf4\u8be5\u534f\u8bae\u662ffcgi\u534f\u8bae\u768410\u500d\u5feb\u3002uWSGI\uff1a\u662f\u4e00\u4e2aweb\u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u4e86WSGI\u534f\u8bae\u3001uwsgi\u534f\u8bae\u3001http\u534f\u8bae\u7b49\u3002WSGI\u534f\u8bae\u4e3b\u8981\u5305\u62ecserver\u548capplication\u4e24\u90e8\u5206\uff1aPythonWSGIserver\u8d1f\u8d23\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u8bf7\u6c42\uff0c\u5c06request\u8f6c\u53d1\u7ed9application\uff0c\u5c06application\u8fd4\u56de\u7684response\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1bWSGIapplication\u63a5\u6536\u7531server\u8f6c\u53d1\u7684request\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u8fd4\u56de\u7ed9server\u3002application\u4e2d\u53ef\u4ee5\u5305\u62ec\u591a\u4e2a\u6808\u5f0f\u7684\u4e2d\u95f4\u4ef6(middlewares)\uff0c\u8fd9\u4e9b\u4e2d\u95f4\u4ef6\u9700\u8981\u540c\u65f6\u5b9e\u73b0server\u4e0eapplication\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728WSGI\u670d\u52a1\u5668\u4e0eWSGI\u5e94\u7528\u4e4b\u95f4\u8d77\u8c03\u8282\u4f5c\u7528\uff1a\u5bf9\u670d\u52a1\u5668\u6765\u8bf4\uff0c\u4e2d\u95f4\u4ef6\u626e\u6f14\u5e94\u7528\u7a0b\u5e8f\uff0c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\uff0c\u4e2d\u95f4\u4ef6\u626e\u6f14\u670d\u52a1\u5668\u300212WSGIserver\u8d1f\u8d23\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u8bf7\u6c42\uff0c\u5c06request\u8f6c\u53d1\u7ed9application\uff0c\u5c06application\u8fd4\u56de\u7684response\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1bWSGIapplication\u63a5\u6536\u7531server\u8f6c\u53d1\u7684request\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u5c06\u5904\u7406\u7ed3\u679c\u8fd4\u56de\u7ed9server\u3002application\u4e2d\u53ef\u4ee5\u5305\u62ec\u591a\u4e2a\u6808\u5f0f\u7684\u4e2d\u95f4\u4ef6(middlewares)\uff0c\u8fd9\u4e9b\u4e2d\u95f4\u4ef6\u9700\u8981\u540c\u65f6\u5b9e\u73b0server\u4e0eapplication\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728WSGI\u670d\u52a1\u5668\u4e0eWSGI\u5e94\u7528\u4e4b\u95f4\u8d77\u8c03\u8282\u4f5c\u7528\uff1a\u5bf9\u670d\u52a1\u5668\u6765\u8bf4\uff0c\u4e2d\u95f4\u4ef6\u626e\u6f14\u5e94\u7528\u7a0b\u5e8f\uff0c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\uff0c\u4e2d\u95f4\u4ef6\u626e\u6f14\u670d\u52a1\u5668\u3002WSGI\u534f\u8bae\u5176\u5b9e\u662f\u5b9a\u4e49\u4e86\u4e00\u79cdserver\u4e0eapplication\u89e3\u8026\u7684\u89c4\u8303\uff0c\u5373\u53ef\u4ee5\u6709\u591a\u4e2a\u5b9e\u73b0WSGIserver\u7684\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u6709\u591a\u4e2a\u5b9e\u73b0WSGIapplication\u7684\u6846\u67b6\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u7684server\u548capplication\u7ec4\u5408\u5b9e\u73b0\u81ea\u5df1\u7684web\u5e94\u7528\u3002\u4f8b\u5982uWSGI\u548cGunicorn\u90fd\u662f\u5b9e\u73b0\u4e86WSGIserver\u534f\u8bae\u7684\u670d\u52a1\u5668\uff0cDjango\uff0cFlask\u662f\u5b9e\u73b0\u4e86WSGIapplication\u534f\u8bae\u7684web\u6846\u67b6\uff0c\u53ef\u4ee5\u6839\u636e\u9879\u76ee\u5b9e\u9645\u60c5\u51b5\u642d\u914d\u4f7f\u7528\u3002\u4ee5\u4e0a\u4ecb\u7ecd\u4e86\u76f8\u5173\u7684\u5e38\u8bc6\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u7b80\u5355\u5b9e\u73b0WSGI\u534f\u8bae\u30021.2\u600e\u4e48\u5b9e\u73b0WSGI\u4e0a\u6587\u8bf4\u8fc7\uff0c\u5b9e\u73b0WSGI\u534f\u8bae\u5fc5\u987b\u8981\u6709wsgiserver\u548capplication\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u5c31\u6765\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u4e1c\u897f\u3002\u6211\u4eec\u6765\u770b\u770b\u5b98\u65b9WSGI\u4f7f\u7528WSGI\u7684wsgiref\u6a21\u5757\u5b9e\u73b0\u7684\u5c0fdemo\u6709\u5173\u4e8ewsgiref\u7684\u5feb\u901f\u5165\u95e8\u53ef\u4ee5\u770b\u770b\u8fd9\u7bc7\u535a\u5ba2Pythondefdemo_app(environ,start_response):fromStringIOimportStringIOstdout=StringIO()print>>stdout,\"Helloworld!\"print>>stdouth=environ.items();h.sort()fork,vinh:print>>stdout,k,'=',repr(v)start_response(\"200OK\",[('Content-Type','text/plain')])return[stdout.getvalue()]httpd=make_server('localhost',8002,demo_app)httpd.serve_forever()#\u4f7f\u7528select12345678910111213defdemo_app(environ,start_response):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fromStringIOimportStringIO\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0stdout=StringIO()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print>>stdout,\"Helloworld!\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print>>stdout\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0h=environ.items();h.sort()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fork,vinh:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print>>stdout,k,'=',repr(v)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0start_response(\"200OK\",[('Content-Type','text/plain')])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return[stdout.getvalue()]\u00a0\u00a0\u00a0\u00a0httpd=make_server('localhost',8002,\u00a0\u00a0demo_app)\u00a0\u00a0httpd.serve_forever()\u00a0\u00a0#\u4f7f\u7528select\u5b9e\u73b0\u4e86\u4e00\u4e2aapplication\uff0c\u6765\u83b7\u53d6\u5ba2\u6237\u7aef\u7684\u73af\u5883\u548c\u56de\u8c03\u51fd\u6570\u4e24\u4e2a\u53c2\u6570\uff0c\u4ee5\u53cahttpd\u670d\u52a1\u7aef\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u6765\u770b\u770bmake_server\u7684\u6e90\u4ee3\u7801Pythondefmake_server(host,port,app,server_class=WSGIServer,handler_class=WSGIRequestHandler):\"\"\"CreateanewWSGIserverlisteningon`host`and`port`for`app`\"\"\"server=server_class((host,port),handler_class)server.set_app(app)returnserver1234567defmake_server(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0host,port,app,server_class=WSGIServer,handler_class=WSGIRequestHandler\u00a0\u00a0):\u00a0\u00a0\u00a0\u00a0\"\"\"CreateanewWSGIserverlisteningon`host`and`port`for`app`\"\"\"\u00a0\u00a0\u00a0\u00a0server=server_class((host,port),handler_class)\u00a0\u00a0\u00a0\u00a0server.set_app(app)\u00a0\u00a0\u00a0\u00a0returnserver\u63a5\u53d7\u4e00\u7cfb\u5217\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2aserver\u5bf9\u8c61,\u5b9e\u73b0\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u770b\u770b\u5728django\u4e2d\u5982\u4f55\u5b9e\u73b0\u5176\u81ea\u8eab\u7684wsgi\u670d\u52a1\u5668\u7684\u3002\u4e0b\u9762\u6211\u4eec\u81ea\u5df1\u6765\u5b9e\u73b0\u4e00\u904d\uff1aWSGI\u89c4\u5b9a\u6bcf\u4e2apython\u7a0b\u5e8f\uff08Application\uff09\u5fc5\u987b\u662f\u4e00\u4e2a\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\uff08\u5b9e\u73b0\u4e86__call__\u51fd\u6570\u7684\u65b9\u6cd5\u6216\u8005\u7c7b\uff09\uff0c\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570environ\uff08WSGI\u7684\u73af\u5883\u4fe1\u606f\uff09\u548cstart_response\uff08\u5f00\u59cb\u54cd\u5e94\u8bf7\u6c42\u7684\u51fd\u6570\uff09\uff0c\u5e76\u4e14\u8fd4\u56deiterable\u3002\u51e0\u70b9\u8bf4\u660e\uff1aPythonenviron\u548cstart_response\u7531httpserver\u63d0\u4f9b\u5e76\u5b9e\u73b0environ\u53d8\u91cf\u662f\u5305\u542b\u4e86\u73af\u5883\u4fe1\u606f\u7684\u5b57\u5178Application\u5185\u90e8\u5728\u8fd4\u56de\u524d\u8c03\u7528start_responsestart_response\u4e5f\u662f\u4e00\u4e2acallable\uff0c\u63a5\u53d7\u4e24\u4e2a\u5fc5\u987b\u7684\u53c2\u6570\uff0cstatus\uff08HTTP\u72b6\u6001\uff09\u548cresponse_headers\uff08\u54cd\u5e94\u6d88\u606f\u7684\u5934\uff09\u53ef\u8c03\u7528\u5bf9\u8c61\u8981\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u8fd9\u4e2a\u503c\u662f\u53ef\u8fed\u4ee3\u7684\u300212345environ\u548cstart_response\u7531httpserver\u63d0\u4f9b\u5e76\u5b9e\u73b0environ\u53d8\u91cf\u662f\u5305\u542b\u4e86\u73af\u5883\u4fe1\u606f\u7684\u5b57\u5178Application\u5185\u90e8\u5728\u8fd4\u56de\u524d\u8c03\u7528start_responsestart_response\u4e5f\u662f\u4e00\u4e2acallable\uff0c\u63a5\u53d7\u4e24\u4e2a\u5fc5\u987b\u7684\u53c2\u6570\uff0cstatus\uff08HTTP\u72b6\u6001\uff09\u548cresponse_headers\uff08\u54cd\u5e94\u6d88\u606f\u7684\u5934\uff09\u53ef\u8c03\u7528\u5bf9\u8c61\u8981\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u8fd9\u4e2a\u503c\u662f\u53ef\u8fed\u4ee3\u7684\u3002Python#1.\u53ef\u8c03\u7528\u5bf9\u8c61\u662f\u4e00\u4e2a\u51fd\u6570defapplication(environ,start_response):response_body='Therequestmethodwas%s'%environ['REQUEST_METHOD']#HTTPresponsecodeandmessagestatus='200OK'#\u5e94\u7b54\u7684\u5934\u90e8\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u5bf9\u952e\u503c\u90fd\u5fc5\u987b\u662f\u4e00\u4e2atuple\u3002response_headers=[('Content-Type','text/plain'),('Content-Length',str(len(response_body)))]#\u8c03\u7528\u670d\u52a1\u5668\u7a0b\u5e8f\u63d0\u4f9b\u7684start_response\uff0c\u586b\u5165\u4e24\u4e2a\u53c2\u6570start_response(status,response_headers)#\u8fd4\u56de\u5fc5\u987b\u662fiterablereturn[response_body]#2.\u53ef\u8c03\u7528\u5bf9\u8c61\u662f\u4e00\u4e2a\u7c7bclassAppClass:\"\"\"\u8fd9\u91cc\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u5c31\u662fAppClass\u8fd9\u4e2a\u7c7b\uff0c\u8c03\u7528\u5b83\u5c31\u80fd\u751f\u6210\u53ef\u4ee5\u8fed\u4ee3\u7684\u7ed3\u679c\u3002\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c\u4e8e\uff1aforresultinAppClass(env,start_response):do_somthing(result)\"\"\"def__init__(self,environ,start_response):self.environ=environself.start=start_responsedef__iter__(self):status='200OK'response_headers=[('Content-type','text/plain')]self.start(status,response_headers)yield\"Helloworld!\\n\"#3.\u53ef\u8c03\u7528\u5bf9\u8c61\u662f\u4e00\u4e2a\u5b9e\u4f8bclassAppClass:\"\"\"\u8fd9\u91cc\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u5c31\u662fAppClass\u7684\u5b9e\u4f8b\uff0c\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c\u4e8e\uff1aapp=AppClass()forresultinapp(environ,start_response):do_somthing(result)\"\"\"def__init__(self):passdef__call__(self,environ,start_response):status='200OK'response_headers=[('Content-type','text/plain')]self.start(status,response_headers)yield\"Helloworld!\\n\"12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#1.\u53ef\u8c03\u7528\u5bf9\u8c61\u662f\u4e00\u4e2a\u51fd\u6570defapplication(environ,start_response):\u00a0\u00a0response_body='Therequestmethodwas%s'%environ['REQUEST_METHOD']\u00a0\u00a0#HTTPresponsecodeandmessage\u00a0\u00a0status='200OK'\u00a0\u00a0#\u5e94\u7b54\u7684\u5934\u90e8\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u5bf9\u952e\u503c\u90fd\u5fc5\u987b\u662f\u4e00\u4e2atuple\u3002\u00a0\u00a0response_headers=[('Content-Type','text/plain'),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0('Content-Length',str(len(response_body)))]\u00a0\u00a0#\u8c03\u7528\u670d\u52a1\u5668\u7a0b\u5e8f\u63d0\u4f9b\u7684start_response\uff0c\u586b\u5165\u4e24\u4e2a\u53c2\u6570\u00a0\u00a0start_response(status,response_headers)\u00a0\u00a0#\u8fd4\u56de\u5fc5\u987b\u662fiterable\u00a0\u00a0return[response_body]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#2.\u53ef\u8c03\u7528\u5bf9\u8c61\u662f\u4e00\u4e2a\u7c7bclassAppClass:\u00a0\u00a0\u00a0\u00a0\"\"\"\u8fd9\u91cc\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u5c31\u662fAppClass\u8fd9\u4e2a\u7c7b\uff0c\u8c03\u7528\u5b83\u5c31\u80fd\u751f\u6210\u53ef\u4ee5\u8fed\u4ee3\u7684\u7ed3\u679c\u3002\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c\u4e8e\uff1a\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forresultinAppClass(env,start_response):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0do_somthing(result)\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0def__init__(self,environ,start_response):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.environ=environ\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.start=start_response\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0status='200OK'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0response_headers=[('Content-type','text/plain')]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.start(status,response_headers)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yield\"Helloworld!\\n\"#3.\u53ef\u8c03\u7528\u5bf9\u8c61\u662f\u4e00\u4e2a\u5b9e\u4f8bclassAppClass:\u00a0\u00a0\u00a0\u00a0\"\"\"\u8fd9\u91cc\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u5c31\u662fAppClass\u7684\u5b9e\u4f8b\uff0c\u4f7f\u7528\u65b9\u6cd5\u7c7b\u4f3c\u4e8e\uff1a\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0app=AppClass()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forresultinapp(environ,start_response):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0do_somthing(result)\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0def__call__(self,environ,start_response):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0status='200OK'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0response_headers=[('Content-type','text/plain')]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.start(status,response_headers)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yield\"Helloworld!\\n\"\u670d\u52a1\u5668\u7a0b\u5e8f\u7aef\u4e0a\u9762\u5df2\u7ecf\u8bf4\u8fc7\uff0c\u6807\u51c6\u8981\u80fd\u591f\u786e\u5207\u5730\u5b9e\u884c\uff0c\u5fc5\u987b\u8981\u6c42\u7a0b\u5e8f\u7aef\u548c\u670d\u52a1\u5668\u7aef\u5171\u540c\u9075\u5b88\u3002\u4e0a\u9762\u63d0\u5230\uff0cenvrion\u548cstart_response\u90fd\u662f\u670d\u52a1\u5668\u7aef\u63d0\u4f9b\u7684\u3002\u4e0b\u9762\u5c31\u770b\u770b\uff0c\u670d\u52a1\u5668\u7aef\u8981\u5c65\u884c\u7684\u4e49\u52a1\u3002Python\u51c6\u5907environ\u53c2\u6570\u5b9a\u4e49start_response\u51fd\u6570\u8c03\u7528\u7a0b\u5e8f\u7aef\u7684\u53ef\u8c03\u7528\u5bf9\u8c61123\u51c6\u5907environ\u53c2\u6570\u5b9a\u4e49start_response\u51fd\u6570\u8c03\u7528\u7a0b\u5e8f\u7aef\u7684\u53ef\u8c03\u7528\u5bf9\u8c61Pythonimportos,sysdefrun_with_cgi(application):#application\u662f\u7a0b\u5e8f\u7aef\u7684\u53ef\u8c03\u7528\u5bf9\u8c61#\u51c6\u5907environ\u53c2\u6570\uff0c\u8fd9\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u662f\u4e00\u6b21HTTP\u8bf7\u6c42\u7684\u73af\u5883\u53d8\u91cfenviron=dict(os.environ.items())environ['wsgi.input']=sys.stdinenviron['wsgi.errors']=sys.stderrenviron['wsgi.version']=(1,0)environ['wsgi.multithread']=Falseenviron['wsgi.multiprocess']=Trueenviron['wsgi.run_once']=Trueenviron['wsgi.url_scheme']='http'headers_set=[]headers_sent=[]#\u628a\u5e94\u7b54\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u7ec8\u7aefdefwrite(data):sys.stdout.write(data)sys.stdout.flush()#\u5b9e\u73b0start_response\u51fd\u6570\uff0c\u6839\u636e\u7a0b\u5e8f\u7aef\u4f20\u8fc7\u6765\u7684status\u548cresponse_headers\u53c2\u6570\uff0c#\u8bbe\u7f6e\u72b6\u6001\u548c\u5934\u90e8defstart_response(status,response_headers,exc_info=None):headers_set[:]=[status,response_headers]returnwrite#\u8c03\u7528\u5ba2\u6237\u7aef\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u628a\u51c6\u5907\u597d\u7684\u53c2\u6570\u4f20\u9012\u8fc7\u53bbresult=application(environ,start_response)#\u5904\u7406\u5f97\u5230\u7684\u7ed3\u679c\uff0c\u8fd9\u91cc\u7b80\u5355\u5730\u628a\u7ed3\u679c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002try:fordatainresult:ifdata:#don'tsendheadersuntilbodyappearswrite(data)finally:ifhasattr(result,'close'):result.close()1234567891011121314151617181920212223242526272829303132333435363738importos,sysdefrun_with_cgi(application):\u00a0\u00a0\u00a0\u00a0#application\u662f\u7a0b\u5e8f\u7aef\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u00a0\u00a0\u00a0\u00a0#\u51c6\u5907environ\u53c2\u6570\uff0c\u8fd9\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u91cc\u9762\u7684\u5185\u5bb9\u662f\u4e00\u6b21HTTP\u8bf7\u6c42\u7684\u73af\u5883\u53d8\u91cf\u00a0\u00a0\u00a0\u00a0environ=dict(os.environ.items())\u00a0\u00a0\u00a0\u00a0environ['wsgi.input']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0=sys.stdin\u00a0\u00a0\u00a0\u00a0environ['wsgi.errors']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0=sys.stderr\u00a0\u00a0\u00a0\u00a0environ['wsgi.version']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0=(1,0)\u00a0\u00a0\u00a0\u00a0environ['wsgi.multithread']\u00a0\u00a0=False\u00a0\u00a0\u00a0\u00a0environ['wsgi.multiprocess']=True\u00a0\u00a0\u00a0\u00a0environ['wsgi.run_once']\u00a0\u00a0\u00a0\u00a0=True\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0environ['wsgi.url_scheme']='http'\u00a0\u00a0\u00a0\u00a0headers_set=[]\u00a0\u00a0\u00a0\u00a0headers_sent=[]\u00a0\u00a0\u00a0\u00a0#\u628a\u5e94\u7b54\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u7ec8\u7aef\u00a0\u00a0\u00a0\u00a0defwrite(data):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.stdout.write(data)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sys.stdout.flush()\u00a0\u00a0\u00a0\u00a0#\u5b9e\u73b0start_response\u51fd\u6570\uff0c\u6839\u636e\u7a0b\u5e8f\u7aef\u4f20\u8fc7\u6765\u7684status\u548cresponse_headers\u53c2\u6570\uff0c\u00a0\u00a0\u00a0\u00a0#\u8bbe\u7f6e\u72b6\u6001\u548c\u5934\u90e8\u00a0\u00a0\u00a0\u00a0defstart_response(status,response_headers,exc_info=None):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0headers_set[:]=[status,response_headers]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnwrite\u00a0\u00a0\u00a0\u00a0#\u8c03\u7528\u5ba2\u6237\u7aef\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u628a\u51c6\u5907\u597d\u7684\u53c2\u6570\u4f20\u9012\u8fc7\u53bb\u00a0\u00a0\u00a0\u00a0result=application(environ,start_response)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5904\u7406\u5f97\u5230\u7684\u7ed3\u679c\uff0c\u8fd9\u91cc\u7b80\u5355\u5730\u628a\u7ed3\u679c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fordatainresult:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdata:\u00a0\u00a0\u00a0\u00a0#don'tsendheadersuntilbodyappears\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0write(data)\u00a0\u00a0\u00a0\u00a0finally:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhasattr(result,'close'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.close()2\u7531Django\u6846\u67b6\u5206\u6790WSGI\u4e0b\u9762\u6211\u4eec\u4ee5django\u4e3a\u4f8b\uff0c\u5206\u6790\u4e00\u4e0bwsgi\u7684\u6574\u4e2a\u6d41\u7a0bdjangoWSGIapplicationWSGIapplication\u5e94\u8be5\u5b9e\u73b0\u4e3a\u4e00\u4e2a\u53ef\u8c03\u7528iter\u5bf9\u8c61\uff0c\u4f8b\u5982\u51fd\u6570\u3001\u65b9\u6cd5\u3001\u7c7b(\u5305\u542b**call**\u65b9\u6cd5)\u3002\u9700\u8981\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u5b57\u5178\uff0c\u8be5\u5b57\u5178\u53ef\u4ee5\u5305\u542b\u4e86\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u4fe1\u606f\u4ee5\u53ca\u5176\u4ed6\u4fe1\u606f\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u8bf7\u6c42\u4e0a\u4e0b\u6587\uff0c\u4e00\u822c\u53eb\u505aenvironment\uff08\u7f16\u7801\u4e2d\u591a\u7b80\u5199\u4e3aenviron\u3001env\uff09\uff0c\u4e00\u4e2a\u7528\u4e8e\u53d1\u9001HTTP\u54cd\u5e94\u72b6\u6001\uff08HTTPstatus\uff09\u3001\u54cd\u5e94\u5934\uff08HTTPheaders\uff09\u7684\u56de\u8c03\u51fd\u6570,\u4e5f\u5c31\u662fstart_response()\u3002\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u5c06\u54cd\u5e94\u72b6\u6001\u548c\u54cd\u5e94\u5934\u8fd4\u56de\u7ed9server\uff0c\u540c\u65f6\u8fd4\u56de\u54cd\u5e94\u6b63\u6587(responsebody)\uff0c\u54cd\u5e94\u6b63\u6587\u662f\u53ef\u8fed\u4ee3\u7684\u3001\u5e76\u5305\u542b\u4e86\u591a\u4e2a\u5b57\u7b26\u4e32\u3002\u4e0b\u9762\u662fDjango\u4e2dapplication\u7684\u5177\u4f53\u5b9e\u73b0\u90e8\u5206\uff1aPythonclassWSGIHandler(base.BaseHandler):initLock=Lock()request_class=WSGIRequestdef__call__(self,environ,start_response):#\u52a0\u8f7d\u4e2d\u95f4\u4ef6ifself._request_middlewareisNone:withself.initLock:try:#Checkthatmiddlewareisstilluninitialized.ifself._request_middlewareisNone:self.load_middleware()except:#Unloadwhatevermiddlewarewegotself._request_middleware=Noneraiseset_script_prefix(get_script_name(environ))#\u8bf7\u6c42\u5904\u7406\u4e4b\u524d\u53d1\u9001\u4fe1\u53f7signals.request_started.send(sender=self.__class__,environ=environ)try:request=self.request_class(environ)exceptUnicodeDecodeError:logger.warning('BadRequest(UnicodeDecodeError)',exc_info=sys.exc_info(),extra={'status_code':400,}response=http.HttpResponseBadRequest()else:response=self.get_response(request)response._handler_class=self.__class__status='%s%s'%(response.status_code,response.reason_phrase)response_headers=[(str(k),str(v))fork,vinresponse.items()]forcinresponse.cookies.values():response_headers.append((str('Set-Cookie'),str(c.output(header=''))))#server\u63d0\u4f9b\u7684\u56de\u8c03\u65b9\u6cd5\uff0c\u5c06\u54cd\u5e94\u7684header\u548cstatus\u8fd4\u56de\u7ed9serverstart_response(force_str(status),response_headers)ifgetattr(response,'file_to_stream',None)isnotNoneandenviron.get('wsgi.file_wrapper'):response=environ['wsgi.file_wrapper'](response.file_to_stream)returnresponse12345678910111213141516171819202122232425262728classWSGIHandler(base.BaseHandler):\u00a0\u00a0initLock=Lock()\u00a0\u00a0request_class=WSGIRequest\u00a0\u00a0def__call__(self,environ,start_response):\u00a0\u00a0#\u52a0\u8f7d\u4e2d\u95f4\u4ef6\u00a0\u00a0\u00a0\u00a0ifself._request_middlewareisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0withself.initLock:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:#Checkthatmiddlewareisstilluninitialized.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself._request_middlewareisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.load_middleware()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:#Unloadwhatevermiddlewarewegot\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self._request_middleware=Noneraise\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0set_script_prefix(get_script_name(environ))#\u8bf7\u6c42\u5904\u7406\u4e4b\u524d\u53d1\u9001\u4fe1\u53f7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0signals.request_started.send(sender=self.__class__,environ=environ)\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0request=self.request_class(environ)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptUnicodeDecodeError:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0logger.warning('BadRequest(UnicodeDecodeError)',exc_info=sys.exc_info(),extra={'status_code':400,}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0response=http.HttpResponseBadRequest()\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0response=self.get_response(request)\u00a0\u00a0\u00a0\u00a0response._handler_class=self.__class__status='%s%s'%(response.status_code,response.reason_phrase)\u00a0\u00a0\u00a0\u00a0response_headers=[(str(k),str(v))fork,vinresponse.items()]forcinresponse.cookies.values():response_headers.append((str('Set-Cookie'),str(c.output(header=''))))\u00a0\u00a0\u00a0\u00a0#server\u63d0\u4f9b\u7684\u56de\u8c03\u65b9\u6cd5\uff0c\u5c06\u54cd\u5e94\u7684header\u548cstatus\u8fd4\u56de\u7ed9server\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0start_response(force_str(status),response_headers)\u00a0\u00a0\u00a0\u00a0ifgetattr(response,'file_to_stream',None)isnotNoneandenviron.get('wsgi.file_wrapper'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0response=environ['wsgi.file_wrapper'](response.file_to_stream)\u00a0\u00a0\u00a0\u00a0returnresponse\u53ef\u4ee5\u770b\u51faapplication\u7684\u6d41\u7a0b\u5305\u62ec:\u52a0\u8f7d\u6240\u6709\u4e2d\u95f4\u4ef6\uff0c\u4ee5\u53ca\u6267\u884c\u6846\u67b6\u76f8\u5173\u7684\u64cd\u4f5c\uff0c\u8bbe\u7f6e\u5f53\u524d\u7ebf\u7a0b\u811a\u672c\u524d\u7f00\uff0c\u53d1\u9001\u8bf7\u6c42\u5f00\u59cb\u4fe1\u53f7\uff1b\u5904\u7406\u8bf7\u6c42\uff0c\u8c03\u7528get_response()\u65b9\u6cd5\u5904\u7406\u5f53\u524d\u8bf7\u6c42\uff0c\u8be5\u65b9\u6cd5\u7684\u7684\u4e3b\u8981\u903b\u8f91\u662f\u901a\u8fc7urlconf\u627e\u5230\u5bf9\u5e94\u7684view\u548ccallback\uff0c\u6309\u987a\u5e8f\u6267\u884c\u5404\u79cdmiddleware\u548ccallback\u3002\u8c03\u7528\u7531server\u4f20\u5165\u7684start_response()\u65b9\u6cd5\u5c06\u54cd\u5e94header\u4e0estatus\u8fd4\u56de\u7ed9server\u3002\u8fd4\u56de\u54cd\u5e94\u6b63\u6587djangoWSGIServer\u8d1f\u8d23\u83b7\u53d6http\u8bf7\u6c42\uff0c\u5c06\u8bf7\u6c42\u4f20\u9012\u7ed9WSGIapplication\uff0c\u7531application\u5904\u7406\u8bf7\u6c42\u540e\u8fd4\u56deresponse\u3002\u4ee5Django\u5185\u5efaserver\u4e3a\u4f8b\u770b\u4e00\u4e0b\u5177\u4f53\u5b9e\u73b0\u3002\u901a\u8fc7runserver\u8fd0\u884cdjango\u9879\u76ee\uff0c\u5728\u542f\u52a8\u65f6\u90fd\u4f1a\u8c03\u7528\u4e0b\u9762\u7684run\u65b9\u6cd5\uff0c\u521b\u5efa\u4e00\u4e2aWSGIServer\u7684\u5b9e\u4f8b\uff0c\u4e4b\u540e\u518d\u8c03\u7528\u5176serve_forever()\u65b9\u6cd5\u542f\u52a8\u670d\u52a1\u3002Pythondefrun(addr,port,wsgi_handler,ipv6=False,threading=False):server_address=(addr,port)ifthreading:httpd_cls=type(str('WSGIServer'),(socketserver.ThreadingMixIn,WSGIServer),{})else:httpd_cls=WSGIServer#\u8fd9\u91cc\u7684wsgi_handler\u5c31\u662fWSGIApplicationhttpd=httpd_cls(server_address,WSGIRequestHandler,ipv6=ipv6)ifthreading:httpd.daemon_threads=Truehttpd.set_app(wsgi_handler)httpd.serve_forever()12345678910defrun(addr,port,wsgi_handler,ipv6=False,threading=False):\u00a0\u00a0server_address=(addr,port)\u00a0\u00a0ifthreading:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0httpd_cls=type(str('WSGIServer'),(socketserver.ThreadingMixIn,WSGIServer),{})\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0httpd_cls=WSGIServer#\u8fd9\u91cc\u7684wsgi_handler\u5c31\u662fWSGIApplication\u00a0\u00a0httpd=httpd_cls(server_address,WSGIRequestHandler,ipv6=ipv6)\u00a0\u00a0\u00a0\u00a0ifthreading:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0httpd.daemon_threads=Truehttpd.set_app(wsgi_handler)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0httpd.serve_forever()\u4e0b\u9762\u8868\u793aWSGIserver\u670d\u52a1\u5668\u5904\u7406\u6d41\u7a0b\u4e2d\u5173\u952e\u7684\u7c7b\u548c\u65b9\u6cd5\u3002WSGIServerrun()\u65b9\u6cd5\u4f1a\u521b\u5efaWSGIServer\u5b9e\u4f8b\uff0c\u4e3b\u8981\u4f5c\u7528\u662f\u63a5\u6536\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u5c06\u8bf7\u6c42\u4f20\u9012\u7ed9application\uff0c\u7136\u540e\u5c06application\u8fd4\u56de\u7684response\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002\u521b\u5efa\u5b9e\u4f8b\u65f6\u4f1a\u6307\u5b9aHTTP\u8bf7\u6c42\u7684handler\uff1aWSGIRequestHandler\u7c7b\uff0c\u901a\u8fc7set_app\u548cget_app\u65b9\u6cd5\u8bbe\u7f6e\u548c\u83b7\u53d6WSGIApplication\u5b9e\u4f8bwsgi_handler\u3002\u5904\u7406http\u8bf7\u6c42\u65f6\uff0c\u8c03\u7528handler_request\u65b9\u6cd5\uff0c\u4f1a\u521b\u5efaWSGIRequestHandler\uff0c\u5b9e\u4f8b\u5904\u7406http\u8bf7\u6c42\u3002WSGIServer\u4e2dget_request\u65b9\u6cd5\u901a\u8fc7socket\u63a5\u53d7\u8bf7\u6c42\u6570\u636e\u3002WSGIRequestHandler\u7531WSGIServer\u5728\u8c03\u7528handle_request\u65f6\u521b\u5efa\u5b9e\u4f8b\uff0c\u4f20\u5165request\u3001cient_address\u3001WSGIServer\u4e09\u4e2a\u53c2\u6570\uff0c__init__\u65b9\u6cd5\u5728\u5b9e\u4f8b\u5316\u540c\u65f6\u8fd8\u4f1a\u8c03\u7528\u81ea\u8eab\u7684handle\u65b9\u6cd5handle\u65b9\u6cd5\u4f1a\u521b\u5efaServerHandler\u5b9e\u4f8b\uff0c\u7136\u540e\u8c03\u7528\u5176run\u65b9\u6cd5\u5904\u7406\u8bf7\u6c42ServerHandlerWSGIRequestHandler\u5728\u5176handle\u65b9\u6cd5\u4e2d\u8c03\u7528run\u65b9\u6cd5\uff0c\u4f20\u5165self.server.get_app()\u53c2\u6570\uff0c\u83b7\u53d6WSGIApplication\uff0c\u7136\u540e\u8c03\u7528\u5b9e\u4f8b(__call__)\uff0c\u83b7\u53d6response\uff0c\u5176\u4e2d\u4f1a\u4f20\u5165start_response\u56de\u8c03\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u7684header\u548cstatus\u3002\u901a\u8fc7application\u83b7\u53d6response\u4ee5\u540e\uff0c\u901a\u8fc7finish_response\u8fd4\u56deresponseWSGIHandlerWSGI\u534f\u8bae\u4e2d\u7684application\uff0c\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0cenviron\u5b57\u5178\u5305\u542b\u4e86\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u4fe1\u606f\u4ee5\u53ca\u5176\u4ed6\u4fe1\u606f\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u8bf7\u6c42\u4e0a\u4e0b\u6587\uff0cstart_response\u7528\u4e8e\u53d1\u9001\u8fd4\u56destatus\u548cheader\u7684\u56de\u8c03\u51fd\u6570\u867d\u7136\u4e0a\u9762\u4e00\u4e2aWSGIserver\u6d89\u53ca\u5230\u591a\u4e2a\u7c7b\u5b9e\u73b0\u4ee5\u53ca\u76f8\u4e92\u5f15\u7528\uff0c\u4f46\u5176\u5b9e\u539f\u7406\u8fd8\u662f\u8c03\u7528WSGIHandler\uff0c\u4f20\u5165\u8bf7\u6c42\u53c2\u6570\u4ee5\u53ca\u56de\u8c03\u65b9\u6cd5start_response()\uff0c\u5e76\u5c06\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u30023\u5b9e\u9645\u73af\u5883\u4f7f\u7528\u7684wsgi\u670d\u52a1\u5668\u56e0\u4e3a\u6bcf\u4e2aweb\u6846\u67b6\u90fd\u4e0d\u662f\u4e13\u6ce8\u4e8e\u5b9e\u73b0\u670d\u52a1\u5668\u65b9\u9762\u7684\uff0c\u56e0\u6b64\uff0c\u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u7684\u65f6\u5019\u4f7f\u7528\u7684\u670d\u52a1\u5668\u4e5f\u4e0d\u4f1a\u7b80\u5355\u7684\u4f7f\u7528web\u6846\u67b6\u81ea\u5e26\u7684\u670d\u52a1\u5668\uff0c\u8fd9\u91cc\uff0c\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e0b\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u670d\u52a1\u5668\u6709\u54ea\u4e9b\uff1f1.gunicornGunicorn\uff08\u4eceRuby\u4e0b\u9762\u7684Unicorn\u5f97\u5230\u7684\u542f\u53d1\uff09\u5e94\u8fd0\u800c\u751f\uff1a\u4f9d\u8d56Nginx\u7684\u4ee3\u7406\u884c\u4e3a\uff0c\u540cNginx\u8fdb\u884c\u529f\u80fd\u4e0a\u7684\u5206\u79bb\u3002\u7531\u4e8e\u4e0d\u9700\u8981\u76f4\u63a5\u5904\u7406\u7528\u6237\u6765\u7684\u8bf7\u6c42\uff08\u90fd\u88abNginx\u5148\u5904\u7406\uff09\uff0cGunicorn\u4e0d\u9700\u8981\u5b8c\u6210\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5176\u5185\u90e8\u903b\u8f91\u975e\u5e38\u7b80\u5355\uff1a\u63a5\u53d7\u4eceNginx\u6765\u7684\u52a8\u6001\u8bf7\u6c42\uff0c\u5904\u7406\u5b8c\u4e4b\u540e\u8fd4\u56de\u7ed9Nginx\uff0c\u7531\u540e\u8005\u8fd4\u56de\u7ed9\u7528\u6237\u3002\u7531\u4e8e\u529f\u80fd\u5b9a\u4f4d\u5f88\u660e\u786e\uff0cGunicorn\u5f97\u4ee5\u7528\u7eafPython\u5f00\u53d1\uff1a\u5927\u5927\u7f29\u77ed\u4e86\u5f00\u53d1\u65f6\u95f4\u7684\u540c\u65f6\uff0c\u6027\u80fd\u4e0a\u4e5f\u4e0d\u4f1a\u5f88\u6389\u94fe\u5b50\u3002\u540c\u65f6\uff0c\u5b83\u4e5f\u53ef\u4ee5\u914d\u5408Nginx\u7684\u4ee3\u7406\u4e4b\u5916\u7684\u522b\u7684Proxy\u6a21\u5757\u5de5\u4f5c\uff0c\u5176\u914d\u7f6e\u4e5f\u76f8\u5e94\u6bd4\u8f83\u7b80\u5355\u3002\u914d\u7f6e\u4e0a\u7684\u7b80\u5355\uff0c\u5927\u6982\u662f\u5b83\u6d41\u884c\u7684\u6700\u5927\u7684\u539f\u56e0\u30022.uwsgi\u56e0\u4e3a\u4f7f\u7528C\u8bed\u8a00\u5f00\u53d1\uff0c\u4f1a\u548c\u5e95\u5c42\u63a5\u89e6\u7684\u66f4\u597d\uff0c\u914d\u7f6e\u4e5f\u662f\u6bd4\u8f83\u65b9\u4fbf\uff0c\u76ee\u524d\u548cgunicorn\u4e24\u4e2a\u7b97\u662f\u90e8\u7f72\u65f6\u7684\u552f\u4e8c\u4e4b\u9009\u3002\u4ee5\u4e0b\u662f\u901a\u5e38\u7684\u914d\u7f6e\u6587\u4ef6Python[uwsgi]http=$(HOSTNAME):9033http-keepalive=1pythonpath=../module=servicemaster=1processes=8daemonize=logs/uwsgi.logdisable-logging=1buffer-size=16384harakiri=5pidfile=uwsgi.pidstats=$(HOSTNAME):1733\u8fd0\u884c\uff1auwsgi--iniconf.ini12345678910111213141516[uwsgi]http=$(HOSTNAME):9033http-keepalive=1pythonpath=../module=servicemaster=1processes=8daemonize=logs/uwsgi.logdisable-logging=1buffer-size=16384harakiri=5pidfile=uwsgi.pidstats=$(HOSTNAME):1733\u00a0\u00a0\u8fd0\u884c\uff1auwsgi--ini\u00a0\u00a0conf.ini3.fcgi\u4e0d\u591a\u6570\uff0c\u4f30\u8ba1\u4f7f\u7528\u7684\u4eba\u4e5f\u662f\u6bd4\u8f83\u5c11\uff0c\u8fd9\u91cc\u53ea\u662f\u63d0\u4e00\u4e0b4.bjoernPythonWSGI\u754c\u6700\u725b\u903c\u6027\u80fd\u7684Server\u5176\u4e2d\u4e00\u4e2a\u662fbjoern\uff0c\u7eafC\uff0c\u5c0f\u4e8e1000\u884c\u4ee3\u7801\uff0c\u5c31\u662f\u770b\u4e0d\u60efuWSGI\u7684\u5197\u4f59\u81ea\u5199\u7684\u30024WSGI\u670d\u52a1\u5668\u6bd4\u8f83\u7efc\u5408\u5e7f\u5927Python\u5f00\u53d1\u8005\u7684\u5b9e\u9645\u7ecf\u5386\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\uff0c\u4f7f\u7528\u6700\u5e7f\u7684\u5f53\u5c5euWSGI\u4ee5\u53cagunicorn\uff0c\u6211\u4eec\u8fd9\u91cc\u6765\u6bd4\u8f83\u6bd4\u8f83\u4e24\u8005\u4e0e\u5176\u4ed6\u670d\u52a1\u5668\u7684\u533a\u522b\u30021.gunicorn\u672c\u8eab\u662f\u4e2a\u591a\u8fdb\u7a0b\u7ba1\u7406\u5668\uff0c\u9700\u8981\u6307\u5b9a\u76f8\u5173\u7684\u4e0d\u540c\u7c7b\u578b\u7684worker\u53bb\u5de5\u4f5c\uff0c\u4f7f\u7528gevent\u4f5c\u4e3aworker\u65f6\u5355\u673a\u5927\u6982\u662f3000RPSHelloWorld\uff0c\u80dc\u8fc7torando\u81ea\u5e26\u7684\u670d\u52a1\u5668\u5927\u6982\u662f2000\u5de6\u53f3\uff0cuWSGI\u5219\u4f1a\u66f4\u9ad8\u4e00\u70b9\u30022.\u76f8\u6bd4\u4e8etornado\u5bf9\u4e8e\u73b0\u6709\u4ee3\u7801\u9700\u8981\u5927\u89c4\u6a21\u91cd\u6784\u624d\u80fd\u7528\u4e0a\u9ad8\u7ea7\u7279\u6027\uff0cGevent\u53ea\u9700\u8981\u4e00\u4e2amonkey\uff0c\u5bb9\u6613\u5bf9\u4ee3\u7801\u8fdb\u884c\u5feb\u901f\u52a0\u5de5\u30023.gunicorn\u53ef\u4ee5\u505aprehookandposthook.\u4e0b\u9762\u6765\u5bf9\u6bd4\u4ee5\u4e0buWSGI\u548cgunicorn\u7684\u901f\u5ea6\u5dee\u6bd4\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u5355\u7eaf\u8ffd\u6c42\u6027\u80fd\uff0c\u90a3uWSGI\u4f1a\u66f4\u597d\u4e00\u70b9\uff0c\u800cgunicorn\u5219\u4f1a\u66f4\u6613\u5b89\u88c5\u548c\u7ed3\u5408gevent\u3002\u7ed3\u5408\u8fd9\u7bc7\u6587\u7ae0,\u6211\u4eec\u4e5f\u53ef\u4ee5\u5f97\u51fa\u76f8\u540c\u7ed3\u8bba\uff0c\u5728\u963b\u585e\u54cd\u5e94\u8f83\u591a\u7684\u60c5\u51b5\u4e0b\uff0cgunicorn\u7684gevent\u6a21\u5f0f\u65e0\u7591\u6027\u80fd\u4f1a\u66f4\u52a0\u5f3a\u5927\u3002\u529f\u80fd\u5b9e\u73b0\u65b9\u9762\uff0c\u65e0\u7591uWSGI\u4f1a\u66f4\u591a\u4e00\u4e9b\uff0c\u914d\u7f6e\u4e5f\u4f1a\u66f4\u52a0\u590d\u6742\u4e00\u4e9b\uff0c\u53ef\u4ee5\u770b\u770buWSGI\u7684\u914d\u7f6e\u548cgunicorn\u7684\u914d\u7f6e\u3002\u81f3\u4e8e\u600e\u4e48\u53bb\u9009\u62e9\uff0c\u5c31\u770b\u5927\u5bb6\u7684\u9879\u76ee\u7ed3\u6784\u600e\u4e48\u6837\u4e86\u3002\u6700\u540e\uff0c\u5ba3\u4f20\u4e00\u4e0b\u6211\u4eec\u7684\u5f00\u6e90\u7ec4\u7ec7\uff0cPSC\u5f00\u6e90\u7ec4\uff0c\u5e0c\u671b\u4ee5\u5f00\u6e90\u9879\u76ee\u7684\u65b9\u5f0f\u8ba9\u6bcf\u4e2a\u4eba\u90fd\u80fd\u66f4\u6709\u878d\u5165\u6027\u7684\u53bb\u5b66\u4e60\uff0c\u516c\u5f00\u5316\u4f60\u7684\u5b66\u4e60\u3002github\u5730\u5740\uff1ahttps://github.com/PythonScie\u2026\u5b98\u65b9\u8bba\u575b\uff1ahttp://www.pythonscientists.com1\u8d5e9\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u4f18\u5316\u5c0f\u8bb0"], "art_url": ["http://python.jobbole.com/88666/"], "art_create_time": ["2017/10/09"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-10-08-%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E6%A1%86%E6%9E%B6GAFT%E4%BC%98%E5%8C%96%E5%B0%8F%E8%AE%B0/optimized.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u524d\u6bb5\u65f6\u95f4\u4e00\u76f4\u5728\u7528\u81ea\u5df1\u5199\u7684\u9057\u4f20\u7b97\u6cd5\u6846\u67b6\u6d4b\u8bd5\u7b97\u6cd5\u5728\u4f18\u5316\u529b\u573a\u53c2\u6570\u7684\u6548\u679c\uff0c\u4f46\u662f\u8dd1\u8d77\u6765\u6548\u7387\u5f88\u6162\uff0c\u56e0\u4e3a\u9002\u5e94\u5ea6\u51fd\u6570\u9700\u8981\u8c03\u7528\u591a\u6b21\u529b\u573a\u7a0b\u5e8f\u8ba1\u7b97\u80fd\u91cf\uff0c\u4f46\u662f\u8fd8\u662f\u6bd4\u6211\u9884\u60f3\u4e2d\u7684\u6162\u6211\u4e5f\u6ca1\u6709\u53ca\u65f6\u5bf9\u7a0b\u5e8f\u8fdb\u884cprofiling\u548c\u4f18\u5316\u3002\u76f4\u5230\u653e\u5047\u524d\u5728github\u6709\u4e2a\u4f7f\u7528gaft\u505aSVM\u53c2\u6570\u4f18\u5316\u7684\u7ae5\u978b\u5f00\u4e86\u4e2aissue\u4e2d\u8bf4\u9053\u5728gaft\u4f18\u5316\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u5927\u91cf\u8c03\u7528\u9002\u5e94\u5ea6\u51fd\u6570\uff0c\u8fd9\u624d\u4f7f\u6211\u5728\u56fd\u5e86\u653e\u5047\u671f\u95f4\u5bf9gaft\u8fdb\u884c\u4e86profiling\u627e\u5230\u7a0b\u5e8f\u74f6\u9888\u5e76\u9488\u5bf9\u6027\u7684\u4f18\u5316\u3002\u672c\u6587\u5c31\u8bb0\u5f55\u4e0b\u81ea\u5df1gaft\u505aprofiling\u5e76\u4f18\u5316\u7684\u8fc7\u7a0b\u4ee5\u53ca\u4f18\u5316\u7684\u6548\u679c\u3002\u6b63\u6587\u5bf9GAFT\u8fdb\u884c\u6027\u80fd\u5206\u6790(Profiling)\u5173\u4e8e\u5982\u4f55\u5bf9Python\u7a0b\u5e8f\u8fdb\u884c\u6027\u80fd\u5206\u6790\u751f\u6210\u5206\u6790\u62a5\u544a\u5e76\u53ef\u89c6\u5316\u5206\u6790\u62a5\u544a\uff0c\u6211\u5728\u4e4b\u524d\u7684\u4e00\u7bc7\u535a\u5ba2\u91cc\u300aPython\u4f18\u5316\u7b2c\u4e00\u6b65:\u6027\u80fd\u5206\u6790\u5b9e\u8df5\u300b\u8fdb\u884c\u4e86\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u6211\u5c31\u76f4\u63a5\u5206\u6790\u4e86\u3002\u4e3a\u4e86\u80fd\u9488\u5bf9gaft\u4e2d\u4e0d\u540c\u7684\u51fd\u6570\u8fdb\u884c\u5206\u6790\uff0c\u501f\u52a9Python\u5185\u7f6e\u7684cProfile\u548cpstats\u6a21\u5757\u6211\u5199\u4e86\u4e2a\u88c5\u9970\u5668\u65b9\u4fbf\u5206\u6790\u5e76\u751f\u6210\u4e0d\u540c\u7684\u5206\u6790\u7edf\u8ba1\u6587\u4ef6\u3002Pythondefdo_profile(filename,sortby='tottime'):'''Constructorforfunctionprofilingdecorator.'''def_do_profile(func):'''Functionprofilingdecorator.'''@wraps(func)defprofiled_func(*args,**kwargs):'''Decoratedfunction.'''#Flagfordoingprofilingornot.DO_PROF=os.getenv('PROFILING')ifDO_PROF:profile=cProfile.Profile()profile.enable()result=func(*args,**kwargs)profile.disable()ps=pstats.Stats(profile).sort_stats(sortby)ps.dump_stats(filename)else:result=func(*args,**kwargs)returnresultreturnprofiled_funcreturn_do_profile123456789101112131415161718192021222324252627defdo_profile(filename,sortby='tottime'):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0Constructorforfunctionprofilingdecorator.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0def_do_profile(func):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Functionprofilingdecorator.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0@wraps(func)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defprofiled_func(*args,**kwargs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Decoratedfunction.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Flagfordoingprofilingornot.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0DO_PROF=os.getenv('PROFILING')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifDO_PROF:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0profile=cProfile.Profile()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0profile.enable()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result=func(*args,**kwargs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0profile.disable()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ps=pstats.Stats(profile).sort_stats(sortby)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ps.dump_stats(filename)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result=func(*args,**kwargs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnresult\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnprofiled_func\u00a0\u00a0\u00a0\u00a0return_do_profile\u5bf9\u4e0a\u9762\u7684\u5e26\u53c2\u6570\u7684\u88c5\u9970\u5668\u6211\u5728\u8fd9\u91cc\u7a0d\u5fae\u89e3\u91ca\u4e0b\uff0c\u88c5\u9970\u5668\u6784\u9020\u5668do_profile\u7684\u4e24\u4e2a\u53c2\u6570filename\u548csortby\u5206\u522b\u6307\u5b9a\u5206\u6790\u7ed3\u679c\u62a5\u544a\u7684\u6587\u4ef6\u540d\u4ee5\u53ca\u7edf\u8ba1\u7ed3\u679c\u7684\u6392\u5e8f\u65b9\u5f0f\u3002\u5b83\u4f1a\u5bf9\u9700\u8981\u8fdb\u884c\u6027\u80fd\u5206\u6790\u7684\u51fd\u6570\u8fdb\u884c\u88c5\u9970\uff0c\u7136\u540e\u5728\u51fd\u6570\u8fd0\u884c\u5b8c\u540e\u5728\u5f53\u524d\u76ee\u5f55\u751f\u6210\u7ed3\u679c\u62a5\u544a\u3002\u4f8b\u5982\u6211\u9700\u8981\u5bf9gaft\u4e2d\u9057\u4f20\u7b97\u6cd5\u8fed\u4ee3\u4e3b\u5faa\u73af\u8fdb\u884c\u5206\u6790\uff0c\u5219\u9700\u8981:Python@do_profile(filename='gaft_run.prof')defrun(self,ng=100):...123@do_profile(filename='gaft_run.prof')defrun(self,ng=100):\u00a0\u00a0\u00a0\u00a0...\u540c\u65f6\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u8fd8\u9700\u8981\u4e00\u4e2a\u73af\u5883\u53d8\u91cfPROFILING\u6765\u542f\u52a8\u5206\u6790:ShellexportPROFILING=y1exportPROFILING=y\u5206\u6790\u7ed3\u679c\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbf\u67e5\u770b\u51fd\u6570\u7684\u76f8\u4e92\u8c03\u7528\u5173\u7cfb\uff0c\u6211\u662f\u7528\u4e86pyprof2calltree\u7136\u540e\u4f7f\u7528Mac\u4e0a\u7684QCacheGrind\u6765\u53ef\u89c6\u5316\u5206\u6790\u7ed3\u679c:Shellpyprof2calltree-igaft_run.prof-k1pyprof2calltree-igaft_run.prof-k\u5c06Python\u7684profiling\u6587\u4ef6\u8f6c\u6362\u5e76\u76f4\u63a5\u8c03\u7528QCacheGrind\u4fbf\u53ef\u4ee5\u65b9\u4fbf\u7684\u67e5\u770b\u5206\u6790\u76f8\u5173\u4fe1\u606f\u3002\u901a\u8fc7\u8c03\u7528\u5173\u7cfb\u56fe\u53ef\u4ee5\u770b\u5230\uff0cgaft\u7684\u521d\u59cb\u7248\u672c\u7684min,max,mean\u7b49\u51fd\u6570\u591a\u6b21\u8c03\u7528best_indv\u548cworst_indv\u4f1a\u591a\u6b21\u8c03\u7528\u9002\u5e94\u5ea6\u51fd\u6570\u6765\u76f8\u4e92\u6bd4\u8f83\uff0c\u800c\u901a\u5e38\u60c5\u51b5\u4e0b\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u9002\u5e94\u5ea6\u51fd\u6570\u90fd\u662f\u9700\u8981\u989d\u5916\u53bb\u8c03\u7528\u5916\u90e8\u7a0b\u5e8f\u7684\uff0c\u4e00\u822c\u90fd\u6bd4\u8f83\u8d39\u65f6\u3002\u6240\u4ee5\u5fc5\u987b\u8981\u901a\u8fc7\u4f18\u5316best_indv\u548cworst_indv\u5bf9fitness\u7684\u8c03\u7528\u6b21\u6570\u624d\u80fd\u63d0\u5347gaft\u7684\u6548\u7387\u3002\u4f18\u5316GAFT\u51fd\u6570\u8fd4\u56de\u503c\u7f13\u5b58\u4ece\u4e4b\u524d\u6211\u5199\u7684best_indv\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u5c06fitness\u4f5c\u4e3akey\u7528\u4e8e\u83b7\u53d6\u6700\u5927\u503c\uff0cPython\u5185\u7f6e\u7684max\u51fd\u6570\u4f1a\u5185\u90e8\u8c03\u7528fitness\u8fdb\u884c\u76f8\u4e92\u6bd4\u8f83\u6765\u83b7\u53d6\u6700\u5927\u503c\uff0c\u8fd9\u4e2a\u65f6\u5019\u4fbf\u5bf9fitness\u8fdb\u884c\u4e86\u591a\u4f59\u7684\u8c03\u7528\uff0c\u56e0\u4e3a\u5728\u9057\u4f20\u7b97\u6cd5\u4e2d\uff0c\u6bcf\u4e00\u4ee3\u7684population\u4e2d\u7684\u4e2a\u4f53\u662f\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u7684\u6211\u4eec\u53ea\u9700\u8981\u5728\u6bcf\u4e00\u6b21\u8fed\u4ee3\u7684\u4e00\u5f00\u59cb\u8c03\u7528fitnessn\u6b21\u5c31\u597d\u4e86(n\u4e3a\u79cd\u7fa4\u5927\u5c0f)\uff0c\u6bcf\u4e00\u4ee3\u4e2d\u518d\u6b21\u9700\u8981\u7528\u5230\u9002\u5e94\u5ea6\u503c\u7684\u5730\u65b9\u76f4\u63a5\u83b7\u53d6\u3002\u8fd9\u6837\u9700\u8981\u6211\u4eec\u5bf9\u79cd\u7fa4\u4e2d\u7684\u4e2a\u4f53\u8fdb\u884c\u60f0\u6027\u6c42\u503c\uff0c\u4e5f\u5c31\u662f\u5bf9\u6240\u6709\u7684fitness\u7684\u503c\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u79cd\u64cd\u4f5c\u6211\u5728\u4f18\u5316\u81ea\u5df1\u7684\u50ac\u5316\u52a8\u529b\u5b66\u7a0b\u5e8f\u7684\u65f6\u5019\u4e5f\u4f7f\u7528\u8fc7\uff0c\u53eb\u505a\u51fd\u6570\u8fd4\u56de\u503c\u7f13\u5b58.\u4f46\u662f\u5728gaft\u4e2d\u8fd9\u79cd\u7f13\u5b58\u6709\u7a0d\u5fae\u9ebb\u70e6\u4e00\u70b9\uff0c\u56e0\u4e3a\u7f13\u5b58\u5e76\u4e0d\u662f\u7f13\u5b58\u4e00\u6b21\u5c31\u53ef\u4ee5\u4e00\u76f4\u7528\u4e86\uff0c\u5b83\u4f1a\u968f\u7740\u6761\u4ef6\u7684\u53d8\u5316\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u79cd\u7fa4\u4e2d\u6240\u6709\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\u7136\u540e\u91cd\u65b0\u7f13\u5b58\u3002\u91cd\u65b0\u8ba1\u7b97\u9002\u5e94\u5ea6\u503c\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u7684\u6761\u4ef6\u79cd\u7fa4\u4e2d\u7684\u6240\u6709\u4e2a\u4f53\u6ca1\u6709\u53d1\u751f\u4efb\u4f55\u53d8\u5316(\u5982\u679c\u53d8\u5316\u4e86\u90a3\u80af\u5b9a\u8981\u91cd\u65b0\u8ba1\u7b97\u9002\u5e94\u5ea6\u503c\u4e86)\u3002\u5df2\u6709\u7f13\u5b58\u7684\u9002\u5e94\u5ea6\u503c(\u5982\u679c\u662f\u7b2c\u4e00\u6b21\u90a3\u80af\u5b9a\u9700\u8981\u8ba1\u7b97\u4e00\u6b21\u6240\u6709\u4e2a\u4f53\u7684\u9002\u5e94\u5ea6\u503c)\u3002\u8ba1\u7b97\u9002\u5e94\u5ea6\u503c\u7684\u9002\u5e94\u5ea6\u51fd\u6570\u4e0e\u4e4b\u524d\u6bd4\u8f83\u6ca1\u6709\u53d1\u751f\u53d8\u5316(\u5982\u679c\u8ba1\u7b97\u9002\u5e94\u5ea6\u51fd\u6570\u90fd\u6539\u53d8\u4e86\uff0c\u90a3\u5f53\u7136\u9700\u8981\u91cd\u65b0\u4f30\u8ba1\u9002\u5e94\u5ea6\u503c\u4e86)\u3002\u51fd\u6570\u8fd4\u56de\u503c\u7f13\u5b58\u63cf\u8ff0\u7b26\u4e3a\u6b64\u6211\u5199\u4e86\u4e2a\u88c5\u9970\u5668\u6765\u7f13\u5b58\u51fd\u6570\u7684\u8fd4\u56de\u503c:PythonclassMemoized(object):'''Descriptorforpopulationstatisticalvariblescaching.'''def__init__(self,func):self.func=funcself.result=Noneself.fitness=Nonedef__get__(self,instance,cls):self.instance=instancereturnselfdef__call__(self,fitness):if((notself.instance._updated)#populationnotchangedand(self.resultisnotNone)#resultalreadycachedand(fitness==self.fitness)):#fitnessnotchanged#Returncachedresultdirectly.returnself.resultelse:#Updatefitnessfunction.self.fitness=fitness#Updateandmemoizeresult.self.result=self.func(self.instance,fitness)#Recoverflag.self.instance._updated=Falsereturnself.result12345678910111213141516171819202122232425classMemoized(object):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0Descriptorforpopulationstatisticalvariblescaching.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0def__init__(self,func):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.func=func\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.result=None\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.fitness=None\u00a0\u00a0\u00a0\u00a0def__get__(self,instance,cls):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.instance=instance\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself\u00a0\u00a0\u00a0\u00a0def__call__(self,fitness):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if((notself.instance._updated)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#populationnotchanged\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0and(self.resultisnotNone)\u00a0\u00a0\u00a0\u00a0#resultalreadycached\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0and(fitness==self.fitness)):\u00a0\u00a0#fitnessnotchanged\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Returncachedresultdirectly.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.result\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updatefitnessfunction.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.fitness=fitness\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updateandmemoizeresult.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.result=self.func(self.instance,fitness)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Recoverflag.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.instance._updated=False\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.result\u52a8\u6001\u76d1\u89c6\u79cd\u7fa4\u7684\u53d8\u5316\u597d\u4e86\u4e0a\u9762\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u63cf\u8ff0\u7b26\u6765\u7f13\u5b58\u51fd\u6570\u8fd4\u56de\u503c\uff0c\u4f46\u662f\u4e00\u65e6\u79cd\u7fa4\u4e0d\u6ee1\u8db3\u4e0a\u8ff0\u7684\u4e09\u4e2a\u6761\u4ef6\u5c31\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u9002\u5e94\u5ea6\u503c\uff0c\u90a3\u6211\u4eec\u5982\u4f55\u76d1\u63a7\u79cd\u7fa4\u7684\u53d8\u5316\u5462\uff1f\u6211\u5728GAPopulation\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u6807\u8bb0_updated\u7528\u4e8e\u6807\u8bb0\u79cd\u7fa4\u662f\u5426\u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316,\u7136\u540e\u6211\u4eec\u7684\u4efb\u52a1\u5c31\u662f\u5728\u5176\u4ed6\u80fd\u591f\u5f71\u54cd\u5230\u79cd\u7fa4\u7684\u5730\u65b9\u8bd5\u56fe\u53bb\u66f4\u65b0\u8fd9\u4e2aflag\u3002\u5982\u4f55\u80fd\u66f4Pythonic\u7684\u66f4\u65b0\u8fd9\u4e2a\u6807\u8bb0\u5462\uff1f\u6240\u8c13\u7684\u79cd\u7fa4\u53d1\u751f\u53d8\u5316\uff0c\u4e5f\u662f\u5c31\u79cd\u7fa4\u4e2d\u7684\u4e2a\u4f53\u5217\u8868\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u79cd\u7fa4\u4e2d\u7684\u4e2a\u4f53\u6211\u90fd\u653e\u5728\u4e86\u4e00\u4e2a\u5217\u8868\u4e2d\uff0c\u6211\u9700\u8981\u76d1\u63a7\u8fd9\u4e2a\u5217\u8868\u662f\u5426\u53d1\u751f\u53d8\u5316\u4ee5\u4fbf\u66f4\u65b0flag\uff0c\u5177\u4f53\u53c8\u662f\u90a3\u4e9b\u53d8\u5316\u5462\uff1f\u5217\u8868\u6574\u4f53\u662f\u5426\u53d1\u751f\u4e86\u53d8\u5316(\u8d4b\u503c\u64cd\u4f5c)\u5217\u8868\u4e2d\u7684\u5143\u7d20\u662f\u5426\u53d1\u751f\u53d8\u5316(\u5bf9\u5217\u8868\u4e2d\u7684\u5143\u7d20\u8d4b\u503c\u64cd\u4f5c\uff0c\u5217\u8868\u7684append,\u00a0extend\u64cd\u4f5c\u7b49)\u597d\u4e86\u6211\u4eec\u8981\u5177\u4f53\u600e\u4e48\u5b9e\u73b0\u5462\uff1f1\uff09\u5bf9\u4e8e\u7b2c\u4e00\u79cd\uff0c\u7531\u4e8ePython\u4e2d\u65e0\u6cd5\u8fdb\u884c\u8d4b\u503c\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u63cf\u8ff0\u7b26\u7684__set__\u6765\u5904\u7406:PythonclassGAIndividuals(object):'''Descriptorforallindividualsinpopulation.'''def__init__(self,name):self.name='_{}'.format(name)def__get__(self,instance,owner):returninstance.__dict__[self.name]def__set__(self,instance,value):instance.__dict__[self.name]=value#Updateflag.instance._updated=True123456789101112classGAIndividuals(object):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0Descriptorforallindividualsinpopulation.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0def__init__(self,name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.name='_{}'.format(name)\u00a0\u00a0\u00a0\u00a0def__get__(self,instance,owner):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returninstance.__dict__[self.name]\u00a0\u00a0\u00a0\u00a0def__set__(self,instance,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0instance.__dict__[self.name]=value\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updateflag.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0instance._updated=True2\uff09\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u5bf9Python\u7684List\u7c7b\u578b\u7684\u76f8\u5e94\u65b9\u6cd5\u8fdb\u884coverride\u4f46\u662f\u561e\uff0c\u5373\u4f7f\u91cd\u5199\u4e86list\u7684\u63a5\u53e3\uff0c\u53c8\u5982\u4f55\u66f4\u65b0population\u4e2d\u7684\u53d8\u91cf\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u7528\u95ed\u5305\u4e86\u3002\u5728GAPopulation\u7684\u6784\u9020\u51fd\u6570__init__\u4e2d\u5b9a\u4e49list\u7684\u6d3e\u751f\u7c7b\uff0c\u5e76\u7acb\u5373\u5b9e\u4f8b\u5316\uff0c\u8fd9\u65f6\u5019\u6d3e\u751f\u7c7b\u7684\u4fbf\u53ef\u4ee5\u83b7\u53d6population\u5bf9\u8c61\u4e86\uff0c\u4e8e\u662fGAPopulation\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u8fd9\u4e9b\u5199:Pythondef__init__(self,indv_template,size=100):#...#Flagformonitoringchangesofpopulation.self._updated=False#Containerforallindividuals.classIndvList(list):'''Aproxyclassinheritedfrombuilt-inlisttocontainallindividualswhichcanupdatethepopulation._updatedflagautomaticallywhenitscontentischanged.'''#NOTE:Use'this'heretoavoidnameconflict.def__init__(this,*args):super(this.__class__,this).__init__(*args)def__setitem__(this,key,value):'''Override__setitem__inbuilt-inlisttype.'''old_value=this[key]ifold_value==value:returnsuper(this.__class__,self).__setitem__(key,value)#Updatepopulationflag.self._updated=Truedefappend(this,item):'''Overrideappendmethodofbuilt-inlisttype.'''super(this.__class__,this).append(item)#Updatepopulationflag.self._updated=Truedefextend(this,iterable_item):ifnotiterable_item:returnsuper(this.__class__,this).extend(iterable_item)#Updatepopulationflag.self._updated=Trueself._individuals=IndvList()1234567891011121314151617181920212223242526272829303132333435363738def__init__(self,indv_template,size=100):\u00a0\u00a0\u00a0\u00a0#...\u00a0\u00a0\u00a0\u00a0#Flagformonitoringchangesofpopulation.\u00a0\u00a0\u00a0\u00a0self._updated=False\u00a0\u00a0\u00a0\u00a0#Containerforallindividuals.\u00a0\u00a0\u00a0\u00a0classIndvList(list):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Aproxyclassinheritedfrombuilt-inlisttocontainall\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0individualswhichcanupdatethepopulation._updatedflag\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0automaticallywhenitscontentischanged.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#NOTE:Use'this'heretoavoidnameconflict.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(this,*args):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(this.__class__,this).__init__(*args)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__setitem__(this,key,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Override__setitem__inbuilt-inlisttype.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0old_value=this[key]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifold_value==value:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(this.__class__,self).__setitem__(key,value)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updatepopulationflag.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self._updated=True\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defappend(this,item):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Overrideappendmethodofbuilt-inlisttype.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(this.__class__,this).append(item)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updatepopulationflag.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self._updated=True\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defextend(this,iterable_item):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnotiterable_item:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0super(this.__class__,this).extend(iterable_item)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updatepopulationflag.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self._updated=True\u00a0\u00a0\u00a0\u00a0self._individuals=IndvList()\u4f18\u5316\u6548\u679c\u901a\u8fc7\u4e0a\u9762\u5bf9\u4ee3\u7801\u7684\u4f18\u5316\uff0c\u6211\u4eec\u770b\u770b\u6211\u4eec\u4f18\u5316\u7684\u6548\u679c\u5982\u4f55\uff0c\u4f7f\u7528\u5206\u6790\u63cf\u8ff0\u7b26\u6765\u5206\u6790GAEngine.run\u8dd1\u4e00\u4ee3\u79cd\u7fa4\u7684\u60c5\u51b5\uff0c\u5176\u4e2d\u79cd\u7fa4\u5927\u5c0f\u4e3a10\u3002\u5982\u4e0b\u56fe\u4e3acProfile\u751f\u6210\u7684\u5206\u6790\u62a5\u544a\u5bf9\u6bd4:\u53ef\u4ee5\u770b\u5230\u4f18\u5316\u540e\u7684\u8dd1\u4e00\u4ee3\u79cd\u7fa4\u7684\u65f6\u95f4\u7f29\u77ed\u4e3a\u5c06\u8fd1\u539f\u6765\u76841/7!\u4f18\u5316\u6548\u679c\u8fd8\u662f\u5f88\u660e\u663e\u7684\u3002\u7136\u540e\u770b\u4e00\u770b\u8c03\u7528\u5173\u7cfb\u56fe:energy_fitness\u7684\u8c03\u7528\u6b21\u6570\u4ece3807\u964d\u5230\u4e86621\u6b21\uff01\u603b\u7ed3\u672c\u6587\u8bb0\u5f55\u4e86\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u7684\u4e00\u6b21profiling\u548c\u4f18\u5316\u8fc7\u7a0b\uff0c\u901a\u8fc7\u7f13\u5b58\u503c\u7684\u65b9\u5f0f\u6781\u5927\u7684\u51cf\u5c11\u4e86\u9002\u503c\u51fd\u6570\u7684\u8c03\u7528\u6b21\u6570\uff0c\u5728\u65f6\u95f4\u4e0a\uff0c\u8dd1\u4e00\u4ee3\u79cd\u7fa4\u7684\u6548\u7387\u63d0\u5347\u4e867\u500d\u5de6\u53f3\u3002\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff011\u8d5e4\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["Python \u751f\u6210\u5668\u539f\u7406\u8be6\u89e3"], "art_url": ["http://python.jobbole.com/88677/"], "art_create_time": ["2017/10/12"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/10/ec54f06aac31a0fd6546af075530a578.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aMichaelDiBernardo\u00a0\u00a0\u00a0\u8bd1\u6587\u51fa\u5904\uff1a\u4f60\u9017\u6bd4\u00a0\u00a0\u00a0\u8fd9\u7bc7\u6587\u7ae0\u662f\u5bf9500LinesorLess\u4e00\u4e66\u4e2d\u9ad8\u6548\u722c\u866b\u4e00\u7ae0\u7684\u90e8\u5206\u7ffb\u8bd1\uff0c\u539f\u6587\u5728\u6b64->HowPythonGeneratorsWork\u3002\u5efa\u8bae\u7ed3\u5408\u300a\u6d41\u7545\u7684Python\u300b\u98df\u7528\u3002\u5728\u638c\u63e1Python\u751f\u6210\u5668\u4e4b\u524d\uff0c\u4f60\u5fc5\u987b\u4e86\u89e3\u5e38\u89c4Python\u51fd\u6570\u7684\u5de5\u4f5c\u539f\u7406\u3002\u901a\u5e38\uff0c\u5f53\u4e00\u4e2aPython\u51fd\u6570\u8c03\u7528\u5b50\u7a0b\u5e8f\uff08subroutine\uff09\u65f6\uff0c\u8fd9\u4e2a\u5b50\u7a0b\u5e8f\u5c06\u4e00\u76f4\u6301\u6709\u63a7\u5236\u6743\uff0c\u53ea\u6709\u5f53\u5b50\u7a0b\u5e8f\u7ed3\u675f\uff08\u8fd4\u56de\u6216\u8005\u629b\u51fa\u5f02\u5e38\uff09\u540e\uff0c\u63a7\u5236\u6743\u624d\u8fd8\u7ed9\u8c03\u7528\u8005\uff1aPython>>>deffoo():...bar()...>>>defbar():...pass12345>>>deffoo():...\u00a0\u00a0\u00a0\u00a0bar()...>>>defbar():...\u00a0\u00a0\u00a0\u00a0pass\u6807\u51c6\u7684Python\u89e3\u91ca\u5668\u662f\u7528C\u5199\u7684\u3002\u89e3\u91ca\u5668\u7528\u4e00\u4e2a\u53eb\u505aPyEval_EvalFrameEx\u7684C\u51fd\u6570\u6765\u6267\u884cPython\u51fd\u6570\u3002\u5b83\u63a5\u53d7\u4e00\u4e2aPython\u7684\u5806\u6808\u5e27\uff08stackframe\uff09\u5bf9\u8c61\uff0c\u5e76\u5728\u8fd9\u4e2a\u5806\u6808\u5e27\u7684\u4e0a\u4e0b\u6587\u4e2d\u6267\u884cPython\u5b57\u8282\u7801\u3002\u8fd9\u662ffoo\u7684\u5b57\u8282\u7801\uff1aPython>>>importdis>>>dis.dis(foo)20LOAD_GLOBAL0(bar)3CALL_FUNCTION0(0positional,0keywordpair)6POP_TOP7LOAD_CONST0(None)10RETURN_VALUE1234567>>>importdis>>>dis.dis(foo)\u00a0\u00a02\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00LOAD_GLOBAL\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00(bar)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a03CALL_FUNCTION\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00(0positional,0keywordpair)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a06POP_TOP\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07LOAD_CONST\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00(None)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a010RETURN_VALUEfoo\u51fd\u6570\u5c06bar\u52a0\u8f7d\u5230\u5806\u6808\u4e2d\u5e76\u8c03\u7528\u5b83\uff0c\u7136\u540e\u4ece\u5806\u6808\u4e2d\u5f39\u51fa\u8fd4\u56de\u503c\uff0c\u6700\u540e\u52a0\u8f7d\u5e76\u8fd4\u56deNone\u3002\u5f53PyEval_EvalFrameEx\u9047\u5230CALL_FUNCTION\u5b57\u8282\u7801\u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Python\u5806\u6808\u5e27\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u65b0\u7684\u5e27\u4f5c\u4e3a\u53c2\u6570\u9012\u5f52\u8c03\u7528PyEval_EvalFrameEx\u6765\u6267\u884cbar\u3002Python\u7684\u5806\u6808\u5e27\u662f\u5206\u914d\u5728\u5806\u5185\u5b58\u4e2d\u7684\uff0c\u7406\u89e3\u8fd9\u4e00\u70b9\u975e\u5e38\u91cd\u8981\uff01Python\u89e3\u91ca\u5668\u662f\u4e2a\u666e\u901a\u7684C\u7a0b\u5e8f\uff0c\u6240\u4ee5\u5b83\u7684\u5806\u6808\u5e27\u5c31\u662f\u666e\u901a\u7684\u5806\u6808\u3002\u4f46\u662f\u5b83\u64cd\u4f5c\u7684Python\u5806\u6808\u5e27\u662f\u5728\u5806\u4e0a\u7684\u3002\u9664\u4e86\u5176\u4ed6\u60ca\u559c\u4e4b\u5916\uff0c\u8fd9\u610f\u5473\u7740Python\u7684\u5806\u6808\u5e27\u53ef\u4ee5\u5728\u5b83\u7684\u8c03\u7528\u4e4b\u5916\u5b58\u6d3b\u3002(FIXME:\u53ef\u4ee5\u5728\u5b83\u8c03\u7528\u7ed3\u675f\u540e\u5b58\u6d3b)\u3002\u8981\u4ee5\u4ea4\u4e92\u65b9\u5f0f\u67e5\u770b\uff0c\u8bf7\u4ecebar\u5185\u4fdd\u5b58\u5f53\u524d\u5e27\uff1aPython>>>importinspect>>>frame=None>>>deffoo():...bar()...>>>defbar():...globalframe...frame=inspect.currentframe()...>>>foo()>>>#Theframewasexecutingthecodefor'bar'.>>>frame.f_code.co_name'bar'>>>#Itsbackpointerreferstot>>>defbar():...globalframe...frame=inspect.currentframe()heframefor'foo'.>>>caller_frame=frame.f_back>>>caller_frame.f_code.co_name'foo'1234567891011121314151617181920>>>importinspect>>>frame=None>>>deffoo():...\u00a0\u00a0\u00a0\u00a0bar()...>>>defbar():...\u00a0\u00a0\u00a0\u00a0globalframe...\u00a0\u00a0\u00a0\u00a0frame=inspect.currentframe()...>>>foo()>>>#Theframewasexecutingthecodefor'bar'.>>>frame.f_code.co_name'bar'>>>#Itsbackpointerreferstot>>>defbar():...\u00a0\u00a0\u00a0\u00a0globalframe...\u00a0\u00a0\u00a0\u00a0frame=inspect.currentframe()heframefor'foo'.>>>caller_frame=frame.f_back>>>caller_frame.f_code.co_name'foo'\u73b0\u5728\u8fd9\u9879\u6280\u672f\u88ab\u7528\u5230\u4e86Python\u751f\u6210\u5668\uff08generator\uff09\u4e0a\u2014\u2014\u4f7f\u7528\u4ee3\u7801\u5bf9\u8c61\u548c\u5806\u6808\u5e27\u8fd9\u4e9b\u76f8\u540c\u7684\u7ec4\u4ef6\u6765\u4ea7\u751f\u5947\u5999\u7684\u6548\u679c\u3002\u8fd9\u662f\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\uff08generatorfunction\uff09\uff1aPython>>>defgen_fn():...result=yield1...print('resultofyield:{}'.format(result))...result2=yield2...print('resultof2ndyield:{}'.format(result2))...return'done'...1234567>>>defgen_fn():...\u00a0\u00a0\u00a0\u00a0result=yield1...\u00a0\u00a0\u00a0\u00a0print('resultofyield:{}'.format(result))...\u00a0\u00a0\u00a0\u00a0result2=yield2...\u00a0\u00a0\u00a0\u00a0print('resultof2ndyield:{}'.format(result2))...\u00a0\u00a0\u00a0\u00a0return'done'...\u5f53Python\u5c06gen_fn\u7f16\u8bd1\u4e3a\u5b57\u8282\u7801\u65f6\uff0c\u5b83\u4f1a\u770b\u5230yield\u8bed\u53e5\uff0c\u7136\u540e\u77e5\u9053gen_fn\u662f\u4e2a\u751f\u6210\u5668\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u666e\u901a\u51fd\u6570\u3002\u5b83\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u6807\u5fd7\u6765\u8bb0\u4f4f\u8fd9\u4e2a\u4e8b\u5b9e\uff1aPython>>>#Thegeneratorflagisbitposition5.>>>generator_bit=1<<5>>>bool(gen_fn.__code__.co_flags&generator_bit)True1234>>>#Thegeneratorflagisbitposition5.>>>generator_bit=1<<5>>>bool(gen_fn.__code__.co_flags&generator_bit)True\u5f53\u4f60\u8c03\u7528\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\u65f6\uff0cPython\u4f1a\u770b\u5230\u751f\u6210\u5668\u6807\u5fd7\uff0c\u5b9e\u9645\u4e0a\u5e76\u4e0d\u8fd0\u884c\u8be5\u51fd\u6570\uff0c\u800c\u662f\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\uff08generator\uff09\uff1aPython>>>gen=gen_fn()>>>type(gen)<class'generator'>123>>>gen=gen_fn()>>>type(gen)<class'generator'>Python\u751f\u6210\u5668\u5c01\u88c5\u4e86\u4e00\u4e2a\u5806\u6808\u5e27\u548c\u4e00\u4e2a\u5bf9\u751f\u6210\u5668\u51fd\u6570\u4ee3\u7801\u7684\u5f15\u7528\uff0c\u5728\u8fd9\u91cc\u5c31\u662f\u5bf9gen_fn\u51fd\u6570\u4f53\u7684\u5f15\u7528\uff1aPython>>>gen.gi_code.co_name'gen_fn'12>>>gen.gi_code.co_name'gen_fn'\u8c03\u7528gen_fn\u4ea7\u751f\u7684\u6240\u6709\u751f\u6210\u5668\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u4ee3\u7801\u5bf9\u8c61\uff0c\u4f46\u662f\u6bcf\u4e2a\u90fd\u6709\u81ea\u5df1\u7684\u5806\u6808\u5e27\u3002\u8fd9\u4e2a\u5806\u6808\u5e27\u5e76\u4e0d\u5b58\u5728\u4e8e\u5b9e\u9645\u7684\u5806\u6808\u4e0a\uff0c\u5b83\u5728\u5806\u5185\u5b58\u4e0a\u7b49\u5f85\u7740\u88ab\u4f7f\u7528\u5806\u6808\u5e27\u6709\u4e2a\u201clastinstruction\u201d(FIXME:translatethisornot?)\u6307\u9488\uff0c\u6307\u5411\u6700\u8fd1\u6267\u884c\u7684\u90a3\u6761\u6307\u4ee4\u3002\u521a\u5f00\u59cb\u7684\u65f6\u5019lastinstruction\u6307\u9488\u662f-1\uff0c\u610f\u5473\u7740\u751f\u6210\u5668\u5c1a\u672a\u5f00\u59cb\uff1aPython>>>gen.gi_frame.f_lasti-112>>>gen.gi_frame.f_lasti-1\u5f53\u6211\u4eec\u8c03\u7528send\u65f6\uff0c\u751f\u6210\u5668\u8fbe\u5230\u7b2c\u4e00\u4e2ayield\u5904\u7136\u540e\u6682\u505c\u6267\u884c\u3002send\u7684\u8fd4\u56de\u503c\u662f1\uff0c\u8fd9\u662f\u56e0\u4e3agen\u628a1\u4f20\u7ed9\u4e86yield\u8868\u8fbe\u5f0f\uff1aPython>>>gen.send(None)112>>>gen.send(None)1\u73b0\u5728\u751f\u6210\u5668\u7684\u6307\u4ee4\u6307\u9488\uff08instructionpointer\uff09\u5411\u524d\u79fb\u52a8\u4e863\u4e2a\u5b57\u8282\u7801\uff0c\u8fd9\u4e9b\u662f\u7f16\u8bd1\u597d\u768456\u5b57\u8282\u7684Python\u4ee3\u7801\u7684\u4e00\u90e8\u5206\uff1aPython>>>gen.gi_frame.f_lasti3>>>len(gen.gi_code.co_code)561234>>>gen.gi_frame.f_lasti3>>>len(gen.gi_code.co_code)56\u751f\u6210\u5668\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u88ab\u4efb\u4f55\u51fd\u6570\u6062\u590d\u6267\u884c\uff0c\u56e0\u4e3a\u5b83\u7684\u5806\u6808\u5e27\u5b9e\u9645\u4e0a\u4e0d\u5728\u5806\u6808\u4e0a\u2014\u2014\u5b83\u5728\u5806\uff08\u5185\u5b58\uff09\u4e0a\u3002\u751f\u6210\u5668\u5728\u8c03\u7528\u8c03\u7528\u5c42\u6b21\u7ed3\u6784\u4e2d\u7684\u4f4d\u7f6e\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u5b83\u4e0d\u9700\u8981\u9075\u5faa\u5e38\u89c4\u51fd\u6570\u6267\u884c\u65f6\u9075\u5faa\u7684\u5148\u8fdb\u540e\u51fa\u987a\u5e8f\u3002\u751f\u6210\u5668\u88ab\u662f\u88ab\u89e3\u653e\u4e86\u7684\uff0c\u5b83\u50cf\u4e91\u4e00\u6837\u6d6e\u52a8\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u201chello\u201d\u53d1\u9001\u5230\u8fd9\u4e2a\u751f\u6210\u5668\u4e2d\uff0c\u5b83\u4f1a\u6210\u4e3ayield\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u7136\u540e\u751f\u6210\u5668\u4f1a\u7ee7\u7eed\u6267\u884c\uff0c\u76f4\u5230\u4ea7\u51fa\uff08yield\uff09\u4e862\uff1aPython>>>gen.send('hello')resultofyield:hello2123>>>gen.send('hello')resultofyield:hello2\u73b0\u5728\u8fd9\u4e2a\u751f\u6210\u5668\u7684\u5806\u6808\u5e27\u5305\u542b\u5c40\u90e8\u53d8\u91cfresult\uff1aPython>>>gen.gi_frame.f_locals{'result':'hello'}12>>>gen.gi_frame.f_locals{'result':'hello'}\u4ecegen_fn\u521b\u5efa\u7684\u5176\u4ed6\u751f\u6210\u5668\u5c06\u5177\u6709\u81ea\u5df1\u7684\u5806\u6808\u5e27\u548c\u5c40\u90e8\u53d8\u91cf\u3002\u5f53\u6211\u4eec\u518d\u6b21\u8c03\u7528send\u65f6\uff0c\u751f\u6210\u5668\u5c06\u4ece\u5b83\u7b2c\u4e8c\u4e2ayield\u5904\u7ee7\u7eed\u6267\u884c\uff0c\u7136\u540e\u4ee5\u4ea7\u751f\u7279\u6b8a\u5f02\u5e38StopIteration\u7ed3\u675f\uff1aPython>>>gen.send('goodbye')resultof2ndyield:goodbyeTraceback(mostrecentcalllast):File\"<input>\",line1,in<module>StopIteration:done12345>>>gen.send('goodbye')resultof2ndyield:goodbyeTraceback(mostrecentcalllast):\u00a0\u00a0\u00a0\u00a0File\"<input>\",line1,in<module>StopIteration:done\u5f02\u5e38\u6709\u4e00\u4e2a\u503c\uff0c\u5b83\u662f\u90a3\u4e2a\u751f\u6210\u5668\u7684\u8fd4\u56de\u503c\uff1a\u5b57\u7b26\u4e32\u201cdone\u201d\u30021\u8d5e4\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u6bcf\u4e2a\u7a0b\u5e8f\u5458\u90fd\u5e94\u8be5\u5b66\u4e60\u4f7f\u7528Python\u6216Ruby"], "art_url": ["http://python.jobbole.com/1141/"], "art_create_time": ["2011/07/25"], "art_img": ["/wp-content/uploads/vb/1141-thumb_python1.png"], "art_content": ["\u5982\u679c\u4f60\u662f\u4e2a\u5b66\u751f\uff0c\u4f60\u5e94\u8be5\u4f1aC\uff0cC++\u548cJava\u3002\u8fd8\u4f1a\u4e00\u4e9bVB\uff0c\u6216C#/.NET\u3002\u591a\u5c11\u4f60\u8fd8\u53ef\u80fd\u5f00\u53d1\u8fc7\u4e00\u4e9bWeb\u7f51\u9875\uff0c\u4f60\u77e5\u9053\u4e00\u4e9bHTML\uff0cCSS\u548cJavaScript\u77e5\u8bc6\u3002\u603b\u4f53\u4e0a\u8bf4\uff0c\u6211\u4eec\u5f88\u96be\u53d1\u73b0\u4f1a\u6709\u5b66\u751f\u663e\u9732\u51fa\u638c\u63e1\u8d85\u51fa\u8fd9\u51e0\u79cd\u8bed\u8a00\u8303\u56f4\u5916\u7684\u8bed\u8a00\u7684\u624d\u80fd\u3002\u8fd9\u771f\u8ba9\u4eba\u9057\u61be\uff0c\u56e0\u4e3a\u8fd8\u6709\u5f88\u591a\u79cd\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u4eec\u80fd\u8ba9\u4f60\u6210\u4e3a\u4e00\u4e2a\u66f4\u597d\u7684\u7a0b\u5e8f\u5458\u3002\u5728\u8fd9\u7bc7\u6587\u7ae0\u91cc\uff0c\u6211\u5c06\u4f1a\u544a\u8bc9\u4f60\uff0c\u4e3a\u4ec0\u4e48\u4f60\u4e00\u5b9a\u8981\u5b66\u4e60Python\u6216Ruby\u8bed\u8a00\u3002\u8ddfC/C++/Java\u76f8\u6bd4\u2014Python/Ruby\u80fd\u8ba9\u4f60\u7528\u5c11\u7684\u591a\u7684\u591a\u7684\u4ee3\u7801\u5199\u51fa\u76f8\u540c\u7684\u7a0b\u5e8f\u3002\u6709\u4eba\u8ba1\u7b97\u8fc7\uff0cPython\u6216Ruby\u5199\u51fa\u7684\u7a0b\u5e8f\u7684\u4ee3\u7801\u884c\u6570\u53ea\u76f8\u5f53\u4e8e\u76f8\u5bf9\u5e94\u7684Java\u4ee3\u7801\u7684\u884c\u6570\u7684\u4e94\u5206\u4e4b\u4e00\u3002\u5982\u679c\u6ca1\u6709\u7edd\u5bf9\u7684\u5fc5\u8981\uff0c\u4e3a\u4ec0\u4e48\u8981\u82b1\u8fd9\u4e48\u591a\u65f6\u95f4\u5199\u51fa\u8fd9\u4e48\u591a\u7684\u4ee3\u7801\u5462\uff1f\u800c\u4e14\u6709\u4eba\u8bf4\uff0c\u4e00\u4e2a\u4f18\u79c0\u7684\u7a0b\u5e8f\u5458\u80fd\u7ef4\u62a4\u7684\u4ee3\u7801\u91cf\u6700\u591a\u662f2\u4e07\u884c\u3002\u8fd9\u4e0d\u533a\u5206\u7528\u7684\u8bed\u8a00\u7a76\u7adf\u662f\u6c47\u7f16\uff0cC\u8fd8\u662fPython/Ruby/PHP/Lisp\u3002\u6240\u4ee5\uff0c\u5982\u679c\u4f60\u7528Python/Ruby\u5199\uff0c\u4f60\u4e00\u4e2a\u4eba\u5e72\u7684\uff0c\u4e0d\u7ba1\u662f\u5e72\u4ec0\u4e48\uff0c\u5982\u679c\u6362\u7528Java/C/C++\uff0c\u90a3\u90fd\u9700\u8981\u4e00\u4e2a5\u4eba\u7684\u5c0f\u56e2\u961f\u6765\u5e72\u3002\u8ddfVB/PHP\u6bd4\u8f83\u2014\u8ddfPHP/VB\u76f8\u6bd4\uff0cPython/Ruby\u7684\u662f\u4e00\u79cd\u4ece\u8bbe\u8ba1\u4e0a\u8bb2\u6bd4\u5b83\u4eec\u597d\u7684\u4e0d\u77e5\u591a\u5c11\u500d\u7684\u8bed\u8a00\u3002PHP\u548cVB\u5206\u522b\u662f\u5728\u5f00\u53d1\u7f51\u7ad9\u548c\u684c\u9762\u5e94\u7528\u7a0b\u5e8f\u4e0a\u975e\u5e38\u6d41\u884c\u7684\u8bed\u8a00\u3002\u5b83\u4eec\u6d41\u884c\u7684\u539f\u56e0\u662f\u975e\u5e38\u7684\u6613\u5b66\u3002\u4e0d\u61c2\u8ba1\u7b97\u673a\u7684\u4eba\u4e5f\u5f88\u5bb9\u6613\u7684\u4e0a\u624b\u3002\u5982\u679c\u4f60\u7528\u8fd9\u4e9b\u8bed\u8a00\u5f00\u53d1\u8fc7\u5927\u578b\u7684\u9879\u76ee\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u8bed\u8a00\u7684\u8bbe\u8ba1\u662f\u5982\u6b64\u7684\u7cdf\u7cd5\u3002\u662f\u670b\u53cb\uff0c\u4ed6\u5c31\u4e0d\u4f1a\u529d\u4f60\u4f7f\u7528PHP/VB\u3002\u8ddfLisp/Scala/Haskell/Closure/Erlang\u76f8\u6bd4\u2014Python/Ruby\u8ddf\u5b83\u4eec\u6bd4\u8d77\u6765\u663e\u5f97\u76f8\u5f53\u7684\u201c\u4e3b\u6d41\u201d\u3002\u786e\u5b9e\uff0c\u8fd9\u4e9b\u8bed\u8a00\u6bcf\u79cd\u90fd\u6709\u5176\u5f88\u9177\u7684\u7279\u5f81\uff0c\u5bf9\u4e8e\u9ad8\u7ea7\u7f16\u7a0b\u4eba\u5458\uff0c\u4e86\u89e3\u8fd9\u4e9b\u8bed\u8a00\u80fd\u7ed9\u4ed6\u4eec\u5bf9\u7f16\u7a0b\u7684\u601d\u8003\u5e26\u6765\u5b9e\u9645\u7684\u63d0\u5347\u3002\u4f46\u8fd9\u4e9b\u5e94\u8be5\u5728\u4f60\u4ee5\u540e\u7684\u804c\u4e1a\u751f\u6daf\u4e2d\u624d\u53bb\u51b3\u5b9a\u5b66\u54ea\u4e00\u4e24\u79cd\u3002\u5bf9\u4e8e\u73b0\u5728\uff0cPython/Ruby\u662f\u5728\u8bed\u8a00\u529f\u80fd\u548c\u5b9e\u9645\u8fd0\u7528\u4e4b\u95f4\u5e73\u8861\u540e\u7684\u66f4\u597d\u7684\u9009\u62e9\u3002\u8ddfPerl\u76f8\u6bd4\u2014Python\u548cRuby\u90fd\u53d7\u6069\u4e8ePerl\uff0c\u5728\u8fd9\u4e24\u79cd\u8bed\u8a00\u5f02\u519b\u7a81\u8d77\u524d\uff0cPerl\u662f\u6700\u597d\u3001\u6700\u5927\u7684\u4e00\u79cd\u52a8\u6001\u8bed\u8a00\u3002\u4f46\u73b0\u5728\uff0cPerl\u5df2\u662f\u6628\u65e5\u9ec4\u82b1\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\u8f6c\u5411Ruby/Python\u3002\u6211\u611f\u89c9Perl\u7684\u9762\u5411\u5bf9\u8c61\u673a\u5236\u6709\u70b9\u505a\u4f5c\uff0c\u5f88\u4e0d\u597d\u7528\u3002\u901a\u5e38\u8ba4\u4e3a\uff0cPerl\u4e00\u79cd\u6bd4\u8f83\u96be\u5b66\u7684\u8bed\u8a00\uff0c\u56e0\u4e3a\u5b83\u63d0\u4f9b\u4f60\u4e86\u592a\u591a\u4e0d\u540c\u7684\u65b9\u6cd5\u53bb\u5b8c\u6210\u540c\u4e00\u4e2a\u4efb\u52a1\uff0c\u5b83\u7684\u8bed\u6cd5\u6709\u70b9\u50cf\u5bc6\u7801\uff0c\u975e\u5e38\u4e0d\u76f4\u89c2\u2014\u9664\u975e\u4f60\u5bf9\u5b83\u638c\u63e1\u7684\u975e\u5e38\u597d\u3002\u603b\u4e4b\uff0c\u6211\u611f\u89c9Perl\u662f\u4e00\u79cd\u5bf9\u4e8e\u5b66\u751f\u6765\u8bf4\u4e0d\u662f\u5f88\u5408\u9002\u7684\u8bed\u8a00\u2014\u9664\u975e\u4f60\u6709\u7279\u6b8a\u7684\u7406\u7531\u53bb\u5b66\u5b83(\u4f8b\u5982\uff0c\u4f60\u6709\u5f88\u591a\u6b63\u5219\u8868\u8fbe\u5f0f\u8981\u5904\u7406\uff0c\u8fd9\u662fPerl\u7684\u95ea\u5149\u70b9)\u3002\u8ddfsh/sed/awk/bash\u76f8\u6bd4\u2014\u5982\u679c\u4f60\u4f7f\u7528Linux/Unix\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u505a\u4e00\u4e9bshell\u7f16\u7a0b\uff0c\u751a\u81f3\u4f1a\u7f16\u5199\u4e00\u4e9b\u4e0d\u5c0f\u7684\u7a0b\u5e8f\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u8bed\u8a00\uff0c\u4e00\u65e6\u7a0b\u5e8f\u8fbe\u5230\u4e00\u5b9a\u7684\u884c\u6570\uff0c\u4e8b\u60c5\u5c31\u4f1a\u5f00\u59cb\u53d8\u5f97\u8ba9\u4f60\u75db\u82e6\u4e0d\u582a\uff0c\u4f60\u6700\u597d\u662f\u7528Python\u53bb\u505a\u8fd9\u4e9b\u4e8b\u60c5\u3002\u5f53\u7136\uff0c\u505a\u8fd9\u79cd\u4e8b\u60c5\uff0cPerl\u662f\u6700\u597d\u7684\u9009\u62e9\uff0cPython\u6392\u7b2c\u4e8c\u3002(Ruby\u5bf9\u4e8e\u7cfb\u7edfshell\u811a\u672c\u4e0d\u662f\u5f88\u5408\u9002)\u3002\u4f60\u53ef\u4ee5\u5728Google\u4e0a\u641c\u4e00\u4e0b\u201c\u4e3a\u4ec0\u4e48X\u6bd4Y\u597d\u201d\u2014\u5176\u4e2d\u628aX\u6362\u6210Python\u6216Ruby\uff0c\u628aY\u6362\u6210\u53e6\u5916\u4e00\u79cd\u8bed\u8a00\u2014\u4f60\u5c31\u4f1a\u53d1\u73b0\uff0c\u6709\u65e0\u6570\u7684\u6587\u7ae0\u6765\u8bf4\u660e\u5b83\u4eec\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u597d\u3002\u5982\u679c\u4f60\u6709\u9009\u62e9\u4f60\u7684\u6bd5\u4e1a\u8bbe\u8ba1\u4f7f\u7528\u7684\u7f16\u7a0b\u8bed\u8a00\u7684\u81ea\u7531\uff0c\u4f60\u5e94\u8be5\u9009\u62e9Python\u6216Ruby\uff0c\u5b83\u4eec\u80fd\u8ba9\u4f60\u5728\u5f00\u53d1\u9879\u76ee\u7684\u8fc7\u7a0b\u4e2d\u8282\u7701\u4e00\u534a\u7684\u65f6\u95f4(\u9664\u975e\u4f60\u8981\u5f00\u53d1\u7684\u662f\u79fb\u52a8\u5e94\u7528\uff0c\u8fd9\u6837\u4f60\u5fc5\u987b\u8981\u4f7f\u7528Java\u6216Objective-C)\u3002\u4e0b\u9762\u662fxkcd\u4e0a\u7684\u4e00\u5e45\u6f2b\u753b\uff0c\u544a\u8bc9\u4f60\u638c\u63e1Python\u540e\u4f60\u4f1a\u53d8\u5f97\u591a\u4e48\u7684\u5f3a\u5927\uff1a\u5982\u4f55\u53bb\u5b66\u5b83\u4eec\u5462\uff1f\u5f88\u591a\u5f88\u591a\u7684\u7f51\u7ad9\u4e0a\u90fd\u63d0\u4f9b\u4e86\u5b66\u4e60Python\u548cRuby\u7684\u6559\u6750\u548c\u8bfe\u7a0b\u3002\u4e0b\u9762\u7684\u662f\u6211\u4ece\u4e2d\u9009\u51fa\u7684\u4e00\u4e9b\uff1a\u8c37\u6b4c\u7684Python\u8bfe\u7a0b\uff0c\u5b66\u4e60Python\u7684\u597d\u8d44\u6e90\u3002RubyLearning\uff0c\u5b66\u4e60Ruby\u7684\u4e00\u4e2a\u597d\u7f51\u7ad9\u3002\u6709\u7591\u95ee\u5417\uff1f\u8bf7\u5728\u8bc4\u8bba\u4e86\u5199\u51fa\u6765\uff0c\u6211\u4f1a\u5c3d\u91cf\u56de\u7b54\u4f60\u4eec\u3002\u5c3e\u6ce8\uff1a1\uff1a\u6211\u7684\u8fd9\u7bc7\u6587\u7ae0\u53ef\u80fd\u4f1a\u8ba9\u5f88\u591aPerl\u7231\u597d\u8005\u5f88\u90c1\u95f7\uff0c\u73b0\u5728\u56de\u5473\u4e00\u4e0b\uff0c\u6211\u8ba4\u8bc6\u5230\u5bf9\u8fd9\u79cd\u8bed\u8a00\u7684\u8981\u6c42\u8fc7\u4e8e\u82db\u523b\u4e86\u3002\u56e0\u6b64\uff0c\u6211\u628a\u5173\u4e8ePerl\u7684\u4e00\u8282\u6539\u5199\u4e86\u4e00\u4e0b\u3002Python\u548cRuby\u90fd\u53d7\u6069\u4e8ePerl\uff0c\u5728\u8fd9\u4e24\u79cd\u8bed\u8a00\u51fa\u73b0\u4e4b\u524d\uff0cPerl\u662f\u6700\u5927\u3001\u6700\u597d\u7684\u52a8\u6001\u8bed\u8a00\u3002\u4f46Perl\u73b0\u5728\u592a\u8001\u4e86\u3002\u5b83\u7684\u9762\u5411\u5bf9\u8c61\u6027\u4e0d\u5b8c\u6574\u3002\u5b83\u5f88\u4e45\u6ca1\u6709\u5347\u7ea7\u66f4\u65b0\u4e86\uff0c\u5b83\u7684\u5e02\u573a\u4efd\u989d\u6b63\u5728\u4e22\u5931\u3002\u5bf9\u4e8e\u4e00\u4e9b\u65b0\u7684\u3001\u5f88\u706b\u7684\u4e8b\u7269(\u4f8b\u5982Web\u7f16\u7a0b\u6846\u67b6\uff0cWebAPI)\uff0c\u5b83\u4e0d\u5982Python&Ruby\u90a3\u6837\u80fd\u8ddf\u4e0a\u65f6\u4ee3\u7684\u6b65\u4f10\u3002\u57fa\u672c\u4e0a\uff0cPython/Ruby\u5728\u5174\u8d77\uff0cPerl\u5728\u8870\u9000\u30022\uff1a\u672c\u6587\u4e2d\u7684\u6240\u6709\u8bed\u8a00\u7684\u6bd4\u8f83\u90fd\u662f\u7528\u6765\u7ed9\u5370\u5ea6\u8ba1\u7b97\u673a\u79d1\u5b66\u4e13\u4e1a\u7684\u5b66\u751f\u9009\u7f16\u7a0b\u8bed\u8a00\u65f6\u505a\u53c2\u8003\u7684\u3002\u50cf\u201cX\u6bd4Y\u597d\u201d\u8fd9\u6837\u7684\u53e5\u5b50\u51c6\u786e\u7684\u8bb2\u662f\u6beb\u65e0\u610f\u4e49\u7684\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u8bed\u8a00\u90fd\u662f\u7ecf\u8fc7\u65f6\u95f4\u7684\u8003\u9a8c\u800c\u5b58\u6d3b\u4e0b\u6765\u7684\uff0c\u6709\u4e9b\u8bed\u8a00\u4f1a\u5728\u67d0\u4e9b\u9886\u57df\u6bd4\u53e6\u5916\u4e00\u79cd\u8981\u5f3a\uff0c\u8fd9\u4e5f\u662f\u5b83\u4eec\u5b58\u6d3b\u4e0b\u6765\u7684\u539f\u56e0\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u603b\u6709\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0cPHP/Java/C/C++/Perl\u770b\u8d77\u6765\u4f1a\u6bd4Ruby/Python\u7b49\u5176\u5b83\u8bed\u8a00\u663e\u7684\u66f4\u9002\u5408\u3002\u8bd1\u6587\uff1a\u5916\u520aIT\u8bc4\u8bba\u3000\u3000\u539f\u6587\uff1areliscore1\u8d5e\u6536\u85cf3\u8bc4\u8bba"]},
{"art_title": ["\u6700\u4ee4\u4eba\u5934\u75bc\u7684Python\u95ee\u9898"], "art_url": ["http://python.jobbole.com/88673/"], "art_create_time": ["2017/10/13"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-Coureur\u7ffb\u8bd1\uff0c\u827e\u51cc\u98ce\u6821\u7a3f\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1aJeffKnupp\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002Python\u4e2d\u7531\u4e8e\u4f7f\u7528\u4e86\u5168\u5c40\u89e3\u91ca\u9501\uff08GIL\uff09\u7684\u539f\u56e0\uff0c\u4ee3\u7801\u5e76\u4e0d\u80fd\u540c\u65f6\u5728\u591a\u6838\u4e0a\u5e76\u53d1\u7684\u8fd0\u884c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cPython\u7684\u591a\u7ebf\u7a0b\u4e0d\u80fd\u5e76\u53d1\uff0c\u5f88\u591a\u4eba\u4f1a\u53d1\u73b0\u4f7f\u7528\u591a\u7ebf\u7a0b\u6765\u6539\u8fdb\u81ea\u5df1\u7684Python\u4ee3\u7801\u540e\uff0c\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\u5374\u4e0b\u964d\u4e86\u3002\u8fd9\u7bc7\u6587\u7ae0\u5bf9Python\u4e2d\u7684\u5168\u5c40\u89e3\u91ca\u9501\uff08GIL\uff09\u8fdb\u884c\u4e86\u4ecb\u7ecd\u3002\u4f5c\u8005\u8ba4\u4e3a\u8fd9\u662fPython\u4e2d\u6700\u4ee4\u4eba\u5934\u75bc\u7684\u95ee\u9898\u3002\u5341\u5e74\u591a\u5e74\u6765\uff0cPython\u7684\u5168\u5c40\u89e3\u91ca\u5668\u9501\uff08GIL\uff09\u7ed9\u65b0\u624b\u548c\u4e13\u5bb6\u4eec\u5e26\u6765\u4e86\u5de8\u5927\u7684\u632b\u6298\u611f\u548c\u597d\u5947\u5fc3\u3002\u60ac\u800c\u672a\u51b3\u7684\u95ee\u9898\u6bcf\u4e2a\u9886\u57df\u90fd\u4f1a\u6709\u8fd9\u4e48\u4e00\u4e2a\u95ee\u9898\uff1a\u5b83\u96be\u5ea6\u5927\u3001\u8017\u65f6\u591a\uff0c\u4ec5\u4ec5\u662f\u5c1d\u8bd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u90fd\u4f1a\u8ba9\u4eba\u9707\u60ca\u3002\u6574\u4e2a\u793e\u533a\u5728\u5f88\u4e45\u4ee5\u524d\u5c31\u653e\u5f03\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u73b0\u5728\u53ea\u6709\u5c11\u6570\u4eba\u5728\u52aa\u529b\u8bd5\u56fe\u89e3\u51b3\u5b83\u3002\u5bf9\u4e8e\u521d\u5b66\u8005\u6765\u8bf4\uff0c\u89e3\u51b3\u8fd9\u6837\u9ad8\u96be\u5ea6\u7684\u95ee\u9898\uff0c\u4f1a\u7ed9\u4ed6\u5e26\u6765\u8db3\u591f\u7684\u58f0\u8a89\u3002\u8ba1\u7b97\u673a\u79d1\u5b66\u9886\u57df\u4e2d\u7684P=NP\u5c31\u662f\u8fd9\u6837\u7684\u95ee\u9898\u3002\u5982\u679c\u80fd\u7528\u591a\u9879\u5f0f\u65f6\u95f4\u590d\u6742\u5ea6\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u90a3\u7b80\u76f4\u5c31\u53ef\u4ee5\u6539\u53d8\u4e16\u754c\u4e86\u3002Python\u4e2d\u6700\u56f0\u96be\u7684\u95ee\u9898\u6bd4P=NP\u8981\u5bb9\u6613\u4e00\u4e9b\uff0c\u4e0d\u8fc7\u8fc4\u4eca\u4ecd\u7136\u6ca1\u6709\u4e00\u4e2a\u6ee1\u610f\u7684\u7b54\u6848\uff0c\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u548c\u89e3\u51b3P=NP\u95ee\u9898\u4e00\u6837\u5177\u6709\u9769\u547d\u6027\u3002\u6b63\u56e0\u4e3a\u5982\u6b64\uff0cPython\u793e\u533a\u4f1a\u6709\u5982\u6b64\u591a\u7684\u4eba\u5173\u6ce8\u4e8e\u8fd9\u4e2a\u7684\u95ee\u9898:\u201c\u5bf9\u4e8e\u5168\u5c40\u89e3\u91ca\u5668\u9501\uff08GIL\uff09\u80fd\u505a\u4ec0\u4e48?\u201dPython\u7684\u5e95\u5c42\u8981\u7406\u89e3GIL\u7684\u542b\u4e49\uff0c\u6211\u4eec\u9700\u8981\u4ecePython\u7684\u57fa\u7840\u8bf4\u8d77\u3002\u50cfC++\u8fd9\u6837\u7684\u8bed\u8a00\u5c5e\u4e8e\u7f16\u8bd1\u578b\u8bed\u8a00\uff0c\u987e\u540d\u601d\u4e49\uff0c\u8be5\u7c7b\u578b\u8bed\u8a00\u7684\u4ee3\u7801\u8f93\u5165\u5230\u7f16\u8bd1\u5668\uff0c\u7531\u7f16\u8bd1\u5668\u6839\u636e\u8bed\u8a00\u7684\u8bed\u6cd5\u8fdb\u884c\u89e3\u6790\uff0c\u751f\u6210\u4e0e\u8bed\u8a00\u65e0\u5173\u7684\u4e2d\u95f4\u8868\u793a\uff0c\u6700\u540e\u94fe\u63a5\u6210\u7531\u9ad8\u5ea6\u4f18\u5316\u7684\u673a\u5668\u7801\u7ec4\u6210\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u3002\u56e0\u4e3a\u7f16\u8bd1\u5668\u53ef\u4ee5\u83b7\u53d6\u5168\u90e8\u4ee3\u7801\uff08\u6216\u8005\u662f\u4e00\u5927\u6bb5\u76f8\u5bf9\u72ec\u7acb\u7684\u4ee3\u7801\uff09\uff0c\u6240\u4ee5\u7f16\u8bd1\u5668\u53ef\u4ee5\u5bf9\u4ee3\u7801\u8fdb\u884c\u6df1\u5ea6\u4f18\u5316\u3002\u8fd9\u4f7f\u5f97\u5b83\u53ef\u4ee5\u5bf9\u4e0d\u540c\u7684\u8bed\u8a00\u7ed3\u6784\u4e4b\u95f4\u7684\u4ea4\u4e92\u8fdb\u884c\u63a8\u7406\uff0c\u4ece\u800c\u505a\u51fa\u66f4\u6709\u6548\u7684\u4f18\u5316\u3002\u76f8\u53cd\uff0cPython\u662f\u89e3\u91ca\u578b\u8bed\u8a00\u3002\u4ee3\u7801\u88ab\u8f93\u5165\u5230\u89e3\u91ca\u5668\u6765\u8fd0\u884c\u3002\u89e3\u91ca\u5668\u5728\u6267\u884c\u4e4b\u524d\u5bf9\u4ee3\u7801\u4e00\u65e0\u6240\u77e5\uff1b\u5b83\u53ea\u77e5\u9053Python\u7684\u89c4\u5219\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u52a8\u6001\u5730\u5e94\u7528\u8fd9\u4e9b\u89c4\u5219\u3002\u5b83\u4e5f\u6709\u4e00\u4e9b\u4f18\u5316\uff0c\u4f46\u662f\u548c\u7f16\u8bd1\u578b\u8bed\u8a00\u7684\u4f18\u5316\u5b8c\u5168\u4e0d\u540c\u3002\u7531\u4e8e\u89e3\u91ca\u5668\u4e0d\u80fd\u5f88\u597d\u5730\u5bf9\u4ee3\u7801\u8fdb\u884c\u63a8\u5bfc\uff0cPython\u7684\u5927\u90e8\u5206\u4f18\u5316\u5176\u5b9e\u662f\u89e3\u91ca\u5668\u672c\u8eab\u7684\u4f18\u5316\u3002\u66f4\u5feb\u7684\u89e3\u91ca\u5668\u81ea\u7136\u610f\u5473\u7740\u66f4\u5feb\u7684\u7a0b\u5e8f\u8fd0\u884c\u901f\u5ea6\uff0c\u800c\u8fd9\u79cd\u4f18\u5316\u5bf9\u5f00\u53d1\u8005\u6765\u8bf4\u662f\u514d\u8d39\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u89e3\u91ca\u5668\u4f18\u5316\u540e\uff0c\u5f00\u53d1\u8005\u4e0d\u7528\u4fee\u6539Python\u4ee3\u7801\u5c31\u53ef\u4ee5\u5750\u4eab\u4f18\u5316\u5e26\u6765\u7684\u597d\u5904\u3002\u8fd9\u662f\u975e\u5e38\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u8fd9\u91cc\u6709\u5fc5\u8981\u5728\u5f3a\u8c03\u4e00\u4e0b\u3002\u5728\u540c\u7b49\u6761\u4ef6\u4e0b\uff0cPython\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6\u4e0e\u89e3\u91ca\u5668\u7684\u201c\u901f\u5ea6\u201d\u76f4\u63a5\u76f8\u5173\u76f8\u5173\u3002\u65e0\u8bba\u5f00\u53d1\u8005\u600e\u6837\u4f18\u5316\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u7a0b\u5e8f\u7684\u6267\u884c\u901f\u5ea6\u8fd8\u662f\u53d7\u9650\u4e8e\u89e3\u91ca\u5668\u7684\u6267\u884c\u6548\u7387\u3002\u5f88\u660e\u663e\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u505a\u4e86\u5982\u6b64\u591a\u7684\u5de5\u4f5c\u53bb\u4f18\u5316Python\u89e3\u91ca\u5668\u3002\u8fd9\u5927\u6982\u662f\u79bbPython\u5f00\u53d1\u8005\u6700\u8fd1\u7684\u514d\u8d39\u7684\u5348\u9910\u3002\u514d\u8d39\u5348\u9910\u7ed3\u675f\u4e86\u8fd8\u662f\u6ca1\u6709\u7ed3\u675f\uff1f\u6469\u5c14\u5b9a\u5f8b\u544a\u8bc9\u4e86\u6211\u4eec\u786c\u4ef6\u63d0\u901f\u7684\u65f6\u95f4\u8868\uff0c\u540c\u65f6\uff0c\u6574\u6574\u4e00\u4ee3\u7a0b\u5e8f\u5458\u5b66\u4f1a\u4e86\u5982\u4f55\u5728\u6469\u5c14\u5b9a\u5f8b\u4e0b\u7f16\u5199\u4ee3\u7801\u3002\u5982\u679c\u7a0b\u5e8f\u5458\u5199\u4e86\u6bd4\u8f83\u6162\u7684\u4ee3\u7801\uff0c\u6700\u7b80\u5355\u7684\u529e\u6cd5\u901a\u5e38\u662f\u7a0d\u7a0d\u7b49\u5f85\u4e00\u4e0b\u66f4\u5feb\u7684\u5904\u7406\u5668\u95ee\u4e16\u5373\u53ef\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6469\u5c14\u5b9a\u5f8b\u4ecd\u7136\u662f\u5e76\u4e14\u4f1a\u5728\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u5185\u662f\u6709\u6548\u7684\uff0c\u4e0d\u8fc7\u5b83\u751f\u6548\u7684\u65b9\u5f0f\u6709\u4e86\u6839\u672c\u7684\u53d8\u5316\u3002\u65f6\u949f\u9891\u7387\u4e0d\u4f1a\u7a33\u5b9a\u589e\u957f\u5230\u4e00\u4e2a\u9ad8\u4e0d\u53ef\u6500\u7684\u901f\u5ea6\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u901a\u8fc7\u591a\u6838\u6765\u5229\u7528\u6676\u4f53\u7ba1\u5bc6\u5ea6\u63d0\u9ad8\u5e26\u6765\u7684\u597d\u5904\u3002\u60f3\u8981\u7a0b\u5e8f\u80fd\u591f\u5145\u5206\u5229\u7528\u65b0\u5904\u7406\u5668\u7684\u6027\u80fd\uff0c\u5c31\u5fc5\u987b\u6309\u7167\u5e76\u53d1\u65b9\u5f0f\u5bf9\u4ee3\u7801\u8fdb\u884c\u91cd\u5199\u3002\u5927\u90e8\u5206\u5f00\u53d1\u8005\u542c\u5230\u201c\u5e76\u53d1\u201d\u901a\u5e38\u4f1a\u9a6c\u4e0a\u60f3\u5230\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u3002\u76ee\u524d\uff0c\u591a\u7ebf\u7a0b\u4ecd\u662f\u5229\u7528\u591a\u6838\u7cfb\u7edf\u6700\u5e38\u89c1\u7684\u65b9\u5f0f\u3002\u591a\u7ebf\u7a0b\u7f16\u7a0b\u6bd4\u4f20\u7edf\u7684\u201c\u987a\u5e8f\u201d\u7f16\u7a0b\u8981\u96be\u5f88\u591a\uff0c\u4e0d\u8fc7\u4ed4\u7ec6\u7684\u7a0b\u5e8f\u5458\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u5145\u5206\u5229\u7528\u591a\u7ebf\u7a0b\u7684\u5e76\u53d1\u6027\u3002\u65e2\u7136\u51e0\u4e4e\u6240\u6709\u5e94\u7528\u5e7f\u6cdb\u7684\u73b0\u4ee3\u7f16\u7a0b\u8bed\u8a00\u90fd\u652f\u6301\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff0c\u8bed\u8a00\u5728\u591a\u7ebf\u7a0b\u65b9\u9762\u7684\u5b9e\u73b0\u5e94\u8be5\u662f\u4e8b\u540e\u6dfb\u52a0\u4e0a\u53bb\u7684\u3002\u610f\u5916\u7684\u4e8b\u5b9e\u73b0\u5728\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u95ee\u9898\u7684\u75c7\u7ed3\u6240\u5728\u3002\u60f3\u8981\u5229\u7528\u591a\u6838\u7cfb\u7edf\uff0cPython\u5fc5\u987b\u652f\u6301\u591a\u7ebf\u7a0b\u3002\u4f5c\u4e3a\u89e3\u91ca\u578b\u8bed\u8a00\uff0cPython\u7684\u89e3\u91ca\u5668\u5bf9\u591a\u7ebf\u7a0b\u7684\u652f\u6301\u5fc5\u987b\u662f\u65e2\u5b89\u5168\u53c8\u9ad8\u6548\u7684\u3002\u6211\u4eec\u90fd\u77e5\u9053\u591a\u7ebf\u7a0b\u7f16\u7a0b\u5e26\u6765\u7684\u95ee\u9898\u3002\u89e3\u91ca\u5668\u5fc5\u987b\u907f\u514d\u4e0d\u540c\u7684\u7ebf\u7a0b\u64cd\u4f5c\u5185\u90e8\u5171\u4eab\u7684\u6570\u636e\u3002\u540c\u65f6\u8fd8\u8981\u4fdd\u8bc1\u7528\u6237\u7ebf\u7a0b\u80fd\u5b8c\u6210\u5c3d\u91cf\u591a\u7684\u8ba1\u7b97\u3002\u90a3\u4e48\u5728\u4e0d\u540c\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u6570\u636e\u65f6\uff0c\u600e\u6837\u624d\u80fd\u4fdd\u62a4\u6570\u636e\u5462\uff1f\u7b54\u6848\u662f\u5168\u5c40\u89e3\u91ca\u5668\u9501\u3002\u987e\u540d\u601d\u4e49\uff0c\u8fd9\u662f\u4e00\u4e2a\u52a0\u5728\u89e3\u91ca\u5668\u4e0a\u7684\u5168\u5c40\u9501\uff08\u4ece\u4e92\u65a5\u91cf\u6216\u8005\u7c7b\u4f3c\u610f\u4e49\u4e0a\u6765\u770b\uff09\u3002\u8fd9\u79cd\u65b9\u5f0f\u662f\u5f88\u5b89\u5168\uff0c\u4f46\u662f\uff08\u5bf9\u4e8ePython\u521d\u5b66\u8005\u6765\u8bf4\uff09\u8fd9\u4e5f\u5c31\u610f\u5473\u7740\uff1a\u5bf9\u4e8e\u4efb\u4f55Python\u7a0b\u5e8f\uff0c\u4e0d\u8bba\u6709\u591a\u5c11\u7ebf\u7a0b\uff0c\u591a\u5c11\u5904\u7406\u5668\uff0c\u4efb\u4f55\u65f6\u5019\u90fd\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5728\u6267\u884c\u3002\u8bb8\u591a\u4eba\u90fd\u662f\u5076\u7136\u53d1\u73b0\u8fd9\u4e2a\u4e8b\u5b9e\u3002\u7f51\u4e0a\u7684\u8ba8\u8bba\u7ec4\u548c\u7559\u8a00\u677f\u5145\u65a5\u7740\u6765\u81eaPython\u521d\u5b66\u8005\u548c\u4e13\u5bb6\u63d0\u51fa\u7684\u7c7b\u4f3c\u7684\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u6211\u5168\u65b0\u7684\u591a\u7ebf\u7a0bPython\u7a0b\u5e8f\u8fd0\u884c\u5f97\u6bd4\u5176\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u7684\u65f6\u5019\u8fd8\u8981\u6162\uff1f\u5728\u95ee\u8fd9\u4e2a\u95ee\u9898\u65f6\uff0c\u8bb8\u591a\u4eba\u8fd8\u89c9\u5f97\u81ea\u5df1\u50cf\u4e2a\u50bb\u74dc\uff0c\u56e0\u4e3a\u5982\u679c\u7a0b\u5e8f\u786e\u5b9e\u662f\u53ef\u5e76\u884c\u7684\uff0c\u90a3\u4e48\u4e24\u4e2a\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u663e\u7136\u8981\u6bd4\u5355\u7ebf\u7a0b\u8981\u5feb\u3002\u4e8b\u5b9e\u4e0a\uff0c\u95ee\u53ca\u8fd9\u4e2a\u95ee\u9898\u7684\u6b21\u6570\u5b9e\u5728\u592a\u591a\u4e86\uff0cPython\u7684\u4e13\u5bb6\u4eec\u5df2\u7ecf\u4e3a\u5b83\u51c6\u5907\u4e86\u4e00\u4e2a\u6807\u51c6\u7b54\u6848\uff1a\u4e0d\u8981\u4f7f\u7528\u591a\u7ebf\u7a0b\uff0c\u8bf7\u4f7f\u7528\u591a\u8fdb\u7a0b\u3002\u4f46\u8fd9\u4e2a\u7b54\u6848\u6bd4\u95ee\u9898\u672c\u8eab\u66f4\u52a0\u8ba9\u4eba\u56f0\u60d1\uff1a\u96be\u9053\u6211\u4e0d\u80fd\u5728Python\u4e2d\u4f7f\u7528\u591a\u7ebf\u7a0b\uff1f\u5728Python\u8fd9\u6837\u6d41\u884c\u7684\u8bed\u8a00\u4e2d\u4f7f\u7528\u591a\u7ebf\u7a0b\u7a76\u7adf\u662f\u6709\u591a\u7cdf\u7cd5\uff0c\u8fde\u4e13\u5bb6\u90fd\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\u3002\u662f\u6211\u54ea\u91cc\u6ca1\u6709\u641e\u660e\u767d\u5417\uff1f\u5f88\u9057\u61be\uff0c\u5e76\u4e0d\u662f\u3002\u7531\u4e8ePython\u89e3\u91ca\u5668\u7684\u8bbe\u8ba1\uff0c\u4f7f\u7528\u591a\u7ebf\u7a0b\u4ee5\u63d0\u9ad8\u6027\u80fd\u53ef\u4ee5\u7b97\u662f\u4e00\u4e2a\u56f0\u96be\u7684\u4efb\u52a1\u3002\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\uff0c\u591a\u7ebf\u7a0b\u53cd\u800c\u4f1a\u964d\u4f4e\uff08\u6709\u65f6\u5f88\u660e\u663e\uff09\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6\u3002\u4e00\u4e2a\u8ba1\u7b97\u673a\u79d1\u5b66\u4e13\u4e1a\u7684\u65b0\u751f\u5c31\u53ef\u4ee5\u544a\u8bc9\u4f60\uff1a\u5f53\u591a\u4e2a\u7ebf\u7a0b\u7ade\u4e89\u4e00\u4e2a\u5171\u4eab\u8d44\u6e90\u65f6\u5c06\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002\u7ed3\u679c\u901a\u5e38\u4e0d\u7406\u60f3\u3002\u5f88\u591a\u60c5\u51b5\u4e0b\u591a\u7ebf\u7a0b\u90fd\u80fd\u5f88\u597d\u5730\u5de5\u4f5c\uff0c\u5bf9\u4e8e\u89e3\u91ca\u5668\u7684\u5b9e\u73b0\u548c\u5185\u6838\u5f00\u53d1\u4eba\u5458\u6765\u8bf4\uff0c\u4e0d\u8981\u5bf9Python\u591a\u7ebf\u7a0b\u6027\u80fd\u6709\u592a\u591a\u62b1\u6028\u53ef\u80fd\u662f\u4ed6\u4eec\u6700\u5927\u7684\u5fc3\u613f\u3002\u73b0\u5728\u8be5\u600e\u4e48\u529e\u5462\uff1f\u614c\u4e86\u5417\uff1f\u6211\u4eec\u73b0\u5728\u80fd\u505a\u4ec0\u4e48\u5462\uff1f\u96be\u9053\u4f5c\u4e3aPython\u5f00\u53d1\u4eba\u5458\u7684\u6211\u4eec\u8981\u653e\u5f03\u4f7f\u7528\u591a\u7ebf\u7a0b\u6765\u5b9e\u73b0\u5e76\u884c\u5417\uff1f\u4e3a\u4ec0\u4e48GIL\u5728\u67d0\u4e00\u65f6\u523b\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u5728\u8fd0\u884c\u5462\uff1f\u5728\u5e76\u53d1\u8bbf\u95ee\u65f6\uff0c\u96be\u9053\u4e0d\u53ef\u4ee5\u7528\u7c92\u5ea6\u66f4\u7ec6\u7684\u9501\u6765\u4fdd\u62a4\u591a\u4e2a\u72ec\u7acb\u5bf9\u8c61\uff1f\u4e3a\u4ec0\u4e48\u6ca1\u6709\u4eba\u505a\u8fc7\u7c7b\u4f3c\u7684\u5c1d\u8bd5\u5462\uff1f\u8fd9\u4e9b\u95ee\u9898\u5f88\u5b9e\u7528\uff0c\u5b83\u4eec\u7684\u7b54\u6848\u4e5f\u5341\u5206\u6709\u8da3\u3002GIL\u4e3a\u5f88\u591a\u5bf9\u8c61\u7684\u8bbf\u95ee\u63d0\u4f9b\u8fd9\u4fdd\u62a4\uff0c\u6bd4\u5982\u5f53\u524d\u7ebf\u7a0b\u72b6\u6001\u548c\u4e3a\u5783\u573e\u56de\u6536\u800c\u7528\u7684\u5806\u5206\u914d\u5bf9\u8c61\u3002\u8fd9\u5bf9Python\u8bed\u8a00\u6765\u8bf4\u6ca1\u4ec0\u4e48\u5947\u602a\u7684\uff0c\u5b83\u9700\u8981\u4f7f\u7528\u4e00\u4e2aGIL\u3002\u8fd9\u662f\u8be5\u5b9e\u73b0\u7684\u4e00\u79cd\u4ea7\u7269\u3002\u73b0\u5728\u4e5f\u6709\u4e0d\u4f7f\u7528GIL\u7684Python\u89e3\u91ca\u5668\uff08\u548c\u7f16\u8bd1\u5668\uff09\u3002\u4f46\u662f\u5bf9\u4e8eCPython\u6765\u8bf4\uff0c\u4ece\u5176\u4ea7\u751f\u5230\u73b0\u5728GIL\u5c31\u4e00\u76f4\u5728\u5b58\u5728\u4e86\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u629b\u5f03GIL\u5462\uff1f\u8bb8\u591a\u4eba\u4e5f\u8bb8\u4e0d\u77e5\u9053\uff0c1999\u5e74\u7684\u65f6\u5019\uff0cGregStein\u9488\u5bf9Python1.5\u63d0\u4ea4\u4e86\u4e00\u4e2a\u540d\u4e3a\u201cfreethreading\u201d\u7684\u8865\u4e01\uff0c\u8fd9\u4e2a\u8865\u4e01\u7ecf\u5e38\u88ab\u63d0\u5230\u5374\u4e0d\u600e\u4e48\u88ab\u4eba\u7406\u89e3\u3002\u8fd9\u4e2a\u8865\u4e01\u5c31\u5c1d\u8bd5\u4e86\u5c06GIL\u5b8c\u5168\u79fb\u9664\uff0c\u5e76\u7528\u7ec6\u7c92\u5ea6\u7684\u9501\u6765\u4ee3\u66ff\u3002\u7136\u800c\uff0cGIL\u79fb\u9664\u7684\u4ee3\u4ef7\u662f\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u7684\u6267\u884c\u901f\u5ea6\u4e0b\u964d\uff0c\u4e0b\u964d\u7684\u5e45\u5ea6\u5927\u6982\u670940%\u3002\u4f7f\u7528\u4e24\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u8ba9\u901f\u5ea6\u6709\u6240\u63d0\u5347\uff0c\u4f46\u662f\u901f\u5ea6\u7684\u63d0\u5347\u5e76\u6ca1\u6709\u968f\u7740\u6838\u6570\u7684\u589e\u52a0\u800c\u7ebf\u6027\u589e\u957f\u3002\u7531\u4e8e\u6267\u884c\u901f\u5ea6\u7684\u964d\u4f4e\uff0c\u8fd9\u4e00\u8865\u4e01\u6ca1\u6709\u88ab\u63a5\u53d7\u4e86\uff0c\u5e76\u4e14\u51e0\u4e4e\u88ab\u4eba\u9057\u5fd8\u3002GIL\u8ba9\u4eba\u5934\u75db\uff0c\u6211\u4eec\u8fd8\u662f\u60f3\u70b9\u5176\u4ed6\u529e\u6cd5\u5427\u5c3d\u7ba1\u201cfreethreading\u201d\u8fd9\u4e2a\u8865\u4e01\u6ca1\u6709\u88ab\u63a5\u53d7\uff0c\u4f46\u662f\u5b83\u8fd8\u662f\u6709\u542f\u53d1\u6027\u610f\u4e49\u3002\u5b83\u8bc1\u660e\u4e86\u4e00\u4e2a\u5173\u4e8ePython\u89e3\u91ca\u5668\u7684\u57fa\u672c\u8981\u70b9\uff1a\u79fb\u9664GIL\u662f\u975e\u5e38\u56f0\u96be\u7684\u3002\u6bd4\u8d77\u8be5\u8865\u4e01\u53d1\u5e03\u7684\u65f6\u5019\uff0c\u73b0\u5728\u7684\u89e3\u91ca\u5668\u4f9d\u8d56\u7684\u5168\u5c40\u72b6\u6001\u53d8\u5f97\u66f4\u591a\u4e86\uff0c\u8fd9\u4f7f\u5f97\u79fb\u9664GIL\u53d8\u5f97\u66f4\u52a0\u56f0\u96be\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\uff0c\u8bb8\u591a\u4eba\u5bf9\u79fb\u9664GIL\u53d8\u5f97\u66f4\u611f\u5174\u8da3\u4e86\u3002\u56f0\u96be\u7684\u95ee\u9898\u901a\u5e38\u90fd\u5f88\u6709\u8da3\u3002\u4f46\u662f\u8fd9\u53ef\u80fd\u6709\u70b9\u88ab\u8bef\u5bfc\u4e86\u3002\u6211\u4eec\u5047\u8bbe\u4e00\u4e0b\uff1a\u5982\u679c\u6211\u4eec\u6709\u8fd9\u6837\u4e00\u4e2a\u795e\u5947\u7684\u8865\u4e01\uff0c\u5b83\u5176\u79fb\u9664\u4e86GIL\uff0c\u5e76\u4e14\u6ca1\u6709\u4f7f\u5355\u7ebf\u7a0b\u7684Python\u4ee3\u7801\u6027\u80fd\u4e0b\u964d\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u76f4\u60f3\u8981\u7684\u4e1c\u897f\uff1a\u4e00\u4e2a\u80fd\u5e76\u53d1\u4f7f\u7528\u6240\u6709\u5904\u7406\u5668\u7684\u7ebf\u7a0bAPI\u3002\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u4e86\u6211\u4eec\u5e0c\u671b\u7684\uff0c\u4f46\u8fd9\u786e\u5b9e\u662f\u4ef6\u597d\u4e8b\u5417\uff1f\u57fa\u4e8e\u7ebf\u7a0b\u7684\u7f16\u7a0b\u662f\u56f0\u96be\u7684\u3002\u5f53\u4e00\u4e2a\u4eba\u89c9\u5f97\u81ea\u5df1\u4e86\u89e3\u5173\u4e8e\u7ebf\u7a0b\u7684\u4e00\u5207\uff0c\u603b\u4f1a\u6709\u4e00\u4e9b\u65b0\u95ee\u9898\u51fa\u73b0\u3002\u4e00\u4e9b\u975e\u5e38\u77e5\u540d\u7684\u8bed\u8a00\u8bbe\u8ba1\u8005\u548c\u7814\u7a76\u8005\u7ad9\u51fa\u6765\u53cd\u5bf9\u7ebf\u7a0b\u6a21\u578b\uff0c\u56e0\u4e3a\u5728\u8fd9\u65b9\u9762\u60f3\u8981\u5f97\u5230\u5408\u7406\u7684\u4e00\u81f4\u6027\u771f\u7684\u662f\u592a\u96be\u4e86\u3002\u5c31\u50cf\u4efb\u4f55\u4e00\u4e2a\u5199\u8fc7\u591a\u7ebf\u7a0b\u5e94\u7528\u7a0b\u5e8f\u7684\u4eba\u53ef\u4ee5\u544a\u8bc9\u4f60\u7684\u4e00\u6837\uff0c\u4e0d\u7ba1\u662f\u591a\u7ebf\u7a0b\u5e94\u7528\u7684\u5f00\u53d1\u8fd8\u662f\u8c03\u8bd5\u96be\u5ea6\u90fd\u4f1a\u662f\u5355\u7ebf\u7a0b\u7684\u5e94\u7528\u7684\u6307\u6570\u500d\u3002\u7a0b\u5e8f\u5458\u7684\u601d\u7ef4\u6a21\u578b\u5f80\u5f80\u9002\u5e94\u987a\u5e8f\u6267\u884c\u6a21\u578b\uff0c\u6070\u6070\u4e0e\u5e76\u884c\u6267\u884c\u6a21\u578b\u4e0d\u5339\u914d\u3002GIL\u7684\u51fa\u73b0\u65e0\u610f\u4e2d\u5e2e\u52a9\u4e86\u5f00\u53d1\u8005\u514d\u4e8e\u9677\u5165\u56f0\u5883\u3002\u5728\u4f7f\u7528\u591a\u7ebf\u7a0b\u65f6\u4ecd\u7136\u9700\u8981\u540c\u6b65\u539f\u8bed\uff0cGIL\u4e8b\u5b9e\u4e0a\u5e2e\u52a9\u6211\u4eec\u4fdd\u8bc1\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u4e00\u81f4\u6027\u3002\u8fd9\u4e48\u8bf4\u8d77\u6765Python\u6700\u96be\u7684\u95ee\u9898\u4f3c\u4e4e\u6709\u70b9\u95ee\u9519\u4e86\u95ee\u9898\u3002Python\u4e13\u5bb6\u63a8\u8350\u4f7f\u7528\u591a\u8fdb\u7a0b\u4ee3\u66ff\u591a\u7ebf\u7a0b\u662f\u6709\u9053\u7406\u7684\uff0c\u800c\u4e0d\u662f\u60f3\u8981\u7ed9Python\u7ebf\u7a0b\u5b9e\u73b0\u906e\u7f9e\u3002Python\u7684\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u4fc3\u4f7f\u5f00\u53d1\u8005\u4f7f\u7528\u66f4\u5b89\u5168\u4e5f\u66f4\u76f4\u89c2\u7684\u65b9\u5f0f\u5b9e\u73b0\u5e76\u53d1\u6a21\u578b\uff0c\u540c\u65f6\u4fdd\u7559\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u5f00\u53d1\uff0c\u8ba9\u5f00\u53d1\u8005\u5728\u5fc5\u8981\u7684\u65f6\u5019\u4f7f\u7528\u3002\u5927\u591a\u6570\u4eba\u53ef\u80fd\u5e76\u4e0d\u6e05\u695a\u4ec0\u4e48\u662f\u6700\u597d\u7684\u5e76\u884c\u7f16\u7a0b\u6a21\u578b\u3002\u4f46\u662f\u5927\u591a\u6570\u4eba\u90fd\u6e05\u695a\u591a\u7ebf\u7a0b\u7684\u65b9\u5f0f\u5e76\u4e0d\u662f\u6700\u597d\u7684\u5e76\u884c\u6a21\u578b\u3002\u4e0d\u8981\u8ba4\u4e3aGIL\u662f\u4e00\u6210\u4e0d\u53d8\u6216\u8005\u6beb\u65e0\u9053\u7406\u7684\u3002AntoinePitrou\u5728Python3.2\u4e2d\u5b9e\u73b0\u4e86\u4e00\u4e2a\u65b0\u7684GIL\uff0c\u6bd4\u8f83\u663e\u8457\u5730\u6539\u8fdb\u7684Python\u89e3\u91ca\u5668\u3002\u8fd9\u662f1992\u5e74\u4ee5\u6765\uff0c\u9488\u5bf9GIL\u6700\u4e3b\u8981\u7684\u4e00\u6b21\u6539\u8fdb\u3002\u8fd9\u4e2a\u6539\u53d8\u975e\u5e38\u5de8\u5927\uff0c\u5f88\u96be\u5728\u8fd9\u91cc\u89e3\u91ca\u6e05\u695a\uff0c\u4f46\u662f\u4ece\u9ad8\u5c42\u6b21\u6765\u770b\uff0c\u65e7\u7684GIL\u901a\u8fc7\u5bf9Python\u6307\u4ee4\u8fdb\u884c\u8ba1\u6570\u6765\u786e\u5b9a\u4f55\u65f6\u91ca\u653eGIL\u3002\u7531\u4e8ePython\u6307\u4ee4\u548c\u7ffb\u8bd1\u6210\u7684\u673a\u5668\u6307\u4ee4\u5e76\u975e\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\uff0c\u8fd9\u4f7f\u5f97\u5355\u6761Python\u6307\u4ee4\u53ef\u80fd\u5305\u542b\u5927\u91cf\u5de5\u4f5c\u3002\u65b0\u7684GIL\u7528\u4e00\u4e2a\u56fa\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\u6765\u6307\u793a\u5f53\u524d\u7684\u7ebf\u7a0b\u91ca\u653e\u9501\u3002\u5728\u5f53\u524d\u7ebf\u7a0b\u6301\u6709\u9501\u4e14\u7b2c\u4e8c\u4e2a\u7ebf\u7a0b\u8bf7\u6c42\u8fd9\u4e2a\u9501\u7684\u65f6\u5019\uff0c\u5f53\u524d\u7ebf\u7a0b\u5c31\u4f1a\u57285ms\u540e\u88ab\u5f3a\u5236\u91ca\u653e\u8fd9\u4e2a\u9501\uff08\u8fd9\u5c31\u662f\u8bf4\uff0c\u5f53\u524d\u7ebf\u7a0b\u6bcf5ms\u5c31\u8981\u68c0\u67e5\u5176\u662f\u5426\u9700\u8981\u91ca\u653e\u8fd9\u4e2a\u9501\uff09\u3002\u5728\u4efb\u52a1\u53ef\u4ee5\u6267\u884c\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4f7f\u5f97\u9884\u6d4b\u7ebf\u7a0b\u95f4\u7684\u5207\u6362\u53d8\u5f97\u66f4\u5bb9\u6613\u3002\u7136\u800c\uff0c\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u5b8c\u7f8e\u7684\u6539\u8fdb\u3002\u5bf9\u4e8e\u4e0d\u540c\u7c7b\u578b\u4efb\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2dGIL\u7684\u4f5c\u7528\u7684\u7814\u7a76\uff0cDavidBeazley\u53ef\u80fd\u662f\u6700\u6d3b\u8dc3\u7684\u4e00\u4e2a\u3002\u9664\u4e86\u5bf9Python3.2\u4e4b\u524d\u7684GIL\u7814\u7a76\u6700\u6df1\u5165\uff0c\u4ed6\u8fd8\u7814\u7a76\u4e86\u8fd9\u4e2a\u6700\u65b0\u7684GIL\u5b9e\u73b0\uff0c\u5e76\u4e14\u53d1\u73b0\u4e86\u5f88\u591a\u6709\u8da3\u7684\u7a0b\u5e8f\u65b9\u6848\uff1a\u5728\u8fd9\u4e9b\u65b9\u6848\u4e2d\uff0c\u5373\u4f7f\u662f\u65b0\u7684GIL\u5b9e\u73b0\uff0c\u8868\u73b0\u4e5f\u76f8\u5f53\u7cdf\u7cd5\u3002\u4ed6\u76ee\u524d\u4ecd\u7136\u901a\u8fc7\u5b9e\u8df5\u7814\u7a76\u6765\u63a8\u52a8\u7740\u6709\u5173GIL\u7684\u8ba8\u8bba\uff0c\u5e76\u53d1\u5e03\u5b9e\u8df5\u7ed3\u679c\u3002\u4e0d\u7ba1\u4eba\u4eec\u5bf9Python\u7684GIL\u770b\u6cd5\u5982\u4f55\uff0c\u5b83\u4ecd\u7136\u662fPython\u8bed\u8a00\u91cc\u6700\u56f0\u96be\u7684\u6280\u672f\u6311\u6218\u3002\u60f3\u8981\u7406\u89e3\u5b83\u7684\u5b9e\u73b0\u9700\u8981\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u8bbe\u8ba1\u3001\u591a\u7ebf\u7a0b\u7f16\u7a0b\u3001C\u8bed\u8a00\u3001\u89e3\u91ca\u5668\u8bbe\u8ba1\u548cCPython\u89e3\u91ca\u5668\u7684\u5b9e\u73b0\u6709\u7740\u975e\u5e38\u900f\u5f7b\u7684\u7406\u89e3\u3002\u5355\u662f\u8fd9\u4e9b\u524d\u63d0\u5c31\u59a8\u788d\u4e86\u5f88\u591a\u5f00\u53d1\u8005\u53bb\u66f4\u5f7b\u5e95\u5730\u7814\u7a76GIL\u3002\u7136\u800c\u5e76\u6ca1\u6709\u4efb\u4f55\u8ff9\u8c61\u8868\u660eGIL\u4f1a\u5728\u4e0d\u4e45\u4e4b\u540e\u8fdc\u79bb\u6211\u4eec\u3002\u76ee\u524d\uff0c\u5b83\u5c06\u7ee7\u7eed\u7ed9\u90a3\u4e9b\u65b0\u63a5\u89e6Python\u5e76\u5bf9\u89e3\u51b3\u6280\u672f\u96be\u9898\u611f\u5174\u8da3\u7684\u4eba\u5e26\u6765\u56f0\u60d1\u548c\u60ca\u559c\u3002\u4ee5\u4e0a\u5185\u5bb9\u662f\u57fa\u4e8e\u6211\u76ee\u524d\u5bf9Python\u89e3\u91ca\u5668\u7684\u7814\u7a76\u3002\u6211\u6253\u7b97\u5199\u4e00\u4e9b\u5173\u4e8e\u89e3\u91ca\u5668\u5176\u5b83\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u4f46\u662f\u6ca1\u6709\u6bd4GIL\u77e5\u540d\u5ea6\u66f4\u9ad8\u7684\u4e86\u3002\u867d\u7136\u8fd9\u4e9b\u6280\u672f\u7ec6\u8282\u6765\u81ea\u6211\u5bf9CPython\u4ee3\u7801\u5e93\u7684\u5f7b\u5e95\u7814\u7a76\uff0c\u4f46\u662f\u4ecd\u6709\u53ef\u80fd\u5b58\u5728\u4e0d\u51c6\u786e\u7684\u5730\u65b9\u3002\u5982\u679c\u4f60\u53d1\u73b0\u4e86\u4e0d\u51c6\u786e\u7684\u5185\u5bb9\uff0c\u8bf7\u53ca\u65f6\u544a\u77e5\u6211\uff0c\u6211\u4f1a\u5c3d\u5feb\u4fee\u6b63\u30021\u8d5e2\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aCoureur\u7b80\u4ecb\u8fd8\u6ca1\u6765\u5f97\u53ca\u5199:\uff09\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b710"]},
{"art_title": ["Django vs SQLAlchemy\uff1a\u54ea\u4e2a Python ORM \u66f4\u597d"], "art_url": ["http://python.jobbole.com/88672/"], "art_create_time": ["2017/10/13"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-PJing\u7ffb\u8bd1\uff0c\u827e\u51cc\u98ce\u6821\u7a3f\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1awww.eversql.com\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u4ec0\u4e48\u662fORM\uff1f\u5728\u4ecb\u7ecdPython\u7684ORM\u6846\u67b6\uff08Django\u548cSQLAlchemy\uff09\u4e0d\u540c\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u8981\u786e\u4fdd\u5b8c\u5168\u7406\u89e3ORM\u6846\u67b6\u7684\u7528\u9014\u3002ORM\u4ee3\u8868\u5bf9\u8c61\u5173\u7cfb\u6620\u5c04\uff08ObjectRelationalMapping\uff09\u3002\u8ba9\u6211\u4eec\u4f9d\u6b21\u770b\u770b\u8fd9\u4e09\u4e2a\u5355\u8bcd\uff0c\u5b83\u4eec\u6b63\u597d\u89e3\u91ca\u4e86ORM\u5728\u771f\u5b9e\u73af\u5883\u4e2d\u7684\u7528\u5904:\u25cf\u5bf9\u8c61\u2013\u8fd9\u90e8\u5206\u8868\u793a\u4f7f\u7528\u6846\u67b6\u7684\u5bf9\u8c61\u548c\u7f16\u7a0b\u8bed\u8a00\uff0c\u4f8b\u5982Python\u3002\u25cf\u00a0\u5173\u7cfb\u2013\u8fd9\u90e8\u5206\u8868\u793a\u6b63\u5728\u4f7f\u7528\u7684RDBMS(\u5173\u7cfb\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf)\u6570\u636e\u5e93\u3002\u5176\u4e2d\u5305\u62ec\u8bb8\u591a\u6d41\u884c\u7684\u5173\u7cfb\u6570\u636e\u5e93\uff0c\u800c\u4f60\u53ef\u80fd\u6b63\u5728\u4f7f\u7528\u4ee5\u4e0b\u6570\u636e\u5e93\u2014MSSQL\u3001MySQL\u3001Oracle\u6570\u636e\u5e93\u3001PostgreSQL\u3001MariaDB\u3001PerconaDB\u3001TokuDB\u3002\u5927\u591a\u6570\u5173\u7cfb\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u5171\u540c\u70b9\u662f\u5b83\u4eec\u7684\u5173\u7cfb\u7ed3\u6784(\u8868\u3001\u5217\uff0c\u952e\u3001\u7ea6\u675f\u7b49)\u3002\u25cf\u6620\u5c04\u2013\u6700\u540e\u8fd9\u90e8\u5206\u8868\u793a\u524d\u4e24\u90e8\u5206\u5bf9\u8c61\u548c\u6570\u636e\u8868\u4e4b\u95f4\u7684\u6865\u6881\u548c\u8fde\u63a5\u3002\u56e0\u6b64\u53ef\u4ee5\u5f97\u51fa\u7684\u7ed3\u8bba\u662fORM\u662f\u4e3a\u4e86\u5c06\u7f16\u7a0b\u8bed\u8a00\u4e0e\u6570\u636e\u5e93\u4e4b\u95f4\u76f8\u8fde\uff0c\u4ee5\u4fbf\u7b80\u5316\u521b\u5efa\u4f9d\u8d56\u4e8e\u6570\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u8fc7\u7a0b\u3002Django\u548cSQLAlchemy\u4e4b\u95f4\u6bd4\u8f83\u6d3b\u52a8\u8bb0\u5f55vs\u6570\u636e\u6620\u5c04DjangoORM\u91c7\u7528\u6d3b\u52a8\u8bb0\u5f55\u5b9e\u73b0\u2014\u5927\u591a\u6570ORM\u4e2d\u80fd\u770b\u5230\u8fd9\u79cd\u5b9e\u73b0\u3002\u57fa\u672c\u4e0a\u4e5f\u53ef\u4ee5\u8bf4\u662f\u6570\u636e\u5e93\u4e2d\u6bcf\u4e00\u884c\u90fd\u76f4\u63a5\u6620\u5c04\u5230\u4ee3\u7801\u4e2d\u7684\u5bf9\u8c61\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002ORM\u6846\u67b6\uff08\u5982Django\uff09\u4e0d\u9700\u8981\u4e3a\u4e86\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u5c5e\u6027\u800c\u9884\u5148\u5b9a\u4e49\u67b6\u6784\uff0c\u53ea\u9700\u8981\u4f7f\u7528\u5b83\u4eec\uff0c\u56e0\u4e3a\u6846\u67b6\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u6570\u636e\u5e93\u67b6\u6784\u201c\u7406\u89e3\u201d\u7ed3\u6784\u3002\u6b64\u5916\uff0c\u4e5f\u53ef\u4ee5\u53ea\u4fdd\u5b58\u8bb0\u5f55\u5230\u6570\u636e\u5e93\uff0c\u56e0\u4e3a\u5b83\u4e5f\u6620\u5c04\u5230\u8868\u4e2d\u7684\u7279\u5b9a\u884c\u3002SQLAlchemy\u91c7\u7528\u6570\u636e\u6620\u5c04\u5b9e\u73b0\u2014\u5f53\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u73b0\u65f6\uff0c\u6570\u636e\u5e93\u7ed3\u6784\u548c\u5bf9\u8c61\u7ed3\u6784\u4e4b\u95f4\u5b58\u5728\u95f4\u9699\uff08\u5b83\u4eec\u4e0d\u50cf\u6d3b\u52a8\u8bb0\u5f55\u7684\u5b9e\u73b0\u662f1:1\uff09\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5fc5\u987b\u4f7f\u7528\u53e6\u5916\u7684\u6301\u4e45\u5c42\u6765\u4fdd\u6301\u4e0e\u6570\u636e\u5e93\u7684\u4ea4\u4e92\uff08\u4f8b\u5982\u4fdd\u5b58\u5bf9\u8c61\uff09\u3002\u56e0\u6b64\u5f53\u91c7\u7528\u6d3b\u52a8\u8bb0\u5f55\u5b9e\u73b0\u7684\u65f6\u5019\u4e0d\u80fd\u53ea\u8c03\u7528save()\u65b9\u6cd5\uff08\u53cd\u5bf9\u89c2\u70b9\uff09\uff0c\u4f46\u53e6\u4e00\u65b9\u9762\uff0c\u4ee3\u7801\u4e0d\u9700\u8981\u77e5\u9053\u6570\u636e\u5e93\u4e2d\u6574\u4e2a\u5173\u7cfb\u7ed3\u6784\u7684\u8fd0\u884c\uff0c\u56e0\u4e3a\u4ee3\u7801\u548c\u6570\u636e\u5e93\u4e4b\u95f4\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\u3002\u90a3\u4e48\u5b83\u4eec\u4e4b\u95f4\u8c01\u83b7\u80dc\u4e86\u5462\uff1f\u90fd\u6ca1\u6709\u3002\u8fd9\u53d6\u51b3\u4e8e\u4f60\u8981\u5b9e\u73b0\u4ec0\u4e48\u3002\u6211\u76f8\u4fe1\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u5927\u591a\u662fCRUD(\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u66f4\u65b0\u3001\u5220\u9664)\u7a0b\u5e8f\uff0c\u800c\u5728\u4e0d\u540c\u6570\u636e\u5b9e\u4f53\u4e4b\u95f4\u6ca1\u6709\u4f7f\u7528\u56f0\u96be\u4e14\u590d\u6742\u89c4\u5219\uff0c\u90a3\u4e48\u5e94\u8be5\u91c7\u7528\u6d3b\u52a8\u8bb0\u5f55\u5b9e\u73b0(Django)\u3002\u5b83\u5c06\u5e2e\u52a9\u4f60\u8f7b\u677e\u5feb\u901f\u5730\u4e3a\u4ea7\u54c1\u8bbe\u7f6eMVP\uff0c\u800c\u4e0d\u4f1a\u6709\u4efb\u4f55\u56f0\u96be\u3002\u5982\u679c\u6709\u8bb8\u591a\u201c\u4e1a\u52a1\u89c4\u5219\u201d\u548c\u9650\u5236\u6761\u4ef6\uff0c\u6700\u597d\u91c7\u7528\u6570\u636e\u6620\u5c04\u6a21\u578b\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4f1a\u6346\u7ed1\u5e76\u5f3a\u8feb\u4e25\u683c\u9075\u7167\u6d3b\u52a8\u8bb0\u5f55\u6765\u8003\u91cf\u3002\u4f7f\u7528\u590d\u6742\u67e5\u8be2\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cDjango\u548cSQLAlchemy\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u3002\u73b0\u5b9e\u73af\u5883\u4e2d\u6211\u591a\u6b21\u89c1\u5230\u4e3b\u7528\u4f8b\u662fDjango\u7528\u4e8e\u6240\u6709\u5e38\u89c4CRUD\u64cd\u4f5c\uff0c\u800cSQLAlchemy\u7528\u4e8e\u66f4\u590d\u6742\u7684\u67e5\u8be2\uff0c\u901a\u5e38\u662f\u53ea\u8bfb\u67e5\u8be2\u3002\u6709\u5173\u8fd9\u65b9\u9762\u66f4\u591a\u7684\u4fe1\u606f\u548c\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u770b\u770bBetterWorks\u5de5\u7a0b\u535a\u5ba2(\u6211\u4eec\u6ca1\u6709\u4efb\u4f55\u8054\u7cfb\uff0c\u4f46\u4e0d\u7ba1\u600e\u6837\uff0c\u6211\u4eec\u559c\u6b22\u4ed6\u4eec\u7684\u535a\u5ba2)\u3002\u4e3b\u952e\u81ea\u52a8\u751f\u6210\u4e24\u4e2a\u6846\u67b6\u4e4b\u95f4\u7684\u53e6\u4e00\u4e2a\u4e0d\u540c\u662fDjango\u80fd\u4e3a\u8868\u81ea\u52a8\u521b\u5efa\u4e3b\u952e,SQLAlchemy\u5374\u505a\u4e0d\u5230\u3002\u5fc5\u987b\u624b\u52a8\u4e3a\u6bcf\u5f20\u8868\u521b\u5efa\u4e3b\u952e\u3002\u6743\u8861\u5229\u5f0a\u2014\u4f60\u8ba4\u4e3a\u54ea\u79cd\u6846\u67b6\u6700\u6e05\u695a\u7b26\u5408\u8868\u7684\u4e3b\u952e\uff1f\u6839\u636e\u56e2\u961f\u7684\u77e5\u8bc6\u548c\u7ecf\u9a8c\uff0c\u53ef\u4ee5\u81ea\u884c\u51b3\u5b9a\u3002\u81ea\u52a8\u63d0\u4ea4\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cDjango\u4f1a\u81ea\u52a8\u63d0\u4ea4\uff0cSQLAlchemy\u5374\u4e0d\u884c\u3002\u81ea\u52a8\u63d0\u4ea4\u4f1a\u5f71\u54cd\u4f7f\u7528\u6846\u67b6\u7684\u65b9\u5f0f\uff08\u4e8b\u52a1\u3001\u56de\u6eda\u7b49\uff09\u3002\u652f\u6301\u7684\u6570\u636e\u5e93Django\u548cSQLAlchemy\u90fd\u80fd\u7528\u4e8eMySQL\u3001PostgreSQL\u3001Oracle\u548cSQLite\u3002\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528MSSQL\uff0c\u5219\u5e94\u8be5\u4f7f\u7528SQLAlchemy\uff0c\u56e0\u4e3a\u5b83\u5b8c\u5168\u652f\u6301MSSQL\uff0c\u5e76\u4e14\u4e5f\u53ef\u4ee5\u627e\u5230\u66f4\u591a\u76f8\u5173\u7684\u4fe1\u606f\u548c\u6587\u6863\u3002\u5b66\u4e60\u66f2\u7ebf\u5728\u7f51\u4e0a\u6709\u4e00\u4e2a\u666e\u904d\u7684\u89c2\u70b9\uff0c\u8ba4\u4e3aDjango\u66f4\u5bb9\u6613\u5b66\u4e60\u3002\u8fd9\u662f\u663e\u800c\u6613\u89c1\u7684\uff0c\u7531\u4e8e\u5b83\u901a\u5e38\u90fd\u7528\u5728\u6ca1\u6709\u7279\u522b\u590d\u6742\u7684\u7528\u4f8b\u4e0a\u3002\u56e0\u6b64\uff0c\u5e94\u8be5\u8003\u8651\u613f\u610f\u6295\u5165\u591a\u5c11\u7cbe\u529b\u6765\u5b66\u4e60\u6846\u67b6\uff0c\u4e0eSQLAlchemy\u4ea4\u53c9\u5b66\u4e60\u4ee5\u4fbf\u83b7\u5f97\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff08\u5047\u4f7f\u4f60\u771f\u7684\u9700\u8981\u5b83\uff09\u3002\u793e\u533a\u89c4\u6a21\u6beb\u65e0\u7591\u95ee\uff0c\u5728PythonORM\u6846\u67b6\u4e2dSQLAlchemy\u62e5\u6709\u6700\u5927\u7684\u793e\u533a\u3002\u5982\u679c\u793e\u533a\u5bf9\u4f60\u81f3\u5173\u91cd\u8981\uff08\u6211\u8ba4\u4e3a\u5b83\u5e94\u8be5\u662f\uff09\uff0cSQLAlchemy\u8be5\u662f\u4f60\u7684\u9009\u62e9\u3002\u8fd9\u5e76\u4e0d\u8bf4\u660e\u5bf9\u4e8e\u5176\u5b83\u6846\u67b6\uff0c\u4f60\u4e0d\u80fd\u627e\u5230\u4efb\u4f55\u5e2e\u52a9\uff0c\u4f8b\u5982Django\u3002\u4f60\u4e5f\u53ef\u4ee5\u83b7\u5f97bug\u4fee\u590d\uff0c\u4eceStackOverflow\u5f97\u5230\u95ee\u9898\u7684\u7b54\u6848\u548c\u5176\u5b83\u9700\u8981\u7684\u5e2e\u52a9\uff0c\u4f46\u6982\u7387\u4ec5\u4ec5\u6bd4SQLAlchemy\u9ad8\u3002\u6027\u80fd\u6211\u8ba4\u4e3a\u53ea\u5728\u8fd9\u91cc\u5199\uff08X\u6bd4Y\u5feb\uff09\u662f\u4e0d\u8d1f\u8d23\u4efb\u7684\u3002\u7531\u4e8eORM\u5177\u6709\u5982\u6b64\u591a\u7279\u5f81\u548c\u529f\u80fd\uff0c\u5e76\u4e14\u5b83\u4eec\u5728\u6bcf\u4e2a\u6846\u67b6\u4e2d\u4e5f\u4e0d\u540c\uff0c\u8fd9\u5c06\u5f88\u96be\u5f97\u51fa\u7ed3\u8bba\u3002\u6839\u636e\u6211\u7684\u7ecf\u9a8c\uff0c\u4f7f\u7528\u6846\u67b6\u7279\u6027\u7684\u65b9\u5f0f\uff0c\u4f1a\u5bf9\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6570\u636e\u5c42\u7684\u6574\u4f53\u6027\u80fd\u4ea7\u751f\u6781\u5927\u5f71\u54cd\u3002\u56e0\u6b64\u6211\u5efa\u8bae\u4e0d\u8981\u901a\u8fc7\u6027\u80fd\u6765\u9009\u62e9\u6846\u67b6\uff0c\u800c\u662f\u5e94\u8be5\u5b66\u4e60\u5982\u4f55\u5408\u7406\u5229\u7528\u6846\u67b6\u3002\u5047\u5982\u5728ORM\u6846\u67b6\u4e2d\u4f7f\u7528\u539f\u59cb\u7684SQL\u67e5\u8be2\u3001\u4f7f\u7528Jooq\u6216\u8005\u53ea\u662f\u90e8\u5206\u67e5\u8be2\u4e0d\u4f7f\u7528ORM\uff0c\u53ef\u4ee5\u4e86\u89e3EverSQL\u67e5\u8be2\u4f18\u5316\u5668\uff0c\u8fd9\u53ef\u80fd\u662f\u6700\u7b80\u5355\u4f18\u5316\u4efb\u4f55\u67e5\u8be2\u7684\u65b9\u6cd5\u3002\u603b\u7ed3\u4efb\u4f55\u6bd4\u8f83\u4e2d\uff0c\u6211\u8ba4\u4e3a\u6700\u597d\u628a\u51b3\u7b56\u6743\u4ea4\u8fd8\u7ed9\u8bfb\u8005\u3002\u6bcf\u4e2a\u7528\u4f8b\u4e4b\u95f4\u662f\u4e0d\u540c\u7684\uff0c\u4e0d\u540c\u7684\u6280\u672f\u4e5f\u53ef\u4ee5\u66f4\u9002\u7528\u3002\u770b\u770b\u4e0a\u9762\u6307\u51fa\u7684\u5dee\u5f02\uff0c\u8ba9\u6211\u4eec\u77e5\u9053\u4f60\u505a\u51fa\u4e86\u4ec0\u4e48\u51b3\u5b9a\u30021\u8d5e4\u6536\u85cf1\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aPJing\u7b80\u4ecb\u771f\u8fd8\u6ca1\u6765\u5f97\u53ca\u5199:\uff09:(\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b713"]},
{"art_title": ["Bottle \u6846\u67b6\u4e2d\u7684\u88c5\u9970\u5668\u7c7b\u548c\u63cf\u8ff0\u7b26\u5e94\u7528"], "art_url": ["http://python.jobbole.com/88701/"], "art_create_time": ["2017/10/15"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aRookie\u00a0\u00a0\u00a0\u6700\u8fd1\u5728\u9605\u8bfbPython\u5fae\u578bWeb\u6846\u67b6Bottle\u7684\u6e90\u7801\uff0c\u53d1\u73b0\u4e86Bottle\u4e2d\u6709\u4e00\u4e2a\u65e2\u662f\u88c5\u9970\u5668\u7c7b\u53c8\u662f\u63cf\u8ff0\u7b26\u7684\u6709\u8da3\u5b9e\u73b0\u3002\u521a\u597d\u8fd9\u4e24\u4e2a\u70b9\u662fPython\u6bd4\u8f83\u7684\u96be\u7406\u89e3\uff0c\u53c8\u6df7\u5408\u5728\u4e00\u8d77\uff0c\u8ba9\u4ee3\u7801\u6709\u4e9b\u6666\u6da9\u96be\u61c2\u3002\u4f46\u7406\u89e3\u4ee3\u7801\u4e4b\u540e\u4e0d\u7531\u5f97\u4e3aPython\u8bed\u8a00\u7684\u7b80\u6d01\u4f18\u7f8e\u8d5e\u53f9\u3002\u6240\u4ee5\u628a\u76f8\u5173\u77e5\u8bc6\u548c\u60f3\u6cd5\u7a0d\u5fae\u6574\u7406\uff0c\u4ee5\u4f9b\u5206\u4eab\u3002\u6b63\u6587Bottle\u662fPython\u7684\u4e00\u4e2a\u5fae\u578bWeb\u6846\u67b6\uff0c\u6240\u6709\u4ee3\u7801\u90fd\u5728\u4e00\u4e2abottle.py\u6587\u4ef6\u4e2d\uff0c\u53ea\u4f9d\u8d56\u6807\u51c6\u5e93\u5b9e\u73b0\uff0c\u517c\u5bb9Python2\u548cPython3\uff0c\u800c\u4e14\u6700\u65b0\u7684\u7a33\u5b9a\u72480.12\u4ee3\u7801\u4e5f\u53ea\u67093700\u884c\u5de6\u53f3\u3002\u867d\u7136\u5c0f\uff0c\u4f46\u5b83\u5b9e\u73b0\u4e86Web\u6846\u67b6\u57fa\u672c\u529f\u80fd\u3002\u8fd9\u91cc\u5c31\u4e0d\u4ee5\u8fc7\u591a\u7684\u7b14\u58a8\u53bb\u5c55\u793aBottle\u6846\u67b6\uff0c\u9700\u8981\u7684\u8bf7\u8bbf\u95ee\u5176\u7f51\u7ad9\u4e86\u89e3\u66f4\u591a\u3002\u8fd9\u91cc\u7740\u91cd\u4ecb\u7ecd\u4e0e\u672c\u6587\u76f8\u5173\u7684\u91cd\u8981\u5bf9\u8c61request\u3002\u5728Bottle\u91cc\uff0crequest\u5bf9\u8c61\u4ee3\u8868\u4e86\u5f53\u524d\u7ebf\u7a0b\u5904\u7406\u7684\u8bf7\u6c42\uff0c\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u8bf7\u6c42\u6570\u636e\u5982\u8868\u5355\u6570\u636e\uff0c\u8bf7\u6c42\u7f51\u7ad9\u548ccookie\u90fd\u53ef\u4ee5\u4ecerequest\u5bf9\u8c61\u4e2d\u83b7\u5f97\u3002\u4e0b\u9762\u662f\u5b98\u65b9\u6587\u6863\u4e2d\u7684\u4e24\u4e2a\u4f8b\u5b50frombottleimportrequest,route,response,templatePython#\u83b7\u53d6\u5ba2\u6237\u7aefcookie\u4ee5\u5b9e\u73b0\u767b\u9646\u65f6\u95ee\u5019\u7528\u6237\u529f\u80fd@route('/hello')defhello():name=request.cookie.usernameor'Guest'returntemplate('Hello{{name}}',name=name)#\u83b7\u53d6\u5f62\u5982/forum?id=1&page=5\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2did\u548cpage\u53d8\u91cf\u7684\u503croute('/forum')defdisplay_forum():forum_id=request.query.idpage=request.query.pageor'1'returntemplate('ForumID:{{id}}(page{{page}})',id=forum_id,page=page)123456789101112#\u83b7\u53d6\u5ba2\u6237\u7aefcookie\u4ee5\u5b9e\u73b0\u767b\u9646\u65f6\u95ee\u5019\u7528\u6237\u529f\u80fd@route('/hello')defhello():\u00a0\u00a0\u00a0\u00a0name=request.cookie.usernameor'Guest'\u00a0\u00a0\u00a0\u00a0returntemplate('Hello{{name}}',name=name)\u00a0#\u83b7\u53d6\u5f62\u5982/forum?id=1&page=5\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2did\u548cpage\u53d8\u91cf\u7684\u503croute('/forum')defdisplay_forum():\u00a0\u00a0\u00a0\u00a0forum_id=request.query.id\u00a0\u00a0\u00a0\u00a0page=request.query.pageor'1'\u00a0\u00a0\u00a0\u00a0returntemplate('ForumID:{{id}}(page{{page}})',id=forum_id,page=page)\u90a3\u4e48Bottle\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u5462\uff1f\u6839\u636eWSGI\u63a5\u53e3\u89c4\u5b9a\uff0c\u6240\u6709\u7684HTTP\u8bf7\u6c42\u4fe1\u606f\u90fd\u5305\u542b\u5728\u4e00\u4e2a\u540d\u4e3aenvrion\u7684dict\u5bf9\u8c61\u4e2d\u3002\u6240\u4ee5Bottle\u8981\u505a\u7684\u5c31\u662f\u628aHTTP\u8bf7\u6c42\u4fe1\u606f\u4eceenviron\u89e3\u6790\u51fa\u6765\u3002\u5728\u6df1\u5165Request\u7c7b\u5982\u4f55\u5b9e\u73b0\u4e4b\u524d\u5148\u8981\u4e86\u89e3\u4e0bBottle\u7684FormsDict\u3002FormsDict\u4e0e\u5b57\u5178\u7c7b\u76f8\u4f3c\uff0c\u4f46\u6269\u5c55\u4e86\u4e00\u4e9b\u529f\u80fd\uff0c\u6bd4\u5982\u652f\u6301\u5c5e\u6027\u8bbf\u95ee\u3001\u4e00\u5bf9\u591a\u7684\u952e\u503c\u5bf9\u3001WTForms\u652f\u6301\u7b49\u3002\u5b83\u5728Bottle\u4e2d\u88ab\u5e7f\u6cdb\u5e94\u7528\uff0c\u5982\u4e0a\u9762\u7684\u793a\u4f8b\u4e2dcookie\u548cquery\u6570\u636e\u90fd\u4ee5FormsDict\u5b58\u50a8\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528request.query.page\u7684\u65b9\u5f0f\u83b7\u53d6\u76f8\u5e94\u5c5e\u6027\u503c\u3002\u4e0b\u9762\u662f0.12\u7248Bottle\u4e2dRequest\u7c7b\u7684\u90e8\u5206\u4ee3\u7801\uff0c0.12\u7248\u4e2dRequest\u7c7b\u7ee7\u627f\u4e86BaseRequest\uff0c\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\u6211\u628a\u4ee3\u7801\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u540c\u65f6\u8fd8\u6709\u91cd\u8981\u7684DictProperty\u7684\u4ee3\u7801\u3002\u9700\u8981\u8bf4\u660e\u7684\u662fRequest\u7c7b__init__\u4f20\u5165\u7684environ\u53c2\u6570\u5c31\u662fWSGI\u534f\u8bae\u4e2d\u5305\u542bHTTP\u8bf7\u6c42\u4fe1\u606f\u7684envrion\uff0c\u800cquery\u65b9\u6cd5\u4e2d\u7684_parse_qsl\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u5f62\u5982/forum?id=1&page=5\u539f\u59cb\u67e5\u8be2\u5b57\u7b26\u4e32\u7136\u540e\u4ee5[(key1,value1),(ke2,value2),\u2026]\u7684list\u8fd4\u56de\u3002PythonclassDictProperty(object):\"\"\"Propertythatmapstoakeyinalocaldict-likeattribute.\"\"\"def__init__(self,attr,key=None,read_only=False):self.attr,self.key,self.read_only=attr,key,read_onlydef__call__(self,func):functools.update_wrapper(self,func,updated=[])self.getter,self.key=func,self.keyorfunc.__name__returnselfdef__get__(self,obj,cls):ifobjisNone:returnselfkey,storage=self.key,getattr(obj,self.attr)ifkeynotinstorage:storage[key]=self.getter(obj)returnstorage[key]def__set__(self,obj,value):ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")getattr(obj,self.attr)[self.key]=valuedef__delete__(self,obj):ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")delgetattr(obj,self.attr)[self.key]classRequest:def__init__(self,environ=None):self.environ{}ifenvironisNoneelseenvrionself.envrion['bottle.request']=self@DictProperty('environ','bottle.request.query',read_only=True)defquery(self):get=self.environ['bottle.get']=FormsDict()pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))forkey,valueinpairs:get[key]=valuereturnget12345678910111213141516171819202122232425262728293031323334353637classDictProperty(object):\u00a0\u00a0\u00a0\u00a0\"\"\"Propertythatmapstoakeyinalocaldict-likeattribute.\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,attr,key=None,read_only=False):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.attr,self.key,self.read_only=attr,key,read_only\u00a0\u00a0\u00a0\u00a0\u00a0def__call__(self,func):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0functools.update_wrapper(self,func,updated=[])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.getter,self.key=func,self.keyorfunc.__name__\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself\u00a0\u00a0\u00a0\u00a0\u00a0def__get__(self,obj,cls):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifobjisNone:returnself\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0key,storage=self.key,getattr(obj,self.attr)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifkeynotinstorage:storage[key]=self.getter(obj)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnstorage[key]\u00a0\u00a0\u00a0\u00a0\u00a0def__set__(self,obj,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0getattr(obj,self.attr)[self.key]=value\u00a0\u00a0\u00a0\u00a0\u00a0def__delete__(self,obj):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delgetattr(obj,self.attr)[self.key]\u00a0classRequest:\u00a0\u00a0\u00a0\u00a0def__init__(self,environ=None):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.environ{}ifenvironisNoneelseenvrion\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.envrion['bottle.request']=self\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0@DictProperty('environ','bottle.request.query',read_only=True)\u00a0\u00a0\u00a0\u00a0defquery(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get=self.environ['bottle.get']=FormsDict()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkey,valueinpairs:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get[key]=value\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returngetquery\u65b9\u6cd5\u7684\u903b\u8f91\u548c\u4ee3\u7801\u90fd\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u4eceenviron\u4e2d\u83b7\u53d6\u2019QUERY_STRING\u2019\uff0c\u5e76\u7528\u628a\u539f\u59cb\u67e5\u8be2\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u4e00\u4e2aFormsDict\uff0c\u5c06\u8fd9\u4e2aFormsDict\u8d4b\u503c\u7ed9environ[\u2018bottle.request.query\u2019]\u5e76\u8fd4\u56de\u3002\u4f46\u8fd9\u4e2a\u51fd\u6570\u7684\u88c5\u9970\u5668\u7684\u4f5c\u7528\u5c31\u6709\u4e9b\u96be\u4ee5\u7406\u89e3\uff0c\u88c5\u9970\u5668\u7684\u5b9e\u73b0\u65b9\u5f0f\u90fd\u662f\u201ddunder\u201d\u7279\u6b8a\u65b9\u6cd5\uff0c\u6709\u4e9b\u6666\u6da9\u96be\u61c2\u3002\u5982\u679c\u4e0a\u6765\u5c31\u770b\u8fd9\u4e9b\u6e90\u7801\u53ef\u80fd\u96be\u4ee5\u7406\u89e3\u4ee3\u7801\u5b9e\u73b0\u7684\u529f\u80fd\u3002\u90a3\u4e0d\u5982\u8fd9\u4e9b\u653e\u4e00\u8fb9\uff0c\u5047\u8bbe\u81ea\u5df1\u8981\u5b9e\u73b0\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u4f60\u4f1a\u5199\u51fa\u4ec0\u4e48\u4ee3\u7801\u3002\u4e00\u5f00\u59cb\u4f60\u53ef\u80fd\u5199\u51fa\u8fd9\u6837\u7684\u4ee3\u7801\u3002Python#version1classRequest:\"\"\"somecodeshere\"\"\"defquery(self):get=self.environ['bottle.get']=FormsDict()pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))forkey,valueinpairs:get[key]=valuereturnget1234567891011#version1classRequest:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0somecodeshere\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0defquery(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get=self.environ['bottle.get']=FormsDict()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkey,valueinpairs:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get[key]=value\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnget\u8fd9\u6837\u786e\u5b9e\u5b9e\u73b0\u4e86\u89e3\u6790\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u529f\u80fd\uff0c\u4f46\u6bcf\u6b21\u5728\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u65f6\u90fd\u9700\u8981\u5bf9\u539f\u59cb\u67e5\u8be2\u5b57\u7b26\u4e32\u89e3\u6790\u4e00\u6b21\uff0c\u5b9e\u9645\u4e0a\u5728\u5904\u7406\u67d0\u7279\u8bf7\u6c42\u65f6\uff0c\u67e5\u8be2\u5b57\u7b26\u4e32\u662f\u4e0d\u4f1a\u6539\u53d8\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u89e3\u6790\u4e00\u6b21\u5e76\u628a\u5b83\u4fdd\u5b58\u8d77\u6765\uff0c\u4e0b\u6b21\u4f7f\u7528\u65f6\u76f4\u63a5\u8fd4\u56de\u5c31\u597d\u4e86\u3002\u53e6\u5916\u6b64\u65f6\u7684query\u65b9\u6cd5\u8fd8\u662f\u4e00\u4e2a\u666e\u901a\u65b9\u6cd5\uff0c\u5fc5\u987b\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\u6765\u8c03\u7528\u5b83Python#\u83b7\u53d6idrequest.query().id#\u83b7\u53d6pagerequest.query().page1234#\u83b7\u53d6idrequest.query().id#\u83b7\u53d6pagerequest.query().pagequery\u540e\u9762\u7684\u5c0f\u62ec\u53f7\u8ba9\u8bed\u53e5\u663e\u5f97\u4e0d\u90a3\u4e48\u534f\u8c03\uff0c\u5176\u5b9e\u5c31\u662f\u6211\u89c9\u5f97\u5b83\u4e11\u3002\u8981\u662f\u4e5f\u80fd\u548c\u5b98\u65b9\u6587\u6863\u4e2d\u7684\u793a\u4f8b\u5b9e\u73b0\u4ee5\u5c5e\u6027\u8bbf\u95ee\u7684\u65b9\u5f0f\u83b7\u53d6\u76f8\u5e94\u7684\u6570\u636e\u5c31\u597d\u4e86\u3002\u6240\u4ee5\u4ee3\u7801\u8fd8\u5f97\u6539\u6539\u3002Python#querymethodversion2classRequest:\"\"\"somecodeshere\"\"\"@propertydefquery(self):if'bootle.get.query'notinself.environ:get=self.environ['bottle.get']=FormsDict()pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))forkey,valueinpairs:get[key]=valuereturnself.environ['bottle.get.query']12345678910111213#querymethodversion2classRequest:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0somecodeshere\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0@property\u00a0\u00a0\u00a0\u00a0defquery(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if'bootle.get.query'notinself.environ:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get=self.environ['bottle.get']=FormsDict()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkey,valueinpairs:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get[key]=value\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.environ['bottle.get.query']\u7b2c\u4e8c\u7248\u6539\u53d8\u7684\u4ee3\u7801\u5c31\u4e24\u5904\uff0c\u4e00\u4e2a\u662f\u4f7f\u7528property\u88c5\u9970\u5668\uff0c\u5b9e\u73b0\u4e86request.query\u7684\u8bbf\u95ee\u65b9\u5f0f\uff1b\u53e6\u4e00\u4e2a\u5c31\u662f\u5728query\u51fd\u6570\u4f53\u4e2d\u589e\u52a0\u4e86\u5224\u65ad\u2019bottle.get.query\u2019\u662f\u5426\u5728environ\u4e2d\u7684\u5224\u65ad\u8bed\u53e5\uff0c\u5b9e\u73b0\u4e86\u53ea\u89e3\u6790\u4e00\u6b21\u7684\u8981\u6c42\u3002\u7b2c\u4e8c\u7248\u51e0\u4e4e\u6ee1\u8db3\u4e86\u6240\u6709\u8981\u6c42\uff0c\u5b83\u8868\u73b0\u5f97\u5c31\u50cfBottle\u4e2d\u771f\u6b63\u7684query\u65b9\u6cd5\u4e00\u6837\u3002\u4f46\u5b83\u8fd8\u662f\u6709\u4e9b\u7f3a\u9677\u3002\u9996\u5148\uff0cRequest\u7c7b\u5e76\u4e0d\u53ea\u6709query\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5982\u679c\u8981\u7f16\u5199\u5b8c\u6574\u7684Request\u7c7b\u5c31\u4f1a\u53d1\u73b0\uff0c\u6709\u5f88\u591a\u65b9\u6cd5\u7684\u4ee3\u7801\u4e0equery\u76f8\u4f3c\uff0c\u90fd\u662f\u4eceenviron\u4e2d\u89e3\u6790\u51fa\u9700\u8981\u7684\u6570\u636e\uff0c\u800c\u4e14\u90fd\u53ea\u9700\u8981\u89e3\u6790\u4e00\u6b21\uff0c\u4fdd\u5b58\u8d77\u6765\uff0c\u7b2c\u4e8c\u6b21\u6216\u4ee5\u540e\u8bbf\u95ee\u65f6\u8fd4\u56de\u4fdd\u5b58\u7684\u6570\u636e\u5c31\u597d\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u5c06\u5c5e\u6027\u7ba1\u7406\u7684\u4ee3\u7801\u4ece\u65b9\u6cd5\u4f53\u5185\u62bd\u8c61\u51fa\u6765\uff0c\u6b63\u597dPython\u4e2d\u7684\u63cf\u8ff0\u7b26\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u6837\u7684\u529f\u80fd\u3002\u53e6\u5916\u5982\u679c\u4f7f\u7528Bottle\u7684\u5f00\u53d1\u8005\u5728\u5199\u4ee3\u7801\u65f6\u4e0d\u5c0f\u5fc3\u5c1d\u8bd5\u8fdb\u884crequest.query=some_data\u7684\u8d4b\u503c\u65f6\uff0c\u5c06\u4f1a\u629b\u51fa\u5982\u4e0b\u9519\u8bef\u3002Python>>>AttributeError:can'tsetattribute1>>>AttributeError:can'tsetattribute\u6211\u4eec\u786e\u5b9e\u5e0c\u671b\u5c5e\u6027\u662f\u53ea\u8bfb\u7684\uff0c\u5728\u5bf9\u5176\u8d4b\u503c\u65f6\u5e94\u8be5\u629b\u51fa\u9519\u8bef\uff0c\u4f46\u8fd9\u6837\u7684\u62a5\u9519\u4fe1\u606f\u5e76\u6ca1\u6709\u63d0\u4f9b\u592a\u591a\u6709\u7528\u7684\u4fe1\u606f\uff0c\u5bfc\u81f4\u8c03bug\u65f6\u4e00\u5934\u96fe\u6c34\uff0c\u627e\u4e0d\u5230\u65b9\u5411\u3002\u6211\u4eec\u66f4\u5e0c\u671b\u629b\u51fa\u5982Python>>>AttributeError:Read-onlyproperty1>>>AttributeError:Read-onlyproperty\u8fd9\u6837\u660e\u786e\u7684\u9519\u8bef\u4fe1\u606f\u3002\u6240\u4ee5\u7b2c\u4e09\u7248\u7684\u4ee3\u7801\u53ef\u4ee5\u8fd9\u6837\u5199Python#querymethodversion3classDescriptor:def__init__(self,attr,key,getter,read_only=False):self.attr=attrself.key=keyself.getter=getterself.read_only=read_onlydef__set__(self,obj,value):ifself.read_only:raiseAttributeError('Readonlyproperty.')getattr(obj,self.attr)[self.key]=valuedef__get__(self,obj,cls):ifobjisNone:returnselfkey,storage=self.key,getattr(obj,self.attr)ifkeynotinstorage:storage[key]=self.getter(obj)returnstorage[key]def__delete__(self,obj):ifself.read_only:raiseAttributeError('Readonlyproperty.')delgetattr(obj,self.attr)[self.key]classReqeust:\"\"\"somecodes\"\"\"defquery(self):get=self.environ['bottle.get']=FormsDict()pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))forkey,valueinpairs:get[key]=valuereturngetquery=Descriptor('environ','bottle.get.query',query,read_only=True)12345678910111213141516171819202122232425262728293031323334353637#querymethodversion3classDescriptor:\u00a0\u00a0\u00a0\u00a0def__init__(self,attr,key,getter,read_only=False):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.attr=attr\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.key=key\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.getter=getter\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.read_only=read_only\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__set__(self,obj,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.read_only:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseAttributeError('Readonlyproperty.')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0getattr(obj,self.attr)[self.key]=value\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__get__(self,obj,cls):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifobjisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0key,storage=self.key,getattr(obj,self.attr)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifkeynotinstorage:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0storage[key]=self.getter(obj)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnstorage[key]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0def__delete__(self,obj):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.read_only:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseAttributeError('Readonlyproperty.')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delgetattr(obj,self.attr)[self.key]\u00a0classReqeust:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0somecodes\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0defquery(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get=self.environ['bottle.get']=FormsDict()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pairs=_parse_qsl(self.environ.get('QUERY_STRING',''))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkey,valueinpairs:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0get[key]=value\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnget\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0query=Descriptor('environ','bottle.get.query',query,read_only=True)\u7b2c\u4e09\u7248\u7684\u4ee3\u7801\u6ca1\u6709\u4f7f\u7528property\u88c5\u9970\u5668\uff0c\u800c\u662f\u4f7f\u7528\u4e86\u63cf\u8ff0\u7b26\u8fd9\u4e2a\u6280\u5de7\u3002\u5982\u679c\u4f60\u4e4b\u524d\u6ca1\u6709\u89c1\u5230\u8fc7\u63cf\u8ff0\u7b26\uff0c\u5728\u8fd9\u91cc\u9650\u4e8e\u7bc7\u5e45\u53ea\u80fd\u505a\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\uff0c\u4f46\u63cf\u8ff0\u7b26\u6d89\u53ca\u77e5\u8bc6\u70b9\u4f17\u591a\uff0c\u5982\u679c\u6709\u4e0d\u6e05\u695a\u4e4b\u5904\u53ef\u4ee5\u770b\u770b\u300a\u6d41\u7545\u7684Python\u300b\u7b2c20\u7ae0\u5c5e\u6027\u63cf\u8ff0\u7b26\uff0c\u91cc\u9762\u6709\u975e\u5e38\u8be6\u7ec6\u7684\u4ecb\u7ecd\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u63cf\u8ff0\u7b26\u662f\u5bf9\u591a\u4e2a\u5c5e\u6027\u8fd0\u7528\u76f8\u540c\u5b58\u53d6\u903b\u8f91\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u5982Bottle\u6846\u67b6\u91cc\u6211\u4eec\u9700\u8981\u5bf9\u5f88\u591a\u5c5e\u6027\u90fd\u8fdb\u884c\u5224\u65ad\u67d0\u4e2a\u952e\u662f\u5426\u5728environ\u4e2d\uff0c\u5982\u679c\u5728\u5219\u8fd4\u56de\uff0c\u5982\u679c\u4e0d\u5728\uff0c\u9700\u8981\u89e3\u6790\u4e00\u6b21\u8fd9\u6837\u7684\u5b58\u53d6\u903b\u8f91\u3002\u800c\u63cf\u8ff0\u7b26\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u534f\u8bae\uff0c\u5305\u62ec__set__,__get__,__delete___\u65b9\u6cd5\uff0c\u5206\u522b\u5bf9\u5e94\u8bbe\u7f6e\uff0c\u8bfb\u53d6\u548c\u5220\u9664\u5c5e\u6027\u7684\u65b9\u6cd5\u3002\u4ed6\u4e48\u7684\u53c2\u6570\u4e5f\u6bd4\u8f83\u7279\u6b8a\uff0c\u5982__get__\u65b9\u6cd5\u7684\u4e09\u4e2a\u53c2\u6570self,obj,cls\u5206\u522b\u5bf9\u5e94\u63cf\u8ff0\u7b26\u5b9e\u4f8b\u7684\u5f15\u7528\uff0c\u5bf9\u7b2c\u4e09\u7248\u7684\u4ee3\u7801\u6765\u8bf4\u5c31\u662fDescriptor(\u2018environ\u2019,\u2018bottle.get.query\u2019,query,read_only=True)\u521b\u5efa\u7684\u5b9e\u4f8b\u7684\u5f15\u7528\uff1bobj\u5219\u5bf9\u5e94\u5c06\u67d0\u4e2a\u5c5e\u6027\u6258\u7ba1\u7ed9\u63cf\u8ff0\u7684\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5bf9\u5e94\u7684\u5e94\u8be5\u4e3arequest\u5bf9\u8c61\uff1b\u800ccls\u5219\u4e3aRequest\u7c7b\u7684\u5f15\u7528\u3002\u5728\u8c03\u7528request.query\u65f6\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u4f20\u5165\u8fd9\u4e9b\u53c2\u6570\u3002\u5982\u679c\u4ee5Request.query\u7684\u65b9\u5f0f\u8c03\u7528\uff0c\u90a3\u4e48obj\u53c2\u6570\u7684\u4f20\u5165\u503c\u4e3aNone\uff0c\u8fd9\u65f6\u5019\u901a\u5e38\u7684\u5904\u7406\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u5b9e\u4f8b\u3002\u5728Descriptor\u4e2d__get__\u65b9\u6cd5\u7684\u4ee3\u7801\u6700\u591a\uff0c\u4e5f\u6bd4\u8f83\u96be\u7406\u89e3\uff0c\u4f46\u5982\u679c\u8bb0\u4f4f\u5176\u53c2\u6570\u7684\u610f\u4e49\u4e5f\u6ca1\u90a3\u4e48\u96be\u3002\u4e0b\u9762\u4ee5query\u7684\u5b9e\u73b0\u4e3a\u4f8b\uff0c\u6211\u6dfb\u52a0\u4e00\u4e9b\u6ce8\u91ca\u6765\u5e2e\u52a9\u7406\u89e3Pythonkey,storage=self.key,getattr(obj,self.attr)#key='bottle.get.query'#storage=environ\u5373\u5305\u542bHTTP\u8bf7\u6c42\u7684\u4fe1\u606f\u7684environ#\u5224\u65adenvrion\u4e2d\u662f\u5426\u5305\u542bkey\u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u89e3\u6790ifkeynotinstorage:storage[key]=self.getter(obj)#self.getter(obj)\u5c31\u662f\u8c03\u7528\u4e86\u539f\u6765\u7684query\u65b9\u6cd5\uff0c\u4e0d\u8fc7\u8981\u4f20\u5165\u4e00\u4e2aRequest\u5b9e\u4f8b\uff0c\u4e5f\u5c31\u662fobjreturnstorage[key]123456789key,storage=self.key,getattr(obj,self.attr)#key='bottle.get.query'#storage=environ\u5373\u5305\u542bHTTP\u8bf7\u6c42\u7684\u4fe1\u606f\u7684environ\u00a0#\u5224\u65adenvrion\u4e2d\u662f\u5426\u5305\u542bkey\u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u89e3\u6790ifkeynotinstorage:\u00a0\u00a0\u00a0\u00a0storage[key]=self.getter(obj)\u00a0\u00a0\u00a0\u00a0#self.getter(obj)\u5c31\u662f\u8c03\u7528\u4e86\u539f\u6765\u7684query\u65b9\u6cd5\uff0c\u4e0d\u8fc7\u8981\u4f20\u5165\u4e00\u4e2aRequest\u5b9e\u4f8b\uff0c\u4e5f\u5c31\u662fobjreturnstorage[key]\u800c__set__,__delete__\u4ee3\u7801\u6bd4\u8f83\u7b80\u5355\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u628a\u53ea\u8bfb\u5c5e\u6027\u5728\u8d4b\u503c\u548c\u5220\u9664\u65f6\u629b\u51fa\u7684\u9519\u8bef\u5b9a\u5236\u4e3aAttributeError(\u2018Readonlyproperty.\u2019)\uff0c\u65b9\u4fbf\u8c03\u8bd5\u3002\u901a\u8fc7\u4f7f\u7528\u63cf\u8ff0\u7b26\u8fd9\u4e2a\u6709\u4e9b\u96be\u61c2\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728Request\u7684\u65b9\u6cd5\u4e2d\u4e13\u5fc3\u4e8e\u7f16\u5199\u5982\u4f55\u89e3\u6790\u7684\u4ee3\u7801\uff0c\u4e0d\u7528\u62c5\u5fc3\u5c5e\u6027\u7684\u5b58\u53d6\u903b\u8f91\u3002\u548c\u5728\u6bcf\u4e2a\u65b9\u6cd5\u4e2d\u90fd\u4f7f\u7528if\u5224\u65ad\u76f8\u6bd4\u9ad8\u5230\u4e0d\u77e5\u9053\u54ea\u91cc\u53bb\u3002\u4f46\u7f8e\u4e2d\u4e0d\u8db3\u7684\u662f\uff0c\u8fd9\u6837\u8ba9\u6211\u4eec\u7684\u65b9\u6cd5\u4ee3\u7801\u540e\u9762\u62d6\u7740\u4e00\u4e2a\u201c\u5c0f\u5c3e\u5df4\u201d\uff0c\u5373Pythonquery=Descriptor('envrion','bottle.get.query',query,read_only=True)1query=Descriptor('envrion','bottle.get.query',query,read_only=True)\u600e\u4e48\u53bb\u6389\u8fd9\u4e2a\u8fd9\u4e2a\u201c\u5c0f\u5c3e\u5df4\u201c\u5462\uff1f\u56de\u987e\u4e4b\u524d\u7684\u4ee3\u7801\u51e0\u4e4e\u90fd\u662f\u5bf9query\u4e4b\u7c7b\u7684\u65b9\u6cd5\u8fdb\u884c\u4fee\u9970\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u88c5\u9970\u5668\uff0c\u6bd5\u7adf\u88c5\u9970\u5668\u5c31\u662f\u5bf9\u67d0\u4e2a\u51fd\u6570\u8fdb\u884c\u4fee\u9970\u7684\uff0c\u800c\u4e14\u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u53c2\u6570\u5316\u7684\u88c5\u9970\u5668\uff0c\u8fd9\u6837\u624d\u80fd\u5c06envrion\u7b49\u53c2\u6570\u4f20\u9012\u7ed9\u88c5\u9970\u5668\u3002\u5982\u679c\u8981\u5b9e\u73b0\u53c2\u6570\u5316\u88c5\u9970\u5668\u5c31\u9700\u8981\u4e00\u4e2a\u88c5\u9970\u5668\u5de5\u5382\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\u88c5\u9970\u5668\u7684\u4ee3\u7801\u91cc\u9700\u8981\u5d4c\u5957\u81f3\u5c113\u4e2a\u51fd\u6570\u4f53\uff0c\u5199\u8d77\u6765\u6709\u5199\u7ed5\uff0c\u4ee3\u7801\u53ef\u9605\u8bfb\u6027\u4e5f\u6709\u5dee\u3002\u66f4\u5927\u7684\u95ee\u9898\u6765\u81ea\u5982\u4f55\u5c06\u63cf\u8ff0\u7b26\u4e0e\u88c5\u9970\u5668\u7ed3\u5408\u8d77\u6765\uff0c\u56e0\u4e3aDescriptor\u662f\u4e00\u4e2a\u7c7b\u800c\u4e0d\u662f\u65b9\u6cd5\u3002\u89e3\u51b3\u529e\u6cd5\u5176\u5b9e\u633a\u7b80\u5355\u7684\u3002\u5982\u679c\u77e5\u9053Python\u4e2d\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61\uff0c\u5b9e\u73b0\u4e86__call__\u65b9\u6cd5\u7684\u5bf9\u8c61\u53ef\u4ee5\u8868\u73b0\u5f97\u50cf\u51fd\u6570\u4e00\u6837\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4fee\u6539Descirptor\u7684\u4ee3\u7801\uff0c\u5b9e\u73b0__call__\u65b9\u6cd5\uff0c\u8ba9\u5b83\u7684\u5b9e\u4f8b\u6210\u4e3acallable\u5bf9\u8c61\u5c31\u53ef\u4ee5\u628a\u5b83\u7528\u4f5c\u88c5\u9970\u5668\uff1b\u800c\u8981\u4f20\u5165\u7684\u53c2\u6570\u53ef\u4ee5\u4ee5\u5b9e\u4f8b\u5c5e\u6027\u5b58\u50a8\u8d77\u6765\uff0c\u901a\u8fc7self.attribute\u7684\u5f62\u5f0f\u8bbf\u95ee\uff0c\u800c\u4e0d\u662f\u50cf\u4f7f\u7528\u5de5\u5382\u51fd\u6570\u5b9e\u73b0\u53c2\u6570\u5316\u88c5\u9970\u5668\u65f6\u901a\u8fc7\u95ed\u5305\u6765\u5b9e\u73b0\u53c2\u6570\u7684\u8bbf\u95ee\u83b7\u53d6\u3002\u8fd9\u65f6\u5019\u518d\u6765\u770b\u770bBottle\u91cc\u7684DictProperty\u4ee3\u7801PythonclassDictProperty(object):\"\"\"Propertythatmapstoakeyinalocaldict-likeattribute.\"\"\"def__init__(self,attr,key=None,read_only=False):self.attr,self.key,self.read_only=attr,key,read_onlydef__call__(self,func):functools.update_wrapper(self,func,updated=[])self.getter,self.key=func,self.keyorfunc.__name__returnselfdef__get__(self,obj,cls):ifobjisNone:returnselfkey,storage=self.key,getattr(obj,self.attr)ifkeynotinstorage:storage[key]=self.getter(obj)returnstorage[key]def__set__(self,obj,value):ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")getattr(obj,self.attr)[self.key]=valuedef__delete__(self,obj):ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")delgetattr(obj,self.attr)[self.key]123456789101112131415161718192021222324classDictProperty(object):\u00a0\u00a0\u00a0\u00a0\"\"\"Propertythatmapstoakeyinalocaldict-likeattribute.\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,attr,key=None,read_only=False):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.attr,self.key,self.read_only=attr,key,read_only\u00a0\u00a0\u00a0\u00a0\u00a0def__call__(self,func):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0functools.update_wrapper(self,func,updated=[])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.getter,self.key=func,self.keyorfunc.__name__\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself\u00a0\u00a0\u00a0\u00a0\u00a0def__get__(self,obj,cls):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifobjisNone:returnself\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0key,storage=self.key,getattr(obj,self.attr)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifkeynotinstorage:storage[key]=self.getter(obj)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnstorage[key]\u00a0\u00a0\u00a0\u00a0\u00a0def__set__(self,obj,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0getattr(obj,self.attr)[self.key]=value\u00a0\u00a0\u00a0\u00a0\u00a0def__delete__(self,obj):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.read_only:raiseAttributeError(\"Read-Onlyproperty.\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delgetattr(obj,self.attr)[self.key]\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u6709\u63cf\u8ff0\u7b26\u4f5c\u7528\u7684\u88c5\u9970\u5668\u7c7b\uff0c\u5b83\u7684\u4f7f\u7528\u65b9\u6cd5\u5f88\u7b80\u5355\uff1aPython@DictProperty('environ','bottle.get.query',read_only=True)defquery(self):\"\"\"somecodes\"\"\"123@DictProperty('environ','bottle.get.query',read_only=True)defquery(self):\u00a0\u00a0\u00a0\u00a0\"\"\"somecodes\"\"\"\u62c6\u5f00\u4f1a\u66f4\u597d\u7406\u89e3\u70b9\uff1aPythonproperty=DictProperty('environ','bottle.get.query',read_only=True)@propertydefquery(self):\"\"\"somecodes\"\"\"1234property=DictProperty('environ','bottle.get.query',read_only=True)@propertydefquery(self):\u00a0\u00a0\u00a0\u00a0\"\"\"somecodes\"\"\"\u518d\u628a@\u5b9e\u73b0\u7684\u8bed\u6cd5\u7cd6\u62c6\u5f00\uff1aPythondefquery(self):\"\"\"somecodes\"\"\"property=DictProperty('environ','bottle.get.query',read_only=True)query=property(query)#@\u5b9e\u73b0\u7684\u8bed\u6cd5\u7cd612345defquery(self):\u00a0\u00a0\u00a0\u00a0\"\"\"somecodes\"\"\"\u00a0property=DictProperty('environ','bottle.get.query',read_only=True)query=property(query)#@\u5b9e\u73b0\u7684\u8bed\u6cd5\u7cd6\u518d\u4fee\u6539\u4ee5\u4e0b\u4ee3\u7801\u5f62\u5f0f\uff1aPythondefquery(self):\"\"\"somecodes\"\"\"query=DictProperty('environ','bottle.get.query',read_only=True)(query)1234defquery(self):\u00a0\u00a0\u00a0\u00a0\"\"\"somecodes\"\"\"\u00a0query=DictProperty('environ','bottle.get.query',read_only=True)(query)\u662f\u4e0d\u662f\u548c\u7b2c\u4e09\u7248\u7684\u5b9e\u73b0\u65b9\u5f0f\u975e\u5e38\u76f8\u4f3c\u3002Pythondefquery(self):\"\"\"somecodes\"\"\"query=Descriptor('environ','bottle.get.query',query,read_only=True)1234defquery(self):\u00a0\u00a0\u00a0\u00a0\"\"\"somecodes\"\"\"\u00a0query=Descriptor('environ','bottle.get.query',query,read_only=True)\u4f46\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u88c5\u9970\u5668\u628a\u65b9\u6cd5\u4f53\u540e\u9762\u90a3\u4e2a\u4e0d\u548c\u8c10\u7684\u8d4b\u503c\u8bed\u53e5\u201d\u5c0f\u5c3e\u5df4\u201c\u53bb\u6389\uff0c\u5c06\u5c5e\u6027\u5b58\u53d6\u7ba1\u7406\u62bd\u8c61\u51fa\u6765\uff0c\u800c\u4e14\u53ea\u9700\u8981\u4f7f\u7528\u4e00\u884c\u975e\u5e38\u7b80\u4fbf\u7684\u88c5\u9970\u5668\u628a\u8fd9\u4e2a\u529f\u80fd\u6dfb\u52a0\u5230\u67d0\u4e2a\u65b9\u6cd5\u4e0a\u3002\u8fd9\u4e5f\u8bb8\u5c31\u662fPython\u7684\u7f8e\u4e4b\u4e00\u5427\u3002\u5199\u5728\u540e\u9762DictProperty\u6d89\u53ca\u77e5\u8bc6\u8fdc\u4e0d\u6b62\u6587\u4e2d\u6d89\u53ca\u7684\u90a3\u4e48\u7b80\u5355\uff0c\u5982\u679c\u4f60\u8fd8\u662f\u4e0d\u6e05\u695aDictProperty\u7684\u5b9e\u73b0\u529f\u80fd\uff0c\u5efa\u8bae\u9605\u8bfb\u300a\u6d41\u7545\u7684Python\u300b\u7b2c7\u7ae0\u548c\u7b2c22\u7ae0\uff0c\u5bf9\u88c5\u9970\u5668\u548c\u63cf\u8ff0\u7b26\u6709\u8be6\u7ec6\u7684\u63cf\u8ff0\uff0c\u53e6\u5916\u300aPythonCookbook\u300b\u7b2c\u4e09\u7248\u7b2c9\u7ae0\u5143\u7f16\u7a0b\u6709\u5173\u4e8e\u53c2\u6570\u5316\u88c5\u9970\u5668\u548c\u88c5\u9970\u5668\u7c7b\u7684\u53d9\u8ff0\u548c\u793a\u4f8b\u3002\u5982\u679c\u4f60\u5bf9Bottle\u4e3a\u4ec0\u4e48\u8981\u5b9e\u73b0\u8fd9\u6837\u7684\u529f\u80fd\u611f\u5230\u56f0\u60d1\uff0c\u5efa\u8bae\u9605\u8bfbBottle\u7684\u6587\u6863\u548cWSGI\u76f8\u5173\u7684\u6587\u7ae0\u3002\u5176\u5b9e\u524d\u4e00\u9635\u518d\u9605\u8bfbBottle\u6e90\u7801\u65f6\u5c31\u60f3\u5199\u4e00\u7bc7\u6587\u7ae0\uff0c\u4f46\u5948\u4f55\u8bb8\u4e45\u4e0d\u5199\u4e1c\u897f\u6587\u7b14\u751f\u758f\u52a0\u4e0a\u533b\u9662\u5b9e\u4e60\u671f\u95f4\u53c8\u6bd4\u8f83\u5fd9\uff0c\u4e00\u76f4\u63a8\u5230\u73b0\u5728\u624d\u7ec8\u4e8e\u78d5\u78d5\u7eca\u7eca\u5730\u628a\u6211\u9605\u8bfb\u7684Bottle\u6e90\u7801\u7684\u4e00\u4e9b\u611f\u609f\u5199\u51fa\u6765\uff0c\u5e0c\u671b\u5bf9\u559c\u6b22Python\u7684\u5404\u4f4d\u6709\u4e9b\u5e2e\u52a9\u628a\u30021\u8d5e2\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python Metaclass \u521d\u63a2"], "art_url": ["http://python.jobbole.com/88703/"], "art_create_time": ["2017/10/15"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/86a1298ce44ca9807871520b81767e6f.gif"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1a\u897f\u5317\u90a3\u4e2a\u5cf0\u00a0\u00a0\u00a0\u5148\u4ee5\u4e00\u4e2a\u5927\u725b\u7684\u4e00\u6bb5\u5173\u4e8ePythonMetapgramming\u7684\u8457\u540d\u7684\u8bdd\u6765\u505a\u5f00\u5934\uff1aMetaclassesaredeepermagicthan99%ofusersshouldeverworryabout.Ifyouwonderwhetheryouneedthem,youdon\u2019t(thepeoplewhoactuallyneedthemknowwithcertaintythattheyneedthem,anddon\u2019tneedanexplanationaboutwhy).\u2013TimPeters\u7ffb\u8bd1\u4e00\u4e0b\uff1aMetaclasses\u662f99%\u7684\u7528\u6237\u90fd\u65e0\u9700\u8d39\u795e\u7684\u9ed1\u79d1\u6280\u3002\u5982\u679c\u4f60\u8fd8\u5728\u7ea0\u7ed3\u4f60\u662f\u4e0d\u662f\u9700\u8981\u5b83\u7684\u8bdd\uff0c\u7b54\u6848\u662fNO\uff08\u771f\u6b63\u9700\u8981\u7684\u4eba\u6839\u672c\u4e0d\u9700\u8981\u89e3\u91ca\uff09\u2013TimPeters\u8fd9\u662f\u4ec0\u4e48\u9b3c\u8bdd\uff1f\u9053\u53ef\u9053\uff0c\u975e\u5e38\u9053\u5417\uff1fMeta?\u597d\uff0c\u88c5B\u5df2\u6bd5\u3002\u8fd9\u786e\u5b9e\u662f\u4e00\u4e2a\u51b7\u50fb\u7684\uff0c\u4e0d\u5e38\u7528\u7684\u8bdd\u9898\u3002\u4e00\u7bc7\u77ed\u6587\u80af\u5b9a\u8bb2\u4e0d\u5b8c\u3002\u6240\u4ee5\u53eb\u505a\u521d\u63a2\u3002\u82f1\u6587meta\u8fd9\u4e2a\u8bcd\u5176\u5b9e\u662f\u4ece\u5e0c\u814a\u8bed\u91cc\u9762\u501f\u6765\u7684\u3002wikipedia\u4e0a\u7684\u89e3\u91ca\u662f\uff1aindicateaconceptwhichisanabstractionbehindanotherconcept,usedtocompleteoraddtothelatter\u4e0d\u770b\u8fd8\u597d\uff0c\u5176\u5b9e\u770b\u4e86\u66f4\u6655\u3002\u597d\u5728\u540e\u9762\u7684\u89e3\u91ca\u6709\u4e00\u53e5\u201c\u66f4\u9ad8\u4e00\u5c42\u7684\u62bd\u8c61\u201d\uff0c\u53ef\u4ee5\u5e2e\u52a9\u7406\u89e3\u3002\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\u3002meta\u7684\u610f\u601d\u5c31\u662f\u201c\u5173\u4e8e\u4ec0\u4e48\u7684\u4ec0\u4e48\u201d\uff1a\u6bd4\u5982metadata\u53ef\u4ee5\u7406\u89e3\u4e3a\u201c\u5173\u4e8e\u6570\u636e\u7684\u6570\u636e\u201d\uff0cmetaprogramming\u53ef\u4ee5\u7406\u89e3\u4e3a\u201c\u5173\u4e8e\u7f16\u7a0b\u7684\u7f16\u7a0b\u201d\u3002\u8fd9\u5c31\u548c\u201c\u66f4\u9ad8\u4e00\u5c42\u7684\u62bd\u8c61\u201d\u6bd4\u8f83\u5951\u5408\u4e86\u3002\u540c\u65f6\u53c8\u9690\u9690\u548c\u7f16\u7a0b\u4e2d\u7684\u53e6\u4e00\u4e2a\u6c38\u6052\u4e3b\u9898-recursion\u8054\u7cfb\u5728\u4e86\u4e00\u8d77\u3002\u53e6\u5916\uff0cmeta\u8fd9\u4e2a\u8bcd\u5929\u671d\u8fd9\u8fb9\u7ffb\u8bd1\u6210\u201c\u5143\u201d\uff0c\u6d77\u5ce1\u5bf9\u5cb8\u7ffb\u8bd1\u6210\u201c\u540e\u8bbe\u201d\u3002\u5176\u5b9e\u6211\u90fd\u4e0d\u5927\u7406\u89e3\u4ece\u4f55\u800c\u6765\u3002\u5b9e\u4f8b\u805a\u7126\u5230\u6211\u4eec\u4eca\u5929\u7684\u4e3b\u9898\uff0cmetaprogramming\u5c31\u662f\u7f16\u5199\u7528\u6765\u751f\u6210\u4ee3\u7801\u7684\u4ee3\u7801\u3002\u5047\u8bbe\u6211\u4eec\u5199\u4e86\u4e00\u4e2aNB\u7684\u51fd\u6570\uff0c\u7528\u6765\u8ba1\u7b97\u4e00\u4e2a\u4efb\u610f\u590d\u6742\u7684\u7b97\u6570\u8868\u8fbe\u5f0f\u7684\u503c\uff1a\u50cf1+2,3*6+10,\u4ec0\u4e48\u7684\u90fd\u53ef\u4ee5\u4ea4\u7ed9\u5b83\u53bb\u8ba1\u7b97\u3002\u8fd9\u6837\u7684\u51fd\u6570\u7684\u7b97\u6cd5\u4e0d\u662f\u6211\u4eec\u7684\u4e3b\u9898\uff0c\u6240\u4ee5\u6211\u4eec\u8bf7\u51fapython\u81ea\u5e26\u7684\u5927\u62dbeval()\uff0c\u4e00\u884c\u5c31\u53ef\u4ee5\u641e\u5b9a\u4e86\uff1aPythondefcalc(expression):returneval(expression)12defcalc(expression):\u00a0\u00a0\u00a0\u00a0returneval(expression)\u56e0\u4e3a\u8f93\u5165\u7684\u53ef\u80fd\u6027\u662f\u65e0\u9650\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u80af\u5b9a\u8981\u597d\u597d\u6d4b\u8bd5\u4e00\u4e0b\u8fd9\u4e2a\u51fd\u6570\u4e86\u3002\u5047\u5b9a\u6211\u4eec\u60f3\u4e86\u4e0a\u767e\u4e2atestcase\u3002\u53c8\u5047\u5b9a\u6211\u4eec\u662f\u7528unittest\u8fd9\u4e2amodule\u6765\u505a\u6d4b\u8bd5\u7684\u3002\u8fd9\u6837\u7684\u6d4b\u8bd5\u7a0b\u5e8f\u4e00\u822c\u4f1a\u957f\u6210\u8fd9\u6837\uff1aPythonimportunittestclassTestStringMethods(unittest.TestCase):deftest_upper(self):self.assertEqual('foo'.upper(),'FOO')deftest_isupper(self):self.assertTrue('FOO'.isupper())self.assertFalse('Foo'.isupper())deftest_split(self):s='helloworld'self.assertEqual(s.split(),['hello','world'])#checkthats.splitfailswhentheseparatorisnotastringwithself.assertRaises(TypeError):s.split(2)if__name__=='__main__':unittest.main()1234567891011121314151617181920importunittest\u00a0classTestStringMethods(unittest.TestCase):\u00a0\u00a0\u00a0\u00a0\u00a0deftest_upper(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.assertEqual('foo'.upper(),'FOO')\u00a0\u00a0\u00a0\u00a0\u00a0deftest_isupper(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.assertTrue('FOO'.isupper())\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.assertFalse('Foo'.isupper())\u00a0\u00a0\u00a0\u00a0\u00a0deftest_split(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s='helloworld'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.assertEqual(s.split(),['hello','world'])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#checkthats.splitfailswhentheseparatorisnotastring\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0withself.assertRaises(TypeError):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s.split(2)\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0unittest.main()\u6240\u4ee5\u6211\u4eec\u7684\u76ee\u7684\u5c31\u662f\u7528metaprogramming\u7684\u65b9\u5f0f\u6765\u81ea\u52a8\u4ea7\u751f\u7c7b\u4f3c\u4e0a\u9762\u7684\u6d4b\u8bd5\u7c7b\u3002\u5148\u4e0a\u7a0b\u5e8f\u540e\u89e3\u91ca\uff1aPython#!/usr/bin/python3importunittestdefcalc(expression):returneval(expression)defadd_test(name,asserts):deftest_method(asserts):deffn(self):left,right=asserts.split('=')expected=str(calc(left))self.assertEqual(expected,right)returnfnd={'test1':test_method(asserts)}cls=type(name,(unittest.TestCase,),d)globals()[name]=clsif__name__=='__main__':fori,tinenumerate([\"1+2=3\",\"3*5*6=90\"]):add_test(\"Test%d\"%i,t)unittest.main()123456789101112131415161718192021222324#!/usr/bin/python3importunittest\u00a0defcalc(expression):\u00a0\u00a0\u00a0\u00a0returneval(expression)\u00a0defadd_test(name,asserts):\u00a0\u00a0\u00a0\u00a0deftest_method(asserts):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deffn(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0left,right=asserts.split('=')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0expected=str(calc(left))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.assertEqual(expected,right)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnfn\u00a0\u00a0\u00a0\u00a0\u00a0d={'test1':test_method(asserts)}\u00a0\u00a0\u00a0\u00a0cls=type(name,(unittest.TestCase,),d)\u00a0\u00a0\u00a0\u00a0globals()[name]=cls\u00a0if__name__=='__main__':\u00a0\u00a0\u00a0\u00a0fori,tinenumerate([\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"1+2=3\",\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"3*5*6=90\"]):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0add_test(\"Test%d\"%i,t)\u00a0\u00a0\u00a0\u00a0unittest.main()NB\u7684calc()\u51fd\u6570\u6211\u4eec\u89e3\u91ca\u8fc7\u4e86\u3002main\u8fd9\u6bb5\u4e5f\u6bd4\u8f83\u7b80\u5355\uff1a\u6211\u4eec\u7528\u58f0\u660e\u7684\u65b9\u5f0f\u5b9a\u4e49\u4e86\u4e00\u7ec4\u6d4b\u8bd5\uff0c\u7136\u540e\u901a\u8fc7unittest\u6765\u6267\u884c\u3002\u6709\u70b9\u590d\u6742\u7684\u662fadd_test()\u3002\u6211\u4eec\u5148\u6765\u770b\u770b\u6700\u5185\u5c42\u7684fn(self)\u8fd9\u4e2a\u65b9\u6cd5\u3002\u903b\u8f91\u4e0a\uff0c\u5b83\u5c31\u662f\u628a\u8f93\u5165\u7684\u6d4b\u8bd5\u7528\u4f8b\u5206\u6210\u4e24\u4efd\uff0c\u4e00\u4efd\u662fcalc()\u7684\u8f93\u5165\uff0c\u4e00\u4efd\u662f\u6211\u4eec\u671f\u5f85\u7684\u7ed3\u679c\uff1b\u7136\u540e\u8c03\u7528calc(),\u63a5\u7740\u7528assertEqual()\u6765\u6d4b\u8bd5\u3002\u4f46\u662f\u8fd9\u4e2aself\u6709\u70b9\u5947\u602a\u2013\u8fd9\u91cc\u6ca1\u6709\u7c7b\uff0c\u54ea\u91cc\u6765\u7684self?\u5176\u5b9efn(self)\u786e\u5b9e\u662f\u4e00\u4e2a\u7c7b\u7684\u65b9\u6cd5\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e2a\u7c7b\u662f\u6211\u4eec\u901a\u8fc7\u4ee3\u7801\u52a8\u6001\u751f\u6210\u7684\u3002\u4e5f\u5c31\u662f\u4e0b\u9762\u8fd9\u4e00\u884c\uff1aPythoncls=type(name,(unittest.TestCase,),d)1cls=type(name,(unittest.TestCase,),d)\u8fd9\u91cc\u7684type()\u5c31\u662f\u901a\u5e38\u6211\u4eec\u7528\u6765\u68c0\u67e5\u67d0\u4e2a\u53d8\u91cf\u7684\u7c7b\u578b\u7684\u90a3\u4e2a\u51fd\u6570\u3002\u53ea\u4e0d\u8fc7\u5b83\u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u4e0d\u5927\u4e3a\u4eba\u77e5\u7684\u5f62\u5f0f\uff1aPythonclasstype(name,bases,dict)1classtype(name,bases,dict)\u8fd9\u7b2c\u4e8c\u79cd\u5f62\u5f0f\uff0c\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\u3002\u4ee5\u6211\u4eec\u7684\u7a0b\u5e8f\u4e3a\u4f8b\uff0c\u5c31\u662f\u4ee5unit.TestCase\u4e3abaseclass,\u4ea7\u751f\u4e86\u4e00\u4e2a\u540d\u4e3aTestN\u7684\u65b0\u7c7b\u578b\uff0c\u6539\u7c7b\u578b\u7684\u5b9e\u73b0\u7531d\u7ed9\u51fa\uff0c\u800cd\u5c31\u5305\u542b\u4e86\u901a\u8fc7closure\u8fd4\u56de\u7684fn(self)\u8fd9\u4e2a\u65b9\u6cd5\u3002\u53ea\u4e0d\u8fc7\u5728\u8fd9\u4e2a\u65b0\u7c7b\u91cc\u9762\uff0c\u5b83\u7684\u540d\u5b57\u53eb\u505atest1()\u3002\u6700\u540e\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u65b0\u4ea7\u751f\u7684\u7c7b\u52a0\u5165\u5230\u5f53\u524d\u5168\u5c40\u7b26\u53f7\u8868\u91cc\u9762\uff0c\u4e5f\u5c31\u76f8\u5f53\u4e8e\u4e0a\u9762\u7ed9\u51fa\u7684unittest\u7684\u4f8b\u5b50\u3002\u6240\u4ee5\uff0c\u603b\u7ed3\u4e00\u4e0b\u3002\u5f53\u6211\u4eec\u8fd0\u884c\u8fd9\u4e2a\u811a\u672c\u7684\u65f6\u5019\uff0c\u8fd9\u6bb5\u6bd4\u8f83\u77ed\u7684\u4ee3\u7801\u4f1a\u9488\u5bf9\u6bcf\u4e00\u4e2a\u6d4b\u8bd5\u7684\u8868\u8fbe\u5f0f\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u6d4b\u8bd5\u7c7b\uff0c\u5e76\u52a8\u6001\u751f\u6210\u6d4b\u8bd5\u7684\u65b9\u6cd5\u52a0\u8f7d\u5230\u8be5\u7c7b\u91cc\u9762\u3002unitest\u4eceglobals\u4e2d\u627e\u5230\u8fd9\u4e9b\u7c7b\u5e76\u4e00\u4e00\u6267\u884c\u6d4b\u8bd5\u3002\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5176\u5b9e\u4e00\u884c\u4e00\u884c\u624b\u6253calc(1+2)==3\u4e5f\u6ca1\u4ec0\u4e48\u5927\u4e0d\u4e86\u7684\u3002\u4f46\u662f\u5f53\u4f60\u8981\u8868\u8fbe\u7684\u903b\u8f91\u6bd4\u8f83\u590d\u6742\u7684\u65f6\u5019\uff0cmetaprogramming\u7684\u5f3a\u5927\u5c31\u4f53\u73b0\u51fa\u6765\u4e86\u3002\u603b\u7ed3\u90a3\u4e48\uff0c\u770b\u5b8c\u8fd9\u7bc7\u6587\u7ae0\uff0c\u6211\u4eec\u4e5f\u6210\u4e3aTim\u6240\u8bf4\u76841%\u7684\u7a0b\u5e8f\u733f\u4e86\uff01\u5176\u5b9e\uff0c\u4e5f\u8bb8\u4ed6\u7684\u610f\u601d\u662f\uff0c99%\u7684\u7f16\u7a0b\u5de5\u4f5c\u90fd\u7528\u4e0d\u5230\u8fd9\u6837\u6280\u5de7\u3002\u5728\u4e00\u4e9b\u7279\u6b8a\u7684\u573a\u5408\uff0c\u6bd4\u5982\u7f16\u5199\u67d0\u79cd\u6846\u67b6\u7684\u65f6\u5019\uff0cmetaprogramming\u4f1a\u505a\u5230\u4e8b\u534a\u529f\u500d\u3002\u795d\u4f60\u5728\u5b9e\u8df5\u4e2d\u78b0\u5230\u8fd9\u6837\u7684\u673a\u4f1a\u30021\u8d5e2\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-Platt SMO\u548c\u9057\u4f20\u7b97\u6cd5\u4f18\u5316SVM"], "art_url": ["http://python.jobbole.com/88706/"], "art_create_time": ["2017/10/16"], "art_img": ["http://pytlab.org/assets/images/blog_img/2017-10-15-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E5%AE%9E%E8%B7%B5-Platt-SMO%E5%92%8C%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E4%BC%98%E5%8C%96SVM/platt_smo.png"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-iPytLab\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u524d\u8a00\u4e4b\u524d\u5b9e\u73b0\u4e86\u7b80\u5355\u7684SMO\u7b97\u6cd5\u6765\u4f18\u5316SVM\u7684\u5bf9\u5076\u95ee\u9898\uff0c\u5176\u4e2d\u5728\u9009\u53d6\u03b1\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662f\u4e24\u91cd\u5faa\u73af\u901a\u8fc7\u5b8c\u5168\u968f\u673a\u7684\u65b9\u5f0f\u9009\u53d6\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u53c2\u8003\u300a\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5b9e\u8df5-SVM\u4e2d\u7684SMO\u7b97\u6cd5\u300b\u3002\u672c\u6587\u5728\u4e4b\u524d\u7b80\u5316\u7248SMO\u7b97\u6cd5\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u4e86\u4f7f\u7528\u542f\u53d1\u5f0f\u9009\u53d6\u03b1\u5bf9\u7684\u65b9\u5f0f\u7684PlattSMO\u7b97\u6cd5\u6765\u4f18\u5316SVM\u3002\u53e6\u5916\u7531\u4e8e\u6700\u8fd1\u81ea\u5df1\u4e5f\u5b9e\u73b0\u4e86\u4e00\u4e2a\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\uff0c\u4fbf\u4e5f\u5c1d\u8bd5\u4f7f\u7528\u9057\u4f20\u7b97\u6cd5\u5bf9\u4e8eSVM\u7684\u539f\u59cb\u5f62\u5f0f\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u5bf9\u4e8e\u672c\u6587\u7b97\u6cd5\u7684\u76f8\u5e94\u5b9e\u73b0\uff0c\u53c2\u8003:https://github.com/PytLab/MLBox/tree/master/svm\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u9879\u76ee\u5730\u5740:\u00a0https://github.com/PytLab/gaft\u6b63\u6587SMO\u4e2d\u542f\u53d1\u5f0f\u9009\u62e9\u53d8\u91cf\u5728SMO\u7b97\u6cd5\u4e2d\uff0c\u6211\u4eec\u6bcf\u6b21\u9700\u8981\u9009\u53d6\u4e00\u5bf9\u03b1\u6765\u8fdb\u884c\u4f18\u5316\uff0c\u901a\u8fc7\u542f\u53d1\u5f0f\u7684\u9009\u53d6\u6211\u4eec\u53ef\u4ee5\u66f4\u9ad8\u6548\u7684\u9009\u53d6\u5f85\u4f18\u5316\u7684\u53d8\u91cf\u4f7f\u5f97\u76ee\u6807\u51fd\u6570\u4e0b\u964d\u7684\u6700\u5feb\u3002\u9488\u5bf9\u7b2c\u4e00\u4e2a\u03b11\u548c\u7b2c\u4e8c\u4e2a\u03b12\u00a0PlattSMO\u91c7\u53d6\u4e0d\u540c\u7684\u542f\u53d1\u5f0f\u624b\u6bb5\u3002\u7b2c\u4e00\u4e2a\u53d8\u91cf\u7684\u9009\u62e9\u7b2c\u4e00\u4e2a\u53d8\u91cf\u7684\u9009\u62e9\u4e3a\u5916\u5faa\u73af\uff0c\u4e0e\u4e4b\u524d\u4fbf\u5229\u6574\u4e2a\u03b1\u03b1\u5217\u8868\u4e0d\u540c\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u5728\u6574\u4e2a\u6837\u672c\u96c6\u548c\u975e\u8fb9\u754c\u6837\u672c\u96c6\u95f4\u8fdb\u884c\u4ea4\u66ff:\u9996\u5148\u6211\u4eec\u5bf9\u6574\u4e2a\u8bad\u7ec3\u96c6\u8fdb\u884c\u904d\u5386,\u68c0\u67e5\u662f\u5426\u8fdd\u53cdKKT\u6761\u4ef6\uff0c\u5982\u679c\u6539\u70b9\u7684\u03b1i\u03b1i\u548cxi,yixi,yi\u8fdd\u53cd\u4e86KKT\u6761\u4ef6\u5219\u8bf4\u660e\u6539\u70b9\u9700\u8981\u8fdb\u884c\u4f18\u5316\u3002Karush-Kuhn-Tucker(KKT)\u6761\u4ef6\u662f\u6b63\u5b9a\u4e8c\u6b21\u89c4\u5212\u95ee\u9898\u6700\u4f18\u70b9\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\u3002\u9488\u5bf9SVM\u5bf9\u5076\u95ee\u9898\uff0cKKT\u6761\u4ef6\u975e\u5e38\u7b80\u5355:\u5728\u904d\u5386\u4e86\u6574\u4e2a\u8bad\u7ec3\u96c6\u5e76\u4f18\u5316\u4e86\u76f8\u5e94\u7684\u03b1\u540e\u7b2c\u4e8c\u8f6e\u8fed\u4ee3\u6211\u4eec\u4ec5\u4ec5\u9700\u8981\u904d\u5386\u5176\u4e2d\u7684\u975e\u8fb9\u754c\u03b1.\u6240\u8c13\u7684\u975e\u8fb9\u754c\u03b1\u5c31\u662f\u6307\u90a3\u4e9b\u4e0d\u7b49\u4e8e\u8fb9\u754c0\u6216\u8005C\u7684\u03b1\u503c\u3002\u540c\u6837\u8fd9\u4e9b\u70b9\u4ecd\u7136\u9700\u8981\u68c0\u67e5\u662f\u5426\u8fdd\u53cdKKT\u6761\u4ef6\u5e76\u8fdb\u884c\u4f18\u5316.\u4e4b\u540e\u5c31\u662f\u4e0d\u65ad\u5730\u5728\u4e24\u4e2a\u6570\u636e\u96c6\u4e2d\u6765\u56de\u4ea4\u66ff\uff0c\u6700\u7ec8\u6240\u6709\u7684\u03b1\u90fd\u6ee1\u8db3KKT\u6761\u4ef6\u7684\u65f6\u5019\uff0c\u7b97\u6cd5\u4e2d\u6b62\u3002\u4e3a\u4e86\u80fd\u591f\u5feb\u901f\u9009\u53d6\u6709\u6700\u5927\u6b65\u957f\u7684\u03b1\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u6240\u6709\u6570\u636e\u5bf9\u5e94\u7684\u8bef\u5dee\u8fdb\u884c\u7f13\u5b58\uff0c\u56e0\u6b64\u7279\u5730\u5199\u4e86\u4e2aSVMUtil\u7c7b\u6765\u4fdd\u5b58svm\u4e2d\u91cd\u8981\u7684\u53d8\u91cf\u4ee5\u53ca\u4e00\u4e9b\u8f85\u52a9\u65b9\u6cd5:PythonclassSVMUtil(object):'''StructtosaveallimportantvaluesinSVM.'''def__init__(self,dataset,labels,C,tolerance=0.001):self.dataset,self.labels,self.C=dataset,labels,Cself.m,self.n=np.array(dataset).shapeself.alphas=np.zeros(self.m)self.b=0self.tolerance=tolerance#Cachederrors,f(x_i)-y_iself.errors=[self.get_error(i)foriinrange(self.m)]#\u5176\u4ed6\u65b9\u6cd5......1234567891011121314classSVMUtil(object):\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0StructtosaveallimportantvaluesinSVM.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0def__init__(self,dataset,labels,C,tolerance=0.001):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.dataset,self.labels,self.C=dataset,labels,C\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.m,self.n=np.array(dataset).shape\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.alphas=np.zeros(self.m)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.b=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.tolerance=tolerance\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Cachederrors,f(x_i)-y_i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.errors=[self.get_error(i)foriinrange(self.m)]\u00a0\u00a0\u00a0\u00a0#\u5176\u4ed6\u65b9\u6cd5......\u4e0b\u9762\u4e3a\u7b2c\u4e00\u4e2a\u53d8\u91cf\u9009\u62e9\u4ea4\u66ff\u904d\u5386\u7684\u5927\u81f4\u4ee3\u7801\uff0c\u76f8\u5e94\u5b8c\u6574\u7684Python\u5b9e\u73b0(\u5b8c\u6574\u5b9e\u73b0\u89c1https://github.com/PytLab/MLBox/blob/master/svm/svm_platt_smo.py):Pythonwhile(it<max_iter):pair_changed=0ifentire:foriinrange(svm_util.m):pair_changed+=examine_example(i,svm_util)print('Fullset-iter:{},pairchanged:{}'.format(i,pair_changed))else:alphas=svm_util.alphasnon_bound_indices=[iforiinrange(svm_util.m)ifalphas[i]>0andalphas[i]<C]foriinnon_bound_indices:pair_changed+=examine_example(i,svm_util)......1234567891011121314while(it<max_iter):\u00a0\u00a0\u00a0\u00a0pair_changed=0\u00a0\u00a0\u00a0\u00a0ifentire:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriinrange(svm_util.m):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pair_changed+=examine_example(i,svm_util)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print('Fullset-iter:{},pairchanged:{}'.format(i,pair_changed))\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0alphas=svm_util.alphas\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0non_bound_indices=[iforiinrange(svm_util.m)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifalphas[i]>0andalphas[i]<C]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriinnon_bound_indices:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pair_changed+=examine_example(i,svm_util)\u00a0\u00a0\u00a0\u00a0......\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u9009\u62e9SMO\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u9009\u62e9\u8fc7\u7a0b\u4e3a\u5185\u5faa\u73af\uff0c\u5f53\u6211\u4eec\u5df2\u7ecf\u9009\u53d6\u7b2c\u4e00\u4e2a\u03b11\u4e4b\u540e\uff0c\u6211\u4eec\u5e0c\u671b\u6211\u4eec\u9009\u53d6\u7684\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u03b12\u4f18\u5316\u540e\u80fd\u6709\u8f83\u5927\u7684\u53d8\u5316\u3002\u6839\u636e\u6211\u4eec\u4e4b\u524d\u63a8\u5bfc\u7684\u5f0f\u5b50\u53ef\u4ee5\u77e5\u9053\uff0c\u65b0\u7684\u03b12\u7684\u53d8\u5316\u4f9d\u8d56\u4e8e|E1\u2212E2|,\u5f53E1\u4e3a\u6b63\u65f6\uff0c\u90a3\u4e48\u9009\u62e9\u6700\u5c0f\u7684Ei\u4f5c\u4e3aE2\uff0c\u901a\u5e38\u5c06\u6bcf\u4e2a\u6837\u672c\u7684Ei\u7f13\u5b58\u5230\u4e00\u4e2a\u5217\u8868\u4e2d\uff0c\u901a\u8fc7\u5728\u5217\u8868\u4e2d\u9009\u62e9\u5177\u6709|E1\u2212E2|\u7684\u03b12\u6765\u8fd1\u4f3c\u6700\u5927\u5316\u6b65\u957f\u3002\u6709\u65f6\u5019\u6309\u7167\u4e0a\u8ff0\u7684\u542f\u53d1\u5f0f\u65b9\u5f0f\u4ecd\u4e0d\u80fd\u591f\u662f\u7684\u51fd\u6570\u503c\u6709\u8db3\u591f\u7684\u4e0b\u964d\uff0c\u8fd9\u662f\u6309\u4e0b\u8ff0\u6b65\u9aa4\u8fdb\u884c\u9009\u62e9:\u5728\u975e\u8fb9\u754c\u6570\u636e\u96c6\u4e0a\u9009\u62e9\u80fd\u591f\u4f7f\u51fd\u6570\u503c\u8db3\u591f\u4e0b\u964d\u7684\u6837\u672c\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u5982\u679c\u975e\u8fb9\u754c\u6570\u636e\u96c6\u4e0a\u6ca1\u6709\uff0c\u5219\u5728\u6574\u4e2a\u6570\u636e\u4ec5\u4e0a\u8fdb\u884c\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u7684\u9009\u62e9\u5982\u679c\u4ecd\u7136\u6ca1\u6709\u5219\u91cd\u65b0\u9009\u62e9\u7b2c\u4e00\u4e2a\u03b11\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u9009\u53d6\u7684Python\u5b9e\u73b0:Pythondefselect_j(i,svm_util):'''\u901a\u8fc7\u6700\u5927\u5316\u6b65\u957f\u7684\u65b9\u5f0f\u6765\u83b7\u53d6\u7b2c\u4e8c\u4e2aalpha\u503c\u7684\u7d22\u5f15.'''errors=svm_util.errorsvalid_indices=[ifori,ainenumerate(svm_util.alphas)if0<a<svm_util.C]iflen(valid_indices)>1:j=-1max_delta=0forkinvalid_indices:ifk==i:continuedelta=abs(errors[i]-errors[j])ifdelta>max_delta:j=kmax_delta=deltaelse:j=select_j_rand(i,svm_util.m)returnj123456789101112131415161718defselect_j(i,svm_util):\u00a0\u00a0\u00a0\u00a0'''\u901a\u8fc7\u6700\u5927\u5316\u6b65\u957f\u7684\u65b9\u5f0f\u6765\u83b7\u53d6\u7b2c\u4e8c\u4e2aalpha\u503c\u7684\u7d22\u5f15.\u00a0\u00a0\u00a0\u00a0'''\u00a0\u00a0\u00a0\u00a0errors=svm_util.errors\u00a0\u00a0\u00a0\u00a0valid_indices=[ifori,ainenumerate(svm_util.alphas)if0<a<svm_util.C]\u00a0\u00a0\u00a0\u00a0iflen(valid_indices)>1:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0j=-1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max_delta=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkinvalid_indices:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifk==i:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delta=abs(errors[i]-errors[j])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifdelta>max_delta:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0j=k\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0max_delta=delta\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0j=select_j_rand(i,svm_util.m)\u00a0\u00a0\u00a0\u00a0returnjKKT\u6761\u4ef6\u5141\u8bb8\u4e00\u5b9a\u7684\u8bef\u5dee\u5728Platt\u8bba\u6587\u4e2d\u7684KKT\u6761\u4ef6\u7684\u5224\u65ad\u4e2d\u6709\u4e00\u4e2atolerance\u5141\u8bb8\u4e00\u5b9a\u7684\u8bef\u5dee\uff0c\u76f8\u5e94\u7684Python\u5b9e\u73b0\uff1aPythonr=E_i*y_i#\u662f\u5426\u8fdd\u53cdKKT\u6761\u4ef6if(r<-toleranceandalpha<C)or(r>toleranceandalpha>0):...1234r=E_i*y_i#\u662f\u5426\u8fdd\u53cdKKT\u6761\u4ef6if(r<-toleranceandalpha<C)or(r>toleranceandalpha>0):\u00a0\u00a0\u00a0\u00a0...\u5173\u4e8ePlattSMO\u7684\u5b8c\u6574\u5b9e\u73b0\u8be6\u89c1:https://github.com/PytLab/MLBox/blob/master/svm/svm_platt_smo.py\u9488\u5bf9\u4e4b\u524d\u7684\u6570\u636e\u96c6\u6211\u4eec\u4f7f\u7528PlattSMO\u8fdb\u884c\u4f18\u5316\u53ef\u4ee5\u5f97\u5230\uff1aPythonw=[0.8289668843516077,-0.26578914269411114]b=-3.929258304055944812w=[0.8289668843516077,-0.26578914269411114]b=-3.9292583040559448\u5c06\u5206\u5272\u7ebf\u548c\u652f\u6301\u5411\u91cf\u53ef\u89c6\u5316\uff1a\u53ef\u89c1\u901a\u8fc7PlattSMO\u4f18\u5316\u51fa\u6765\u7684\u652f\u6301\u5411\u91cf\u4e0e\u7b80\u5316\u7248\u7684SMO\u7b97\u6cd5\u6709\u4e9b\u8bb8\u4e0d\u540c\u3002\u4f7f\u7528\u9057\u4f20\u7b97\u6cd5\u4f18\u5316SVM\u7531\u4e8e\u6700\u8fd1\u81ea\u5df1\u5199\u4e86\u4e2a\u9057\u4f20\u7b97\u6cd5\u6846\u67b6\uff0c\u9057\u4f20\u7b97\u6cd5\u4f5c\u4e3a\u4e00\u4e2a\u542f\u53d1\u5f0f\u65e0\u5bfc\u578b\u7684\u641c\u7d22\u7b97\u6cd5\u975e\u5e38\u6613\u7528\uff0c\u4e8e\u662f\u6211\u5c31\u5c1d\u8bd5\u4f7f\u7528\u9057\u4f20\u7b97\u6cd5\u6765\u4f18\u5316SVM\u3002\u4f7f\u7528\u9057\u4f20\u7b97\u6cd5\u4f18\u5316\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f18\u5316SVM\u7684\u6700\u521d\u5f62\u5f0f\u4e86\u4e5f\u5c31\u662f\u6700\u76f4\u89c2\u7684\u5f62\u5f0f:\u987a\u4fbf\u518d\u5b89\u5229\u4e0b\u81ea\u5df1\u7684\u9057\u4f20\u7b97\u6cd5\u6846\u67b6\uff0c\u5728\u6b64\u6846\u67b6\u7684\u5e2e\u52a9\u4e0b\uff0c\u4f18\u5316SVM\u7b97\u6cd5\u6211\u4eec\u53ea\u9700\u8981\u5199\u51e0\u5341\u884c\u7684Python\u4ee3\u7801\u5373\u53ef\u3002\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u5c31\u662f\u7f16\u5199\u9002\u5e94\u5ea6\u51fd\u6570\uff0c\u6839\u636e\u4e0a\u9762\u7684\u516c\u5f0f\u6211\u4eec\u9700\u8981\u8ba1\u7b97\u6570\u636e\u96c6\u4e2d\u6bcf\u4e2a\u70b9\u5230\u5206\u5272\u7ebf\u7684\u8ddd\u79bb\u5e76\u8fd4\u56de\u6700\u5c0f\u7684\u8ddd\u79bb\u5373\u53ef\uff0c\u7136\u540e\u653e\u5230\u9057\u4f20\u7b97\u6cd5\u4e2d\u8fdb\u884c\u8fdb\u5316\u8fed\u4ee3\u3002\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u9879\u76ee\u5730\u5740:\u00a0https://github.com/PytLab/gaft\u00a0,\u4f7f\u7528\u65b9\u6cd5\u8be6\u89c1README\u3002Ok\uff0c\u6211\u4eec\u5f00\u59cb\u6784\u5efa\u79cd\u7fa4\u7528\u4e8e\u8fdb\u5316\u8fed\u4ee3\u3002\u521b\u5efa\u4e2a\u4f53\u4e0e\u79cd\u7fa4\u5bf9\u4e8e\u4e8c\u7ef4\u6570\u636e\u70b9\uff0c\u6211\u4eec\u9700\u8981\u4f18\u5316\u7684\u53c2\u6570\u53ea\u6709\u4e09\u4e2a\u4e5f\u5c31\u662f[w1,w2]\u548cb,\u4e2a\u4f53\u7684\u5b9a\u4e49\u5982\u4e0b:Pythonindv_template=GAIndividual(ranges=[(-2,2),(-2,2),(-5,5)],encoding='binary',eps=[0.001,0.001,0.005])123indv_template=GAIndividual(ranges=[(-2,2),(-2,2),(-5,5)],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0encoding='binary',\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0eps=[0.001,0.001,0.005])\u79cd\u7fa4\u5927\u5c0f\u8fd9\u91cc\u53d6600\uff0c\u521b\u5efa\u79cd\u7fa4Pythonpopulation=GAPopulation(indv_template=indv_template,size=600).init()1population=GAPopulation(indv_template=indv_template,size=600).init()\u521b\u5efa\u9057\u4f20\u7b97\u5b50\u548cGA\u5f15\u64ce\u8fd9\u91cc\u6ca1\u6709\u4ec0\u4e48\u7279\u522b\u7684\uff0c\u76f4\u63a5\u4f7f\u7528\u6846\u67b6\u4e2d\u5185\u7f6e\u7684\u7b97\u5b50\u5c31\u597d\u4e86\u3002Pythonselection=RouletteWheelSelection()crossover=UniformCrossover(pc=0.8,pe=0.5)mutation=FlipBitBigMutation(pm=0.1,pbm=0.55,alpha=0.6)engine=GAEngine(population=population,selection=selection,crossover=crossover,mutation=mutation,analysis=[ConsoleOutput,FitnessStore])123456selection=RouletteWheelSelection()crossover=UniformCrossover(pc=0.8,pe=0.5)mutation=FlipBitBigMutation(pm=0.1,pbm=0.55,alpha=0.6)engine=GAEngine(population=population,selection=selection,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0crossover=crossover,mutation=mutation,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0analysis=[ConsoleOutput,FitnessStore])\u9002\u5e94\u5ea6\u51fd\u6570\u8fd9\u4e00\u90e8\u5206\u53ea\u8981\u628a\u4e0a\u9762svm\u521d\u59cb\u5f62\u5f0f\u63cf\u8ff0\u51fa\u6765\u5c31\u597d\u4e86\uff0c\u53ea\u9700\u8981\u4e09\u884c\u4ee3\u7801:Python@engine.fitness_registerdeffitness(indv):w,b=indv.variants[:-1],indv.variants[-1]min_dis=min([y*(np.dot(w,x)+b)forx,yinzip(dataset,labels)])returnfloat(min_dis)12345@engine.fitness_registerdeffitness(indv):\u00a0\u00a0\u00a0\u00a0w,b=indv.variants[:-1],indv.variants[-1]\u00a0\u00a0\u00a0\u00a0min_dis=min([y*(np.dot(w,x)+b)forx,yinzip(dataset,labels)])\u00a0\u00a0\u00a0\u00a0returnfloat(min_dis)\u5f00\u59cb\u8fed\u4ee3\u8fd9\u91cc\u8fed\u4ee3300\u4ee3\u79cd\u7fa4Pythonif'__main__'==__name__:engine.run(300)12if'__main__'==__name__:\u00a0\u00a0\u00a0\u00a0engine.run(300)\u7ed8\u5236\u9057\u4f20\u7b97\u6cd5\u4f18\u5316\u7684\u5206\u5272\u7ebfPythonvariants=engine.population.best_indv(engine.fitness).variantsw=variants[:-1]b=variants[-1]#\u5206\u7c7b\u6570\u636e\u70b9classified_pts={'+1':[],'-1':[]}forpoint,labelinzip(dataset,labels):iflabel==1.0:classified_pts['+1'].append(point)else:classified_pts['-1'].append(point)fig=plt.figure()ax=fig.add_subplot(111)#\u7ed8\u5236\u6570\u636e\u70b9forlabel,ptsinclassified_pts.items():pts=np.array(pts)ax.scatter(pts[:,0],pts[:,1],label=label)#\u7ed8\u5236\u5206\u5272\u7ebfx1,_=max(dataset,key=lambdax:x[0])x2,_=min(dataset,key=lambdax:x[0])a1,a2=wy1,y2=(-b-a1*x1)/a2,(-b-a1*x2)/a2ax.plot([x1,x2],[y1,y2])plt.show()1234567891011121314151617181920212223variants=engine.population.best_indv(engine.fitness).variantsw=variants[:-1]b=variants[-1]#\u5206\u7c7b\u6570\u636e\u70b9classified_pts={'+1':[],'-1':[]}forpoint,labelinzip(dataset,labels):\u00a0\u00a0\u00a0\u00a0iflabel==1.0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0classified_pts['+1'].append(point)\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0classified_pts['-1'].append(point)fig=plt.figure()ax=fig.add_subplot(111)#\u7ed8\u5236\u6570\u636e\u70b9forlabel,ptsinclassified_pts.items():\u00a0\u00a0\u00a0\u00a0pts=np.array(pts)\u00a0\u00a0\u00a0\u00a0ax.scatter(pts[:,0],pts[:,1],label=label)#\u7ed8\u5236\u5206\u5272\u7ebfx1,_=max(dataset,key=lambdax:x[0])x2,_=min(dataset,key=lambdax:x[0])a1,a2=wy1,y2=(-b-a1*x1)/a2,(-b-a1*x2)/a2ax.plot([x1,x2],[y1,y2])plt.show()\u5f97\u5230\u7684\u5206\u5272\u66f2\u7ebf\u5982\u4e0b\u56fe\uff1a\u5b8c\u6574\u7684\u4ee3\u7801\u8be6\u89c1:\u00a0https://github.com/PytLab/MLBox/blob/master/svm/svm_ga.py\u603b\u7ed3\u672c\u6587\u5bf9SVM\u7684\u4f18\u5316\u8fdb\u884c\u4e86\u4ecb\u7ecd\uff0c\u4e3b\u8981\u5b9e\u73b0\u4e86PlattSMO\u7b97\u6cd5\u4f18\u5316SVM\u6a21\u578b\uff0c\u5e76\u5c1d\u8bd5\u4f7f\u7528\u9057\u4f20\u7b97\u6cd5\u6846\u67b6GAFT\u5bf9\u521d\u59cbSVM\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u53c2\u8003SequentialMinimalOptimization:AFastAlgorithmforTrainingSupportVectorMachines\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff011\u8d5e2\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aiPytLab\u559c\u6b22\u5199\u7a0b\u5e8f\u7684\u8ba1\u7b97\u5316\u5b66\u72d7\uff0cPython/C/C++/Fortran,\u4e2a\u4eba\u535a\u5ba2http://pytlab.org\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b722\u00b7"]},
{"art_title": ["Python \u4e2d\u7684\u5b9e\u7528\u6570\u636e\u6316\u6398"], "art_url": ["http://python.jobbole.com/88669/"], "art_create_time": ["2017/10/11"], "art_img": ["http://radimrehurek.com/data_science_python/python.png"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u5b66\u4ee5\u81f4\u7528123\u7ffb\u8bd1\uff0c\u5218\u5531\u6821\u7a3f\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1aRadimRehurek\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u672c\u6587\u662f2014\u5e7412\u6708\u6211\u5728\u5e03\u62c9\u683c\u7ecf\u6d4e\u5927\u5b66\u505a\u7684\u540d\u4e3a\u2018Python\u6570\u636e\u79d1\u5b66\u2019\u8bb2\u5ea7\u7684\u7b14\u8bb0\u3002\u6b22\u8fce\u901a\u8fc7@RadimRehurek\u8fdb\u884c\u63d0\u95ee\u548c\u8bc4\u8bba\u3002\u672c\u6b21\u8bb2\u5ea7\u7684\u76ee\u7684\u662f\u5c55\u793a\u4e00\u4e9b\u5173\u4e8e\u673a\u5668\u5b66\u4e60\u7684\u9ad8\u7ea7\u6982\u5ff5\u3002\u8be5\u7b14\u8bb0\u4e2d\u7528\u5177\u4f53\u7684\u4ee3\u7801\u6765\u505a\u6f14\u793a\uff0c\u5927\u5bb6\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u7535\u8111\u4e0a\u8fd0\u884c\uff08\u9700\u8981\u5b89\u88c5IPython\uff0c\u5982\u4e0b\u6240\u793a\uff09\u3002\u672c\u6b21\u8bb2\u5ea7\u7684\u542c\u4f17\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u57fa\u7840\u7684\u7f16\u7a0b\uff08\u4e0d\u4e00\u5b9a\u662fPython\uff09\uff0c\u5e76\u62e5\u6709\u4e00\u70b9\u57fa\u672c\u7684\u6570\u636e\u6316\u6398\u80cc\u666f\u3002\u672c\u6b21\u8bb2\u5ea7\u4e0d\u662f\u673a\u5668\u5b66\u4e60\u4e13\u5bb6\u7684\u201c\u9ad8\u7ea7\u6f14\u8bb2\u201d\u3002\u8fd9\u4e9b\u4ee3\u7801\u5b9e\u4f8b\u521b\u5efa\u4e86\u4e00\u4e2a\u6709\u6548\u7684\u3001\u53ef\u6267\u884c\u7684\u539f\u578b\u7cfb\u7edf\uff1a\u4e00\u4e2a\u4f7f\u7528\u201cspam\u201d\uff08\u5783\u573e\u4fe1\u606f\uff09\u6216\u201cham\u201d\uff08\u975e\u5783\u573e\u4fe1\u606f\uff09\u5bf9\u82f1\u6587\u624b\u673a\u77ed\u4fe1\uff08\u201d\u77ed\u4fe1\u7c7b\u578b\u201c\u7684\u82f1\u6587\uff09\u8fdb\u884c\u5206\u7c7b\u7684app\u3002\u6574\u5957\u4ee3\u7801\u4f7f\u7528Python\u00a0\u8bed\u8a00\u3002python\u662f\u4e00\u79cd\u5728\u7ba1\u7ebf\uff08pipeline\uff09\u7684\u6240\u6709\u73af\u8282\uff08I/O\u3001\u6570\u636e\u6e05\u6d17\u91cd\u6574\u548c\u9884\u5904\u7406\u3001\u6a21\u578b\u8bad\u7ec3\u548c\u8bc4\u4f30\uff09\u90fd\u597d\u7528\u7684\u901a\u7528\u8bed\u8a00\u3002\u5c3d\u7ba1python\u4e0d\u662f\u552f\u4e00\u9009\u62e9\uff0c\u4f46\u5b83\u7075\u6d3b\u3001\u6613\u4e8e\u5f00\u53d1\uff0c\u6027\u80fd\u4f18\u8d8a\uff0c\u8fd9\u5f97\u76ca\u4e8e\u5b83\u6210\u719f\u7684\u79d1\u5b66\u8ba1\u7b97\u751f\u6001\u7cfb\u7edf\u3002Python\u5e9e\u5927\u7684\u3001\u5f00\u6e90\u751f\u6001\u7cfb\u7edf\u540c\u65f6\u907f\u514d\u4e86\u4efb\u4f55\u5355\u4e00\u6846\u67b6\u6216\u5e93\u7684\u9650\u5236\uff08\u4ee5\u53ca\u76f8\u5173\u7684\u4fe1\u606f\u4e22\u5931\uff09\u3002IPythonnotebook\uff0c\u662fPython\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u5b83\u662f\u4e00\u4e2a\u4ee5\u00a0HTML\u5f62\u5f0f\u5448\u73b0\u7684\u4ea4\u4e92\u73af\u5883\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b83\u7acb\u523b\u770b\u5230\u7ed3\u679c\u3002\u6211\u4eec\u4e5f\u5c06\u91cd\u6e29\u5176\u5b83\u5e7f\u6cdb\u7528\u4e8e\u6570\u636e\u79d1\u5b66\u9886\u57df\u7684\u5b9e\u7528\u5de5\u5177\u3002\u60f3\u4ea4\u4e92\u8fd0\u884c\u4e0b\u9762\u7684\u4f8b\u5b50\uff08\u9009\u8bfb\uff09\uff1f1.\u5b89\u88c5\u514d\u8d39\u7684AnacondaPython\u53d1\u884c\u7248\uff0c\u5176\u4e2d\u5df2\u7ecf\u5305\u542bPython\u672c\u8eab\u30022.\u5b89\u88c5\u201c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u201d\u5e93\u2014\u2014TextBlob\uff1a\u5b89\u88c5\u5305\u5728\u8fd9\u30023.\u4e0b\u8f7d\u672c\u6587\u7684\u6e90\u7801\uff08\u7f51\u5740\uff1ahttp://radimrehurek.com/data_science_python/data_science_python.ipynb\u00a0\u5e76\u8fd0\u884c\uff1a$ipythonnotebookdata_science_python.ipynb4.\u89c2\u770bIPythonnotebook\u57fa\u672c\u7528\u6cd5\u6559\u7a0b\u00a0IPythontutorialvideo\u30025.\u8fd0\u884c\u4e0b\u9762\u7684\u7b2c\u4e00\u4e2a\u4ee3\u7801\uff0c\u5982\u679c\u6267\u884c\u8fc7\u7a0b\u6ca1\u6709\u62a5\u9519\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002\u00a0\u7aef\u5230\u7aef\u7684\u4f8b\u5b50\uff1a\u81ea\u52a8\u8fc7\u6ee4\u5783\u573e\u4fe1\u606fIn\u00a0[1]:Python%matplotlibinlineimportmatplotlib.pyplotaspltimportcsvfromtextblobimportTextBlobimportpandasimportsklearnimportcPickleimportnumpyasnpfromsklearn.feature_extraction.textimportCountVectorizer,TfidfTransformerfromsklearn.naive_bayesimportMultinomialNBfromsklearn.svmimportSVC,LinearSVCfromsklearn.metricsimportclassification_report,f1_score,accuracy_score,confusion_matrixfromsklearn.pipelineimportPipelinefromsklearn.grid_searchimportGridSearchCVfromsklearn.cross_validationimportStratifiedKFold,cross_val_score,train_test_splitfromsklearn.treeimportDecisionTreeClassifierfromsklearn.learning_curveimportlearning_curve123456789101112131415161718%matplotlibinline\u00a0importmatplotlib.pyplotaspltimportcsvfromtextblobimportTextBlobimportpandasimportsklearnimportcPickleimportnumpyasnpfromsklearn.feature_extraction.textimportCountVectorizer,TfidfTransformerfromsklearn.naive_bayesimportMultinomialNBfromsklearn.svmimportSVC,LinearSVCfromsklearn.metricsimportclassification_report,f1_score,accuracy_score,confusion_matrixfromsklearn.pipelineimportPipelinefromsklearn.grid_searchimportGridSearchCVfromsklearn.cross_validationimportStratifiedKFold,cross_val_score,train_test_splitfromsklearn.treeimportDecisionTreeClassifierfromsklearn.learning_curveimportlearning_curve\u7b2c\u4e00\u6b65\uff1a\u52a0\u8f7d\u6570\u636e\uff0c\u6d4f\u89c8\u4e00\u4e0b\u8ba9\u6211\u4eec\u8df3\u8fc7\u771f\u6b63\u7684\u7b2c\u4e00\u6b65\uff08\u5b8c\u5584\u8d44\u6599\uff0c\u4e86\u89e3\u6211\u4eec\u8981\u505a\u7684\u662f\u4ec0\u4e48\uff0c\u8fd9\u5728\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\u662f\u975e\u5e38\u91cd\u8981\u7684\uff09\uff0c\u76f4\u63a5\u5230\u00a0https://archive.ics.uci.edu/ml/datasets/SMS+Spam+Collection\u4e0b\u8f7ddemo\u91cc\u9700\u8981\u7528\u7684zip\u6587\u4ef6\uff0c\u89e3\u538b\u5230data\u5b50\u76ee\u5f55\u4e0b\u3002\u4f60\u80fd\u770b\u5230\u4e00\u4e2a\u5927\u69820.5MB\u5927\u5c0f\uff0c\u540d\u4e3aSMSSpamCollection\u7684\u6587\u4ef6\uff1aPython$<spanclass=\"kw\">ls</span>-ldata<spanclass=\"kw\">total</span>1352<spanclass=\"kw\">-rw-r--r--@</span>1kofolastaff477907Mar152011SMSSpamCollection<spanclass=\"kw\">-rw-r--r--@</span>1kofolastaff5868Apr182011readme<spanclass=\"kw\">-rw-r-----@</span>1kofolastaff203415Dec115:30smsspamcollection.zip12345$<spanclass=\"kw\">ls</span>-ldata<spanclass=\"kw\">total</span>1352<spanclass=\"kw\">-rw-r--r--@</span>1kofola\u00a0\u00a0staff\u00a0\u00a0477907Mar15\u00a0\u00a02011SMSSpamCollection<spanclass=\"kw\">-rw-r--r--@</span>1kofola\u00a0\u00a0staff\u00a0\u00a0\u00a0\u00a05868Apr18\u00a0\u00a02011readme<spanclass=\"kw\">-rw-r-----@</span>1kofola\u00a0\u00a0staff\u00a0\u00a0203415Dec\u00a0\u00a0115:30smsspamcollection.zip\u8fd9\u4efd\u6587\u4ef6\u5305\u542b\u4e865000\u591a\u4efdSMS\u624b\u673a\u4fe1\u606f\uff08\u67e5\u770breadme\u6587\u4ef6\u4ee5\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\uff09\uff1aIn\u00a0[2]:messages=[line.rstrip()forlineinopen('./data/SMSSpamCollection')]printlen(messages)12messages=[line.rstrip()forlineinopen('./data/SMSSpamCollection')]printlen(messages)5574\u6587\u672c\u96c6\u6709\u65f6\u5019\u4e5f\u79f0\u4e3a\u201c\u8bed\u6599\u5e93\u201d\uff0c\u6211\u4eec\u6765\u6253\u5370SMS\u8bed\u6599\u5e93\u4e2d\u7684\u524d10\u6761\u4fe1\u606f\uff1aIn\u00a0[3]:Pythonformessage_no,messageinenumerate(messages[:10]):printmessage_no,message12formessage_no,messageinenumerate(messages[:10]):\u00a0\u00a0\u00a0\u00a0printmessage_no,messagePython0hamGountiljurongpoint,crazy..Availableonlyinbugisngreatworldlaebuffet...Cinetheregotamorewat...1hamOklar...Jokingwifuoni...2spamFreeentryin2awklycomptowinFACupfinaltkts21stMay2005.TextFAto87121toreceiveentryquestion(stdtxtrate)T&amp;C'sapply08452810075over18's3hamUdunsaysoearlyhor...Ucalreadythensay...4hamNahIdon'tthinkhegoestousf,helivesaroundherethough5spamFreeMsgHeytheredarlingit'sbeen3week'snowandnowordback!I'dlikesomefunyouupforitstill?Tbok!XxXstdchgstosend,\u00a31.50torcv6hamEvenmybrotherisnotliketospeakwithme.Theytreatmelikeaidspatent.7hamAsperyourrequest'MelleMelle(OruMinnaminunginteNurunguVettam)'hasbeensetasyourcallertuneforallCallers.Press*9tocopyyourfriendsCallertune8spamWINNER!!Asavaluednetworkcustomeryouhavebeenselectedtoreceivea\u00a3900prizereward!Toclaimcall09061701461.ClaimcodeKL341.Valid12hoursonly.9spamHadyourmobile11monthsormore?URentitledtoUpdatetothelatestcolourmobileswithcameraforFree!CallTheMobileUpdateCoFREEon08002986030123456789100ham\u00a0\u00a0\u00a0\u00a0Gountiljurongpoint,crazy..Availableonlyinbugisngreatworldlaebuffet...Cinetheregotamorewat...1ham\u00a0\u00a0Oklar...Jokingwifuoni...2spam\u00a0\u00a0Freeentryin2awklycomptowinFACupfinaltkts21stMay2005.TextFAto87121toreceiveentryquestion(stdtxtrate)T&amp;C'sapply08452810075over18's3ham\u00a0\u00a0Udunsaysoearlyhor...Ucalreadythensay...4ham\u00a0\u00a0NahIdon'tthinkhegoestousf,helivesaroundherethough5spam\u00a0\u00a0FreeMsgHeytheredarlingit'sbeen3week'snowandnowordback!I'dlikesomefunyouupforitstill?Tbok!XxXstdchgstosend,\u00a31.50torcv6ham\u00a0\u00a0Evenmybrotherisnotliketospeakwithme.Theytreatmelikeaidspatent.7ham\u00a0\u00a0Asperyourrequest'MelleMelle(OruMinnaminunginteNurunguVettam)'hasbeensetasyourcallertuneforallCallers.Press*9tocopyyourfriendsCallertune8spam\u00a0\u00a0WINNER!!Asavaluednetworkcustomeryouhavebeenselectedtoreceivea\u00a3900prizereward!Toclaimcall09061701461.ClaimcodeKL341.Valid12hoursonly.9spam\u00a0\u00a0Hadyourmobile11monthsormore?URentitledtoUpdatetothelatestcolourmobileswithcameraforFree!CallTheMobileUpdateCoFREEon08002986030\u6211\u4eec\u770b\u5230\u4e00\u4e2aTSV\u6587\u4ef6\uff08\u7528\u5236\u8868\u7b26tab\u5206\u9694\uff09\uff0c\u5b83\u7684\u7b2c\u4e00\u5217\u662f\u6807\u8bb0\u6b63\u5e38\u4fe1\u606f\uff08ham\uff09\u6216\u201c\u5783\u573e\u6587\u4ef6\u201d\uff08spam\uff09\u7684\u6807\u7b7e\uff0c\u7b2c\u4e8c\u5217\u662f\u4fe1\u606f\u672c\u8eab\u3002\u8fd9\u4e2a\u8bed\u6599\u5e93\u5c06\u4f5c\u4e3a\u5e26\u6807\u7b7e\u7684\u8bad\u7ec3\u96c6\u3002\u901a\u8fc7\u4f7f\u7528\u8fd9\u4e9b\u6807\u8bb0\u4e86ham/spam\u4f8b\u5b50\uff0c\u6211\u4eec\u5c06\u8bad\u7ec3\u4e00\u4e2a\u81ea\u52a8\u5206\u8fa8ham/spam\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u5c06\u4efb\u610f\u672a\u6807\u8bb0\u7684\u4fe1\u606f\u6807\u8bb0\u4e3aham\u6216spam\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Python\u7684Pandas\u5e93\u66ff\u6211\u4eec\u5904\u7406TSV\u6587\u4ef6\uff08\u6216CSV\u6587\u4ef6\uff0c\u6216Excel\u6587\u4ef6\uff09\uff1aIn\u00a0[4]:Pythonmessages=pandas.read_csv('./data/SMSSpamCollection',sep='t',quoting=csv.QUOTE_NONE,names=[\"label\",\"message\"])printmessages123messages=pandas.read_csv('./data/SMSSpamCollection',sep='t',quoting=csv.QUOTE_NONE,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0names=[\"label\",\"message\"])printmessagesPythonlabelmessage0hamGountiljurongpoint,crazy..Availableonly...1hamOklar...Jokingwifuoni...2spamFreeentryin2awklycomptowinFACupfina...3hamUdunsaysoearlyhor...Ucalreadythensay...4hamNahIdon'tthinkhegoestousf,helivesaro...5spamFreeMsgHeytheredarlingit'sbeen3week'sn...6hamEvenmybrotherisnotliketospeakwithme....7hamAsperyourrequest'MelleMelle(OruMinnamin...8spamWINNER!!Asavaluednetworkcustomeryouhave...9spamHadyourmobile11monthsormore?URentitle...10hamI'mgonnabehomesoonandidon'twanttotal...11spamSIXchancestowinCASH!From100to20,000po...12spamURGENT!Youhavewona1weekFREEmembership...13hamI'vebeensearchingfortherightwordstotha...14hamIHAVEADATEONSUNDAYWITHWILL!!15spamXXXMobileMovieClub:Touseyourcredit,click...16hamOhk...i'mwatchinghere:)17hamEhurememberhow2spellhisname...Yesidi...18hamFineifthat\u0092sthewayufeel.That\u0092stheway...19spamEnglandvMacedonia-dontmissthegoals/team...20hamIsthatseriouslyhowyouspellhisname?21hamI\u2018mgoingtotryfor2monthshahaonlyjoking22hamSo\u00fcpayfirstlar...Thenwhenisdastockco...23hamAftifinishmylunchthenigostrdownlor....24hamFfffffffff.AlrightnowayIcanmeetupwith...25hamJustforcedmyselftoeataslice.I'mreally...26hamLolyouralwayssoconvincing.27hamDidyoucatchthebus?Areyoufryinganegg...28hamI'mback&amp;amp;we'repackingthecarnow,I'll...29hamAhhh.Work.Ivaguelyrememberthat!Whatdoes............5544hamArmandsaysgetyourassovertoepsilon5545hamUstillhaventgoturselfajacketah?5546hamI'mtakingderek&amp;amp;taylortowalmart,ifI...5547hamHiitsindurbanareyoustillonthisnumber5548hamIc.Therearealottachildporncarsthen.5549spamHadyourcontractmobile11Mnths?LatestMoto...5550hamNo,Iwastryingitallweekend;V5551hamYouknow,wotpeoplewear.Tshirts,jumpers,...5552hamCool,whattimeyouthinkyoucangethere?5553hamWendidyougetsospiritualanddeep.That's...5554hamHaveasafetriptoNigeria.Wishyouhappines...5555hamHahaha..useyourbraindear5556hamWellkeepinmindI'veonlygotenoughgasfor...5557hamYeh.Indianswasnice.Thoitdidkanemeoff...5558hamYesihave.Sothat'swhyutexted.Pshew...mi...5559hamNo.Imeantthecalculationisthesame.That...5560hamSorry,I'llcalllater5561hamifyouaren'thereinthenext&amp;lt;#&amp;gt;hou...5562hamAnythinglor.Juzbothofuslor.5563hamGetmeoutofthisdumpheap.Mymomdecidedt...5564hamOklor...Sonyericssonsalesman...Iaskshuh...5565hamArd6likedatlor.5566hamWhydon'tyouwait'tilatleastwednesdayto...5567hamHuhylei...5568spamREMINDERFROMO2:Toget2.50poundsfreecall...5569spamThisisthe2ndtimewehavetried2contactu...5570hamWill\u00fcbgoingtoesplanadefrhome?5571hamPity,*wasinmoodforthat.So...anyothers...5572hamTheguydidsomebitchingbutIactedlikei'd...5573hamRofl.Itstruetoitsname[5574rowsx2columns]12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364\u00a0\u00a0\u00a0\u00a0label\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0message0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Gountiljurongpoint,crazy..Availableonly...1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Oklar...Jokingwifuoni...2\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0Freeentryin2awklycomptowinFACupfina...3\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Udunsaysoearlyhor...Ucalreadythensay...4\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0NahIdon'tthinkhegoestousf,helivesaro...5\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0FreeMsgHeytheredarlingit'sbeen3week'sn...6\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Evenmybrotherisnotliketospeakwithme....7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Asperyourrequest'MelleMelle(OruMinnamin...8\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0WINNER!!Asavaluednetworkcustomeryouhave...9\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0Hadyourmobile11monthsormore?URentitle...10\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0I'mgonnabehomesoonandidon'twanttotal...11\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0SIXchancestowinCASH!From100to20,000po...12\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0URGENT!Youhavewona1weekFREEmembership...13\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0I'vebeensearchingfortherightwordstotha...14\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0IHAVEADATEONSUNDAYWITHWILL!!15\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0XXXMobileMovieClub:Touseyourcredit,click...16\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Ohk...i'mwatchinghere:)17\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Ehurememberhow2spellhisname...Yesidi...18\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Fineifthat\u0092sthewayufeel.That\u0092stheway...19\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0EnglandvMacedonia-dontmissthegoals/team...20\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Isthatseriouslyhowyouspellhisname?21\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0I\u2018mgoingtotryfor2monthshahaonlyjoking22\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0So\u00fcpayfirstlar...Thenwhenisdastockco...23\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Aftifinishmylunchthenigostrdownlor....24\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Ffffffffff.AlrightnowayIcanmeetupwith...25\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Justforcedmyselftoeataslice.I'mreally...26\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Lolyouralwayssoconvincing.27\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Didyoucatchthebus?Areyoufryinganegg...28\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0I'mback&amp;amp;we'repackingthecarnow,I'll...29\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0Ahhh.Work.Ivaguelyrememberthat!Whatdoes......\u00a0\u00a0\u00a0\u00a0...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0...5544\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Armandsaysgetyourassovertoepsilon5545\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Ustillhaventgoturselfajacketah?5546\u00a0\u00a0ham\u00a0\u00a0I'mtakingderek&amp;amp;taylortowalmart,ifI...5547\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Hiitsindurbanareyoustillonthisnumber5548\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Ic.Therearealottachildporncarsthen.5549\u00a0\u00a0spam\u00a0\u00a0Hadyourcontractmobile11Mnths?LatestMoto...5550\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0No,Iwastryingitallweekend;V5551\u00a0\u00a0ham\u00a0\u00a0Youknow,wotpeoplewear.Tshirts,jumpers,...5552\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Cool,whattimeyouthinkyoucangethere?5553\u00a0\u00a0ham\u00a0\u00a0Wendidyougetsospiritualanddeep.That's...5554\u00a0\u00a0ham\u00a0\u00a0HaveasafetriptoNigeria.Wishyouhappines...5555\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Hahaha..useyourbraindear5556\u00a0\u00a0ham\u00a0\u00a0WellkeepinmindI'veonlygotenoughgasfor...5557\u00a0\u00a0ham\u00a0\u00a0Yeh.Indianswasnice.Thoitdidkanemeoff...5558\u00a0\u00a0ham\u00a0\u00a0Yesihave.Sothat'swhyutexted.Pshew...mi...5559\u00a0\u00a0ham\u00a0\u00a0No.Imeantthecalculationisthesame.That...5560\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Sorry,I'llcalllater5561\u00a0\u00a0ham\u00a0\u00a0ifyouaren'thereinthenext\u00a0\u00a0&amp;lt;#&amp;gt;\u00a0\u00a0hou...5562\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Anythinglor.Juzbothofuslor.5563\u00a0\u00a0ham\u00a0\u00a0Getmeoutofthisdumpheap.Mymomdecidedt...5564\u00a0\u00a0ham\u00a0\u00a0Oklor...Sonyericssonsalesman...Iaskshuh...5565\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Ard6likedatlor.5566\u00a0\u00a0ham\u00a0\u00a0Whydon'tyouwait'tilatleastwednesdayto...5567\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Huhylei...5568\u00a0\u00a0spam\u00a0\u00a0REMINDERFROMO2:Toget2.50poundsfreecall...5569\u00a0\u00a0spam\u00a0\u00a0Thisisthe2ndtimewehavetried2contactu...5570\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Will\u00fcbgoingtoesplanadefrhome?5571\u00a0\u00a0ham\u00a0\u00a0Pity,*wasinmoodforthat.So...anyothers...5572\u00a0\u00a0ham\u00a0\u00a0TheguydidsomebitchingbutIactedlikei'd...5573\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Rofl.Itstruetoitsname\u00a0[5574rowsx2columns]\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528pandas\u8f7b\u677e\u67e5\u770b\u7edf\u8ba1\u4fe1\u606f\uff1aIn\u00a0[5]:messages.groupby('label').describe()1messages.groupby('label').describe()\u00a0out[5]:messagelabelhamcount4827unique4518topSorry,I\u2019llcalllaterfreq30spamcount747unique653topPleasecallourcustomerservicerepresentativ\u2026freq4\u8fd9\u4e9b\u4fe1\u606f\u7684\u957f\u5ea6\u662f\u591a\u5c11\uff1aIn\u00a0[6]:Pythonmessages['length']=messages['message'].map(lambdatext:len(text))printmessages.head()12messages['length']=messages['message'].map(lambdatext:len(text))printmessages.head()Pythonlabelmessagelength0hamGountiljurongpoint,crazy..Availableonly...1111hamOklar...Jokingwifuoni...292spamFreeentryin2awklycomptowinFACupfina...1553hamUdunsaysoearlyhor...Ucalreadythensay...494hamNahIdon'tthinkhegoestousf,helivesaro...61123456\u00a0\u00a0label\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0message\u00a0\u00a0length0\u00a0\u00a0ham\u00a0\u00a0Gountiljurongpoint,crazy..Availableonly...\u00a0\u00a0\u00a0\u00a01111\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Oklar...Jokingwifuoni...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0292\u00a0\u00a0spam\u00a0\u00a0Freeentryin2awklycomptowinFACupfina...\u00a0\u00a0\u00a0\u00a01553\u00a0\u00a0ham\u00a0\u00a0Udunsaysoearlyhor...Ucalreadythensay...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0494\u00a0\u00a0ham\u00a0\u00a0NahIdon'tthinkhegoestousf,helivesaro...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a061In\u00a0[7]:Pythonmessages.length.plot(bins=20,kind='hist')1messages.length.plot(bins=20,kind='hist')Out[7]:Python&lt;matplotlib.axes._subplots.AxesSubplotat0x10dd7a990&gt;1&lt;matplotlib.axes._subplots.AxesSubplotat0x10dd7a990&gt;In\u00a0[8]:Pythonmessages.length.describe()1messages.length.describe()Out[8]:Pythoncount5574.000000mean80.604593std59.919970min2.00000025%36.00000050%62.00000075%122.000000max910.000000Name:length,dtype:float64123456789count\u00a0\u00a0\u00a0\u00a05574.000000mean\u00a0\u00a0\u00a0\u00a0\u00a0\u00a080.604593std\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a059.919970min\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a02.00000025%\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a036.00000050%\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a062.00000075%\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0122.000000max\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0910.000000Name:length,dtype:float64\u54ea\u4e9b\u662f\u8d85\u957f\u4fe1\u606f\uff1fIn\u00a0[9]:printlist(messages.message[messages.length>900])1printlist(messages.message[messages.length>900])[\"Formetheloveshouldstartwithattraction.ishouldfeelthatIneedhereverytimearoundme.sheshouldbethefirstthingwhichcomesinmythoughts.Iwouldstartthedayandenditwithher.sheshouldbethereeverytimeIdream.lovewillbethenwhenmyeverybreathhashername.mylifeshouldhappenaroundher.mylifewillbenamedtoher.Iwouldcryforher.willgiveallmyhappinessandtakeallhersorrows.Iwillbereadytofightwithanyoneforher.IwillbeinlovewhenIwillbedoingthecraziestthingsforher.lovewillbewhenIdon'thavetoprooveanyonethatmygirlisthemostbeautifulladyonthewholeplanet.Iwillalwaysbesingingpraisesforher.lovewillbewhenIstartupmakingchickencurryandendupmakiingsambar.lifewillbethemostbeautifulthen.willgeteverymorningandthankgodforthedaybecausesheiswithme.Iwouldliketosayalot..willtelllater..\"]1234567891011[\"Formetheloveshouldstartwithattraction.ishouldfeelthatIneedhereverytimearoundme.sheshouldbethefirstthingwhichcomesinmythoughts.Iwouldstartthedayandenditwithher.sheshouldbethereeverytimeIdream.lovewillbethenwhenmyeverybreathhashername.mylifeshouldhappenaroundher.mylifewillbenamedtoher.Iwouldcryforher.willgiveallmyhappinessandtakeallhersorrows.Iwillbereadytofightwithanyoneforher.IwillbeinlovewhenIwillbedoingthecraziestthingsforher.lovewillbewhenIdon'thavetoprooveanyonethatmygirlisthemostbeautifulladyonthewholeplanet.Iwillalwaysbesingingpraisesforher.lovewillbewhenIstartupmakingchickencurryandendupmakiingsambar.lifewillbethemostbeautifulthen.willgeteverymorningandthankgodforthedaybecausesheiswithme.Iwouldliketosayalot..willtelllater..\"]spam\u4fe1\u606f\u4e0eham\u4fe1\u606f\u5728\u957f\u5ea6\u4e0a\u6709\u533a\u522b\u5417\uff1fIn\u00a0[10]:Pythonmessages.hist(column='length',by='label',bins=50)1messages.hist(column='length',by='label',bins=50)Out[10]:Pythonarray([&lt;matplotlib.axes._subplots.AxesSubplotobjectat0x11270da50&gt;,&lt;matplotlib.axes._subplots.AxesSubplotobjectat0x1126c7750&gt;],dtype=object)12array([&lt;matplotlib.axes._subplots.AxesSubplotobjectat0x11270da50&gt;,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0&lt;matplotlib.axes._subplots.AxesSubplotobjectat0x1126c7750&gt;],dtype=object)\u00a0\u592a\u68d2\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u600e\u4e48\u80fd\u8ba9\u7535\u8111\u81ea\u5df1\u8bc6\u522b\u6587\u5b57\u4fe1\u606f\uff1f\u5b83\u53ef\u4ee5\u7406\u89e3\u8fd9\u4e9b\u80e1\u8a00\u4e71\u8bed\u5417\uff1f\u00a0\u7b2c\u4e8c\u6b65\uff1a\u6570\u636e\u9884\u5904\u7406\u8fd9\u4e00\u8282\u6211\u4eec\u5c06\u539f\u59cb\u4fe1\u606f\uff08\u5b57\u7b26\u5e8f\u5217\uff09\u8f6c\u6362\u4e3a\u5411\u91cf\uff08\u6570\u5b57\u5e8f\u5217\uff09\uff1b\u8fd9\u91cc\u7684\u6620\u5c04\u5e76\u975e\u4e00\u5bf9\u4e00\u7684\uff0c\u6211\u4eec\u8981\u7528\u8bcd\u888b\u6a21\u578b\uff08bag-of-words\uff09\u628a\u6bcf\u4e2a\u4e0d\u91cd\u590d\u7684\u8bcd\u7528\u4e00\u4e2a\u6570\u5b57\u6765\u8868\u793a\u3002\u4e0e\u7b2c\u4e00\u6b65\u7684\u65b9\u6cd5\u4e00\u6837\uff0c\u8ba9\u6211\u4eec\u5199\u4e00\u4e2a\u5c06\u4fe1\u606f\u5206\u5272\u6210\u5355\u8bcd\u7684\u51fd\u6570\uff1aIn\u00a0[11]:Pythondefsplit_into_tokens(message):message=unicode(message,'utf8')#convertbytesintoproperunicodereturnTextBlob(message).words123defsplit_into_tokens(message):\u00a0\u00a0\u00a0\u00a0message=unicode(message,'utf8')\u00a0\u00a0#convertbytesintoproperunicode\u00a0\u00a0\u00a0\u00a0returnTextBlob(message).words\u8fd9\u8fd8\u662f\u539f\u59cb\u6587\u672c\u7684\u4e00\u90e8\u5206:In\u00a0[12]:Pythonmessages.message.head()1messages.message.head()Out[12]:Python0Gountiljurongpoint,crazy..Availableonly...1Oklar...Jokingwifuoni...2Freeentryin2awklycomptowinFACupfina...3Udunsaysoearlyhor...Ucalreadythensay...4NahIdon'tthinkhegoestousf,helivesaro...Name:message,dtype:object1234560\u00a0\u00a0\u00a0\u00a0Gountiljurongpoint,crazy..Availableonly...1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Oklar...Jokingwifuoni...2\u00a0\u00a0\u00a0\u00a0Freeentryin2awklycomptowinFACupfina...3\u00a0\u00a0\u00a0\u00a0Udunsaysoearlyhor...Ucalreadythensay...4\u00a0\u00a0\u00a0\u00a0NahIdon'tthinkhegoestousf,helivesaro...Name:message,dtype:object\u8fd9\u662f\u539f\u59cb\u6587\u672c\u5904\u7406\u540e\u7684\u6837\u5b50\uff1aIn\u00a0[13]:Pythonmessages.message.head().apply(split_into_tokens)1messages.message.head().apply(split_into_tokens)Out[13]:Python0[Go,until,jurong,point,crazy,Available,o...1[Ok,lar,Joking,wif,u,oni]2[Free,entry,in,2,a,wkly,comp,to,win,F...3[U,dun,say,so,early,hor,U,c,already,t...4[Nah,I,do,n't,think,he,goes,to,usf,he...Name:message,dtype:object1234560\u00a0\u00a0\u00a0\u00a0[Go,until,jurong,point,crazy,Available,o...1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[Ok,lar,Joking,wif,u,oni]2\u00a0\u00a0\u00a0\u00a0[Free,entry,in,2,a,wkly,comp,to,win,F...3\u00a0\u00a0\u00a0\u00a0[U,dun,say,so,early,hor,U,c,already,t...4\u00a0\u00a0\u00a0\u00a0[Nah,I,do,n't,think,he,goes,to,usf,he...Name:message,dtype:object\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08NLP\uff09\u7684\u95ee\u9898\uff1a\u5927\u5199\u5b57\u6bcd\u662f\u5426\u643a\u5e26\u4fe1\u606f\uff1f\u5355\u8bcd\u7684\u4e0d\u540c\u5f62\u5f0f\uff08\u201cgoes\u201d\u548c\u201cgo\u201d\uff09\u662f\u5426\u643a\u5e26\u4fe1\u606f\uff1f\u53f9\u8bcd\u548c\u9650\u5b9a\u8bcd\u662f\u5426\u643a\u5e26\u4fe1\u606f\uff1f\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u60f3\u5bf9\u6587\u672c\u8fdb\u884c\u66f4\u597d\u7684\u6807\u51c6\u5316\u3002\u6211\u4eec\u4f7f\u7528textblob\u83b7\u53d6part-of-speech(POS)\u6807\u7b7e\uff1aIn\u00a0[14]:PythonTextBlob(\"Helloworld,howisitgoing?\").tags#listof(word,POS)pairs1TextBlob(\"Helloworld,howisitgoing?\").tags\u00a0\u00a0#listof(word,POS)pairsOut[14]:Python[(u'Hello',u'UH'),(u'world',u'NN'),(u'how',u'WRB'),(u'is',u'VBZ'),(u'it',u'PRP'),(u'going',u'VBG')]123456[(u'Hello',u'UH'),(u'world',u'NN'),(u'how',u'WRB'),(u'is',u'VBZ'),(u'it',u'PRP'),(u'going',u'VBG')]\u5e76\u5c06\u5355\u8bcd\u6807\u51c6\u5316\u4e3a\u57fa\u672c\u5f62\u5f0f(lemmas)\uff1aIn\u00a0[15]:Pythondefsplit_into_lemmas(message):message=unicode(message,'utf8').lower()words=TextBlob(message).words#foreachword,takeits\"baseform\"=lemmareturn[word.lemmaforwordinwords]messages.message.head().apply(split_into_lemmas)1234567defsplit_into_lemmas(message):\u00a0\u00a0\u00a0\u00a0message=unicode(message,'utf8').lower()\u00a0\u00a0\u00a0\u00a0words=TextBlob(message).words\u00a0\u00a0\u00a0\u00a0#foreachword,takeits\"baseform\"=lemma\u00a0\u00a0\u00a0\u00a0return[word.lemmaforwordinwords]\u00a0messages.message.head().apply(split_into_lemmas)Out[15]:0[go,until,jurong,point,crazy,available,o...1[ok,lar,joking,wif,u,oni]2[free,entry,in,2,a,wkly,comp,to,win,f...3[u,dun,say,so,early,hor,u,c,already,t...4[nah,i,do,n't,think,he,go,to,usf,he,...Name:message,dtype:object1234560[go,until,jurong,point,crazy,available,o...1[ok,lar,joking,wif,u,oni]2[free,entry,in,2,a,wkly,comp,to,win,f...3[u,dun,say,so,early,hor,u,c,already,t...4[nah,i,do,n't,think,he,go,to,usf,he,...Name:message,dtype:object\u00a0\u8fd9\u6837\u5c31\u597d\u591a\u4e86\u3002\u4f60\u4e5f\u8bb8\u8fd8\u4f1a\u60f3\u5230\u66f4\u591a\u7684\u65b9\u6cd5\u6765\u6539\u8fdb\u9884\u5904\u7406\uff1a\u89e3\u7801HTML\u5b9e\u4f53\uff08\u6211\u4eec\u4e0a\u9762\u770b\u5230\u7684&amp\u548c&lt\uff09\uff1b\u8fc7\u6ee4\u6389\u505c\u7528\u8bcd(\u4ee3\u8bcd\u7b49)\uff1b\u6dfb\u52a0\u66f4\u591a\u7279\u5f81\uff0c\u6bd4\u5982\u6240\u6709\u5b57\u6bcd\u5927\u5199\u6807\u8bc6\u7b49\u7b49\u3002\u00a0\u7b2c\u4e09\u6b65\uff1a\u6570\u636e\u8f6c\u6362\u4e3a\u5411\u91cf\u73b0\u5728\uff0c\u6211\u4eec\u5c06\u6bcf\u6761\u6d88\u606f\uff08\u8bcd\u5e72\u5217\u8868\uff09\u8f6c\u6362\u6210\u673a\u5668\u5b66\u4e60\u6a21\u578b\u53ef\u4ee5\u7406\u89e3\u7684\u5411\u91cf\u3002\u7528\u8bcd\u888b\u6a21\u578b\u5b8c\u6210\u8fd9\u9879\u5de5\u4f5c\u9700\u8981\u4e09\u4e2a\u6b65\u9aa4\uff1a1.\u00a0\u5bf9\u6bcf\u4e2a\u8bcd\u5728\u6bcf\u6761\u4fe1\u606f\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u8fdb\u884c\u8ba1\u6570\uff08\u8bcd\u9891\uff09\uff1b2.\u5bf9\u8ba1\u6570\u8fdb\u884c\u52a0\u6743\uff0c\u8fd9\u6837\u7ecf\u5e38\u51fa\u73b0\u7684\u5355\u8bcd\u5c06\u4f1a\u83b7\u5f97\u8f83\u4f4e\u7684\u6743\u91cd\uff08\u9006\u5411\u6587\u4ef6\u9891\u7387\uff09\uff1b3.\u5c06\u5411\u91cf\u7531\u539f\u59cb\u6587\u672c\u957f\u5ea6\u5f52\u4e00\u5316\u5230\u5355\u4f4d\u957f\u5ea6\uff08L2\u8303\u5f0f\uff09\u3002\u6bcf\u4e2a\u5411\u91cf\u7684\u7ef4\u5ea6\u7b49\u4e8eSMS\u8bed\u6599\u5e93\u4e2d\u5305\u542b\u7684\u72ec\u7acb\u8bcd\u7684\u6570\u91cf\u3002In\u00a0[16]:Pythonbow_transformer=CountVectorizer(analyzer=split_into_lemmas).fit(messages['message'])printlen(bow_transformer.vocabulary_)12bow_transformer=CountVectorizer(analyzer=split_into_lemmas).fit(messages['message'])printlen(bow_transformer.vocabulary_)Python887418874\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u5f3a\u5927\u7684python\u673a\u5668\u5b66\u4e60\u8bad\u7ec3\u5e93scikit-learn(sklearn)\uff0c\u5b83\u5305\u542b\u5927\u91cf\u7684\u65b9\u6cd5\u548c\u9009\u9879\u3002\u6211\u4eec\u53d6\u4e00\u4e2a\u4fe1\u606f\u5e76\u4f7f\u7528\u65b0\u7684bow_tramsformer\u83b7\u53d6\u5411\u91cf\u5f62\u5f0f\u7684\u8bcd\u888b\u6a21\u578b\u8ba1\u6570:In\u00a0[17]:Pythonmessage4=messages['message'][3]printmessage412message4=messages['message'][3]printmessage4PythonUdunsaysoearlyhor...Ucalreadythensay...1Udunsaysoearlyhor...Ucalreadythensay...In\u00a0[18]:Pythonbow4=bow_transformer.transform([message4])printbow4printbow4.shape123bow4=bow_transformer.transform([message4])printbow4printbow4.shapePython(0,1158)1(0,1899)1(0,2897)1(0,2927)1(0,4021)1(0,6736)2(0,7111)1(0,7698)1(0,8013)2(1,8874)12345678910\u00a0\u00a0(0,1158)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,1899)\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,2897)\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,2927)\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,4021)\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,6736)\u00a0\u00a0\u00a0\u00a02\u00a0\u00a0(0,7111)\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,7698)\u00a0\u00a0\u00a0\u00a01\u00a0\u00a0(0,8013)\u00a0\u00a0\u00a0\u00a02\u00a0\u00a0(1,8874)message4\u4e2d\u67099\u4e2a\u72ec\u7acb\u8bcd\uff0c\u5b83\u4eec\u4e2d\u7684\u4e24\u4e2a\u51fa\u73b0\u4e86\u4e24\u6b21\uff0c\u5176\u4f59\u7684\u53ea\u51fa\u73b0\u4e86\u4e00\u6b21\u3002\u53ef\u7528\u6027\u68c0\u6d4b\uff0c\u54ea\u4e9b\u8bcd\u51fa\u73b0\u4e86\u4e24\u6b21\uff1fIn\u00a0[19]:Pythonprintbow_transformer.get_feature_names()[6736]printbow_transformer.get_feature_names()[8013]12printbow_transformer.get_feature_names()[6736]printbow_transformer.get_feature_names()[8013]Pythonsayu12sayu\u6574\u4e2aSMS\u8bed\u6599\u5e93\u7684\u8bcd\u888b\u8ba1\u6570\u662f\u4e00\u4e2a\u5e9e\u5927\u7684\u7a00\u758f\u77e9\u9635\uff1aIn\u00a0[20]:Pythonmessages_bow=bow_transformer.transform(messages['message'])print'sparsematrixshape:',messages_bow.shapeprint'numberofnon-zeros:',messages_bow.nnzprint'sparsity:%.2f%%'%(100.0*messages_bow.nnz/(messages_bow.shape[0]*messages_bow.shape[1]))1234messages_bow=bow_transformer.transform(messages['message'])print'sparsematrixshape:',messages_bow.shapeprint'numberofnon-zeros:',messages_bow.nnzprint'sparsity:%.2f%%'%(100.0*messages_bow.nnz/(messages_bow.shape[0]*messages_bow.shape[1]))Pythonsparsematrixshape:(5574,8874)numberofnon-zeros:80272sparsity:0.16%123sparsematrixshape:(5574,8874)numberofnon-zeros:80272sparsity:0.16%\u6700\u7ec8\uff0c\u8ba1\u6570\u540e\uff0c\u4f7f\u7528scikit-learn\u7684TFidfTransformer\u5b9e\u73b0\u7684TF-IDF\u00a0\u5b8c\u6210\u8bcd\u8bed\u52a0\u6743\u548c\u5f52\u4e00\u5316\u3002In\u00a0[21]:Pythontfidf_transformer=TfidfTransformer().fit(messages_bow)tfidf4=tfidf_transformer.transform(bow4)printtfidf4123tfidf_transformer=TfidfTransformer().fit(messages_bow)tfidf4=tfidf_transformer.transform(bow4)printtfidf4Python(0,8013)0.305114653686(0,7698)0.225299911221(0,7111)0.191390347987(0,6736)0.523371210191(0,4021)0.456354991921(0,2927)0.32967579251(0,2897)0.303693312742(0,1899)0.24664322833(0,1158)0.274934159477123456789\u00a0\u00a0(0,8013)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.305114653686\u00a0\u00a0(0,7698)\u00a0\u00a0\u00a0\u00a00.225299911221\u00a0\u00a0(0,7111)\u00a0\u00a0\u00a0\u00a00.191390347987\u00a0\u00a0(0,6736)\u00a0\u00a0\u00a0\u00a00.523371210191\u00a0\u00a0(0,4021)\u00a0\u00a0\u00a0\u00a00.456354991921\u00a0\u00a0(0,2927)\u00a0\u00a0\u00a0\u00a00.32967579251\u00a0\u00a0(0,2897)\u00a0\u00a0\u00a0\u00a00.303693312742\u00a0\u00a0(0,1899)\u00a0\u00a0\u00a0\u00a00.24664322833\u00a0\u00a0(0,1158)\u00a0\u00a0\u00a0\u00a00.274934159477\u5355\u8bcd\u201cu\u201d\u7684IDF\uff08\u9006\u5411\u6587\u4ef6\u9891\u7387\uff09\u662f\u4ec0\u4e48\uff1f\u5355\u8bcd\u201cuniversity\u201d\u7684IDF\u53c8\u662f\u4ec0\u4e48\uff1fIn\u00a0[22]:Pythonprinttfidf_transformer.idf_[bow_transformer.vocabulary_['u']]printtfidf_transformer.idf_[bow_transformer.vocabulary_['university']]12printtfidf_transformer.idf_[bow_transformer.vocabulary_['u']]printtfidf_transformer.idf_[bow_transformer.vocabulary_['university']]Python2.850681505398.23975323521122.850681505398.23975323521\u5c06\u6574\u4e2abag-of-words\u8bed\u6599\u5e93\u8f6c\u5316\u4e3aTF-IDF\u8bed\u6599\u5e93\u3002In\u00a0[23]:Pythonmessages_tfidf=tfidf_transformer.transform(messages_bow)printmessages_tfidf.shape12messages_tfidf=tfidf_transformer.transform(messages_bow)printmessages_tfidf.shapePython(5574,8874)1(5574,8874)\u6709\u8bb8\u591a\u65b9\u6cd5\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u9884\u5904\u7406\u548c\u5411\u91cf\u5316\u3002\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u201c\u7279\u5f81\u5de5\u7a0b\u201d\uff0c\u5b83\u4eec\u901a\u5e38\u662f\u9884\u6d4b\u8fc7\u7a0b\u4e2d\u6700\u8017\u65f6\u95f4\u548c\u6700\u65e0\u8da3\u7684\u90e8\u5206\uff0c\u4f46\u662f\u5b83\u4eec\u975e\u5e38\u91cd\u8981\u5e76\u4e14\u9700\u8981\u7ecf\u9a8c\u3002\u8bc0\u7a8d\u5728\u4e8e\u53cd\u590d\u8bc4\u4f30\uff1a\u5206\u6790\u6a21\u578b\u8bef\u5dee\uff0c\u6539\u8fdb\u6570\u636e\u6e05\u6d17\u548c\u9884\u5904\u7406\u65b9\u6cd5\uff0c\u8fdb\u884c\u5934\u8111\u98ce\u66b4\u8ba8\u8bba\u65b0\u529f\u80fd\uff0c\u8bc4\u4f30\u7b49\u7b49\u3002\u7b2c\u56db\u6b65\uff1a\u8bad\u7ec3\u6a21\u578b,\u68c0\u6d4b\u5783\u573e\u4fe1\u606f\u6211\u4eec\u4f7f\u7528\u5411\u91cf\u5f62\u5f0f\u7684\u4fe1\u606f\u6765\u8bad\u7ec3spam/ham\u5206\u7c7b\u5668\u3002\u8fd9\u90e8\u5206\u5f88\u7b80\u5355\uff0c\u6709\u5f88\u591a\u5b9e\u73b0\u8bad\u7ec3\u7b97\u6cd5\u7684\u5e93\u6587\u4ef6\u3002\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528scikit-learn\uff0c\u9996\u5148\u9009\u62e9NaiveBayes\u5206\u7c7b\u5668\uff1aIn\u00a0[24]:Python%timespam_detector=MultinomialNB().fit(messages_tfidf,messages['label'])1%timespam_detector=MultinomialNB().fit(messages_tfidf,messages['label'])PythonCPUtimes:user4.51ms,sys:987\u00b5s,total:5.49msWalltime:4.77ms12CPUtimes:user4.51ms,sys:987\u00b5s,total:5.49msWalltime:4.77ms\u6211\u4eec\u6765\u8bd5\u7740\u5206\u7c7b\u4e00\u4e2a\u968f\u673a\u4fe1\u606f\uff1aIn\u00a0[25]:Pythonprint'predicted:',spam_detector.predict(tfidf4)[0]print'expected:',messages.label[3]12print'predicted:',spam_detector.predict(tfidf4)[0]print'expected:',messages.label[3]Pythonpredicted:hamexpected:ham12predicted:hamexpected:ham\u592a\u68d2\u4e86\uff01\u4f60\u4e5f\u53ef\u4ee5\u7528\u81ea\u5df1\u7684\u6587\u672c\u8bd5\u8bd5\u3002\u6709\u4e00\u4e2a\u5f88\u81ea\u7136\u7684\u95ee\u9898\u662f\uff1a\u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u5206\u8fa8\u591a\u5c11\u4fe1\u606f\uff1fIn\u00a0[26]:Pythonall_predictions=spam_detector.predict(messages_tfidf)printall_predictions12all_predictions=spam_detector.predict(messages_tfidf)printall_predictionsPython['ham''ham''spam'...,'ham''ham''ham']1['ham''ham''spam'...,'ham''ham''ham']In\u00a0[27]:Pythonprint'accuracy',accuracy_score(messages['label'],all_predictions)print'confusionmatrixn',confusion_matrix(messages['label'],all_predictions)print'(row=expected,col=predicted)'123print'accuracy',accuracy_score(messages['label'],all_predictions)print'confusionmatrixn',confusion_matrix(messages['label'],all_predictions)print'(row=expected,col=predicted)'Pythonaccuracy0.969501255831confusionmatrix[[48270][170577]](row=expected,col=predicted)12345accuracy0.969501255831confusionmatrix[[4827\u00a0\u00a0\u00a0\u00a00][170\u00a0\u00a0577]](row=expected,col=predicted)In\u00a0[28]:Pythonplt.matshow(confusion_matrix(messages['label'],all_predictions),cmap=plt.cm.binary,interpolation='nearest')plt.title('confusionmatrix')plt.colorbar()plt.ylabel('expectedlabel')plt.xlabel('predictedlabel')12345plt.matshow(confusion_matrix(messages['label'],all_predictions),cmap=plt.cm.binary,interpolation='nearest')plt.title('confusionmatrix')plt.colorbar()plt.ylabel('expectedlabel')plt.xlabel('predictedlabel')Out[28]:Python&lt;matplotlib.text.Textat0x11643f6d0&gt;1&lt;matplotlib.text.Textat0x11643f6d0&gt;\u00a0\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u6df7\u6dc6\u77e9\u9635\u8ba1\u7b97\u7cbe\u5ea6\uff08precision\uff09\u548c\u53ec\u56de\u7387\uff08recall\uff09\uff0c\u6216\u8005\u5b83\u4eec\u7684\u7ec4\u5408\uff08\u8c03\u548c\u5e73\u5747\u503c\uff09F1\uff1aIn\u00a0[29]:Pythonprintclassification_report(messages['label'],all_predictions)1printclassification_report(messages['label'],all_predictions)Pythonprecisionrecallf1-scoresupportham0.971.000.984827spam1.000.770.87747avg/total0.970.970.975574123456\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0precision\u00a0\u00a0\u00a0\u00a0recall\u00a0\u00a0f1-score\u00a0\u00a0support\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.97\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.98\u00a0\u00a0\u00a0\u00a0\u00a0\u00a04827\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.77\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.87\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0747\u00a0avg/total\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.97\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.97\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.97\u00a0\u00a0\u00a0\u00a0\u00a0\u00a05574\u6709\u76f8\u5f53\u591a\u7684\u6307\u6807\u90fd\u53ef\u4ee5\u7528\u6765\u8bc4\u4f30\u6a21\u578b\u6027\u80fd\uff0c\u81f3\u4e8e\u54ea\u4e2a\u6700\u5408\u9002\u662f\u7531\u4efb\u52a1\u51b3\u5b9a\u7684\u3002\u6bd4\u5982\uff0c\u5c06\u201cspam\u201d\u9519\u8bef\u9884\u6d4b\u4e3a\u201cham\u201d\u7684\u6210\u672c\u8fdc\u4f4e\u4e8e\u5c06\u201cham\u201d\u9519\u8bef\u9884\u6d4b\u4e3a\u201cspam\u201d\u7684\u6210\u672c\u3002\u00a0\u7b2c\u4e94\u6b65\uff1a\u5982\u4f55\u8fdb\u884c\u5b9e\u9a8c\uff1f\u5728\u4e0a\u8ff0\u201c\u8bc4\u4ef7\u201d\u4e2d\uff0c\u6211\u4eec\u72af\u4e86\u4e2a\u5927\u5fcc\u3002\u4e3a\u4e86\u7b80\u5355\u7684\u6f14\u793a\uff0c\u6211\u4eec\u4f7f\u7528\u8bad\u7ec3\u6570\u636e\u8fdb\u884c\u4e86\u51c6\u786e\u6027\u8bc4\u4f30\u3002\u6c38\u8fdc\u4e0d\u8981\u8bc4\u4f30\u4f60\u7684\u8bad\u7ec3\u6570\u636e\u3002\u8fd9\u662f\u9519\u8bef\u7684\u3002\u8fd9\u6837\u7684\u8bc4\u4f30\u65b9\u6cd5\u4e0d\u80fd\u544a\u8bc9\u6211\u4eec\u6a21\u578b\u7684\u5b9e\u9645\u9884\u6d4b\u80fd\u529b\uff0c\u5982\u679c\u6211\u4eec\u8bb0\u4f4f\u8bad\u7ec3\u671f\u95f4\u7684\u6bcf\u4e2a\u4f8b\u5b50\uff0c\u8bad\u7ec3\u7684\u51c6\u786e\u7387\u5c06\u975e\u5e38\u63a5\u8fd1100%\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u80fd\u7528\u5b83\u6765\u5206\u7c7b\u4efb\u4f55\u65b0\u4fe1\u606f\u3002\u4e00\u4e2a\u6b63\u786e\u7684\u505a\u6cd5\u662f\u5c06\u6570\u636e\u5206\u4e3a\u8bad\u7ec3\u96c6\u548c\u6d4b\u8bd5\u96c6\uff0c\u5728\u6a21\u578b\u62df\u5408\u548c\u8c03\u53c2\u65f6\u53ea\u80fd\u4f7f\u7528\u8bad\u7ec3\u6570\u636e\uff0c\u4e0d\u80fd\u4ee5\u4efb\u4f55\u65b9\u5f0f\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\uff0c\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u786e\u4fdd\u6a21\u578b\u6ca1\u6709\u201c\u4f5c\u5f0a\u201d\uff0c\u6700\u7ec8\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u8bc4\u4ef7\u6a21\u578b\u53ef\u4ee5\u4ee3\u8868\u6a21\u578b\u771f\u6b63\u7684\u9884\u6d4b\u6027\u80fd\u3002In\u00a0[30]:Pythonmsg_train,msg_test,label_train,label_test=train_test_split(messages['message'],messages['label'],test_size=0.2)printlen(msg_train),len(msg_test),len(msg_train)+len(msg_test)1234msg_train,msg_test,label_train,label_test=\u00a0\u00a0\u00a0\u00a0train_test_split(messages['message'],messages['label'],test_size=0.2)\u00a0printlen(msg_train),len(msg_test),len(msg_train)+len(msg_test)Python4459111555741445911155574\u6309\u7167\u8981\u6c42\uff0c\u6d4b\u8bd5\u6570\u636e\u5360\u6574\u4e2a\u6570\u636e\u96c6\u768420%\uff08\u603b\u51715574\u6761\u8bb0\u5f55\u4e2d\u76841115\u6761\uff09\uff0c\u5176\u4f59\u7684\u662f\u8bad\u7ec3\u6570\u636e\uff085574\u6761\u4e2d\u76844459\u6761\uff09\u3002\u8ba9\u6211\u4eec\u56de\u987e\u6574\u4e2a\u6d41\u7a0b\uff0c\u5c06\u6240\u6709\u6b65\u9aa4\u653e\u5165scikit-learn\u7684Pipeline\u4e2d:In\u00a0[31]:Pythondefsplit_into_lemmas(message):message=unicode(message,'utf8').lower()words=TextBlob(message).words#foreachword,takeits\"baseform\"=lemmareturn[word.lemmaforwordinwords]pipeline=Pipeline([('bow',CountVectorizer(analyzer=split_into_lemmas)),#stringstotokenintegercounts('tfidf',TfidfTransformer()),#integercountstoweightedTF-IDFscores('classifier',MultinomialNB()),#trainonTF-IDFvectorsw/NaiveBayesclassifier])1234567891011defsplit_into_lemmas(message):\u00a0\u00a0\u00a0\u00a0message=unicode(message,'utf8').lower()\u00a0\u00a0\u00a0\u00a0words=TextBlob(message).words\u00a0\u00a0\u00a0\u00a0#foreachword,takeits\"baseform\"=lemma\u00a0\u00a0\u00a0\u00a0return[word.lemmaforwordinwords]\u00a0pipeline=Pipeline([\u00a0\u00a0\u00a0\u00a0('bow',CountVectorizer(analyzer=split_into_lemmas)),\u00a0\u00a0#stringstotokenintegercounts\u00a0\u00a0\u00a0\u00a0('tfidf',TfidfTransformer()),\u00a0\u00a0#integercountstoweightedTF-IDFscores\u00a0\u00a0\u00a0\u00a0('classifier',MultinomialNB()),\u00a0\u00a0#trainonTF-IDFvectorsw/NaiveBayesclassifier])\u5b9e\u9645\u5f53\u4e2d\u4e00\u4e2a\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u5c06\u8bad\u7ec3\u96c6\u518d\u6b21\u5206\u5272\u6210\u66f4\u5c0f\u7684\u96c6\u5408\uff0c\u4f8b\u5982\uff0c5\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u5b50\u96c6\u3002\u7136\u540e\u6211\u4eec\u75284\u4e2a\u5b50\u96c6\u8bad\u7ec3\u6570\u636e\uff0c\u7528\u6700\u540e1\u4e2a\u5b50\u96c6\u8ba1\u7b97\u7cbe\u5ea6\uff08\u79f0\u4e4b\u4e3a\u201c\u9a8c\u8bc1\u96c6\u201d\uff09\u3002\u91cd\u590d5\u6b21\uff08\u6bcf\u6b21\u4f7f\u7528\u4e0d\u540c\u7684\u5b50\u96c6\u8fdb\u884c\u9a8c\u8bc1\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u5f97\u5230\u6a21\u578b\u7684\u201c\u7a33\u5b9a\u6027\u201c\u3002\u5982\u679c\u6a21\u578b\u4f7f\u7528\u4e0d\u540c\u5b50\u96c6\u7684\u5f97\u5206\u5dee\u5f02\u975e\u5e38\u5927\uff0c\u90a3\u4e48\u5f88\u53ef\u80fd\u54ea\u91cc\u51fa\u9519\u4e86\uff08\u574f\u6570\u636e\u6216\u8005\u4e0d\u826f\u7684\u6a21\u578b\u65b9\u5dee\uff09\u3002\u8fd4\u56de\uff0c\u5206\u6790\u9519\u8bef\uff0c\u91cd\u65b0\u68c0\u67e5\u8f93\u5165\u6570\u636e\u6709\u6548\u6027\uff0c\u91cd\u65b0\u68c0\u67e5\u6570\u636e\u6e05\u6d17\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u91cc\uff0c\u4e00\u5207\u8fdb\u5c55\u987a\u5229\uff1aIn\u00a0[32]:Pythonscores=cross_val_score(pipeline,#stepstoconvertrawmessagesintomodelsmsg_train,#trainingdatalabel_train,#traininglabelscv=10,#splitdatarandomlyinto10parts:9fortraining,1forscoringscoring='accuracy',#whichscoringmetric?n_jobs=-1,#-1=useallcores=faster)printscores12345678scores=cross_val_score(pipeline,\u00a0\u00a0#stepstoconvertrawmessagesintomodels\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0msg_train,\u00a0\u00a0#trainingdata\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0label_train,\u00a0\u00a0#traininglabels\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cv=10,\u00a0\u00a0#splitdatarandomlyinto10parts:9fortraining,1forscoring\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0scoring='accuracy',\u00a0\u00a0#whichscoringmetric?\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0n_jobs=-1,\u00a0\u00a0#-1=useallcores=faster\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0)printscoresPython[0.937360180.964205820.948545860.941834450.964125560.943820220.946067420.964044940.948314610.94606742]12[0.93736018\u00a0\u00a00.96420582\u00a0\u00a00.94854586\u00a0\u00a00.94183445\u00a0\u00a00.96412556\u00a0\u00a00.94382022\u00a0\u00a00.94606742\u00a0\u00a00.96404494\u00a0\u00a00.94831461\u00a0\u00a00.94606742]\u5f97\u5206\u786e\u5b9e\u6bd4\u8bad\u7ec3\u5168\u90e8\u6570\u636e\u65f6\u5dee\u4e00\u70b9\u70b9\uff085574\u4e2a\u8bad\u7ec3\u4f8b\u5b50\u4e2d\uff0c\u51c6\u786e\u60270.97\uff09\uff0c\u4f46\u662f\u5b83\u4eec\u76f8\u5f53\u7a33\u5b9a\uff1aIn\u00a0[33]:Pythonprintscores.mean(),scores.std()1printscores.mean(),scores.std()Python0.95043864760.0094720082138910.95043864760.00947200821389\u6211\u4eec\u81ea\u7136\u4f1a\u95ee\uff0c\u5982\u4f55\u6539\u8fdb\u8fd9\u4e2a\u6a21\u578b\uff1f\u8fd9\u4e2a\u5f97\u5206\u5df2\u7ecf\u5f88\u9ad8\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u901a\u5e38\u5982\u4f55\u6539\u8fdb\u6a21\u578b\u5462\uff1fNaiveBayes\u662f\u4e00\u4e2a\u9ad8\u504f\u5dee-\u4f4e\u65b9\u5dee\u7684\u5206\u7c7b\u5668\uff08\u7b80\u5355\u4e14\u7a33\u5b9a\uff0c\u4e0d\u6613\u8fc7\u5ea6\u62df\u5408\uff09\u3002\u4e0e\u5176\u76f8\u53cd\u7684\u4f8b\u5b50\u662f\u4f4e\u504f\u5dee-\u9ad8\u65b9\u5dee\uff08\u5bb9\u6613\u8fc7\u5ea6\u62df\u5408\uff09\u7684k\u6700\u4e34\u8fd1\uff08kNN\uff09\u5206\u7c7b\u5668\u548c\u51b3\u7b56\u6811\u3002Bagging\uff08\u968f\u673a\u68ee\u6797\uff09\u662f\u4e00\u79cd\u901a\u8fc7\u8bad\u7ec3\u8bb8\u591a\uff08\u9ad8\u65b9\u5dee\uff09\u6a21\u578b\u548c\u6c42\u5747\u503c\u6765\u964d\u4f4e\u65b9\u5dee\u7684\u65b9\u6cd5\u3002\u00a0\u6362\u53e5\u8bdd\u8bf4\uff1a\u9ad8\u504f\u5dee=\u5206\u7c7b\u5668\u6bd4\u8f83\u56fa\u6267\u3002\u5b83\u6709\u81ea\u5df1\u7684\u60f3\u6cd5\uff0c\u6570\u636e\u80fd\u591f\u6539\u53d8\u7684\u7a7a\u95f4\u6709\u9650\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u4e5f\u6ca1\u6709\u591a\u5c11\u8fc7\u5ea6\u62df\u5408\u7684\u7a7a\u95f4\uff08\u5de6\u56fe\uff09\u3002\u4f4e\u504f\u5dee=\u5206\u7c7b\u5668\u66f4\u542c\u8bdd\uff0c\u4f46\u4e5f\u66f4\u795e\u7ecf\u8d28\u3002\u5927\u5bb6\u90fd\u77e5\u9053\uff0c\u8ba9\u5b83\u505a\u4ec0\u4e48\u5c31\u505a\u4ec0\u4e48\u53ef\u80fd\u9020\u6210\u9ebb\u70e6\uff08\u53f3\u56fe\uff09\u3002In\u00a0[34]:Pythondefplot_learning_curve(estimator,title,X,y,ylim=None,cv=None,n_jobs=-1,train_sizes=np.linspace(.1,1.0,5)):\"\"\"Generateasimpleplotofthetestandtraninglearningcurve.Parameters----------estimator:objecttypethatimplementsthe\"fit\"and\"predict\"methodsAnobjectofthattypewhichisclonedforeachvalidation.title:stringTitleforthechart.X:array-like,shape(n_samples,n_features)Trainingvector,wheren_samplesisthenumberofsamplesandn_featuresisthenumberoffeatures.y:array-like,shape(n_samples)or(n_samples,n_features),optionalTargetrelativetoXforclassificationorregression;Noneforunsupervisedlearning.ylim:tuple,shape(ymin,ymax),optionalDefinesminimumandmaximumyvaluesplotted.cv:integer,cross-validationgenerator,optionalIfanintegerispassed,itisthenumberoffolds(defaultsto3).Specificcross-validationobjectscanbepassed,seesklearn.cross_validationmoduleforthelistofpossibleobjectsn_jobs:integer,optionalNumberofjobstoruninparallel(default1).\"\"\"plt.figure()plt.title(title)ifylimisnotNone:plt.ylim(*ylim)plt.xlabel(\"Trainingexamples\")plt.ylabel(\"Score\")train_sizes,train_scores,test_scores=learning_curve(estimator,X,y,cv=cv,n_jobs=n_jobs,train_sizes=train_sizes)train_scores_mean=np.mean(train_scores,axis=1)train_scores_std=np.std(train_scores,axis=1)test_scores_mean=np.mean(test_scores,axis=1)test_scores_std=np.std(test_scores,axis=1)plt.grid()plt.fill_between(train_sizes,train_scores_mean-train_scores_std,train_scores_mean+train_scores_std,alpha=0.1,color=\"r\")plt.fill_between(train_sizes,test_scores_mean-test_scores_std,test_scores_mean+test_scores_std,alpha=0.1,color=\"g\")plt.plot(train_sizes,train_scores_mean,'o-',color=\"r\",label=\"Trainingscore\")plt.plot(train_sizes,test_scores_mean,'o-',color=\"g\",label=\"Cross-validationscore\")plt.legend(loc=\"best\")returnplt12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758defplot_learning_curve(estimator,title,X,y,ylim=None,cv=None,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0n_jobs=-1,train_sizes=np.linspace(.1,1.0,5)):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0Generateasimpleplotofthetestandtraninglearningcurve.\u00a0\u00a0\u00a0\u00a0\u00a0Parameters\u00a0\u00a0\u00a0\u00a0----------\u00a0\u00a0\u00a0\u00a0estimator:objecttypethatimplementsthe\"fit\"and\"predict\"methods\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Anobjectofthattypewhichisclonedforeachvalidation.\u00a0\u00a0\u00a0\u00a0\u00a0title:string\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Titleforthechart.\u00a0\u00a0\u00a0\u00a0\u00a0X:array-like,shape(n_samples,n_features)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Trainingvector,wheren_samplesisthenumberofsamplesand\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0n_featuresisthenumberoffeatures.\u00a0\u00a0\u00a0\u00a0\u00a0y:array-like,shape(n_samples)or(n_samples,n_features),optional\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0TargetrelativetoXforclassificationorregression;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Noneforunsupervisedlearning.\u00a0\u00a0\u00a0\u00a0\u00a0ylim:tuple,shape(ymin,ymax),optional\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Definesminimumandmaximumyvaluesplotted.\u00a0\u00a0\u00a0\u00a0\u00a0cv:integer,cross-validationgenerator,optional\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Ifanintegerispassed,itisthenumberoffolds(defaultsto3).\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Specificcross-validationobjectscanbepassed,see\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sklearn.cross_validationmoduleforthelistofpossibleobjects\u00a0\u00a0\u00a0\u00a0\u00a0n_jobs:integer,optional\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Numberofjobstoruninparallel(default1).\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0plt.figure()\u00a0\u00a0\u00a0\u00a0plt.title(title)\u00a0\u00a0\u00a0\u00a0ifylimisnotNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0plt.ylim(*ylim)\u00a0\u00a0\u00a0\u00a0plt.xlabel(\"Trainingexamples\")\u00a0\u00a0\u00a0\u00a0plt.ylabel(\"Score\")\u00a0\u00a0\u00a0\u00a0train_sizes,train_scores,test_scores=learning_curve(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0estimator,X,y,cv=cv,n_jobs=n_jobs,train_sizes=train_sizes)\u00a0\u00a0\u00a0\u00a0train_scores_mean=np.mean(train_scores,axis=1)\u00a0\u00a0\u00a0\u00a0train_scores_std=np.std(train_scores,axis=1)\u00a0\u00a0\u00a0\u00a0test_scores_mean=np.mean(test_scores,axis=1)\u00a0\u00a0\u00a0\u00a0test_scores_std=np.std(test_scores,axis=1)\u00a0\u00a0\u00a0\u00a0plt.grid()\u00a0\u00a0\u00a0\u00a0\u00a0plt.fill_between(train_sizes,train_scores_mean-train_scores_std,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0train_scores_mean+train_scores_std,alpha=0.1,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0color=\"r\")\u00a0\u00a0\u00a0\u00a0plt.fill_between(train_sizes,test_scores_mean-test_scores_std,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0test_scores_mean+test_scores_std,alpha=0.1,color=\"g\")\u00a0\u00a0\u00a0\u00a0plt.plot(train_sizes,train_scores_mean,'o-',color=\"r\",\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0label=\"Trainingscore\")\u00a0\u00a0\u00a0\u00a0plt.plot(train_sizes,test_scores_mean,'o-',color=\"g\",\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0label=\"Cross-validationscore\")\u00a0\u00a0\u00a0\u00a0\u00a0plt.legend(loc=\"best\")\u00a0\u00a0\u00a0\u00a0returnpltIn\u00a0[35]:Python%timeplot_learning_curve(pipeline,\"accuracyvs.trainingsetsize\",msg_train,label_train,cv=5)1%timeplot_learning_curve(pipeline,\"accuracyvs.trainingsetsize\",msg_train,label_train,cv=5)PythonCPUtimes:user382ms,sys:83.1ms,total:465msWalltime:28.5s12CPUtimes:user382ms,sys:83.1ms,total:465msWalltime:28.5sOut[35]:Python&lt;module'matplotlib.pyplot'from'/Volumes/work/workspace/vew/sklearn_intro/lib/python2.7/site-packages/matplotlib/pyplot.pyc'&gt;1&lt;module'matplotlib.pyplot'from'/Volumes/work/workspace/vew/sklearn_intro/lib/python2.7/site-packages/matplotlib/pyplot.pyc'&gt;\u00a0\u00a0\uff08\u6211\u4eec\u5bf9\u6570\u636e\u768464%\u8fdb\u884c\u4e86\u6709\u6548\u8bad\u7ec3\uff1a\u4fdd\u755920%\u7684\u6570\u636e\u4f5c\u4e3a\u6d4b\u8bd5\u96c6\uff0c\u4fdd\u7559\u5269\u4f59\u768420%\u505a5\u6298\u4ea4\u53c9\u9a8c\u8bc1=>0.8*0.8*5574=3567\u4e2a\u8bad\u7ec3\u6570\u636e\u3002\uff09\u968f\u7740\u6027\u80fd\u7684\u63d0\u5347\uff0c\u8bad\u7ec3\u548c\u4ea4\u53c9\u9a8c\u8bc1\u90fd\u8868\u73b0\u826f\u597d\uff0c\u6211\u4eec\u53d1\u73b0\u7531\u4e8e\u6570\u636e\u91cf\u8f83\u5c11\uff0c\u8fd9\u4e2a\u6a21\u578b\u96be\u4ee5\u8db3\u591f\u590d\u6742/\u7075\u6d3b\u5730\u6355\u83b7\u6240\u6709\u7684\u7ec6\u5fae\u5dee\u522b\u3002\u5728\u8fd9\u79cd\u7279\u6b8a\u6848\u4f8b\u4e2d\uff0c\u4e0d\u7ba1\u600e\u6837\u505a\u7cbe\u5ea6\u90fd\u5f88\u9ad8\uff0c\u8fd9\u4e2a\u95ee\u9898\u770b\u8d77\u6765\u4e0d\u662f\u5f88\u660e\u663e\u3002\u5173\u4e8e\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u9009\u62e9\uff1a\u4f7f\u7528\u66f4\u591a\u7684\u8bad\u7ec3\u6570\u636e\uff0c\u589e\u52a0\u6a21\u578b\u7684\u590d\u6742\u6027\uff1b\u4f7f\u7528\u66f4\u590d\u6742\uff08\u66f4\u4f4e\u504f\u5dee\uff09\u7684\u6a21\u578b\uff0c\u4ece\u73b0\u6709\u6570\u636e\u4e2d\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002\u5728\u8fc7\u53bb\u7684\u51e0\u5e74\u91cc\uff0c\u968f\u7740\u6536\u96c6\u5927\u89c4\u6a21\u8bad\u7ec3\u6570\u636e\u8d8a\u6765\u8d8a\u5bb9\u6613\uff0c\u673a\u5668\u8d8a\u6765\u8d8a\u5feb\u3002\u65b9\u6cd51\u53d8\u5f97\u8d8a\u6765\u8d8a\u6d41\u884c\uff08\u66f4\u7b80\u5355\u7684\u7b97\u6cd5\uff0c\u66f4\u591a\u7684\u6570\u636e\uff09\u3002\u7b80\u5355\u7684\u7b97\u6cd5\uff08\u5982NaiveBayes\uff09\u4e5f\u6709\u66f4\u5bb9\u6613\u89e3\u91ca\u7684\u989d\u5916\u4f18\u52bf\uff08\u76f8\u5bf9\u4e00\u4e9b\u66f4\u590d\u6742\u7684\u9ed1\u7bb1\u6a21\u578b\uff0c\u5982\u795e\u7ecf\u7f51\u7edc\uff09\u3002\u4e86\u89e3\u4e86\u5982\u4f55\u6b63\u786e\u5730\u8bc4\u4f30\u6a21\u578b\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5f00\u59cb\u7814\u7a76\u53c2\u6570\u5bf9\u6027\u80fd\u6709\u54ea\u4e9b\u5f71\u54cd\u3002\u7b2c\u516d\u6b65\uff1a\u5982\u4f55\u8c03\u6574\u53c2\u6570\uff1f\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u770b\u5230\u7684\u53ea\u662f\u51b0\u5c71\u4e00\u89d2\uff0c\u8fd8\u6709\u8bb8\u591a\u5176\u5b83\u53c2\u6570\u9700\u8981\u8c03\u6574\u3002\u6bd4\u5982\u4f7f\u7528\u4ec0\u4e48\u7b97\u6cd5\u8fdb\u884c\u8bad\u7ec3\u3002\u4e0a\u9762\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528\u4e86NavieBayes\uff0c\u4f46\u662fscikit-learn\u652f\u6301\u8bb8\u591a\u5206\u7c7b\u5668\uff1a\u652f\u6301\u5411\u91cf\u673a\u3001\u6700\u90bb\u8fd1\u7b97\u6cd5\u3001\u51b3\u7b56\u6811\u3001Ensamble\u65b9\u6cd5\u7b49\u2026\u6211\u4eec\u4f1a\u95ee\uff1aIDF\u52a0\u6743\u5bf9\u51c6\u786e\u6027\u6709\u4ec0\u4e48\u5f71\u54cd\uff1f\u6d88\u8017\u989d\u5916\u6210\u672c\u8fdb\u884c\u8bcd\u5f62\u8fd8\u539f\uff08\u4e0e\u53ea\u7528\u7eaf\u6587\u5b57\u76f8\u6bd4\uff09\u771f\u7684\u4f1a\u6709\u6548\u679c\u5417\uff1f\u8ba9\u6211\u4eec\u6765\u770b\u770b\uff1aIn\u00a0[37]:Pythonparams={'tfidf__use_idf':(True,False),'bow__analyzer':(split_into_lemmas,split_into_tokens),}grid=GridSearchCV(pipeline,#pipelinefromaboveparams,#parameterstotuneviacrossvalidationrefit=True,#fitusingallavailabledataattheend,onthebestfoundparamcombinationn_jobs=-1,#numberofcorestouseforparallelization;-1for\"allcores\"scoring='accuracy',#whatscoreareweoptimizing?cv=StratifiedKFold(label_train,n_folds=5),#whattypeofcrossvalidationtouse)12345678910111213params={\u00a0\u00a0\u00a0\u00a0'tfidf__use_idf':(True,False),\u00a0\u00a0\u00a0\u00a0'bow__analyzer':(split_into_lemmas,split_into_tokens),}\u00a0grid=GridSearchCV(\u00a0\u00a0\u00a0\u00a0pipeline,\u00a0\u00a0#pipelinefromabove\u00a0\u00a0\u00a0\u00a0params,\u00a0\u00a0#parameterstotuneviacrossvalidation\u00a0\u00a0\u00a0\u00a0refit=True,\u00a0\u00a0#fitusingallavailabledataattheend,onthebestfoundparamcombination\u00a0\u00a0\u00a0\u00a0n_jobs=-1,\u00a0\u00a0#numberofcorestouseforparallelization;-1for\"allcores\"\u00a0\u00a0\u00a0\u00a0scoring='accuracy',\u00a0\u00a0#whatscoreareweoptimizing?\u00a0\u00a0\u00a0\u00a0cv=StratifiedKFold(label_train,n_folds=5),\u00a0\u00a0#whattypeofcrossvalidationtouse)In\u00a0[38]:Python%timenb_detector=grid.fit(msg_train,label_train)printnb_detector.grid_scores_123%timenb_detector=grid.fit(msg_train,label_train)\u00a0printnb_detector.grid_scores_PythonCPUtimes:user4.09s,sys:291ms,total:4.38sWalltime:20.2s[mean:0.94752,std:0.00357,params:{'tfidf__use_idf':True,'bow__analyzer':&lt;functionsplit_into_lemmasat0x1131e8668&gt;},mean:0.92958,std:0.00390,params:{'tfidf__use_idf':False,'bow__analyzer':&lt;functionsplit_into_lemmasat0x1131e8668&gt;},mean:0.94528,std:0.00259,params:{'tfidf__use_idf':True,'bow__analyzer':&lt;functionsplit_into_tokensat0x11270b7d0&gt;},mean:0.92868,std:0.00240,params:{'tfidf__use_idf':False,'bow__analyzer':&lt;functionsplit_into_tokensat0x11270b7d0&gt;}]123CPUtimes:user4.09s,sys:291ms,total:4.38sWalltime:20.2s[mean:0.94752,std:0.00357,params:{'tfidf__use_idf':True,'bow__analyzer':&lt;functionsplit_into_lemmasat0x1131e8668&gt;},mean:0.92958,std:0.00390,params:{'tfidf__use_idf':False,'bow__analyzer':&lt;functionsplit_into_lemmasat0x1131e8668&gt;},mean:0.94528,std:0.00259,params:{'tfidf__use_idf':True,'bow__analyzer':&lt;functionsplit_into_tokensat0x11270b7d0&gt;},mean:0.92868,std:0.00240,params:{'tfidf__use_idf':False,'bow__analyzer':&lt;functionsplit_into_tokensat0x11270b7d0&gt;}]\uff08\u9996\u5148\u663e\u793a\u6700\u4f73\u53c2\u6570\u7ec4\u5408\uff1a\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\u662f\u4f7f\u7528idf=True\u548canalyzer=split_into_lemmas\u7684\u53c2\u6570\u7ec4\u5408\uff09\u5feb\u901f\u5408\u7406\u6027\u68c0\u67e5In\u00a0[39]:Pythonprintnb_detector.predict_proba([\"Himom,howareyou?\"])[0]printnb_detector.predict_proba([\"WINNER!Creditforfree!\"])[0]12printnb_detector.predict_proba([\"Himom,howareyou?\"])[0]printnb_detector.predict_proba([\"WINNER!Creditforfree!\"])[0]Python[0.993839550.00616045][0.296631090.70336891]12[0.99383955\u00a0\u00a00.00616045][0.29663109\u00a0\u00a00.70336891]predict_proba\u8fd4\u56de\u6bcf\u7c7b\uff08ham\uff0cspam\uff09\u7684\u9884\u6d4b\u6982\u7387\u3002\u5728\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6d88\u606f\u88ab\u9884\u6d4b\u4e3aham\u7684\u6982\u7387>99%\uff0c\u88ab\u9884\u6d4b\u4e3aspam\u7684\u6982\u7387<1%\u3002\u5982\u679c\u8fdb\u884c\u9009\u62e9\u6a21\u578b\u4f1a\u8ba4\u4e3a\u4fe1\u606f\u662f\u201dham\u201c\uff1aIn\u00a0[40]:Pythonprintnb_detector.predict([\"Himom,howareyou?\"])[0]printnb_detector.predict([\"WINNER!Creditforfree!\"])[0]12printnb_detector.predict([\"Himom,howareyou?\"])[0]printnb_detector.predict([\"WINNER!Creditforfree!\"])[0]Pythonhamspam12hamspam\u5728\u8bad\u7ec3\u671f\u95f4\u6ca1\u6709\u7528\u5230\u7684\u6d4b\u8bd5\u96c6\u7684\u6574\u4f53\u5f97\u5206\uff1aIn\u00a0[41]:Pythonpredictions=nb_detector.predict(msg_test)printconfusion_matrix(label_test,predictions)printclassification_report(label_test,predictions)123predictions=nb_detector.predict(msg_test)printconfusion_matrix(label_test,predictions)printclassification_report(label_test,predictions)Python[[9730][4696]]precisionrecallf1-scoresupportham0.951.000.98973spam1.000.680.81142avg/total0.960.960.96111512345678[[973\u00a0\u00a00][46\u00a0\u00a096]]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0precision\u00a0\u00a0\u00a0\u00a0recall\u00a0\u00a0f1-score\u00a0\u00a0support\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.95\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.98\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0973\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.00\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.68\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.81\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0142\u00a0avg/total\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.96\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.96\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.96\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01115\u8fd9\u662f\u6211\u4eec\u4f7f\u7528\u8bcd\u5f62\u8fd8\u539f\u3001TF-IDF\u548cNavieBayes\u5206\u7c7b\u5668\u7684ham\u68c0\u6d4bpipeline\u83b7\u5f97\u7684\u5b9e\u9645\u9884\u6d4b\u6027\u80fd\u3002\u8ba9\u6211\u4eec\u5c1d\u8bd5\u53e6\u4e00\u4e2a\u5206\u7c7b\u5668\uff1a\u652f\u6301\u5411\u91cf\u673a\uff08SVM\uff09\u3002SVM\u53ef\u4ee5\u975e\u5e38\u8fc5\u901f\u7684\u5f97\u5230\u7ed3\u679c\uff0c\u5b83\u6240\u9700\u8981\u7684\u53c2\u6570\u8c03\u6574\u4e5f\u5f88\u5c11\uff08\u867d\u7136\u6bd4NavieBayes\u7a0d\u591a\u4e00\u70b9\uff09\uff0c\u5728\u5904\u7406\u6587\u672c\u6570\u636e\u65b9\u9762\u5b83\u662f\u4e2a\u597d\u7684\u8d77\u70b9\u3002In\u00a0[42]:Pythonpipeline_svm=Pipeline([('bow',CountVectorizer(analyzer=split_into_lemmas)),('tfidf',TfidfTransformer()),('classifier',SVC()),#&lt;==changehere])#pipelineparameterstoautomaticallyexploreandtuneparam_svm=[{'classifier__C':[1,10,100,1000],'classifier__kernel':['linear']},{'classifier__C':[1,10,100,1000],'classifier__gamma':[0.001,0.0001],'classifier__kernel':['rbf']},]grid_svm=GridSearchCV(pipeline_svm,#pipelinefromaboveparam_grid=param_svm,#parameterstotuneviacrossvalidationrefit=True,#fitusingalldata,onthebestdetectedclassifiern_jobs=-1,#numberofcorestouseforparallelization;-1for\"allcores\"scoring='accuracy',#whatscoreareweoptimizing?cv=StratifiedKFold(label_train,n_folds=5),#whattypeofcrossvalidationtouse)1234567891011121314151617181920pipeline_svm=Pipeline([\u00a0\u00a0\u00a0\u00a0('bow',CountVectorizer(analyzer=split_into_lemmas)),\u00a0\u00a0\u00a0\u00a0('tfidf',TfidfTransformer()),\u00a0\u00a0\u00a0\u00a0('classifier',SVC()),\u00a0\u00a0#&lt;==changehere])\u00a0#pipelineparameterstoautomaticallyexploreandtuneparam_svm=[\u00a0\u00a0{'classifier__C':[1,10,100,1000],'classifier__kernel':['linear']},\u00a0\u00a0{'classifier__C':[1,10,100,1000],'classifier__gamma':[0.001,0.0001],'classifier__kernel':['rbf']},]\u00a0grid_svm=GridSearchCV(\u00a0\u00a0\u00a0\u00a0pipeline_svm,\u00a0\u00a0#pipelinefromabove\u00a0\u00a0\u00a0\u00a0param_grid=param_svm,\u00a0\u00a0#parameterstotuneviacrossvalidation\u00a0\u00a0\u00a0\u00a0refit=True,\u00a0\u00a0#fitusingalldata,onthebestdetectedclassifier\u00a0\u00a0\u00a0\u00a0n_jobs=-1,\u00a0\u00a0#numberofcorestouseforparallelization;-1for\"allcores\"\u00a0\u00a0\u00a0\u00a0scoring='accuracy',\u00a0\u00a0#whatscoreareweoptimizing?\u00a0\u00a0\u00a0\u00a0cv=StratifiedKFold(label_train,n_folds=5),\u00a0\u00a0#whattypeofcrossvalidationtouse)In\u00a0[43]:Python%timesvm_detector=grid_svm.fit(msg_train,label_train)#findthebestcombinationfromparam_svmprintsvm_detector.grid_scores_123%timesvm_detector=grid_svm.fit(msg_train,label_train)#findthebestcombinationfromparam_svm\u00a0printsvm_detector.grid_scores_PythonCPUtimes:user5.24s,sys:170ms,total:5.41sWalltime:1min8s[mean:0.98677,std:0.00259,params:{'classifier__kernel':'linear','classifier__C':1},mean:0.98654,std:0.00100,params:{'classifier__kernel':'linear','classifier__C':10},mean:0.98654,std:0.00100,params:{'classifier__kernel':'linear','classifier__C':100},mean:0.98654,std:0.00100,params:{'classifier__kernel':'linear','classifier__C':1000},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':1},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':1},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':10},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':10},mean:0.97040,std:0.00587,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':100},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':100},mean:0.98722,std:0.00280,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':1000},mean:0.97040,std:0.00587,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':1000}]123CPUtimes:user5.24s,sys:170ms,total:5.41sWalltime:1min8s[mean:0.98677,std:0.00259,params:{'classifier__kernel':'linear','classifier__C':1},mean:0.98654,std:0.00100,params:{'classifier__kernel':'linear','classifier__C':10},mean:0.98654,std:0.00100,params:{'classifier__kernel':'linear','classifier__C':100},mean:0.98654,std:0.00100,params:{'classifier__kernel':'linear','classifier__C':1000},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':1},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':1},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':10},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':10},mean:0.97040,std:0.00587,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':100},mean:0.86432,std:0.00006,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':100},mean:0.98722,std:0.00280,params:{'classifier__gamma':0.001,'classifier__kernel':'rbf','classifier__C':1000},mean:0.97040,std:0.00587,params:{'classifier__gamma':0.0001,'classifier__kernel':'rbf','classifier__C':1000}]\u56e0\u6b64\uff0c\u5f88\u660e\u663e\u7684\uff0c\u5177\u6709C=1\u7684\u7ebf\u6027\u6838\u51fd\u6570\u662f\u6700\u597d\u7684\u53c2\u6570\u7ec4\u5408\u3002\u518d\u4e00\u6b21\u5408\u7406\u6027\u68c0\u67e5\uff1aIn\u00a0[44]:Pythonprintsvm_detector.predict([\"Himom,howareyou?\"])[0]printsvm_detector.predict([\"WINNER!Creditforfree!\"])[0]12printsvm_detector.predict([\"Himom,howareyou?\"])[0]printsvm_detector.predict([\"WINNER!Creditforfree!\"])[0]Pythonhamspam12hamspamIn\u00a0[45]:Pythonprintconfusion_matrix(label_test,svm_detector.predict(msg_test))printclassification_report(label_test,svm_detector.predict(msg_test))12printconfusion_matrix(label_test,svm_detector.predict(msg_test))printclassification_report(label_test,svm_detector.predict(msg_test))Python[[9658][13129]]precisionrecallf1-scoresupportham0.990.990.99973spam0.940.910.92142avg/total0.980.980.98111512345678[[965\u00a0\u00a08][13129]]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0precision\u00a0\u00a0\u00a0\u00a0recall\u00a0\u00a0f1-score\u00a0\u00a0support\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ham\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.99\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.99\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.99\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0973\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0spam\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.94\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.91\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.92\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0142\u00a0avg/total\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.98\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.98\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.98\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01115\u8fd9\u662f\u6211\u4eec\u4f7f\u7528SVM\u65f6\u53ef\u4ee5\u4ecespam\u90ae\u4ef6\u68c0\u6d4b\u6d41\u7a0b\u4e2d\u83b7\u5f97\u7684\u5b9e\u9645\u9884\u6d4b\u6027\u80fd\u3002\u7b2c\u4e03\u6b65\uff1a\u751f\u6210\u9884\u6d4b\u5668\u7ecf\u8fc7\u57fa\u672c\u5206\u6790\u548c\u8c03\u4f18\uff0c\u771f\u6b63\u7684\u5de5\u4f5c\uff08\u5de5\u7a0b\uff09\u5f00\u59cb\u4e86\u3002\u751f\u6210\u9884\u6d4b\u5668\u7684\u6700\u540e\u4e00\u6b65\u662f\u518d\u6b21\u5bf9\u6574\u4e2a\u6570\u636e\u96c6\u5408\u8fdb\u884c\u8bad\u7ec3\uff0c\u4ee5\u5145\u5206\u5229\u7528\u6240\u6709\u53ef\u7528\u6570\u636e\u3002\u5f53\u7136\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u4e0a\u9762\u4ea4\u53c9\u9a8c\u8bc1\u627e\u5230\u7684\u6700\u597d\u7684\u53c2\u6570\u3002\u8fd9\u4e0e\u6211\u4eec\u5f00\u59cb\u505a\u7684\u975e\u5e38\u76f8\u4f3c\uff0c\u4f46\u8fd9\u6b21\u6df1\u5165\u4e86\u89e3\u5b83\u7684\u884c\u4e3a\u548c\u7a33\u5b9a\u6027\u3002\u5728\u4e0d\u540c\u7684\u8bad\u7ec3/\u6d4b\u8bd5\u5b50\u96c6\u8fdb\u884c\u8bc4\u4ef7\u3002\u6700\u7ec8\u7684\u9884\u6d4b\u5668\u53ef\u4ee5\u5e8f\u5217\u5316\u5230\u78c1\u76d8\uff0c\u4ee5\u4fbf\u6211\u4eec\u4e0b\u6b21\u60f3\u4f7f\u7528\u5b83\u65f6\uff0c\u53ef\u4ee5\u8df3\u8fc7\u6240\u6709\u8bad\u7ec3\u76f4\u63a5\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff1aIn\u00a0[46]:Python#storethespamdetectortodiskaftertrainingwithopen('sms_spam_detector.pkl','wb')asfout:cPickle.dump(svm_detector,fout)#...andloaditback,wheneverneeded,possiblyonadifferentmachinesvm_detector_reloaded=cPickle.load(open('sms_spam_detector.pkl'))123456#storethespamdetectortodiskaftertrainingwithopen('sms_spam_detector.pkl','wb')asfout:\u00a0\u00a0\u00a0\u00a0cPickle.dump(svm_detector,fout)\u00a0#...andloaditback,wheneverneeded,possiblyonadifferentmachinesvm_detector_reloaded=cPickle.load(open('sms_spam_detector.pkl'))\u52a0\u8f7d\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u4e0e\u539f\u59cb\u5bf9\u8c61\u8868\u73b0\u76f8\u540c\u7684\u5bf9\u8c61\uff1aIn\u00a0[47]:Pythonprint'before:',svm_detector.predict([message4])[0]print'after:',svm_detector_reloaded.predict([message4])[0]12print'before:',svm_detector.predict([message4])[0]print'after:',svm_detector_reloaded.predict([message4])[0]Pythonbefore:hamafter:ham12before:hamafter:ham\u751f\u4ea7\u6267\u884c\u7684\u53e6\u4e00\u4e2a\u91cd\u8981\u90e8\u5206\u662f\u6027\u80fd\u3002\u7ecf\u8fc7\u5feb\u901f\u3001\u8fed\u4ee3\u6a21\u578b\u8c03\u6574\u548c\u53c2\u6570\u641c\u7d22\u4e4b\u540e\uff0c\u6027\u80fd\u826f\u597d\u7684\u6a21\u578b\u53ef\u4ee5\u88ab\u7ffb\u8bd1\u6210\u4e0d\u540c\u7684\u8bed\u8a00\u5e76\u4f18\u5316\u3002\u53ef\u4ee5\u727a\u7272\u51e0\u4e2a\u70b9\u7684\u51c6\u786e\u6027\u6362\u53d6\u4e00\u4e2a\u66f4\u5c0f\u3001\u66f4\u5feb\u7684\u6a21\u578b\u5417\uff1f\u662f\u5426\u503c\u5f97\u4f18\u5316\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u6216\u8005\u4f7f\u7528mmap\u8de8\u8fdb\u7a0b\u5171\u4eab\u5185\u5b58\uff1f\u8bf7\u6ce8\u610f\uff0c\u4f18\u5316\u5e76\u4e0d\u603b\u662f\u5fc5\u8981\u7684\uff0c\u8981\u4ece\u5b9e\u9645\u60c5\u51b5\u51fa\u53d1\u3002\u8fd8\u6709\u4e00\u4e9b\u9700\u8981\u8003\u8651\u7684\u95ee\u9898\uff0c\u6bd4\u5982\uff0c\u751f\u4ea7\u6d41\u6c34\u7ebf\u8fd8\u9700\u8981\u8003\u8651\u9c81\u68d2\u6027\uff08\u670d\u52a1\u6545\u969c\u8f6c\u79fb\u3001\u5197\u4f59\u3001\u8d1f\u8f7d\u5e73\u8861\uff09\u3001\u76d1\u6d4b\uff08\u5305\u62ec\u5f02\u5e38\u81ea\u52a8\u62a5\u8b66\uff09\u3001HR\u53ef\u66ff\u4ee3\u6027\uff08\u907f\u514d\u5173\u4e8e\u5de5\u4f5c\u5982\u4f55\u5b8c\u6210\u7684\u201c\u77e5\u8bc6\u5b64\u5c9b\u201d\u3001\u6666\u6da9/\u9501\u5b9a\u7684\u6280\u672f\u3001\u8c03\u6574\u7ed3\u679c\u7684\u9ed1\u827a\u672f\uff09\u3002\u73b0\u5728\uff0c\u5f00\u6e90\u4e16\u754c\u90fd\u53ef\u4ee5\u4e3a\u6240\u6709\u8fd9\u4e9b\u9886\u57df\u63d0\u4f9b\u53ef\u884c\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u7531\u4e8eOSI\u6279\u51c6\u7684\u5f00\u6e90\u8bb8\u53ef\u8bc1\uff0c\u4eca\u5929\u5c55\u793a\u7684\u6240\u6709\u5de5\u5177\u90fd\u53ef\u4ee5\u514d\u8d39\u7528\u4e8e\u5546\u4e1a\u7528\u9014\u3002\u5176\u4ed6\u5b9e\u7528\u6982\u5ff5\u6570\u636e\u7a00\u758f\u6027\u5728\u7ebf\u5b66\u4e60\uff0c\u6570\u636e\u6d41\u7528\u4e8e\u5185\u5b58\u5171\u4eab\u7684mmap\uff0c\u7cfb\u7edf\u201c\u51b7\u542f\u52a8\u201d\u8d1f\u8f7d\u65f6\u95f4\u53ef\u6269\u5c55\u6027\u3001\u5206\u5e03\u5f0f\uff08\u96c6\u7fa4\uff09\u5904\u7406\u65e0\u76d1\u7763\u5b66\u4e60\u5927\u591a\u6570\u6570\u636e\u6ca1\u6709\u7ed3\u6784\u5316\u3002\u4e86\u89e3\u8fd9\u4e9b\u6570\u636e\uff0c\u5176\u4e2d\u6ca1\u6709\u81ea\u5e26\u7684\u6807\u7b7e\uff08\u4e0d\u7136\u5c31\u6210\u4e86\u76d1\u7763\u5b66\u4e60\uff01\uff09\u3002\u6211\u4eec\u5982\u4f55\u8bad\u7ec3\u6ca1\u6709\u6807\u7b7e\u7684\u5185\u5bb9\uff1f\u8fd9\u662f\u4ec0\u4e48\u9b54\u6cd5\uff1f\u5206\u5e03\u5047\u8bbe\u201c\u5728\u7c7b\u4f3c\u8bed\u5883\u4e2d\u51fa\u73b0\u7684\u8bcd\u503e\u5411\u4e8e\u5177\u6709\u76f8\u4f3c\u7684\u542b\u4e49\u201d\u3002\u4e0a\u4e0b\u6587=\u53e5\u5b50\uff0c\u6587\u6863\uff0c\u6ed1\u52a8\u7a97\u53e3\u2026\u2026\u67e5\u770bgoogle\u5173\u4e8e\u65e0\u76d1\u7763\u5b66\u4e60\u7684word2vec\u5728\u7ebf\u6f14\u793a\u3002\u7b80\u5355\u7684\u6a21\u578b\u3001\u5927\u91cf\u6570\u636e\uff08Google\u65b0\u95fb\uff0c1000\u4ebf\u8bcd\uff0c\u6ca1\u6709\u6807\u7b7e\uff09\u3002\u4e0b\u4e00\u6b65\u505a\u4ec0\u4e48\uff1f\u8fd9\u4e2anotebook\u7684\u9759\u6001\u7248\u672c\uff08\u975e\u4ea4\u4e92\u7248\u672c\uff09\u7684HTML\uff0c\u5730\u5740\uff1ahttp://radimrehurek.com/data_science_python\uff08\u4f60\u53ef\u80fd\u5df2\u7ecf\u5728\u770b\u4e86\uff0c\u4f46\u4ee5\u9632\u4e07\u4e00\uff09\u4ea4\u4e92\u5f0fnotebook\u6e90\u6587\u4ef6\u5728GitHub\u4e0a\uff0chttp://radimrehurek.com/data_science_python/data_science_python.ipynb\uff08\u89c1\u4e0a\u9762\u7684\u5b89\u88c5\u8bf4\u660e\uff09\u3002\u00a0\u6211\u7684\u516c\u53f8\u81f4\u529b\u4e8e\u6fc0\u52a8\u4eba\u5fc3\u7684\u3001\u52a1\u5b9e\u7684\u3001\u5546\u4e1a\u7684\u7cfb\u7edf\u5efa\u8bbe\u548c\u5c16\u7aef\u7814\u7a76\u3002\u6709\u5174\u8da3\u5b9e\u4e60/\u5408\u4f5c\uff1f\u8bf7\u8054\u7cfb\u6211\u3002\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u4efb\u9009\u4e00\u79cd\u652f\u4ed8\u65b9\u5f0f2\u8d5e10\u6536\u85cf1\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u5b66\u4ee5\u81f4\u7528123\u5e94\u7528\u8f6f\u4ef6\u5f00\u53d1\uff0c\u4e3b\u8981\u7528python\u3001sql\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b721"]},
{"art_title": ["\u8da3\u6587\uff1aPython\u7a0b\u5e8f\u5458\u7684\u8fdb\u5316\u53f2"], "art_url": ["http://python.jobbole.com/15005/"], "art_create_time": ["2012/03/11"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u9ec4\u5229\u6c11\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1afmeyer\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u5bfc\u8bfb\uff1a\u4e0b\u9762\u4ee3\u7801\u6765\u81ea\u00a0fmeyer\u00a0\uff0c\u5217\u4e3e\u4e86\u5404\u79cd\u7a0b\u5e8f\u5458\u6240\u5199\u7684\u9636\u4e58\u7b97\u6cd5\u4ee3\u7801\uff0c\u751a\u81f3\u5305\u62ec\u7f51\u9875\u8bbe\u8ba1\u5e08\u7684\u3002:)Python#\u65b0\u624b\u7a0b\u5e8f\u5458deffactorial(x):ifx==0:return1else:returnx*factorial(x-1)printfactorial(6)#\u6709\u4e00\u5e74Pascal\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458deffactorial(x):result=1i=2whilei&lt;=x:result=result*ii=i+1returnresultprintfactorial(6)#\u6709\u4e00\u5e74C\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458deffact(x):#{result=i=1;while(i&lt;=x):#{result*=i;i+=1;#}returnresult;#}print(fact(6))#\u6709\u4e00\u5e74SICP\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458@tailcalldeffact(x,acc=1):if(x&gt;1):return(fact((x-1),(acc*x)))else:returnaccprint(fact(6))#\u6709\u4e00\u5e74Python\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458defFactorial(x):res=1foriinxrange(2,x+1):res*=ireturnresprintFactorial(6)#\u61d2\u60f0\u7684Python\u7a0b\u5e8f\u5458deffact(x):returnx&gt;1andx*fact(x-1)or1printfact(6)#\u66f4\u61d2\u60f0\u7684Python\u7a0b\u5e8f\u5458f=lambdax:xandx*f(x-1)or1printf(6)#\u4e13\u5bb6\u7ea7Python\u7a0b\u5e8f\u5458importoperatorasopimportfunctionalasffact=lambdax:f.foldl(op.mul,1,xrange(2,x+1))printfact(6)#Python\u9ed1\u5ba2importsys@tailcalldeffact(x,acc=1):ifx:returnfact(x.__sub__(1),acc.__mul__(x))returnaccsys.stdout.write(str(fact(6))+'\\n')#\u4e13\u5bb6\u7ea7\u7a0b\u5e8f\u5458importc_mathfact=c_math.factprintfact(6)#\u82f1\u56fd\u4e13\u5bb6\u7ea7\u7a0b\u5e8f\u5458\uff08\u8bd1\u6ce8\uff1a\u5728\u82f1\u5f0f\u82f1\u8bed\u4e2d\uff0c\u201c\u6570\u5b66\u201d\u7684\u7b80\u5199\uff0c\u591a\u7528\u201cmaths\u201d\uff0c\u4e0d\u662f\u201cmath\"\u3002\uff09importc_mathsfact=c_maths.factprintfact(6)#\u7f51\u9875\u8bbe\u8ba1\u5e08deffactorial(x):#-------------------------------------------------#---\u8fd9\u6bb5\u4ee3\u7801\u662f\u4eceMathVault\u90a3\u5f04\u8fc7\u6765\u6ef4---#---\u8ba1\u7b97\u9636\u4e58\uff08C\uff09\u4e9a\u745f\u00b7\u53f2\u5bc6\u65af1999\u5e74---#-------------------------------------------------result=str(1)i=1#\u8c22\u8c22\u4e9a\u5f53whilei&lt;=x:#result=result*i#It'sfastertouse*=#result=str(result*result+i)#result=int(result*=i)#??????resultstr(int(result)*i)#result=int(str(result)*i)i=i+1returnresultprintfactorial(6)#Unix\u7a0b\u5e8f\u5458importosdeffact(x):os.system('factorial'+str(x))fact(6)#Windows\u7a0b\u5e8f\u5458NULL=NonedefCalculateAndPrintFactorialEx(dwNumber,hOutputDevice,lpLparam,lpWparam,lpsscSecurity,*dwReserved):iflpsscSecurity!=NULL:returnNULL#NotimplementeddwResult=dwCounter=1whiledwCounter&lt;=dwNumber:dwResult*=dwCounterdwCounter+=1hOutputDevice.write(str(dwResult))hOutputDevice.write('\\n')return1importsysCalculateAndPrintFactorialEx(6,sys.stdout,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL)#\u4f01\u4e1a\u7a0b\u5e8f\u5458defnew(cls,*args,**kwargs):returncls(*args,**kwargs)classNumber(object):passclassIntegralNumber(int,Number):deftoInt(self):returnnew(int,self)classInternalBase(object):def__init__(self,base):self.base=base.toInt()defgetBase(self):returnnew(IntegralNumber,self.base)classMathematicsSystem(object):def__init__(self,ibase):Abstract@classmethoddefgetInstance(cls,ibase):try:cls.__instanceexceptAttributeError:cls.__instance=new(cls,ibase)returncls.__instanceclassStandardMathematicsSystem(MathematicsSystem):def__init__(self,ibase):ifibase.getBase()!=new(IntegralNumber,2):raiseNotImplementedErrorself.base=ibase.getBase()defcalculateFactorial(self,target):result=new(IntegralNumber,1)i=new(IntegralNumber,2)whilei&lt;=target:result=result*ii=i+new(IntegralNumber,1)returnresultprintStandardMathematicsSystem.getInstance(new(InternalBase,new(IntegralNumber,2))).calculateFactorial(new(IntegralNumber,6))123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166#\u65b0\u624b\u7a0b\u5e8f\u5458deffactorial(x):\u00a0\u00a0\u00a0\u00a0ifx==0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return1\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx*factorial(x-1)printfactorial(6)\u00a0#\u6709\u4e00\u5e74Pascal\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458deffactorial(x):\u00a0\u00a0\u00a0\u00a0result=1\u00a0\u00a0\u00a0\u00a0i=2\u00a0\u00a0\u00a0\u00a0whilei&lt;=x:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result=result*i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0i=i+1\u00a0\u00a0\u00a0\u00a0returnresultprintfactorial(6)\u00a0#\u6709\u4e00\u5e74C\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458deffact(x):#{\u00a0\u00a0\u00a0\u00a0result=i=1;\u00a0\u00a0\u00a0\u00a0while(i&lt;=x):#{\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result*=i;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0i+=1;\u00a0\u00a0\u00a0\u00a0#}\u00a0\u00a0\u00a0\u00a0returnresult;#}print(fact(6))\u00a0#\u6709\u4e00\u5e74SICP\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458@tailcalldeffact(x,acc=1):\u00a0\u00a0\u00a0\u00a0if(x&gt;1):return(fact((x-1),(acc*x)))\u00a0\u00a0\u00a0\u00a0else:returnaccprint(fact(6))\u00a0#\u6709\u4e00\u5e74Python\u7ecf\u9a8c\u7684\u7a0b\u5e8f\u5458defFactorial(x):\u00a0\u00a0\u00a0\u00a0res=1\u00a0\u00a0\u00a0\u00a0foriinxrange(2,x+1):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0res*=i\u00a0\u00a0\u00a0\u00a0returnresprintFactorial(6)\u00a0#\u61d2\u60f0\u7684Python\u7a0b\u5e8f\u5458deffact(x):\u00a0\u00a0\u00a0\u00a0returnx&gt;1andx*fact(x-1)or1printfact(6)\u00a0#\u66f4\u61d2\u60f0\u7684Python\u7a0b\u5e8f\u5458f=lambdax:xandx*f(x-1)or1printf(6)\u00a0#\u4e13\u5bb6\u7ea7Python\u7a0b\u5e8f\u5458importoperatorasopimportfunctionalasffact=lambdax:f.foldl(op.mul,1,xrange(2,x+1))printfact(6)\u00a0#Python\u9ed1\u5ba2importsys@tailcalldeffact(x,acc=1):\u00a0\u00a0\u00a0\u00a0ifx:returnfact(x.__sub__(1),acc.__mul__(x))\u00a0\u00a0\u00a0\u00a0returnaccsys.stdout.write(str(fact(6))+'\\n')\u00a0#\u4e13\u5bb6\u7ea7\u7a0b\u5e8f\u5458importc_mathfact=c_math.factprintfact(6)\u00a0#\u82f1\u56fd\u4e13\u5bb6\u7ea7\u7a0b\u5e8f\u5458\uff08\u8bd1\u6ce8\uff1a\u5728\u82f1\u5f0f\u82f1\u8bed\u4e2d\uff0c\u201c\u6570\u5b66\u201d\u7684\u7b80\u5199\uff0c\u591a\u7528\u201cmaths\u201d\uff0c\u4e0d\u662f\u201cmath\"\u3002\uff09importc_mathsfact=c_maths.factprintfact(6)\u00a0#\u7f51\u9875\u8bbe\u8ba1\u5e08deffactorial(x):\u00a0\u00a0\u00a0\u00a0#-------------------------------------------------\u00a0\u00a0\u00a0\u00a0#---\u8fd9\u6bb5\u4ee3\u7801\u662f\u4eceMathVault\u90a3\u5f04\u8fc7\u6765\u6ef4---\u00a0\u00a0\u00a0\u00a0#---\u8ba1\u7b97\u9636\u4e58\uff08C\uff09\u4e9a\u745f\u00b7\u53f2\u5bc6\u65af1999\u5e74---\u00a0\u00a0\u00a0\u00a0#-------------------------------------------------\u00a0\u00a0\u00a0\u00a0result=str(1)\u00a0\u00a0\u00a0\u00a0i=1#\u8c22\u8c22\u4e9a\u5f53\u00a0\u00a0\u00a0\u00a0whilei&lt;=x:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#result=result*i#It'sfastertouse*=\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#result=str(result*result+i)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#result=int(result*=i)#??????\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0resultstr(int(result)*i)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#result=int(str(result)*i)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0i=i+1\u00a0\u00a0\u00a0\u00a0returnresultprintfactorial(6)\u00a0#Unix\u7a0b\u5e8f\u5458importosdeffact(x):\u00a0\u00a0\u00a0\u00a0os.system('factorial'+str(x))fact(6)\u00a0#Windows\u7a0b\u5e8f\u5458NULL=NonedefCalculateAndPrintFactorialEx(dwNumber,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0hOutputDevice,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lpLparam,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lpWparam,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lpsscSecurity,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*dwReserved):\u00a0\u00a0\u00a0\u00a0iflpsscSecurity!=NULL:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnNULL#Notimplemented\u00a0\u00a0\u00a0\u00a0dwResult=dwCounter=1\u00a0\u00a0\u00a0\u00a0whiledwCounter&lt;=dwNumber:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0dwResult*=dwCounter\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0dwCounter+=1\u00a0\u00a0\u00a0\u00a0hOutputDevice.write(str(dwResult))\u00a0\u00a0\u00a0\u00a0hOutputDevice.write('\\n')\u00a0\u00a0\u00a0\u00a0return1importsysCalculateAndPrintFactorialEx(6,sys.stdout,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL)\u00a0#\u4f01\u4e1a\u7a0b\u5e8f\u5458defnew(cls,*args,**kwargs):\u00a0\u00a0\u00a0\u00a0returncls(*args,**kwargs)\u00a0classNumber(object):\u00a0\u00a0\u00a0\u00a0pass\u00a0classIntegralNumber(int,Number):\u00a0\u00a0\u00a0\u00a0deftoInt(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnnew(int,self)\u00a0classInternalBase(object):\u00a0\u00a0\u00a0\u00a0def__init__(self,base):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.base=base.toInt()\u00a0\u00a0\u00a0\u00a0\u00a0defgetBase(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnnew(IntegralNumber,self.base)\u00a0classMathematicsSystem(object):\u00a0\u00a0\u00a0\u00a0def__init__(self,ibase):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Abstract\u00a0\u00a0\u00a0\u00a0\u00a0@classmethod\u00a0\u00a0\u00a0\u00a0defgetInstance(cls,ibase):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cls.__instance\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0exceptAttributeError:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cls.__instance=new(cls,ibase)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returncls.__instance\u00a0classStandardMathematicsSystem(MathematicsSystem):\u00a0\u00a0\u00a0\u00a0def__init__(self,ibase):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifibase.getBase()!=new(IntegralNumber,2):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseNotImplementedError\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.base=ibase.getBase()\u00a0\u00a0\u00a0\u00a0\u00a0defcalculateFactorial(self,target):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result=new(IntegralNumber,1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0i=new(IntegralNumber,2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0whilei&lt;=target:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result=result*i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0i=i+new(IntegralNumber,1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnresult\u00a0printStandardMathematicsSystem.getInstance(new(InternalBase,new(IntegralNumber,2))).calculateFactorial(new(IntegralNumber,6))\u4e0b\u9762\u4ee3\u7801\u662fkohashi\u7ed9\u51fa\u7684\uff0c\u4ed6\u8bf4\u662f\u5728\u90ae\u5c40\u770b\u5230\u7684\u3002Python#VBA\u7a0b\u5e8f\u5458deffactorial(x):ifx==0:return1ifx==1:returnxifx==2:returnx*(x-1)ifx==3:returnx*(x-1)*(x-2)ifx==4:returnx*(x-1)*(x-2)*(x-3)ifx==5:returnx*(x-1)*(x-2)*(x-3)*(x-4)ifx==6:returnx*(x-1)*(x-2)*(x-3)*(x-4)*(x-5)printfactorial(6)1234567891011121314151617#VBA\u7a0b\u5e8f\u5458deffactorial(x):\u00a0\u00a0\u00a0\u00a0ifx==0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return1\u00a0\u00a0\u00a0\u00a0ifx==1:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx\u00a0\u00a0\u00a0\u00a0ifx==2:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx*(x-1)\u00a0\u00a0\u00a0\u00a0ifx==3:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx*(x-1)*(x-2)\u00a0\u00a0\u00a0\u00a0ifx==4:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx*(x-1)*(x-2)*(x-3)\u00a0\u00a0\u00a0\u00a0ifx==5:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx*(x-1)*(x-2)*(x-3)*(x-4)\u00a0\u00a0\u00a0\u00a0ifx==6:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnx*(x-1)*(x-2)*(x-3)*(x-4)*(x-5)printfactorial(6)\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u4efb\u9009\u4e00\u79cd\u652f\u4ed8\u65b9\u5f0f1\u8d5e2\u6536\u85cf9\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u9ec4\u5229\u6c11\u4f2f\u4e50\u5728\u7ebf\u8054\u5408\u53d1\u8d77\u4eba\uff0c\u5173\u6ce8IT\u548c\u4e92\u8054\u7f51\u3002\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b799\u00b7"]},
{"art_title": ["\u8fd9 6 \u6bb5\u4ee3\u7801\uff0c\u6210\u5c31\u4e86\u5982\u4eca\u7684\u6df1\u5ea6\u5b66\u4e60"], "art_url": ["http://python.jobbole.com/88713/"], "art_create_time": ["2017/10/18"], "art_img": ["http://wx4.sinaimg.cn/mw690/63918611gy1fkmh74kp2lj21400u0417.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-MentosZ\u7ffb\u8bd1\uff0c\u9ec4\u5229\u6c11\u6821\u7a3f\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1aEmilWallner\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u4ece\u4ee3\u7801\u4e2d\u8ffd\u6eaf\u6df1\u5ea6\u5b66\u4e60\u7684\u5386\u53f2\u6df1\u5ea6\u5b66\u4e60\u53d1\u5c55\u5230\u5982\u4eca\u7684\u5730\u4f4d\uff0c\u79bb\u4e0d\u5f00\u4e0b\u9762\u8fd96\u6bb5\u4ee3\u7801\u3002\u672c\u6587\u4ecb\u7ecd\u4e86\u8fd9\u4e9b\u4ee3\u7801\u7684\u521b\u4f5c\u8005\u53ca\u5176\u5b8c\u6210\u8fd9\u4e9b\u7a81\u7834\u6027\u6210\u5c31\u7684\u6545\u4e8b\u80cc\u666f\u3002\u6bcf\u4e2a\u6545\u4e8b\u90fd\u6709\u7b80\u5355\u7684\u4ee3\u7801\u793a\u4f8b\uff0c\u8bfb\u8005\u4eec\u53ef\u4ee5\u5728FloydHub\u548cGitHub\u627e\u5230\u76f8\u5173\u4ee3\u7801\u3002Source:Googlepressimage\u56fe\u7247\u6765\u6e90\uff1aGoogle\u65b0\u95fb\u56fe\u7247\u00a0\u8981\u8fd0\u884cFloydHub\u4e0a\u7684\u4ee3\u7801\u793a\u4f8b\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u7535\u8111\u5df2\u7ecf\u5b89\u88c5\u4e86Floyd\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5e76\u5c06\u6211\u4e0a\u4f20\u7684\u4ee3\u7801\u793a\u4f8b\u514b\u9686\u5230\u672c\u5730\u8ba1\u7b97\u673a\u3002\u5982\u679c\u60a8\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528FloydHub\uff0c\u53ef\u4ee5\u5148\u9605\u8bfb\u6211\u4e4b\u524d\u53d1\u5e03\u7684\u6587\u7ae0\u4e2d\u5173\u4e8e\u5982\u4f55\u4f7f\u7528FloydHub\u7684\u90e8\u5206\u3002\u5728\u672c\u5730\u8ba1\u7b97\u673a\u793a\u4f8b\u9879\u76ee\u4e2d\u521d\u59cb\u5316\u547d\u4ee4\u884c\u754c\u9762\u4e4b\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5728FloydHub\u4e0a\u542f\u52a8\u9879\u76ee\uff1afloydrun--dataemilwallner/datasets/mnist/1:mnist--tensorboard--modejupyter1floydrun--dataemilwallner/datasets/mnist/1:mnist--tensorboard--modejupyter\u6700\u5c0f\u4e8c\u4e58\u6cd5\u6240\u6709\u7684\u6df1\u5ea6\u5b66\u4e60\u7b97\u6cd5\u90fd\u59cb\u4e8e\u4e0b\u9762\u8fd9\u4e2a\u6570\u5b66\u516c\u5f0f\uff08\u6211\u5df2\u5c06\u5176\u8f6c\u6210Python\u4ee3\u7801\uff09Python#y=mx+b#misslope,bisy-interceptdefcompute_error_for_line_given_points(b,m,coordinates):totalError=0foriinrange(0,len(coordinates)):x=coordinates[i][0]y=coordinates[i][1]totalError+=(y-(m*x+b))**2returntotalError/float(len(coordinates))#examplecompute_error_for_line_given_points(1,2,[[3,6],[6,9],[12,18]])123456789101112#y=mx+b#misslope,bisy-intercept\u00a0defcompute_error_for_line_given_points(b,m,coordinates):\u00a0\u00a0\u00a0\u00a0totalError=0\u00a0\u00a0\u00a0\u00a0foriinrange(0,len(coordinates)):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0x=coordinates[i][0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0y=coordinates[i][1]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0totalError+=(y-(m*x+b))**2\u00a0\u00a0\u00a0\u00a0returntotalError/float(len(coordinates))#examplecompute_error_for_line_given_points(1,2,[[3,6],[6,9],[12,18]])\u6700\u5c0f\u4e8c\u4e58\u6cd5\u57281805\u5e74\u7531Adrien-MarieLegendre\u9996\u6b21\u63d0\u51fa\uff081805,Legendre\uff09\uff0c\u8fd9\u4f4d\u5df4\u9ece\u6570\u5b66\u5bb6\u4e5f\u4ee5\u6d4b\u91cf\u4eea\u5668\u95fb\u540d\u3002\u4ed6\u6781\u5176\u75f4\u8ff7\u4e8e\u9884\u6d4b\u5f57\u661f\u7684\u65b9\u4f4d\uff0c\u575a\u6301\u4e0d\u61c8\u5730\u5bfb\u627e\u4e00\u79cd\u53ef\u4ee5\u57fa\u4e8e\u5f57\u661f\u65b9\u4f4d\u5386\u53f2\u6570\u636e\u8ba1\u7b97\u5176\u8f68\u8ff9\u7684\u7b97\u6cd5\u3002\u4ed6\u5c1d\u8bd5\u4e86\u8bb8\u591a\u79cd\u7b97\u6cd5\uff0c\u4e00\u904d\u904d\u8bd5\u9519\uff0c\u7ec8\u4e8e\u627e\u5230\u4e86\u4e00\u4e2a\u7b97\u6cd5\u4e0e\u7ed3\u679c\u76f8\u7b26\u3002Legendre\u7684\u7b97\u6cd5\u662f\u9996\u5148\u9884\u6d4b\u5f57\u661f\u672a\u6765\u7684\u65b9\u4f4d\uff0c\u7136\u540e\u8ba1\u7b97\u8bef\u5dee\u7684\u5e73\u65b9\uff0c\u6700\u7ec8\u76ee\u7684\u662f\u901a\u8fc7\u4fee\u6539\u9884\u6d4b\u503c\u4ee5\u51cf\u5c11\u8bef\u5dee\u5e73\u65b9\u548c\u3002\u800c\u8fd9\u4e5f\u6b63\u662f\u7ebf\u6027\u56de\u5f52\u7684\u57fa\u672c\u601d\u60f3\u3002\u8bfb\u8005\u53ef\u4ee5\u5728Jupyternotebook\u4e2d\u8fd0\u884c\u4e0a\u8ff0\u4ee3\u7801\u6765\u52a0\u6df1\u5bf9\u8fd9\u4e2a\u7b97\u6cd5\u7684\u7406\u89e3\u3002m\u662f\u7cfb\u6570\uff0cb\u662f\u9884\u6d4b\u7684\u5e38\u6570\u9879\uff0ccoordinates\u662f\u5f57\u661f\u7684\u4f4d\u7f6e\u3002\u76ee\u6807\u662f\u627e\u5230\u5408\u9002\u7684m\u548cb\u4f7f\u5176\u8bef\u5dee\u5c3d\u53ef\u80fd\u5c0f\u3002\u8fd9\u662f\u6df1\u5ea6\u5b66\u4e60\u7684\u6838\u5fc3\u601d\u60f3\uff1a\u7ed9\u5b9a\u8f93\u5165\u503c\u548c\u671f\u671b\u7684\u8f93\u51fa\u503c\uff0c\u7136\u540e\u5bfb\u627e\u4e24\u8005\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u3002\u68af\u5ea6\u4e0b\u964dLegendre\u8fd9\u79cd\u901a\u8fc7\u624b\u52a8\u5c1d\u8bd5\u6765\u964d\u4f4e\u9519\u8bef\u7387\u7684\u65b9\u6cd5\u975e\u5e38\u8017\u65f6\u3002\u8377\u5170\u7684\u8bfa\u8d1d\u5c14\u5956\u5f97\u4e3bPeterDebye\u5728\u4e00\u4e2a\u4e16\u7eaa\u540e\uff081909\u5e74\uff09\u6b63\u5f0f\u63d0\u51fa\u4e86\u4e00\u79cd\u7b80\u5316\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u65b9\u6cd5\u3002\u5047\u8bbeLegendre\u7684\u7b97\u6cd5\u9700\u8981\u8003\u8651\u4e00\u4e2a\u53c2\u6570\u2014\u2014\u6211\u4eec\u79f0\u4e4b\u4e3aX\u3002Y\u8f74\u8868\u793a\u6bcf\u4e2aX\u7684\u8bef\u5dee\u503c\u3002Legendre\u7684\u7b97\u6cd5\u662f\u627e\u5230\u4f7f\u5f97\u8bef\u5dee\u6700\u5c0f\u7684X\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5f53X=1.1\u65f6\uff0c\u8bef\u5deeY\u53d6\u5230\u6700\u5c0f\u503c\u3002PeterDebye\u6ce8\u610f\u5230\u6700\u4f4e\u70b9\u5de6\u8fb9\u7684\u659c\u7387\u662f\u8d1f\u7684\uff0c\u800c\u53e6\u4e00\u8fb9\u5219\u662f\u6b63\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u77e5\u9053\u4e86\u4efb\u610f\u7ed9\u5b9aX\u7684\u659c\u7387\u503c\uff0c\u5c31\u53ef\u4ee5\u627e\u5230Y\u7684\u6700\u5c0f\u503c\u70b9\u3002\u8fd9\u4fbf\u662f\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u7684\u57fa\u672c\u601d\u60f3\u3002\u51e0\u4e4e\u6240\u6709\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u90fd\u4f1a\u7528\u5230\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u3002\u8981\u5b9e\u73b0\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u6211\u4eec\u5047\u8bbe\u8bef\u5dee\u51fd\u6570\u662fError=x^5-2x^3-2\u3002\u8981\u5f97\u5230\u4efb\u610f\u7ed9\u5b9aX\u7684\u659c\u7387\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u5176\u6c42\u5bfc\uff0c\u53735x^4\u20136x^2\uff1a\u5982\u679c\u60a8\u9700\u8981\u590d\u4e60\u5bfc\u6570\u7684\u76f8\u5173\u77e5\u8bc6\uff0c\u8bf7\u89c2\u770bKhanAcademy\u7684\u89c6\u9891\u3002\u4e0b\u9762\u6211\u4eec\u7528Python\u5b9e\u73b0Debye\u7684\u7b97\u6cd5\uff1aPythoncurrent_x=0.5#thealgorithmstartsatx=0.5learning_rate=0.01#stepsizemultipliernum_iterations=60#thenumberoftimestotrainthefunction#thederivativeoftheerrorfunction(x**4=thepowerof4orx^4)defslope_at_given_x_value(x):return5*x**4-6*x**2#MoveXtotherightorleftdependingontheslopeoftheerrorfunctionforiinrange(num_iterations):previous_x=current_xcurrent_x+=-learning_rate*slope_at_given_x_value(previous_x)print(previous_x)print(\"Thelocalminimumoccursat%f\"%current_x)123456789101112131415current_x=0.5#thealgorithmstartsatx=0.5learning_rate=0.01#stepsizemultipliernum_iterations=60#thenumberoftimestotrainthefunction\u00a0#thederivativeoftheerrorfunction(x**4=thepowerof4orx^4)defslope_at_given_x_value(x):\u00a0\u00a0return5*x**4-6*x**2\u00a0#MoveXtotherightorleftdependingontheslopeoftheerrorfunctionforiinrange(num_iterations):\u00a0\u00a0previous_x=current_x\u00a0\u00a0current_x+=-learning_rate*slope_at_given_x_value(previous_x)\u00a0\u00a0print(previous_x)\u00a0print(\"Thelocalminimumoccursat%f\"%current_x)\u8fd9\u91cc\u7684\u7a8d\u95e8\u5728\u4e8elearning_rate\u3002\u6211\u4eec\u901a\u8fc7\u6cbf\u659c\u7387\u7684\u76f8\u53cd\u65b9\u5411\u884c\u8fdb\u6765\u903c\u8fd1\u6700\u4f4e\u70b9\u3002\u6b64\u5916\uff0c\u8d8a\u63a5\u8fd1\u6700\u4f4e\u70b9\uff0c\u659c\u7387\u8d8a\u5c0f\u3002\u56e0\u6b64\u5f53\u659c\u7387\u63a5\u8fd1\u96f6\u65f6\uff0c\u6bcf\u4e00\u6b65\u4e0b\u964d\u7684\u5e45\u5ea6\u4f1a\u8d8a\u6765\u8d8a\u5c0f\u3002num_iterations\u662f\u4f60\u9884\u8ba1\u5230\u8fbe\u6700\u5c0f\u503c\u4e4b\u524d\u6240\u9700\u7684\u8fed\u4ee3\u6b21\u6570\u3002\u53ef\u4ee5\u901a\u8fc7\u8c03\u8bd5\u8be5\u53c2\u6570\u8bad\u7ec3\u81ea\u5df1\u5173\u4e8e\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u7684\u76f4\u89c9\u3002\u7ebf\u6027\u56de\u5f52\u6700\u5c0f\u4e8c\u4e58\u6cd5\u914d\u5408\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\uff0c\u5c31\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u7ebf\u6027\u56de\u5f52\u8fc7\u7a0b\u3002\u572820\u4e16\u7eaa50\u5e74\u4ee3\u548c60\u5e74\u4ee3\uff0c\u4e00\u6279\u5b9e\u9a8c\u7ecf\u6d4e\u5b66\u5bb6\u5728\u65e9\u671f\u7684\u8ba1\u7b97\u673a\u4e0a\u5b9e\u73b0\u4e86\u8fd9\u4e9b\u60f3\u6cd5\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u901a\u8fc7\u5b9e\u4f53\u6253\u5361\u2014\u2014\u771f\u6b63\u7684\u624b\u5de5\u8f6f\u4ef6\u7a0b\u5e8f\u5b9e\u73b0\u7684\u3002\u51c6\u5907\u8fd9\u4e9b\u6253\u5b54\u5361\u5c31\u9700\u8981\u51e0\u5929\u7684\u65f6\u95f4\uff0c\u800c\u901a\u8fc7\u8ba1\u7b97\u673a\u8fdb\u884c\u4e00\u6b21\u56de\u5f52\u5206\u6790\u6700\u591a\u9700\u898124\u5c0f\u65f6\u3002\u4e0b\u9762\u662f\u7528Python\u5b9e\u73b0\u7ebf\u6027\u56de\u5f52\u7684\u4e00\u4e2a\u793a\u4f8b\uff08\u6211\u4eec\u4e0d\u9700\u8981\u5728\u6253\u5361\u673a\u4e0a\u5b8c\u6210\u8fd9\u4e2a\u64cd\u4f5c\uff09\uff1aPython#Priceofwheat/kgandtheaveragepriceofbreadwheat_and_bread=[[0.5,5],[0.6,5.5],[0.8,6],[1.1,6.8],[1.4,7]]defstep_gradient(b_current,m_current,points,learningRate):b_gradient=0m_gradient=0N=float(len(points))foriinrange(0,len(points)):x=points[i][0]y=points[i][1]b_gradient+=-(2/N)*(y-((m_current*x)+b_current))m_gradient+=-(2/N)*x*(y-((m_current*x)+b_current))new_b=b_current-(learningRate*b_gradient)new_m=m_current-(learningRate*m_gradient)return[new_b,new_m]defgradient_descent_runner(points,starting_b,starting_m,learning_rate,num_iterations):b=starting_bm=starting_mforiinrange(num_iterations):b,m=step_gradient(b,m,points,learning_rate)return[b,m]gradient_descent_runner(wheat_and_bread,1,1,0.01,100)123456789101112131415161718192021222324#Priceofwheat/kgandtheaveragepriceofbreadwheat_and_bread=[[0.5,5],[0.6,5.5],[0.8,6],[1.1,6.8],[1.4,7]]\u00a0defstep_gradient(b_current,m_current,points,learningRate):\u00a0\u00a0\u00a0\u00a0b_gradient=0\u00a0\u00a0\u00a0\u00a0m_gradient=0\u00a0\u00a0\u00a0\u00a0N=float(len(points))\u00a0\u00a0\u00a0\u00a0foriinrange(0,len(points)):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0x=points[i][0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0y=points[i][1]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0b_gradient+=-(2/N)*(y-((m_current*x)+b_current))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0m_gradient+=-(2/N)*x*(y-((m_current*x)+b_current))\u00a0\u00a0\u00a0\u00a0new_b=b_current-(learningRate*b_gradient)\u00a0\u00a0\u00a0\u00a0new_m=m_current-(learningRate*m_gradient)\u00a0\u00a0\u00a0\u00a0return[new_b,new_m]\u00a0defgradient_descent_runner(points,starting_b,starting_m,learning_rate,num_iterations):\u00a0\u00a0\u00a0\u00a0b=starting_b\u00a0\u00a0\u00a0\u00a0m=starting_m\u00a0\u00a0\u00a0\u00a0foriinrange(num_iterations):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0b,m=step_gradient(b,m,points,learning_rate)\u00a0\u00a0\u00a0\u00a0return[b,m]\u00a0gradient_descent_runner(wheat_and_bread,1,1,0.01,100)\u7ebf\u6027\u56de\u5f52\u672c\u8eab\u5e76\u6ca1\u6709\u5f15\u5165\u4ec0\u4e48\u65b0\u7684\u5185\u5bb9\u3002\u4f46\u662f\uff0c\u5982\u4f55\u5c06\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\u8fd0\u7528\u5230\u8bef\u5dee\u51fd\u6570\u4e0a\u5c31\u9700\u8981\u52a8\u52a8\u8111\u5b50\u4e86\u3002\u8fd0\u884c\u4ee3\u7801\u5e76\u4f7f\u7528\u8fd9\u4e2a\u7ebf\u6027\u56de\u5f52\u6a21\u62df\u5668\u6765\u52a0\u6df1\u4f60\u7684\u7406\u89e3\u5427\u3002\u611f\u77e5\u673a\u63a5\u4e0b\u6765\u8ba9\u6211\u4eec\u6765\u8ba4\u8bc6\u4e00\u4e0bFrankRosenblatt\u3002\u8fd9\u662f\u4e00\u4e2a\u767d\u5929\u89e3\u5256\u8001\u9f20\u5927\u8111\uff0c\u665a\u4e0a\u5bfb\u627e\u5916\u661f\u751f\u547d\u8ff9\u8c61\u7684\u5bb6\u4f19\u30021958\u5e74\uff0c\u4ed6\u53d1\u660e\u4e86\u4e00\u4e2a\u6a21\u4eff\u795e\u7ecf\u5143\u7684\u673a\u5668\uff081958,Rosenblatt\uff09\uff0c\u5e76\u56e0\u6b64\u767b\u4e0a\u300a\u7ebd\u7ea6\u65f6\u62a5\u300b\u7684\u5934\u6761\uff1a\u201cNewNavyDeviceLearnsByDoing\u201d\u3002\u5982\u679c\u5411Rosenblatt\u7684\u673a\u5668\u5c55\u793a50\u7ec4\u5206\u522b\u5728\u5de6\u53f3\u4e24\u4fa7\u6709\u6807\u8bb0\u7684\u56fe\u50cf\uff0c\u5b83\u53ef\u4ee5\u5728\u6ca1\u6709\u9884\u5148\u7f16\u7a0b\u7684\u60c5\u51b5\u4e0b\u5206\u8fa8\u51fa\u4e24\u5f20\u56fe\u50cf\uff08\u6807\u8bb0\u7684\u4f4d\u7f6e\uff09\u3002\u5927\u4f17\u88ab\u8fd9\u4e2a\u53ef\u80fd\u771f\u6b63\u62e5\u6709\u5b66\u4e60\u80fd\u529b\u7684\u673a\u5668\u9707\u60ca\u4e86\u3002\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6bcf\u4e2a\u8bad\u7ec3\u5468\u671f\u90fd\u662f\u4ece\u5de6\u4fa7\u8f93\u5165\u6570\u636e\u5f00\u59cb\u3002\u7ed9\u6240\u6709\u8f93\u5165\u6570\u636e\u6dfb\u52a0\u4e00\u4e2a\u521d\u59cb\u7684\u968f\u673a\u6743\u91cd\u3002\u7136\u540e\u5c06\u5b83\u4eec\u76f8\u52a0\u3002\u5982\u679c\u603b\u548c\u4e3a\u8d1f\uff0c\u5c06\u5176\u8f93\u51fa\u4e3a0\uff0c\u5426\u5219\u8f93\u51fa\u4e3a1\u3002\u5982\u679c\u9884\u6d4b\u7ed3\u679c\u662f\u6b63\u786e\u7684\uff0c\u5c31\u4e0d\u6539\u53d8\u5faa\u73af\u4e2d\u7684\u6743\u91cd\u3002\u5982\u679c\u9884\u6d4b\u7ed3\u679c\u662f\u9519\u8bef\u7684\uff0c\u53ef\u4ee5\u7528\u8bef\u5dee\u4e58\u4ee5\u5b66\u4e60\u7387\u6765\u76f8\u5e94\u5730\u8c03\u6574\u6743\u91cd\u3002\u6211\u4eec\u7528\u7ecf\u5178\u7684\u201c\u6216\u201d\u903b\u8f91\u6765\u8fd0\u884c\u611f\u77e5\u673a\u3002\u8f93\u5165\u8f93\u51fa00=001=110=111=1\u4e0b\u9762\u662f\u7528Python\u5b9e\u73b0\u7684\u611f\u77e5\u673a\u6a21\u578b\uff1aPythonfromrandomimportchoicefromnumpyimportarray,dot,random1_or_0=lambdax:0ifx<0else1training_data=[(array([0,0,1]),0),(array([0,1,1]),1),(array([1,0,1]),1),(array([1,1,1]),1),]weights=random.rand(3)errors=[]learning_rate=0.2num_iterations=100foriinrange(num_iterations):input,truth=choice(training_data)result=dot(weights,input)error=truth-1_or_0(result)errors.append(error)weights+=learning_rate*error*inputforx,_intraining_data:result=dot(x,w)print(\"{}:{}->{}\".format(input[:2],result,1_or_0(result)))12345678910111213141516171819202122fromrandomimportchoicefromnumpyimportarray,dot,random1_or_0=lambdax:0ifx<0else1training_data=[(array([0,0,1]),0),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(array([0,1,1]),1),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(array([1,0,1]),1),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(array([1,1,1]),1),]weights=random.rand(3)errors=[]learning_rate=0.2num_iterations=100\u00a0foriinrange(num_iterations):\u00a0\u00a0\u00a0\u00a0input,truth=choice(training_data)\u00a0\u00a0\u00a0\u00a0result=dot(weights,input)\u00a0\u00a0\u00a0\u00a0error=truth-1_or_0(result)\u00a0\u00a0\u00a0\u00a0errors.append(error)\u00a0\u00a0\u00a0\u00a0weights+=learning_rate*error*input\u00a0\u00a0\u00a0\u00a0forx,_intraining_data:\u00a0\u00a0\u00a0\u00a0result=dot(x,w)\u00a0\u00a0\u00a0\u00a0print(\"{}:{}->{}\".format(input[:2],result,1_or_0(result)))\u7ecf\u8fc7\u6700\u521d\u7684\u7092\u4f5c\u4e00\u5e74\u4e4b\u540e\uff0cMarvinMinsky\u548cSeymourPapert\u51fb\u788e\u4e86\u8fd9\u4e2a\u60f3\u6cd5\uff081969,Minsky&Papert\uff09\u3002\u5f53\u65f6\uff0cMinsky\u548cPapert\u90fd\u5728\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u7684AI\u5b9e\u9a8c\u5ba4\u5de5\u4f5c\u3002\u4ed6\u4eec\u5199\u4e86\u4e00\u672c\u4e66\uff0c\u8bc1\u660e\u611f\u77e5\u673a\u53ea\u80fd\u89e3\u51b3\u7ebf\u6027\u95ee\u9898\u3002\u4ed6\u4eec\u8fd8\u6279\u5224\u4e86\u5173\u4e8e\u591a\u5c42\u611f\u77e5\u673a\u7684\u60f3\u6cd5\u3002\u53ef\u60b2\u7684\u662f\uff0cFrankRosenblatt\u4e24\u5e74\u540e\u56e0\u8239\u96be\u53bb\u4e16\u3002\u5728Minsky\u548cPapert\u7684\u4e66\u7c4d\u51fa\u7248\u4e00\u5e74\u4e4b\u540e\uff0c\u4e00\u4f4d\u82ac\u5170\u7855\u58eb\u7814\u7a76\u751f\u63d0\u51fa\u4e86\u7528\u591a\u5c42\u611f\u77e5\u673a\u89e3\u51b3\u975e\u7ebf\u6027\u95ee\u9898\u7684\u7406\u8bba\uff08Linnainmaa,1970\uff09\u3002\u7531\u4e8e\u4e1a\u5185\u4e3b\u6d41\u5bf9\u611f\u77e5\u673a\u666e\u904d\u4e0d\u770b\u597d\uff0c\u5341\u591a\u5e74\u6765AI\u7684\u7814\u7a76\u8d44\u91d1\u4e5f\u975e\u5e38\u77ed\u7f3a\u3002\u8fd9\u662fAI\u9996\u6b21\u9047\u51b7\u3002Minsky\u548cPapert\u5bf9\u611f\u77e5\u673a\u7684\u6279\u5224\u4e3b\u8981\u9488\u5bf9\u201c\u5f02\u6216\u201d\u95ee\u9898\u3002\u8fd9\u4e2a\u903b\u8f91\u4e0e\u201c\u6216\u201d\u903b\u8f91\u76f8\u540c\uff0c\u4f46\u6709\u4e00\u4e2a\u4f8b\u5916\u2014\u2014\u5bf9\u4e24\u4e2atrue\u8bed\u53e5\u53d6\u548c\uff081\uff061\uff09\u65f6\uff0c\u7ed3\u679c\u8fd4\u56deFalse\uff080\uff09\u3002\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5728\u201c\u6216\u201d\u903b\u8f91\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06true\u548cfalse\u5206\u5f00\u3002\u4f46\u662f\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec\u65e0\u6cd5\u4f7f\u7528\u4e00\u4e2a\u7ebf\u6027\u51fd\u6570\u5c06\u201c\u5f02\u6216\u201d\u903b\u8f91\u7684\u7ed3\u679c\u8fdb\u884c\u533a\u5206\u3002\u4eba\u5de5\u795e\u7ecf\u7f51\u7edc\u52301986\u5e74\uff0c\u51e0\u9879\u5b9e\u9a8c\u8bc1\u660e\uff0c\u795e\u7ecf\u7f51\u7edc\u53ef\u4ee5\u89e3\u51b3\u590d\u6742\u7684\u975e\u7ebf\u6027\u95ee\u9898\uff08Rumelhartetal.,1986\uff09\u3002\u5f53\u65f6\u8ba1\u7b97\u673a\u7684\u8fd0\u7b97\u901f\u5ea6\u6bd4\u8be5\u7406\u8bba\u63d0\u51fa\u7684\u65f6\u5019\u5feb\u4e86\u4e00\u4e07\u500d\u3002Rumelhart\u7b49\u4eba\u662f\u8fd9\u6837\u4ecb\u7ecd\u4ed6\u4eec\u8d6b\u8d6b\u6709\u540d\u7684\u8bba\u6587\u7684\uff1a\u6211\u4eec\u63cf\u8ff0\u4e86\u4e00\u79cd\u65b0\u7684\u7c7b\u795e\u7ecf\u5143\u7f51\u7edc\u5b66\u4e60\u8fc7\u7a0b\u2014\u2014\u53cd\u5411\u4f20\u64ad\u3002\u8be5\u8fc7\u7a0b\u901a\u8fc7\u53cd\u590d\u8c03\u6574\u7f51\u7edc\u4e2d\u7684\u8fde\u63a5\u6743\u91cd\uff0c\u6700\u5c0f\u5316\u7f51\u7edc\u7684\u5b9e\u9645\u8f93\u51fa\u5411\u91cf\u4e0e\u671f\u671b\u8f93\u51fa\u5411\u91cf\u4e4b\u95f4\u7684\u5dee\u5f02\u3002\u8c03\u6574\u6743\u91cd\u7684\u7ed3\u679c\u5c31\u662f\uff0c\u4e0d\u5c5e\u4e8e\u8f93\u5165\u6216\u8f93\u51fa\u7684\u5185\u90e8\u201c\u9690\u85cf\u201d\u5355\u5143\u6210\u4e3a\u4e86\u63cf\u8ff0\u4efb\u52a1\u57df\u7684\u91cd\u8981\u7279\u5f81\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5355\u5143\u7684\u4ea4\u4e92\u9879\u8fd8\u6355\u83b7\u4e86\u4efb\u52a1\u4e2d\u7684\u6b63\u5219\u6761\u4ef6\u3002\u76f8\u8f83\u4e8e\u65e9\u671f\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5982\u201c\u611f\u77e5\u673a\u6536\u655b\u8fc7\u7a0b\u201dNature323,533\u2013536(09October1986)\uff0c\u53cd\u5411\u4f20\u64ad\u53ef\u4ee5\u521b\u9020\u51fa\u6709\u7528\u7684\u65b0\u7279\u5f81\u3002\u4e3a\u4e86\u7406\u89e3\u8fd9\u7bc7\u6587\u7ae0\u7684\u6838\u5fc3\u5185\u5bb9\uff0c\u6211\u4f1a\u5728\u4e0b\u9762\u91cd\u73b0DeepMind\u56e2\u961fAndrewTrask\u7684\u4ee3\u7801\u3002\u8fd9\u4e0d\u662f\u4e00\u6bb5\u666e\u901a\u7684\u4ee3\u7801\u3002\u5b83\u66fe\u88ab\u7528\u4e8e\u65af\u5766\u798f\u5927\u5b66AndrewKarpathy\u7684\u6df1\u5ea6\u5b66\u4e60\u8bfe\u7a0b\uff0c\u4ee5\u53caSirajRaval\u7684Udacity\u8bfe\u7a0b\u3002\u6700\u91cd\u8981\u7684\u662f\uff0c\u5b83\u89e3\u51b3\u4e86\u201c\u5f02\u6216\u201d\u95ee\u9898\uff0c\u4e5f\u7ed3\u675f\u4e86AI\u9047\u51b7\u7684\u65f6\u4ee3\u3002\u5b66\u4e60\u8fd9\u6bb5\u4ee3\u7801\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u901a\u8fc7\u8fd9\u4e2a\u6a21\u62df\u5668\u4ea4\u4e92\u5b66\u4e60\u4e00\u5230\u4e24\u4e2a\u5c0f\u65f6\u6765\u638c\u63e1\u795e\u7ecf\u7f51\u7edc\u7684\u6838\u5fc3\u903b\u8f91\u3002\u7136\u540e\u9605\u8bfbTrask\u7684\u535a\u5ba2\uff0c\u7136\u540e\u518d\u9605\u8bfb\u56db\u6b21\u3002\u9700\u8981\u6ce8\u610f\u5230\uff0cX_XOR\u6570\u636e\u4e2d\u6dfb\u52a0\u7684\u53c2\u6570[1]\u662f\u504f\u7f6e\u795e\u7ecf\u5143\uff0c\u5b83\u4eec\u7b49\u4ef7\u4e8e\u7ebf\u6027\u51fd\u6570\u4e2d\u7684\u5e38\u6570\u9879\u3002PythonimportnumpyasnpX_XOR=np.array([[0,0,1],[0,1,1],[1,0,1],[1,1,1]])y_truth=np.array([[0],[1],[1],[0]])np.random.seed(1)syn_0=2*np.random.random((3,4))-1syn_1=2*np.random.random((4,1))-1defsigmoid(x):output=1/(1+np.exp(-x))returnoutputdefsigmoid_output_to_derivative(output):returnoutput*(1-output)forjinrange(60000):layer_1=sigmoid(np.dot(X_XOR,syn_0))layer_2=sigmoid(np.dot(layer_1,syn_1))error=layer_2-y_truthlayer_2_delta=error*sigmoid_output_to_derivative(layer_2)layer_1_error=layer_2_delta.dot(syn_1.T)layer_1_delta=layer_1_error*sigmoid_output_to_derivative(layer_1)syn_1-=layer_1.T.dot(layer_2_delta)syn_0-=X_XOR.T.dot(layer_1_delta)print(\"OutputAfterTraining:n\",layer_2)1234567891011121314151617181920212223242526importnumpyasnp\u00a0X_XOR=np.array([[0,0,1],[0,1,1],[1,0,1],[1,1,1]])y_truth=np.array([[0],[1],[1],[0]])\u00a0np.random.seed(1)syn_0=2*np.random.random((3,4))-1syn_1=2*np.random.random((4,1))-1\u00a0defsigmoid(x):\u00a0\u00a0\u00a0\u00a0output=1/(1+np.exp(-x))\u00a0\u00a0\u00a0\u00a0returnoutputdefsigmoid_output_to_derivative(output):\u00a0\u00a0\u00a0\u00a0returnoutput*(1-output)\u00a0forjinrange(60000):\u00a0\u00a0\u00a0\u00a0layer_1=sigmoid(np.dot(X_XOR,syn_0))\u00a0\u00a0\u00a0\u00a0layer_2=sigmoid(np.dot(layer_1,syn_1))\u00a0\u00a0\u00a0\u00a0error=layer_2-y_truth\u00a0\u00a0\u00a0\u00a0layer_2_delta=error*sigmoid_output_to_derivative(layer_2)\u00a0\u00a0\u00a0\u00a0layer_1_error=layer_2_delta.dot(syn_1.T)\u00a0\u00a0\u00a0\u00a0layer_1_delta=layer_1_error*sigmoid_output_to_derivative(layer_1)\u00a0\u00a0\u00a0\u00a0syn_1-=layer_1.T.dot(layer_2_delta)\u00a0\u00a0\u00a0\u00a0syn_0-=X_XOR.T.dot(layer_1_delta)\u00a0\u00a0\u00a0\u00a0print(\"OutputAfterTraining:n\",layer_2)\u53cd\u5411\u4f20\u64ad\uff0c\u77e9\u9635\u4e58\u6cd5\u548c\u68af\u5ea6\u4e0b\u964d\u653e\u5728\u4e00\u8d77\u4f1a\u8ba9\u4eba\u5f88\u96be\u7406\u89e3\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u53ef\u89c6\u5316\u901a\u5e38\u662f\u5bf9\u5176\u80cc\u540e\u539f\u7406\u7684\u7b80\u5316\u3002\u4e13\u6ce8\u4e8e\u7406\u89e3\u5176\u80cc\u540e\u7684\u903b\u8f91\uff0c\u4f46\u4e0d\u8981\u8fc7\u591a\u5730\u8003\u8651\u76f4\u89c9\u4e0a\u7684\u7406\u89e3\u3002\u53e6\u5916\uff0c\u8bfb\u8005\u4eec\u4e5f\u53ef\u4ee5\u770b\u770bAndrewKarpathy\u5173\u4e8e\u53cd\u5411\u4f20\u64ad\u7684\u8bfe\u7a0b\uff0c\u5728\u8fd9\u4e2a\u53ef\u89c6\u5316\u7f51\u7ad9\u4ea4\u4e92\u5b66\u4e60\uff0c\u4ee5\u53ca\u9605\u8bfbMichaelNielsen\u5173\u4e8e\u53cd\u5411\u4f20\u64ad\u7684\u7ae0\u8282\u3002\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u5c31\u662f\u5728\u8f93\u5165\u5c42\u548c\u8f93\u51fa\u5c42\u4e4b\u95f4\u5177\u6709\u591a\u4e2a\u4e2d\u95f4\u5c42\u7684\u795e\u7ecf\u7f51\u7edc\u3002\u8fd9\u4e2a\u6982\u5ff5\u6700\u65e9\u662f\u7531RinaDechter(Dechter,1986)\u5f15\u5165\u7684\uff0c\u4f46\u57282012\u5e74\uff0c\u4e5f\u5c31\u662f\u5728IBM\u7684\u4eba\u5de5\u667a\u80fd\u7a0b\u5e8fWatson\u8d62\u5f97\u7f8e\u56fd\u7535\u89c6\u667a\u529b\u7ade\u8d5b\u8282\u76eeJeopardy\u548cGoogle\u63a8\u51fa\u732b\u54aa\u8bc6\u522b\u5668\u4e4b\u540e\u624d\u53d7\u5230\u5e7f\u6cdb\u5173\u6ce8\u3002\u6df1\u5ea6\u795e\u7ecf\u7f51\u7edc\u4e0e\u4e4b\u524d\u795e\u7ecf\u7f51\u7edc\u7684\u6838\u5fc3\u7ed3\u6784\u76f8\u540c\uff0c\u4f46\u662f\u5e94\u7528\u4e8e\u4e00\u4e9b\u4e0d\u540c\u7684\u95ee\u9898\u3002\u5728\u6b63\u5219\u5316\u65b9\u9762\u4e5f\u6709\u5f88\u5927\u6539\u8fdb\u3002\u6700\u521d\uff0c\u8fd9\u53ea\u662f\u4e00\u7ec4\u7528\u6765\u7b80\u5316\u5197\u6742\u7684\u5730\u7403\u6570\u636e\u7684\u6570\u5b66\u51fd\u6570\uff08Tikhonov\uff0cA.N.\uff0c1963\uff09\u3002\u800c\u73b0\u5728\u88ab\u7528\u4e8e\u795e\u7ecf\u7f51\u7edc\u4e2d\uff0c\u4ee5\u52a0\u5f3a\u5176\u6cdb\u5316\u80fd\u529b\u3002\u8fd9\u79cd\u6280\u672f\u521b\u65b0\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8e\u8ba1\u7b97\u673a\u7684\u8fd0\u7b97\u80fd\u529b\u3002\u800c\u8fd0\u7b97\u80fd\u529b\u7684\u63d0\u5347\u5927\u5927\u7f29\u77ed\u4e86\u7814\u7a76\u8005\u7684\u521b\u65b0\u5468\u671f\u2014\u2014\u5982\u4eca\u7684GPU\u6280\u672f\u53ea\u9700\u534a\u79d2\u949f\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e00\u4e2a\u516b\u5341\u5e74\u4ee3\u4e2d\u671f\u7684\u8d85\u7ea7\u8ba1\u7b97\u673a\u4e00\u5e74\u7684\u8fd0\u7b97\u91cf\u3002\u8ba1\u7b97\u6210\u672c\u7684\u964d\u4f4e\u548c\u5404\u79cd\u6df1\u5ea6\u5b66\u4e60\u5e93\u7684\u53d1\u5c55\u5c06\u6df1\u5ea6\u5b66\u4e60\u5e26\u5165\u4e86\u5927\u4f17\u89c6\u91ce\u3002\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u5e38\u89c1\u7684\u6df1\u5ea6\u5b66\u4e60\u5806\u6808\u793a\u4f8b\uff0c\u4ece\u5e95\u5c42\u5f00\u59cb\uff1aGPU>NvidiaTeslaK80\u3002\u8be5\u786c\u4ef6\u5e38\u7528\u4e8e\u56fe\u5f62\u5904\u7406\u3002\u5b83\u4eec\u6df1\u5ea6\u5b66\u4e60\u7684\u901f\u5ea6\u5e73\u5747\u8981\u6bd4CPU\u5feb50-200\u500d\u3002CUDA>GPU\u7684\u5e95\u5c42\u7f16\u7a0b\u8bed\u8a00CuDNN>Nvidia\u7684\u5e93\uff0c\u7528\u6765\u4f18\u5316CUDATensorflow>\u7531Google\u5f00\u53d1\uff0c\u57fa\u4e8eCuDNN\u7684\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6TFlearn>Tensorflow\u7684\u524d\u7aef\u6846\u67b6\u4e0b\u9762\u6211\u4eec\u6765\u770b\u770bMNIST\u6570\u5b57\u5206\u7c7b\u56fe\u50cf\uff0c\u5b83\u88ab\u79f0\u4f5c\u6df1\u5ea6\u5b66\u4e60\u7684\u201cHelloWorld\u201d\u3002\u6211\u4eec\u7528TFlearn\u6765\u5b9e\u73b0\uff1aPythonfrom__future__importdivision,print_function,absolute_importimporttflearnfromtflearn.layers.coreimportdropout,fully_connectedfromtensorflow.examples.tutorials.mnistimportinput_datafromtflearn.layers.convimportconv_2d,max_pool_2dfromtflearn.layers.normalizationimportlocal_response_normalizationfromtflearn.layers.estimatorimportregression#Dataloadingandpreprocessingmnist=input_data.read_data_sets(\"/data/\",one_hot=True)X,Y,testX,testY=mnist.train.images,mnist.train.labels,mnist.test.images,mnist.test.labelsX=X.reshape([-1,28,28,1])testX=testX.reshape([-1,28,28,1])#Buildingconvolutionalnetworknetwork=tflearn.input_data(shape=[None,28,28,1],name='input')network=conv_2d(network,32,3,activation='relu',regularizer=\"L2\")network=max_pool_2d(network,2)network=local_response_normalization(network)network=conv_2d(network,64,3,activation='relu',regularizer=\"L2\")network=max_pool_2d(network,2)network=local_response_normalization(network)network=fully_connected(network,128,activation='tanh')network=dropout(network,0.8)network=fully_connected(network,256,activation='tanh')network=dropout(network,0.8)network=fully_connected(network,10,activation='softmax')network=regression(network,optimizer='adam',learning_rate=0.01,loss='categorical_crossentropy',name='target')#Trainingmodel=tflearn.DNN(network,tensorboard_verbose=0)model.fit({'input':X},{'target':Y},n_epoch=20,validation_set=({'input':testX},{'target':testY}),snapshot_step=100,show_metric=True,run_id='convnet_mnist')1234567891011121314151617181920212223242526272829303132333435from__future__importdivision,print_function,absolute_importimporttflearnfromtflearn.layers.coreimportdropout,fully_connectedfromtensorflow.examples.tutorials.mnistimportinput_datafromtflearn.layers.convimportconv_2d,max_pool_2dfromtflearn.layers.normalizationimportlocal_response_normalizationfromtflearn.layers.estimatorimportregression\u00a0#Dataloadingandpreprocessingmnist=input_data.read_data_sets(\"/data/\",one_hot=True)X,Y,testX,testY=mnist.train.images,mnist.train.labels,mnist.test.images,mnist.test.labelsX=X.reshape([-1,28,28,1])testX=testX.reshape([-1,28,28,1])\u00a0#Buildingconvolutionalnetworknetwork=tflearn.input_data(shape=[None,28,28,1],name='input')network=conv_2d(network,32,3,activation='relu',regularizer=\"L2\")network=max_pool_2d(network,2)network=local_response_normalization(network)network=conv_2d(network,64,3,activation='relu',regularizer=\"L2\")network=max_pool_2d(network,2)network=local_response_normalization(network)network=fully_connected(network,128,activation='tanh')network=dropout(network,0.8)network=fully_connected(network,256,activation='tanh')network=dropout(network,0.8)network=fully_connected(network,10,activation='softmax')network=regression(network,optimizer='adam',learning_rate=0.01,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0loss='categorical_crossentropy',name='target')\u00a0#Trainingmodel=tflearn.DNN(network,tensorboard_verbose=0)model.fit({'input':X},{'target':Y},n_epoch=20,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0validation_set=({'input':testX},{'target':testY}),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0snapshot_step=100,show_metric=True,run_id='convnet_mnist')\u5173\u4e8eMNIST\u95ee\u9898\uff0c\u6709\u5f88\u591a\u4e0d\u9519\u7684\u6587\u7ae0\uff1ahttps://www.tensorflow.org/get_started/mnist/beginnershttps://www.youtube.com/watch?v=NMd7WjZiCzchttps://www.oreilly.com/learning/not-another-mnist-tutorial-with-tensorflow\u5982\u679c\u8bfb\u8005\u60f3\u66f4\u6df1\u5165\u5730\u4e86\u89e3TFlearn\uff0c\u53ef\u4ee5\u6d4f\u89c8\u6211\u4e4b\u524d\u7684\u6587\u7ae0\u3002\u5c0f\u7ed3\u6211\u4eec\u4eceTFlearn\u7684\u793a\u4f8b\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u6df1\u5ea6\u5b66\u4e60\u7684\u57fa\u7840\u903b\u8f91\u4ecd\u4e0eRosenblatt\u7684\u611f\u77e5\u673a\u7c7b\u4f3c\u3002\u5982\u4eca\u7684\u795e\u7ecf\u7f51\u7edc\u5927\u591a\u4f7f\u7528Relu\u6fc0\u6d3b\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4e8c\u5143Heaviside\u9636\u8dc3\u51fd\u6570\u3002\u5728\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\u7684\u6700\u540e\u4e00\u5c42\uff0c\u635f\u5931\u51fd\u6570\u4f7f\u7528\u7684\u662fcategorical_crossentropy\uff0c\u5373\u5206\u7c7b\u4ea4\u53c9\u71b5\u3002\u8fd9\u662f\u5bf9Legendre\u6700\u5c0f\u4e8c\u4e58\u6cd5\u7684\u6539\u8fdb\uff0c\u53ef\u7528\u4e8e\u591a\u5206\u7c7b\u903b\u8f91\u56de\u5f52\u95ee\u9898\u3002\u8fd9\u91cc\u7684\u4f18\u5316\u7b97\u6cd5adam\u6765\u6e90\u4e8eDebye\u7684\u68af\u5ea6\u4e0b\u964d\u3002Tikhonov\u7684\u6b63\u5219\u5316\u6982\u5ff5\u4ee5dropout\u5c42\u548c\u6b63\u5219\u5316\u51fd\u6570L1/L2\u7684\u5f62\u5f0f\u5f97\u5230\u5e7f\u6cdb\u5e94\u7528\u3002\u5982\u679c\u60a8\u60f3\u8981\u5bf9\u795e\u7ecf\u7f51\u7edc\u7684\u6982\u5ff5\u4ee5\u53ca\u5982\u4f55\u5b9e\u73b0\u6709\u4e00\u4e2a\u66f4\u76f4\u89c2\u7684\u7406\u89e3\uff0c\u8bf7\u9605\u8bfb\u6211\u5728FloydHub\u535a\u5ba2\u4e0a\u53d1\u8868\u7684\u6587\u7ae0\uff1a\u6211\u7684\u7b2c\u4e00\u4e2a\u6df1\u5ea6\u5b66\u4e60\u5468\u672b\u3002\u611f\u8c22IgnacioTonoli\uff0cBrianYoung\uff0cPaalRingstad\uff0cTomasMoska\u548cCharlieHarrington\u5e2e\u6211\u5ba1\u9605\u672c\u6587\u7684\u8349\u7a3f\u3002\u4ee3\u7801\u6765\u6e90\u50a8\u5b58\u5728Jupyternotebook\u4e2d\u3002\u5173\u4e8eEmilWallner\u8fd9\u662fEmil\u535a\u5ba2\u4e2d\u6df1\u5ea6\u5b66\u4e60\u7cfb\u5217\u7684\u7b2c\u4e8c\u90e8\u5206\u3002Emil\u82b1\u4e86\u5341\u5e74\u65f6\u95f4\u63a2\u7d22\u4eba\u5de5\u5b66\u4e60\u3002\u4ed6\u66fe\u5728\u725b\u6d25\u5927\u5b66\u5546\u5b66\u9662\u5de5\u4f5c\uff0c\u6295\u8d44\u6559\u80b2\u521b\u4e1a\u516c\u53f8\uff0c\u5e76\u5f00\u521b\u4e86\u4e86\u6280\u672f\u6559\u5b66\u4e1a\u52a1\u3002\u53bb\u5e74\uff0c\u4ed6\u52a0\u5165Ecole42\uff0c\u5e76\u5c06\u81ea\u5df1\u5728\u4eba\u5de5\u5b66\u4e60\u9886\u57df\u7684\u77e5\u8bc6\u5e94\u7528\u4e8e\u673a\u5668\u5b66\u4e60\u30022\u8d5e23\u6536\u85cf4\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1aMentosZ\u7edf\u8ba1\u5b66\u5c0f\u7855\uff0cR/Python\uff0c\u6570\u636e\u6316\u6398\uff0c\u673a\u5668\u5b66\u4e60\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b711\u00b7"]},
{"art_title": ["\u57fa\u4e8e\u6982\u7387\u8bba\u7684\u5206\u7c7b\u65b9\u6cd5\uff1a\u6734\u7d20\u8d1d\u53f6\u65af"], "art_url": ["http://python.jobbole.com/88717/"], "art_create_time": ["2017/10/20"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/10/eba5f145122207e6dd3575ad30702bed.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aimze5z\u00a0\u00a0\u00a0\u57fa\u4e8e\u6982\u7387\u8bba\u7684\u5206\u7c7b\u65b9\u6cd5\uff1a\u6734\u7d20\u8d1d\u53f6\u65af1.\u6982\u8ff0\u8d1d\u53f6\u65af\u5206\u7c7b\u662f\u4e00\u7c7b\u5206\u7c7b\u7b97\u6cd5\u7684\u603b\u79f0\uff0c\u8fd9\u7c7b\u7b97\u6cd5\u5747\u4ee5\u8d1d\u53f6\u65af\u5b9a\u7406\u4e3a\u57fa\u7840\uff0c\u6545\u7edf\u79f0\u4e3a\u8d1d\u53f6\u65af\u5206\u7c7b\u3002\u672c\u7ae0\u9996\u5148\u4ecb\u7ecd\u8d1d\u53f6\u65af\u5206\u7c7b\u7b97\u6cd5\u7684\u57fa\u7840\u2014\u2014\u8d1d\u53f6\u65af\u5b9a\u7406\u3002\u6700\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u5b9e\u4f8b\u6765\u8ba8\u8bba\u8d1d\u53f6\u65af\u5206\u7c7b\u7684\u4e2d\u6700\u7b80\u5355\u7684\u4e00\u79cd:\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u30022.\u8d1d\u53f6\u65af\u7406\u8bba&\u6761\u4ef6\u6982\u73872.1\u8d1d\u53f6\u65af\u7406\u8bba\u6211\u4eec\u73b0\u5728\u6709\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u5b83\u7531\u4e24\u7c7b\u6570\u636e\u7ec4\u6210\uff0c\u6570\u636e\u5206\u5e03\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u6211\u4eec\u73b0\u5728\u7528p1(x,y)\u8868\u793a\u6570\u636e\u70b9(x,y)\u5c5e\u4e8e\u7c7b\u522b1\uff08\u56fe\u4e2d\u7528\u5706\u70b9\u8868\u793a\u7684\u7c7b\u522b\uff09\u7684\u6982\u7387\uff0c\u7528p2(x,y)\u8868\u793a\u6570\u636e\u70b9(x,y)\u5c5e\u4e8e\u7c7b\u522b2\uff08\u56fe\u4e2d\u4e09\u89d2\u5f62\u8868\u793a\u7684\u7c7b\u522b\uff09\u7684\u6982\u7387\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u65b0\u6570\u636e\u70b9(x,y)\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u89c4\u5219\u6765\u5224\u65ad\u5b83\u7684\u7c7b\u522b\uff1aPython\u5982\u679cp1(x,y)>p2(x,y)\uff0c\u90a3\u4e48\u7c7b\u522b\u4e3a1\u5982\u679cp2(x,y)>p1(x,y)\uff0c\u90a3\u4e48\u7c7b\u522b\u4e3a212\u5982\u679cp1(x,y)>p2(x,y)\uff0c\u90a3\u4e48\u7c7b\u522b\u4e3a1\u5982\u679cp2(x,y)>p1(x,y)\uff0c\u90a3\u4e48\u7c7b\u522b\u4e3a2\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u4f1a\u9009\u62e9\u9ad8\u6982\u7387\u5bf9\u5e94\u7684\u7c7b\u522b\u3002\u8fd9\u5c31\u662f\u8d1d\u53f6\u65af\u51b3\u7b56\u7406\u8bba\u7684\u6838\u5fc3\u601d\u60f3\uff0c\u5373\u9009\u62e9\u5177\u6709\u6700\u9ad8\u6982\u7387\u7684\u51b3\u7b56\u30022.1.2\u6761\u4ef6\u6982\u7387\u5982\u679c\u4f60\u5bf9p(x,y|c1)\u7b26\u53f7\u5f88\u719f\u6089\uff0c\u90a3\u4e48\u53ef\u4ee5\u8df3\u8fc7\u672c\u5c0f\u8282\u3002\u6709\u4e00\u4e2a\u88c5\u4e867\u5757\u77f3\u5934\u7684\u7f50\u5b50\uff0c\u5176\u4e2d3\u5757\u662f\u767d\u8272\u7684\uff0c4\u5757\u662f\u9ed1\u8272\u7684\u3002\u5982\u679c\u4ece\u7f50\u5b50\u4e2d\u968f\u673a\u53d6\u51fa\u4e00\u5757\u77f3\u5934\uff0c\u90a3\u4e48\u662f\u767d\u8272\u77f3\u5934\u7684\u53ef\u80fd\u6027\u662f\u591a\u5c11\uff1f\u7531\u4e8e\u53d6\u77f3\u5934\u67097\u79cd\u53ef\u80fd\uff0c\u5176\u4e2d3\u79cd\u4e3a\u767d\u8272\uff0c\u6240\u4ee5\u53d6\u51fa\u767d\u8272\u77f3\u5934\u7684\u6982\u7387\u4e3a3/7\u3002\u90a3\u4e48\u53d6\u5230\u9ed1\u8272\u77f3\u5934\u7684\u6982\u7387\u53c8\u662f\u591a\u5c11\u5462\uff1f\u5f88\u663e\u7136\uff0c\u662f4/7\u3002\u6211\u4eec\u4f7f\u7528P(white)\u6765\u8868\u793a\u53d6\u5230\u767d\u8272\u77f3\u5934\u7684\u6982\u7387\uff0c\u5176\u6982\u7387\u503c\u53ef\u4ee5\u901a\u8fc7\u767d\u8272\u77f3\u5934\u6570\u76ee\u9664\u4ee5\u603b\u7684\u77f3\u5934\u6570\u76ee\u6765\u5f97\u5230\u3002\u5982\u679c\u8fd97\u5757\u77f3\u5934\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u653e\u5728\u4e24\u4e2a\u6876\u4e2d\uff0c\u90a3\u4e48\u4e0a\u8ff0\u6982\u7387\u5e94\u8be5\u5982\u4f55\u8ba1\u7b97\uff1f\u8ba1\u7b97P(white)\u6216\u8005P(black)\uff0c\u5982\u679c\u4e8b\u5148\u6211\u4eec\u77e5\u9053\u77f3\u5934\u6240\u5728\u6876\u7684\u4fe1\u606f\u662f\u4f1a\u6539\u53d8\u7ed3\u679c\u7684\u3002\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u6761\u4ef6\u6982\u7387\uff08conditionalprobablity\uff09\u3002\u5047\u5b9a\u8ba1\u7b97\u7684\u662f\u4eceB\u6876\u53d6\u5230\u767d\u8272\u77f3\u5934\u7684\u6982\u7387\uff0c\u8fd9\u4e2a\u6982\u7387\u53ef\u4ee5\u8bb0\u4f5cP(white|bucketB)\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u5728\u5df2\u77e5\u77f3\u5934\u51fa\u81eaB\u6876\u7684\u6761\u4ef6\u4e0b\uff0c\u53d6\u51fa\u767d\u8272\u77f3\u5934\u7684\u6982\u7387\u201d\u3002\u5f88\u5bb9\u6613\u5f97\u5230\uff0cP(white|bucketA)\u503c\u4e3a2/4\uff0cP(white|bucketB)\u7684\u503c\u4e3a1/3\u3002\u6761\u4ef6\u6982\u7387\u7684\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1aP(white|bucketB)=P(whiteandbucketB)/P(bucketB)\u9996\u5148\uff0c\u6211\u4eec\u7528B\u6876\u4e2d\u767d\u8272\u77f3\u5934\u7684\u4e2a\u6570\u9664\u4ee5\u4e24\u4e2a\u6876\u4e2d\u603b\u7684\u77f3\u5934\u6570\uff0c\u5f97\u5230P(whiteandbucketB)=1/7.\u5176\u6b21\uff0c\u7531\u4e8eB\u6876\u4e2d\u67093\u5757\u77f3\u5934\uff0c\u800c\u603b\u77f3\u5934\u6570\u4e3a7\uff0c\u4e8e\u662fP(bucketB)\u5c31\u7b49\u4e8e3/7\u3002\u4e8e\u662f\u53c8P(white|bucketB)=P(whiteandbucketB)/P(bucketB)=(1/7)/(3/7)=1/3\u3002\u53e6\u5916\u4e00\u79cd\u6709\u6548\u8ba1\u7b97\u6761\u4ef6\u6982\u7387\u7684\u65b9\u6cd5\u79f0\u4e3a\u8d1d\u53f6\u65af\u51c6\u5219\u3002\u8d1d\u53f6\u65af\u51c6\u5219\u544a\u8bc9\u6211\u4eec\u5982\u4f55\u4ea4\u6362\u6761\u4ef6\u6982\u7387\u4e2d\u7684\u6761\u4ef6\u4e0e\u7ed3\u679c\uff0c\u5373\u5982\u679c\u5df2\u77e5P(x|c)\uff0c\u8981\u6c42P(c|x)\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a\u4f7f\u7528\u6761\u4ef6\u6982\u7387\u6765\u5206\u7c7b\u4e0a\u9762\u6211\u4eec\u63d0\u5230\u8d1d\u53f6\u65af\u51b3\u7b56\u7406\u8bba\u8981\u6c42\u8ba1\u7b97\u4e24\u4e2a\u6982\u7387p1(x,y)\u548cp2(x,y):Python\u5982\u679cp1(x,y)>p2(x,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522b1;\u5982\u679cp2(x,y)>p1(X,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522b2.12\u5982\u679cp1(x,y)>p2(x,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522b1;\u5982\u679cp2(x,y)>p1(X,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522b2.\u8fd9\u5e76\u4e0d\u662f\u8d1d\u53f6\u65af\u51b3\u7b56\u7406\u8bba\u7684\u6240\u6709\u5185\u5bb9\u3002\u4f7f\u7528p1()\u548cp2()\u53ea\u662f\u4e3a\u4e86\u5c3d\u53ef\u80fd\u7b80\u5316\u63cf\u8ff0\uff0c\u800c\u771f\u6b63\u9700\u8981\u8ba1\u7b97\u548c\u6bd4\u8f83\u7684\u662fp(c1|x,y)\u548cp(c2|x,y).\u8fd9\u4e9b\u7b26\u53f7\u6240\u4ee3\u8868\u7684\u5177\u4f53\u610f\u4e49\u662f:\u7ed9\u5b9a\u67d0\u4e2a\u7531x\u3001y\u8868\u793a\u7684\u6570\u636e\u70b9\uff0c\u90a3\u4e48\u8be5\u6570\u636e\u70b9\u6765\u81ea\u7c7b\u522bc1\u7684\u6982\u7387\u662f\u591a\u5c11\uff1f\u6570\u636e\u70b9\u6765\u81ea\u7c7b\u522bc2\u7684\u6982\u7387\u53c8\u662f\u591a\u5c11\uff1f\u6ce8\u610f\u8fd9\u4e9b\u6982\u7387\u4e0e\u6982\u7387p(x,y|c1)\u5e76\u4e0d\u4e00\u6837\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u4f7f\u7528\u8d1d\u53f6\u65af\u51c6\u5219\u6765\u4ea4\u6362\u6982\u7387\u4e2d\u6761\u4ef6\u4e0e\u7ed3\u679c\u3002\u5177\u4f53\u5730\uff0c\u5e94\u7528\u8d1d\u53f6\u65af\u51c6\u5219\u5f97\u5230:\u4f7f\u7528\u4e0a\u9762\u8fd9\u4e9b\u5b9a\u4e49\uff0c\u53ef\u4ee5\u5b9a\u4e49\u8d1d\u53f6\u65af\u5206\u7c7b\u51c6\u5219\u4e3a:Python\u5982\u679cP(c1|x,y)>P(c2|x,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522bc1;\u5982\u679cP(c2|x,y)>P(c1|x,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522bc2.12\u5982\u679cP(c1|x,y)>P(c2|x,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522bc1;\u5982\u679cP(c2|x,y)>P(c1|x,y),\u90a3\u4e48\u5c5e\u4e8e\u7c7b\u522bc2.\u5728\u6587\u6863\u5206\u7c7b\u4e2d\uff0c\u6574\u4e2a\u6587\u6863\uff08\u5982\u4e00\u5c01\u7535\u5b50\u90ae\u4ef6\uff09\u662f\u5b9e\u4f8b\uff0c\u800c\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684\u67d0\u4e9b\u5143\u7d20\u5219\u6784\u6210\u7279\u5f81\u3002\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u8bcd\uff0c\u5e76\u628a\u6bcf\u4e2a\u8bcd\u4f5c\u4e3a\u4e00\u4e2a\u7279\u5f81\uff0c\u800c\u6bcf\u4e2a\u8bcd\u7684\u51fa\u73b0\u6216\u8005\u4e0d\u51fa\u73b0\u4f5c\u4e3a\u8be5\u7279\u5f81\u7684\u503c\uff0c\u8fd9\u6837\u5f97\u5230\u7684\u7279\u5f81\u6570\u76ee\u5c31\u4f1a\u8ddf\u8bcd\u6c47\u8868\u4e2d\u7684\u8bcd\u7684\u6570\u76ee\u4e00\u6837\u591a\u3002\u6211\u4eec\u5047\u8bbe\u7279\u5f81\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\u3002\u6240\u8c13\u72ec\u7acb(independence)\u6307\u7684\u662f\u7edf\u8ba1\u610f\u4e49\u4e0a\u7684\u72ec\u7acb\uff0c\u5373\u4e00\u4e2a\u7279\u5f81\u6216\u8005\u5355\u8bcd\u51fa\u73b0\u7684\u53ef\u80fd\u6027\u4e0e\u5b83\u548c\u5176\u4ed6\u5355\u8bcd\u76f8\u90bb\u6ca1\u6709\u5173\u7cfb\uff0c\u6bd4\u5982\u8bf4\uff0c\u201c\u6211\u4eec\u201d\u4e2d\u7684\u201c\u6211\u201d\u548c\u201c\u4eec\u201d\u51fa\u73b0\u7684\u6982\u7387\u4e0e\u8fd9\u4e24\u4e2a\u5b57\u76f8\u90bb\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u3002\u8fd9\u4e2a\u5047\u8bbe\u6b63\u662f\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\u4e2d\u6734\u7d20(naive)\u4e00\u8bcd\u7684\u542b\u4e49\u3002\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\u4e2d\u7684\u53e6\u4e00\u4e2a\u5047\u8bbe\u662f\uff0c\u6bcf\u4e2a\u7279\u5f81\u540c\u7b49\u91cd\u8981\u3002Note:\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\u901a\u5e38\u6709\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f:\u4e00\u79cd\u57fa\u4e8e\u4f2f\u52aa\u5229\u6a21\u578b\u5b9e\u73b0\uff0c\u4e00\u79cd\u57fa\u4e8e\u591a\u9879\u5f0f\u6a21\u578b\u5b9e\u73b0\u3002\u8fd9\u91cc\u91c7\u7528\u524d\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\u3002\u8be5\u5b9e\u73b0\u65b9\u5f0f\u4e2d\u5e76\u4e0d\u8003\u8651\u8bcd\u5728\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u53ea\u8003\u8651\u51fa\u4e0d\u51fa\u73b0\uff0c\u56e0\u6b64\u5728\u8fd9\u4e2a\u610f\u4e49\u4e0a\u76f8\u5f53\u4e8e\u5047\u8bbe\u8bcd\u662f\u7b49\u6743\u91cd\u7684\u30022.2\u6734\u7d20\u8d1d\u53f6\u65af\u573a\u666f\u673a\u5668\u5b66\u4e60\u7684\u4e00\u4e2a\u91cd\u8981\u5e94\u7528\u5c31\u662f\u6587\u6863\u7684\u81ea\u52a8\u5206\u7c7b\u3002\u5728\u6587\u6863\u5206\u7c7b\u4e2d\uff0c\u6574\u4e2a\u6587\u6863\uff08\u5982\u4e00\u5c01\u7535\u5b50\u90ae\u4ef6\uff09\u662f\u5b9e\u4f8b\uff0c\u800c\u7535\u5b50\u90ae\u4ef6\u4e2d\u7684\u67d0\u4e9b\u5143\u7d20\u5219\u6784\u6210\u7279\u5f81\u3002\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u8bcd\uff0c\u5e76\u628a\u6bcf\u4e2a\u8bcd\u4f5c\u4e3a\u4e00\u4e2a\u7279\u5f81\uff0c\u800c\u6bcf\u4e2a\u8bcd\u7684\u51fa\u73b0\u6216\u8005\u4e0d\u51fa\u73b0\u4f5c\u4e3a\u8be5\u7279\u5f81\u7684\u503c\uff0c\u8fd9\u6837\u5f97\u5230\u7684\u7279\u5f81\u6570\u76ee\u5c31\u4f1a\u8ddf\u8bcd\u6c47\u8868\u4e2d\u7684\u8bcd\u7684\u6570\u76ee\u4e00\u6837\u591a\u3002\u6734\u7d20\u8d1d\u53f6\u65af\u662f\u4e0a\u9762\u4ecb\u7ecd\u7684\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\u7684\u4e00\u4e2a\u6269\u5c55\uff0c\u662f\u7528\u4e8e\u6587\u6863\u5206\u7c7b\u7684\u5e38\u7528\u7b97\u6cd5\u3002\u4e0b\u9762\u6211\u4eec\u4f1a\u8fdb\u884c\u4e00\u4e9b\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u7684\u5b9e\u8df5\u9879\u76ee\u30022.3\u6734\u7d20\u8d1d\u53f6\u65af\u539f\u7406\u6734\u7d20\u8d1d\u53f6\u65af\u5de5\u4f5c\u539f\u7406\u63d0\u53d6\u6240\u6709\u6587\u6863\u4e2d\u7684\u8bcd\u6761\u5e76\u8fdb\u884c\u53bb\u91cd\u83b7\u53d6\u6587\u6863\u7684\u6240\u6709\u7c7b\u522b\u8ba1\u7b97\u6bcf\u4e2a\u7c7b\u522b\u4e2d\u7684\u6587\u6863\u6570\u76ee\u5bf9\u6bcf\u7bc7\u8bad\u7ec3\u6587\u6863:Python\u5bf9\u6bcf\u4e2a\u7c7b\u522b:\u5982\u679c\u8bcd\u6761\u51fa\u73b0\u5728\u6587\u6863\u4e2d-->\u589e\u52a0\u8be5\u8bcd\u6761\u7684\u8ba1\u6570\u503c\uff08for\u5faa\u73af\u6216\u8005\u77e9\u9635\u76f8\u52a0\uff09\u589e\u52a0\u6240\u6709\u8bcd\u6761\u7684\u8ba1\u6570\u503c\uff08\u6b64\u7c7b\u522b\u4e0b\u8bcd\u6761\u603b\u6570\uff09123\u5bf9\u6bcf\u4e2a\u7c7b\u522b:\u00a0\u00a0\u00a0\u00a0\u5982\u679c\u8bcd\u6761\u51fa\u73b0\u5728\u6587\u6863\u4e2d-->\u589e\u52a0\u8be5\u8bcd\u6761\u7684\u8ba1\u6570\u503c\uff08for\u5faa\u73af\u6216\u8005\u77e9\u9635\u76f8\u52a0\uff09\u00a0\u00a0\u00a0\u00a0\u589e\u52a0\u6240\u6709\u8bcd\u6761\u7684\u8ba1\u6570\u503c\uff08\u6b64\u7c7b\u522b\u4e0b\u8bcd\u6761\u603b\u6570\uff09\u5bf9\u6bcf\u4e2a\u7c7b\u522b:Python\u5bf9\u6bcf\u4e2a\u8bcd\u6761:\u5c06\u8be5\u8bcd\u6761\u7684\u6570\u76ee\u9664\u4ee5\u603b\u8bcd\u6761\u6570\u76ee\u5f97\u5230\u7684\u6761\u4ef6\u6982\u7387\uff08P(\u8bcd\u6761|\u7c7b\u522b)\uff0912\u5bf9\u6bcf\u4e2a\u8bcd\u6761:\u00a0\u00a0\u00a0\u00a0\u5c06\u8be5\u8bcd\u6761\u7684\u6570\u76ee\u9664\u4ee5\u603b\u8bcd\u6761\u6570\u76ee\u5f97\u5230\u7684\u6761\u4ef6\u6982\u7387\uff08P(\u8bcd\u6761|\u7c7b\u522b)\uff09\u8fd4\u56de\u8be5\u6587\u6863\u5c5e\u4e8e\u6bcf\u4e2a\u7c7b\u522b\u7684\u6761\u4ef6\u6982\u7387\uff08P(\u7c7b\u522b|\u6587\u6863\u7684\u6240\u6709\u8bcd\u6761)\uff092.4\u6734\u7d20\u8d1d\u53f6\u65af\u5f00\u53d1\u6d41\u7a0b\u6536\u96c6\u6570\u636e:\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u65b9\u6cd5\u3002\u51c6\u5907\u6570\u636e:\u9700\u8981\u6570\u503c\u578b\u6216\u8005\u5e03\u5c14\u578b\u6570\u636e\u3002\u5206\u6790\u6570\u636e:\u6709\u5927\u91cf\u7279\u5f81\u65f6\uff0c\u7ed8\u5236\u7279\u5f81\u4f5c\u7528\u4e0d\u5927\uff0c\u6b64\u65f6\u4f7f\u7528\u76f4\u65b9\u56fe\u6548\u679c\u66f4\u597d\u3002\u8bad\u7ec3\u7b97\u6cd5:\u8ba1\u7b97\u4e0d\u540c\u7684\u72ec\u7acb\u7279\u5f81\u7684\u6761\u4ef6\u6982\u7387\u3002\u6d4b\u8bd5\u7b97\u6cd5:\u8ba1\u7b97\u9519\u8bef\u7387\u3002\u4f7f\u7528\u7b97\u6cd5:\u4e00\u4e2a\u5e38\u89c1\u7684\u6734\u7d20\u8d1d\u53f6\u65af\u5e94\u7528\u662f\u6587\u6863\u5206\u7c7b\u3002\u53ef\u4ee5\u5728\u4efb\u610f\u7684\u5206\u7c7b\u573a\u666f\u4e2d\u4f7f\u7528\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\uff0c\u4e0d\u4e00\u5b9a\u975e\u8981\u662f\u6587\u672c\u30022.5\u6734\u7d20\u8d1d\u53f6\u65af\u7b97\u6cd5\u7279\u70b9\u4f18\u70b9:\u5728\u6570\u636e\u8f83\u5c11\u7684\u60c5\u51b5\u4e0b\u4ecd\u7136\u6709\u6548\uff0c\u53ef\u4ee5\u5904\u7406\u591a\u7c7b\u522b\u95ee\u9898\u3002\u7f3a\u70b9:\u5bf9\u4e8e\u8f93\u5165\u6570\u636e\u7684\u51c6\u5907\u65b9\u5f0f\u8f83\u4e3a\u654f\u611f\u3002\u9002\u7528\u6570\u636e\u7c7b\u578b:\u6807\u79f0\u578b\u6570\u636e\u30022.6\u6734\u7d20\u8d1d\u53f6\u65af\u9879\u76ee\u6848\u4f8b2.6.1\u9879\u76ee\u6848\u4f8b1\u5c4f\u853d\u793e\u533a\u7559\u8a00\u677f\u7684\u4fae\u8fb1\u6027\u8a00\u8bba2.6.1.1\u9879\u76ee\u6982\u8ff0\u6784\u5efa\u4e00\u4e2a\u5feb\u901f\u8fc7\u6ee4\u5668\u6765\u5c4f\u853d\u5728\u7ebf\u793e\u533a\u7559\u8a00\u677f\u4e0a\u7684\u4fae\u8fb1\u6027\u8a00\u8bba\u3002\u5982\u679c\u67d0\u6761\u7559\u8a00\u4f7f\u7528\u4e86\u8d1f\u9762\u6216\u8005\u4fae\u8fb1\u6027\u7684\u8bed\u8a00\uff0c\u90a3\u4e48\u5c31\u5c06\u8be5\u7559\u8a00\u6807\u8bc6\u4e3a\u5185\u5bb9\u4e0d\u5f53\u3002\u5bf9\u6b64\u95ee\u9898\u5efa\u7acb\u4e24\u4e2a\u7c7b\u522b:\u4fae\u8fb1\u7c7b\u548c\u975e\u4fae\u8fb1\u7c7b\uff0c\u4f7f\u75281\u548c0\u5206\u522b\u8868\u793a\u30022.6.1.2\u5f00\u53d1\u6d41\u7a0b\u6536\u96c6\u6570\u636e:\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u65b9\u6cd5\u51c6\u5907\u6570\u636e:\u4ece\u6587\u672c\u4e2d\u6784\u5efa\u8bcd\u5411\u91cf\u5206\u6790\u6570\u636e:\u68c0\u67e5\u8bcd\u6761\u786e\u4fdd\u89e3\u6790\u7684\u6b63\u786e\u6027\u8bad\u7ec3\u7b97\u6cd5:\u4ece\u8bcd\u5411\u91cf\u8ba1\u7b97\u6982\u7387\u6d4b\u8bd5\u7b97\u6cd5:\u6839\u636e\u73b0\u5b9e\u60c5\u51b5\u4fee\u6539\u5206\u7c7b\u5668\u4f7f\u7528\u7b97\u6cd5:\u5bf9\u793e\u533a\u7559\u8a00\u677f\u8a00\u8bba\u8fdb\u884c\u5206\u7c7b\u6536\u96c6\u6570\u636e:\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u65b9\u6cd52.6.1.3\u6784\u9020\u8bcd\u8868PythondefloadDataSet():\"\"\"\u521b\u5efa\u6570\u636e\u96c6:return:\u5355\u8bcd\u5217\u8868postingList,\u6240\u5c5e\u7c7b\u522bclassVec\"\"\"postingList=[['my','dog','has','flea','problems','help','please'],#[0,0,1,1,1......]['maybe','not','take','him','to','dog','park','stupid'],['my','dalmation','is','so','cute','I','love','him'],['stop','posting','stupid','worthless','garbage'],['mr','licks','ate','my','steak','how','to','stop','him'],['quit','buying','worthless','dog','food','stupid']]classVec=[0,1,0,1,0,1]#1isabusive,0notreturnpostingList,classVec12345678910111213defloadDataSet():\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u521b\u5efa\u6570\u636e\u96c6\u00a0\u00a0\u00a0\u00a0:return:\u5355\u8bcd\u5217\u8868postingList,\u6240\u5c5e\u7c7b\u522bclassVec\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0postingList=[['my','dog','has','flea','problems','help','please'],#[0,0,1,1,1......]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0['maybe','not','take','him','to','dog','park','stupid'],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0['my','dalmation','is','so','cute','I','love','him'],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0['stop','posting','stupid','worthless','garbage'],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0['mr','licks','ate','my','steak','how','to','stop','him'],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0['quit','buying','worthless','dog','food','stupid']]\u00a0\u00a0\u00a0\u00a0classVec=[0,1,0,1,0,1]\u00a0\u00a0#1isabusive,0not\u00a0\u00a0\u00a0\u00a0returnpostingList,classVec2.6.1.4\u51c6\u5907\u6570\u636e:\u4ece\u6587\u672c\u4e2d\u6784\u5efa\u8bcd\u5411\u91cfPythondefcreateVocabList(dataSet):\"\"\"\u83b7\u53d6\u6240\u6709\u5355\u8bcd\u7684\u96c6\u5408:paramdataSet:\u6570\u636e\u96c6:return:\u6240\u6709\u5355\u8bcd\u7684\u96c6\u5408(\u5373\u4e0d\u542b\u91cd\u590d\u5143\u7d20\u7684\u5355\u8bcd\u5217\u8868)\"\"\"vocabSet=set([])#createemptysetfordocumentindataSet:#\u64cd\u4f5c\u7b26|\u7528\u4e8e\u6c42\u4e24\u4e2a\u96c6\u5408\u7684\u5e76\u96c6vocabSet=vocabSet|set(document)#unionofthetwosetsreturnlist(vocabSet)defsetOfWords2Vec(vocabList,inputSet):\"\"\"\u904d\u5386\u67e5\u770b\u8be5\u5355\u8bcd\u662f\u5426\u51fa\u73b0\uff0c\u51fa\u73b0\u8be5\u5355\u8bcd\u5219\u5c06\u8be5\u5355\u8bcd\u7f6e1:paramvocabList:\u6240\u6709\u5355\u8bcd\u96c6\u5408\u5217\u8868:paraminputSet:\u8f93\u5165\u6570\u636e\u96c6:return:\u5339\u914d\u5217\u8868[0,1,0,1...]\uff0c\u5176\u4e2d1\u4e0e0\u8868\u793a\u8bcd\u6c47\u8868\u4e2d\u7684\u5355\u8bcd\u662f\u5426\u51fa\u73b0\u5728\u8f93\u5165\u7684\u6570\u636e\u96c6\u4e2d\"\"\"#\u521b\u5efa\u4e00\u4e2a\u548c\u8bcd\u6c47\u8868\u7b49\u957f\u7684\u5411\u91cf\uff0c\u5e76\u5c06\u5176\u5143\u7d20\u90fd\u8bbe\u7f6e\u4e3a0returnVec=[0]*len(vocabList)#[0,0......]#\u904d\u5386\u6587\u6863\u4e2d\u7684\u6240\u6709\u5355\u8bcd\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u8bcd\u6c47\u8868\u4e2d\u7684\u5355\u8bcd\uff0c\u5219\u5c06\u8f93\u51fa\u7684\u6587\u6863\u5411\u91cf\u4e2d\u7684\u5bf9\u5e94\u503c\u8bbe\u4e3a1forwordininputSet:ifwordinvocabList:returnVec[vocabList.index(word)]=1else:print\"theword:%sisnotinmyVocabulary!\"%wordreturnreturnVec1234567891011121314151617181920212223242526272829defcreateVocabList(dataSet):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u83b7\u53d6\u6240\u6709\u5355\u8bcd\u7684\u96c6\u5408\u00a0\u00a0\u00a0\u00a0:paramdataSet:\u6570\u636e\u96c6\u00a0\u00a0\u00a0\u00a0:return:\u6240\u6709\u5355\u8bcd\u7684\u96c6\u5408(\u5373\u4e0d\u542b\u91cd\u590d\u5143\u7d20\u7684\u5355\u8bcd\u5217\u8868)\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0vocabSet=set([])\u00a0\u00a0#createemptyset\u00a0\u00a0\u00a0\u00a0fordocumentindataSet:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u64cd\u4f5c\u7b26|\u7528\u4e8e\u6c42\u4e24\u4e2a\u96c6\u5408\u7684\u5e76\u96c6\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0vocabSet=vocabSet|set(document)\u00a0\u00a0#unionofthetwosets\u00a0\u00a0\u00a0\u00a0returnlist(vocabSet)\u00a0\u00a0defsetOfWords2Vec(vocabList,inputSet):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u904d\u5386\u67e5\u770b\u8be5\u5355\u8bcd\u662f\u5426\u51fa\u73b0\uff0c\u51fa\u73b0\u8be5\u5355\u8bcd\u5219\u5c06\u8be5\u5355\u8bcd\u7f6e1\u00a0\u00a0\u00a0\u00a0:paramvocabList:\u6240\u6709\u5355\u8bcd\u96c6\u5408\u5217\u8868\u00a0\u00a0\u00a0\u00a0:paraminputSet:\u8f93\u5165\u6570\u636e\u96c6\u00a0\u00a0\u00a0\u00a0:return:\u5339\u914d\u5217\u8868[0,1,0,1...]\uff0c\u5176\u4e2d1\u4e0e0\u8868\u793a\u8bcd\u6c47\u8868\u4e2d\u7684\u5355\u8bcd\u662f\u5426\u51fa\u73b0\u5728\u8f93\u5165\u7684\u6570\u636e\u96c6\u4e2d\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0#\u521b\u5efa\u4e00\u4e2a\u548c\u8bcd\u6c47\u8868\u7b49\u957f\u7684\u5411\u91cf\uff0c\u5e76\u5c06\u5176\u5143\u7d20\u90fd\u8bbe\u7f6e\u4e3a0\u00a0\u00a0\u00a0\u00a0returnVec=[0]*len(vocabList)#[0,0......]\u00a0\u00a0\u00a0\u00a0#\u904d\u5386\u6587\u6863\u4e2d\u7684\u6240\u6709\u5355\u8bcd\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u8bcd\u6c47\u8868\u4e2d\u7684\u5355\u8bcd\uff0c\u5219\u5c06\u8f93\u51fa\u7684\u6587\u6863\u5411\u91cf\u4e2d\u7684\u5bf9\u5e94\u503c\u8bbe\u4e3a1\u00a0\u00a0\u00a0\u00a0forwordininputSet:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifwordinvocabList:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnVec[vocabList.index(word)]=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\"theword:%sisnotinmyVocabulary!\"%word\u00a0\u00a0\u00a0\u00a0returnreturnVec2.6.1.5\u5206\u6790\u6570\u636e:\u68c0\u67e5\u8bcd\u6761\u786e\u4fdd\u89e3\u6790\u7684\u6b63\u786e\u6027\u68c0\u67e5\u51fd\u6570\u6267\u884c\u60c5\u51b5\uff0c\u68c0\u67e5\u8bcd\u8868\uff0c\u4e0d\u51fa\u73b0\u91cd\u590d\u5355\u8bcd\uff0c\u9700\u8981\u7684\u8bdd\uff0c\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\u3002Python>>>listOPosts,listClasses=bayes.loadDataSet()>>>myVocabList=bayes.createVocabList(listOPosts)>>>myVocabList['cute','love','help','garbage','quit','I','problems','is','park','stop','flea','dalmation','licks','food','not','him','buying','posting','has','worthless','ate','to','maybe','please','dog','how','stupid','so','take','mr','steak','my']123456>>>listOPosts,listClasses=bayes.loadDataSet()>>>myVocabList=bayes.createVocabList(listOPosts)>>>myVocabList['cute','love','help','garbage','quit','I','problems','is','park','stop','flea','dalmation','licks','food','not','him','buying','posting','has','worthless','ate','to','maybe','please','dog','how','stupid','so','take','mr','steak','my']\u68c0\u67e5\u51fd\u6570\u6709\u6548\u6027\u3002\u4f8b\u5982\uff1amyVocabList\u4e2d\u7d22\u5f15\u4e3a2\u7684\u5143\u7d20\u662f\u4ec0\u4e48\u5355\u8bcd\uff1f\u5e94\u8be5\u662f\u662fhelp\u3002\u8be5\u5355\u8bcd\u5728\u7b2c\u4e00\u7bc7\u6587\u6863\u4e2d\u51fa\u73b0\u4e86\uff0c\u73b0\u5728\u68c0\u67e5\u4e00\u4e0b\u770b\u770b\u5b83\u662f\u5426\u51fa\u73b0\u5728\u7b2c\u56db\u7bc7\u6587\u6863\u4e2d\u3002Python>>>bayes.setOfWords2Vec(myVocabList,listOPosts[0])[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,1]>>>bayes.setOfWords2Vec(myVocabList,listOPosts[3])[0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0]12345>>>bayes.setOfWords2Vec(myVocabList,listOPosts[0])[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,1]\u00a0>>>bayes.setOfWords2Vec(myVocabList,listOPosts[3])[0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0]2.6.1.6\u8bad\u7ec3\u7b97\u6cd5:\u4ece\u8bcd\u5411\u91cf\u8ba1\u7b97\u6982\u7387\u73b0\u5728\u5df2\u7ecf\u77e5\u9053\u4e86\u4e00\u4e2a\u8bcd\u662f\u5426\u51fa\u73b0\u5728\u4e00\u7bc7\u6587\u6863\u4e2d\uff0c\u4e5f\u77e5\u9053\u8be5\u6587\u6863\u6240\u5c5e\u7684\u7c7b\u522b\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u91cd\u5199\u8d1d\u53f6\u65af\u51c6\u5219\uff0c\u5c06\u4e4b\u524d\u7684x,y\u66ff\u6362\u4e3aw.\u7c97\u4f53\u7684w\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u5411\u91cf\uff0c\u5373\u5b83\u7531\u591a\u4e2a\u503c\u7ec4\u6210\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6570\u503c\u4e2a\u6570\u4e0e\u8bcd\u6c47\u8868\u4e2d\u7684\u8bcd\u4e2a\u6570\u76f8\u540c\u3002\u6211\u4eec\u4f7f\u7528\u4e0a\u8ff0\u516c\u5f0f\uff0c\u5bf9\u6bcf\u4e2a\u7c7b\u8ba1\u7b97\u8be5\u503c\uff0c\u7136\u540e\u6bd4\u8f83\u8fd9\u4e24\u4e2a\u6982\u7387\u503c\u7684\u5927\u5c0f\u3002\u9996\u5148\u53ef\u4ee5\u901a\u8fc7\u7c7b\u522bi(\u4fae\u8fb1\u6027\u7559\u8a00\u6216\u8005\u975e\u4fae\u8fb1\u6027\u7559\u8a00)\u4e2d\u7684\u6587\u6863\u6570\u9664\u4ee5\u603b\u7684\u6587\u6863\u6570\u6765\u8ba1\u7b97\u6982\u7387p(ci)\u3002\u63a5\u4e0b\u6765\u8ba1\u7b97p(w|ci)\uff0c\u8fd9\u91cc\u5c31\u8981\u7528\u5230\u6734\u7d20\u8d1d\u53f6\u65af\u5047\u8bbe\u3002\u5982\u679c\u5c06w\u5c55\u5f00\u4e3a\u4e00\u4e2a\u4e2a\u72ec\u7acb\u7279\u5f81\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5c06\u4e0a\u8ff0\u6982\u7387\u5199\u4f5cp(w0,w1,w2\u2026wn|ci)\u3002\u8fd9\u91cc\u5047\u8bbe\u6240\u6709\u8bcd\u90fd\u4e92\u76f8\u72ec\u7acb\uff0c\u8be5\u5047\u8bbe\u4e5f\u79f0\u4f5c\u6761\u4ef6\u72ec\u7acb\u6027\u5047\u8bbe\uff08\u4f8b\u5982A\u548cB\u4e24\u4e2a\u4eba\u629b\u9ab0\u5b50\uff0c\u6982\u7387\u662f\u4e92\u4e0d\u5f71\u54cd\u7684\uff0c\u4e5f\u5c31\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0cA\u629b2\u70b9\u7684\u540c\u65f6B\u629b3\u70b9\u7684\u6982\u7387\u5c31\u662f1/6*1/6\uff09\uff0c\u5b83\u610f\u5473\u7740\u53ef\u4ee5\u4f7f\u7528p(w0|ci)p(w1|ci)p(w2|ci)\u2026p(wn|ci)\u6765\u8ba1\u7b97\u4e0a\u8ff0\u6982\u7387\uff0c\u8fd9\u6837\u5c31\u6781\u5927\u5730\u7b80\u5316\u4e86\u8ba1\u7b97\u7684\u8fc7\u7a0b\u30022.6.1.7\u6734\u7d20\u8d1d\u53f6\u65af\u5206\u7c7b\u5668\u8bad\u7ec3\u51fd\u6570Pythondef_trainNB0(trainMatrix,trainCategory):\"\"\"\u8bad\u7ec3\u6570\u636e\u539f\u7248:paramtrainMatrix:\u6587\u4ef6\u5355\u8bcd\u77e9\u9635[[1,0,1,1,1....],[],[]...]:paramtrainCategory:\u6587\u4ef6\u5bf9\u5e94\u7684\u7c7b\u522b[0,1,1,0....]\uff0c\u5217\u8868\u957f\u5ea6\u7b49\u4e8e\u5355\u8bcd\u77e9\u9635\u6570\uff0c\u5176\u4e2d\u76841\u4ee3\u8868\u5bf9\u5e94\u7684\u6587\u4ef6\u662f\u4fae\u8fb1\u6027\u6587\u4ef6\uff0c0\u4ee3\u8868\u4e0d\u662f\u4fae\u8fb1\u6027\u77e9\u9635:return:\"\"\"#\u6587\u4ef6\u6570numTrainDocs=len(trainMatrix)#\u5355\u8bcd\u6570numWords=len(trainMatrix[0])#\u4fae\u8fb1\u6027\u6587\u4ef6\u7684\u51fa\u73b0\u6982\u7387\uff0c\u5373trainCategory\u4e2d\u6240\u6709\u76841\u7684\u4e2a\u6570\uff0c#\u4ee3\u8868\u7684\u5c31\u662f\u591a\u5c11\u4e2a\u4fae\u8fb1\u6027\u6587\u4ef6\uff0c\u4e0e\u6587\u4ef6\u7684\u603b\u6570\u76f8\u9664\u5c31\u5f97\u5230\u4e86\u4fae\u8fb1\u6027\u6587\u4ef6\u7684\u51fa\u73b0\u6982\u7387pAbusive=sum(trainCategory)/float(numTrainDocs)#\u6784\u9020\u5355\u8bcd\u51fa\u73b0\u6b21\u6570\u5217\u8868p0Num=zeros(numWords)#[0,0,0,.....]p1Num=zeros(numWords)#[0,0,0,.....]#\u6574\u4e2a\u6570\u636e\u96c6\u5355\u8bcd\u51fa\u73b0\u603b\u6570p0Denom=0.0p1Denom=0.0foriinrange(numTrainDocs):#\u662f\u5426\u662f\u4fae\u8fb1\u6027\u6587\u4ef6iftrainCategory[i]==1:#\u5982\u679c\u662f\u4fae\u8fb1\u6027\u6587\u4ef6\uff0c\u5bf9\u4fae\u8fb1\u6027\u6587\u4ef6\u7684\u5411\u91cf\u8fdb\u884c\u52a0\u548cp1Num+=trainMatrix[i]#[0,1,1,....]+[0,1,1,....]->[0,2,2,...]#\u5bf9\u5411\u91cf\u4e2d\u7684\u6240\u6709\u5143\u7d20\u8fdb\u884c\u6c42\u548c\uff0c\u4e5f\u5c31\u662f\u8ba1\u7b97\u6240\u6709\u4fae\u8fb1\u6027\u6587\u4ef6\u4e2d\u51fa\u73b0\u7684\u5355\u8bcd\u603b\u6570p1Denom+=sum(trainMatrix[i])else:p0Num+=trainMatrix[i]p0Denom+=sum(trainMatrix[i])#\u7c7b\u522b1\uff0c\u5373\u4fae\u8fb1\u6027\u6587\u6863\u7684[P(F1|C1),P(F2|C1),P(F3|C1),P(F4|C1),P(F5|C1)....]\u5217\u8868#\u5373\u57281\u7c7b\u522b\u4e0b\uff0c\u6bcf\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u6982\u7387p1Vect=p1Num/p1Denom#[1,2,3,5]/90->[1/90,...]#\u7c7b\u522b0\uff0c\u5373\u6b63\u5e38\u6587\u6863\u7684[P(F1|C0),P(F2|C0),P(F3|C0),P(F4|C0),P(F5|C0)....]\u5217\u8868#\u5373\u57280\u7c7b\u522b\u4e0b\uff0c\u6bcf\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u6982\u7387p0Vect=p0Num/p0Denomreturnp0Vect,p1Vect,pAbusive1234567891011121314151617181920212223242526272829303132333435363738def_trainNB0(trainMatrix,trainCategory):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u8bad\u7ec3\u6570\u636e\u539f\u7248\u00a0\u00a0\u00a0\u00a0:paramtrainMatrix:\u6587\u4ef6\u5355\u8bcd\u77e9\u9635[[1,0,1,1,1....],[],[]...]\u00a0\u00a0\u00a0\u00a0:paramtrainCategory:\u6587\u4ef6\u5bf9\u5e94\u7684\u7c7b\u522b[0,1,1,0....]\uff0c\u5217\u8868\u957f\u5ea6\u7b49\u4e8e\u5355\u8bcd\u77e9\u9635\u6570\uff0c\u5176\u4e2d\u76841\u4ee3\u8868\u5bf9\u5e94\u7684\u6587\u4ef6\u662f\u4fae\u8fb1\u6027\u6587\u4ef6\uff0c0\u4ee3\u8868\u4e0d\u662f\u4fae\u8fb1\u6027\u77e9\u9635\u00a0\u00a0\u00a0\u00a0:return:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0#\u6587\u4ef6\u6570\u00a0\u00a0\u00a0\u00a0numTrainDocs=len(trainMatrix)\u00a0\u00a0\u00a0\u00a0#\u5355\u8bcd\u6570\u00a0\u00a0\u00a0\u00a0numWords=len(trainMatrix[0])\u00a0\u00a0\u00a0\u00a0#\u4fae\u8fb1\u6027\u6587\u4ef6\u7684\u51fa\u73b0\u6982\u7387\uff0c\u5373trainCategory\u4e2d\u6240\u6709\u76841\u7684\u4e2a\u6570\uff0c\u00a0\u00a0\u00a0\u00a0#\u4ee3\u8868\u7684\u5c31\u662f\u591a\u5c11\u4e2a\u4fae\u8fb1\u6027\u6587\u4ef6\uff0c\u4e0e\u6587\u4ef6\u7684\u603b\u6570\u76f8\u9664\u5c31\u5f97\u5230\u4e86\u4fae\u8fb1\u6027\u6587\u4ef6\u7684\u51fa\u73b0\u6982\u7387\u00a0\u00a0\u00a0\u00a0pAbusive=sum(trainCategory)/float(numTrainDocs)\u00a0\u00a0\u00a0\u00a0#\u6784\u9020\u5355\u8bcd\u51fa\u73b0\u6b21\u6570\u5217\u8868\u00a0\u00a0\u00a0\u00a0p0Num=zeros(numWords)#[0,0,0,.....]\u00a0\u00a0\u00a0\u00a0p1Num=zeros(numWords)#[0,0,0,.....]\u00a0\u00a0\u00a0\u00a0\u00a0#\u6574\u4e2a\u6570\u636e\u96c6\u5355\u8bcd\u51fa\u73b0\u603b\u6570\u00a0\u00a0\u00a0\u00a0p0Denom=0.0\u00a0\u00a0\u00a0\u00a0p1Denom=0.0\u00a0\u00a0\u00a0\u00a0foriinrange(numTrainDocs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u662f\u5426\u662f\u4fae\u8fb1\u6027\u6587\u4ef6\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iftrainCategory[i]==1:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5982\u679c\u662f\u4fae\u8fb1\u6027\u6587\u4ef6\uff0c\u5bf9\u4fae\u8fb1\u6027\u6587\u4ef6\u7684\u5411\u91cf\u8fdb\u884c\u52a0\u548c\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p1Num+=trainMatrix[i]#[0,1,1,....]+[0,1,1,....]->[0,2,2,...]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5bf9\u5411\u91cf\u4e2d\u7684\u6240\u6709\u5143\u7d20\u8fdb\u884c\u6c42\u548c\uff0c\u4e5f\u5c31\u662f\u8ba1\u7b97\u6240\u6709\u4fae\u8fb1\u6027\u6587\u4ef6\u4e2d\u51fa\u73b0\u7684\u5355\u8bcd\u603b\u6570\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p1Denom+=sum(trainMatrix[i])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p0Num+=trainMatrix[i]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0p0Denom+=sum(trainMatrix[i])\u00a0\u00a0\u00a0\u00a0#\u7c7b\u522b1\uff0c\u5373\u4fae\u8fb1\u6027\u6587\u6863\u7684[P(F1|C1),P(F2|C1),P(F3|C1),P(F4|C1),P(F5|C1)....]\u5217\u8868\u00a0\u00a0\u00a0\u00a0#\u5373\u57281\u7c7b\u522b\u4e0b\uff0c\u6bcf\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u6982\u7387\u00a0\u00a0\u00a0\u00a0p1Vect=p1Num/p1Denom#[1,2,3,5]/90->[1/90,...]\u00a0\u00a0\u00a0\u00a0#\u7c7b\u522b0\uff0c\u5373\u6b63\u5e38\u6587\u6863\u7684[P(F1|C0),P(F2|C0),P(F3|C0),P(F4|C0),P(F5|C0)....]\u5217\u8868\u00a0\u00a0\u00a0\u00a0#\u5373\u57280\u7c7b\u522b\u4e0b\uff0c\u6bcf\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u6982\u7387\u00a0\u00a0\u00a0\u00a0p0Vect=p0Num/p0Denom\u00a0\u00a0\u00a0\u00a0returnp0Vect,p1Vect,pAbusive2.6.1.8\u6d4b\u8bd5\u7b97\u6cd5:\u6839\u636e\u73b0\u5b9e\u60c5\u51b5\u4fee\u6539\u5206\u7c7b\u5668http://www.cnblogs.com/apache\u20261\u8d5e3\u6536\u85cf2\u8bc4\u8bba"]},
{"art_title": ["\u8c01\u8bf4\u4e0d\u80fd\u7528Python\u5199\u51fa\u8ba9\u4eba\u8ff7\u60d1\u7684\u4ee3\u7801\uff1f"], "art_url": ["http://python.jobbole.com/1414/"], "art_create_time": ["2011/09/13"], "art_img": ["http://ww1.sinaimg.cn/mw690/005N3SJDgw1eknq3byyroj30er0crgrb.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u4f2f\u4e50\u5728\u7ebf\u8bfb\u8005\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1apreshing\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u8fd9\u91cc\u662f\u663e\u793a\u5f6d\u7f57\u65af\u70b9\u9635\u7684Python\u7684\u811a\u672c\u3002\u662f\u7684\uff0c\u8fd9\u662f\u53ef\u4ee5\u8fd0\u884c\u7684\u6709\u6548Phython\u4ee3\u7801\u3002\u8bd1\u6ce8\uff1a\u5f6d\u7f57\u65af\u70b9\u9635\uff0c\u7269\u7406\u5b66\u672f\u8bed\u3002\u4e0a\u4e16\u7eaa70\u5e74\u4ee3\u82f1\u56fd\u6570\u5b66\u5bb6\u5f6d\u7f57\u65af\u7b2c\u4e00\u6b21\u63d0\u51fa\u4e86\u8fd9\u4e2a\u6982\u5ff5\uff0c\u79f0\u4e3a\u5f6d\u7f57\u65af\u70b9\u9635(Pen-rosetiles)\u3002Python_=\\\"\"\"if!1:\"e,V=1000,(0j-1)**-.2;v,S=.5/V.real,[(0,0,4*e,4*e*V)];w=1-v\"def!E(T,A,B,C):P,Q,R=B*w+A*v,B*w+C*v,A*w+B*v;return[(1,Q,C,A),(1,P,Q,B),(0,Q,P,A)]*T+[(0,C,R,B),(1,R,C,A)]*(1-T)\"for!i!in!_[:11]:S=sum([E(*x)for!x!in!S],[])\"import!cairo!as!O;s=O.ImageSurface(1,e,e);c=O.Context(s);M,L,G=c.move_to,c.line_to,c.set_source_rgba\"def!z(f,a):f(-a.imag,a.real-e-e)\"for!T,A,B,C!in[i!for!i!in!S!if!i[\"\"\";exec(reduce(lambdax,i:x.replace(chr(i),\"\\n\"[34-i:]),range(35),_+\"\"\"0]]:z(M,A);z(L,B);z(L,C);c.close_path()\"G(.4,.3,1);c.paint();G(.7,.7,1);c.fill()\"for!i!in!range(9):\"!g=1-i/8;d=i/4*g;G(d,d,d,1-g*.8)\"!def!y(f,a):z(f,a+(1+2j)*(1j**(i/2.))*g)\"!for!T,A,B,C!in!S:y(M,C);y(L,A);y(M,A);y(L,B)\"!c.stroke()\"s.write_to_png('penrose.png')\"\"\"))123456789101112131415161718192021222324252627282930_\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0=\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"if!\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01:\"e,V=100\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00,(0j-1)**-.2;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0v,S=.5/\u00a0\u00a0V.real,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[(0,0,4\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*e,4*e*\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0V)];w=1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0-v\"def!\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0E(T,A,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0B,C):P\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,Q,R=B*w+\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0A*v,B*w+C\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*v,A*w+B*v;retur\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0n[(1,Q,C,A),(1,P\u00a0\u00a0\u00a0\u00a0,Q,B),(0,Q,P,A)]*T+[(0,C\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,R,B),(1,R,C,A)]*(1-T)\"for!i!in!_[:11]:S\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0=sum([E\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(*x)for\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0!x!in!S],[])\"imp\u00a0\u00a0ort!cair\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0o!as!O;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s=O.Ima\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0geSurfac\u00a0\u00a0e(1,e,e)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0;c=O.Con\u00a0\u00a0text(s);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0M,L,G=c.\u00a0\u00a0\u00a0\u00a0move_to\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,c.line_to,c.s\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0et_sour\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ce_rgb\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0a\"def!z(f,a)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:f(-a.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0imag,a.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0real-e-e)\"for!T,A,B,C!in[i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0!for!i!\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0in!S!if!i[\"\"\";exec(reduce(lambdax,i:x.replace(chr\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(i),\"\\n\"[34-i:]),\u00a0\u00a0range(\u00a0\u00a035),_+\"\"\"0]]:z(M,A\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0);z(L,B);z\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(L,C);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0c.close_pa\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0th()\"G\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(.4,.3\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,1);c.\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0paint(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0);G(.7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,.7,1)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0;c.fil\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0l()\"fo\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r!i!in\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0!range\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(9):\"!\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0g=1-i/\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a08;d=i/\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a04*g;G(d,d,d,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01-g*.8\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0)\"!def\u00a0\u00a0\u00a0\u00a0!y(f,a):z(f,a+(1+2j)*(\u00a0\u00a0\u00a0\u00a01j**(i\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/2.))*g)\"!for!T,A,B,C!in!S:y(M,C);y(L,A);y(M\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0,A);y(L,B)\"!c.st\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0roke()\"s.write_t\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0o_png('pen\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0rose.png')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0))\u5f53\u8fd9\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5b83\u8f93\u51fa\u4e86\u4e00\u4e2a1000\u00d71000\u7684\u56fe\u50cf\u6587\u4ef6\uff0c\u5305\u542b\u5927\u7ea62212\u4e2a\u75313D\u7acb\u4f53\u6548\u5e94\u6e32\u67d3\u7684\u5f6d\u7f57\u65af\u70b9\u9635\u3002\u8fd9\u91cc\u662f\u8be5\u56fe\u50cf\u7684\u4e00\u90e8\u5206\uff08\u70b9\u51fb\u653e\u5927\uff09\u3002\u8fd0\u884c\u8be5\u811a\u672c\u9700\u8981Pycairo\u3002\u5b83\u53ea\u5728Python\u5b83\u662f\u6807\u51c6\u7684Python\u811a\u672c\uff0c\u4f46\u6211\u52aa\u529b\u60f3\u628a\u5b83\u53d8\u5f97\u66f4\u7b80\u6d01\uff0c\u4e8e\u662f\u6211\u53c8\u4ece\u4e2d\u5220\u51cf\u4e86\u4e00\u4e9b\u3002\u7f16\u6ce8\uff1aPycairo\u662f\u4e00\u7ec4Python\u7248\u672c\u7684Cario\u56fe\u5f62\u5e93\u3002\u5f6d\u7f57\u65af\u70b9\u9635\u5f88\u9177\uff0c\u56e0\u4e3a\u5b83\u4eec\u975e\u5468\u671f\u6027\u5730\u8986\u76d6\u4e86\u6574\u4e2a\u5e73\u9762\u2014\u2014\u56fe\u7247\u7684\u8f6c\u6362\u526f\u672c\u4e0e\u539f\u578b\u4ece\u6765\u4e0d\u4f1a\u4e00\u81f4\u3002\u5b83\u4eec\u662f\u7531RogerPenrose\u5148\u751f\u901a\u8fc7\u5c06\u4e94\u8fb9\u5f62\u7684\u5e73\u9762\u5e73\u94fa\u5728\u4e00\u8d77\u7684\u4e00\u7cfb\u5217\u5c1d\u8bd5\u800c\u53d1\u660e\u7684\u3002\u4e0eC\u6216Perl\u76f8\u6bd4\uff0cPython\u5e76\u4e0d\u662f\u8ba9\u4eba\u8ff7\u60d1\u7684\u7f16\u7a0b\u8bed\u8a00\u3002\u8fd9\u79cd\u6bd4\u8f83\u4f3c\u4e4e\u4e5f\u4ece\u672a\u53d1\u751f\uff0c\u800c\u4e14\u5728\u7f51\u4e0a\u4e5f\u6ca1\u6709\u591a\u5c11\u8ba9\u4eba\u8d39\u89e3\u7684Python\u7684\u4f8b\u5b50\uff1a\u4f60\u53ef\u4ee5\u5728\u5b98\u65b9\u7684Python\u5e38\u89c1\u95ee\u9898\u4e2d\u6216\u5404\u79cd\u7f51\u9875\u5982\u8fd9\u91cc\u548c\u8fd9\u91cc\u627e\u5230\u4e00\u4e9b\u4f8b\u5b50\u3002\u57282011\u5e74\u7684PyCon\u5bf9\u6b64\u8fd8\u6709\u4e13\u9898\u8ba8\u8bba\u3002\u6211\u76f8\u4fe1\u8f93\u51fa\u4e00\u4e2a\u9ad8\u5206\u8fa8\u7387\u7684\u56fe\u50cf\u662f\u7b2c\u4e00\u4e2a\u8ba9\u4eba\u8d39\u89e3\u7684Python\u7a0b\u5e8f\u3002\u5982\u679c\u4f60\u77e5\u9053\u5176\u5b83\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u5728\u8bc4\u8bba\u4e2d\u544a\u8bc9\u6211\u3002\u00a0\u7ffb\u8bd1\uff1a\u4f2f\u4e50\u5728\u7ebf\u00a0\u2013\u5f20\u79c0\u541b1\u8d5e\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf\u8bfb\u8005\u2460\u672c\u8d26\u53f7\u7528\u4e8e\u53d1\u5e03\u90a3\u4e9b\u5728\u4f2f\u4e50\u5728\u7ebf\u65e0\u8d26\u53f7\u7684\u8bfb\u8005\u7684\u6295\u7a3f\uff0c\u5305\u62ec\u8bd1\u6587\u548c\u539f\u521b\u6587\u7ae0\u3002\u2461\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\uff1ahttp://blog.jobbole.com/99322/\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b733"]},
{"art_title": ["\u6211\u662f\u5982\u4f55\u572812\u5468\u5185\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684"], "art_url": ["http://python.jobbole.com/8464/"], "art_create_time": ["2011/11/25"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2011/11/How-I-Became-a-Programmer.jpeg"], "art_content": ["\u82f1\u6587\u51fa\u5904\uff1aMattDeboard\uff0c\u8bd1\u6587\u51fa\u5904\uff1a36KR\u6211\u7684\u6545\u4e8b\u5728\u6d77\u519b\u9646\u6218\u961f\u670d\u5f79\u8d85\u8fc710\u5e74\u540e\uff0c\u6211\u4e8e\u53bb\u5e747\u6708\u4efd\u9000\u5f79\u4e86\u3002\u968f\u540e\u57288\u6708\u4efd\u627e\u5230\u4e86\u4e00\u4efd\u5dde\u5f69\u7968\uff08statelottery\uff09\u505a\u516c\u5173\u7684\u5de5\u4f5c\uff0c\u5230\u4eca\u5e742\u6708\u4e2d\u65ec\u7684\u65f6\u5019\u53c8\u88ab\u8f9e\u9000\u4e86\u3002\u52305\u6708\u4e2d\u65ec\u7684\u65f6\u5019\u6211\u5728DE\u534f\u4f1a\u627e\u5230\u4e86\u4e00\u4efd\u4e34\u65f6\u7684\u201c\u521d\u7ea7\u7528\u6237\u4f53\u9a8c\u5de5\u7a0b\u5e08\u201d\u5de5\u4f5c\uff0c\u800c\u5230\u4e868\u6708\u5e95\u6211\u5219\u6210\u4e86\u6b63\u5f0f\u7684\u201c\u7528\u6237\u4f53\u9a8c\u5de5\u7a0b\u5e08\u201d\u3002\u5f53\u6211\u4e22\u6389\u5dde\u5f69\u7968\u7684\u90a3\u4efd\u5de5\u4f5c\u65f6\uff0c\u6211\u5c31\u5728\u60f3\u516c\u5173\u8fd9\u884c\u53ef\u80fd\u771f\u7684\u4e0d\u9002\u5408\u6211\u3002\u6211\u60f3\u505a\u4e00\u540d\u7a0b\u5e8f\u5458\u3002\u4e8e\u662f\u6211\u5f00\u59cb\u8282\u8863\u7f29\u98df\u5b66\u4e60\u7f16\u7a0b\u3002\u5bb6\u4eba\u5bf9\u6211\u7684\u60c5\u51b5\u975e\u5e38\u62c5\u5fc3\u3002\u4ece2\u6708\u4efd\u52305\u6708\u4efd\u7684\u90a3\u6bb5\u65f6\u95f4\uff0c\u6211\u51e0\u4e4e\u53ea\u8981\u662f\u6ca1\u7761\u7740\u5c31\u662f\u5728\u5b66\u4e60\u7f16\u7a0b\uff0c\u5b66\u4e60Linux\u4ee5\u53ca\u8ba1\u7b97\u673a\u79d1\u5b66\u3002\u6211\u81ea\u5b66Python\uff0c\u81ea\u5b66Django\u3002\u6211\u5b66\u4e86\u4e00\u4e9b\u51fd\u6570\u5f0f\u7f16\u7a0b\u548c\u547d\u4ee4\u5f0f\u7f16\u7a0b\u3002\u5bf9Linux\u547d\u4ee4\u884c\u6709\u4e86\u4e00\u4e2a\u4e0d\u9519\u7684\u4e86\u89e3\u3002\u6211\u6ca1\u6709\u505a\u7684\u6709\u4eba\u95ee\u6211\uff1a\u201c\u4f60\u5982\u4f55\u572811\u5468\u5185\u5b66\u4f1a\u4e86Django\uff1f\u201d\u4e8b\u5b9e\u4e0a\uff0c\u6211\u5e76\u6ca1\u6709\u9488\u5bf9Django\u672c\u8eab\u53bb\u5b66\u3002\u800c\u662f\u5728\u4e3a\u4e86\u4f7f\u5f97\u7528Python\u7f16\u5199\u5e94\u7528\u66f4\u52a0\u5bb9\u6613\u7684\u60c5\u51b5\u4e0b\u5b66\u5230\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\u5b8c\u5168\u51fa\u4e8e\u5076\u7136\u3002\u56e0\u6b64\u6211\u4e0d\u60f3\u88ab\u79f0\u4f5c\u4e00\u540d\u201cDjango\u5f00\u53d1\u8005\u201d\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u6211\u8fc7\u53bb\u662f\u5728\u82b1\u5927\u91cf\u7684\u65f6\u95f4\u53bb\u4e13\u95e8\u5b66Django\u672c\u8eab\uff0c\u800c\u4e0d\u662f\u53bb\u5b66\u5982\u4f55\u4f7f\u7528Django\u5de5\u4f5c\uff0c\u6211\u53ef\u80fd\u8fdc\u6ca1\u6709\u73b0\u5728\u7684\u7f16\u7a0b\u80fd\u529b\u3002\u4ee5\u4e0b\u662f\u597d\u5947\u7684\u670b\u53cb\u4eec\u7ed9\u6211\u7684\u4e00\u4e9b\u95ee\u9898\u4ee5\u53ca\u6211\u7684\u56de\u7b54\u4f60\u662f\u4ee5\u7f51\u7edc\u8d44\u6e90\u5f00\u59cb\u7684\u8fd8\u662f\u4ee5\u4e66\u672c\u8d44\u6e90\u5f00\u59cb\u7684\uff1f\u6211\u90fd\u6709\u7528\u3002\u8fd9\u5305\u62ecDjangoproject\uff0cStackOverflow\u548cMIT\u5173\u4e8e\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u5f00\u653e\u8bfe\u3002\u4f60\u7684\u6bcf\u5929\u6216\u8005\u662f\u6bcf\u5468\u65f6\u95f4\u662f\u600e\u4e48\u5b89\u6392\u7684\uff1f\u6709\u65f6\u6bcf\u59298\u4e2a\u5c0f\u65f6\uff0c\u6709\u65f612\u4e2a\u5c0f\u65f6\uff0c\u6709\u65f616\u4e2a\u5c0f\u65f6\uff0c\u603b\u4e4b\u6bcf\u5929\u90fd\u8981\u82b1\u5f88\u591a\u65f6\u95f4\u3002\u56e0\u4e3a\u6ca1\u5de5\u4f5c\uff0c\u53c8\u662f\u5355\u8eab\u7236\u4eb2\uff0c\u6240\u4ee5\u4f1a\u7279\u522b\u6709\u610f\u5fd7\u7279\u522b\u6709\u6fc0\u60c5\u3002\u8fd9\u6837\u7684\u4e00\u4e2a\u5883\u51b5\u4f7f\u5f97\u6211\u80fd\u5341\u500d\u52aa\u529b\u7684\u5de5\u4f5c\uff0c\u4e0d\u73a9\u6e38\u620f\uff0c\u4e0d\u770b\u7535\u89c6\uff0c\u751a\u81f3\u6574\u5929\u4e0d\u7761\u89c9\uff0c\u5b8c\u5168\u6c89\u6d78\u5728\u4ee3\u7801\uff0c\u7f16\u7a0b\u91cc\u3002\u4f60\u6709\u6307\u5bfc\u8001\u5e08\u5417\uff1f\u662f\u7684\u6211\u6709\u3002\u4ed6\u662f\u4e00\u4e2a\u975e\u5e38\u806a\u660e\u800c\u4e14\u6210\u529f\u7684\u4eba\uff0c\u51e0\u4e4e\u5728\u6211\u6210\u4e3a\u7a0b\u5e8f\u5458\u8def\u4e0a\u7684\u6bcf\u4e00\u4e2a\u65b9\u9762\u90fd\u7ed9\u4e86\u6211\u6307\u5bfc\u3002\u8fd9\u5176\u4e2d\u5305\u62ec\u5f88\u591a\u975e\u5e38\u5177\u4f53\u7684\u7f16\u7a0b\u77e5\u8bc6\uff08\u6bd4\u5982Python&Django\uff09\uff0c\u8fd8\u6709\u804c\u4e1a\u5efa\u8bae\u7b49\u3002\u4e4b\u524d\u6709\u8fc7\u4ec0\u4e48\u7279\u522b\u7684\u7ecf\u5386\u5bf9\u4e8e\u4f60\u73b0\u5728\u81ea\u5b66\u6210\u4e3a\u7a0b\u5e8f\u5458\u6709\u4ec0\u4e48\u5e2e\u52a9\u7684\u5417\uff1f\u6ca1\u6709\u5f88\u591a\u7279\u6b8a\u7684\u7ecf\u5386\u3002\u6211\u5f88\u65e9\u4e4b\u524d\u5bf9\u7535\u8111\u6709\u8fc7\u72c2\u70ed\u7684\u7231\u597d\uff0c\u5b66\u8fc7\u4e00\u70b9QBasic&VisualBasic\uff0c\u540e\u6765\u53c8\u65ad\u65ad\u7eed\u7eed\u7684\u5f04\u8fc7\u4e00\u70b9Python\uff0c\u4f46\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u6ca1\u600e\u4e48\u5f04\u3002\u9664\u6b64\u4e4b\u5916\u6ca1\u6709\u5176\u4ed6\u7684\u4e86\u3002\u4f60\u600e\u6837\u9009\u62e9\u5b66\u4e60Django\u7684\uff1f\u8fd9\u4e2a\u5f88\u7b80\u5355\u3002\u56e0\u4e3a\u6211\u60f3\u8981\u6a21\u4eff\u7684\u4e00\u4e2a\u4eba\u5c31\u662f\u901a\u8fc7Django\u53d6\u5f97\u4e86\u5f88\u5927\u7684\u6210\u529f\u3002\u53ef\u4ee5\u5206\u4eab\u4e00\u4e0b\u4f60\u7684\u5b66\u4e60\u8fc7\u7a0b\u5417\uff1f\u6211\u60f3\u91cd\u7533\u4e00\u4e0b\u6211\u5e76\u4e0d\u662f\u4e00\u4e2a\u81ea\u5b66\u5929\u624d\u4e5f\u6ca1\u6709\u4ec0\u4e48\u5f88\u7279\u6b8a\u7684\u5929\u5206\u3002\u6211\u53ea\u662f\u5f88\u52aa\u529b\u7684\u5b66\u4e60\u7f62\u4e86\uff0c\u56e0\u4e3a\u6211\u7a77\u56f0\u6f66\u5012\u800c\u4e14\u6ca1\u6709\u5176\u4ed6\u9009\u62e9\u3002\u6211\u51e0\u4e4e\u6d88\u8017\u4e86\u6240\u4ee5\u53ef\u4ee5\u5e2e\u52a9\u6211\u8fbe\u5230\u73b0\u5728\u8fd9\u4e2a\u5730\u6b65\u7684\u8d44\u6e90\u2014\u2014\u4e00\u4e2a\u65e2\u53ef\u4ee5\u8ba9\u6211\u8d5a\u94b1\u53c8\u559c\u6b22\u7684\u5de5\u4f5c\u3002\u8fd9\u5c31\u662f\u6211\u7684\u5b66\u4e60\u8fc7\u7a0b\u3002\u60f3\u4e86\u89e3\u4e00\u4e0b\u4f60\u5177\u4f53\u5b66\u4e60Django\u7684\u8fc7\u7a0b\uff0c\u6216\u8005\u7ed9\u6211\u4e00\u4e9b\u5efa\u8bae\u6216\u63a8\u8350\u4e00\u4e9b\u5b66\u4e60\u8d44\u6e90\uff08HTML/CSS\uff0cJavaScript\uff09\uff1f\u4e8b\u5b9e\u4e0a\uff0c\u6211\u552f\u4e00\u7684\u5efa\u8bae\u5c31\u662f\u52a8\u624b\u53bb\u505a\u3002\u6211\u771f\u7684\u82b1\u4e86\u5f88\u591a\u65f6\u95f4\u5b66\u4e60\uff0c\u800c\u4e14\u6211\u4e5f\u4eab\u53d7\u5b66\u4e60\u7684\u8fc7\u7a0b\u3002\u6b63\u5982\u6211\u5728\u4e0a\u9762\u5df2\u7ecf\u8bf4\u8fc7\uff0c\u6211\u6ca1\u6709\u523b\u610f\u53bb\u5b66Django\uff0cRubyonRails\u6216\u8005Noir\u3002\u6211\u60f3\u5e2e\u52a9\u6211\u6210\u529f\u7684\u4e00\u4e2a\u91cd\u8981\u56e0\u7d20\u662f\u5b66\u4e60\u8bed\u8a00\u4ee5\u53ca\u5176\u80cc\u540e\u7684\u5de5\u4f5c\u601d\u60f3\uff0c\u7136\u540e\u518d\u901a\u8fc7\u4e00\u4e2a\u7f51\u7edc\u6846\u67b6\u53bb\u66f4\u597d\u7684\u5b66\u4e60\u90a3\u95e8\u8bed\u8a00\u3002\u56e0\u6b64\u5bf9\u7f51\u7edc\u6846\u67b6\u7684\u5b66\u4e60\u90fd\u662f\u6211\u5728\u5b66\u4e60\u7f16\u7a0b\u8bed\u8a00\u4e2d\u5076\u7136\u6240\u5f97\u7684\u3002\u6211\u5efa\u8bae\u60f3\u5b66\u7684\u670b\u53cb\u53bb\u770b\u770birc.freenode.net\uff0c\u53bb\u8bfb\u8bfbDjango\u6587\u6863\u5e76\u4e0d\u61c2\u5c31\u95ee\u3002\u6211\u5c31\u662f\u8fd9\u6837\u505a\u7684\uff0c\u800c\u4e14\u6548\u679c\u4e5f\u5f88\u4e0d\u9519\u3002\u4e0d\u8fc7\u6211\u5e76\u4e0d\u662f\u5b8c\u5168\u5750\u7740\u8bfb\u6587\u6863\uff0c\u5927\u90e8\u5206\u7684\u65f6\u95f4\u6211\u90fd\u4f1a\u81ea\u5df1\u505a\u4e00\u4e9b\u4e1c\u897f\u4ee5\u66f4\u597d\u7684\u7406\u89e3\u80cc\u540e\u7684\u5de5\u4f5c\u601d\u60f3\u3002\u6211\u4e2a\u4eba\u662f\u4e00\u4e2a\u52a8\u624b\u5b66\u4e60\u8005\uff0c\u6709\u4e9b\u4eba\u53ef\u80fd\u4e0d\u662f\uff0c\u4f46\u662f\u52a8\u624b\u5e2e\u52a9\u6211\u83b7\u5f97\u4e86\u6210\u529f\u3002\u800c\u4f60\u53ef\u4ee5\u9009\u62e9\u66f4\u9002\u5408\u4f60\u81ea\u5df1\u7684\u65b9\u5f0f\u3002\u4f60\u662f\u5982\u4f55\u5411\u516c\u53f8\u5c55\u793a\u4f60\u81ea\u5df1\u7684\u6280\u80fd\u7684\uff1f\u662f\u7ed9\u4ed6\u4eec\u770b\u4f60\u7684\u9879\u76ee\u4e86\u5417\uff1fGithub\uff0cGithub\u8fd8\u662fGithub\u3002\u6211\u89c9\u5f97\u5f3a\u8c03\u7684\u518d\u591a\u6709\u4e0d\u8fc7\u5206\uff0c\u505a\u4e00\u4e9b\u4e1c\u897f\uff0c\u653e\u5230Github\u4e0a\u53bb\uff0c\u8ba9\u4eba\u4eec\u77e5\u9053\u4f60\u5f88\u5bcc\u6709\u6fc0\u60c5\u4e5f\u5f88\u806a\u660e\u597d\u5b66\u3002\u53e6\u5916\u8fd8\u6709\u7f51\u7edc\u3002\u53c2\u52a0\u4e00\u4e9b\u884c\u4e1a\u6d3b\u52a8\uff0c\u53d1\u5fae\u535a\uff0c\u5199\u535a\u5ba2\uff0c\u548c\u4f60\u5468\u56f4\u7684\u5708\u5b50\u8fdb\u884c\u4e92\u52a8\u3002\u5728\u6211\u770b\u5230\u6211\u73b0\u5728\u8fd9\u4efd\u5de5\u4f5c\u7684\u524d\u4e00\u5468\uff0c\u6211\u5c31\u66fe\u5728\u4e00\u4e2a\u8bba\u575b\u4e0a\u53d1\u5e03\u8fc7\u4e00\u4e2a\u7b80\u77ed\u7684\u6f14\u8bb2\uff0c\u8fd9\u4e5f\u4f7f\u5f97\u6709\u4e9b\u4eba\u6ce8\u610f\u5230\u4e86\u6211\u3002\u7ed3\u8bba\u5982\u679c\u8981\u6211\u6982\u62ec\u6211\u7684\u6574\u4e2a\u5b66\u4e60\u8fc7\u7a0b\u7684\u8bdd\uff0c\u6211\u60f3\u4ee5\u4e0b\u51e0\u70b9\u503c\u5f97\u4e00\u8bf4\uff1a1.\u95ee\u95ee\u9898\uff0c\u6709\u597d\u5947\u5fc3\uff0c\u5bcc\u4e8e\u70ed\u60c52.\u5b66\u4e60\u4e00\u95e8\u8bed\u8a00\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u7f51\u7edc\u5f00\u53d1\u6846\u67b63.\u52aa\u529b\u5b66\u4e604.\u6784\u5efa\u4e00\u4e2a\u7f51\u7edc\uff0c\u53c2\u52a0\u884c\u4e1a\u6d3b\u52a8\uff0c\u5199\u535a\u5ba2\u7b49\uff0c\u544a\u8bc9\u4eba\u4eec\u4f60\u662f\u4e00\u4e2a\u503c\u5f97\u5171\u4e8b\u7684\u4eba5.\uff08\u9009\u62e9\u6027\u7684\uff09\u5c06\u4f60\u81ea\u5df1\u653e\u5230\u4e00\u4e2a\u6ca1\u6709\u9000\u8def\u7684\u5730\u65b9\uff0c\u7834\u91dc\u6c89\u821f\u6700\u540e\u6211\u60f3\u8bf4\u7684\u5c31\u662f\u6211\u89c9\u5f97\u81ea\u5df1\u975e\u5e38\u5e78\u8fd0\u3002\u6211\u73b0\u5728\u8fd8\u7b97\u4e0d\u4e0a\u4e00\u4e2a\u5f88\u68d2\u7684\u5f00\u53d1\u8005\uff0c\u800c\u4e14\u6211\u7684\u804c\u4e1a\u4e5f\u624d\u521a\u521a\u5f00\u59cb\u3002\u4f46\u662f\u6211\u5f88\u9ad8\u5174\u901a\u8fc7\u81ea\u5df1\u7684\u52aa\u529b\u6539\u53d8\u4e86\u6211\u7684\u751f\u6d3b\u8f68\u8ff9\u3002\u6211\u4e5f\u5e0c\u671b\u6211\u7684\u7ecf\u5386\u53ef\u4ee5\u5e2e\u5230\u4f60\u4eec\u3002\u540e\u8bb0\uff1a\u6709\u4eba\u53ef\u80fd\u4f1a\u5bf9\u6587\u4e2d\u63d0\u5230\u7684\u795e\u79d8\u8001\u5e08\u611f\u5174\u8da3\uff0c\u4f5c\u8005Matt\u5e76\u672a\u5728\u6587\u4e2d\u8bf4\u660e\u4ed6\u662f\u5982\u4f55\u9047\u5230\u8fd9\u4f4d\u8001\u5e08\u7684\uff0c\u4e0d\u8fc7\u5728\u8bfb\u8005\u8bc4\u8bba\u4e0b\u9762\u4ed6\u7ed9\u51fa\u4e86\u56de\u590d\u3002Matt\u662f\u901a\u8fc7\u7ecf\u5e38\u901b\u8fd9\u4f4d\u524d\u8f88\u7684\u7f51\u7edc\u8bba\u575b\u8ba4\u8bc6\u4ed6\u7684\u3002\u540e\u6765\u968f\u7740\u9010\u6e10\u7684\u719f\u6089\u4fbf\u5f00\u59cb\u5bfb\u6c42\u4ed6\u7684\u5e2e\u52a9\u6307\u5bfc\uff0c\u6700\u540e\u4e5f\u624d\u6709\u4e86Matt\u4eca\u5929\u7684\u7a0b\u5e8f\u5458\u4e4b\u8def\u30021\u8d5e1\u6536\u85cf1\u8bc4\u8bba"]},
{"art_title": ["\u521b\u5efa\u6210\u529f\u7684Python\u9879\u76ee"], "art_url": ["http://python.jobbole.com/12649/"], "art_create_time": ["2012/02/02"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["\u82f1\u6587\u539f\u6587\uff1aCreatesuccessfulPythonprojects\uff0c\u7f16\u8bd1\uff1aElaine.Ye\u521b\u5efa\u4e00\u4e2a\u6210\u529f\u7684\u5f00\u6e90Python\u9879\u76ee\u6240\u6d89\u53ca\u7684\u5e76\u4e0d\u4ec5\u4ec5\u662f\u7f16\u5199\u6709\u7528\u7684\u4ee3\u7801\uff0c\u4e0e\u5176\u76f8\u5173\u7684\u8fd8\u6709\u793e\u533a\u7684\u53c2\u4e0e\u3001\u8d8a\u6765\u8d8a\u591a\u7684\u5408\u4f5c\u673a\u4f1a\u3001\u6280\u827a\u4ee5\u53ca\u652f\u6301\u7b49\u3002\u63a2\u7d22\u6700\u4f73\u7684\u505a\u6cd5\u6709\u52a9\u4e8e\u4f60\u521b\u5efa\u51fa\u81ea\u5df1\u7684\u6210\u529f\u9879\u76ee\u3002\u5f00\u6e90Python\u9879\u76ee\u7684\u751f\u6001\u7cfb\u7edf\u4e30\u5bcc\u591a\u6837\uff0c\u8fd9\u4f7f\u5f97\u60a8\u80fd\u591f\u7ad9\u5728\u5de8\u4eba\u7684\u80a9\u8180\u4e0a\u6765\u5f00\u53d1\u4e0b\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\u3002\u6b64\u5916\uff0c\u8fd9\u610f\u5473\u7740\u5b58\u5728\u4e00\u7cfb\u5217\u7684\u793e\u533a\u89c4\u8303\u548c\u6700\u4f73\u505a\u6cd5\uff0c\u901a\u8fc7\u9075\u5b88\u8fd9\u4e9b\u7ea6\u5b9a\u5e76\u628a\u8fd9\u4e9b\u505a\u6cd5\u5e94\u7528\u5230\u9879\u76ee\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4e3a\u81ea\u5df1\u7684\u8f6f\u4ef6\u8d62\u5f97\u66f4\u5e7f\u8303\u56f4\u7684\u91c7\u7528\u3002\u672c\u6587\u6db5\u76d6\u4e86\u4e00\u4e9b\u5728\u6784\u5efa\u5927\u578b\u548c\u5c0f\u578b\u7684\u9879\u76ee\u65f6\u90fd\u8fd0\u4f5c\u5f97\u5f88\u597d\u7684\u5b9e\u8df5\u505a\u6cd5\uff0c\u8fd9\u4e9b\u9879\u76ee\u90fd\u5df2\u7ecf\u8d62\u5f97\u4e86\u5e7f\u6cdb\u7684\u7528\u6237\u7fa4\u4f53\u3002\u8fd9\u91cc\u7ed9\u51fa\u7684\u8fd9\u4e9b\u5efa\u8bae\u7684\u90fd\u662f\u5408\u7406\u7684\u3001\u6709\u5176\u610f\u4e49\u7684\uff0c\u4e0d\u8fc7\uff0c\u56e0\u4e3a\u7ed3\u679c\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u5fc5\u628a\u5b83\u4eec\u5f53\u6210\u4e25\u683c\u7684\u6559\u6761\u6765\u9075\u5b88\u3002\u9996\u5148\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e0b\uff0c\u89e3\u8026\u7684\u8fc7\u7a0b\u5982\u4f55\u80fd\u591f\u5e26\u6765\u4e00\u4e2a\u66f4\u5f3a\u5065\u7684\u793e\u533a\uff0c\u5728\u7f16\u5199\u3001\u7ef4\u62a4\u548c\u652f\u6301\u5f00\u6e90\u8f6f\u4ef6\u7b49\u5404\u65b9\u9762\u90fd\u5e26\u6765\u66f4\u5927\u7684\u751f\u4ea7\u80fd\u529b\u3002\u5408\u4f5c\uff08collaboration\uff09\u548c\u4e92\u52a9\uff08cooperation\uff09\u7684\u5bf9\u6bd4\u5728DjangoCon2011\u5927\u4f1a\u671f\u95f4\uff0cDavidEaves\u4f5c\u4e86\u57fa\u8c03\u53d1\u8a00\uff0c\u96c4\u8fa9\u5730\u8868\u8fbe\u4e86\u8fd9\u6837\u7684\u60f3\u6cd5\uff0c\u5373\u5c3d\u7ba1\u5408\u4f5c\uff08collaboration\uff09\u548c\u4e92\u52a9\uff08cooperation\uff09\u6709\u7740\u7c7b\u4f3c\u7684\u5b9a\u4e49\uff0c\u4f46\u8fd8\u662f\u6709\u7740\u7ec6\u5fae\u7684\u5dee\u522b\uff1a\u201c\u6211\u8ba4\u4e3a\uff0c\u548c\u4f5c\uff08collaboration\uff09\u4e0d\u540c\u4e8e\u4e92\u52a9\uff08cooperation\uff09\uff0c\u5176\u9700\u8981\u9879\u76ee\u6d89\u53ca\u5230\u7684\u5404\u65b9\u901a\u529b\u6765\u89e3\u51b3\u95ee\u9898\u3002\u201dEaves\u63a5\u7740\u53c8\u7ed9\u51fa\u4e86\u4e00\u6574\u7bc7\u6587\u7ae0\uff0c\u4e13\u95e8\u8bf4\u660eGitHub\u5982\u4f55\u6210\u4e3a\u9769\u65b0\u5f00\u6e90\u7684\u8fd0\u4f5c\u65b9\u5f0f\u2014\u2014\u7279\u522b\u662f\u5728\u793e\u533a\u7ba1\u7406\u65b9\u9762\u7684\u8fd0\u4f5c\u65b9\u5f0f\u7684\u63a8\u52a8\u529b\u3002\u5728\u201cHowGitHubSavedOpenSource\u201d\u8fd9\u7bc7\u6587\u7ae0\uff08\u53c2\u89c1\u53c2\u8003\u8d44\u6599\uff09\u4e2d\uff0cEaves\u8bf4\u5230\uff1a\u201c\u6211\u76f8\u4fe1\uff0c\u5f53\u6350\u732e\u8005\u80fd\u591f\u4ee5\u4f4e\u4ea4\u6613\u6210\u672c\u7684\u4e92\u52a9\u65b9\u5f0f\u6765\u53c2\u4e0e\uff0c\u5e76\u4e14\u9ad8\u4ea4\u6613\u6210\u672c\u7684\u5408\u4f5c\u5c3d\u53ef\u80fd\u7684\u5c11\u65f6\uff0c\u5f00\u6e90\u9879\u76ee\u7684\u8fd0\u4f5c\u80fd\u8fbe\u5230\u6700\u597d\u3002\u5f00\u6e90\u7684\u9ad8\u660e\u4e4b\u5904\u5c31\u5728\u4e8e\u5176\u4e0d\u9700\u8981\u4e00\u4e2a\u5de5\u4f5c\u7ec4\u6765\u5171\u540c\u8ba8\u8bba\u6bcf\u4e2a\u95ee\u9898\u4ee5\u53ca\u89e3\u51b3\u95ee\u9898\uff0c\u800c\u662f\u6070\u6070\u76f8\u53cd\u3002\u201d\u4ed6\u63a5\u7740\u8c08\u5230\u4e86\u5206\u652f\uff08forking\uff09\u7684\u4ef7\u503c\u6240\u5728\uff0c\u4ee5\u53ca\u5176\u5982\u4f55\u901a\u8fc7\u5728\u53c2\u4e0e\u8005\u4e4b\u95f4\u542f\u7528\u4f4e\u6210\u672c\u7684\u4e92\u52a9\u6765\u964d\u4f4e\u5408\u4f5c\u7684\u9ad8\u6210\u672c\uff0c\u8fd9\u4e9b\u53c2\u4e0e\u8005\u80fd\u591f\u5728\u65e0\u9700\u6279\u51c6\u7684\u60c5\u51b5\u4e0b\u63a8\u8fdb\u9879\u76ee\u3002\u8fd9\u79cd\u5206\u652f\u628a\u9700\u8981\u7684\u5408\u4f5c\u6401\u7f6e\u8d77\u6765\uff0c\u76f4\u5230\u89e3\u51b3\u65b9\u6848\u5df2\u7ecf\u505a\u597d\u4e86\u5408\u5e76\u7684\u51c6\u5907\u4e3a\u6b62\uff0c\u5982\u6b64\u6765\u652f\u6301\u66f4\u5feb\u901f\u7684\u52a8\u6001\u7684\u5b9e\u9a8c\u3002\u4f60\u53ef\u4ee5\u4ee5\u7c7b\u4f3c\u7684\u65b9\u5f0f\u6765\u6253\u9020\u81ea\u5df1\u7684\u9879\u76ee\uff0c\u76ee\u6807\u662f\u76f8\u540c\u7684\uff1a\u5728\u7f16\u5199\u3001\u7ba1\u7406\u548c\u652f\u6301\u9879\u76ee\u7684\u6574\u4e2a\u671f\u95f4\uff0c\u589e\u52a0\u4f4e\u6210\u672c\u7684\u4e92\u52a9\uff0c\u540c\u65f6\u5c3d\u53ef\u80fd\u51cf\u5c11\u4ee3\u4ef7\u9ad8\u6602\u7684\u5408\u4f5c\u3002\u7f16\u5199\u4ece\u4e00\u5f20\u767d\u7eb8\u5f00\u59cb\uff0c\u521b\u5efa\u4e00\u4e9b\u65b0\u9c9c\u7684\u4e1c\u897f\uff0c\u5236\u9020\u4e00\u4e9b\u6709\u521b\u610f\u7684\u4e1c\u897f\u2014\u2014\u6216\u4ec5\u4ec5\u662f\u4e00\u4e9b\u4e0e\u73b0\u6709\u7684\u7565\u4e0d\u540c\u7684\u4e1c\u897f\uff0c\u6ca1\u6709\u4ec0\u4e48\u4e8b\u60c5\u6bd4\u5f97\u4e0a\u542f\u52a8\u4e00\u4e2a\u65b0\u7684\u9879\u76ee\u5e76\u548c\u5168\u4e16\u754c\u5206\u4eab\u4f60\u7684\u52aa\u529b\u6210\u679c\u8ba9\u4eba\u611f\u89c9\u66f4\u597d\u7684\u4e86\u3002\u4e0e\u7ef4\u62a4\u4e0d\u540c\uff0c\u5728\u7f16\u5199\u4ee3\u7801\u65f6\uff0c\u4f60\u662f\u5728\u521b\u9020\u65b0\u7684\u4e1c\u897f\u800c\u4e0d\u662f\u5728\u4fee\u6539\u6216\u662f\u4fee\u6b63\u5df2\u6709\u7684\u4e1c\u897f\u3002\u7f16\u5199\u548c\u6784\u601d\u4e00\u4e2a\u9879\u76ee\u9664\u4e86\u662f\u4e00\u95e8\u79d1\u5b66\u4e4b\u5916\u8fd8\u662f\u4e00\u79cd\u827a\u672f\u5f62\u5f0f\uff0c\u5176\u4ed6\u4eba\u4f1a\u770b\u5230\u5b9e\u73b0\u7684\u60c5\u51b5\u5e76\u4f1a\u5bf9\u4ee3\u7801\u7684\u8d28\u91cf\u4f5c\u51fa\u5224\u65ad\uff0c\u800c\u4f60\u7684\u540d\u5b57\u5c06\u4f1a\u6c38\u8fdc\u548c\u5b83\u8fde\u5728\u4e00\u8d77\u3002\u56e0\u6b64\u3002\u4e86\u89e3\u5de5\u5320\u7684\u5fc3\u6001\u4ee5\u53ca\u636e\u6b64\u6765\u7f16\u5199\u8f6f\u4ef6\u7684\u65b9\u6cd5\u662f\u5f88\u91cd\u8981\u7684\u3002\u7f16\u5199\u65b0\u7684\u9879\u76ee\u4e0d\u4ec5\u4ec5\u662f\u610f\u5473\u7740\u751f\u6210\u4ee3\u7801\uff1a\u9879\u76ee\u7684\u521b\u5efa\u548c\u6784\u601d\u5305\u62ec\u4e86\u7f16\u5199\u6709\u7740\u7cbe\u7f8e\u98ce\u683c\u7684\u8ba9\u4eba\u4e50\u4e8e\u9605\u8bfb\u7684\u4ee3\u7801\u3001\u5728\u9002\u5f53\u7684\u65f6\u5019\u4e3a\u9a8c\u8bc1\u9879\u76ee\u4e2d\u7684\u529f\u80fd\u521b\u5efa\u6d4b\u8bd5\u4ee3\u7801\uff0c\u4ee5\u53ca\u5236\u4f5c\u8be6\u5c3d\u7684\u6709\u5e2e\u52a9\u7684\u6587\u6863\u3002\u6280\u827a\u5de5\u827a\uff08craft\uff09\u4e00\u822c\u662f\u6307\u827a\u672f\u884c\u4e1a\u6216\u662f\u804c\u4e1a\u9700\u8981\u7279\u6b8a\u7684\u6280\u80fd\u6765\u624b\u5de5\u5236\u4f5c\u4e00\u4e9b\u4e1c\u897f\uff0c\u901a\u5e38\u662f\u5c0f\u89c4\u6a21\u751f\u4ea7\u7684\u7269\u7406\u5668\u4ef6\u3002\u5c31\u8f6f\u4ef6\u5de5\u5320\u5173\u6ce8\u7684\u66f4\u591a\u7684\u662f\u8d28\u91cf\u800c\u975e\u6570\u91cf\u8fd9\u4e00\u610f\u4e49\u800c\u8a00\uff0c\u4f60\u53ef\u4ee5\u5ef6\u4f38\u8fd9\u4e00\u5b9a\u4e49\uff0c\u628a\u5b83\u5e94\u7528\u5728\u8f6f\u4ef6\u4e0a\u3002\u5bf9\u4e8e\u5de5\u5320\u6765\u8bf4\uff0c\u4ea7\u54c1\u5177\u6709\u5438\u5f15\u529b\u800c\u975e\u53ea\u662f\u529f\u7528\u662f\u5f88\u91cd\u8981\u7684\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5728\u8f6f\u4ef6\u4e2d\uff0c\u5de5\u5320\u8981\u52aa\u529b\u786e\u4fdd\u4ee3\u7801\u7684\u5e72\u51c0\u548c\u7f8e\u89c2\u3001\u5e94\u7528\u7f16\u7a0b\u63a5\u53e3\uff08API\uff09\u7684\u60a6\u76ee\uff0c\u4ee5\u53ca\u6587\u6863\u548c\u6d4b\u8bd5\u7528\u4f8b\u80fd\u591f\u7ed9\u7528\u6237\u5e26\u6765\u662f\u5728\u4f7f\u7528\u575a\u5b9e\u7684\u4ea7\u54c1\u8fdb\u884c\u5de5\u4f5c\u7684\u8fd9\u79cd\u611f\u53d7\u3002\u5728\u8fd9\u79cd\u5fc3\u6001\u4e0b\u5de5\u4f5c\uff0c\u5bf9\u4e8e\u5fc3\u7075\u6765\u8bf4\u662f\u4e00\u79cd\u5956\u8d4f\uff0c\u4e5f\u662f\u5728\u5236\u4f5c\u5f00\u6e90\u8f6f\u4ef6\u65f6\u80fd\u611f\u53d7\u5230\u8bf8\u591a\u4eab\u53d7\u7684\u539f\u56e0\uff1a\u4f60\u4e0d\u518d\u53d7\u56f0\u4e8e\u56de\u5e94\u6700\u540e\u671f\u9650\u3001\u5ba2\u6237\u4ee5\u53ca\u5176\u4ed6\u7684\u5916\u90e8\u9700\u6c42\uff0c\u800c\u662f\u6309\u7167\u81ea\u5df1\u7684\u65f6\u95f4\u6765\uff0c\u4eab\u53d7\u5236\u4f5c\u4e00\u4e9b\u7f8e\u597d\u4e8b\u7269\u7684\u4e50\u8da3\u3002\u4ee3\u7801\u98ce\u683c\u548c\u89c4\u8303\u68c0\u67e5Python\u7684\u589e\u5f3a\u5efa\u8bae\uff08PythonEnhancementProposal\uff0cPEP\uff098\uff08\u53c2\u89c1\u53c2\u8003\u8d44\u6599\uff09\u662f\u4e00\u4e2a\u8be6\u7ec6\u7684Python\u98ce\u683c\u6307\u5357\uff0c\u4f60\u5e94\u8be5\u57fa\u4e8e\u8be5\u6307\u5357\u6765\u5efa\u7acb\u81ea\u5df1\u7684Python\u9879\u76ee\uff08\u6216\u81f3\u5c11\u662f\u57fa\u4e8e\u4f60\u7684\u9879\u76ee\u7684\u98ce\u683c\u6307\u5357\uff09\u3002\u4e0d\u662f\u975e\u8981\u6559\u6761\u5730\u91c7\u7528PEP8\uff0c\u4e0d\u8fc7\u4f60\u7684\u5de5\u4f5c\u6210\u679c\u8d8a\u63a5\u8fd1PEP8\u89c4\u8303\uff0c\u5176\u4ed6\u7684Python\u5f00\u53d1\u8005\u5c31\u8d8a\u5bb9\u6613\u63d0\u4ea4\u4ee5\u6807\u51c6\u7684Python\u793e\u533a\u98ce\u683c\u5b9e\u73b0\u7684\u6574\u6d01\u7684\u8865\u4e01\u5305\u3002\u9664\u4e86\u98ce\u683c\u7684\u4e00\u81f4\u6027\u4e4b\u5916\uff0c\u5728\u6355\u6349\u8bf8\u5982\u7f3a\u5931\u5bfc\u5165\u548c\u672a\u5b9a\u4e49\u53d8\u91cf\u4e00\u7c7b\u7684\u9519\u8bef\u65b9\u9762\uff0c\u4ee3\u7801\u89c4\u8303\uff08linting\uff09\u7684\u6982\u5ff5\u4e5f\u662f\u5f88\u6709\u4f5c\u7528\u7684\u3002\u9664\u4e86\u98ce\u683c\u68c0\u67e5\u5668\u4f1a\u5e2e\u52a9\u4f60\u8fdb\u884c\u68c0\u67e5\uff0c\u627e\u51fa\u8fdd\u80cc\u4e86\u9ed8\u8ba4\u89c4\u5219\u6216\u662f\u81ea\u5b9a\u4e49\u89c4\u5219\u7684\u4ee3\u7801\u4e4b\u5916\uff0c\u73b0\u8fd8\u6709\u4e00\u4e9b\u89c4\u8303\u5668\uff08linter\uff09\u6216\u662f\u4e00\u4e9b\u5de5\u5177\uff0c\u6700\u5e38\u7528\u5230\u7684\u4e00\u4e9b\u5b9e\u7528\u7a0b\u5e8f\u662f\uff1a1.pyflakes2.pylint3.pep8\u8bf7\u53c2\u9605\u53c2\u8003\u8d44\u6599\u83b7\u5f97\u5230\u8fd9\u4e9b\u5de5\u5177\u7684\u94fe\u63a5\u3002\u65e0\u8bba\u4f60\u9009\u62e9\u9075\u4ece\u7684\u662f\u54ea\u4e00\u79cd\u7ea6\u5b9a\uff0c\u5982\u679c\u8fd9\u4e9b\u7ea6\u5b9a\u504f\u79bb\u4e86PEP8\u7684\u8bdd\uff0c\u6211\u5efa\u8bae\u6587\u6863\u5316\u5b83\u4eec\uff0c\u4ee5\u4fbf\u8ba9\u90a3\u4e9b\u60f3\u8981\u4e3a\u4f60\u7684\u9879\u76ee\u505a\u8d21\u732e\u7684\u4eba\u4e86\u89e3\u4f60\u6240\u91c7\u7528\u7684\u7f16\u7801\u98ce\u683c\uff0c\u663e\u5f0f\u7684\u8bf4\u660e\u8981\u597d\u4e8e\u9690\u542b\u4e0d\u8bed\u3002pyflakes\u662f\u4e00\u4e2a\u7279\u522b\u6709\u7528\u7684\u89c4\u8303\u5668\uff0c\u5b83\u5f88\u597d\u5730\u5e73\u8861\u4e86\u6709\u7528\u7684\u529f\u80fd\u3001\u6355\u6349\u548c\u6807\u51fa\u9519\u8bef\u8fd9\u4e24\u65b9\u9762\uff0c\u4e0d\u4f1a\u8fc7\u5ea6\u5730\u63ea\u4f4f\u5fae\u5c0f\u7684\u53e4\u602a\u505a\u6cd5\u4e0d\u653e\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5728\u67d0\u4e2aPython\u9879\u76ee\u4e0a\u4f7f\u7528pyflakes\u7684\u793a\u4f8b\u4f1a\u8bdd\uff1aPython$pyflakeskaleokaleo/forms.py:1:'form'importedbutunusedkaleo/forms.py:4:undefinedname'forms'kaleo/forms.py:6:undefinedname'forms'1234$pyflakeskaleokaleo/forms.py:1:'form'importedbutunusedkaleo/forms.py:4:undefinedname'forms'kaleo/forms.py:6:undefinedname'forms'\u7acb\u523b\uff0c\u8be5\u5de5\u5177\u544a\u8bc9\u4e86\u6211\u6709\u4e00\u4e2aimport\u7684\u8f93\u5165\u9519\u8bef\uff0c\u67e5\u770b\u6587\u4ef6kaleo/forms.py\uff0c\u6211\u53d1\u73b0\uff1aPython;html-script:false]1:fromdjangoimportform2:3:classInviteForm(forms.Form):4:email_address=forms.EmailField()1234;html-script:false]1:fromdjangoimportform2:3:classInviteForm(forms.Form):4:email_address=forms.EmailField()\u4ece\u5185\u5bb9\u4e2d\u53ef\u770b\u51fa\u6765\uff0c\u8981\u628a\u7b2c1\u884c\u6539\u4e3afromdjangoimportforms\u3002\u6d4b\u8bd5\u5728\u9879\u76ee\u4e2d\u63d0\u4f9b\u9a8c\u8bc1\u4ee3\u7801\u6709\u6548\u6027\u7684\u6d4b\u8bd5\u59cb\u7ec8\u662f\u4e00\u4ef6\u597d\u4e8b\uff0c\u4ee5\u6b64\u6765\u9632\u6b62\u56de\u5f52\u88ab\u5ffd\u89c6\uff0c\u4ee5\u53ca\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f5c\u4e3a\u4e00\u79cd\u6587\u6863\u5f62\u5f0f\uff0c\u901a\u8fc7\u9605\u8bfb\u5176\u4e2d\u7684\u6d4b\u8bd5\u4ee3\u7801\u53ef\u4ee5\u8ba9\u5176\u4ed6\u4eba\u77e5\u9053\u4f60\u7684\u5e93API\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u8bdd\u867d\u5982\u6b64\uff0c\u4f46\u6211\u4e0d\u4f1a\u6839\u636e\u9879\u76ee\u662f\u5426\u5305\u62ec\u6d4b\u8bd5\u7528\u4f8b\u6216\u662f\u5b8c\u6210\u8fd9\u4e9b\u6d4b\u8bd5\u7684\u65b9\u5f0f\u6765\u5224\u65ad\u9879\u76ee\u7684\u5b8c\u6574\u6027\u6216\u53ef\u884c\u6027\u3002\u6d4b\u8bd5\u7528\u4f8b\u7684\u5b58\u5728\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u4ee3\u7801\u7684\u8d28\u91cf\uff0c\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2a\u6709\u4e89\u8bae\u7684\u89c2\u70b9\uff0c\u4f46\u6211\u76f8\u4fe1\uff0c\u5b8c\u5168\u6ca1\u6709\u6d4b\u8bd5\u6bd4\u53bb\u6d4b\u4e00\u4e9b\u9519\u8bef\u7684\u4e1c\u897f\u8981\u6765\u5f97\u597d\u4e00\u4e9b\u3002\u5728\u7f16\u5199\u6d4b\u8bd5\u4ee3\u7801\u65f6\uff0c\u8003\u8651\u4e3a\u6bcf\u4e2a\u6d4b\u8bd5\u5355\u5143\u7ed9\u51fa\u5404\u79cd\u8f93\u5165\u662f\u4e00\u4ef6\u5f88\u91cd\u8981\u7684\u4e8b\u60c5\u3002\u6587\u6863\u4e0d\u8fc7\uff0c\u4e0e\u6d4b\u8bd5\u4e0d\u540c\u7684\u662f\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9879\u76ee\u6587\u6863\u7684\u8d28\u91cf\u548c\u5e7f\u535a\u6027\u6765\u5224\u65ad\u9879\u76ee\u7684\u8d28\u91cf\u548c\u6280\u827a\u6c34\u5e73\u3002\u7528\u4e0e\u521b\u4f5c\u548c\u7ef4\u62a4\u4ee3\u7801\u76f8\u540c\u7684\u65b9\u5f0f\u6765\u521b\u4f5c\u548c\u7ef4\u62a4\u7a33\u5b9a\uff0c\u7f16\u5199\u826f\u597d\u7684\u5e76\u4e14\u662f\u6709\u6df1\u5ea6\u7684\u6587\u6863\u4f1a\u9f13\u52b1\u6350\u732e\u8005\u6548\u4eff\u4f60\u7684\u505a\u6cd5\uff0c\u4f7f\u4f60\u7684\u9879\u76ee\u53d8\u5f97\u66f4\u6613\u4e8e\u4e3a\u7528\u6237\u63a5\u53d7\u3002\u4f7f\u7528\u8bf8\u5982Sphinx\u548cReadtheDocs\u4e00\u7c7b\u7684\u5de5\u5177\uff08\u53c2\u89c1\u53c2\u8003\u8d44\u6599\uff09\uff0c\u4f60\u53ef\u4ee5\u53d1\u5e03\u53ca\u65f6\u66f4\u65b0\u7684\u3001\u5916\u89c2\u6781\u4e3a\u4e0d\u9519\u7684\u6587\u6863\u3002\u4f7f\u7528\u8fd9\u4e9b\u5de5\u5177\u662f\u4e00\u4ef6\u7b80\u5355\u7684\u4e8b\u60c5\uff0c\u4e5f\u5c31\u662f\u5199\u4e00\u4e9b\u6587\u5b57\u5185\u5bb9\u5e76\u5e76\u63a8\u9001\u63d0\u4ea4\u3002\u4e60\u60ef\u4e8e\u5c3d\u53ef\u80fd\u5730\u4f7f\u7528commit\u6765\u63d0\u4ea4\u6587\u6863\u7684\u53d8\u66f4\u662f\u5f88\u9002\u5f53\u7684\u4e00\u79cd\u505a\u6cd5\u3002\u7ef4\u62a4\u5728PythonPackageIndex\uff08PyPI\uff09\u4e0a\u53d1\u5e03\u4e86\u7b2c\u4e00\u4e2a\u7248\u672c\uff0c\u5e76\u901a\u8fc7\u5404\u79cdTweet\u6d88\u606f\u548c\u535a\u5ba2\u6587\u7ae0\u516c\u5e03\u8be5\u7248\u672c\u7684\u6d88\u606f\uff0c\u5f00\u59cb\u6709\u4e86\u4e00\u4e9b\u4f7f\u7528\u8005\u4e4b\u540e\uff0c\u4f60\u5c31\u9700\u8981\u5728\u4efb\u4f55\u540e\u7eed\u7684\u521b\u4f5c\u6d3b\u52a8\u4e2d\u52a0\u5165\u7ef4\u62a4\u65b9\u9762\u7684\u8003\u8651\u4e86\u3002\u7528\u6237\u4f1a\u62a5\u544a\u9519\u8bef\u3001\u8981\u6c42\u6dfb\u52a0\u529f\u80fd\u3001\u63d0\u4e00\u4e9b\u6587\u6863\u4e2d\u6ca1\u6709\u660e\u663e\u6d89\u53ca\u5230\u95ee\u9898\uff0c\u8bf8\u5982\u6b64\u7c7b\u7b49\u7b49\u3002\u6709\u4e9b\u4e8b\u60c5\u4f60\u4f1a\u9009\u62e9\u4e0d\u53bb\u5904\u7406\uff0c\u7ed9\u51fa\u4e00\u4e9b\u6743\u53d8\u63aa\u65bd\uff1b\u4f46\u5176\u4ed6\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u4f60\u4f1a\u6253\u7b97\u6216\u662f\u4fee\u6b63\u6587\u6863\u6216\u662f\u4fee\u6b63\u4ee3\u7801\u3002\u4f7f\u7528\u8bf8\u5982git\u4e00\u7c7b\u7684\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff08distributedversioncontrolsystem\uff0cDVCS\uff09\u5e76\u5e38\u5e38\u53d1\u5e03\u5f00\u53d1\u8005\u5305\uff0c\u8fd9\u79cd\u505a\u6cd5\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u7ef4\u62a4\u5de5\u4f5c\uff0c\u4f7f\u4e4b\u53d8\u6210\u4e00\u4ef6\u4e0d\u518d\u662f\u70e6\u4eba\u7684\u4e8b\u60c5\u3002\u6e90\u63a7\u5236\u6709\u8bb8\u591a\u53ef\u7528\u7684DVCS\uff0c\u5176\u4e2d\u5c31\u5305\u62ec\u4e86git\u548cmercurial\uff08\u53c2\u89c1\u53c2\u8003\u8d44\u6599\uff09\uff0c\u65e0\u8bba\u4f60\u9009\u62e9\u7684\u662f\u54ea\u4e00\u4e2a\u63a7\u5236\u7cfb\u7edf\uff0c\u8bf7\u786e\u4fdd\u5b83\u63d0\u4f9b\u4e86\u6e90\u63a7\u5236\u529f\u80fd\uff0c\u8fd9\u79cd\u529f\u80fd\u8d4b\u4e88\u4f60\u8fd9\u6837\u7684\u80fd\u529b\uff0c\u53ef\u4ee5\u8ba9\u7528\u6237\u5206\u652f\u4f60\u7684\u9879\u76ee\uff0c\u7136\u540e\u81ea\u5df1\u6765\u89e3\u51b3\u5176\u4e2d\u7684\u9519\u8bef\u3002\u8fdb\u884c\u53d8\u66f4\u7684\u901f\u7387\u53d6\u51b3\u4e8e\u8bb8\u591a\u56e0\u7d20\uff0c\u4e00\u4e2a\u5173\u952e\u7684\u56e0\u7d20\u662f\u76ee\u6807\u53d7\u4f17\uff08\u4f8b\u5982\uff0c\u5176\u4ed6\u5f00\u53d1\u8005\u3001\u975e\u6280\u672f\u578b\u7684\u6700\u7ec8\u7528\u6237\uff09\u3002\u5982\u679c\u4f60\u7684\u9879\u76ee\u662f\u9488\u5bf9\u5f00\u53d1\u8005\u6765\u7f16\u5199\u7684\uff0c\u90a3\u4e48\u9f13\u52b1\u901a\u8fc7\u62c9\u8bf7\u6c42\uff08pullrequest\uff09\u6765\u62a5\u544a\u9519\u8bef\u6216\u662f\u8bf7\u6c42\u529f\u80fd\u4e4b\u7c7b\u7684\u505a\u6cd5\u53ef\u4ee5\u771f\u6b63\u5730\u505a\u5230\u964d\u4f4e\u7ef4\u62a4\u8005\u7684\u8d1f\u62c5\u3002\u8fd9\u79cd\u505a\u6cd5\u8fd8\u63d0\u5347\u4e86\u793e\u533a\u7684\u5f52\u5c5e\u611f\uff0c\u56e0\u4e3a\u5927\u5bb6\u90fd\u628a\u4ed6\u4eec\u7684\u6350\u732e\u5408\u5e76\u5230\u4e86\u5c06\u6765\u7684\u7248\u672c\u4e2d\u3002\u5f00\u53d1\u6784\u5efa\u4f60\u4f1a\u5e0c\u671b\u5c3d\u65e9\u5730\u4ee5\u53ca\u7ecf\u5e38\u6027\u5730\u53d1\u5e03\u5f00\u53d1\u7248\u672c\uff0c\u5728\u6bcf\u6b21\u6709\u4e00\u7ec4\u9644\u52a0\u7684\u8865\u4e01\u5305\u51fa\u6765\u4e4b\u540e\u90fd\u4f1a\u53d1\u5e03\u7248\u672c\uff0c\u5982\u6b64\u591a\u6b21\u3002\u8fd9\u4f1a\u8ba9\u5176\u4ed6\u5728\u5de5\u4f5c\u4e2d\u4f7f\u7528\u4f60\u7684\u9879\u76ee\u7684\u5f00\u53d1\u8005\u80fd\u591f\u66f4\u5bb9\u6613\u5730\u9488\u5bf9\u9879\u76ee\u4e2d\u7684\u6700\u65b0\u66f4\u6539\u6765\u8fd0\u884c\u3002\u8d8a\u591a\u7684\u4eba\u5728\u4e0d\u540c\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u8fd9\u4e9b\u4ee3\u7801\uff0c\u90a3\u4e48\u4e00\u65e6\u5230\u53d1\u5e03\u4e00\u4e2a\u65b0\u7684\u7a33\u5b9a\u7248\u672c\u7684\u65f6\u5019\uff0c\u8be5\u7248\u672c\u5c31\u4f1a\u6709\u8d8a\u9ad8\u7684\u8d28\u91cf\u3002\u652f\u6301\u652f\u6301\u662f\u548c\u7ef4\u62a4\u76f8\u968f\u7684\uff0c\u53c2\u4e0e\u5e76\u6784\u5efa\u4e00\u4e2a\u7531\u7528\u6237\u548c\u6350\u732e\u8005\u7ec4\u6210\u7684\u793e\u533a\u81f3\u5173\u91cd\u8981\u3002\u8d4b\u4e88\u5176\u4ed6\u4eba\u901a\u8fc7\u652f\u6301\u6765\u5e2e\u52a9\u4f60\u7684\u6743\u5229\uff0c\u4f60\u5c31\u662f\u5728\u589e\u5f3a\u9879\u76ee\u7684\u5168\u9762\u5408\u4f5c\u56e0\u7d20\uff0c\u5728\u9879\u76ee\u7684\u89c4\u6a21\u65b9\u9762\u63d0\u4f9b\u66f4\u597d\u7684\u4f38\u7f29\u6027\uff0c\u4ee5\u53ca\u81ea\u7136\u800c\u7136\u5730\u589e\u52a0\u4e86\u89e3\u51b3\u7528\u6237\u95ee\u9898\u7684\u505a\u6cd5\u3002\u4e3a\u4e86\u8fbe\u5230\u8be5\u76ee\u7684\uff0c\u8bf7\u786e\u4fdd\u63d0\u4f9b\u591a\u79cd\u6e20\u9053\u6765\u589e\u52a0\u63a5\u89e6\u7684\u673a\u4f1a\uff0c\u8ba9\u7528\u6237\u66f4\u52a0\u5bb9\u6613\u5730\u4e0e\u4f60\u63a5\u6d3d\u4ee5\u53ca\u53c2\u4e0e\u5230\u9879\u76ee\u4e2d\u3002\u53ef\u9009\u7684\u6c9f\u901a\u6e20\u9053\u5305\u62ecIRC\u3001\u90ae\u4ef6\u5217\u8868\u4ee5\u53ca\u8bf8\u5982Twitter\u4e00\u7c7b\u7684\u793e\u4ea4\u5a92\u4f53\u6c47\u805a\u70b9\u3002IRC\u5728\u8bf8\u5982freenode\u4e00\u7c7b\u7684IRC\u5e73\u53f0\u4e0a\u8bbe\u7f6e\u4e00\u4e2a\u6c9f\u901a\u9891\u9053\u662f\u4e00\u4e2a\u597d\u4e3b\u610f\uff0c\u6211\u5c31\u4e3a\u81ea\u5df1\u7684\u9879\u76ee\u8bbe\u7f6e\u4e86\u4e00\u4e2a\uff1anashvegas\uff1b\u9664\u4e86\u6211\u4e4b\u5916\u53ea\u6709\u4e00\u4e2a\u7528\u6237\uff0c\u867d\u7136\u8fd9\u79cd\u60c5\u51b5\u5f88\u5c11\u6709\uff0c\u4f46\u6211\u7684IRC\u5ba2\u6237\u7aef\u8fd8\u662f\u6084\u65e0\u58f0\u606f\u5730\u8fd0\u884c\u5728\u540e\u53f0\u3002\u5f53\u5076\u5c14\u6709\u7528\u6237\u63d0\u95ee\u65f6\uff0c\u6211\u80fd\u591f\u53ea\u82b1\u5f88\u5c11\u7684\u4ea4\u6613\u6210\u672c\u5c31\u4ee5\u4e00\u79cd\u6bd4\u901a\u8fc7\u90ae\u4ef6\u8981\u52a8\u6001\u5f97\u591a\u7684\u65b9\u5f0f\u6765\u505a\u51fa\u54cd\u5e94\u3002\u90ae\u4ef6\u5217\u8868\u5bf9\u4e8e\u5927\u591a\u6570\u7684\u5f00\u6e90\u9879\u76ee\u6765\u8bf4\uff0c\u6709\u4e00\u4e2a\u7528\u4e8e\u652f\u6301\u7684\u90ae\u4ef6\u5217\u8868\u5e76\u5728\u6350\u732e\u8005\u4e4b\u95f4\u8ba8\u8bba\u5f00\u53d1\u8fdb\u7a0b\u662f\u4e00\u79cd\u6807\u51c6\u7684\u505a\u6cd5\u3002\u6211\u7684\u5efa\u8bae\u662f\uff0c\u628a\u652f\u6301\u653e\u5728\u4e00\u4e2a\u90ae\u4ef6\u5217\u8868\u4e2d\uff0c\u53ea\u6709\u5728\u5185\u5bb9\u5df2\u7ecf\u53d8\u5f97\u592a\u591a\uff0c\u5f7c\u6b64\u5f71\u54cd\u5230\u4e86\u5404\u5c0f\u7ec4\u7684\u8ba8\u8bba\u7684\u65f6\u5019\uff0c\u624d\u628a\u5b83\u5206\u6210\u201c\u7528\u6237\u201d\u5217\u8868\u548c\u201c\u5f00\u53d1\u201d\u5217\u8868\u3002Twitter\u4e3a\u9879\u76ee\u5f00\u8bbe\u4e00\u4e2aTwitter\u5e10\u6237\uff0c\u5927\u5bb6\u53ef\u4ee5\u5728\u8fd9\u91cc\u4e0e\u4f60\u5feb\u901f\u5730\u8ba8\u8bba\u5de5\u4f5c\u3002Twitter\u5e10\u6237\u8fd8\u662f\u4e00\u4e2a\u53ef\u4ee5\u4f5c\u4e3a\u53d1\u5e03\u9879\u76ee\u6d88\u606f\u7684\u597d\u5730\u65b9\u3002\u7ed3\u675f\u8bed\u7ed9Python\u793e\u533a\u4e2d\u7684\u5f00\u6e90\u8f6f\u4ef6\u7f16\u5199\u5e76\u6350\u732e\u4ee3\u7801\u662f\u4e00\u79cd\u6709\u8da3\u4e14\u6709\u76ca\u7684\u4f53\u9a8c\u3002\u5728\u589e\u52a0\u4f4e\u6210\u672c\u4e92\u52a9\u673a\u4f1a\u7684\u540c\u65f6\u4fa7\u91cd\u4e8e\u51cf\u5c11\u9ad8\u6210\u672c\u7684\u5408\u4f5c\uff0c\u8fd9\u79cd\u505a\u6cd5\u6709\u52a9\u4e8e\u9879\u76ee\u4e0e\u6d3b\u8dc3\u7684\u6350\u732e\u8005\u4e00\u8d77\u6210\u957f\u3002\u5728\u5f00\u6e90\u9886\u57df\uff0c\u5c31\u4f60\u7684\u9879\u76ee\u6765\u8bf4\uff0c\u4f60\u6709\u5927\u628a\u7684\u81ea\u7531\u6765\u6210\u4e3a\u4e00\u4e2a\u80fd\u5de5\u5de7\u5320\uff0c\u5145\u5206\u5229\u7528\u8fd9\u4e00\u70b9\u5e76\u4eab\u53d7\u5b83\u3002\u628a\u5173\u6ce8\u7684\u91cd\u70b9\u653e\u5728\u4e00\u81f4\u7684\u4ee3\u7801\u98ce\u683c\u3001\u575a\u5b9e\u7684\u6d4b\u8bd5\u548c\u7f16\u5199\u826f\u597d\u7684\u6587\u6863\u4e0a\uff0c\u4ee5\u6b64\u6765\u63d0\u9ad8\u9879\u76ee\u88ab\u7528\u6237\u548c\u5176\u4ed6\u5f00\u53d1\u8005\u91c7\u7528\u7684\u51e0\u7387\u3002\u6b64\u5916\uff0c\u8981\u5229\u7528DVCS\uff0c\u5173\u6ce8\u62c9\u8bf7\u6c42\uff0c\u7ecf\u5e38\u6027\u5730\u53d1\u5e03\u5f00\u53d1\u7248\u672c\u3002\u6700\u540e\u8fd8\u6709\u4e00\u70b9\u5c31\u662f\uff0c\u4f60\u53ef\u4ee5\u63d0\u4f9b\u591a\u79cd\u652f\u6301\u6e20\u9053\uff0c\u4ee5\u53ca\u5141\u8bb8\u793e\u533a\u534f\u52a9\u4f60\u63d0\u4f9b\u8fd9\u79cd\u652f\u6301\uff0c\u901a\u8fc7\u8fd9\u4e9b\u505a\u6cd5\u6765\u8fdb\u4e00\u6b65\u63d0\u5347\u9879\u76ee\u7684\u91c7\u7528\u7387\u5e76\u4fc3\u8fdb\u9879\u76ee\u7684\u6210\u957f\u3002\u00a0\u53c2\u8003\u8d44\u65991.\u9605\u8bfbMarkPilgrim\u7684DiveintoPython\uff0c\u83b7\u53d6\u5173\u4e8e\u8be5\u8bed\u8a00\u7684\u4e00\u4e2a\u4ecb\u7ecd\u30022.\u6b32\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u6253\u5305Python\u9879\u76ee\u65b9\u9762\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u8bfb\u4e00\u4e0b\u00a0AguidetoPythonpackaging\uff08PatrickAltman\uff0cdeveloperWorks\uff0c2011\u5e7410\u6708\uff09\u8fd9\u7bc7\u6587\u7ae0\u30023.\u9605\u8bfb\u66f4\u591aDavidEaves\u7684\u535a\u5ba2\u6587\u7ae0\uff1a\u00a0WikisandOpenSource:CollaborativeorCooperative?\u00a0\u548cHowGitHubSavedOpenSource.4.\u5728\u6f5c\u5fc3\u8fdb\u884c\u4e0b\u4e00\u4e2aPython\u9879\u76ee\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u5df2\u4e86\u89e3PEP8\uff0cPython\u4ee3\u7801\u7684\u8fd9\u4e00\u201c\u5b98\u65b9\u201d\u98ce\u683c\u6307\u5357\u30025.\u6d4f\u89c8\u4e00\u4e0b\u6211\u7684\u9879\u76eenashvegas\u7684GitHub\u9875\u9762\uff0c\u4ee5\u6b64\u6765\u505a\u4e3a\u4e00\u4e2a\u4f7f\u7528DVCS\u7684Python\u9879\u76ee\u7684\u4f8b\u5b50\u30026.\u770b\u4e00\u770bPyPI\u30027.\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5206\u5e03\u5f0fPython\u6a21\u5757\u65b9\u9762\u7684\u5185\u5bb9\u30028.\u00a0developerWorks\u5f00\u6e90\u4e13\u533a\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u5173\u4e8e\u5f00\u6e90\u5de5\u5177\u548c\u4f7f\u7528\u5f00\u6e90\u6280\u672f\u65b9\u9762\u7684\u4fe1\u606f\u30029.\u5728Twitter\u4e0a\u5173\u6ce8developerWorks\u300210.\u5728EasyandbeautifuldocumentationwithSphinx\u00a0(AlfredoDeza\uff0cdeveloperWorks\uff0c2011\u5e7411\u6708)\u4e00\u6587\u4e2d\u4e86\u89e3\u66f4\u591a\u5173\u4e8eSphinx\u7684\u5185\u5bb9\u30021\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u4e3a\u4ec0\u4e48Python\u5bf9\u7a0b\u5e8f\u5458\u91cd\u8981\uff1f"], "art_url": ["http://python.jobbole.com/13153/"], "art_create_time": ["2012/02/14"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["FredrikHaard\u6700\u8fd1\u53d1\u8868\u4e86\u4e00\u7bc7\u201c\u4e3a\u4ec0\u4e48Python\u5bf9\u4f60\u5982\u6b64\u91cd\u8981\u201d\u7684\u6587\u7ae0\uff0c\u5f15\u8d77\u4e86\u5f00\u53d1\u8005\u7684\u70ed\u70c8\u8ba8\u8bba\u3002iteye\u00a0\u5bf9\u5176\u7b80\u8981\u7f16\u8bd1\u3002\u6211\u76f8\u4fe1Python\u5bf9\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u5f88\u91cd\u8981\u3002\u73b0\u4eca\u5df2\u7ecf\u8bde\u751f\u4e86\u4e0d\u5c11\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u4eec\u90fd\u6709\u5404\u81ea\u4e0d\u540c\u7684\u7279\u6027\uff1a\u5f3a\u5927\u8005\u5982Lisp\uff0c\u5feb\u901f\u5982C\uff0c\u8fd0\u7528\u5e7f\u6cdb\u5982Java\uff0c\u8bba\u53e4\u602a\u5219\u5982Haskell\u3002\u4e0e\u8fd9\u4e9b\u8bed\u8a00\u4e0d\u540c\uff0cPython\u662f\u4e00\u95e8\u6bd4\u8f83\u4e2d\u5eb8\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u5c06\u8bed\u8a00\u7684\u5f88\u591a\u7279\u6027\u8fdb\u884c\u4e86\u878d\u5408\uff0c\u8fc4\u4eca\u6211\u8fd8\u672a\u6709\u5176\u4ed6\u8bed\u8a00\u5982Python\u8fd9\u822c\u534f\u8c03\u3002\u00a0Python\u77e5\u9053\u5f00\u53d1\u4eba\u5458\u9605\u8bfb\u4ee3\u7801\u6bd4\u7f16\u5199\u5b83\u82b1\u7684\u65f6\u95f4\u8981\u591a\u5f97\u591a\uff0c\u56e0\u6b64\u5c06\u7cbe\u529b\u96c6\u4e2d\u4e8e\u5f15\u5bfc\u5f00\u53d1\u8005\u7f16\u5199\u6613\u8bfb\u7684\u4ee3\u7801\u3002\u5f53\u7136\uff0cPython\u4e5f\u80fd\u5199\u51fa\u4ee4\u4eba\u6666\u6da9\uff08obfuscated\uff09\u7684\u4ee3\u7801\uff0c\u4f46\u662f\u5199\u4ee3\u7801\u6700\u8212\u670d\u7684\u65b9\u5f0f\u8fd8\u662f\uff08\u5047\u5982\u4f60\u4e86\u89e3Python\uff09\u4fdd\u6301\u9002\u5ea6\u7cbe\u70bc\uff0c\u5373\uff1a\u4ee3\u7801\u603b\u80fd\u660e\u786e\u53cd\u6620\u4f60\u7684\u610f\u56fe\u3002\u8fd9\u4e00\u70b9\u5f88\u91cd\u8981\u3002\u4f7f\u7528Python\u5f00\u53d1\u53ef\u8c13\u8f7b\u800c\u6613\u4e3e\u3002\u751a\u81f3\u5305\u62ec\u8bb8\u591a\u5e93\uff0c\u4e5f\u80fd\u7528Python\u5b8c\u7f8e\u7f16\u5199\uff0c\u4fdd\u8bc1\u5176\u6613\u8bfb\u6027\uff08\u4f60\u53ef\u4ee5\u6bd4\u8f83\u4e00\u4e0b\u5176\u4ed6\u8bed\u8a00\u7684\u6846\u67b6\u5b9e\u73b0\uff0c\u6bd4\u5982\u7528Java\u7f16\u5199\u7684Spring\uff09\u3002\u00a0\u540c\u6837Python\u4e5f\u610f\u8bc6\u5230\u5bf9\u5f00\u53d1\u4eba\u5458\u800c\u8a00\u5f00\u53d1\u901f\u5ea6\u7684\u91cd\u8981\u6027\u3002\u6613\u8bfb\u800c\u7cbe\u70bc\u7684\u4ee3\u7801\u53ea\u662f\u4e00\u90e8\u5206\uff0c\u53e6\u4e00\u90e8\u5206\u53d6\u51b3\u4e8e\u5f3a\u5927\u7684\u6784\u9020\u51fd\u6570\uff0c\u53ef\u907f\u514d\u8bb8\u591a\u7e41\u7410\u91cd\u590d\u7684\u4ee3\u7801\u3002\u6b64\u5916\uff0c\u53ef\u7ef4\u62a4\u6027\u4e5f\u662f\u5f88\u91cd\u8981\u7684\u2014\u2014\u4ee3\u7801\u884c\u6570\uff08LineofCode\uff0cLoC\uff09\u5728\u5f88\u591a\u5ea6\u91cf\u7ed3\u679c\u90fd\u4f1a\u4e2d\u51fa\u73b0\uff0c\u6216\u8bb8\u6ca1\u4ec0\u4e48\u7528\uff0c\u4e0d\u8fc7\u5b83\u81f3\u5c11\u8bf4\u660e\u4e86\u4f60\u9700\u8981\u5ba1\u67e5\u591a\u5c11\u4ee3\u7801\uff0c\u9700\u8981\u7406\u89e3\u591a\u5c11\u4ee3\u7801\u5e76\u4ece\u4e2d\u53d1\u73b0\u95ee\u9898\u3002\u6b64\u5916\uff0cFredrikHaard\u8fd8\u63d0\u5230\u4e86Python\u7684\u53e6\u4e00\u4e2a\u4f18\u52bf\u2014\u2014Toolmaking\u3002\u5feb\u901f\u7684\u8f6f\u4ef6\u5f00\u53d1\u901f\u5ea6\u3001\u7b80\u7ec3\u7684\u6280\u5de7\uff08\u5176\u4ed6\u8bed\u8a00\u5f00\u53d1\u4eba\u5458\u4e5f\u80fd\u8f7b\u677e\u638c\u63e1Python\u57fa\u672c\u6280\u5de7\uff09\u3001\u5e9e\u5927\u7684\u6807\u51c6\u5e93\u7ef4\u7cfb\u4e86\u8fd9\u4e00\u4f18\u52bf\u3002\u4efb\u4f55\u9879\u76ee\u90fd\u4f1a\u906d\u9047\u4efb\u52a1\u81ea\u52a8\u5316\u4efb\u52a1\u60c5\u51b5\uff0c\u5728\u6211\u7684\u7ecf\u9a8c\u4e2d\uff0c\u7528Python\u5199\u7684\u81ea\u52a8\u5316\u4efb\u52a1\u6bd4\u5176\u4ed6\u4e3b\u6d41\u8bed\u8a00\u8981\u5feb\u4e00\u4e2a\u6570\u91cf\u7ea7\u2014\u2014\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u4e5f\u662f\u6211\u5b66\u4e60Python\u7684\u539f\u56e0\u3002\u2026\u2026\u00a0\u80fd\u591f\u8f7b\u677e\u5f00\u53d1customtool\u5176\u5b9e\u8fd8\u5305\u542b\u4e86\u53e6\u4e00\u5c42\u610f\u601d\uff0c\u5373\u5f00\u53d1\u548c\u7ef4\u62a4customsoftware\u4e5f\u4f1a\u5f88\u5bb9\u6613\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\uff0c\u5728\u5e9e\u5927\u7684Django\u6210\u4e3a\u6700\u8457\u540d\u7684PythonWeb\u6846\u67b6\u4e4b\u540e\uff0c\u8fd8\u662f\u6709\u5927\u91cf\u6210\u529f\u7684\u5c0f\u5de7\u751a\u81f3\u5fae\u578b\u6846\u67b6\u5b58\u5728\u7684\u539f\u56e0\u3002\u5f53\u4f7f\u7528\u4e00\u95e8\u5f3a\u5927\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u62e5\u6709\u5927\u91cf\u6807\u51c6\u53ca\u7b2c\u4e09\u65b9\u5e93\u7684\u65f6\u5019\uff0c\u4f60\u5e76\u4e0d\u7ecf\u5e38\u9700\u8981\u8003\u8651\u59a5\u534f\uff08trade-off\uff09\uff0c\u800c\u8fd9\u5728\u4f7f\u7528\u8bb8\u591a\u73b0\u6210\u7684\uff08off-the-shelf\uff09\u5927\u578b\u6846\u67b6\u65f6\u662f\u5fc5\u7136\u4f1a\u906d\u9047\u7684\u3002\u6839\u636eFredrik\u7684\u89c2\u70b9\uff0c\u7f16\u5199\u80fd\u591f\u5f88\u597d\u5951\u5408\u5ba2\u6237\u6a21\u578b\u800c\u4e0d\u662f\u4e00\u4e2a\u6846\u67b6\u7684\u8f6f\u4ef6\u8fd9\u70b9\u5f88\u91cd\u8981\u3002\u800c\u8bb8\u591a\u5f00\u53d1\u4eba\u5458\u5c06\u65f6\u95f4\u90fd\u8017\u5728\u4e86\u6846\u67b6\u914d\u7f6e\u4ee5\u53ca\u63a9\u76d6\u5b83\u4eec\u7684\u7f3a\u70b9\u4e0a\uff0c\u800c\u4e0d\u662f\u771f\u6b63\u7684\u5f00\u53d1\u3002\u4f60\u662f\u5982\u4f55\u770b\u7684\u5462\uff1f1\u8d5e\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Google App Engine\u6b63\u5f0f\u652f\u6301Python 2.7"], "art_url": ["http://python.jobbole.com/14174/"], "art_create_time": ["2012/03/02"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["\u6765\u6e90\uff1a\u00a0InfoQ\u6700\u8fd1\uff0cGoogle\u5728\u5176GoogleAppEngine\uff08\u4ee5\u4e0b\u7b80\u79f0GAE\uff09\u5b98\u65b9\u535a\u5ba2\u4e0a\u5ba3\u5e03\u6b63\u5f0f\u652f\u6301Python2.7\uff0c\u5bf9\u5f00\u53d1\u8005\u6765\u8bf4\u53c8\u591a\u4e86\u4e00\u79cd\u9009\u62e9\u3002GAE\u5728\u51e0\u4e2a\u6708\u4e4b\u524d\u5b9e\u9a8c\u6027\u7684\u5f15\u5165\u4e86Python2.7\u73af\u5883\uff0c\u6b64\u540e\u4e00\u76f4\u5728\u4fee\u6539\u7f3a\u9677\u548c\u8fdb\u884c\u4f18\u5316\u3002\u968f\u7740\u8fd9\u6b21Python2.7\u7684\u6b63\u5f0f\u652f\u6301\uff0c\u76f8\u4fe1\u5bf9\u5f00\u53d1\u4eba\u5458\u66f4\u6709\u5e2e\u52a9\uff1a\u9996\u5148\uff0c\u5b83\u652f\u6301\u7a0b\u5e8f\u5229\u7528\u5e76\u53d1\u8bf7\u6c42\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u6784\u5efa\u66f4\u52a0\u7a33\u5b9a\u3001\u9ad8\u6548\u7684\u5e94\u7528\u3002\u5982\u679c\u4f60\u7684\u5e94\u7528\u6ca1\u6709\u5b8c\u5168\u5229\u7528CPU\uff0c\u90a3\u4e48\u4f60\u73b0\u5728\u6709\u673a\u4f1a\u901a\u8fc7\u5e76\u53d1\u8bf7\u6c42\u6765\u964d\u4f4e\u5b9e\u4f8b\u7684\u6570\u91cf\u3002\u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u589e\u52a0\u4e86\u5f00\u53d1\u8005\u8feb\u5207\u9700\u8981\u7684\u5de5\u5177\u5e93\uff0c\u5305\u62ecPIL\u3001NumPy\u548clxml\u7b49\uff0c\u8fd9\u4e9b\u5e93\u5df2\u7ecf\u88ab\u5f00\u53d1\u8005\u63d0\u4e86\u5c06\u8fd1\u4e24\u5343\u6b21\u4e86\u3002\u901a\u8fc7\u4f7f\u7528GAE\uff0c\u7528\u6237\u53ef\u4ee5\u5728Google\u57fa\u7840\u67b6\u6784\u4e0a\u8fd0\u884c\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u76ee\u524dGAE\u652f\u6301\u4f7f\u7528\u51e0\u79cd\u7f16\u7a0b\u8bed\u8a00\u7f16\u5199\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5305\u62ecJava\u3001Python\uff082.5\u548c2.7\uff09\u3001Go\u7b49\u8bed\u8a00\u3002\u76f8\u6bd42.5\u7248\uff0cPython2.7\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u7279\u6027\u548c\u5de5\u5177\u5e93\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u66f4\u52a0\u5f97\u5fc3\u5e94\u624b:1\u3001\u591a\u7ebf\u7a0b\u2014\u20142.5\u4e0d\u652f\u6301\u6b64\u7279\u6027\uff0c\u57282.7\u4e2d\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5229\u7528\u591a\u7ebf\u7a0b\u5e93\u3002\u5355\u4e2a\u8bf7\u6c42\u4e2d\u7684\u6240\u6709\u7ebf\u7a0b\u5fc5\u987b\u5728\u8bf7\u6c42\u65f6\u9650\uff08\u5728\u7ebf\u8bf7\u6c42\u4e3a60\u79d2\uff0c\u79bb\u7ebf\u8bf7\u6c42\u4e3a10\u5206\u949f\uff09\u4e4b\u524d\u5b8c\u6210\u30022\u3001\u5e76\u53d1\u8bf7\u6c42\u2014\u20142.5\u4e0d\u652f\u6301\u6b64\u7279\u6027\uff0c\u73b0\u5728\u5f00\u53d1\u8005\u53ef\u4ee5\u5728GAE\u4e2d\u4fee\u6539\u914d\u7f6e\u6765\u652f\u6301\u5e76\u53d1\u8bf7\u6c42\u30023\u3001\u5b57\u8282\u7801\u4fee\u6539\u2014\u2014\u57282.5\u7248\u672c\u4e2d\u7531\u4e8e\u8fd0\u884c\u65f6\u7684\u9650\u5236\u65e0\u6cd5\u4fee\u6539\u5b57\u8282\u7801\uff0cPython2.7\u4e0d\u518d\u5305\u62ec\u6b64\u9650\u5236\u3002\u751f\u6210\u548c\u5904\u7406\u5b57\u8282\u7801\u7684\u5de5\u5177\u5e93\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u6b63\u5e38\u5de5\u4f5c\u30024\u3001\u5b57\u8282\u7801\u4e0a\u4f20\u2014\u20142.5\u7248\u4e0d\u652f\u6301\uff0cPython2.7\u53ef\u4ee5\u4e0a\u4f20.pyc\u6587\u4ef6\uff0c\u4f46\u662f\u4e0d\u80fd\u548c.py\u4e00\u8d77\uff0c\u4f46\u662f\u53ef\u4ee5\u4e0a\u4f20\u5305\u542b.py\u548c.pyc\u6587\u4ef6\u7684.zip\u6587\u4ef6\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u4e24\u7248\u4e4b\u95f4\u7684\u533a\u522b\u8fd8\u5305\u62ec\u5bf9\u6570\u636e\u5b58\u50a8\u7684\u652f\u6301\u3001Django\u3001JSON\u7b49\u5de5\u5177\u5e93\u7684\u7248\u672c\u66f4\u65b0\u7b49\u7b49\u3002GAE\u7684Python2.7\u8fd0\u884c\u65f6\u73af\u5883\u652f\u6301\u4e00\u4e0b\u7b2c\u4e09\u65b9\u5de5\u5177\u5e93\uff1a1\u3001lxml(2.3)\u2014\u2014lxml\u5de5\u5177\u5e93\u652f\u6301\u5f00\u53d1\u8005\u66f4\u52a0\u65b9\u4fbf\u7684\u5904\u7406XML\u548cHTML\u6587\u6863\uff0c\u5bf9\u4e8eGAE\u4e0aWeb\u670d\u52a1\u7684\u5f00\u53d1\u4eba\u5458\u6765\u8bf4\uff0c\u662f\u4e2a\u5fc5\u4e0d\u53ef\u5c11\u7684\u5de5\u5177\u30022\u3001jinja2(2.6)\u2014\u2014Jinja2\u662f\u57fa\u4e8epython\u7684\u591a\u529f\u80fd\u7684\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u6a21\u677f\u5f15\u64ce\uff0c\u529f\u80fd\u6bd4\u8f83\u7c7b\u4f3c\u4e8e\u4e8ePHP\u7684Smarty\u3001J2EE\u7684Freemarker\u548cVelocity\u3002\u5b83\u652f\u6301Unicode\uff0c\u5e76\u5177\u6709\u96c6\u6210\u7684\u6c99\u7bb1\u6267\u884c\u73af\u5883\uff0cJinja2\u6a21\u677f\u5f15\u64ce\u5f25\u8865\u4e86Django\u81ea\u5e26\u6a21\u677f\u7cfb\u7edf\u8bb8\u591a\u4e0d\u8db3\u3002Python2.7\u4e0d\u518d\u63a8\u8350\u4f7f\u7528WebApp\u6a21\u677f\uff0cjinja2\u6210\u4e3a\u4e86\u66ff\u4ee3\u8005\u30023\u3001MarkupSafe(0.15)\u2014\u2014MarkupSafe\u4e3aXML\u3001HTML\u548cXHTML\u63d0\u4f9b\u4e86\u5b89\u5168\u8f6c\u4e49\u7684\u5b57\u7b26\u4e32\u30024\u3001NumPy(1.6.1)\u2014\u2014Numpy\u63d0\u4f9b\u4e86\u82e5\u5e72\u6570\u636e\u5904\u7406\u7684\u5de5\u5177\u30025\u3001PIL(1.1.7)\u2014\u2014\u5168\u79f0\u4e3aPythonImagingLibrary\uff0c\u63d0\u4f9b\u4e86\u8bb8\u591a\u7528\u4e8e\u5904\u7406\u56fe\u7247\u7684\u51fd\u6570\u30026\u3001PyCrypto(2.3)\u2014\u2014\u5168\u79f0\u4e3aPythonCryptographyToolkit\uff0c\u63d0\u4f9b\u4e86\u8bb8\u591a\u5bc6\u7801\u5b66\u7b97\u6cd5\u51fd\u6570\uff0c\u6bd4\u5982\u968f\u673a\u6570\u751f\u6210\u7b49\u30027\u3001setuptools(0.6c11)\u2014\u2014\u5e2e\u52a9\u5f00\u53d1\u8005\u4e0b\u8f7d\u3001\u6784\u5efa\u3001\u5b89\u88c5\u3001\u5347\u7ea7\u548c\u5378\u8f7dPython\u5305\u30028\u3001WebOb(1.1.1)\u2014\u2014\u5bf9HTTP\u8bf7\u6c42\u548c\u54cd\u5e94\u505a\u4e86\u9762\u5411\u5bf9\u8c61\u7684\u5c01\u88c5\uff0cGAE\u5c06\u5176\u4f5c\u4e3awebapp\u6846\u67b6\u7684\u4e00\u90e8\u5206\u30029\u3001YAML(3.10)\u2014\u2014\u652f\u6301\u53ef\u8bfb\u6027\u9ad8\u7684\u6d88\u606f\u5e8f\u5217\u5316\u6570\u636e\u683c\u5f0f\uff0cGAESDK\u4f7f\u7528YAML\u4f5c\u4e3a\u5176\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u3002\u9664\u4e86Python\u8bed\u8a00\u4e4b\u5916\uff0cGAE\u8fd8\u652f\u6301Java\u548cGo\u8bed\u8a00\uff08\u5b9e\u9a8c\u9636\u6bb5\uff09\uff1aGoogleAppEngine\u652f\u6301Java5\u548cJava6\u3002\u5728AppEngine\u4e0a\u8fd0\u884cJava\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5c06\u4f7f\u7528Java6\u865a\u62df\u673a(JVM)\u548c\u6807\u51c6\u5e93\u8fd0\u884c\u8be5\u5e94\u7528\u7a0b\u5e8f\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u5f00\u53d1\u8005\u5e94\u4f7f\u7528Java6\u7f16\u8bd1\u548c\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u786e\u4fdd\u672c\u5730\u670d\u52a1\u5668\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0eAppEngine\u7c7b\u4f3c\u3002AppEngineSDK\u4e0eJava5\u517c\u5bb9\uff0c\u8fd9\u975e\u5e38\u9002\u7528\u4e8e\u4e0d\u80fd\u65b9\u4fbf\u83b7\u53d6Java6\u7684\u5f00\u53d1\u4eba\u5458\uff08\u5982\u4f7f\u7528MacOSX\u7684\u5f00\u53d1\u4eba\u5458\uff09\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u5c06\u4f7f\u7528Java5\u7f16\u8bd1\u7684\u7c7b\u548cJAR\u4e0a\u4f20\u5230AppEngine\u30021\u8d5e\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python\u5341\u5206\u949f\u5165\u95e8"], "art_url": ["http://python.jobbole.com/23425/"], "art_create_time": ["2012/07/07"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["\u6765\u6e90\uff1alinux\u5927\u68da\u3010\u7b80\u4ecb\u3011Python\u662f\u4e00\u79cd\u52a8\u6001\u89e3\u91ca\u578b\u7684\u7f16\u7a0b\u8bed\u8a00\u3002Python\u53ef\u4ee5\u5728Windows\u3001UNIX\u3001MAC\u7b49\u591a\u79cd\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728Java\u3001.NET\u5f00\u53d1\u5e73\u53f0\u4e0a\u4f7f\u7528\u3002\u3010\u7279\u70b9\u30111Python\u4f7f\u7528C\u8bed\u8a00\u5f00\u53d1\uff0c\u4f46\u662fPython\u4e0d\u518d\u6709C\u8bed\u8a00\u4e2d\u7684\u6307\u9488\u7b49\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u30022Python\u5177\u6709\u5f88\u5f3a\u7684\u9762\u5411\u5bf9\u8c61\u7279\u6027\uff0c\u800c\u4e14\u7b80\u5316\u4e86\u9762\u5411\u5bf9\u8c61\u7684\u5b9e\u73b0\u3002\u5b83\u6d88\u9664\u4e86\u4fdd\u62a4\u7c7b\u578b\u3001\u62bd\u8c61\u7c7b\u3001\u63a5\u53e3\u7b49\u9762\u5411\u5bf9\u8c61\u7684\u5143\u7d20\u30023Python\u4ee3\u7801\u5757\u4f7f\u7528\u7a7a\u683c\u6216\u5236\u8868\u7b26\u7f29\u8fdb\u7684\u65b9\u5f0f\u5206\u9694\u4ee3\u7801\u30024Python\u4ec5\u670931\u4e2a\u4fdd\u7559\u5b57\uff0c\u800c\u4e14\u6ca1\u6709\u5206\u53f7\u3001begin\u3001end\u7b49\u6807\u8bb0\u30025Python\u662f\u5f3a\u7c7b\u578b\u8bed\u8a00\uff0c\u53d8\u91cf\u521b\u5efa\u540e\u4f1a\u5bf9\u5e94\u4e00\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u51fa\u73b0\u5728\u7edf\u4e00\u8868\u8fbe\u5f0f\u4e2d\u7684\u4e0d\u540c\u7c7b\u578b\u7684\u53d8\u91cf\u9700\u8981\u505a\u7c7b\u578b\u8f6c\u6362\u3002\u3010\u642d\u5efa\u5f00\u53d1\u73af\u5883\u30111\u53ef\u4ee5\u5230www.python.org\u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u7136\u540e\u901a\u8fc7configure\u3001make\u3001makeinstall\u8fdb\u884c\u5b89\u88c5\u30022\u4e5f\u53ef\u4ee5\u5230www.activestate.com\u53bb\u4e0b\u8f7dActivePython\u7ec4\u4ef6\u5305\u3002(ActivePython\u662f\u5bf9Python\u6838\u5fc3\u548c\u5e38\u7528\u6a21\u5757\u7684\u4e8c\u8fdb\u5236\u5305\u88c5\uff0c\u5b83\u662fActiveState\u516c\u53f8\u53d1\u5e03\u7684Python\u5f00\u53d1\u73af\u5883\u3002ActivePython\u4f7f\u5f97Python\u7684\u5b89\u88c5\u66f4\u52a0\u5bb9\u6613\uff0c\u5e76\u4e14\u53ef\u4ee5\u5e94\u7528\u5728\u5404\u79cd\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u3002ActivePython\u5305\u542b\u4e86\u4e00\u4e9b\u5e38\u7528\u7684Python\u6269\u5c55\uff0c\u4ee5\u53caWindows\u73af\u5883\u7684\u7f16\u7a0b\u63a5\u53e3)\u3002\u5bf9ActivePython\u6765\u8bf4\uff0c\u5982\u679c\u4f60\u662fwindows\u7528\u6237\uff0c\u4e0b\u8f7dmsi\u5305\u5b89\u88c5\u5373\u53ef\uff1b\u5982\u679c\u4f60\u662fUnix\u7528\u6237\uff0c\u4e0b\u8f7dtar.gz\u5305\u76f4\u63a5\u89e3\u538b\u5373\u53ef\u30023Python\u7684IDE\uff0c\u5305\u62ecPythonWin\u3001Eclipse+PyDev\u63d2\u4ef6\u3001Komodo\u3001EditPlus\u3010\u7248\u672c\u3011python2\u4e0epython3\u662f\u76ee\u524d\u4e3b\u8981\u7684\u4e24\u4e2a\u7248\u672c\u3002\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528python2\uff1a1\u4f60\u65e0\u6cd5\u5b8c\u5168\u63a7\u5236\u4f60\u5373\u5c06\u90e8\u7f72\u7684\u73af\u5883\u65f6\uff1b2\u4f60\u9700\u8981\u4f7f\u7528\u4e00\u4e9b\u7279\u5b9a\u7684\u7b2c\u4e09\u65b9\u5305\u6216\u6269\u5c55\u65f6\uff1bpython3\u662f\u5b98\u65b9\u63a8\u8350\u7684\u4e14\u662f\u672a\u6765\u5168\u529b\u652f\u6301\u7684\u7248\u672c\uff0c\u76ee\u524d\u5f88\u591a\u529f\u80fd\u63d0\u5347\u4ec5\u5728python3\u7248\u672c\u4e0a\u8fdb\u884c\u3002\u3010helloworld\u30111\u521b\u5efahello.py2\u7f16\u5199\u7a0b\u5e8f\uff1aPythonif__name__==\\'__main__\\':print\"helloword\"12if__name__==\\'__main__\\':\u00a0\u00a0\u00a0\u00a0print\"helloword\"3\u8fd0\u884c\u7a0b\u5e8f\uff1aPythonpython./hello.py1python./hello.py\u3010\u6ce8\u91ca\u30111\u65e0\u8bba\u662f\u884c\u6ce8\u91ca\u8fd8\u662f\u6bb5\u6ce8\u91ca\uff0c\u5747\u4ee5#\u52a0\u4e00\u4e2a\u7a7a\u683c\u6765\u6ce8\u91ca\u30022\u5982\u679c\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u4e2d\u6587\u6ce8\u91ca\uff0c\u5fc5\u987b\u5728python\u6587\u4ef6\u7684\u6700\u524d\u9762\u52a0\u4e0a\u5982\u4e0b\u6ce8\u91ca\u8bf4\u660e\uff1aPython#-*-coding:UTF-8-*-1#-*-coding:UTF-8-*-3\u5982\u4e0b\u6ce8\u91ca\u7528\u4e8e\u6307\u5b9a\u89e3\u91ca\u5668Python#!/usr/bin/python1#!/usr/bin/python\u3010\u6587\u4ef6\u7c7b\u578b\u30111Python\u7684\u6587\u4ef6\u7c7b\u578b\u5206\u4e3a3\u79cd\uff0c\u5373\u6e90\u4ee3\u7801\u3001\u5b57\u8282\u4ee3\u7801\u548c\u4f18\u5316\u4ee3\u7801\u3002\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\uff0c\u4e0d\u9700\u8981\u8fdb\u884c\u7f16\u8bd1\u6216\u8fde\u63a5\u30022\u6e90\u4ee3\u7801\u4ee5.py\u4e3a\u6269\u5c55\u540d\uff0c\u7531python\u6765\u8d1f\u8d23\u89e3\u91ca\uff1b3\u6e90\u6587\u4ef6\u7ecf\u8fc7\u7f16\u8bd1\u540e\u751f\u6210\u6269\u5c55\u540d\u4e3a.pyc\u7684\u6587\u4ef6\uff0c\u5373\u7f16\u8bd1\u8fc7\u7684\u5b57\u8282\u6587\u4ef6\u3002\u8fd9\u79cd\u6587\u4ef6\u4e0d\u80fd\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\u3002pyc\u6587\u4ef6\u662f\u548c\u5e73\u53f0\u65e0\u5173\u7684\uff0c\u53ef\u4ee5\u5728\u5927\u90e8\u5206\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\u3002\u5982\u4e0b\u8bed\u53e5\u53ef\u4ee5\u7528\u6765\u4ea7\u751fpyc\u6587\u4ef6\uff1aPythonimportpy_compilepy_compile.compile(\u2018hello.py\u2019)12importpy_compilepy_compile.compile(\u2018hello.py\u2019)4\u7ecf\u8fc7\u4f18\u5316\u7684\u6e90\u6587\u4ef6\u4f1a\u4ee5.pyo\u4e3a\u540e\u7f00\uff0c\u5373\u4f18\u5316\u4ee3\u7801\u3002\u5b83\u4e5f\u4e0d\u80fd\u76f4\u63a5\u7528\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\uff0c\u5982\u4e0b\u547d\u4ee4\u53ef\u7528\u6765\u751f\u6210pyo\u6587\u4ef6\uff1aPythonpython-O-mpy_compliehello.py1python-O-mpy_compliehello.py\u3010\u53d8\u91cf\u30111python\u4e2d\u7684\u53d8\u91cf\u4e0d\u9700\u8981\u58f0\u660e\uff0c\u53d8\u91cf\u7684\u8d4b\u503c\u64cd\u4f5c\u5373\u4f7f\u53d8\u91cf\u58f0\u660e\u548c\u5b9a\u4e49\u7684\u8fc7\u7a0b\u30022python\u4e2d\u4e00\u6b21\u65b0\u7684\u8d4b\u503c\uff0c\u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\u3002\u5373\u4f7f\u53d8\u91cf\u7684\u540d\u79f0\u76f8\u540c\uff0c\u53d8\u91cf\u7684\u6807\u8bc6\u5e76\u4e0d\u76f8\u540c\u3002\u7528id()\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u53d8\u91cf\u6807\u8bc6\uff1aPythonx=1printid(x)x=2printid(x)1234x=1printid(x)x=2printid(x)3\u5982\u679c\u53d8\u91cf\u6ca1\u6709\u8d4b\u503c\uff0c\u5219python\u8ba4\u4e3a\u8be5\u53d8\u91cf\u4e0d\u5b58\u57284\u5728\u51fd\u6570\u4e4b\u5916\u5b9a\u4e49\u7684\u53d8\u91cf\u90fd\u53ef\u4ee5\u79f0\u4e3a\u5168\u5c40\u53d8\u91cf\u3002\u5168\u5c40\u53d8\u91cf\u53ef\u4ee5\u88ab\u6587\u4ef6\u5185\u90e8\u7684\u4efb\u4f55\u51fd\u6570\u548c\u5916\u90e8\u6587\u4ef6\u8bbf\u95ee\u30025\u5168\u5c40\u53d8\u91cf\u5efa\u8bae\u5728\u6587\u4ef6\u7684\u5f00\u5934\u5b9a\u4e49\u30026\u4e5f\u53ef\u4ee5\u628a\u5168\u5c40\u53d8\u91cf\u653e\u5230\u4e00\u4e2a\u4e13\u95e8\u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u901a\u8fc7import\u6765\u5f15\u7528\uff1agl.py\u6587\u4ef6\u4e2d\u5185\u5bb9\u5982\u4e0b\uff1aPython_a=1_b=212_a=1_b=2use_global.py\u4e2d\u5f15\u7528\u5168\u5c40\u53d8\u91cf\uff1aPythonimportgldeffun():printgl._aprintgl._bfun()12345importgldeffun():\u00a0\u00a0printgl._a\u00a0\u00a0printgl._bfun()\u3010\u5e38\u91cf\u3011python\u4e2d\u6ca1\u6709\u63d0\u4f9b\u5b9a\u4e49\u5e38\u91cf\u7684\u4fdd\u7559\u5b57\u3002\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\u4e00\u4e2a\u5e38\u91cf\u7c7b\u6765\u5b9e\u73b0\u5e38\u91cf\u7684\u529f\u80fd\u3002Pythonclass_const:classConstError(TypeError):passdef__setattr__(self,name,vlaue):ifself.__dict__.has_key(name):raiseself.ConstError,\u201cCan\u2019trebindconst(%s)\u201d%nameself.__dict__[name]=valueimportsyssys.modules[__name__]=_const()12345678class_const:\u00a0\u00a0classConstError(TypeError):pass\u00a0\u00a0\u00a0\u00a0def__setattr__(self,name,vlaue):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifself.__dict__.has_key(name):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0raiseself.ConstError,\u201cCan\u2019trebindconst(%s)\u201d%name\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.__dict__[name]=valueimportsyssys.modules[__name__]=_const()\u3010\u6570\u636e\u7c7b\u578b\u30111python\u7684\u6570\u5b57\u7c7b\u578b\u5206\u4e3a\u6574\u578b\u3001\u957f\u6574\u578b\u3001\u6d6e\u70b9\u578b\u3001\u5e03\u5c14\u578b\u3001\u590d\u6570\u7c7b\u578b\u30022python\u6ca1\u6709\u5b57\u7b26\u7c7b\u578b3python\u5185\u90e8\u6ca1\u6709\u666e\u901a\u7c7b\u578b\uff0c\u4efb\u4f55\u7c7b\u578b\u90fd\u662f\u5bf9\u8c61\u30024\u5982\u679c\u9700\u8981\u67e5\u770b\u53d8\u91cf\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528type\u7c7b\uff0c\u8be5\u7c7b\u53ef\u4ee5\u8fd4\u56de\u53d8\u91cf\u7684\u7c7b\u578b\u6216\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\u30025python\u67093\u79cd\u8868\u793a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u65b9\u5f0f\uff0c\u5373\u5355\u5f15\u53f7\u3001\u53cc\u5f15\u53f7\u3001\u4e09\u5f15\u53f7\u3002\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u7684\u4f5c\u7528\u662f\u76f8\u540c\u7684\u3002python\u7a0b\u5e8f\u5458\u66f4\u559c\u6b22\u7528\u5355\u5f15\u53f7\uff0cC/Java\u7a0b\u5e8f\u5458\u5219\u4e60\u60ef\u4f7f\u7528\u53cc\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\u3002\u4e09\u5f15\u53f7\u4e2d\u53ef\u4ee5\u8f93\u5165\u5355\u5f15\u53f7\u3001\u53cc\u5f15\u53f7\u6216\u6362\u884c\u7b49\u5b57\u7b26\u3002\u3010\u8fd0\u7b97\u7b26\u548c\u8868\u8fbe\u5f0f\u30111python\u4e0d\u652f\u6301\u81ea\u589e\u8fd0\u7b97\u7b26\u548c\u81ea\u51cf\u8fd0\u7b97\u7b26\u3002\u4f8b\u5982i++/i-\u662f\u9519\u8bef\u7684\uff0c\u4f46i+=1\u662f\u53ef\u4ee5\u7684\u300221/2\u5728python2.5\u4e4b\u524d\u4f1a\u7b49\u4e8e0.5\uff0c\u5728python2.5\u4e4b\u540e\u4f1a\u7b49\u4e8e0\u30023\u4e0d\u7b49\u4e8e\u4e3a!=\u6216<>4\u7b49\u4e8e\u7528==\u8868\u793a5\u903b\u8f91\u8868\u8fbe\u5f0f\u4e2dand\u8868\u793a\u903b\u8f91\u4e0e\uff0cor\u8868\u793a\u903b\u8f91\u6216\uff0cnot\u8868\u793a\u903b\u8f91\u975e\u3010\u63a7\u5236\u8bed\u53e5\u30111\u6761\u4ef6\u8bed\u53e5\uff1aPythonif(\u8868\u8fbe\u5f0f):\u8bed\u53e51else:\u8bed\u53e521234if(\u8868\u8fbe\u5f0f):\u00a0\u00a0\u00a0\u00a0\u8bed\u53e51else:\u00a0\u00a0\u00a0\u00a0\u8bed\u53e522\u6761\u4ef6\u8bed\u53e5\uff1aPythonif(\u8868\u8fbe\u5f0f):\u8bed\u53e51elif(\u8868\u8fbe\u5f0f):\u8bed\u53e52\u2026elif(\u8868\u8fbe\u5f0f):\u8bed\u53e5nelse:\u8bed\u53e5m123456789if(\u8868\u8fbe\u5f0f):\u00a0\u00a0\u8bed\u53e51elif(\u8868\u8fbe\u5f0f):\u00a0\u00a0\u8bed\u53e52\u2026elif(\u8868\u8fbe\u5f0f):\u00a0\u00a0\u8bed\u53e5nelse:\u00a0\u00a0\u8bed\u53e5m3\u6761\u4ef6\u5d4c\u5957\uff1aPythonif(\u8868\u8fbe\u5f0f1):if(\u8868\u8fbe\u5f0f2):\u8bed\u53e51elif(\u8868\u8fbe\u5f0f3):\u8bed\u53e52\u2026else:\u8bed\u53e53elif(\u8868\u8fbe\u5f0fn):\u2026else:\u2026123456789101112if(\u8868\u8fbe\u5f0f1):\u00a0\u00a0if(\u8868\u8fbe\u5f0f2):\u00a0\u00a0\u00a0\u00a0\u8bed\u53e51\u00a0\u00a0elif(\u8868\u8fbe\u5f0f3):\u00a0\u00a0\u00a0\u00a0\u8bed\u53e52\u00a0\u00a0\u2026\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u8bed\u53e53elif(\u8868\u8fbe\u5f0fn):\u00a0\u00a0\u2026else:\u00a0\u00a0\u20264python\u672c\u8eab\u6ca1\u6709switch\u8bed\u53e5\u30025\u5faa\u73af\u8bed\u53e5\uff1aPythonwhile(\u8868\u8fbe\u5f0f):\u2026else:\u20261234while(\u8868\u8fbe\u5f0f):\u00a0\u00a0\u2026else:\u00a0\u00a0\u20266\u5faa\u73af\u8bed\u53e5\uff1aPythonfor\u53d8\u91cfin\u96c6\u5408:\u2026else:\u20261234for\u53d8\u91cfin\u96c6\u5408:\u00a0\u00a0\u2026else:\u00a0\u00a0\u20267python\u4e0d\u652f\u6301\u7c7b\u4f3cc\u7684for(i=0;i<5;i++)\u8fd9\u6837\u7684\u5faa\u73af\u8bed\u53e5\uff0c\u4f46\u53ef\u4ee5\u501f\u52a9range\u6a21\u62df\uff1aPythonforxinrange(0,5,2):printx12forxinrange(0,5,2):\u00a0\u00a0\u00a0\u00a0printx\u3010\u6570\u7ec4\u76f8\u5173\u30111\u5143\u7ec4(tuple)\uff1apython\u4e2d\u4e00\u79cd\u5185\u7f6e\u7684\u6570\u636e\u7ed3\u6784\u3002\u5143\u7ec4\u7531\u4e0d\u540c\u7684\u5143\u7d20\u7ec4\u6210\uff0c\u6bcf\u4e2a\u5143\u7d20\u53ef\u4ee5\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u5982\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u751a\u81f3\u5143\u7d20\u3002\u5143\u7ec4\u662f\u5199\u4fdd\u62a4\u7684\uff0c\u5373\u5143\u7ec4\u521b\u5efa\u4e4b\u540e\u4e0d\u80fd\u518d\u4fee\u6539\u3002\u5143\u7ec4\u5f80\u5f80\u4ee3\u8868\u4e00\u884c\u6570\u636e\uff0c\u800c\u5143\u7ec4\u4e2d\u7684\u5143\u7d20\u4ee3\u8868\u4e0d\u540c\u7684\u6570\u636e\u9879\u3002\u53ef\u4ee5\u628a\u5143\u7ec4\u770b\u505a\u4e0d\u53ef\u4fee\u6539\u7684\u6570\u7ec4\u3002\u521b\u5efa\u5143\u7ec4\u793a\u4f8b\u5982\u4e0b\uff1aPythontuple_name=(\u201capple\u201d,\u201dbanana\u201d,\u201dgrape\u201d,\u201dorange\u201d)1tuple_name=(\u201capple\u201d,\u201dbanana\u201d,\u201dgrape\u201d,\u201dorange\u201d)2\u5217\u8868(list)\uff1a\u5217\u8868\u548c\u5143\u7ec4\u76f8\u4f3c\uff0c\u4e5f\u7531\u4e00\u7ec4\u5143\u7d20\u7ec4\u6210\uff0c\u5217\u8868\u53ef\u4ee5\u5b9e\u73b0\u6dfb\u52a0\u3001\u5220\u9664\u548c\u67e5\u627e\u64cd\u4f5c\uff0c\u5143\u7d20\u7684\u503c\u53ef\u4ee5\u88ab\u4fee\u6539\u3002\u5217\u8868\u662f\u4f20\u7edf\u610f\u4e49\u4e0a\u7684\u6570\u7ec4\u3002\u5217\u8868\u521b\u5efa\u793a\u4f8b\u5982\u4e0b\uff1aPythonlist=[\u201capple\u201d,\u201dbanana\u201d,\u201dgrage\u201d,\u201dorange\u201d]1list=[\u201capple\u201d,\u201dbanana\u201d,\u201dgrage\u201d,\u201dorange\u201d]\u53ef\u4ee5\u4f7f\u7528append\u65b9\u6cd5\u6765\u5728\u5c3e\u90e8\u8ffd\u52a0\u5143\u7d20\uff0c\u4f7f\u7528remove\u6765\u5220\u9664\u5143\u7d20\u30023\u5b57\u5178(dictionary)\uff1a\u7531\u952e-\u503c\u5bf9\u7ec4\u6210\u7684\u96c6\u5408\uff0c\u5b57\u5178\u4e2d\u7684\u503c\u901a\u8fc7\u952e\u6765\u5f15\u7528\u3002\u952e\u548c\u503c\u4e4b\u95f4\u7528\u5192\u53f7\u9694\u5f00\uff0c\u952e-\u503c\u5bf9\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00\uff0c\u5e76\u4e14\u88ab\u5305\u542b\u5728\u4e00\u5bf9\u82b1\u62ec\u53f7\u4e2d\u3002\u521b\u5efa\u793a\u4f8b\u5982\u4e0b\uff1aPythondict={\u201ca\u201d:\u201dapple\u201d,\u201cb\u201d:\u201dbanana\u201d,\u201cg\u201d:\u201dgrage\u201d,\u201co\u201d:\u201dorange\u201d}1dict={\u201ca\u201d:\u201dapple\u201d,\u201cb\u201d:\u201dbanana\u201d,\u201cg\u201d:\u201dgrage\u201d,\u201co\u201d:\u201dorange\u201d}4\u5e8f\u5217\uff1a\u5e8f\u5217\u662f\u5177\u6709\u7d22\u5f15\u548c\u5207\u7247\u80fd\u529b\u7684\u96c6\u5408\u3002\u5143\u7ec4\u3001\u5217\u8868\u548c\u5b57\u7b26\u4e32\u90fd\u5c5e\u4e8e\u5e8f\u5217\u3002\u3010\u51fd\u6570\u76f8\u5173\u30111python\u7a0b\u5e8f\u7531\u5305(package)\u3001\u6a21\u5757(module)\u548c\u51fd\u6570\u7ec4\u6210\u3002\u5305\u662f\u7531\u4e00\u7cfb\u5217\u6a21\u5757\u7ec4\u6210\u7684\u96c6\u5408\u3002\u6a21\u5757\u662f\u5904\u7406\u67d0\u4e00\u7c7b\u95ee\u9898\u7684\u51fd\u6570\u548c\u7c7b\u7684\u96c6\u5408\u30022\u5305\u5c31\u662f\u4e00\u4e2a\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u7684\u5de5\u5177\u7bb1\u30023\u5305\u5fc5\u987b\u542b\u6709\u4e00\u4e2a__init__.py\u6587\u4ef6\uff0c\u5b83\u7528\u4e8e\u6807\u8bc6\u5f53\u524d\u6587\u4ef6\u5939\u662f\u4e00\u4e2a\u5305\u30024python\u7684\u7a0b\u5e8f\u662f\u7531\u4e00\u4e2a\u4e2a\u6a21\u5757\u7ec4\u6210\u7684\u3002\u6a21\u5757\u628a\u4e00\u7ec4\u76f8\u5173\u7684\u51fd\u6570\u6216\u4ee3\u7801\u7ec4\u7ec7\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u4e00\u4e2a\u6587\u4ef6\u5373\u662f\u4e00\u4e2a\u6a21\u5757\u3002\u6a21\u5757\u7531\u4ee3\u7801\u3001\u51fd\u6570\u548c\u7c7b\u7ec4\u6210\u3002\u5bfc\u5165\u6a21\u5757\u4f7f\u7528import\u8bed\u53e5\u30025\u5305\u7684\u4f5c\u7528\u662f\u5b9e\u73b0\u7a0b\u5e8f\u7684\u91cd\u7528\u30026\u51fd\u6570\u662f\u4e00\u6bb5\u53ef\u4ee5\u91cd\u590d\u591a\u6b21\u8c03\u7528\u7684\u4ee3\u7801\uff0c\u51fd\u6570\u5b9a\u4e49\u793a\u4f8b\u5982\u4e0b\uff1aPythondefarithmetic(x,y,operator):result={\u201c+\u201d:x+y,\u201c-\u201c:x-y,\u201c*\u201d:x*y,\u201c/\u201d:x/y}1234567defarithmetic(x,y,operator):\u00a0\u00a0result={\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u201c+\u201d:x+y,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u201c-\u201c:x-y,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u201c*\u201d:x*y,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u201c/\u201d:x/y\u00a0\u00a0}7\u51fd\u6570\u8fd4\u56de\u503c\u53ef\u4ee5\u7528return\u6765\u63a7\u5236\u3002\u3010\u5b57\u7b26\u4e32\u76f8\u5173\u30111\u683c\u5f0f\u5316\u8f93\u51fa\uff1aPythonformat=\u201d%s%d\u201d%(str1,num)printformat12format=\u201d%s%d\u201d%(str1,num)printformat2\u7528+\u8fdb\u884c\u5b57\u7b26\u4e32\u7684\u5408\u5e76\uff1aPythonstr1=\u201dhello\u201dstr2=\u201dworld\u201dresult=str1+str2123str1=\u201dhello\u201dstr2=\u201dworld\u201dresult=str1+str23\u5b57\u7b26\u4e32\u622a\u53d6\u53ef\u4ee5\u901a\u8fc7\u7d22\u5f15/\u5207\u7247\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7split\u51fd\u6570\u30024\u901a\u8fc7\u5207\u7247\u622a\u53d6\u5b57\u7b26\u4e32\uff1aPythonword=\u201dworld\u201dprintword[0:3]12word=\u201dworld\u201dprintword[0:3]5python\u4f7f\u7528==\u548c!=\u6765\u8fdb\u884c\u5b57\u7b26\u4e32\u6bd4\u8f83\u3002\u5982\u679c\u6bd4\u8f83\u7684\u4e24\u4e2a\u53d8\u91cf\u7684\u7c7b\u578b\u4e0d\u76f8\u540c\uff0c\u90a3\u4e48\u7ed3\u679c\u5fc5\u7136\u4e3a\u4e0d\u540c\u3002\u3010\u6587\u4ef6\u5904\u7406\u30111\u7b80\u5355\u5904\u7406\u6587\u4ef6\uff1aPythoncontext=\u201dhello,world\u201df=file(\u201chello.txt\u201d,\u2019w\u2019)f.write(context);f.close()1234context=\u201dhello,world\u201df=file(\u201chello.txt\u201d,\u2019w\u2019)f.write(context);f.close()2\u8bfb\u53d6\u6587\u4ef6\u53ef\u4ee5\u4f7f\u7528readline()\u51fd\u6570\u3001readlines()\u51fd\u6570\u548cread\u51fd\u6570\u30023\u5199\u5165\u6587\u4ef6\u53ef\u4ee5\u4f7f\u7528write()\u3001writelines()\u51fd\u6570\u3010\u5bf9\u8c61\u548c\u7c7b\u30111python\u7528class\u4fdd\u7559\u5b57\u6765\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u7c7b\u540d\u7684\u9996\u5b57\u7b26\u8981\u5927\u5199\u3002\u5f53\u7a0b\u5e8f\u5458\u9700\u8981\u521b\u5efa\u7684\u7c7b\u578b\u4e0d\u80fd\u7528\u7b80\u5355\u7c7b\u578b\u6765\u8868\u793a\u65f6\uff0c\u5c31\u9700\u8981\u5b9a\u4e49\u7c7b\uff0c\u7136\u540e\u5229\u7528\u5b9a\u4e49\u7684\u7c7b\u521b\u5efa\u5bf9\u8c61\u3002\u5b9a\u4e49\u7c7b\u793a\u4f8b\uff1aPythonclassFruit:defgrow(self):print\u201cFruitgrow\u201d123classFruit:\u00a0\u00a0\u00a0\u00a0defgrow(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\u201cFruitgrow\u201d2\u5f53\u4e00\u4e2a\u5bf9\u8c61\u88ab\u521b\u5efa\u540e\uff0c\u5305\u542b\u4e86\u4e09\u65b9\u9762\u7684\u7279\u6027\uff0c\u5373\u5bf9\u8c61\u7684\u53e5\u67c4\u3001\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u521b\u5efa\u5bf9\u8c61\u7684\u65b9\u6cd5\uff1aPythonfruit=Fruit()fruit.grow()12fruit=Fruit()fruit.grow()3python\u6ca1\u6709\u4fdd\u62a4\u7c7b\u578b\u7684\u4fee\u9970\u7b264\u7c7b\u7684\u65b9\u6cd5\u4e5f\u5206\u4e3a\u516c\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u65b9\u6cd5\u3002\u79c1\u6709\u51fd\u6570\u4e0d\u80fd\u88ab\u8be5\u7c7b\u4e4b\u5916\u7684\u51fd\u6570\u8c03\u7528\uff0c\u79c1\u6709\u7684\u65b9\u6cd5\u4e5f\u4e0d\u80fd\u88ab\u5916\u90e8\u7684\u7c7b\u6216\u51fd\u6570\u8c03\u7528\u30025python\u4f7f\u7528\u51fd\u6570\u201dstaticmethod()\u201c\u6216\u201d@staticmethod\u201c\u6307\u4ee4\u7684\u65b9\u6cd5\u628a\u666e\u901a\u7684\u51fd\u6570\u8f6c\u6362\u4e3a\u9759\u6001\u65b9\u6cd5\u3002\u9759\u6001\u65b9\u6cd5\u76f8\u5f53\u4e8e\u5168\u5c40\u51fd\u6570\u30026python\u7684\u6784\u9020\u51fd\u6570\u540d\u4e3a__init__\uff0c\u6790\u6784\u51fd\u6570\u540d\u4e3a__del__7\u7ee7\u627f\u7684\u4f7f\u7528\u65b9\u6cd5\uff1aPythonclassApple(Fruit):def\u202612classApple(Fruit):\u00a0\u00a0def\u2026\u3010\u8fde\u63a5mysql\u30111\u7528MySQLdb\u6a21\u5757\u64cd\u4f5cMySQL\u6570\u636e\u5e93\u975e\u5e38\u65b9\u4fbf\u3002\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1aPythonimportos,sysimportMySQLdbtry:connMySQLdb.connect(host=\u2019localhost\u2019,user=\u2019root\u2019,passwd=\u2019\u2019,db=\u2019address\u2019exceptException,e:printesys.exit()cursor=conn.cursor()sql=\u2019insertintoaddress(name,address)values(%s,%s)\u2019value=((\u201czhangsan\u201d,\u201dhaidian\u201d),(\u201clisi\u201d,\u201dhaidian\u201d))trycursor.executemany(sql,values)exceptException,e:printesql=\u201dselect*fromaddress\u201dcursor.execute(sql)data=cursor.fetchall()ifdataforxindata:printx[0],x[1]cursor.close()conn.close()12345678910111213141516171819202122importos,sysimportMySQLdbtry:\u00a0\u00a0\u00a0\u00a0connMySQLdb.connect(host=\u2019localhost\u2019,user=\u2019root\u2019,passwd=\u2019\u2019,db=\u2019address\u2019exceptException,e:\u00a0\u00a0\u00a0\u00a0printe\u00a0\u00a0\u00a0\u00a0sys.exit()cursor=conn.cursor()sql=\u2019insertintoaddress(name,address)values(%s,%s)\u2019value=((\u201czhangsan\u201d,\u201dhaidian\u201d),(\u201clisi\u201d,\u201dhaidian\u201d))try\u00a0\u00a0\u00a0\u00a0cursor.executemany(sql,values)exceptException,e:\u00a0\u00a0\u00a0\u00a0printesql=\u201dselect*fromaddress\u201dcursor.execute(sql)data=cursor.fetchall()ifdata\u00a0\u00a0\u00a0\u00a0forxindata:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printx[0],x[1]cursor.close()conn.close()\u8c22\u8c22\uff012\u8d5e15\u6536\u85cf11\u8bc4\u8bba"]},
{"art_title": ["Python\u4e5f\u53ef\u4ee5\u5f88\u7f8e"], "art_url": ["http://python.jobbole.com/20351/"], "art_create_time": ["2012/08/14"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/05/instagram.jpg"], "art_content": ["\u6211\u6700\u8fd1\u8bfb\u5230\u4e00\u904d\u6587\u7ae0\u5176\u4e3b\u8981\u5173\u6ce8\u70b9\u662f\u5728Python\u793e\u533a\uff0c\u8bb2\u7684\u662f\u4e3a\u4ec0\u4e48Python\u5e94\u7528\u5982\u6b64\u4e11\u964b\uff1f\u5c3d\u7ba1\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4ed6\u7684\u89c2\u70b9\u662f\u6b63\u786e\u7684\uff0c\u4f46\u662f\u5bf9\u4e8e\u4ed6\u95ee\u7684\u8fd9\u4e2a\u95ee\u9898\u201c\u4eb2\u7231\u7684Python\uff0c\u4f60\u4e3a\u4f55\u5982\u6b64\u4e11\u964b\u201d\u771f\u662f\u8352\u8c2c\u81f3\u6781\u3002\u4ed6\u6240\u53d9\u8ff0\u7684\u6bcf\u4e2a\u5047\u8bbe\u548c\u6bd4\u5bf9\u663e\u5f97\u975e\u5e38\u611a\u8822\uff0c\u5199\u90a3\u8fb9\u6587\u7ae0\u7684\u4eba\u89c6\u4e4e\u5bf9\u5728Python\u4e4b\u4e0a\u6784\u5efa\u7684\u535a\u5ba2\u548cWeb\u5e94\u7528\u7684\u8bbe\u8ba1\u6c34\u5e73\u5b8c\u5168\u6ca1\u6709\u6df1\u523b\u5370\u8c61\u3002\u4e3a\u4e86\u63ed\u7a7f\u771f\u76f8\uff0c\u6839\u636e\u4ed6\u8bf4\u7684\uff0c\u6211\u6536\u96c6\u4e86\u4e00\u7cfb\u5217\u7531Python\u5b9e\u73b0\u7684\u5e94\u7528\uff0c\u8fd9\u4e9b\u5e94\u7528\u7edd\u5bf9\u662f\u7ecf\u8fc7\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u3002\u4e0d\u8981\u57fa\u4e8e\u6211\u7684HTML\u5e03\u5c40\u6765\u6279\u5224\uff0c\u771f\u6b63\u7684\u5185\u5bb9\u5728\u670d\u52a1\u7aef\u2014\u2014MahdiYusufInstagram\u8fd9\u4e2a\u201c\u5c0f\u201d\u516c\u53f8\u6700\u8fd1\u5356\u4e8610\u4ebf\u7f8e\u91d1\u3002\u5b83\u5982\u6b64\u53d7\u5927\u4f17\u6b22\u8fce\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u56e0\u7d20\u4e4b\u4e00\u5c31\u662f\u4ed6\u7684\u4f18\u7f8e\uff0cInstagram\u5927\u91cf\u4f7f\u7528\u4e86Python\u3002Pinterest\u00a0\u53e6\u4e00\u4e2a\u7cbe\u7f8e\u7684\u5e94\u7528\uff0c\u786e\u5b9a\u4e0d\u662f\u7528Python\u5199\u7684\u5417\uff1f\u9519\u4e86\uff0c\u5b83\u5c31\u662f\u7528Python\u5199\u7684\u3002WashingtonPost\u65b0\u95fb\u7ad9\u70b9\u867d\u4e0d\u662f\u6700\u5177\u521b\u65b0\u6027\u7684\u8bbe\u8ba1\uff0c\u4f46\u662f\u5b83\u5bf9\u4efb\u4f55\u8bcd\u7684\u5b9a\u4e49\u5e76\u4e0d\u4e11\u964b.EveryBlockEveryBlock\u7531Django\u7684\u8054\u5408\u4f5c\u8005(AdrianHolovaty)\u521b\u5efa\uff0c\u4e11\u5417\uff1f\u4e00\u70b9\u90fd\u4e0d\u89c9\u5f97\u3002Mozilla\u81f3\u4eca\u4f7f\u7528Python\u6700\u5927\u7684\u7ad9\u70b9\u4e4b\u4e00\uff0cMozillaz\u5728\u8bbe\u8ba1\u548c\u521b\u65b0\u4e0a\u90fd\u6709\u5f88\u597d\u7684\u9020\u8be3Courtside\u8fd9\u4e2a\u5e94\u7528\u662f\u6211\u548c\u6211\u56e2\u961f\u4e3aDjangoDash\u6240\u5199\uff0c\u5c3d\u7ba1\u6211\u4e0d\u80fd\u62ff\u51fa\u4efb\u4f55\u5f88\u597d\u7684\u8bbe\u8ba1\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u82b1\u65f6\u95f4\u53bb\u5b9e\u8df5\u3002YoutubeDouban\u00a0\uff08\u8bd1\u8005\u8865\u4e2a\u56fd\u5185\u7684\uff09\u6ca1\u4eba\u4e0d\u77e5\u9053\u8c46\u74e3\u5427\uff0c\u963f\u5317\u662f\u8fd9\u6837\u8bf4\u7684\uff1a\u201c\u4ece\u4e2a\u4eba\u559c\u597d\u6765\u8bf4\uff0cpython\u66f4\u7b80\u6d01\uff0c\u548c\u6211\u53e3\u5473\u3002python\u7528\u7f29\u4f4d\u4e0d\u77e5\u7701\u53bb\u4e86\u6211\u591a\u5c11\u65f6\u95f4\u3002\u6211\u4ee5\u524d{};\u6572\u4e86\u5341\u51e0\u5e74\u4e86\uff0c\u73b0\u5728\u60f3\u8d77\u6765\u771f\u662f\u4e0d\u582a\u56de\u9996\u3002\u201d\u8fd8\u9700\u8981\u6211\u7ee7\u7eed\u4ecb\u7ecd\u5417\uff1f\u6211\u60f3Path\u4e5f\u662f\u5728\u4ed6\u4eec\u7684web\u5e94\u7528\u4e2d\u5927\u91cf\u4f7f\u7528\u7684Python\uff0c\u8fd9\u4e2a\u4ea7\u54c1\u5728\u8bbe\u8ba1\u548c\u521b\u65b0\u90fd\u5f97\u5230\u4e86\u8d5e\u8bb8\u3002\u6240\u4ee5\uff0c\u90a3\u4e9b\u53d1\u8868\u58f0\u660e\u8bf4\u7528\u7279\u5b9a\u7684\u8bed\u8a00\u5199\u7f51\u7ad9\u5f88\u4e11\uff0c\u8fd9\u662f\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\u7684\u3002Python\u793e\u533a\u5145\u6ee1\u6d3b\u529b\u548c\u6781\u591a\u7684\u613f\u671b\u53ca\u5229\u76ca\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u90a3\u4e9b\u6f02\u4eae\u7684\u4e1c\u897f\u3002\u6709\u4e2a\u8bf4\u6cd5\u662f\u8bbe\u8ba1\u5e08\u8ba9\u7f51\u7ad9\u770b\u8d77\u6765\u6f02\u4eae\u3001\u7b80\u6d01\uff0c\u8fd9\u5e76\u4e0d\u662f\u540e\u7aef\u5de5\u7a0b\u5e08\u80fd\u7528\u8bed\u8a00\u53ef\u4ee5\u7f16\u5199\u7684\u3002\u5982\u679c\u4f60\u662f\u7a0b\u5e8f\u5458\uff0c\u53c8\u60f3\u5b66\u4e60\u8bbe\u8ba1\u7684\u8bdd\uff0c\u4f60\u5e94\u8be5\u770b\u770b\u8fd9\u672c\u4e66\u300a\u00a0DesignforHackers:ReverseEngineeringBeauty\u300b\u3002\u00a0\u76f8\u5173\u9605\u8bfb\uff1a\u975e\u5178\u578b\u6027\u5410\u69fd\uff1a\u4eb2\u7231\u7684Python\uff0c\u4f60\u4e3a\u4f55\u5982\u6b64\u4e11\u964b\u539f\u6587\uff1amahdiyusuf\u00a0\u00a0\u7f16\u8bd1\uff1a\u4f2f\u4e50\u5728\u7ebf\u2013\u5218\u5fd7\u519b\u3010\u5982\u9700\u8f6c\u8f7d\uff0c\u8bf7\u6807\u6ce8\u5e76\u4fdd\u7559\u539f\u6587\u94fe\u63a5\u3001\u8bd1\u6587\u94fe\u63a5\u548c\u8bd1\u8005\u7b49\u4fe1\u606f\uff0c\u8c22\u8c22\u5408\u4f5c\uff01\u30111\u8d5e1\u6536\u85cf1\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u5218\u5fd7\u519b\u4e2a\u4eba\u535a\u5ba2\uff1ahttp://foofish.net\uff0c\u5fae\u4fe1\u516c\u4f17\u53f7\uff1aPython\u4e4b\u7985\uff08ID\uff1aVTtalk\uff09\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b745\u00b7"]},
{"art_title": ["\u6211\u662f\u5982\u4f55\u57288\u5468\u5185\u81ea\u5b66\u7f16\u7a0b\u7684"], "art_url": ["http://python.jobbole.com/25858/"], "art_create_time": ["2012/09/08"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/08/computer_programming.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u5218\u5fd7\u519b\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1aDavidSinsky\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u5bf9\u4e8e\u7edd\u5927\u591a\u6570\u975e\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0c\u5b66\u4e60\u5982\u4f55\u7f16\u7a0b\u662f\u4e00\u9879\u4e0d\u53ef\u80fd\u5b8c\u6210\u800c\u4e14\u4ee4\u4eba\u754f\u60e7\u7684\u4efb\u52a1\uff0c\u597d\u5728\u6709\u5927\u91cf\u514d\u8d39\u7684\u5728\u7ebf\u8d44\u6e90\uff0c\u5f53\u7136\u81ea\u5b66\u6210\u624d\u6ca1\u90a3\u4e48\u5bb9\u6613\u3002\u6211\u5f00\u59cb\u5b66\u4e60\u5199\u4ee3\u7801\u662f\u5728\u4eca\u5e74\u7684\u65e9\u4e9b\u65f6\u5019\uff0c\u8fd9\u91cc\u6211\u53ef\u4ee5\u5206\u4eab\u4e00\u4e0b\u81ea\u5df1\u7684\u4e00\u4e9b\u7ecf\u9a8c\uff0c\u6784\u5efa\u4e00\u5957\u4f60\u81ea\u5df1\u7684\u539f\u578b\u6ca1\u6709\u60f3\u8c61\u7684\u90a3\u4e48\u56f0\u96be\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u4f60\u5728\u4e24\u4e2a\u6708\u5167\u4e0d\u843d\u4e0b\u4e00\u5929\uff0c\u62e5\u6709\u4e00\u4e2a\u5b8c\u5907\u7684\u539f\u578b\u662f\u5b8c\u5168\u53ef\u884c\u7684\u3002\u4e0b\u9762\uff0c\u6211\u5c06\u7f57\u5217\u51fa\u4e00\u4e2a\u7b80\u5355\u7684\u5b66\u4e60\u8def\u7ebf\uff1a\u5728\u516b\u4e2a\u5468\u672b\u5167\u8f6f\u4ef6\u5f00\u53d1\u4ece\u96f6\u5230\u62e5\u6709\u4e00\u4e2a\u5de5\u4f5c\u539f\u578b\u3002\u00a0\u628aweb\u6808\u4ecb\u7ecd\u7ed9\u81ea\u5df1\u542c\uff0810\u5206\u949f\uff09\u964c\u751f\u672f\u8bed\u7684\u5b58\u5728\u4f7f\u5f97\u4efb\u4f55\u4e3b\u9898\u4f3c\u4e4e\u6bd4\u5b9e\u9645\u4e0a\u7684\u66f4\u52a0\u6df7\u4e71\u3002Yipit\u7684\u521b\u59cb\u4eba/CEOVinVacanti\u505a\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u6982\u8ff0\uff0c\u5173\u4e8e\u4f60\u5c06\u8981\u719f\u6089\u7684\u8bed\u8a00\u4e2d\u672f\u8bed\u7684\u7406\u89e3\u3002\u00a0\u638c\u63e1\u5165\u95e8\u7ea7\u7684Python\u548c\u901a\u7528\u7f16\u7a0b\u6280\u5de7\uff081\u4e2a\u5468\u672b\uff09\u7b28\u65b9\u6cd5\u5b66Python\uff1a\u522b\u5728\u4e4e\u8fd9\u4e2a\u6807\u9898\uff0c\u7b80\u660e\u7684\u683c\u5f0f\u4f7f\u5b66\u4e60\u57fa\u672c\u7684\u6982\u5ff5\u975e\u5e38\u7b80\u5355\uff0c\u5f88\u591a\u7ae0\u8282\u6240\u82b1\u65f6\u95f4\u8fd8\u4e0d\u5230\u5341\u5206\u949f\u3002\u7136\u800c\uff0c\u6211\u53d1\u73b0\u6709\u4e9b\u9ad8\u7ea7\u8bfe\u7a0b\u5e76\u4e0d\u597d\uff0c\u6240\u4ee5\u6211\u5efa\u8bae42\u8bfe\u540e\u7684\u8bfe\u7a0b\u4e0d\u5fc5\u5f80\u4e0b\u5b66\u4e60\u4e86\u3002GooglePython\u8bfe\u7a0b\uff1a\u9605\u8bfb\u7b14\u8bb0\uff0c\u770b\u89c6\u9891\uff0c\u5728\u4e0d\u770b\u7b54\u6848\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210\u6240\u6709\u76f8\u5173\u7ec3\u4e60\u3002\u6323\u624e\u4e8e\u4e0d\u65ad\u51fa\u9519\u7684\u7ec3\u4e60\u662f\u6700\u597d\u7684\u5b66\u4e60\u7ecf\u9a8c\uff0c\u5982\u679c\u6211\u53ea\u662f\u770b\u7740\u7b54\u6848\u5b66\u4e60\u7684\u8bdd\uff0c\u8fdc\u6ca1\u6709\u8fd9\u4e48\u591a\u6536\u83b7\uff0c\u671f\u95f4\u6211\u5c3d\u529b\u8bf4\u670d\u81ea\u5df1\u8981\u7406\u89e3\u6982\u5ff5\u3002\u4e0a\u9762\u8fd9\u4e24\u4e2a\u8d44\u6e90\u6709\u4e9b\u90e8\u5206\u662f\u4ea4\u53c9\u7684\uff0c\u6709\u4e9b\u662f\u4e92\u8865\u7684\u3002\u6211\u5efa\u8bae\u540c\u65f6\u770b\u8fd9\u4e24\u4efd\u8d44\u6e90\u7684\u5f00\u5934\u90e8\u5206\u518d\u6765\u51b3\u5b9a\u81ea\u5df1\u66f4\u559c\u6b22\u54ea\u79cd\u3002\u4e00\u65e6\u5b8c\u6210\u4e86\u5176\u4e2d\u7684\u4e00\u4e2a\u4efb\u52a1\uff0c\u518d\u7565\u8bfb\u53e6\u5916\u4e00\u4efd\uff0c\u67e5\u627e\u90a3\u4e9b\u8fd8\u4e0d\u662f\u5b8c\u5168\u7406\u89e3\u7684\u6982\u5ff5\uff0c\u5e76\u4ece\u4e2d\u83b7\u5f97\u4e00\u4e9b\u989d\u5916\u7684\u4e60\u9898\u7ec3\u4e60\u7684\u673a\u4f1a\u3002\u00a0\u7406\u89e3\u5165\u95e8\u7ea7\u7684Django\uff081\u4e2a\u5468\u672b\uff09\uff1a\u5b66\u4e60Dgango\u6559\u7a0b\u5220\u9664\u6240\u6709\u4ee3\u7801\u91cd\u65b0\u5b66\u4e60\u8be5\u6559\u7a0b\u7b2c\u4e00\u6b21\u5b66\u4e60\u8be5\u6559\u7a0b\u5b8c\u5168\u6309\u7167\u8bf4\u660e\u4e00\u6b65\u4e00\u6b65\u64cd\u4f5c\u800c\u4e0d\u7406\u89e3\u6bcf\u4e2a\u6b65\u9aa4\u7684\u539f\u7406\uff0c\u56e0\u4e3a\u8fd9\u5bf9\u6211\u6765\u8bf4\u5b8c\u5168\u662f\u964c\u751f\u7684\u3002\u7b2c\u4e8c\u904d\u6211\u4e0d\u518d\u5173\u6ce8\u6982\u5ff5\u7684\u65b0\u5947\uff0c\u800c\u662f\u628a\u7cbe\u529b\u653e\u5728\u7406\u89e3\u6bcf\u4e2a\u90e8\u4ef6\u662f\u5982\u4f55\u4e00\u8d77\u5de5\u4f5c\u7684\u3002\u00a0\u6df1\u5165\u7406\u89e3Python\u53ca\u901a\u7528\u7f16\u7a0b\u6982\u5ff5\uff082-4\u4e2a\u5468\u672b\uff09\uff1aUdacity\u7684CS\u8bfe\u7a0b\uff1aUdacity\u7684\u8bfe\u7a0b\u4e00\u534a\u5206\u4e3a7\u4e2a\u8bfe\u65f6\uff08\u6bcf\u4e2a\u8bfe\u65f62-3\u5c0f\u65f6\uff09\u4f60\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u7684\u8fdb\u5ea6\u6765\u5b66\u4e60\u3002\uff08\u6211\u8d85\u7ea7\u559c\u6b22Udacity\u7684\u6559\u5b66\u65b9\u5f0f\uff0c\u5efa\u8bae\u4e2d\u7ea7\u7f16\u7a0b\u73ed\u6216web\u5f00\u53d1\u73ed\u80fd\u8ddf\u8fdb\u8005\u4e24\u4e2a\u6708\u7684\u8bfe\u7a0b\uff09MIT\u7684CS\u8bfe\u7a0b\u7684\u7b2c\u4e00\u5355\u5143\uff1a\u6559\u7684\u5f88\u68d2\uff0c\u8001\u5e08\u4e5f\u51fa\u4e4e\u610f\u6599\u7684\u5e73\u6613\u8fd1\u4eba\u3002\u540c\u6837\u7684\u6211\u4f1a\u5206\u522b\u770b\u770b\uff0c\u54ea\u4e2a\u624d\u662f\u4f60\u6700\u559c\u6b22\u7684\u3002\u00a0\u5b9e\u8df5\u6784\u5efa\u7b80\u5355\u7684web\u5e94\u7528\uff081\u4e2a\u5468\u672b\uff09\uff1a\u6839\u636e\u4f8b\u5b50\u7528Django\u505a\u4e9b\u7ec3\u4e60\uff0c\u8fd9\u4e9b\u7ec3\u4e60\u4ecd\u7136\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6307\u5bfc\u4ee5\u81f3\u4e8e\u6211\u89c9\u5f97\u662f\u4e00\u79cd\u597d\u7684\u65b9\u5f0f\u53bb\u5f00\u59cb\u5b66\u4e60\u3002\u00a0\u5efa\u7acb\u539f\u578b\uff081\u4e2a\u5468\u672b\uff09\uff1a\u7528\u4e00\u4e2a\u5468\u672b\u5efa\u7acb\u539f\u578b\uff1f\u662f\u7684\uff0c\u4f60\u4f1a\u5f88\u96be\u4e3a\u60c5\u6210\u4ec0\u4e48\u6837\u5b50\u5462\uff08\u81f3\u5c11\u6211\u662f\u7684\uff09\uff0c\u4f46\u662f\u8fd9\u5c31\u662f\u5168\u90e8\u3002\u5c31\u662f\u8fd9\u6837\uff0c8\u4e2a\u5468\u672b\uff08\u6216\u66f4\u5c11\uff09\u4f60\u5df2\u7ecf\u4ece\u5b66\u4f1a\u4ece\u96f6\u5230\u80fd\u591f\u6b63\u5e38\u8fd0\u4f5c\u7684\u539f\u578b\u4e86\uff0c\u4e8b\u5b9e\u4e0a\u4e8b\u60c5\u5e76\u975e\u5982\u6b64\u8270\u5de8\u3002\u00a0\u4e0b\u4e00\u6b65\uff1a\u5f88\u660e\u663e\u4e0d\u7528\u8bf4\uff0c\u5728\u5efa\u7acb\u7b80\u5355\u539f\u578b\u4e0a\u9700\u8981\u7684\u77e5\u8bc6\u548c\u5bf9\u4e00\u4e2a\u771f\u6b63\u5408\u683c\u7684\u8f6f\u4ef6\u5de5\u7a0b\u5e08\u6240\u9700\u8981\u7684\u77e5\u8bc6\u548c\u7ecf\u9a8c\u6709\u7740\u5de8\u5927\u7684\u5dee\u522b\u7684\u3002\u5982\u679c\u4f60\u60f3\u5b66\u4e60\u5173\u4e8e\u6784\u5efa\u5927\u89c4\u6a21\u7684web\u5e94\u7528\u7a0b\u5e8f\uff0c\u60f3\u83b7\u5f97\u4e13\u4e1a\u7684web\u5f00\u53d1\u7ecf\u9a8c\uff0c\u5728\u5feb\u901f\u589e\u957f\u7684\u521b\u4e1a\u516c\u53f8\u5982Yipit\u662f\u4e00\u4e2a\u4f1f\u5927\u7684\u4e0b\u4e00\u6b65\u3002\u5982\u679c\u4f60\u5f88\u806a\u660e\uff0c\u80fd\u52aa\u529b\u5de5\u4f5c\uff0c\u5bcc\u6709\u521b\u9020\u60ca\u8273\u7684\u6d88\u8d39\u8005web\u4f53\u9a8c\u7684\u70ed\u60c5\uff0c\u9a6c\u4e0a\u7ed9\u6211\u53d1\u90ae\u4ef6\u5427\uff0cjobs@yipit.com\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u5bfb\u627e\u725b\u4eba\u52a0\u5165\u6211\u4eec\u7684\u56e2\u961f\u3002ps:\u4e0b\u9762\u662f\u4e00\u4e9b\u53ef\u80fd\u6709\u7528\u7684\u8d44\u6e90\uff0c\u5982\u679c\u4f60\u6709\u5176\u4ed6\u5efa\u8bae\uff0c\u8bf7\u5728\u8bc4\u8bba\u4e2d\u7559\u4e0b\u4f60\u7684\u8bb0\u5f55\u3002Stanford\u2019sintroCScoursesStanford\u2019siPhonedevelopmentclassHarvard\u2019sintroCScourseCodecademy\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff011\u8d5e1\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u5218\u5fd7\u519b\u4e2a\u4eba\u535a\u5ba2\uff1ahttp://foofish.net\uff0c\u5fae\u4fe1\u516c\u4f17\u53f7\uff1aPython\u4e4b\u7985\uff08ID\uff1aVTtalk\uff09\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b745\u00b7"]},
{"art_title": ["2012\u5e74Linux Journal\u8bfb\u8005\u9009\u62e9\u5956\u7ed3\u679c\u516c\u5e03"], "art_url": ["http://python.jobbole.com/31329/"], "art_create_time": ["2012/12/17"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/10/ubuntu-logo.jpg"], "art_content": ["\u8fd8\u5269\u5341\u51e0\u5929\uff0c2012\u5e74\u5c31\u8981\u8fc7\u53bb\u4e86\u3002Linux\u4e1a\u754c\u77e5\u540d\u7684\u6742\u5fd7LinuxJournal\u8fd1\u65e5\u5728\u5176\u5b98\u7f51\u516c\u5e03\u4e86\u4eca\u5e74LinuxJournal\u8bfb\u8005\u9009\u62e9\u5956\uff08Readers\u2019ChoiceAwards\uff09\u6295\u7968\u7ed3\u679c\u3002\u6295\u7968\u8986\u76d6\u00a0LinuxJournal\u4e00\u5e74\u5185\u62a5\u9053\u7684\u4ea7\u54c1\u3001\u670d\u52a1\u548c\u516c\u53f8\u3002\u5728\u4eca\u5e74\uff0cPython\u518d\u6b21\u6210\u4e3a\u201c\u6700\u4f73\u7f16\u7a0b\u8bed\u8a00\uff08BestProgrammingLanguage\uff09\u201d\u548c\u201c\u6700\u4f73\u811a\u672c\u8bed\u8a00\uff08BestScriptingLanguage\uff09\u201d\uff0cEclipse\u662f\u201c\u6700\u4f73IDE\u201d\u3002\u4eca\u5e74\u6295\u7968\u4e3b\u9898\u5206\u7c7b\u6709\u00a052\u79cd\uff0c\u4ee5\u4e0b\u662f\u90e8\u5206\u5206\u7c7b\u7ed3\u679c\uff1aBestLinuxDistribution\u6700\u4f73Linux\u53d1\u884c\u7248\u2460Ubuntu(anyflavor,Kubuntu,Edubuntu,etc.):30.1%\u00a0\u2461Debian:14.7%\uff1b\u2462LinuxMint:13.4%\u2463ArchLinux:10%\u2464Fedora:8.6%\u2465OpenSUSE:4.2%\u2026\u2026\u00a0BestDistributionforNetbooks/LimitedHardware\u00a0\u00a0\u2460\u00a0UbuntuNetbookRemix(anyflavor):25.9%\u2461Debian:14.9%\u2462AndroidOS:14.1%\u2463\u00a0ArchLinux:12.7%\u2026\u2026\u00a0BestMobileLinuxOS\u00a0\u2192AndroidBestDesktopEnvironment\u2192KDEBestWebBrowser\u2460Firefox:50.3%\u2461Chrome/Chromium:40.8%\u2462Opera:4.7%\u2026\u2026\u00a0BestE-mailClient\u6700\u4f73\u90ae\u4ef6\u5ba2\u6237\u7aef\u2460Thunderbird:40.2%\u00a0\u2461GmailWebclient:31.3%\u2462Evolution:7.5%\u2026\u2026\u00a0BestIMClient\u6700\u4f73\u5373\u65f6\u901a\u8baf\u8f6f\u4ef6\u5ba2\u6237\u7aef\u2460Pidgin(formerlyGaim):56%\u2461Skype:15.1%\u2462Empathy:9.2%\u2026\u2026\u00a0BestIRCClient\u6700\u4f73IRC\u5ba2\u6237\u7aef\u2460pidgin:31.2%\u00a0\u2461XChat:27.8%\u2462Irssi:13.2%\u2026\u2026\u00a0BestOfficeSuite\u2460LibreOffice:73.3%\u3001\u2461GoogleDocs:12%\u3001\u2462OpenOffice.org:8.4%\u2026\u2026\u00a0BestGraphics/DesignTool\u2460GIMP:67.8%\u3001\u2461Inkscape:13.3%\u3001\u2462\u00a0Blender:8%\u2026\u2026\u00a0BestDigitalPhotoManagementTool\u2460digiKam:22.5\u3001\u2461\u00a0Picasa:22.2%\u3001\u2462\u00a0Shotwell:17.3%\u00a0\u2026\u2026\u00a0BestAudioTool\uff1aAudacityBestAudioPlayer\uff1aVLC:24.9%\u00a0\u00a0BestOn-lineCollaborationTool\u2460GoogleDocs:61.3%\u3001\u2461Wikis:18.5%\u3001\u2462\u00a0Other:6.9%\u2026\u2026\u00a0BestCloud-BasedFileStorage\uff1aDropbox:53.4%BestKid-FriendlyApplication\uff1aTuxPaint:42.8%BestSQLDatabase\u2460MySQL:47.4%\u3001\u2461PostgreSQL:28.8%\u3001\u2462SQLite:12.2%\u2026\u2026\u00a0\u00a0BestNoSQLDatabase\u2460MongoDB:33.4%\u3001\u2461CouchDB:22.3%\u3001\u2462Cassandra:21.9%\u3001\u2463Other:12.2%\u3001\u2464\u00a0Redis:6.6%\u3001\u2465Dynomite:1.8%\u3001\u2466\u00a0Riak:1.8%\u00a0BestMonitoringApplication\uff1aNagiosBestRevisionControlSystem\u2460Git:63%\u3001\u2461Subversion:18.6%\u3001\u2462Mercurial:6.6%\u3001\u2463CVS:6.2%\u3001\u2464Other:2.7%BestProgrammingLanguage\u6700\u4f73\u7f16\u7a0b\u8bed\u8a00\u2460Python:28%\u3001\u2461\u00a0C++:19%\u3001\u2462\u00a0C:18.9%\u3001\u2463\u00a0Java:8.9%\u3001\u2464\u00a0Perl:8.2%Other:6.1%\u3001Ruby:4%\u3001JavaScript:3.1%\u3001C#:2.4%\u3001Erlang:.7%\u3001Haskell:.7%\u00a0\u00a0BestScriptingLanguage\u6700\u4f73\u811a\u672c\u8bed\u8a00\u2460Python:36.3%\u3001\u2461Bash:24.4%\u3001\u2462Perl:14.2%\u3001\u2463PHP:13.8%\u3001\u2464Ruby:4.8%\u3001\u2465Awk:2.2%\u3001\u2466Other:2.2%\u3001\u2467\u00a0Lua:1.6%\u3001\u2468\u00a0Groovy:0.4%\u00a0\uff08\u8bd1\u6ce8\uff1a\u9488\u5bf9\u8fd9\u4e2a\u6295\u7968\u7ed3\u679c\uff0c\u5c24\u5176\u662f\u201c\u6700\u4f73\u7f16\u7a0b\u8bed\u8a00\uff08BestProgrammingLanguage\uff09\u201d\u548c\u201c\u6700\u4f73\u811a\u672c\u8bed\u8a00\uff08BestScriptingLanguage\uff09\u201d\uff0cReddit\u4e0a\u6709\u4e9b\u4eba\u5728\u8ba8\u8bba\u5e76\u5410\u69fd\u2192\u00a0\u94fe\u63a5\u3002\uff09\u00a0BestIDE\u6700\u4f73\u96c6\u6210\u5f00\u53d1\u73af\u5883\uff08IDE\uff09Eclipse:26.7%\u3001vim:25.6%\u3001Geany:7.5%\u3001Other:6.9%*\u3001QtCreator:6.1%\u3001NetBeans:5.4%\u3001KDevelop:4.1%\u3001Sublime2:3.1%\u3001IntelliJIDEA:1.3%\u3001Anjuta:1.2%\u3001MonoDevelop:.6%\u3001Codewarrior:.5%\u3001ZendStudio:.3%\u3001Eric4:.1%BestOpen-SourceConfigurationManagementTool|\u6700\u4f73\u5f00\u6e90\u914d\u7f6e\u7ba1\u7406\u5de5\u5177\uff1aPuppetBestPlatformforDevelopingRichInternetApps\uff1aHTML5BestPackageManagementApplication\uff1aaptBestRSSReader\uff1aGmailRSSreader\u00a0BestJavaAppServertomcat:60.1%\u3001jboss:21.9%\u3001Other:10.9%*\u3001glassfish:7.1%\u00a0BestContentManagementSystem\u6700\u4f73\u5185\u5bb9\u7ba1\u7406\u7cfb\u7edfWordPress:34.9%\u3001Drupal:27.8%\u3001Joomla!:15.3%\u3001Other:8.1%\u2026\u2026\u00a0\u6700\u4f73Linux\u56fe\u4e66\u300aLinuxinNutshell\u300b\u00a0\u00a0\u00a0\u82f1\u6587\u6765\u6e90\uff1aLinuxJournal\uff0c\u7f16\u8bd1\uff1a\u4f2f\u4e50\u5728\u7ebf\u2014\u2014\u9ec4\u5229\u6c11\u6587\u7ae0\u94fe\u63a5\uff1ahttp://blog.jobbole.com/31329/\u3010\u5982\u9700\u8f6c\u8f7d\uff0c\u8bf7\u5728\u6b63\u6587\u4e2d\u6807\u6ce8\u5e76\u4fdd\u7559\u539f\u6587\u94fe\u63a5\u3001\u8bd1\u6587\u94fe\u63a5\u548c\u8bd1\u8005\u7b49\u4fe1\u606f\uff0c\u8c22\u8c22\u5408\u4f5c\uff01\u30111\u8d5e\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u9ec4\u5229\u6c11\u4f2f\u4e50\u5728\u7ebf\u8054\u5408\u53d1\u8d77\u4eba\uff0c\u5173\u6ce8IT\u548c\u4e92\u8054\u7f51\u3002\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b799\u00b7"]},
{"art_title": ["\u9648\u7693\uff1a\u4ee3\u7801\u6267\u884c\u7684\u6548\u7387"], "art_url": ["http://python.jobbole.com/23773/"], "art_create_time": ["2012/07/14"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/07/Code-execution-efficiency4.jpg"], "art_content": ["\u6765\u6e90\uff1a\u9648\u7693\u5728\u300a\u6027\u80fd\u8c03\u4f18\u653b\u7565\u300b\u91cc\uff0c\u6211\u8bf4\u8fc7\uff0c\u8981\u8c03\u4f18\u6027\u9700\u8981\u627e\u5230\u7a0b\u5e8f\u4e2d\u7684Hotspot\uff0c\u4e5f\u5c31\u662f\u88ab\u8c03\u7528\u6700\u591a\u7684\u5730\u65b9\uff0c\u8fd9\u79cd\u5730\u65b9\uff0c\u53ea\u8981\u4f60\u80fd\u4f18\u5316\u4e00\u70b9\u70b9\uff0c\u4f60\u7684\u6027\u80fd\u5c31\u4f1a\u6709\u8d28\u7684\u63d0\u9ad8\u3002\u5728\u8fd9\u91cc\u6211\u7ed9\u5927\u5bb6\u4e3e\u4e09\u4e2a\u5173\u4e8e\u4ee3\u7801\u6267\u884c\u6548\u7387\u7684\u4f8b\u5b50\uff08\u5b83\u4eec\u90fd\u6765\u81ea\u4e8e\u7f51\u4e0a\uff09\u7b2c\u4e00\u4e2a\u4f8b\u5b50PHP\u4e2dGetter\u548cSetter\u7684\u6548\u7387\uff08\u6765\u6e90reddit\uff09\u8fd9\u4e2a\u4f8b\u5b50\u6bd4\u8f83\u7b80\u5355\uff0c\u4f60\u53ef\u4ee5\u8df3\u8fc7\u3002\u8003\u8651\u4e0b\u9762\u7684PHP\u4ee3\u7801\uff1a\u6211\u4eec\u53ef\u770b\u5230\uff0c\u4f7f\u7528Getter/Setter\u7684\u65b9\u5f0f\uff0c\u6027\u80fd\u8981\u6bd4\u76f4\u63a5\u8bfb\u5199\u6210\u5458\u53d8\u91cf\u8981\u5dee\u4e00\u500d\u4ee5\u4e0a\u3002Python&lt;?php//dog_naive.phpclassdog{public$name=&quot;&quot;;publicfunctionsetName($name){$this-&amp;gt;name=$name;}publicfunctiongetName(){return$this-&amp;gt;name;}}$rover=newdog();//\u901a\u8fc7Getter/Setter\u65b9\u5f0ffor($x=0;$x&lt;10;$x++){$t=microtime(true);for($i=0;$i&lt;1000000;$i++){$rover-&gt;setName(&quot;rover&quot;);$n=$rover-&gt;getName();}echomicrotime(true)-$t;echo&quot;n&quot;;}//\u76f4\u63a5\u5b58\u53d6\u53d8\u91cf\u65b9\u5f0ffor($x=0;$x&lt;10;$x++){$t=microtime(true);for($i=0;$i&lt;1000000;$i++){$rover-&gt;name=&quot;rover&quot;;$n=$rover-&gt;name;}echomicrotime(true)-$t;echo&quot;n&quot;;}?&gt;1234567891011121314151617181920212223242526272829303132333435&lt;?php\u00a0\u00a0\u00a0\u00a0//dog_naive.php\u00a0\u00a0\u00a0\u00a0\u00a0classdog{\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0public$name=&quot;&quot;;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0publicfunctionsetName($name){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$this-&amp;gt;name=$name;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0publicfunctiongetName(){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return$this-&amp;gt;name;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0$rover=newdog();\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u901a\u8fc7Getter/Setter\u65b9\u5f0f\u00a0\u00a0\u00a0\u00a0for($x=0;$x&lt;10;$x++){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$t=microtime(true);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0for($i=0;$i&lt;1000000;$i++){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$rover-&gt;setName(&quot;rover&quot;);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$n=$rover-&gt;getName();\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0echomicrotime(true)-$t;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0echo&quot;n&quot;;\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u76f4\u63a5\u5b58\u53d6\u53d8\u91cf\u65b9\u5f0f\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0for($x=0;$x&lt;10;$x++){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$t=microtime(true);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0for($i=0;$i&lt;1000000;$i++){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$rover-&gt;name=&quot;rover&quot;;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$n=$rover-&gt;name;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0echomicrotime(true)-$t;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0echo&quot;n&quot;;\u00a0\u00a0\u00a0\u00a0}?&gt;\u8fd9\u4e2a\u5e76\u6ca1\u6709\u4ec0\u4e48\u7a00\uff0c\u56e0\u4e3a\u6709\u51fd\u6570\u8c03\u7528\u7684\u5f00\u9500\uff0c\u51fd\u6570\u8c03\u7528\u9700\u8981\u538b\u6808\u51fa\u6808\uff0c\u9700\u8981\u4f20\u503c\uff0c\u6709\u65f6\u8fd8\u8981\u9700\u8981\u4e2d\u65ad\uff0c\u8981\u5e72\u7684\u4e8b\u592a\u591a\u4e86\u3002\u6240\u4ee5\uff0c\u4ee3\u7801\u591a\u4e86\uff0c\u6548\u7387\u81ea\u7136\u5c31\u6162\u4e86\u3002\u6240\u6709\u7684\u8bed\u8a00\u90fd\u8fd9\u4e2a\u5fb7\u884c\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48C++\u8981\u5f15\u5165inline\u7684\u539f\u56e0\u3002\u800c\u4e14Java\u5728\u6253\u5f00\u4f18\u5316\u7684\u65f6\u5019\u4e5f\u53ef\u4ee5\u4f18\u5316\u4e4b\u3002\u4f46\u662f\u5bf9\u4e8e\u52a8\u6001\u8bed\u8a00\u6765\u8bf4\uff0c\u8fd9\u4e2a\u4e8b\u5c31\u53d8\u5f97\u6709\u70b9\u56f0\u96be\u4e86\u3002\u4f60\u53ef\u80fd\u4f1a\u4ee5\u4e3a\u4f7f\u7528\u4e0b\u9762\u7684\u4ee3\u7801\uff08MagicFunction\uff09\u4f1a\u597d\u4e00\u4e9b\uff0c\u4f46\u5b9e\u9645\u5176\u6027\u80fd\u66f4\u5dee\u3002Pythonclassdog{\u00a0private$_name=&quot;&quot;;function__set($property,$value){\u00a0\u00a0\u00a0\u00a0if($property==&#039;name&#039;)$this-&gt;_name=$value;\u00a0\u00a0}\u00a0\u00a0function__get($property){\u00a0\u00a0\u00a0\u00a0if($property==&#039;name&#039;)return$this-&gt;_name;\u00a0\u00a0}}123456789classdog{\u00a0\u00a0private$_name=&quot;&quot;;\u00a0\u00a0function__set($property,$value){\u00a0\u00a0\u00a0\u00a0if($property==&#039;name&#039;)$this-&gt;_name=$value;\u00a0\u00a0}\u00a0\u00a0function__get($property){\u00a0\u00a0\u00a0\u00a0if($property==&#039;name&#039;)return$this-&gt;_name;\u00a0\u00a0}}\u52a8\u6001\u8bed\u8a00\u7684\u6548\u7387\u4ece\u6765\u90fd\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u4f60\u9700\u8981PHP\u6709\u66f4\u597d\u7684\u6027\u80fd\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528FaceBook\u7684HipHop\u6765\u628aPHP\u7f16\u8bd1\u6210C\u8bed\u8a00\u3002\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4e3a\u4ec0\u4e48Python\u7a0b\u5e8f\u5728\u51fd\u6570\u5185\u6267\u884c\u5f97\u66f4\u5feb\uff1f\uff08\u6765\u6e90StackOverflow\uff09\u8003\u8651\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u4e00\u4e2a\u5728\u51fd\u6570\u4f53\u5185\uff0c\u4e00\u4e2a\u662f\u5168\u5c40\u7684\u4ee3\u7801\u3002\u51fd\u6570\u5185\u7684\u4ee3\u7801\u6267\u884c\u6548\u7387\u4e3a1.8sPythondefmain():\u00a0\u00a0foriinxrange(10**8):\u00a0\u00a0\u00a0\u00a0passmain()1234defmain():\u00a0\u00a0foriinxrange(10**8):\u00a0\u00a0\u00a0\u00a0passmain()\u51fd\u6570\u4f53\u5916\u7684\u4ee3\u7801\u6267\u884c\u6548\u7387\u4e3a4.5sPythonforiinxrange(10**8):\u00a0\u00a0pass12foriinxrange(10**8):\u00a0\u00a0pass\u4e0d\u7528\u592a\u7ea0\u7ed3\u65f6\u95f4\uff0c\u53ea\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6548\u7387\u67e5\u5f97\u5f88\u591a\u3002\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\u5462\uff1f\u6211\u4eec\u4f7f\u7528\u00a0dis\u00a0module\u00a0\u53cd\u6c47\u7f16\u51fd\u6570\u4f53\u5185\u7684bytecode\u4ee3\u7801\uff0c\u4f7f\u7528\u00a0compile\u00a0builtin\u00a0\u53cd\u6c47\u7f16\u5168\u5c40bytecode\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u7684\u53cd\u6c47\u7f16\uff08\u6ce8\u610f\u6211\u9ad8\u4eae\u7684\u5730\u65b9\uff09\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5dee\u522b\u5c31\u662f\u00a0STORE_FAST\u00a0\u548c\u00a0STORE_NAME\uff0c\u524d\u8005\u6bd4\u540e\u8005\u5feb\u5f88\u591a\u3002\u6240\u4ee5\uff0c\u5728\u5168\u5c40\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cfi\u6210\u4e86\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u800c\u51fd\u6570\u4e2d\u7684i\u662f\u653e\u5728\u672c\u5730\u53d8\u91cf\u8868\u4e2d\uff0c\u6240\u4ee5\u5728\u5168\u5c40\u53d8\u91cf\u8868\u4e2d\u67e5\u627e\u53d8\u91cf\u5c31\u6162\u5f88\u591a\u3002\u5982\u679c\u4f60\u5728main\u51fd\u6570\u4e2d\u58f0\u660eglobali\u90a3\u4e48\u6548\u7387\u4e5f\u5c31\u4e0b\u6765\u4e86\u3002\u539f\u56e0\u662f\uff0c\u672c\u5730\u53d8\u91cf\u662f\u5b58\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d\uff08\u76f4\u5230\uff09\uff0c\u7528\u4e00\u4e2a\u6574\u578b\u5e38\u91cf\u53bb\u8bbf\u95ee\uff0c\u800c\u5168\u5c40\u53d8\u91cf\u5b58\u5728\u4e00\u4e2adictionary\u4e2d\uff0c\u67e5\u8be2\u5f88\u6162\u3002\uff08\u6ce8\uff1a\u5728C/C++\u4e2d\uff0c\u8fd9\u4e2a\u4e0d\u662f\u4e00\u4e2a\u95ee\u9898\uff09\u7b2c\u4e09\u4e2a\u4f8b\u5b50\u4e3a\u4ec0\u4e48\u6392\u597d\u5e8f\u7684\u6570\u636e\u5728\u904d\u5386\u65f6\u4f1a\u66f4\u5feb\uff1f\uff08\u6765\u6e90StackOverflow\uff09\u53c2\u770b\u5982\u4e0bC/C++\u7684\u4ee3\u7801\uff1a\u5982\u679c\u4f60\u7684data\u6570\u7ec4\u662f\u6392\u597d\u5e8f\u7684\uff0c\u90a3\u4e48\u6027\u80fd\u662f1.93s\uff0c\u5982\u679c\u6ca1\u6709\u6392\u5e8f\uff0c\u6027\u80fd\u4e3a11.54\u79d2\u3002\u5dee5\u500d\u591a\u3002\u65e0\u8bba\u662fC/C++/Java\uff0c\u6216\u662f\u522b\u7684\u4ec0\u4e48\u8bed\u8a00\u90fd\u57fa\u672c\u4e0a\u4e00\u6837\u3002\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u662f\u2014\u2014\u00a0branchprediction\u00a0\uff08\u5206\u652f\u9884\u5224\uff09\u4f1f\u5927\u7684stackoverflow\u7ed9\u4e86\u4e00\u4e2a\u975e\u5e38\u4e0d\u9519\u7684\u89e3\u91ca\u3002\u8003\u8651\u6211\u4eec\u4e00\u4e2a\u94c1\u8def\u5206\u53c9\uff0c\u5f53\u6211\u4eec\u7684\u5217\u8f66\u6765\u7684\u65f6\u5019\uff0c\u6273\u9053\u5458\u77e5\u9053\u5206\u4e2a\u5206\u53c9\u901a\u5f80\u54ea\uff0c\u4f46\u4e0d\u77e5\u9053\u8fd9\u4e2a\u5217\u8f66\u8981\u53bb\u54ea\u513f\uff0c\u53f8\u673a\u77e5\u9053\u8981\u53bb\u54ea\uff0c\u4f46\u662f\u4e0d\u77e5\u9053\u8d70\u54ea\u6761\u5206\u53c9\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u8ba9\u5217\u8f66\u505c\u4e0b\u6765\uff0c\u7136\u540e\u53f8\u673a\u548c\u6273\u9053\u5458\u6c9f\u901a\u4e00\u4e0b\u3002\u8fd9\u6837\u7684\u6027\u80fd\u592a\u5dee\u4e86\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f18\u5316\u4e00\u4e0b\uff0c\u90a3\u5c31\u662f\u731c\uff0c\u6211\u4eec\u81f3\u5c11\u670950%\u7684\u6982\u7387\u731c\u5bf9\uff0c\u5982\u679c\u731c\u5bf9\u4e86\uff0c\u706b\u8f66\u884c\u9a76\u6027\u80fd\u5de8\u9ad8\uff0c\u731c\u9519\u4e86\uff0c\u5c31\u5f97\u8ba9\u706b\u8f66\u9000\u56de\u6765\u3002\u5982\u679c\u6211\u731c\u5bf9\u7684\u6982\u7387\u9ad8\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u7684\u6027\u80fd\u5c31\u4f1a\u9ad8\uff0c\u5426\u5219\u8001\u662f\u731c\u9519\u4e86\uff0c\u6027\u80fd\u5c31\u5f88\u5dee\u3002ImagebyMecanismo,fromWikimediaCommons:http://commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\u6211\u4eec\u7684if-else\u5c31\u50cf\u8fd9\u4e2a\u94c1\u8def\u5206\u53c9\u4e00\u6837\uff0c\u4e0b\u9762\u7ea2\u7bad\u5934\u6240\u6307\u7684\u5c31\u662f\u642c\u9053\u5668\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u7684\u642c\u9053\u5668\u662f\u600e\u4e48\u9884\u5224\u7684\u5462\uff1f\u5c31\u662f\u4f7f\u7528\u8fc7\u53bb\u7684\u5386\u53f2\u6570\u636e\uff0c\u5982\u679c\u5386\u53f2\u6570\u636e\u670990%\u4ee5\u4e0a\u7684\u8d70\u5de6\u8fb9\uff0c\u90a3\u4e48\u5c31\u8d70\u5de6\u8fb9\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u6392\u597d\u5e8f\u7684\u6570\u636e\u5c31\u66f4\u5bb9\u6613\u731c\u5f97\u5bf9\u3002\u6392\u597d\u5e8f\u7684PythonT=\u8d70\u5206\u652f\uff08\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e3atrue\uff09N=\u4e0d\u8d70\u5206\u652f(\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e3afalse)data[]=0,1,2,3,4,...126,127,128,129,130,...250,251,252,...branch=NNNNN...NNTTT...TTT...=NNNNNNNNNNNN...NNNNNNNTTTTTTTTT...TTTTTTTTTT(easytopredict)1234567T=\u8d70\u5206\u652f\uff08\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e3atrue\uff09N=\u4e0d\u8d70\u5206\u652f(\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e3afalse)\u00a0data[]=0,1,2,3,4,...126,127,128,129,130,...250,251,252,...branch=N\u00a0\u00a0N\u00a0\u00a0N\u00a0\u00a0N\u00a0\u00a0N\u00a0\u00a0...\u00a0\u00a0N\u00a0\u00a0\u00a0\u00a0N\u00a0\u00a0\u00a0\u00a0T\u00a0\u00a0\u00a0\u00a0T\u00a0\u00a0\u00a0\u00a0T\u00a0\u00a0...\u00a0\u00a0T\u00a0\u00a0\u00a0\u00a0T\u00a0\u00a0\u00a0\u00a0T\u00a0\u00a0...\u00a0=NNNNNNNNNNNN...NNNNNNNTTTTTTTTT...TTTTTTTTTT\u00a0\u00a0(easytopredict)\u4ece\u4e0a\u9762\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6392\u597d\u5e8f\u7684\u6570\u636e\u66f4\u5bb9\u6613\u9884\u6d4b\u5206\u652f\u3002\u672a\u6392\u5e8f\u7684Pythondata[]=226,185,125,158,198,144,217,79,202,118,14,150,177,182,133,...branch=T,T,N,T,T,T,T,N,T,N,N,T,T,T,N...=TTNTTTTNTNNTTTN...(completelyrandom-hardtopredict)1234data[]=226,185,125,158,198,144,217,79,202,118,\u00a0\u00a014,150,177,182,133,...branch=\u00a0\u00a0T,\u00a0\u00a0T,\u00a0\u00a0N,\u00a0\u00a0T,\u00a0\u00a0T,\u00a0\u00a0T,\u00a0\u00a0T,\u00a0\u00a0N,\u00a0\u00a0T,\u00a0\u00a0N,\u00a0\u00a0N,\u00a0\u00a0T,\u00a0\u00a0T,\u00a0\u00a0T,\u00a0\u00a0N\u00a0\u00a0...\u00a0=TTNTTTTNTNNTTTN...\u00a0\u00a0(completelyrandom-hardtopredict)\u5bf9\u6b64\uff0c\u90a3\u6211\u4eec\u600e\u4e48\u529e\uff1f\u6211\u4eec\u9700\u8981\u5728\u8fd9\u79cd\u5faa\u73af\u4e2d\u9664\u53bbif-else\u8bed\u53e5\u3002\u6bd4\u5982\uff1a\u6211\u4eec\u628a\u6761\u4ef6\u8bed\u53e5\uff1aPythonif(data[j]&gt;=128)sum+=data[j];12if(data[j]&gt;=128)sum+=data[j];\u53d8\u6210\uff1aPythonintt=(data[j]-128)&gt;&gt;31;sum+=~t&amp;data[j];12intt=(data[j]-128)&gt;&gt;31;sum+=~t&amp;data[j];\u201c\u6ca1\u6709\u5206\u53c9\u201d\u7684\u6027\u80fd\u57fa\u672c\u4e0a\u548c\u201c\u6392\u597d\u5e8f\u6709\u5206\u652f\u201d\u4e00\u4e2a\u6837\uff0c\u65e0\u8bba\u662fC/C++\uff0c\u8fd8\u662fJava\u3002\u6ce8\uff1a\u5728GCC\u4e0b\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u00a0-O3\u00a0or\u00a0-ftree-vectorize\u00a0\u7f16\u8bd1\u53c2\u6570\uff0cGCC\u4f1a\u5e2e\u4f60\u4f18\u5316\u5206\u53c9\u8bed\u53e5\u4e3a\u65e0\u5206\u53c9\u8bed\u53e5\u3002VC++2010\u6ca1\u6709\u8fd9\u4e2a\u529f\u80fd\u3002\u6700\u540e\uff0c\u63a8\u8350\u5927\u5bb6\u4e00\u4e2a\u7f51\u7ad9\u2014\u2014GoogleSpeed\uff0c\u7f51\u7ad9\u4e0a\u7684\u6709\u4e00\u4e9b\u6559\u7a0b\u544a\u8bc9\u4f60\u5982\u4f55\u5199\u51fa\u66f4\u5feb\u7684Web\u7a0b\u5e8f\u3002\uff08\u5168\u6587\u5b8c\uff091\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Django \u4f7f\u7528 Celery \u5b9e\u73b0\u5f02\u6b65\u4efb\u52a1"], "art_url": ["http://python.jobbole.com/88276/"], "art_create_time": ["2017/08/10"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/04/736ee31682cb9cda71540b94b492eb06.jpg"], "art_content": ["\u672c\u6587\u4f5c\u8005\uff1a\u4f2f\u4e50\u5728\u7ebf-\u738b\u6d77\u6ce2\u3002\u672a\u7ecf\u4f5c\u8005\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u6b22\u8fce\u52a0\u5165\u4f2f\u4e50\u5728\u7ebf\u4e13\u680f\u4f5c\u8005\u3002\u5bf9\u4e8e\u7f51\u7ad9\u6765\u8bf4\uff0c\u7ed9\u7528\u6237\u4e00\u4e2a\u8f83\u597d\u7684\u4f53\u9a8c\u662f\u5f88\u91cd\u8981\u7684\u4e8b\u60c5\uff0c\u5176\u4e2d\u6700\u91cd\u8981\u7684\u6307\u6807\u5c31\u662f\u7f51\u7ad9\u7684\u6d4f\u89c8\u901f\u5ea6\u3002\u56e0\u6b64\u670d\u52a1\u7aef\u8981\u4ece\u5404\u4e2a\u65b9\u9762\u5bf9\u7f51\u7ad9\u6027\u80fd\u8fdb\u884c\u4f18\u5316\uff0c\u6bd4\u5982\u53ef\u91c7\u7528CDN\u52a0\u8f7d\u4e00\u4e9b\u516c\u5171\u9759\u6001\u6587\u4ef6\uff0c\u5982js\u548ccss\uff1b\u5408\u5e76css\u6216\u8005js\u4ece\u800c\u51cf\u5c11\u9759\u6001\u6587\u4ef6\u7684\u8bf7\u6c42\u7b49\u7b49\u2026..\u8fd8\u6709\u4e00\u79cd\u65b9\u6cd5\u662f\u5c06\u4e00\u4e9b\u4e0d\u9700\u8981\u7acb\u5373\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u53ef\u4ee5\u5f02\u6b65\u6267\u884c\u7684\u4efb\u52a1\u4ea4\u7ed9\u540e\u53f0\u5904\u7406\uff0c\u4ee5\u9632\u7f51\u7edc\u963b\u585e\uff0c\u51cf\u5c0f\u54cd\u5e94\u65f6\u95f4\u3002\u770b\u4e86the5fire\u7684\u535a\u5ba2\u4e4b\u540e\u6211\u53d7\u5230\u4e86\u542f\u53d1\uff0c\u51b3\u5b9a\u4ece\u8fd9\u65b9\u9762\u8fdb\u884c\u6539\u8fdb\u3002\u6211\u91c7\u7528celery\u5b9e\u73b0\u540e\u53f0\u5f02\u6b65\u6267\u884c\u7684\u9700\u6c42\u3002\u5bf9\u4e8ecelery\uff0c\u5148\u770b\u4e00\u4e0b\u7f51\u4e0a\u7ed9\u7684celery\u7684\u5b9a\u4e49\u548c\u7528\u9014\uff1aCeleryisasimple,flexible,andreliabledistributedsystemtoprocessvastamountsofmessages,whileprovidingoperationswiththetoolsrequiredtomaintainsuchasystem.It\u2019sataskqueuewithfocusonreal-timeprocessing,whilealsosupportingtaskscheduling.Celeryhasalargeanddiversecommunityofusersandcontributors,youshouldcomejoinusonIRCorourmailing-list.12345Celeryisasimple,flexible,andreliabledistributedsystemtoprocessvastamountsofmessages,whileprovidingoperationswiththetoolsrequiredtomaintainsuchasystem.\u00a0It\u2019sataskqueuewithfocusonreal-timeprocessing,whilealsosupportingtaskscheduling.\u00a0Celeryhasalargeanddiversecommunityofusersandcontributors,youshouldcomejoinusonIRCorourmailing-list.\u4e0a\u9762\u7684\u82f1\u6587\u8fd8\u662f\u6bd4\u8f83\u597d\u7406\u89e3\u7684\uff0c\u7b80\u800c\u8a00\u4e4b\uff0c\u5c31\u662f\u4e00\u4e2a\u4e13\u6ce8\u4e8e\u5b9e\u65f6\u5904\u7406\u548c\u4efb\u52a1\u8c03\u5ea6\u7684\u5206\u5e03\u5f0f\u961f\u5217\u3002\u6211\u4e70\u4e86\u4e00\u672c\u300aPythonWeb\u5f00\u53d1\u5b9e\u6218\u300b\uff0c\u90a3\u91cc\u9762\u4e5f\u4ecb\u7ecd\u4e86celery\u3002\u8bf4\u4e86\u4f7f\u7528celery\u7684\u5e38\u89c1\u573a\u666f\uff1aWeb\u5e94\u7528\u3002\u5f53\u7528\u6237\u89e6\u53d1\u4e00\u4e2a\u52a8\u4f5c\u9700\u8981\u8f83\u957f\u65f6\u95f4\u6765\u6267\u884c\u5b8c\u6210\u65f6\uff0c\u53ef\u4ee5\u628a\u5b83\u4f5c\u4e3a\u4efb\u52a1\u4ea4\u7ed9celery\u5f02\u6b65\u6267\u884c\uff0c\u6267\u884c\u5b8c\u518d\u8fd4\u56de\u7ed9\u7528\u6237\u3002\u8fd9\u70b9\u548c\u4f60\u5728\u524d\u7aef\u4f7f\u7528ajax\u5b9e\u73b0\u5f02\u6b65\u52a0\u8f7d\u6709\u5f02\u66f2\u540c\u5de5\u4e4b\u5999\u3002\u5b9a\u65f6\u4efb\u52a1\u3002\u5047\u8bbe\u6709\u591a\u53f0\u670d\u52a1\u5668\uff0c\u591a\u4e2a\u4efb\u52a1\uff0c\u5b9a\u65f6\u4efb\u52a1\u7684\u7ba1\u7406\u662f\u5f88\u56f0\u96be\u7684\uff0c\u4f60\u8981\u5728\u4e0d\u540c\u7535\u8111\u4e0a\u5199\u4e0d\u540c\u7684crontab\uff0c\u800c\u4e14\u8fd8\u4e0d\u597d\u7ba1\u7406\u3002Celery\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u5728\u4e0d\u540c\u7684\u673a\u5668\u8bbe\u5b9a\u4e0d\u540c\u4efb\u52a1\u3002\u5176\u4ed6\u53ef\u4ee5\u5f02\u6b65\u6267\u884c\u7684\u4efb\u52a1\u3002\u6bd4\u5982\u53d1\u9001\u77ed\u4fe1\uff0c\u90ae\u4ef6\uff0c\u63a8\u9001\u6d88\u606f\uff0c\u6e05\u7406/\u8bbe\u7f6e\u7f13\u5b58\u7b49\u3002\u8fd9\u70b9\u8fd8\u662f\u6bd4\u8f83\u6709\u7528\u7684\u3002\u7efc\u4e0a\u6240\u8ff0\uff0c\u7b2c1\u70b9\u548c\u7b2c3\u70b9\u7684\u7528\u9014\u662f\u6211\u8003\u8651celery\u7684\u539f\u56e0\u3002\u76ee\u524d\uff0c\u8003\u8651\u5728Django\u4e2d\u5b9e\u73b0\u4e24\u4e2a\u529f\u80fd\uff1a\u6587\u7ae0\u9605\u8bfb\u91cf\u7684\u7edf\u8ba1\u53d1\u9001\u90ae\u4ef6\u5173\u4e8e\u6587\u7ae0\u9605\u8bfb\u91cf\u7684\u7edf\u8ba1\uff0c\u6211\u4e4b\u524d\u7684\u505a\u6cd5\u5c31\u662f\u5728\u7528\u6237\u6bcf\u4e00\u6b21\u8bbf\u95ee\u6587\u7ae0\u7684\u65f6\u5019\uff0c\u90fd\u4f1a\u540c\u6b65\u6267\u884c\u4e00\u904d+1\u7684\u51fd\u6570\uff0c\u73b0\u5728\u6253\u7b97\u7528\u5f02\u6b65\u6267\u884c\u7684\u65b9\u5f0f\u3002\u4e0b\u9762\u4ecb\u7ecd\u5728Django\u4e2d\u7684\u4f7f\u7528\u65b9\u6cd5\uff1a1\u3001\u73af\u5883\u51c6\u5907\u5b89\u88c5celery\uff0crabbitmq,django-celery.2\u3001\u542f\u52a8\u6d88\u606f\u4e2d\u95f4\u4ef6rabbitmq\u3002\u7528\u5b83\u7684\u539f\u56e0\u662fcelery\u5b98\u65b9\u63a8\u8350\u7684\u5c31\u662f\u5b83\uff0c\u4e5f\u53ef\u4ee5\u7528Redis\u7b49\uff0c\u4f46Redis\u4f1a\u56e0\u4e3a\u65ad\u7535\u7684\u539f\u56e0\u9020\u6210\u6570\u636e\u5168\u90e8\u4e22\u5931\u7b49\u95ee\u9898\u3002\u8ba9\u5176\u5728\u540e\u53f0\u8fd0\u884c\uff1asudorabbitmq-server-detached1sudorabbitmq-server-detached3\u3001\u5728Django\u4e2d\u914d\u7f6e\uff08\u6e90\u4ee3\u7801\uff09\u9879\u76ee\u4ee3\u7801\u7ed3\u6784dailyblog\u251c\u2500\u2500blog\u2502\u251c\u2500\u2500models.py\u2502\u251c\u2500\u2500serializer.py\u2502\u251c\u2500\u2500tasks.py\u2502\u251c\u2500\u2500urls.py\u2502\u251c\u2500\u2500views.py\u251c\u2500\u2500config.yaml\u251c\u2500\u2500dailyblog\u2502\u251c\u2500\u2500celery.py\u2502\u251c\u2500\u2500__init__.py\u2502\u251c\u2500\u2500__init__.pyc\u2502\u251c\u2500\u2500settings.py\u2502\u251c\u2500\u2500urls.py\u2502\u251c\u2500\u2500wsgi.py12345678910111213141516dailyblog\u00a0\u00a0\u00a0\u00a0\u00a0\u251c\u2500\u2500blog\u2502\u00a0\u00a0\u251c\u2500\u2500models.py\u2502\u00a0\u00a0\u251c\u2500\u2500serializer.py\u2502\u00a0\u00a0\u251c\u2500\u2500tasks.py\u2502\u00a0\u00a0\u251c\u2500\u2500urls.py\u2502\u00a0\u00a0\u251c\u2500\u2500views.py\u251c\u2500\u2500config.yaml\u251c\u2500\u2500dailyblog\u2502\u00a0\u00a0\u251c\u2500\u2500celery.py\u2502\u00a0\u00a0\u251c\u2500\u2500__init__.py\u2502\u00a0\u00a0\u251c\u2500\u2500__init__.pyc\u2502\u00a0\u00a0\u251c\u2500\u2500settings.py\u2502\u00a0\u00a0\u251c\u2500\u2500urls.py\u2502\u00a0\u00a0\u251c\u2500\u2500wsgi.py\u5bf9\u4e8ecelery\u7684\u914d\u7f6e\uff0c\u9700\u8981\u7f16\u5199\u51e0\u4e2a\u6587\u4ef6\uff1a1\u3001dailyblog/celery.py2\u3001dailyblog/settings.py3\u3001blog/tasks.py4\u3001dailyblog/__init__.py1234567\u00a0\u00a01\u3001dailyblog/celery.py\u00a0\u00a0\u00a02\u3001dailyblog/settings.py\u00a0\u00a0\u00a03\u3001blog/tasks.py\u00a0\u00a0\u00a04\u3001dailyblog/__init__.py1\u3001dailyblog/celery.py\u672c\u6a21\u5757\u4e3b\u8981\u662f\u521b\u5efa\u4e86celery\u5e94\u7528\uff0c\u914d\u7f6e\u6765\u81eadjango\u7684settings\u6587\u4ef6\u3002from__future__importabsolute_import,unicode_literals#\u76ee\u7684\u662f\u62d2\u7edd\u9690\u58eb\u5f15\u5165\uff0ccelery.py\u548ccelery\u51b2\u7a81\u3002importosfromceleryimportCeleryfromdjango.confimportsettingsos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\",\"dailyblog.settings\")#\u521b\u5efacelery\u5e94\u7528app=Celery('dailyblog')#Youcanpasstheobjectdirectlyhere,butusingastringisbettersincethentheworkerdoesn\u2019thavetoserializetheobject.app.config_from_object('django.conf:settings')#\u5982\u679c\u5728\u5de5\u7a0b\u7684\u5e94\u7528\u4e2d\u521b\u5efa\u4e86tasks.py\u6a21\u5757\uff0c\u90a3\u4e48Celery\u5e94\u7528\u5c31\u4f1a\u81ea\u52a8\u53bb\u68c0\u7d22\u521b\u5efa\u7684\u4efb\u52a1\u3002\u6bd4\u5982\u4f60\u6dfb\u52a0\u4e86\u4e00\u4e2a\u4efb\u52a1\uff0c\u5728django\u4e2d\u4f1a\u5b9e\u65f6\u5730\u68c0\u7d22\u51fa\u6765\u3002app.autodiscover_tasks(lambda:settings.INSTALLED_APPS)1234567891011121314from__future__importabsolute_import,unicode_literals#\u76ee\u7684\u662f\u62d2\u7edd\u9690\u58eb\u5f15\u5165\uff0ccelery.py\u548ccelery\u51b2\u7a81\u3002importosfromceleryimportCeleryfromdjango.confimportsettings\u00a0\u00a0os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\",\"dailyblog.settings\")\u00a0#\u521b\u5efacelery\u5e94\u7528app=Celery('dailyblog')#Youcanpasstheobjectdirectlyhere,butusingastringisbettersincethentheworkerdoesn\u2019thavetoserializetheobject.app.config_from_object('django.conf:settings')#\u5982\u679c\u5728\u5de5\u7a0b\u7684\u5e94\u7528\u4e2d\u521b\u5efa\u4e86tasks.py\u6a21\u5757\uff0c\u90a3\u4e48Celery\u5e94\u7528\u5c31\u4f1a\u81ea\u52a8\u53bb\u68c0\u7d22\u521b\u5efa\u7684\u4efb\u52a1\u3002\u6bd4\u5982\u4f60\u6dfb\u52a0\u4e86\u4e00\u4e2a\u4efb\u52a1\uff0c\u5728django\u4e2d\u4f1a\u5b9e\u65f6\u5730\u68c0\u7d22\u51fa\u6765\u3002app.autodiscover_tasks(lambda:settings.INSTALLED_APPS)\u5173\u4e8econfig_from_object\uff0c\u6211\u5bf9\u4e8e\u5982\u4f55\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u8fd8\u662f\u6bd4\u8f83\u611f\u5174\u8da3\u7684\uff0c\u4e8e\u662f\u7814\u7a76\u4e86\u4e00\u4e0b\u6e90\u7801\uff0c\u5177\u4f53\u53ef\u4ee5\u89c1\uff1a\u201ccelery\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u201d\u30022\u3001settings.py\u914d\u7f6ecelery\uff0cimportdjcelerydjcelery.setup_loader()#\u672b\u5c3e\u6dfb\u52a0CELERYBEAT_SCHEDULER=\u2018djcelery.schedulers.DatabaseScheduler\u2018#\u8fd9\u662f\u4f7f\u7528\u4e86django-celery\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\u8c03\u5ea6\u6a21\u578b,\u4efb\u52a1\u6267\u884c\u5468\u671f\u90fd\u88ab\u5b58\u5728\u4f60\u6307\u5b9a\u7684orm\u6570\u636e\u5e93\u4e2d#INstalled_appsINSTALLED_APPS=(\u2018django.contrib.admin\u2018,\u2018django.contrib.auth\u2018,\u2018django.contrib.contenttypes\u2018,\u2018django.contrib.sessions\u2018,\u2018django.contrib.messages\u2018,\u2018django.contrib.staticfiles\u2018,\u2018djcelery\u2018,####\u8fd9\u91cc\u589e\u52a0\u4e86djcelery\u4e5f\u5c31\u662f\u4e3a\u4e86\u5728djangoadmin\u91cc\u9762\u53ef\u4e00\u76f4\u63a5\u914d\u7f6e\u548c\u67e5\u770bcelery\u2018blog\u2018,###)123456789101112131415161718importdjcelerydjcelery.setup_loader()\u00a0\u00a0#\u672b\u5c3e\u6dfb\u52a0CELERYBEAT_SCHEDULER=\u2018djcelery.schedulers.DatabaseScheduler\u2018\u00a0\u00a0#\u8fd9\u662f\u4f7f\u7528\u4e86django-celery\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\u8c03\u5ea6\u6a21\u578b,\u4efb\u52a1\u6267\u884c\u5468\u671f\u90fd\u88ab\u5b58\u5728\u4f60\u6307\u5b9a\u7684orm\u6570\u636e\u5e93\u4e2d\u00a0#INstalled_apps\u00a0\u00a0\u00a0\u00a0INSTALLED_APPS=(\u00a0\u00a0\u00a0\u00a0\u2018django.contrib.admin\u2018,\u00a0\u00a0\u00a0\u00a0\u2018django.contrib.auth\u2018,\u00a0\u00a0\u00a0\u00a0\u2018django.contrib.contenttypes\u2018,\u00a0\u00a0\u00a0\u00a0\u2018django.contrib.sessions\u2018,\u00a0\u00a0\u00a0\u00a0\u2018django.contrib.messages\u2018,\u00a0\u00a0\u00a0\u00a0\u2018django.contrib.staticfiles\u2018,\u00a0\u00a0\u00a0\u00a0\u2018djcelery\u2018,\u00a0\u00a0\u00a0\u00a0####\u8fd9\u91cc\u589e\u52a0\u4e86djcelery\u4e5f\u5c31\u662f\u4e3a\u4e86\u5728djangoadmin\u91cc\u9762\u53ef\u4e00\u76f4\u63a5\u914d\u7f6e\u548c\u67e5\u770bcelery\u00a0\u00a0\u00a0\u00a0\u2018blog\u2018,\u00a0\u00a0\u00a0\u00a0###)setup_loader\u76ee\u7684\u662f\u8bbe\u5b9acelery\u7684\u52a0\u8f7d\u5668\uff0c\u6e90\u7801\uff1adefsetup_loader():#noqaos.environ.setdefault(b'CELERY_LOADER',b'djcelery.loaders.DjangoLoader',)1234\u00a0\u00a0defsetup_loader():\u00a0\u00a0#noqa\u00a0\u00a0\u00a0\u00a0os.environ.setdefault(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0b'CELERY_LOADER',b'djcelery.loaders.DjangoLoader',\u00a0\u00a0\u00a0\u00a0)3\u3001dailyblog/init.pyfrom__future__importabsolute_import#Thiswillmakesuretheappisalwaysimportedwhen#Djangostartssothatshared_taskwillusethisapp.from.celeryimportappascelery_app12345from__future__importabsolute_import\u00a0#Thiswillmakesuretheappisalwaysimportedwhen#Djangostartssothatshared_taskwillusethisapp.from.celeryimportappascelery_app4\u3001blog/tasks.pyfromdjango.db.modelsimportFfrom.modelsimportArticlefromdailyblogimportcelery_app@celery_app.taskdefincr_readtimes(article_id):returnArticle.objects.filter(id=article_id).update(read_times=F('read_times')+1)123456789fromdjango.db.modelsimportF\u00a0from.modelsimportArticlefromdailyblogimportcelery_app\u00a0\u00a0@celery_app.taskdefincr_readtimes(article_id):\u00a0\u00a0\u00a0\u00a0returnArticle.objects.filter(id=article_id).update(read_times=F('read_times')+1)\u8fd9\u91cc\u9762\u6dfb\u52a0\u4e86\u4e00\u4e2a\u4efb\u52a1\u3002\u4efb\u52a1\u53ef\u4ee5\u901a\u8fc7delay\u65b9\u6cd5\u6267\u884c\uff0c\u4e5f\u53ef\u4ee5\u5468\u671f\u6027\u5730\u6267\u884c\u3002\u8fd9\u91cc\u8fd8\u9700\u8981\u6ce8\u610f\uff0c\u5982\u679c\u628a\u4e0a\u9762\u4efb\u52a1\u7684\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u7a0b\u5e8f\u4e5f\u4f1a\u88ab\u963b\u585e\uff0c\u9700\u8981\u7b49\u5f85\u5f02\u6b65\u4efb\u52a1\u8fd4\u56de\u7684\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u5b9e\u9645\u5e94\u7528\u4e0d\u9700\u8981\u8d4b\u503c\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u5199\u597d\u540e\uff0c\u8981\u6267\u884c\u6570\u636e\u5e93\u66f4\u65b0\uff1apythonmanage.pymakemigrationspythonmanage.pymigrate.12pythonmanage.pymakemigrationspythonmanage.pymigrate.Django\u4f1a\u521b\u5efa\u4e86\u51e0\u4e2a\u6570\u636e\u5e93\uff0c\u5206\u522b\u4e3a\uff1aCrontabsIntervalsPeriodictasksTasksWorkers\u5728views.py\u6dfb\u52a0\u5f02\u6b65\u4efb\u52a1\uff1afrom.tasksimportincr_readtimesclassArticleDetailView(BaseMixin,DetailView):defget(self,request,*args,**kwargs):.......incr_readtimes.delay(self.object.id)1234567from.tasksimportincr_readtimesclassArticleDetailView(BaseMixin,DetailView):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defget(self,request,*args,**kwargs):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.......\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0incr_readtimes.delay(self.object.id)\u8fd9\u91cc\u4e0d\u9700\u8981\u8d4b\u503c\u3002\u4e0b\u9762\u8981\u542f\u52a8celery\uff0c\u6211\u91c7\u7528supervisor\u8fdb\u7a0b\u7ba1\u7406\u5668\u6765\u7ba1\u7406celery\uff1a[program:celery]command=celery-Adailyblogworker--loglevel=INFOdirectory=/srv/dailyblog/www/numprocess=1startsecs=0stopwaitsecs=0autostart=trueautorestart=truestdout_logfile=/tmp/celery.logstderr_logfile=/tmp/celery.err12345678910[program:celery]command=celery-Adailyblogworker--loglevel=INFOdirectory=/srv/dailyblog/www/numprocess=1startsecs=0stopwaitsecs=0autostart=trueautorestart=truestdout_logfile=/tmp/celery.logstderr_logfile=/tmp/celery.err\u91cd\u65b0\u52a0\u8f7dsupervisor.conf\u6587\u4ef6\uff0c\u7136\u540e\u542f\u52a8celery\uff1asupervisorctlstartcelery1supervisorctlstartcelery\u81f3\u6b64\uff0c\u901a\u8fc7celery\u5f02\u6b65\u6267\u884c\u4efb\u52a1\u7684\u7a0b\u5e8f\u5199\u5b8c\u4e86\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u5199\u5f88\u591a\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u53d1\u90ae\u4ef6\u5c31\u662f\u975e\u5e38\u5178\u578b\u7684\u4e00\u79cd\u3002\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u4f5c\u8005\u6253\u8d4f\u652f\u6301\u6211\u5199\u51fa\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u4efb\u9009\u4e00\u79cd\u652f\u4ed8\u65b9\u5f0f1\u8d5e5\u6536\u85cf1\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u738b\u6d77\u6ce2\u70ed\u7231Python\uff0c\u5e0c\u671b\u80fd\u4e00\u76f4\u505a\u81ea\u5df1\u70ed\u7231\u7684\u4e8b\uff01\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b713\u00b7"]},
{"art_title": ["Python \u722c\u866b\u5b9e\u6218(2)\uff1a\u80a1\u7968\u6570\u636e\u5b9a\u5411\u722c\u866b"], "art_url": ["http://python.jobbole.com/88350/"], "art_create_time": ["2017/08/12"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/08/6b30322fa6b042eff6d3f60a95b8220b.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1ahang\u00a0\u00a0\u00a0\u529f\u80fd\u7b80\u4ecb\u76ee\u6807\uff1a\u83b7\u53d6\u4e0a\u4ea4\u6240\u548c\u6df1\u4ea4\u6240\u6240\u6709\u80a1\u7968\u7684\u540d\u79f0\u548c\u4ea4\u6613\u4fe1\u606f\u3002\u8f93\u51fa\uff1a\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\u3002\u6280\u672f\u8def\u7ebf\uff1arequests\u2014bs4\u2013re\u8bed\u8a00\uff1apython3.5\u8bf4\u660e\u7f51\u7ad9\u9009\u62e9\u539f\u5219\uff1a\u80a1\u7968\u4fe1\u606f\u9759\u6001\u5b58\u5728\u4e8ehtml\u9875\u9762\u4e2d\uff0c\u975ejs\u4ee3\u7801\u751f\u6210\uff0c\u6ca1\u6709Robbts\u534f\u8bae\u9650\u5236\u3002\u9009\u53d6\u65b9\u6cd5\uff1a\u6253\u5f00\u7f51\u9875\uff0c\u67e5\u770b\u6e90\u4ee3\u7801\uff0c\u641c\u7d22\u7f51\u9875\u7684\u80a1\u7968\u4ef7\u683c\u6570\u636e\u662f\u5426\u5b58\u5728\u4e8e\u6e90\u4ee3\u7801\u4e2d\u3002\u5982\u6253\u5f00\u65b0\u6d6a\u80a1\u7968\u7f51\u5740\uff1a\u94fe\u63a5\u63cf\u8ff0\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u4e0a\u56fe\u4e2d\u5de6\u8fb9\u4e3a\u7f51\u9875\u7684\u754c\u9762\uff0c\u663e\u793a\u4e86\u5929\u5c71\u80a1\u4efd\u7684\u80a1\u7968\u4ef7\u683c\u662f13.06\u3002\u53f3\u8fb9\u4e3a\u8be5\u7f51\u9875\u7684\u6e90\u4ee3\u7801\uff0c\u5728\u6e90\u4ee3\u7801\u4e2d\u67e5\u8be213.06\u53d1\u73b0\u6ca1\u6709\u627e\u5230\u3002\u6240\u4ee5\u5224\u65ad\u8be5\u7f51\u9875\u7684\u6570\u636e\u4f7f\u7528js\u751f\u6210\u7684\uff0c\u4e0d\u9002\u5408\u672c\u9879\u76ee\u3002\u56e0\u6b64\u6362\u4e00\u4e2a\u7f51\u9875\u3002\u518d\u6253\u5f00\u767e\u5ea6\u80a1\u7968\u7684\u7f51\u5740\uff1a\u94fe\u63a5\u63cf\u8ff0\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u4ece\u4e0a\u56fe\u4e2d\u53ef\u4ee5\u53d1\u73b0\u767e\u5ea6\u80a1\u7968\u7684\u6570\u636e\u662fhtml\u4ee3\u7801\u751f\u6210\u7684\uff0c\u7b26\u5408\u6211\u4eec\u672c\u9879\u76ee\u7684\u8981\u6c42\uff0c\u6240\u4ee5\u5728\u672c\u9879\u76ee\u4e2d\u9009\u62e9\u767e\u5ea6\u80a1\u7968\u7684\u7f51\u5740\u3002\u7531\u4e8e\u767e\u5ea6\u80a1\u7968\u53ea\u6709\u5355\u4e2a\u80a1\u7968\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u5f53\u524d\u80a1\u7968\u5e02\u573a\u4e2d\u6240\u6709\u80a1\u7968\u7684\u5217\u8868\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u4e1c\u65b9\u8d22\u5bcc\u7f51\uff0c\u7f51\u5740\u4e3a\uff1a\u94fe\u63a5\u63cf\u8ff0\uff0c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u539f\u7406\u5206\u6790\u67e5\u770b\u767e\u5ea6\u80a1\u7968\u6bcf\u53ea\u80a1\u7968\u7684\u7f51\u5740\uff1ahttps://gupiao.baidu.com/stock/sz300023.html\uff0c\u53ef\u4ee5\u53d1\u73b0\u7f51\u5740\u4e2d\u6709\u4e00\u4e2a\u7f16\u53f7300023\u6b63\u597d\u662f\u8fd9\u53ea\u80a1\u7968\u7684\u7f16\u53f7\uff0csz\u8868\u793a\u7684\u6df1\u5733\u4ea4\u6613\u6240\u3002\u56e0\u6b64\u6211\u4eec\u6784\u9020\u7684\u7a0b\u5e8f\u7ed3\u6784\u5982\u4e0b\uff1a\u6b65\u9aa41\uff1a\u4ece\u4e1c\u65b9\u8d22\u5bcc\u7f51\u83b7\u53d6\u80a1\u7968\u5217\u8868\uff1b\u6b65\u9aa42\uff1a\u9010\u4e00\u83b7\u53d6\u80a1\u7968\u4ee3\u7801\uff0c\u5e76\u589e\u52a0\u5230\u767e\u5ea6\u80a1\u7968\u7684\u94fe\u63a5\u4e2d\uff0c\u6700\u540e\u5bf9\u8fd9\u4e9b\u94fe\u63a5\u8fdb\u884c\u9010\u4e2a\u7684\u8bbf\u95ee\u83b7\u5f97\u80a1\u7968\u7684\u4fe1\u606f\uff1b\u6b65\u9aa43\uff1a\u5c06\u7ed3\u679c\u5b58\u50a8\u5230\u6587\u4ef6\u3002\u63a5\u7740\u67e5\u770b\u767e\u5ea6\u4e2a\u80a1\u4fe1\u606f\u7f51\u9875\u7684\u6e90\u4ee3\u7801\uff0c\u53d1\u73b0\u6bcf\u53ea\u80a1\u7968\u7684\u4fe1\u606f\u5728html\u4ee3\u7801\u4e2d\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b\uff1a\u56e0\u6b64\uff0c\u5728\u6211\u4eec\u5b58\u50a8\u6bcf\u53ea\u80a1\u7968\u7684\u4fe1\u606f\u65f6\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0a\u56fe\u4e2dhtml\u4ee3\u7801\u7684\u5b58\u50a8\u65b9\u5f0f\u3002\u6bcf\u4e00\u4e2a\u4fe1\u606f\u6e90\u5bf9\u5e94\u4e00\u4e2a\u4fe1\u606f\u503c\uff0c\u5373\u91c7\u7528\u952e\u503c\u5bf9\u7684\u65b9\u5f0f\u8fdb\u884c\u5b58\u50a8\u3002\u5728python\u4e2d\u952e\u503c\u5bf9\u7684\u65b9\u5f0f\u53ef\u4ee5\u7528\u5b57\u5178\u7c7b\u578b\u3002\u56e0\u6b64\uff0c\u5728\u672c\u9879\u76ee\u4e2d\uff0c\u4f7f\u7528\u5b57\u5178\u6765\u5b58\u50a8\u6bcf\u53ea\u80a1\u7968\u7684\u4fe1\u606f\uff0c\u7136\u540e\u518d\u7528\u5b57\u5178\u628a\u6240\u6709\u80a1\u7968\u7684\u4fe1\u606f\u8bb0\u5f55\u8d77\u6765\uff0c\u6700\u540e\u5c06\u5b57\u5178\u4e2d\u7684\u6570\u636e\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d\u3002\u4ee3\u7801\u7f16\u5199\u9996\u5148\u662f\u83b7\u5f97html\u7f51\u9875\u6570\u636e\u7684\u7a0b\u5e8f\uff0c\u5728\u8fd9\u91cc\u4e0d\u591a\u505a\u4ecb\u7ecd\u4e86\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPython#\u83b7\u5f97html\u6587\u672cdefgetHTMLText(url):try:r=requests.get(url)r.raise_for_status()r.encoding=r.apparent_encodingreturnr.textexcept:return\"\"123456789#\u83b7\u5f97html\u6587\u672cdefgetHTMLText(url):\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r=requests.get(url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r.raise_for_status()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r.encoding=r.apparent_encoding\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnr.text\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\"\"\u63a5\u4e0b\u6765\u662fhtml\u4ee3\u7801\u89e3\u6790\u7a0b\u5e8f\uff0c\u5728\u8fd9\u91cc\u9996\u5148\u9700\u8981\u89e3\u6790\u7684\u662f\u4e1c\u65b9\u8d22\u5bcc\u7f51\u9875\u9762\uff1a\u94fe\u63a5\u63cf\u8ff0\uff0c\u6211\u4eec\u6253\u5f00\u5176\u6e90\u4ee3\u7801\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u7531\u4e0a\u56fe\u53ef\u4ee5\u770b\u5230\uff0ca\u6807\u7b7e\u7684href\u5c5e\u6027\u4e2d\u7684\u7f51\u5740\u94fe\u63a5\u91cc\u9762\u6709\u6bcf\u53ea\u80a1\u7968\u7684\u5bf9\u5e94\u7684\u53f7\u7801\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u8981\u628a\u7f51\u5740\u91cc\u9762\u5bf9\u5e94\u80a1\u7968\u7684\u53f7\u7801\u89e3\u6790\u51fa\u6765\u5373\u53ef\u3002\u89e3\u6790\u6b65\u9aa4\u5982\u4e0b\uff1a\u7b2c\u4e00\u6b65\uff0c\u83b7\u5f97\u4e00\u4e2a\u9875\u9762\uff1aPythonhtml=getHTMLText(stockURL)1html=getHTMLText(stockURL)\u7b2c\u4e8c\u6b65\uff0c\u89e3\u6790\u9875\u9762\uff0c\u627e\u5230\u6240\u6709\u7684a\u6807\u7b7e\uff1aPythonsoup=BeautifulSoup(html,'html.parser')a=soup.find_all('a')12soup=BeautifulSoup(html,'html.parser')a=soup.find_all('a')\u7b2c\u4e09\u6b65\uff0c\u5bf9a\u6807\u7b7e\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8fdb\u884c\u904d\u5386\u6765\u8fdb\u884c\u76f8\u5173\u7684\u5904\u7406\u3002\u5904\u7406\u8fc7\u7a0b\u5982\u4e0b\uff1a1.\u627e\u5230a\u6807\u7b7e\u4e2d\u7684href\u5c5e\u6027\uff0c\u5e76\u4e14\u5224\u65ad\u5c5e\u6027\u4e2d\u95f4\u7684\u94fe\u63a5\uff0c\u628a\u94fe\u63a5\u540e\u9762\u7684\u6570\u5b57\u53d6\u51fa\u6765\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u8fdb\u884c\u5339\u914d\u3002\u7531\u4e8e\u6df1\u5733\u4ea4\u6613\u6240\u7684\u4ee3\u7801\u4ee5sz\u5f00\u5934\uff0c\u4e0a\u6d77\u4ea4\u6613\u6240\u7684\u4ee3\u7801\u4ee5sh\u5f00\u5934\uff0c\u80a1\u7968\u7684\u6570\u5b57\u67096\u4f4d\u6784\u6210\uff0c\u6240\u4ee5\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5199\u4e3a[s][hz]\\d{6}\u3002\u4e5f\u5c31\u662f\u8bf4\u6784\u9020\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5728\u94fe\u63a5\u4e2d\u53bb\u5bfb\u627e\u6ee1\u8db3\u8fd9\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5e76\u628a\u5b83\u63d0\u53d6\u51fa\u6765\u3002\u4ee3\u7801\u5982\u4e0b\uff1aPythonforiina:href=i.attrs['href']lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])123foriina:\u00a0\u00a0\u00a0\u00a0href=i.attrs['href']\u00a0\u00a0\u00a0\u00a0lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])2.\u7531\u4e8e\u5728html\u4e2d\u6709\u5f88\u591a\u7684a\u6807\u7b7e\uff0c\u4f46\u662f\u6709\u4e9ba\u6807\u7b7e\u4e2d\u6ca1\u6709href\u5c5e\u6027\uff0c\u56e0\u6b64\u4e0a\u8ff0\u7a0b\u5e8f\u5728\u8fd0\u884c\u7684\u65f6\u5019\u51fa\u73b0\u5f02\u5e38\uff0c\u6240\u6709\u5bf9\u4e0a\u8ff0\u7684\u7a0b\u5e8f\u8fd8\u8981\u8fdb\u884ctry\u2026except\u6765\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u5f02\u5e38\u5904\u7406\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythonforiina:try:href=i.attrs['href']lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])except:continue123456foriina:\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0href=i.attrs['href']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u4ece\u4e0a\u9762\u4ee3\u7801\u53ef\u4ee5\u770b\u51fa\uff0c\u5bf9\u4e8e\u51fa\u73b0\u5f02\u5e38\u7684\u60c5\u51b5\u6211\u4eec\u4f7f\u7528\u4e86continue\u8bed\u53e5\uff0c\u76f4\u63a5\u8ba9\u5176\u8df3\u8fc7\uff0c\u7ee7\u7eed\u6267\u884c\u4e0b\u9762\u7684\u8bed\u53e5\u3002\u901a\u8fc7\u4e0a\u9762\u7684\u7a0b\u5e8f\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u4e1c\u65b9\u8d22\u5bcc\u7f51\u4e0a\u80a1\u7968\u7684\u4ee3\u7801\u4fe1\u606f\u5168\u90e8\u4fdd\u5b58\u4e0b\u6765\u4e86\u3002\u5c06\u4e0a\u8ff0\u7684\u4ee3\u7801\u5c01\u88c5\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u5bf9\u4e1c\u65b9\u8d22\u5bcc\u7f51\u9875\u9762\u89e3\u6790\u7684\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1aPythondefgetStockList(lst,stockURL):html=getHTMLText(stockURL)soup=BeautifulSoup(html,'html.parser')a=soup.find_all('a')foriina:try:href=i.attrs['href']lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])except:continue12345678910defgetStockList(lst,stockURL):\u00a0\u00a0\u00a0\u00a0html=getHTMLText(stockURL)\u00a0\u00a0\u00a0\u00a0soup=BeautifulSoup(html,'html.parser')\u00a0\u00a0\u00a0\u00a0a=soup.find_all('a')\u00a0\u00a0\u00a0\u00a0foriina:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0href=i.attrs['href']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u63a5\u4e0b\u6765\u662f\u83b7\u5f97\u767e\u5ea6\u80a1\u7968\u7f51\u94fe\u63a5\u63cf\u8ff0\u5355\u53ea\u80a1\u7968\u7684\u4fe1\u606f\u3002\u6211\u4eec\u5148\u67e5\u770b\u8be5\u9875\u9762\u7684\u6e90\u4ee3\u7801\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u80a1\u7968\u7684\u4fe1\u606f\u5c31\u5b58\u5728\u4e0a\u56fe\u6240\u793a\u7684html\u4ee3\u7801\u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u6bb5html\u4ee3\u7801\u8fdb\u884c\u89e3\u6790\u3002\u8fc7\u7a0b\u5982\u4e0b\uff1a1.\u767e\u5ea6\u80a1\u7968\u7f51\u7684\u7f51\u5740\u4e3a\uff1ahttps://gupiao.baidu.com/stock/\u4e00\u53ea\u80a1\u7968\u4fe1\u606f\u7684\u7f51\u5740\u4e3a\uff1ahttps://gupiao.baidu.com/stock/sz300023.html\u6240\u4ee5\u53ea\u8981\u767e\u5ea6\u80a1\u7968\u7f51\u7684\u7f51\u5740+\u6bcf\u53ea\u80a1\u7968\u7684\u4ee3\u7801\u5373\u53ef\uff0c\u800c\u6bcf\u53ea\u80a1\u7968\u7684\u4ee3\u7801\u6211\u4eec\u5df2\u7ecf\u6709\u524d\u9762\u7684\u7a0b\u5e8fgetStockList\u4ece\u4e1c\u65b9\u8d22\u5bcc\u7f51\u89e3\u6790\u51fa\u6765\u4e86\uff0c\u56e0\u6b64\u5bf9getStockList\u51fd\u6570\u8fd4\u56de\u7684\u5217\u8868\u8fdb\u884c\u904d\u5386\u5373\u53ef\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythonforstockinlst:url=stockURL+stock+\".html\"12forstockinlst:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0url=stockURL+stock+\".html\"2.\u83b7\u5f97\u7f51\u5740\u540e\uff0c\u5c31\u8981\u8bbf\u95ee\u7f51\u9875\u83b7\u5f97\u7f51\u9875\u7684html\u4ee3\u7801\u4e86\uff0c\u7a0b\u5e8f\u5982\u4e0b\uff1aPythonhtml=getHTMLText(url)1html=getHTMLText(url)3.\u83b7\u5f97\u4e86html\u4ee3\u7801\u540e\u5c31\u9700\u8981\u5bf9html\u4ee3\u7801\u8fdb\u884c\u89e3\u6790\uff0c\u7531\u4e0a\u56fe\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5355\u4e2a\u80a1\u7968\u7684\u4fe1\u606f\u5b58\u653e\u5728\u6807\u7b7e\u4e3adiv,\u5c5e\u6027\u4e3astock-bets\u7684html\u4ee3\u7801\u4e2d\uff0c\u56e0\u6b64\u5bf9\u5176\u8fdb\u884c\u89e3\u6790\uff1aPythonsoup=BeautifulSoup(html,'html.parser')stockInfo=soup.find('div',attrs={'class':'stock-bets'})12soup=BeautifulSoup(html,'html.parser')stockInfo=soup.find('div',attrs={'class':'stock-bets'})4.\u6211\u4eec\u53c8\u53d1\u73b0\u80a1\u7968\u540d\u79f0\u5728bets-name\u6807\u7b7e\u5185\uff0c\u7ee7\u7eed\u89e3\u6790\uff0c\u5b58\u5165\u5b57\u5178\u4e2d\uff1aPythoninfoDict={}name=stockInfo.find_all(attrs={'class':'bets-name'})[0]infoDict.update({'\u80a1\u7968\u540d\u79f0':name.text.split()[0]})123infoDict={}name=stockInfo.find_all(attrs={'class':'bets-name'})[0]infoDict.update({'\u80a1\u7968\u540d\u79f0':name.text.split()[0]})split()\u7684\u610f\u601d\u662f\u80a1\u7968\u540d\u79f0\u7a7a\u683c\u540e\u9762\u7684\u90e8\u5206\u4e0d\u9700\u8981\u4e86\u30025.\u6211\u4eec\u4ecehtml\u4ee3\u7801\u4e2d\u8fd8\u53ef\u4ee5\u89c2\u5bdf\u5230\u80a1\u7968\u7684\u5176\u4ed6\u4fe1\u606f\u5b58\u653e\u5728dt\u548cdd\u6807\u7b7e\u4e2d\uff0c\u5176\u4e2ddt\u8868\u793a\u80a1\u7968\u4fe1\u606f\u7684\u952e\u57df\uff0cdd\u6807\u7b7e\u662f\u503c\u57df\u3002\u83b7\u53d6\u5168\u90e8\u7684\u952e\u548c\u503c\uff1aPythonkeyList=stockInfo.find_all('dt')valueList=stockInfo.find_all('dd')12keyList=stockInfo.find_all('dt')valueList=stockInfo.find_all('dd')\u5e76\u628a\u83b7\u5f97\u7684\u952e\u548c\u503c\u6309\u952e\u503c\u5bf9\u7684\u65b9\u5f0f\u6751\u653e\u5165\u5b57\u5178\u4e2d\uff1aPythonforiinrange(len(keyList)):key=keyList[i].textval=valueList[i].textinfoDict[key]=val1234foriinrange(len(keyList)):\u00a0\u00a0\u00a0\u00a0key=keyList[i].text\u00a0\u00a0\u00a0\u00a0val=valueList[i].text\u00a0\u00a0\u00a0\u00a0infoDict[key]=val6.\u6700\u540e\u628a\u5b57\u5178\u4e2d\u7684\u6570\u636e\u5b58\u5165\u5916\u90e8\u6587\u4ef6\u4e2d\uff1aPythonwithopen(fpath,'a',encoding='utf-8')asf:f.write(str(infoDict)+'\\n')12withopen(fpath,'a',encoding='utf-8')asf:f.write(str(infoDict)+'\\n')\u5c06\u4e0a\u8ff0\u8fc7\u7a0b\u5c01\u88c5\u6210\u5b8c\u6210\u7684\u51fd\u6570\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythondefgetStockInfo(lst,stockURL,fpath):forstockinlst:url=stockURL+stock+\".html\"html=getHTMLText(url)try:ifhtml==\"\":continueinfoDict={}soup=BeautifulSoup(html,'html.parser')stockInfo=soup.find('div',attrs={'class':'stock-bets'})name=stockInfo.find_all(attrs={'class':'bets-name'})[0]infoDict.update({'\u80a1\u7968\u540d\u79f0':name.text.split()[0]})keyList=stockInfo.find_all('dt')valueList=stockInfo.find_all('dd')foriinrange(len(keyList)):key=keyList[i].textval=valueList[i].textinfoDict[key]=valwithopen(fpath,'a',encoding='utf-8')asf:f.write(str(infoDict)+'\\n')except:continue12345678910111213141516171819202122232425defgetStockInfo(lst,stockURL,fpath):\u00a0\u00a0\u00a0\u00a0forstockinlst:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0url=stockURL+stock+\".html\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0html=getHTMLText(url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhtml==\"\":\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0infoDict={}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0soup=BeautifulSoup(html,'html.parser')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0stockInfo=soup.find('div',attrs={'class':'stock-bets'})\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name=stockInfo.find_all(attrs={'class':'bets-name'})[0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0infoDict.update({'\u80a1\u7968\u540d\u79f0':name.text.split()[0]})\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0keyList=stockInfo.find_all('dt')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0valueList=stockInfo.find_all('dd')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriinrange(len(keyList)):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0key=keyList[i].text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0val=valueList[i].text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0infoDict[key]=val\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0withopen(fpath,'a',encoding='utf-8')asf:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f.write(str(infoDict)+'\\n')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u5176\u4e2dtry\u2026except\u7528\u4e8e\u5f02\u5e38\u5904\u7406\u3002\u63a5\u4e0b\u6765\u7f16\u5199\u4e3b\u51fd\u6570\uff0c\u8c03\u7528\u4e0a\u8ff0\u51fd\u6570\u5373\u53ef\uff1aPythondefmain():stock_list_url='http://quote.eastmoney.com/stocklist.html'stock_info_url='https://gupiao.baidu.com/stock/'output_file='D:/BaiduStockInfo.txt'slist=[]getStockList(slist,stock_list_url)getStockInfo(slist,stock_info_url,output_file)1234567defmain():\u00a0\u00a0\u00a0\u00a0stock_list_url='http://quote.eastmoney.com/stocklist.html'\u00a0\u00a0\u00a0\u00a0stock_info_url='https://gupiao.baidu.com/stock/'\u00a0\u00a0\u00a0\u00a0output_file='D:/BaiduStockInfo.txt'\u00a0\u00a0\u00a0\u00a0slist=[]\u00a0\u00a0\u00a0\u00a0getStockList(slist,stock_list_url)\u00a0\u00a0\u00a0\u00a0getStockInfo(slist,stock_info_url,output_file)\u9879\u76ee\u5b8c\u6574\u7a0b\u5e8fPython#-*-coding:utf-8-*-importrequestsfrombs4importBeautifulSoupimporttracebackimportredefgetHTMLText(url):try:r=requests.get(url)r.raise_for_status()r.encoding=r.apparent_encodingreturnr.textexcept:return\"\"defgetStockList(lst,stockURL):html=getHTMLText(stockURL)soup=BeautifulSoup(html,'html.parser')a=soup.find_all('a')foriina:try:href=i.attrs['href']lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])except:continuedefgetStockInfo(lst,stockURL,fpath):count=0forstockinlst:url=stockURL+stock+\".html\"html=getHTMLText(url)try:ifhtml==\"\":continueinfoDict={}soup=BeautifulSoup(html,'html.parser')stockInfo=soup.find('div',attrs={'class':'stock-bets'})name=stockInfo.find_all(attrs={'class':'bets-name'})[0]infoDict.update({'\u80a1\u7968\u540d\u79f0':name.text.split()[0]})keyList=stockInfo.find_all('dt')valueList=stockInfo.find_all('dd')foriinrange(len(keyList)):key=keyList[i].textval=valueList[i].textinfoDict[key]=valwithopen(fpath,'a',encoding='utf-8')asf:f.write(str(infoDict)+'\\n')count=count+1print(\"\\r\u5f53\u524d\u8fdb\u5ea6:{:.2f}%\".format(count*100/len(lst)),end=\"\")except:count=count+1print(\"\\r\u5f53\u524d\u8fdb\u5ea6:{:.2f}%\".format(count*100/len(lst)),end=\"\")continuedefmain():stock_list_url='http://quote.eastmoney.com/stocklist.html'stock_info_url='https://gupiao.baidu.com/stock/'output_file='D:/BaiduStockInfo.txt'slist=[]getStockList(slist,stock_list_url)getStockInfo(slist,stock_info_url,output_file)main()12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667#-*-coding:utf-8-*-\u00a0importrequestsfrombs4importBeautifulSoupimporttracebackimportredefgetHTMLText(url):\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r=requests.get(url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r.raise_for_status()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0r.encoding=r.apparent_encoding\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnr.text\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\"\"defgetStockList(lst,stockURL):\u00a0\u00a0\u00a0\u00a0html=getHTMLText(stockURL)\u00a0\u00a0\u00a0\u00a0soup=BeautifulSoup(html,'html.parser')\u00a0\u00a0\u00a0\u00a0a=soup.find_all('a')\u00a0\u00a0\u00a0\u00a0foriina:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0href=i.attrs['href']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lst.append(re.findall(r\"[s][hz]\\d{6}\",href)[0])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continuedefgetStockInfo(lst,stockURL,fpath):\u00a0\u00a0\u00a0\u00a0count=0\u00a0\u00a0\u00a0\u00a0forstockinlst:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0url=stockURL+stock+\".html\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0html=getHTMLText(url)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifhtml==\"\":\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0infoDict={}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0soup=BeautifulSoup(html,'html.parser')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0stockInfo=soup.find('div',attrs={'class':'stock-bets'})\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name=stockInfo.find_all(attrs={'class':'bets-name'})[0]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0infoDict.update({'\u80a1\u7968\u540d\u79f0':name.text.split()[0]})\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0keyList=stockInfo.find_all('dt')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0valueList=stockInfo.find_all('dd')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriinrange(len(keyList)):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0key=keyList[i].text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0val=valueList[i].text\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0infoDict[key]=val\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0withopen(fpath,'a',encoding='utf-8')asf:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f.write(str(infoDict)+'\\n')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0count=count+1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(\"\\r\u5f53\u524d\u8fdb\u5ea6:{:.2f}%\".format(count*100/len(lst)),end=\"\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0count=count+1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print(\"\\r\u5f53\u524d\u8fdb\u5ea6:{:.2f}%\".format(count*100/len(lst)),end=\"\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continuedefmain():\u00a0\u00a0\u00a0\u00a0stock_list_url='http://quote.eastmoney.com/stocklist.html'\u00a0\u00a0\u00a0\u00a0stock_info_url='https://gupiao.baidu.com/stock/'\u00a0\u00a0\u00a0\u00a0output_file='D:/BaiduStockInfo.txt'\u00a0\u00a0\u00a0\u00a0slist=[]\u00a0\u00a0\u00a0\u00a0getStockList(slist,stock_list_url)\u00a0\u00a0\u00a0\u00a0getStockInfo(slist,stock_info_url,output_file)main()\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684print\u8bed\u53e5\u7528\u4e8e\u6253\u5370\u722c\u53d6\u7684\u8fdb\u5ea6\u3002\u6267\u884c\u5b8c\u4e0a\u8ff0\u4ee3\u7801\u540e\u5728D\u76d8\u4f1a\u51fa\u73b0BaiduStockInfo.txt\u6587\u4ef6\uff0c\u91cc\u9762\u5b58\u653e\u4e86\u80a1\u7968\u7684\u4fe1\u606f\u30022\u8d5e14\u6536\u85cf1\u8bc4\u8bba"]},
{"art_title": ["Python \u5173\u952e\u5b57 yield \u8be6\u89e3"], "art_url": ["http://python.jobbole.com/28506/"], "art_create_time": ["2013/01/29"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u5218\u5fd7\u519b\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1astackoverflow\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u5bfc\u8bfb\uff1a\u6b64\u6587\u7531\u4f2f\u4e50\u5728\u7ebf\u2013\u5218\u5fd7\u519b\u7f16\u8bd1\u81eastackoverflowPython\u6807\u7b7e\u4e2d\u6295\u7968\u7387\u6700\u9ad8\u7684\u4e00\u4e2a\u95ee\u9898\u300aThePythonyieldkeywordexplained\u300b\uff0ce-satis\u8be6\u7ec6\u56de\u7b54\u4e86\u5173\u4e8eyield\u4ee5\u53cagenerator\u3001iterable\u3001iterator\u3001iteration\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff08Iterbles\uff09\u521b\u5efa\u4e00\u4e2a\u5217\u8868\uff08list\uff09\u65f6\uff0c\u4f60\u53ef\u4ee5\u9010\u4e2a\u5730\u8bfb\u53d6\u91cc\u9762\u7684\u6bcf\u4e00\u9879\u5143\u7d20\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e4b\u4e3a\u8fed\u4ee3\uff08iteration\uff09\u3002Python>>>mylist=[1,2,3]>>>foriinmylist:...print(i)123123456>>>mylist=[1,2,3]>>>foriinmylist:...\u00a0\u00a0\u00a0\u00a0print(i)123mylist\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u3002\u5f53\u4f7f\u7528\u5217\u8868\u63a8\u5bfc\u5f0f\uff08listcomprehension\uff09\u521b\u5efa\u4e86\u4e00\u4e2a\u5217\u8868\u65f6\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff1aPython>>>mylist=[x*xforxinrange(3)]>>>foriinmylist:...print(i)014123456>>>mylist=[x*xforxinrange(3)]>>>foriinmylist:...\u00a0\u00a0\u00a0\u00a0print(i)014\u4efb\u4f55\u53ef\u4ee5\u4f7f\u7528\u5728for...in...\u8bed\u53e5\u4e2d\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u53eb\u505a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u4f8b\u5982\uff1alists\uff0cstrings\uff0cfiles\u7b49\u7b49\u3002\u8fd9\u4e9b\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4f7f\u7528\u975e\u5e38\u65b9\u4fbf\u56e0\u4e3a\u5b83\u80fd\u5982\u4f60\u6240\u613f\u7684\u5c3d\u53ef\u80fd\u8bfb\u53d6\u5176\u4e2d\u7684\u5143\u7d20\uff0c\u4f46\u662f\u4f60\u4e0d\u5f97\u4e0d\u628a\u6240\u6709\u7684\u503c\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u5f53\u5b83\u6709\u5927\u91cf\u5143\u7d20\u7684\u65f6\u5019\u8fd9\u5e76\u4e0d\u4e00\u5b9a\u603b\u662f\u4f60\u60f3\u8981\u7684\u3002\u8bd1\u8005\u8865\u5145\uff1adict\u5bf9\u8c61\u4ee5\u53ca\u4efb\u4f55\u5b9e\u73b0\u4e86__iter__()\u6216\u8005__getitem__()\u65b9\u6cd5\u7684\u7c7b\u90fd\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u6b64\u5916\uff0c\u53ef\u8fed\u4ee3\u5bf9\u8c61\u8fd8\u53ef\u4ee5\u7528\u5728zip,map\u7b49\u51fd\u6570\u4e2d\uff0c\u5f53\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u5185\u5efa\u51fd\u6570iter()\u65f6\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002\u901a\u5e38\u6ca1\u5fc5\u8981\u81ea\u5df1\u6765\u5904\u7406\u8fed\u4ee3\u5668\u672c\u8eab\u6216\u8005\u624b\u52a8\u8c03\u7528iter()\uff0cfor\u8bed\u53e5\u4f1a\u81ea\u52a8\u8c03\u7528iter()\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u7684\u672a\u547d\u540d\u7684\u53d8\u91cf\u6765\u6301\u6709\u8fd9\u4e2a\u8fed\u4ee3\u5668\u7528\u4e8e\u5faa\u73af\u671f\u95f4\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3yield\uff0c\u8bd1\u8005\u5f15\u5165\u4e86\u8fed\u4ee3\u5668\u7684\u4ecb\u7ecd\u3002\u8fed\u4ee3\u5668\uff08iterator\uff09\u8fed\u4ee3\u5668\u4ee3\u8868\u4e00\u4e2a\u6570\u636e\u6d41\u5bf9\u8c61\uff0c\u4e0d\u65ad\u91cd\u590d\u8c03\u7528\u8fed\u4ee3\u5668\u7684next()\u65b9\u6cd5\u53ef\u4ee5\u9010\u6b21\u5730\u8fd4\u56de\u6570\u636e\u6d41\u4e2d\u7684\u6bcf\u4e00\u9879\uff0c\u5f53\u6ca1\u6709\u66f4\u591a\u6570\u636e\u53ef\u7528\u65f6\uff0cnext()\u65b9\u6cd5\u4f1a\u629b\u51fa\u5f02\u5e38StopIteration\u3002\u6b64\u65f6\u8fed\u4ee3\u5668\u5bf9\u8c61\u5df2\u7ecf\u67af\u7aed\u4e86\uff0c\u4e4b\u540e\u8c03\u7528next()\u65b9\u6cd5\u90fd\u4f1a\u629b\u51fa\u5f02\u5e38StopIteration\u3002\u8fed\u4ee3\u5668\u9700\u8981\u6709\u4e00\u4e2a__iter()__\u65b9\u6cd5\u7528\u6765\u8fd4\u56de\u8fed\u4ee3\u5668\u672c\u8eab\u3002\u56e0\u6b64\u5b83\u4e5f\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5bf9\u8c61\u3002\u751f\u6210\u5668\uff08Generators\uff09\u751f\u6210\u5668\u4e5f\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u4f46\u662f\u4f60\u53ea\u53ef\u4ee5\u8fed\u4ee3\u4ed6\u4eec\u4e00\u6b21\uff0c\u4e0d\u80fd\u91cd\u590d\u8fed\u4ee3\uff0c\u56e0\u4e3a\u5b83\u5e76\u6ca1\u6709\u628a\u6240\u6709\u503c\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u800c\u662f\u5b9e\u65f6\u5730\u751f\u6210\u503c\uff1aPython>>>mygenerator=(x*xforxinrange(3))>>>foriinmygenerator:...print(i)014123456>>>mygenerator=(x*xforxinrange(3))>>>foriinmygenerator:...\u00a0\u00a0\u00a0\u00a0print(i)014\u4ece\u7ed3\u679c\u4e0a\u770b\u7528()\u4ee3\u66ff[]\u6548\u679c\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\uff0c\u4f60\u4e0d\u53ef\u80fd\u7b2c\u4e8c\u6b21\u6267\u884cforiinmygenerator\uff08\u8bd1\u6ce8\uff1a\u8fd9\u91cc\u4f5c\u8005\u6240\u8868\u8fbe\u7684\u610f\u601d\u662f\u7b2c\u4e8c\u6b21\u6267\u884c\u8fbe\u4e0d\u5230\u671f\u671b\u7684\u6548\u679c\uff09\u56e0\u4e3a\u751f\u6210\u5668\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\uff1a\u9996\u5148\u8ba1\u7b97\u51fa0\uff0c\u7136\u540e\u8ba1\u7b97\u51fa1\uff0c\u6700\u540e\u8ba1\u7b97\u51fa4\u3002YieldYield\u662f\u5173\u952e\u5b57\uff0c\u5b83\u7c7b\u4f3c\u4e8ereturn\uff0c\u53ea\u662f\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a\u751f\u6210\u5668\u3002Python>>>classBank():#\u521b\u5efa\u94f6\u884c\uff0c\u6784\u5efaATM\u673a\uff0c\u53ea\u8981\u6ca1\u6709\u5371\u673a\uff0c\u5c31\u53ef\u4ee5\u4e0d\u65ad\u5730\u6bcf\u6b21\u4ece\u4e2d\u53d6100...crisis=False...defcreate_atm(self):...whilenotself.crisis:...yield\"$100\">>>hsbc=Bank()#wheneverything'soktheATMgivesyouasmuchasyouwant>>>corner_street_atm=hsbc.create_atm()>>>print(corner_street_atm.next())$100>>>print(corner_street_atm.next())$100>>>print([corner_street_atm.next()forcashinrange(5)])['$100','$100','$100','$100','$100']>>>hsbc.crisis=True#\u5371\u673a\u6765\u4e34\uff0c\u6ca1\u6709\u66f4\u591a\u7684\u94b1\u4e86>>>print(corner_street_atm.next())<type'exceptions.StopIteration'>>>>wall_street_atm=hsbc.create_atm()#\u5373\u4f7f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684ATM\uff0c\u94f6\u884c\u8fd8\u662f\u6ca1\u94b1>>>print(wall_street_atm.next())<type'exceptions.StopIteration'>>>>hsbc.crisis=False#\u5371\u673a\u8fc7\u540e\uff0c\u94f6\u884c\u8fd8\u662f\u7a7a\u7684\uff0c\u56e0\u4e3a\u8be5\u51fd\u6570\u4e4b\u524d\u5df2\u7ecf\u4e0d\u6ee1\u8db3while\u6761\u4ef6>>>print(corner_street_atm.next())<type'exceptions.StopIteration'>>>>brand_new_atm=hsbc.create_atm()#\u5fc5\u987b\u6784\u5efa\u4e00\u4e2a\u65b0\u7684atm\uff0c\u6062\u590d\u53d6\u94b1\u4e1a\u52a1>>>forcashinbrand_new_atm:...printcash$100$100$100$100$100$100$100$100$100...1234567891011121314151617181920212223242526272829303132333435>>>classBank():#\u521b\u5efa\u94f6\u884c\uff0c\u6784\u5efaATM\u673a\uff0c\u53ea\u8981\u6ca1\u6709\u5371\u673a\uff0c\u5c31\u53ef\u4ee5\u4e0d\u65ad\u5730\u6bcf\u6b21\u4ece\u4e2d\u53d6100...\u00a0\u00a0\u00a0\u00a0crisis=False...\u00a0\u00a0\u00a0\u00a0defcreate_atm(self):...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0whilenotself.crisis:...\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0yield\"$100\">>>hsbc=Bank()#wheneverything'soktheATMgivesyouasmuchasyouwant>>>corner_street_atm=hsbc.create_atm()>>>print(corner_street_atm.next())$100>>>print(corner_street_atm.next())$100>>>print([corner_street_atm.next()forcashinrange(5)])['$100','$100','$100','$100','$100']>>>hsbc.crisis=True#\u5371\u673a\u6765\u4e34\uff0c\u6ca1\u6709\u66f4\u591a\u7684\u94b1\u4e86>>>print(corner_street_atm.next())<type'exceptions.StopIteration'>>>>wall_street_atm=hsbc.create_atm()#\u5373\u4f7f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684ATM\uff0c\u94f6\u884c\u8fd8\u662f\u6ca1\u94b1>>>print(wall_street_atm.next())<type'exceptions.StopIteration'>>>>hsbc.crisis=False#\u5371\u673a\u8fc7\u540e\uff0c\u94f6\u884c\u8fd8\u662f\u7a7a\u7684\uff0c\u56e0\u4e3a\u8be5\u51fd\u6570\u4e4b\u524d\u5df2\u7ecf\u4e0d\u6ee1\u8db3while\u6761\u4ef6>>>print(corner_street_atm.next())<type'exceptions.StopIteration'>>>>brand_new_atm=hsbc.create_atm()#\u5fc5\u987b\u6784\u5efa\u4e00\u4e2a\u65b0\u7684atm\uff0c\u6062\u590d\u53d6\u94b1\u4e1a\u52a1>>>forcashinbrand_new_atm:...\u00a0\u00a0\u00a0\u00a0printcash$100$100$100$100$100$100$100$100$100...\u5bf9\u4e8e\u7c7b\u4f3c\u8d44\u6e90\u7684\u8bbf\u95ee\u63a7\u5236\u7b49\u573a\u666f\uff0c\u751f\u6210\u5668\u663e\u5f97\u5f88\u5b9e\u7528\u3002Itertools\u662f\u4f60\u6700\u597d\u7684\u670b\u53cbitertools\u6a21\u5757\u5305\u542b\u4e00\u4e9b\u7279\u6b8a\u7684\u51fd\u6570\u7528\u6765\u64cd\u4f5c\u53ef\u8fed\u4ee3\u5bf9\u8c61\u3002\u66fe\u7ecf\u60f3\u590d\u5236\u4e00\u4e2a\u751f\u6210\u5668\uff1f\u4e24\u4e2a\u751f\u6210\u5668\u94fe\u63a5\uff1f\u5728\u5185\u5d4c\u5217\u8868\u4e2d\u4e00\u884c\u4ee3\u7801\u5904\u7406\u5206\u7ec4\uff1f\u4e0d\u4f1a\u521b\u5efa\u53e6\u5916\u4e00\u4e2a\u5217\u8868\u7684Map/Zip\u51fd\u6570\uff1f\u4f60\u8981\u505a\u7684\u5c31\u662fimportitertools\u3002\u65e0\u4f8b\u5b50\u65e0\u771f\u76f8\uff0c\u6211\u4eec\u6765\u770b\u770b4\u5339\u9a6c\u8d5b\u8dd1\u5230\u8fbe\u7ec8\u70b9\u6240\u6709\u53ef\u80fd\u7684\u987a\u5e8f\uff1aPython>>>horses=[1,2,3,4]>>>races=itertools.permutations(horses)>>>print(races)<itertools.permutationsobjectat0xb754f1dc>>>>print(list(itertools.permutations(horses)))[(1,2,3,4),(1,2,4,3),(1,3,2,4),(1,3,4,2),(1,4,2,3),(1,4,3,2),(2,1,3,4),(2,1,4,3),(2,3,1,4),(2,3,4,1),(2,4,1,3),(2,4,3,1),(3,1,2,4),(3,1,4,2),(3,2,1,4),(3,2,4,1),(3,4,1,2),(3,4,2,1),(4,1,2,3),(4,1,3,2),(4,2,1,3),(4,2,3,1),(4,3,1,2),(4,3,2,1)]1234567891011121314151617181920212223242526272829>>>horses=[1,2,3,4]>>>races=itertools.permutations(horses)>>>print(races)<itertools.permutationsobjectat0xb754f1dc>>>>print(list(itertools.permutations(horses)))[(1,2,3,4),(1,2,4,3),(1,3,2,4),(1,3,4,2),(1,4,2,3),(1,4,3,2),(2,1,3,4),(2,1,4,3),(2,3,1,4),(2,3,4,1),(2,4,1,3),(2,4,3,1),(3,1,2,4),(3,1,4,2),(3,2,1,4),(3,2,4,1),(3,4,1,2),(3,4,2,1),(4,1,2,3),(4,1,3,2),(4,2,1,3),(4,2,3,1),(4,3,1,2),(4,3,2,1)]\u7406\u89e3\u8fed\u4ee3\u7684\u5185\u90e8\u673a\u5236\u8fed\u4ee3\u662f\u64cd\u4f5c\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff08\u5b9e\u73b0\u4e86__iter__()\u65b9\u6cd5\uff09\u548c\u8fed\u4ee3\u5668\uff08\u5b9e\u73b0\u4e86__next__()\u65b9\u6cd5\uff09\u7684\u8fc7\u7a0b\u3002\u53ef\u8fed\u4ee3\u5bf9\u8c61\u662f\u4efb\u4f55\u4f60\u53ef\u4ee5\u4ece\u5176\u5f97\u5230\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u7684\u4efb\u610f\u5bf9\u8c61\uff08\u8bd1\u6ce8\uff1a\u8c03\u7528\u5185\u5efa\u51fd\u6570iter()\uff09\uff0c\u8fed\u4ee3\u5668\u662f\u80fd\u8ba9\u4f60\u5728\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e0a\u8fdb\u884c\u8fed\u4ee3\u7684\u5bf9\u8c61\uff08\u8bd1\u6ce8\uff1a\u8fd9\u91cc\u597d\u7ed5\uff0c\u8fed\u4ee3\u5668\u5b9e\u73b0\u4e86__iter__()\u65b9\u6cd5\uff0c\u56e0\u6b64\u5b83\u4e5f\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff09\u3002\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff1a2015/06/13\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff013\u8d5e2\u6536\u85cf5\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u5218\u5fd7\u519b\u4e2a\u4eba\u535a\u5ba2\uff1ahttp://foofish.net\uff0c\u5fae\u4fe1\u516c\u4f17\u53f7\uff1aPython\u4e4b\u7985\uff08ID\uff1aVTtalk\uff09\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b745\u00b7"]},
{"art_title": ["\u6211\u4e0d\u80fd\u80dc\u4efb\u5f00\u53d1\u5f00\u6e90\u8f6f\u4ef6"], "art_url": ["http://python.jobbole.com/16387/"], "art_create_time": ["2012/04/16"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/04/contribute-opensource.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u5510\u5c24\u534e\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1aDavidN.Welton\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u5e76\u975e\u4e0d\u80fd\u80dc\u4efb\u2014\u2014\u51e0\u5e74\u4e2d\u6211\u5df2\u7ecf\u5f00\u53d1\u4e86\u5f88\u591a\u5f00\u6e90\u8f6f\u4ef6\u3002\u7136\u800c\uff0c\u5728\u67d0\u79cd\u610f\u4e49\u4e0a\uff0c\u8fd9\u53c8\u662f\u4e8b\u5b9e\uff1a\u53ea\u6709\u5168\u804c\u5f00\u53d1\u5f00\u6e90\u8f6f\u4ef6\u7684\u7a0b\u5e8f\u5458\u4e2d\u7684\u4f7c\u4f7c\u8005\u624d\u80fd\u5f97\u5230\u62a5\u916c\uff0c\u800c\u6211\u4e0d\u662f\u3002LinusTorvalds\uff08Linux\u4e4b\u7236\uff09\u662f\u5176\u4e2d\u4e4b\u4e00\uff0c\u8fd8\u6709GuidovanRossum\uff08Python\u7f16\u7a0b\u8bed\u8a00\u521b\u59cb\u4eba\uff09\u3002\u5c3d\u7ba1GuidovanRossum\u53ea\u5728\u5f00\u6e90\u8f6f\u4ef6\u4e0a\u82b1\u4e86\u90e8\u5206\u65f6\u95f4\uff0c\u6ca1\u6709\u5c06\u5168\u90e8\u65f6\u95f4\u7528\u5728Python\u5f00\u53d1\u4e0a\u3002\u8003\u8651\u4e00\u4e0b\u73b0\u5b9e\u3002Python\u5df2\u7ecf\u6210\u4e3a\u4e86\u975e\u5e38\u6d41\u884c\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u88ab\u5f88\u591a\u516c\u53f8\u548c\u4e2a\u4eba\u91c7\u7528\uff0c\u5e76\u4ece\u4e2d\u83b7\u76ca\u532a\u6d45\u3002\u4f46\u8bed\u8a00\u53d1\u660e\u8005\u751a\u81f3\u6ca1\u6709\u5c06\u5168\u90e8\u65f6\u95f4\u6295\u5165\u5176\u4e2d\u3002\u8fd9\u53ea\u662f\u5176\u4e2d\u4e00\u4f8b\u2014\u2014\u4e5f\u8bb8Guido\u5f88\u4eab\u53d7\u5728Phython\u4e4b\u5916\u7684\u65f6\u95f4\u4e3aGoogle\u5de5\u4f5c\u8fd9\u6837\u7684\u751f\u6d3b\u65b9\u5f0f\u2014\u2014\u4f46\u662f\u6211\u8ba4\u4e3a\u8fd9\u4ece\u603b\u4f53\u4e0a\u4ee3\u8868\u4e86\u5f00\u6e90\u8f6f\u4ef6\u7684\u73b0\u72b6\u3002\u5c31\u6211\u800c\u8a00\uff1a\u6211\u5199\u4e86\u5f88\u591a\u5c0f\u6bb5\u7684\u5f00\u6e90\u4ee3\u7801\u5e76\u5f97\u5230\u4e86\u5927\u5bb6\u7684\u8ba4\u53ef\u3002\u4e00\u4e9b\u4eba\u751a\u81f3\u5728Hecl\u7684\u57fa\u7840\u4e0a\u5f00\u53d1\u4e86\u5546\u7528\u4ea7\u54c1\u3002\u4f46\u6211\u8fd8\u662f\u4e0d\u80fd\u591f\u80dc\u4efb\u5168\u804c\u5f00\u53d1\u5f00\u6e90\u8f6f\u4ef6\u2014\u2014\u6211\u4e0d\u662f\u90a3\u79cd\u777f\u667a\u4e14\u77e5\u540d\u7684\u7a0b\u5e8f\u5458\uff0c\u4ed6\u4eec\u5728\u5f00\u53d1\u514d\u8d39\u4ea7\u54c1\u7684\u540c\u65f6\u6709\u4eba\u4e3a\u5176\u652f\u4ed8\u85aa\u6c34\u3002\u7136\u800c\uff0c\u6211\u662f\u4e00\u540d\u4f18\u79c0\u7684\u79c1\u6709\u8f6f\u4ef6\u5f00\u53d1\u8005\uff0c\u5728\u5bfb\u627e\u9700\u8981\u4e3a\u6211\u652f\u4ed8\u62a5\u916c\u7684\u9879\u76ee\u4e0a\u6211\u4ece\u672a\u9047\u5230\u592a\u591a\u7684\u9ebb\u70e6\u3002\u4e3a\u4ec0\u4e48\u4f1a\u662f\u8fd9\u6837\u5462\uff1f\u56e0\u4e3a\u79c1\u6709\u8f6f\u4ef6\u9879\u76ee\u80fd\u591f\u5f88\u5feb\u8ba9\u8d44\u91d1\u56de\u7b3c\u3002\u5982\u679c\u4eba\u4eec\u559c\u6b22\u8fd9\u4e2a\u8f6f\u4ef6\u5e76\u4e3a\u5176\u4e70\u5355\uff0c\u516c\u53f8\u53ef\u4ee5\u7528\u8fd9\u4e9b\u6536\u5165\u4e3a\u5f00\u53d1\u8005\u652f\u4ed8\u62a5\u916c\u3002\u800c\u5c3d\u7ba1\u4e0a\u767e\u4e07\u4eba\u4f7f\u7528\u5f00\u6e90\u8f6f\u4ef6\u5e76\u4ece\u4e2d\u5f97\u5230\u4ef7\u503c\uff0c\u4f46\u5f00\u6e90\u8f6f\u4ef6\u7684\u5f00\u53d1\u8005\u4e0d\u80fd\u4ece\u4e2d\u5f97\u5230\u73b0\u91d1\u56de\u62a5\uff0c\u4ed6\u6216\u5979\u4e0d\u80fd\u4ee5\u6b64\u8d2d\u4e70\u98df\u7269\u6216\u652f\u4ed8\u623f\u79df\uff0c\u6240\u4ee5\uff0c\u6211\u80fd\u591f\u5f88\u597d\u5730\u7f16\u7a0b\u5e76\u8d21\u732e\u66f4\u591a\u5f00\u6e90\u4ee3\u7801\uff0c\u4f46\u6211\u8fd8\u662f\u8981\u4e3a\u79c1\u6709\u8f6f\u4ef6\u7f16\u5199\u4ee3\u7801\uff0c\u56e0\u4e3a\u8fd9\u80fd\u591f\u652f\u4ed8\u8d26\u5355\u3002\u5f88\u660e\u663e\uff0c\u6211\u4f1a\u5c3d\u53ef\u80fd\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u5f00\u6e90\u8f6f\u4ef6\uff0c\u5e76\u5c3d\u53ef\u80fd\u5730\u56de\u9988\u5f00\u6e90\u793e\u533a\uff0c\u4f46\u662f\u201c\u79d8\u5236\u8c03\u5473\u6599\uff08\u5546\u4e1a\u79d8\u5bc6\uff09\u201d\u4ecd\u7136\u662f\u9700\u8981\u4fdd\u5b88\u7684\u3002\u53ea\u662f\u8fd9\u53cc\u624b\u4e0d\u80fd\u521b\u9020\u66f4\u591a\u7684\u5f00\u6e90\u8f6f\u4ef6\u4e86\u3002\u6211\u77e5\u9053\u6211\u4e0d\u662f\u4e00\u4e2a\u4eba\uff0c\u6362\u53e5\u8bdd\u8bf4\u2014\u2014\u5f88\u591a\u4eba\u5728\u5f00\u6e90\u4e16\u754c\u4e4b\u5916\u4e3a\u79c1\u6709\u8f6f\u4ef6\u9879\u76ee\u5de5\u4f5c\uff0c\u4f46\u662f\u5f88\u5c11\u6709\u4eba\u80fd\u591f\u4ece\u5168\u804c\u5f00\u6e90\u5de5\u4f5c\u4e2d\u5f97\u5230\u62a5\u916c\u3002\u6240\u4ee5\uff0c\u5f53\u6211\u542c\u5230\u4eba\u4eec\u5c06\u7248\u6743\u4f5c\u4e3a\u5f00\u6e90\u8f6f\u4ef6\u7684\u53cd\u4f8b\u65f6\uff0c\u6211\u611f\u5230\u6709\u4e9b\u6012\u4e0d\u53ef\u904f\u3002\u8f6f\u4ef6\u7248\u6743\u7684\u4fdd\u62a4\u548c\u6267\u884c\u662f\u4e00\u4e2a\u590d\u6742\u7684\u4e89\u8bba\uff0c\u6211\u4e0d\u6253\u7b97\u5728\u8fd9\u91cc\u5c55\u5f00\u8ba8\u8bba\u3002\u8fd9\u91cc\u6211\u8981\u6307\u51fa\u7684\u662f\u201c\u4e8b\u60c5\u5e76\u4e0d\u53ea\u662f\u770b\u5230\u7684\u90a3\u6837\u201d\u3002\u5f53\u7136\uff0c\u5f00\u6e90\u8f6f\u4ef6\u7684\u786e\u5b58\u5728\u3002\u4f46\u662f\uff0c\u9700\u8981\u591a\u5c11\u8d44\u91d1\u624d\u80fd\u652f\u6301\u5f00\u6e90\u8f6f\u4ef6\u6b63\u5e38\u8fd0\u8f6c\u5462\uff1f\u6709\u591a\u5c11\u5f00\u6e90\u8f6f\u4ef6\u56e0\u4e3a\u6ca1\u6709\u5fc5\u8981\u7684\u65f6\u95f4\u800c\u4e00\u76f4\u53ea\u662f\u5f00\u53d1\u8005\u8111\u4e2d\u7684\u8bbe\u60f3\u5462\uff1f\u6700\u8fd1\u51e0\u5e74\uff0c\u5c3d\u7ba1\u6709\u5927\u5e45\u6539\u8fdb\uff0c\u4eba\u4eec\u8fd8\u662f\u7ecf\u5e38\u6279\u8bc4\u201cLinux\u684c\u9762\u7cfb\u7edf\u201d\u3002\u6069\uff0c\u5982\u679c\u6709\u66f4\u591a\u4eba\u80fd\u591f\u4ece\u201c\u67af\u71e5\u7684\u52b3\u52a8\u201d\u4e2d\u5f97\u5230\u62a5\u916c\uff0c\u6bd4\u5982\u53ef\u7528\u6027\u6d4b\u8bd5\uff0c\u90a3\u4e48Linux\u7684\u8fdb\u6b65\u53c8\u5c06\u5982\u4f55\u5462\uff1fUbuntu\u548cRedhat\u5df2\u7ecf\u5f00\u59cb\u4e3a\u4e00\u4e9b\u505a\u7c7b\u4f3c\u5de5\u4f5c\u7684\u4eba\u652f\u4ed8\u62a5\u916c\uff0c\u4f46\u5728\u5fae\u8f6f\u548c\u82f9\u679c\u516c\u53f8\u53c8\u6709\u591a\u5c11\u4eba\u5728\u4ece\u4e8b\u8fd9\u6837\u7684\u5de5\u4f5c\u5462\uff1f\u8fd9\u5e76\u4e0d\u662f\u5426\u8ba4\u5f00\u6e90\u8f6f\u4ef6\u201c\u884c\u4e0d\u901a\u201d\u6216\u8005\u5176\u4ed6\u7684\u80e1\u8bf4\u516b\u9053\u3002\u5f00\u6e90\u5f53\u7136\u8fd0\u4f5c\u7684\u5f88\u597d\uff0c\u5f53\u7136\u53ea\u6709\u5728\u4ee5\u4ee3\u7801\u800c\u4e0d\u662f\u91d1\u94b1\u4e3a\u8d27\u5e01\u65f6\uff0c\u5f00\u6e90\u624d\u80fd\u771f\u6b63\u7684\u53d1\u626c\u5149\u5927\u3002\u5f00\u53d1\u8005\u80fd\u591f\u7ed9\u4e0e\u5f00\u6e90\u9879\u76ee\u5f88\u591a\u56de\u9988\uff0c\u6bd4\u5982\u4ee3\u7801\u3001bug\u62a5\u544a\u3001\u5efa\u8bae\u3001\u6587\u6863\u7b49\u7b49\uff0c\u8fd9\u8ba9\u4ed6\u4eec\u53c2\u4e0e\u7684\u9879\u76ee\u53d8\u5f97\u66f4\u597d\u3002\u7136\u800c\uff0c\u5f00\u6e90\u5728\u89c4\u6a21\u8f83\u5c0f\u3001\u5feb\u901f\u53d8\u5316\u4ee5\u53ca\u4ee5\u5ba2\u6237\u4e3a\u4e2d\u5fc3\u7684\u4ea7\u54c1\u4e0a\u8868\u73b0\u5f97\u5e76\u4e0d\u5c3d\u5982\u4eba\u610f\u3002\u6211\u731c\uff0c99%\u7684iPhone\u7528\u6237\u5f88\u5c11\u5173\u5fc3\u4ed6\u4eec\u4f7f\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\u6e90\u4ee3\u7801\uff0c\u800c\u6070\u6070\u76f8\u53cd\uff0c\u7edd\u5927\u90e8\u5206\u7684Emacs\u7528\u6237\u81f3\u5c11\u5199\u8fc7\u51e0\u884cElisp\u4ee3\u7801\u3002\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u95ee\u9898\u4e0d\u5728\u4e8e\u6253\u8d25\u5f00\u6e90\u8f6f\u4ef6\uff0c\u7136\u800c\u53e6\u4e00\u79cd\u53cd\u5bf9\u201c\u77e5\u8bc6\u4ea7\u6743\u201d\u7684\u89c2\u70b9\u662f\u5f00\u6e90\u8f6f\u4ef6\u672c\u8eab\u5df2\u7ecf\u201c\u8bc1\u660e\u201d\u4e86\u201c\u8f6f\u4ef6\u751f\u4ea7\u8fc7\u7a0b\u90fd\u662f\u4e00\u6837\u7684\u201d\u3002\u662f\u7684\uff0c\u53ef\u80fd\u5b83\u4eec\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u53ea\u5bf9\u7528\u6237\u8f83\u5c11\u7684\u60c5\u51b5\u4e0b\u6210\u7acb\u3002\u6bd5\u7adf\uff0c\u6211\u4eec\u4e2d\u7684\u5927\u591a\u6570\u90fd\u4e0d\u80fd\u80dc\u4efb\u5f00\u53d1\u5f00\u6e90\u8f6f\u4ef6\u3002\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u4efb\u9009\u4e00\u79cd\u652f\u4ed8\u65b9\u5f0f1\u8d5e\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u5510\u5c24\u534e\u505a\u81ea\u5df1\u559c\u6b22\u7684\uff0c\u7f16\u7a0b\u3001\u559d\u8336\u3001\u770b\u4e16\u754c\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b718\u00b7"]},
{"art_title": ["Python\u6807\u51c6\u5e93\uff081\uff09 \u2014 Itertools\u6a21\u5757"], "art_url": ["http://python.jobbole.com/88365/"], "art_create_time": ["2017/08/15"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2014/12/6da94dec8f6f96417f14c8291e6345801.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aj_hao104\u00a0\u00a0\u00a0\u7b80\u4ecb\u5b98\u65b9\u63cf\u8ff0\uff1aFunctionaltoolsforcreatingandusingiterators.\u5373\u7528\u4e8e\u521b\u5efa\u9ad8\u6548\u8fed\u4ee3\u5668\u7684\u51fd\u6570\u3002itertools.chain(*iterable)\u5c06\u591a\u4e2a\u5e8f\u5217\u4f5c\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u5e8f\u5217\u8fd4\u56de\u3002\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.chain('i','love','python'):printeach123importitertoolsforeachinitertools.chain('i','love','python'):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPythonilovepython1234567891011ilovepythonitertools.combinations(iterable,r)\u8fd4\u56de\u6307\u5b9a\u957f\u5ea6\u7684\u201d\u7ec4\u5408\u201d\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.combinations('abc',2):printeach123importitertoolsforeachinitertools.combinations('abc',2):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPython('a','b')('a','c')('b','c')123('a','b')('a','c')('b','c')itertools.combinations_with_replacement(iterable,r)\u8fd4\u56de\u6307\u5b9a\u957f\u5ea6\u7684\u201c\u7ec4\u5408\u201d\uff0c\u7ec4\u5408\u5185\u5143\u7d20\u53ef\u91cd\u590d\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.combinations_with_replacement('abc',2):printeach123importitertoolsforeachinitertools.combinations_with_replacement('abc',2):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPython('a','a')('a','b')('a','c')('b','b')('b','c')('c','c')123456('a','a')('a','b')('a','c')('b','b')('b','c')('c','c')itertools.product(*iterable[,repeat])\u8fd4\u56de\u6307\u5b9a\u957f\u5ea6\u7684\u6240\u6709\u7ec4\u5408\uff0c\u53ef\u7406\u89e3\u4e3a\u7b1b\u5361\u5c14\u4e58\u79ef\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.product('abc',repeat=2):printeach123importitertoolsforeachinitertools.product('abc',repeat=2):\u00a0\u00a0\u00a0\u00a0printeach(\u2018a\u2019,\u2018a\u2019)(\u2018a\u2019,\u2018b\u2019)(\u2018a\u2019,\u2018c\u2019)(\u2018b\u2019,\u2018a\u2019)(\u2018b\u2019,\u2018b\u2019)(\u2018b\u2019,\u2018c\u2019)(\u2018c\u2019,\u2018a\u2019)(\u2018c\u2019,\u2018b\u2019)(\u2018c\u2019,\u2018c\u2019)itertools.premutations(iteravle[,r])\u8fd4\u56de\u957f\u5ea6\u4e3ar\u7684\u6392\u5217\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.permutations('abc',2):printvalue123importitertoolsforvalueinitertools.permutations('abc',2):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa\uff1aPython('a','b')('a','c')('b','a')('b','c')('c','a')('c','b')123456('a','b')('a','c')('b','a')('b','c')('c','a')('c','b')itertools.compress(data,selector)\u8fd4\u56deselector\u4e3aTrue\u7684data\u5bf9\u5e94\u5143\u7d20\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.compress('abcd',[1,0,1,0]):printeach123importitertoolsforeachinitertools.compress('abcd',[1,0,1,0]):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPythonac12acitertools.count(start=0,step=1)\u8fd4\u56de\u4ee5start\u5f00\u59cb\uff0cstep\u9012\u589e\u7684\u5e8f\u5217\uff0c\u65e0\u9650\u9012\u589e\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.count(start=0,step=2):printeach123importitertoolsforeachinitertools.count(start=0,step=2):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPython123..12345123..itertools.cycle(iterable)\u5c06\u8fed\u4ee3\u5668\u8fdb\u884c\u65e0\u9650\u8fed\u4ee3\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.cycle('ab'):printeach123importitertoolsforeachinitertools.cycle('ab'):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPythonabab..123456abab..itertools.dropwhile(predicate,iterable)\u76f4\u5230predicate\u4e3a\u771f\uff0c\u5c31\u8fd4\u56deiterable\u540e\u7eed\u6570\u636e\uff0c\u5426\u5219drop\u6389\u4f8b\u5982\uff1aPythonimportitertoolsforeachinitertools.dropwhile(lambdax:x<5,[2,1,6,8,2,1]):printeach123importitertoolsforeachinitertools.dropwhile(lambdax:x<5,[2,1,6,8,2,1]):\u00a0\u00a0\u00a0\u00a0printeach\u8f93\u51fa\uff1aPython682112346821itertools.groupby(iterable[,key])\u8fd4\u56de\u4e00\u7ec4\uff08key,itera\uff09,key\u4e3aiterable\u7684\u503c\uff0citera\u4e3a\u7b49\u4e8ekey\u7684\u6240\u6709\u9879\u4f8b\u5982:Pythonimportitertoolsforkey,valeinitertools.groupby('aabbbc'):printkey,list(vale)123importitertoolsforkey,valeinitertools.groupby('aabbbc'):\u00a0\u00a0\u00a0\u00a0printkey,list(vale)\u8f93\u51fa:Pythona['a','a']b['b','b','b']c['c']123a['a','a']b['b','b','b']c['c']itertools.ifilter(predicate,iterable)\u8fd4\u56depredicate\u7ed3\u679c\u4e3aTrue\u7684\u5143\u7d20\u8fed\u4ee3\u5668\uff0c\u5982\u679cpredicate\u4e3aNone,\u5219\u8fd4\u56de\u6240\u6709iterable\u4e2d\u4e3aTrue\u7684\u9879\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.ifilter(lambdax:x%2,range(10)):printvalue123importitertoolsforvalueinitertools.ifilter(lambdax:x%2,range(10)):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Python135791234513579itertools.ifilterfasle(predicate,iterable)\u8fd4\u56depredicate\u4e3aFalse\u7684\u5143\u7d20\uff0c\u5982\u679cpredicate\u4e3aNone,\u5219\u8fd4\u56de\u6240\u6709iterable\u4e2d\u4e3aFalse\u7684\u9879\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.ifilterfalse(lambdax:x%2,range(10)):printvalue123importitertoolsforvalueinitertools.ifilterfalse(lambdax:x%2,range(10)):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Python024681234502468itertools.imap(function,*iterables)\u76f8\u5f53\u4e8e\u8fed\u4ee3\u5668\u65b9\u5f0f\u7684map()\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.imap(lambdax,y:x+y,(1,2,3),(4,5,6)):printvalue123importitertoolsforvalueinitertools.imap(lambdax,y:x+y,(1,2,3),(4,5,6)):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Python579123579itertools.islice(iterable,start,stop[,step])\u76f8\u5f53\u4e8e\u8fed\u4ee3\u5668\u65b9\u5f0f\u7684\u5207\u7247\u64cd\u4f5c\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.islice('abcdefg',1,4,2):printvalue123importitertoolsforvalueinitertools.islice('abcdefg',1,4,2):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Pythonbd12bditertools.repeat(object,[,times])\u4e0d\u505c\u7684\u8fd4\u56deobject\u5bf9\u8c61\uff0c\u5982\u679c\u6307\u5b9a\u4e86times,\u5219\u8fd4\u56detimes\u6b21\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.repeat('a',2):printvalue123importitertoolsforvalueinitertools.repeat('a',2):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Pythonaa12aaitertools.starmap(function,iterable)\u8fd4\u56defunction(iter)\u7684\u503c\uff0citer\u4e3aiterable\u7684\u5143\u7d20\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.starmap(lambdax,y:x*y,[(1,2),(3,4)]):printvalue123importitertoolsforvalueinitertools.starmap(lambdax,y:x*y,[(1,2),(3,4)]):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Python21212212itertools.takewhile(predicate,iterable)\u5982\u679cpredicate\u4e3a\u771f\uff0c\u5219\u8fd4\u56deiterable\u5143\u7d20\uff0c\u5982\u679c\u4e3a\u5047\u5219\u4e0d\u518d\u8fd4\u56de\uff0cbreak.\u4f8b\u5982\uff1aPythonimportitertoolsforvalueinitertools.takewhile(lambdax:x<5,[1,3,5,6]):printvalue123importitertoolsforvalueinitertools.takewhile(lambdax:x<5,[1,3,5,6]):\u00a0\u00a0\u00a0\u00a0printvalue\u8f93\u51fa:Python1312131\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python \u722c\u866b\u5b9e\u6218\uff081\uff09\uff1a\u5206\u6790\u8c46\u74e3\u4e2d\u6700\u65b0\u7535\u5f71\u7684\u5f71\u8bc4"], "art_url": ["http://python.jobbole.com/88325/"], "art_create_time": ["2017/08/11"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/08/4a86e0544d1e4a0667de13449f388d7a.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1ahang\u00a0\u00a0\u00a0\u7b80\u4ecb\u521a\u63a5\u89e6python\u4e0d\u4e45\uff0c\u505a\u4e00\u4e2a\u5c0f\u9879\u76ee\u6765\u7ec3\u7ec3\u624b\u3002\u524d\u51e0\u5929\u770b\u4e86\u300a\u6218\u72fc2\u300b\uff0c\u53d1\u73b0\u5b83\u5728\u6700\u65b0\u4e0a\u6620\u7684\u7535\u5f71\u91cc\u9762\u662f\u6392\u884c\u7b2c\u4e00\u7684\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u51c6\u5907\u628a\u8c46\u74e3\u4e0a\u5bf9\u5b83\u7684\u5f71\u8bc4\u505a\u4e00\u4e2a\u5206\u6790\u3002\u76ee\u6807\u603b\u89c8\u4e3b\u8981\u505a\u4e86\u4e09\u4ef6\u4e8b\uff1a\u6293\u53d6\u7f51\u9875\u6570\u636e\u6e05\u7406\u6570\u636e\u7528\u8bcd\u4e91\u8fdb\u884c\u5c55\u793a\u4f7f\u7528\u7684python\u7248\u672c\u662f3.5.\u4e00\u3001\u6293\u53d6\u7f51\u9875\u6570\u636e\u7b2c\u4e00\u6b65\u8981\u5bf9\u7f51\u9875\u8fdb\u884c\u8bbf\u95ee\uff0cpython\u4e2d\u4f7f\u7528\u7684\u662furllib\u5e93\u3002\u4ee3\u7801\u5982\u4e0b\uff1aPythonfromurllibimportrequestresp=request.urlopen('https://movie.douban.com/nowplaying/hangzhou/')html_data=resp.read().decode('utf-8')123fromurllibimportrequestresp=request.urlopen('https://movie.douban.com/nowplaying/hangzhou/')html_data=resp.read().decode('utf-8')\u5176\u4e2dhttps://movie.douban.com/nowp\u2026\u662f\u8c46\u74e3\u6700\u65b0\u4e0a\u6620\u7684\u7535\u5f71\u9875\u9762\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u8be5\u7f51\u5740\u8fdb\u884c\u67e5\u770b\u3002html_data\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u91cc\u9762\u5b58\u653e\u4e86\u7f51\u9875\u7684html\u4ee3\u7801\u3002\u8f93\u5165print(html_data)\u53ef\u4ee5\u67e5\u770b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u7b2c\u4e8c\u6b65\uff0c\u9700\u8981\u5bf9\u5f97\u5230\u7684html\u4ee3\u7801\u8fdb\u884c\u89e3\u6790\uff0c\u5f97\u5230\u91cc\u9762\u63d0\u53d6\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\u3002\u5728python\u4e2d\u4f7f\u7528BeautifulSoup\u5e93\u8fdb\u884chtml\u4ee3\u7801\u7684\u89e3\u6790\u3002\uff08\u6ce8\uff1a\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u6b64\u5e93\uff0c\u5219\u4f7f\u7528pipinstallBeautifulSoup\u8fdb\u884c\u5b89\u88c5\u5373\u53ef\uff01\uff09BeautifulSoup\u4f7f\u7528\u7684\u683c\u5f0f\u5982\u4e0b\uff1aPythonBeautifulSoup(html,\"html.parser\")1BeautifulSoup(html,\"html.parser\")\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u9700\u8981\u63d0\u53d6\u6570\u636e\u7684html\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6307\u5b9a\u89e3\u6790\u5668\uff0c\u7136\u540e\u4f7f\u7528find_all()\u8bfb\u53d6html\u6807\u7b7e\u4e2d\u7684\u5185\u5bb9\u3002\u4f46\u662fhtml\u4e2d\u6709\u8fd9\u4e48\u591a\u7684\u6807\u7b7e\uff0c\u8be5\u8bfb\u53d6\u54ea\u4e9b\u6807\u7b7e\u5462\uff1f\u5176\u5b9e\uff0c\u6700\u7b80\u5355\u7684\u529e\u6cd5\u662f\u6211\u4eec\u53ef\u4ee5\u6253\u5f00\u6211\u4eec\u722c\u53d6\u7f51\u9875\u7684html\u4ee3\u7801\uff0c\u7136\u540e\u67e5\u770b\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\u5728\u54ea\u4e2ahtml\u6807\u7b7e\u91cc\u9762\uff0c\u518d\u8fdb\u884c\u8bfb\u53d6\u5c31\u53ef\u4ee5\u4e86\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u4ece\u4e0a\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa\u5728divid=\u201dnowplaying\u201c\u6807\u7b7e\u5f00\u59cb\u662f\u6211\u4eec\u60f3\u8981\u7684\u6570\u636e\uff0c\u91cc\u9762\u6709\u7535\u5f71\u7684\u540d\u79f0\u3001\u8bc4\u5206\u3001\u4e3b\u6f14\u7b49\u4fe1\u606f\u3002\u6240\u4ee5\u76f8\u5e94\u7684\u4ee3\u7801\u7f16\u5199\u5982\u4e0b\uff1aPythonfrombs4importBeautifulSoupasbssoup=bs(html_data,'html.parser')nowplaying_movie=soup.find_all('div',id='nowplaying')nowplaying_movie_list=nowplaying_movie[0].find_all('li',class_='list-item')1234frombs4importBeautifulSoupasbssoup=bs(html_data,'html.parser')\u00a0\u00a0\u00a0\u00a0nowplaying_movie=soup.find_all('div',id='nowplaying')nowplaying_movie_list=nowplaying_movie[0].find_all('li',class_='list-item')\u5176\u4e2dnowplaying_movie_list\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u53ef\u4ee5\u7528print(nowplaying_movie_list[0])\u67e5\u770b\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u5728\u4e0a\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230data-subject\u5c5e\u6027\u91cc\u9762\u653e\u4e86\u7535\u5f71\u7684id\u53f7\u7801\uff0c\u800c\u5728img\u6807\u7b7e\u7684alt\u5c5e\u6027\u91cc\u9762\u653e\u4e86\u7535\u5f71\u7684\u540d\u5b57\uff0c\u56e0\u6b64\u6211\u4eec\u5c31\u901a\u8fc7\u8fd9\u4e24\u4e2a\u5c5e\u6027\u6765\u5f97\u5230\u7535\u5f71\u7684id\u548c\u540d\u79f0\u3002\uff08\u6ce8\uff1a\u6253\u5f00\u7535\u5f71\u77ed\u8bc4\u7684\u7f51\u9875\u65f6\u9700\u8981\u7528\u5230\u7535\u5f71\u7684id\uff0c\u6240\u4ee5\u9700\u8981\u5bf9\u5b83\u8fdb\u884c\u89e3\u6790\uff09\uff0c\u7f16\u5199\u4ee3\u7801\u5982\u4e0b\uff1aPythonnowplaying_list=[]foriteminnowplaying_movie_list:nowplaying_dict={}nowplaying_dict['id']=item['data-subject']fortag_img_iteminitem.find_all('img'):nowplaying_dict['name']=tag_img_item['alt']nowplaying_list.append(nowplaying_dict)1234567nowplaying_list=[]foriteminnowplaying_movie_list:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_dict={}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_dict['id']=item['data-subject']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fortag_img_iteminitem.find_all('img'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_dict['name']=tag_img_item['alt']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_list.append(nowplaying_dict)\u5176\u4e2d\u5217\u8868nowplaying_list\u4e2d\u5c31\u5b58\u653e\u4e86\u6700\u65b0\u7535\u5f71\u7684id\u548c\u540d\u79f0\uff0c\u53ef\u4ee5\u4f7f\u7528print(nowplaying_list)\u8fdb\u884c\u67e5\u770b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u53ef\u4ee5\u770b\u5230\u548c\u8c46\u74e3\u7f51\u5740\u4e0a\u9762\u662f\u5339\u914d\u7684\u3002\u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u6700\u65b0\u7535\u5f71\u7684\u4fe1\u606f\u4e86\u3002\u63a5\u4e0b\u6765\u5c31\u8981\u8fdb\u884c\u5bf9\u6700\u65b0\u7535\u5f71\u77ed\u8bc4\u8fdb\u884c\u5206\u6790\u4e86\u3002\u4f8b\u5982\u300a\u6218\u72fc2\u300b\u7684\u77ed\u8bc4\u7f51\u5740\u4e3a\uff1ahttps://movie.douban.com/subject/26363254/comments?start=0&limit=20\u5176\u4e2d26363254\u5c31\u662f\u7535\u5f71\u7684id\uff0cstart=0\u8868\u793a\u8bc4\u8bba\u7684\u7b2c0\u6761\u8bc4\u8bba\u3002\u63a5\u4e0b\u6765\u63a5\u5bf9\u8be5\u7f51\u5740\u8fdb\u884c\u89e3\u6790\u4e86\u3002\u6253\u5f00\u4e0a\u56fe\u4e2d\u7684\u77ed\u8bc4\u9875\u9762\u7684html\u4ee3\u7801\uff0c\u6211\u4eec\u53d1\u73b0\u5173\u4e8e\u8bc4\u8bba\u7684\u6570\u636e\u662f\u5728div\u6807\u7b7e\u7684comment\u5c5e\u6027\u4e0b\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u56e0\u6b64\u5bf9\u6b64\u6807\u7b7e\u8fdb\u884c\u89e3\u6790\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythonrequrl='https://movie.douban.com/subject/'+nowplaying_list[0]['id']+'/comments'+'?'+'start=0'+'&limit=20'resp=request.urlopen(requrl)html_data=resp.read().decode('utf-8')soup=bs(html_data,'html.parser')comment_div_lits=soup.find_all('div',class_='comment')12345requrl='https://movie.douban.com/subject/'+nowplaying_list[0]['id']+'/comments'+'?'+'start=0'+'&limit=20'resp=request.urlopen(requrl)html_data=resp.read().decode('utf-8')soup=bs(html_data,'html.parser')comment_div_lits=soup.find_all('div',class_='comment')\u6b64\u65f6\u5728comment_div_lits\u5217\u8868\u4e2d\u5b58\u653e\u7684\u5c31\u662fdiv\u6807\u7b7e\u548ccomment\u5c5e\u6027\u4e0b\u9762\u7684html\u4ee3\u7801\u4e86\u3002\u5728\u4e0a\u56fe\u4e2d\u8fd8\u53ef\u4ee5\u53d1\u73b0\u5728p\u6807\u7b7e\u4e0b\u9762\u5b58\u653e\u4e86\u7f51\u53cb\u5bf9\u7535\u5f71\u7684\u8bc4\u8bba\uff0c\u5982\u4e0b\u56fe\u6240\u793a:\u56e0\u6b64\u5bf9comment_div_lits\u4ee3\u7801\u4e2d\u7684html\u4ee3\u7801\u7ee7\u7eed\u8fdb\u884c\u89e3\u6790\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythoneachCommentList=[];foritemincomment_div_lits:ifitem.find_all('p')[0].stringisnotNone:eachCommentList.append(item.find_all('p')[0].string)1234eachCommentList=[];foritemincomment_div_lits:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifitem.find_all('p')[0].stringisnotNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0eachCommentList.append(item.find_all('p')[0].string)\u4f7f\u7528print(eachCommentList)\u67e5\u770beachCommentList\u5217\u8868\u4e2d\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u770b\u5230\u91cc\u9762\u5b58\u91cc\u6211\u4eec\u60f3\u8981\u7684\u5f71\u8bc4\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u597d\u7684\uff0c\u81f3\u6b64\u6211\u4eec\u5df2\u7ecf\u722c\u53d6\u4e86\u8c46\u74e3\u6700\u8fd1\u64ad\u653e\u7535\u5f71\u7684\u8bc4\u8bba\u6570\u636e\uff0c\u63a5\u4e0b\u6765\u5c31\u8981\u5bf9\u6570\u636e\u8fdb\u884c\u6e05\u6d17\u548c\u8bcd\u4e91\u663e\u793a\u4e86\u3002\u4e8c\u3001\u6570\u636e\u6e05\u6d17\u4e3a\u4e86\u65b9\u4fbf\u8fdb\u884c\u6570\u636e\u8fdb\u884c\u6e05\u6d17\uff0c\u6211\u4eec\u5c06\u5217\u8868\u4e2d\u7684\u6570\u636e\u653e\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\u6570\u7ec4\u4e2d\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythoncomments=''forkinrange(len(eachCommentList)):comments=comments+(str(eachCommentList[k])).strip()123comments=''forkinrange(len(eachCommentList)):\u00a0\u00a0\u00a0\u00a0comments=comments+(str(eachCommentList[k])).strip()\u4f7f\u7528print(comments)\u8fdb\u884c\u67e5\u770b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7684\u8bc4\u8bba\u5df2\u7ecf\u53d8\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u8bc4\u8bba\u4e2d\u8fd8\u6709\u4e0d\u5c11\u7684\u6807\u70b9\u7b26\u53f7\u7b49\u3002\u8fd9\u4e9b\u7b26\u53f7\u5bf9\u6211\u4eec\u8fdb\u884c\u8bcd\u9891\u7edf\u8ba1\u65f6\u6839\u672c\u6ca1\u6709\u7528\uff0c\u56e0\u6b64\u8981\u5c06\u5b83\u4eec\u6e05\u9664\u3002\u6240\u7528\u7684\u65b9\u6cd5\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002python\u4e2d\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u901a\u8fc7re\u6a21\u5757\u6765\u5b9e\u73b0\u7684\u3002\u4ee3\u7801\u5982\u4e0b\uff1aPythonimportrepattern=re.compile(r'[\\u4e00-\\u9fa5]+')filterdata=re.findall(pattern,comments)cleaned_comments=''.join(filterdata)12345importre\u00a0pattern=re.compile(r'[\\u4e00-\\u9fa5]+')filterdata=re.findall(pattern,comments)cleaned_comments=''.join(filterdata)\u7ee7\u7eed\u4f7f\u7528print(cleaned_comments)\u8bed\u53e5\u8fdb\u884c\u67e5\u770b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6b64\u65f6\u8bc4\u8bba\u6570\u636e\u4e2d\u5df2\u7ecf\u6ca1\u6709\u90a3\u4e9b\u6807\u70b9\u7b26\u53f7\u4e86\uff0c\u6570\u636e\u53d8\u5f97\u201c\u5e72\u51c0\u201d\u4e86\u5f88\u591a\u3002\u56e0\u6b64\u8981\u8fdb\u884c\u8bcd\u9891\u7edf\u8ba1\uff0c\u6240\u4ee5\u5148\u8981\u8fdb\u884c\u4e2d\u6587\u5206\u8bcd\u64cd\u4f5c\u3002\u5728\u8fd9\u91cc\u6211\u4f7f\u7528\u7684\u662f\u7ed3\u5df4\u5206\u8bcd\u3002\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u7ed3\u5df4\u5206\u8bcd\uff0c\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4f7f\u7528pipinstalljieba\u8fdb\u884c\u5b89\u88c5\u3002\uff08\u6ce8\uff1a\u53ef\u4ee5\u4f7f\u7528piplist\u67e5\u770b\u662f\u5426\u5b89\u88c5\u4e86\u8fd9\u4e9b\u5e93\uff09\u3002\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1aPythonimportjieba#\u5206\u8bcd\u5305importpandasaspdsegment=jieba.lcut(cleaned_comments)words_df=pd.DataFrame({'segment':segment})12345importjieba\u00a0\u00a0\u00a0\u00a0#\u5206\u8bcd\u5305importpandasaspd\u00a0\u00a0\u00a0segment=jieba.lcut(cleaned_comments)words_df=pd.DataFrame({'segment':segment})\u56e0\u4e3a\u7ed3\u5df4\u5206\u8bcd\u8981\u7528\u5230pandas\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u52a0\u8f7d\u4e86pandas\u5305\u3002\u53ef\u4ee5\u4f7f\u7528words_df.head()\u67e5\u770b\u5206\u8bcd\u4e4b\u540e\u7684\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u7684\u6570\u636e\u4e2d\u6709\u201c\u770b\u201d\u3001\u201c\u592a\u201d\u3001\u201c\u7684\u201d\u7b49\u865a\u8bcd\uff08\u505c\u7528\u8bcd\uff09\uff0c\u800c\u8fd9\u4e9b\u8bcd\u5728\u4efb\u4f55\u573a\u666f\u4e2d\u90fd\u662f\u9ad8\u9891\u65f6\uff0c\u5e76\u4e14\u6ca1\u6709\u5b9e\u9645\u7684\u542b\u4e49\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u4ed6\u4eec\u8fdb\u884c\u6e05\u9664\u3002\u6211\u628a\u505c\u7528\u8bcd\u653e\u5728\u4e00\u4e2astopwords.txt\u6587\u4ef6\u4e2d\uff0c\u5c06\u6211\u4eec\u7684\u6570\u636e\u4e0e\u505c\u7528\u8bcd\u8fdb\u884c\u6bd4\u5bf9\u5373\u53ef\uff08\u6ce8\uff1a\u53ea\u8981\u5728\u767e\u5ea6\u4e2d\u8f93\u5165stopwords.txt\uff0c\u5c31\u53ef\u4ee5\u4e0b\u8f7d\u5230\u8be5\u6587\u4ef6\uff09\u3002\u53bb\u505c\u7528\u8bcd\u4ee3\u7801\u5982\u4e0b\u4ee3\u7801\u5982\u4e0b\uff1aPythonstopwords=pd.read_csv(\"stopwords.txt\",index_col=False,quoting=3,sep=\"\\t\",names=['stopword'],encoding='utf-8')#quoting=3\u5168\u4e0d\u5f15\u7528words_df=words_df[~words_df.segment.isin(stopwords.stopword)]12stopwords=pd.read_csv(\"stopwords.txt\",index_col=False,quoting=3,sep=\"\\t\",names=['stopword'],encoding='utf-8')#quoting=3\u5168\u4e0d\u5f15\u7528words_df=words_df[~words_df.segment.isin(stopwords.stopword)]\u7ee7\u7eed\u4f7f\u7528words_df.head()\u8bed\u53e5\u6765\u67e5\u770b\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u505c\u7528\u8bcd\u5df2\u7ecf\u88ab\u51fa\u53bb\u4e86\u3002\u63a5\u4e0b\u6765\u5c31\u8981\u8fdb\u884c\u8bcd\u9891\u7edf\u8ba1\u4e86\uff0c\u4ee3\u7801\u5982\u4e0b\uff1aPythonimportnumpy#numpy\u8ba1\u7b97\u5305words_stat=words_df.groupby(by=['segment'])['segment'].agg({\"\u8ba1\u6570\":numpy.size})words_stat=words_stat.reset_index().sort_values(by=[\"\u8ba1\u6570\"],ascending=False)123importnumpy\u00a0\u00a0\u00a0\u00a0#numpy\u8ba1\u7b97\u5305words_stat=words_df.groupby(by=['segment'])['segment'].agg({\"\u8ba1\u6570\":numpy.size})words_stat=words_stat.reset_index().sort_values(by=[\"\u8ba1\u6570\"],ascending=False)\u7528words_stat.head()\u8fdb\u884c\u67e5\u770b\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a\u7531\u4e8e\u6211\u4eec\u524d\u9762\u53ea\u662f\u722c\u53d6\u4e86\u7b2c\u4e00\u9875\u7684\u8bc4\u8bba\uff0c\u6240\u4ee5\u6570\u636e\u6709\u70b9\u5c11\uff0c\u5728\u6700\u540e\u7ed9\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u4e2d\uff0c\u6211\u722c\u53d6\u4e8610\u9875\u7684\u8bc4\u8bba\uff0c\u6240\u6570\u636e\u8fd8\u662f\u6709\u53c2\u8003\u4ef7\u503c\u3002\u4e09\u3001\u7528\u8bcd\u4e91\u8fdb\u884c\u663e\u793a\u4ee3\u7801\u5982\u4e0b\uff1aPythonimportmatplotlib.pyplotasplt%matplotlibinlineimportmatplotlibmatplotlib.rcParams['figure.figsize']=(10.0,5.0)fromwordcloudimportWordCloud#\u8bcd\u4e91\u5305wordcloud=WordCloud(font_path=\"simhei.ttf\",background_color=\"white\",max_font_size=80)#\u6307\u5b9a\u5b57\u4f53\u7c7b\u578b\u3001\u5b57\u4f53\u5927\u5c0f\u548c\u5b57\u4f53\u989c\u8272word_frequence={x[0]:x[1]forxinwords_stat.head(1000).values}word_frequence_list=[]forkeyinword_frequence:temp=(key,word_frequence[key])word_frequence_list.append(temp)wordcloud=wordcloud.fit_words(word_frequence_list)plt.imshow(wordcloud)12345678910111213141516importmatplotlib.pyplotasplt%matplotlibinline\u00a0importmatplotlibmatplotlib.rcParams['figure.figsize']=(10.0,5.0)fromwordcloudimportWordCloud#\u8bcd\u4e91\u5305\u00a0wordcloud=WordCloud(font_path=\"simhei.ttf\",background_color=\"white\",max_font_size=80)#\u6307\u5b9a\u5b57\u4f53\u7c7b\u578b\u3001\u5b57\u4f53\u5927\u5c0f\u548c\u5b57\u4f53\u989c\u8272word_frequence={x[0]:x[1]forxinwords_stat.head(1000).values}word_frequence_list=[]forkeyinword_frequence:\u00a0\u00a0\u00a0\u00a0temp=(key,word_frequence[key])\u00a0\u00a0\u00a0\u00a0word_frequence_list.append(temp)\u00a0wordcloud=wordcloud.fit_words(word_frequence_list)plt.imshow(wordcloud)\u5176\u4e2dsimhei.ttf\u4f7f\u7528\u6765\u6307\u5b9a\u5b57\u4f53\u7684\uff0c\u53ef\u4ee5\u5728\u767e\u5ea6\u4e0a\u8f93\u5165simhei.ttf\u8fdb\u884c\u4e0b\u8f7d\u540e\uff0c\u653e\u5165\u7a0b\u5e8f\u7684\u6839\u76ee\u5f55\u5373\u53ef\u3002\u663e\u793a\u7684\u56fe\u50cf\u5982\u4e0b\uff1a\u5230\u6b64\u4e3a\u6b62\uff0c\u6574\u4e2a\u9879\u76ee\u7684\u4ecb\u7ecd\u5c31\u7ed3\u675f\u4e86\u3002\u7531\u4e8e\u81ea\u5df1\u4e5f\u8fd8\u662f\u4e2a\u521d\u5b66\u8005\uff0c\u63a5\u89e6python\u4e0d\u4e45\uff0c\u4ee3\u7801\u5199\u7684\u5e76\u4e0d\u597d\u3002\u800c\u4e14\u7b2c\u4e00\u6b21\u5199\u6280\u672f\u535a\u5ba2\uff0c\u8868\u8fbe\u7684\u6709\u4e9b\u5197\u4f59\uff0c\u8bf7\u5927\u5bb6\u591a\u591a\u5305\u6db5\uff0c\u6709\u4e0d\u5bf9\u7684\u5730\u65b9\uff0c\u8bf7\u5927\u5bb6\u6279\u8bc4\u6307\u6b63\u3002\u4ee5\u540e\u6211\u4e5f\u4f1a\u5c06\u81ea\u5df1\u505a\u7684\u5c0f\u9879\u76ee\u4ee5\u8fd9\u79cd\u5f62\u5f0f\u5199\u5728\u535a\u5ba2\u4e0a\u548c\u5927\u5bb6\u4e00\u8d77\u4ea4\u6d41\uff01\u6700\u540e\u8d34\u4e0a\u5b8c\u6574\u7684\u4ee3\u7801\u3002\u5b8c\u6574\u4ee3\u7801Python#coding:utf-8__author__='hang'importwarningswarnings.filterwarnings(\"ignore\")importjieba#\u5206\u8bcd\u5305importnumpy#numpy\u8ba1\u7b97\u5305importcodecs#codecs\u63d0\u4f9b\u7684open\u65b9\u6cd5\u6765\u6307\u5b9a\u6253\u5f00\u7684\u6587\u4ef6\u7684\u8bed\u8a00\u7f16\u7801\uff0c\u5b83\u4f1a\u5728\u8bfb\u53d6\u7684\u65f6\u5019\u81ea\u52a8\u8f6c\u6362\u4e3a\u5185\u90e8unicodeimportreimportpandasaspdimportmatplotlib.pyplotaspltfromurllibimportrequestfrombs4importBeautifulSoupasbs%matplotlibinlineimportmatplotlibmatplotlib.rcParams['figure.figsize']=(10.0,5.0)fromwordcloudimportWordCloud#\u8bcd\u4e91\u5305#\u5206\u6790\u7f51\u9875\u51fd\u6570defgetNowPlayingMovie_list():resp=request.urlopen('https://movie.douban.com/nowplaying/hangzhou/')html_data=resp.read().decode('utf-8')soup=bs(html_data,'html.parser')nowplaying_movie=soup.find_all('div',id='nowplaying')nowplaying_movie_list=nowplaying_movie[0].find_all('li',class_='list-item')nowplaying_list=[]foriteminnowplaying_movie_list:nowplaying_dict={}nowplaying_dict['id']=item['data-subject']fortag_img_iteminitem.find_all('img'):nowplaying_dict['name']=tag_img_item['alt']nowplaying_list.append(nowplaying_dict)returnnowplaying_list#\u722c\u53d6\u8bc4\u8bba\u51fd\u6570defgetCommentsById(movieId,pageNum):eachCommentList=[];ifpageNum>0:start=(pageNum-1)*20else:returnFalserequrl='https://movie.douban.com/subject/'+movieId+'/comments'+'?'+'start='+str(start)+'&limit=20'print(requrl)resp=request.urlopen(requrl)html_data=resp.read().decode('utf-8')soup=bs(html_data,'html.parser')comment_div_lits=soup.find_all('div',class_='comment')foritemincomment_div_lits:ifitem.find_all('p')[0].stringisnotNone:eachCommentList.append(item.find_all('p')[0].string)returneachCommentListdefmain():#\u5faa\u73af\u83b7\u53d6\u7b2c\u4e00\u4e2a\u7535\u5f71\u7684\u524d10\u9875\u8bc4\u8bbacommentList=[]NowPlayingMovie_list=getNowPlayingMovie_list()foriinrange(10):num=i+1commentList_temp=getCommentsById(NowPlayingMovie_list[0]['id'],num)commentList.append(commentList_temp)#\u5c06\u5217\u8868\u4e2d\u7684\u6570\u636e\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32comments=''forkinrange(len(commentList)):comments=comments+(str(commentList[k])).strip()#\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53bb\u9664\u6807\u70b9\u7b26\u53f7pattern=re.compile(r'[\\u4e00-\\u9fa5]+')filterdata=re.findall(pattern,comments)cleaned_comments=''.join(filterdata)#\u4f7f\u7528\u7ed3\u5df4\u5206\u8bcd\u8fdb\u884c\u4e2d\u6587\u5206\u8bcdsegment=jieba.lcut(cleaned_comments)words_df=pd.DataFrame({'segment':segment})#\u53bb\u6389\u505c\u7528\u8bcdstopwords=pd.read_csv(\"stopwords.txt\",index_col=False,quoting=3,sep=\"\\t\",names=['stopword'],encoding='utf-8')#quoting=3\u5168\u4e0d\u5f15\u7528words_df=words_df[~words_df.segment.isin(stopwords.stopword)]#\u7edf\u8ba1\u8bcd\u9891words_stat=words_df.groupby(by=['segment'])['segment'].agg({\"\u8ba1\u6570\":numpy.size})words_stat=words_stat.reset_index().sort_values(by=[\"\u8ba1\u6570\"],ascending=False)#\u7528\u8bcd\u4e91\u8fdb\u884c\u663e\u793awordcloud=WordCloud(font_path=\"simhei.ttf\",background_color=\"white\",max_font_size=80)word_frequence={x[0]:x[1]forxinwords_stat.head(1000).values}word_frequence_list=[]forkeyinword_frequence:temp=(key,word_frequence[key])word_frequence_list.append(temp)wordcloud=wordcloud.fit_words(word_frequence_list)plt.imshow(wordcloud)#\u4e3b\u51fd\u6570main()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798#coding:utf-8__author__='hang'\u00a0importwarningswarnings.filterwarnings(\"ignore\")importjieba\u00a0\u00a0\u00a0\u00a0#\u5206\u8bcd\u5305importnumpy\u00a0\u00a0\u00a0\u00a0#numpy\u8ba1\u7b97\u5305importcodecs\u00a0\u00a0#codecs\u63d0\u4f9b\u7684open\u65b9\u6cd5\u6765\u6307\u5b9a\u6253\u5f00\u7684\u6587\u4ef6\u7684\u8bed\u8a00\u7f16\u7801\uff0c\u5b83\u4f1a\u5728\u8bfb\u53d6\u7684\u65f6\u5019\u81ea\u52a8\u8f6c\u6362\u4e3a\u5185\u90e8unicodeimportreimportpandasaspd\u00a0\u00a0importmatplotlib.pyplotaspltfromurllibimportrequestfrombs4importBeautifulSoupasbs%matplotlibinline\u00a0importmatplotlibmatplotlib.rcParams['figure.figsize']=(10.0,5.0)fromwordcloudimportWordCloud#\u8bcd\u4e91\u5305\u00a0#\u5206\u6790\u7f51\u9875\u51fd\u6570defgetNowPlayingMovie_list():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0resp=request.urlopen('https://movie.douban.com/nowplaying/hangzhou/')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0html_data=resp.read().decode('utf-8')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0soup=bs(html_data,'html.parser')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_movie=soup.find_all('div',id='nowplaying')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_movie_list=nowplaying_movie[0].find_all('li',class_='list-item')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_list=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0foriteminnowplaying_movie_list:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_dict={}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_dict['id']=item['data-subject']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fortag_img_iteminitem.find_all('img'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_dict['name']=tag_img_item['alt']\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0nowplaying_list.append(nowplaying_dict)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnnowplaying_list\u00a0#\u722c\u53d6\u8bc4\u8bba\u51fd\u6570defgetCommentsById(movieId,pageNum):\u00a0\u00a0\u00a0\u00a0eachCommentList=[];\u00a0\u00a0\u00a0\u00a0ifpageNum>0:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0start=(pageNum-1)*20\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnFalse\u00a0\u00a0\u00a0\u00a0requrl='https://movie.douban.com/subject/'+movieId+'/comments'+'?'+'start='+str(start)+'&limit=20'\u00a0\u00a0\u00a0\u00a0print(requrl)\u00a0\u00a0\u00a0\u00a0resp=request.urlopen(requrl)\u00a0\u00a0\u00a0\u00a0html_data=resp.read().decode('utf-8')\u00a0\u00a0\u00a0\u00a0soup=bs(html_data,'html.parser')\u00a0\u00a0\u00a0\u00a0comment_div_lits=soup.find_all('div',class_='comment')\u00a0\u00a0\u00a0\u00a0foritemincomment_div_lits:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifitem.find_all('p')[0].stringisnotNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0eachCommentList.append(item.find_all('p')[0].string)\u00a0\u00a0\u00a0\u00a0returneachCommentList\u00a0defmain():\u00a0\u00a0\u00a0\u00a0#\u5faa\u73af\u83b7\u53d6\u7b2c\u4e00\u4e2a\u7535\u5f71\u7684\u524d10\u9875\u8bc4\u8bba\u00a0\u00a0\u00a0\u00a0commentList=[]\u00a0\u00a0\u00a0\u00a0NowPlayingMovie_list=getNowPlayingMovie_list()\u00a0\u00a0\u00a0\u00a0foriinrange(10):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0num=i+1\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0commentList_temp=getCommentsById(NowPlayingMovie_list[0]['id'],num)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0commentList.append(commentList_temp)\u00a0\u00a0\u00a0\u00a0\u00a0#\u5c06\u5217\u8868\u4e2d\u7684\u6570\u636e\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u00a0\u00a0\u00a0\u00a0comments=''\u00a0\u00a0\u00a0\u00a0forkinrange(len(commentList)):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0comments=comments+(str(commentList[k])).strip()\u00a0\u00a0\u00a0\u00a0\u00a0#\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53bb\u9664\u6807\u70b9\u7b26\u53f7\u00a0\u00a0\u00a0\u00a0pattern=re.compile(r'[\\u4e00-\\u9fa5]+')\u00a0\u00a0\u00a0\u00a0filterdata=re.findall(pattern,comments)\u00a0\u00a0\u00a0\u00a0cleaned_comments=''.join(filterdata)\u00a0\u00a0\u00a0\u00a0\u00a0#\u4f7f\u7528\u7ed3\u5df4\u5206\u8bcd\u8fdb\u884c\u4e2d\u6587\u5206\u8bcd\u00a0\u00a0\u00a0\u00a0segment=jieba.lcut(cleaned_comments)\u00a0\u00a0\u00a0\u00a0words_df=pd.DataFrame({'segment':segment})\u00a0\u00a0\u00a0\u00a0\u00a0#\u53bb\u6389\u505c\u7528\u8bcd\u00a0\u00a0\u00a0\u00a0stopwords=pd.read_csv(\"stopwords.txt\",index_col=False,quoting=3,sep=\"\\t\",names=['stopword'],encoding='utf-8')#quoting=3\u5168\u4e0d\u5f15\u7528\u00a0\u00a0\u00a0\u00a0words_df=words_df[~words_df.segment.isin(stopwords.stopword)]\u00a0\u00a0\u00a0\u00a0\u00a0#\u7edf\u8ba1\u8bcd\u9891\u00a0\u00a0\u00a0\u00a0words_stat=words_df.groupby(by=['segment'])['segment'].agg({\"\u8ba1\u6570\":numpy.size})\u00a0\u00a0\u00a0\u00a0words_stat=words_stat.reset_index().sort_values(by=[\"\u8ba1\u6570\"],ascending=False)\u00a0\u00a0\u00a0\u00a0\u00a0#\u7528\u8bcd\u4e91\u8fdb\u884c\u663e\u793a\u00a0\u00a0\u00a0\u00a0wordcloud=WordCloud(font_path=\"simhei.ttf\",background_color=\"white\",max_font_size=80)\u00a0\u00a0\u00a0\u00a0word_frequence={x[0]:x[1]forxinwords_stat.head(1000).values}\u00a0\u00a0\u00a0\u00a0\u00a0word_frequence_list=[]\u00a0\u00a0\u00a0\u00a0forkeyinword_frequence:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0temp=(key,word_frequence[key])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0word_frequence_list.append(temp)\u00a0\u00a0\u00a0\u00a0\u00a0wordcloud=wordcloud.fit_words(word_frequence_list)\u00a0\u00a0\u00a0\u00a0plt.imshow(wordcloud)\u00a0#\u4e3b\u51fd\u6570main()\u7ed3\u679c\u663e\u793a\u5982\u4e0b\uff1a\u4e0a\u56fe\u57fa\u672c\u53cd\u6620\u4e86\u300a\u6218\u72fc2\u300b\u8fd9\u90e8\u7535\u5f71\u7684\u60c5\u51b5\u3002PS:\u6211\u672c\u4eba\u5e76\u4e0d\u559c\u6b22\u8fd9\u90e8\u7535\u5f71\uff0c\u5185\u5bb9\u592a\u7a7a\u6d1e\u3001\u592a\u5047\uff0c\u4e3a\u4e86\u7231\u56fd\u800c\u7231\u56fd\uff0c\u6ca1\u610f\u601d\u3002\u54ce\uff0c\u8fd9\u4e24\u5e74\u771f\u662f\u56fd\u4ea7\u7535\u5f71\u7684\u4f4e\u8c37\u554a\uff0c\u6ca1\u6709\u4e00\u90e8\u62ff\u5f97\u51fa\u624b\u7684\u56fd\u4ea7\u7535\u5f71\uff0c\u770b\u770b\u4eba\u5bb6\u5370\u5ea6\u62cd\u7684\u300a\u6454\u8de4\u5427\uff0c\u7238\u7238\u300b\u90a3\u624d\u662f\u62cd\u7684\u6709\u6df1\u5ea6\uff0c\u540c\u6837\u662f\u8868\u73b0\u7231\u56fd\uff0c\u56fd\u4ea7\u7535\u5f71\u8fd8\u662f\u9700\u8981\u5411\u522b\u7684\u56fd\u5bb6\u597d\u597d\u5b66\u5b66\u30024\u8d5e27\u6536\u85cf45\u8bc4\u8bba"]},
{"art_title": ["Python \u9b54\u672f\u65b9\u6cd5 - Magic Method"], "art_url": ["http://python.jobbole.com/88367/"], "art_create_time": ["2017/08/15"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/24004ba5c7c6660ad259e346b2d86114.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aj_hao104\u00a0\u00a0\u00a0\u4ecb\u7ecd\u5728Python\u4e2d\uff0c\u6240\u6709\u4ee5\u201c__\u201d\u53cc\u4e0b\u5212\u7ebf\u5305\u8d77\u6765\u7684\u65b9\u6cd5\uff0c\u90fd\u7edf\u79f0\u4e3a\u201cMagicMethod\u201d,\u4f8b\u5982\u7c7b\u7684\u521d\u59cb\u5316\u65b9\u6cd5__init__,Python\u4e2d\u6240\u6709\u7684\u9b54\u672f\u65b9\u6cd5\u5747\u5728\u5b98\u65b9\u6587\u6863\u4e2d\u6709\u76f8\u5e94\u63cf\u8ff0\uff0c\u4f46\u662f\u5bf9\u4e8e\u5b98\u65b9\u7684\u63cf\u8ff0\u6bd4\u8f83\u6df7\u4e71\u800c\u4e14\u7ec4\u7ec7\u6bd4\u8f83\u677e\u6563\u3002\u5f88\u96be\u627e\u5230\u6709\u4e00\u4e2a\u4f8b\u5b50\u3002\u6784\u9020\u548c\u521d\u59cb\u5316\u6bcf\u4e2aPythoner\u90fd\u77e5\u9053\u4e00\u4e2a\u6700\u57fa\u672c\u7684\u9b54\u672f\u65b9\u6cd5\uff0c__init__\u3002\u901a\u8fc7\u6b64\u65b9\u6cd5\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u5bf9\u8c61\u7684\u521d\u59cb\u64cd\u4f5c\u3002\u7136\u800c\uff0c\u5f53\u8c03\u7528x=SomeClass()\u7684\u65f6\u5019\uff0c__init__\u5e76\u4e0d\u662f\u7b2c\u4e00\u4e2a\u88ab\u8c03\u7528\u7684\u65b9\u6cd5\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd8\u6709\u4e00\u4e2a\u53eb\u505a__new__\u7684\u65b9\u6cd5\uff0c\u4e24\u4e2a\u5171\u540c\u6784\u6210\u4e86\u201c\u6784\u9020\u51fd\u6570\u201d\u3002__new__\u662f\u7528\u6765\u521b\u5efa\u7c7b\u5e76\u8fd4\u56de\u8fd9\u4e2a\u7c7b\u7684\u5b9e\u4f8b,\u800c__init__\u53ea\u662f\u5c06\u4f20\u5165\u7684\u53c2\u6570\u6765\u521d\u59cb\u5316\u8be5\u5b9e\u4f8b\u3002\u5728\u5bf9\u8c61\u751f\u547d\u5468\u671f\u8c03\u7528\u7ed3\u675f\u65f6\uff0c__del__\u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\uff0c\u53ef\u4ee5\u5c06__del__\u7406\u89e3\u4e3a\u201c\u6784\u6790\u51fd\u6570\u201d\u3002\u4e0b\u9762\u901a\u8fc7\u4ee3\u7801\u7684\u770b\u4e00\u770b\u8fd9\u4e09\u4e2a\u65b9\u6cd5:Pythonfromos.pathimportjoinclassFileObject:'''\u7ed9\u6587\u4ef6\u5bf9\u8c61\u8fdb\u884c\u5305\u88c5\u4ece\u800c\u786e\u8ba4\u5728\u5220\u9664\u65f6\u6587\u4ef6\u6d41\u5173\u95ed'''def__init__(self,filepath='~',filename='sample.txt'):#\u8bfb\u5199\u6a21\u5f0f\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6self.file=open(join(filepath,filename),'r+')def__del__(self):self.file.close()delself.file123456789101112fromos.pathimportjoin\u00a0classFileObject:\u00a0\u00a0\u00a0\u00a0'''\u7ed9\u6587\u4ef6\u5bf9\u8c61\u8fdb\u884c\u5305\u88c5\u4ece\u800c\u786e\u8ba4\u5728\u5220\u9664\u65f6\u6587\u4ef6\u6d41\u5173\u95ed'''\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,filepath='~',filename='sample.txt'):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8bfb\u5199\u6a21\u5f0f\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.file=open(join(filepath,filename),'r+')\u00a0\u00a0\u00a0\u00a0\u00a0def__del__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.file.close()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delself.file\u63a7\u5236\u5c5e\u6027\u8bbf\u95ee\u8bb8\u591a\u4ece\u5176\u4ed6\u8bed\u8a00\u8f6c\u5230Python\u7684\u4eba\u4f1a\u62b1\u6028\u5b83\u7f3a\u4e4f\u7c7b\u7684\u771f\u6b63\u5c01\u88c5\u3002(\u6ca1\u6709\u529e\u6cd5\u5b9a\u4e49\u79c1\u6709\u53d8\u91cf\uff0c\u7136\u540e\u5b9a\u4e49\u516c\u5171\u7684getter\u548csetter)\u3002Python\u5176\u5b9e\u53ef\u4ee5\u901a\u8fc7\u9b54\u672f\u65b9\u6cd5\u6765\u5b8c\u6210\u5c01\u88c5\u3002\u6211\u4eec\u6765\u770b\u4e00\u4e0b:Python__getattr__(self,name)1__getattr__(self,name)\u5b9a\u4e49\u5f53\u7528\u6237\u8bd5\u56fe\u83b7\u53d6\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u65f6\u7684\u884c\u4e3a\u3002\u8fd9\u9002\u7528\u4e8e\u5bf9\u666e\u901a\u62fc\u5199\u9519\u8bef\u7684\u83b7\u53d6\u548c\u91cd\u5b9a\u5411\uff0c\u5bf9\u83b7\u53d6\u4e00\u4e9b\u4e0d\u5efa\u8bae\u7684\u5c5e\u6027\u65f6\u5019\u7ed9\u51fa\u8b66\u544a(\u5982\u679c\u4f60\u613f\u610f\u4f60\u4e5f\u53ef\u4ee5\u8ba1\u7b97\u5e76\u4e14\u7ed9\u51fa\u4e00\u4e2a\u503c)\u6216\u8005\u5904\u7406\u4e00\u4e2aAttributeError\u3002\u53ea\u6709\u5f53\u8c03\u7528\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u7684\u65f6\u5019\u4f1a\u88ab\u8fd4\u56de\u3002Python__setattr__(self,name,value)1__setattr__(self,name,value)\u4e0e__getattr__(self,name)\u4e0d\u540c\uff0c__setattr__\u662f\u4e00\u4e2a\u5c01\u88c5\u7684\u89e3\u51b3\u65b9\u6848\u3002\u65e0\u8bba\u5c5e\u6027\u662f\u5426\u5b58\u5728\uff0c\u5b83\u90fd\u5141\u8bb8\u4f60\u5b9a\u4e49\u5bf9\u5bf9\u5c5e\u6027\u7684\u8d4b\u503c\u884c\u4e3a\uff0c\u4ee5\u4e3a\u8fd9\u4f60\u53ef\u4ee5\u5bf9\u5c5e\u6027\u7684\u503c\u8fdb\u884c\u4e2a\u6027\u5b9a\u5236\u3002\u5b9e\u73b0__setattr__\u65f6\u8981\u907f\u514d\u201d\u65e0\u9650\u9012\u5f52\u201d\u7684\u9519\u8bef\u3002Python__delattr__1__delattr__\u4e0e__setattr__\u76f8\u540c\uff0c\u4f46\u662f\u529f\u80fd\u662f\u5220\u9664\u4e00\u4e2a\u5c5e\u6027\u800c\u4e0d\u662f\u8bbe\u7f6e\u4ed6\u4eec\u3002\u5b9e\u73b0\u65f6\u4e5f\u8981\u9632\u6b62\u65e0\u9650\u9012\u5f52\u73b0\u8c61\u53d1\u751f\u3002Python__getattribute__(self,name)1__getattribute__(self,name)__getattribute__\u5b9a\u4e49\u4e86\u4f60\u7684\u5c5e\u6027\u88ab\u8bbf\u95ee\u65f6\u7684\u884c\u4e3a\uff0c\u76f8\u6bd4\u8f83\uff0c__getattr__\u53ea\u6709\u8be5\u5c5e\u6027\u4e0d\u5b58\u5728\u65f6\u624d\u4f1a\u8d77\u4f5c\u7528\u3002\u56e0\u6b64\uff0c\u5728\u652f\u6301__getattribute__\u7684Python\u7248\u672c,\u8c03\u7528__getattr__\u524d\u5fc5\u5b9a\u4f1a\u8c03\u7528__getattribute__\u3002__getattribute__\u540c\u6837\u8981\u907f\u514d\u201d\u65e0\u9650\u9012\u5f52\u201d\u7684\u9519\u8bef\u3002\u9700\u8981\u63d0\u9192\u7684\u662f\uff0c\u6700\u597d\u4e0d\u8981\u5c1d\u8bd5\u53bb\u5b9e\u73b0__getattribute__,\u56e0\u4e3a\u5f88\u5c11\u89c1\u5230\u8fd9\u79cd\u505a\u6cd5\uff0c\u800c\u4e14\u5f88\u5bb9\u6613\u51fabug\u3002\u5728\u8fdb\u884c\u5c5e\u6027\u8bbf\u95ee\u63a7\u5236\u5b9a\u4e49\u7684\u65f6\u5019\u5f88\u53ef\u80fd\u4f1a\u5f88\u5bb9\u6613\u5f15\u8d77\u201c\u65e0\u9650\u9012\u5f52\u201d\u3002\u5982\u4e0b\u9762\u4ee3\u7801:Python#\u9519\u8bef\u7528\u6cd5def__setattr__(self,name,value):self.name=value#\u6bcf\u5f53\u5c5e\u6027\u88ab\u8d4b\u503c\u7684\u65f6\u5019(\u5982self.name=value)\uff0c``__setattr__()``\u4f1a\u88ab\u8c03\u7528\uff0c\u8fd9\u6837\u5c31\u9020\u6210\u4e86\u9012\u5f52\u8c03\u7528\u3002#\u8fd9\u610f\u5473\u8fd9\u4f1a\u8c03\u7528``self.__setattr__('name',value)``\uff0c\u6bcf\u6b21\u65b9\u6cd5\u4f1a\u8c03\u7528\u81ea\u5df1\u3002\u8fd9\u6837\u4f1a\u9020\u6210\u7a0b\u5e8f\u5d29\u6e83\u3002#\u6b63\u786e\u7528\u6cd5def__setattr__(self,name,value):self.__dict__[name]=value#\u7ed9\u7c7b\u4e2d\u7684\u5c5e\u6027\u540d\u5206\u914d\u503c#\u5b9a\u5236\u7279\u6709\u5c5e\u602712345678910#\u00a0\u00a0\u9519\u8bef\u7528\u6cd5def__setattr__(self,name,value):\u00a0\u00a0\u00a0\u00a0self.name=value\u00a0\u00a0\u00a0\u00a0#\u6bcf\u5f53\u5c5e\u6027\u88ab\u8d4b\u503c\u7684\u65f6\u5019(\u5982self.name=value)\uff0c``__setattr__()``\u4f1a\u88ab\u8c03\u7528\uff0c\u8fd9\u6837\u5c31\u9020\u6210\u4e86\u9012\u5f52\u8c03\u7528\u3002\u00a0\u00a0\u00a0\u00a0#\u8fd9\u610f\u5473\u8fd9\u4f1a\u8c03\u7528``self.__setattr__('name',value)``\uff0c\u6bcf\u6b21\u65b9\u6cd5\u4f1a\u8c03\u7528\u81ea\u5df1\u3002\u8fd9\u6837\u4f1a\u9020\u6210\u7a0b\u5e8f\u5d29\u6e83\u3002\u00a0#\u00a0\u00a0\u6b63\u786e\u7528\u6cd5def__setattr__(self,name,value):\u00a0\u00a0\u00a0\u00a0self.__dict__[name]=value\u00a0\u00a0#\u7ed9\u7c7b\u4e2d\u7684\u5c5e\u6027\u540d\u5206\u914d\u503c\u00a0\u00a0\u00a0\u00a0#\u5b9a\u5236\u7279\u6709\u5c5e\u6027Python\u7684\u9b54\u672f\u65b9\u6cd5\u5f88\u5f3a\u5927\uff0c\u4f46\u662f\u7528\u65f6\u5374\u9700\u8981\u614e\u4e4b\u53c8\u614e\uff0c\u4e86\u89e3\u6b63\u786e\u7684\u4f7f\u7528\u65b9\u6cd5\u975e\u5e38\u91cd\u8981\u3002\u521b\u5efa\u81ea\u5b9a\u4e49\u5bb9\u5668\u6709\u5f88\u591a\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u4f60\u7684Python\u7c7b\u884c\u4e3a\u5411\u5185\u7f6e\u5bb9\u5668\u7c7b\u578b\u4e00\u6837\uff0c\u6bd4\u5982\u6211\u4eec\u5e38\u7528\u7684list\u3001dict\u3001tuple\u3001string\u7b49\u7b49\u3002Python\u7684\u5bb9\u5668\u7c7b\u578b\u5206\u4e3a\u53ef\u53d8\u7c7b\u578b(\u5982list\u3001dict)\u548c\u4e0d\u53ef\u53d8\u7c7b\u578b\uff08\u5982string\u3001tuple\uff09\uff0c\u53ef\u53d8\u5bb9\u5668\u548c\u4e0d\u53ef\u53d8\u5bb9\u5668\u7684\u533a\u522b\u5728\u4e8e\uff0c\u4e0d\u53ef\u53d8\u5bb9\u5668\u4e00\u65e6\u8d4b\u503c\u540e\uff0c\u4e0d\u53ef\u5bf9\u5176\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u8fdb\u884c\u4fee\u6539\u3002\u3000\u3000\u5728\u8bb2\u521b\u5efa\u81ea\u5b9a\u4e49\u5bb9\u5668\u4e4b\u524d\uff0c\u5e94\u8be5\u5148\u4e86\u89e3\u4e0b\u534f\u8bae\u3002\u8fd9\u91cc\u7684\u534f\u8bae\u8ddf\u5176\u4ed6\u8bed\u8a00\u4e2d\u6240\u8c13\u7684\u201d\u63a5\u53e3\u201d\u6982\u5ff5\u5f88\u50cf\uff0c\u5b83\u7ed9\u4f60\u5f88\u591a\u4f60\u5fc5\u987b\u5b9a\u4e49\u7684\u65b9\u6cd5\u3002\u7136\u800c\u5728Python\u4e2d\u7684\u534f\u8bae\u662f\u5f88\u4e0d\u6b63\u5f0f\u7684\uff0c\u4e0d\u9700\u8981\u660e\u786e\u58f0\u660e\u5b9e\u73b0\u3002\u4e8b\u5b9e\u4e0a\uff0c\u4ed6\u4eec\u66f4\u50cf\u4e00\u79cd\u6307\u5357\u3002\u81ea\u5b9a\u4e49\u5bb9\u5668\u7684magicmethod\u4e0b\u9762\u7ec6\u81f4\u4e86\u89e3\u4e0b\u5b9a\u4e49\u5bb9\u5668\u53ef\u80fd\u7528\u5230\u7684\u9b54\u672f\u65b9\u6cd5\u3002\u9996\u5148\uff0c\u5b9e\u73b0\u4e0d\u53ef\u53d8\u5bb9\u5668\u7684\u8bdd\uff0c\u4f60\u53ea\u80fd\u5b9a\u4e49__len__\u548c__getitem__(\u4e0b\u9762\u4f1a\u8bb2\u66f4\u591a)\u3002\u53ef\u53d8\u5bb9\u5668\u534f\u8bae\u5219\u9700\u8981\u6240\u6709\u4e0d\u53ef\u53d8\u5bb9\u5668\u7684\u6240\u6709\uff0c\u53e6\u5916\u8fd8\u9700\u8981__setitem__\u548c__delitem__\u3002\u5982\u679c\u4f60\u5e0c\u671b\u4f60\u7684\u5bf9\u8c61\u662f\u53ef\u8fed\u4ee3\u7684\u8bdd\uff0c\u4f60\u9700\u8981\u5b9a\u4e49__iter__\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002\u8fed\u4ee3\u5668\u5fc5\u987b\u9075\u5faa\u8fed\u4ee3\u5668\u534f\u8bae\uff0c\u9700\u8981\u6709__iter__(\u8fd4\u56de\u5b83\u672c\u8eab)\u548cnext\u3002Python__len__(self)1__len__(self)\u8fd4\u56de\u5bb9\u5668\u7684\u957f\u5ea6\u3002\u5bf9\u4e8e\u53ef\u53d8\u548c\u4e0d\u53ef\u53d8\u5bb9\u5668\u7684\u534f\u8bae\uff0c\u8fd9\u90fd\u662f\u5176\u4e2d\u7684\u4e00\u90e8\u5206\u3002Python__getitem__(self,key)1__getitem__(self,key)\u5b9a\u4e49\u5f53\u67d0\u4e00\u9879\u88ab\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528self[key]\u6240\u4ea7\u751f\u7684\u884c\u4e3a\u3002\u8fd9\u4e5f\u662f\u4e0d\u53ef\u53d8\u5bb9\u5668\u548c\u53ef\u53d8\u5bb9\u5668\u534f\u8bae\u7684\u4e00\u90e8\u5206\u3002\u5982\u679c\u952e\u7684\u7c7b\u578b\u9519\u8bef\u5c06\u4ea7\u751fTypeError\uff1b\u5982\u679ckey\u6ca1\u6709\u5408\u9002\u7684\u503c\u5219\u4ea7\u751fKeyError\u3002Python__setitem__(self,key,value)1__setitem__(self,key,value)\u5f53\u4f60\u6267\u884cself[key]=value\u65f6\uff0c\u8c03\u7528\u7684\u662f\u8be5\u65b9\u6cd5\u3002Python__delitem__(self,key)1__delitem__(self,key)\u5b9a\u4e49\u5f53\u4e00\u4e2a\u9879\u76ee\u88ab\u5220\u9664\u65f6\u7684\u884c\u4e3a(\u6bd4\u5982delself[key])\u3002\u8fd9\u53ea\u662f\u53ef\u53d8\u5bb9\u5668\u534f\u8bae\u4e2d\u7684\u4e00\u90e8\u5206\u3002\u5f53\u4f7f\u7528\u4e00\u4e2a\u65e0\u6548\u7684\u952e\u65f6\u5e94\u8be5\u629b\u51fa\u9002\u5f53\u7684\u5f02\u5e38\u3002Python__iter__(self)1__iter__(self)\u8fd4\u56de\u4e00\u4e2a\u5bb9\u5668\u8fed\u4ee3\u5668\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8fed\u4ee3\u5668\uff0c\u5c24\u5176\u662f\u5f53\u5185\u7f6e\u7684iter()\u65b9\u6cd5\u88ab\u8c03\u7528\u7684\u65f6\u5019\uff0c\u4ee5\u53ca\u5f53\u4f7f\u7528forxincontainer:\u65b9\u5f0f\u5faa\u73af\u7684\u65f6\u5019\u3002\u8fed\u4ee3\u5668\u662f\u5b83\u4eec\u672c\u8eab\u7684\u5bf9\u8c61\uff0c\u5b83\u4eec\u5fc5\u987b\u5b9a\u4e49\u8fd4\u56deself\u7684__iter__\u65b9\u6cd5\u3002Python__reversed__(self)1__reversed__(self)\u5b9e\u73b0\u5f53reversed()\u88ab\u8c03\u7528\u65f6\u7684\u884c\u4e3a\u3002\u5e94\u8be5\u8fd4\u56de\u5e8f\u5217\u53cd\u8f6c\u540e\u7684\u7248\u672c\u3002\u4ec5\u5f53\u5e8f\u5217\u53ef\u4ee5\u662f\u6709\u5e8f\u7684\u65f6\u5019\u5b9e\u73b0\u5b83\uff0c\u4f8b\u5982\u5bf9\u4e8e\u5217\u8868\u6216\u8005\u5143\u7ec4\u3002Python__contains__(self,item)1__contains__(self,item)\u5b9a\u4e49\u4e86\u8c03\u7528in\u548cnotin\u6765\u6d4b\u8bd5\u6210\u5458\u662f\u5426\u5b58\u5728\u7684\u65f6\u5019\u6240\u4ea7\u751f\u7684\u884c\u4e3a\u3002\u4f60\u53ef\u80fd\u4f1a\u95ee\u4e3a\u4ec0\u4e48\u8fd9\u4e2a\u4e0d\u662f\u5e8f\u5217\u534f\u8bae\u7684\u4e00\u90e8\u5206\uff1f\u56e0\u4e3a\u5f53__contains__\u6ca1\u6709\u88ab\u5b9a\u4e49\u7684\u65f6\u5019\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\uff0c\u90a3\u4e48Python\u4f1a\u8fed\u4ee3\u5bb9\u5668\u4e2d\u7684\u5143\u7d20\u6765\u4e00\u4e2a\u4e00\u4e2a\u6bd4\u8f83\uff0c\u4ece\u800c\u51b3\u5b9a\u8fd4\u56deTrue\u6216\u8005False\u3002Python__missing__(self,key)1__missing__(self,key)dict\u5b57\u5178\u7c7b\u578b\u4f1a\u6709\u8be5\u65b9\u6cd5\uff0c\u5b83\u5b9a\u4e49\u4e86key\u5982\u679c\u5728\u5bb9\u5668\u4e2d\u627e\u4e0d\u5230\u65f6\u89e6\u53d1\u7684\u884c\u4e3a\u3002\u6bd4\u5982d={\u2018a\u2019:1},\u5f53\u4f60\u6267\u884cd[notexist]\u65f6\uff0cd.__missing__[\u2018notexist\u2019]\u5c31\u4f1a\u88ab\u8c03\u7528\u3002\u4e00\u4e2a\u5217\u5b50\u4e0b\u9762\u662f\u4e66\u4e2d\u7684\u4f8b\u5b50\uff0c\u7528\u9b54\u672f\u65b9\u6cd5\u6765\u5b9e\u73b0Haskell\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u3002Python#-*-coding:utf-8-*-classFunctionalList:'''\u5b9e\u73b0\u4e86\u5185\u7f6e\u7c7b\u578blist\u7684\u529f\u80fd,\u5e76\u4e30\u5bcc\u4e86\u4e00\u4e9b\u5176\u4ed6\u65b9\u6cd5:head,tail,init,last,drop,take'''def__init__(self,values=None):ifvaluesisNone:self.values=[]else:self.values=valuesdef__len__(self):returnlen(self.values)def__getitem__(self,key):returnself.values[key]def__setitem__(self,key,value):self.values[key]=valuedef__delitem__(self,key):delself.values[key]def__iter__(self):returniter(self.values)def__reversed__(self):returnFunctionalList(reversed(self.values))defappend(self,value):self.values.append(value)defhead(self):#\u83b7\u53d6\u7b2c\u4e00\u4e2a\u5143\u7d20returnself.values[0]deftail(self):#\u83b7\u53d6\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e4b\u540e\u7684\u6240\u6709\u5143\u7d20returnself.values[1:]definit(self):#\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e4b\u524d\u7684\u6240\u6709\u5143\u7d20returnself.values[:-1]deflast(self):#\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\u5143\u7d20returnself.values[-1]defdrop(self,n):#\u83b7\u53d6\u6240\u6709\u5143\u7d20\uff0c\u9664\u4e86\u524dN\u4e2areturnself.values[n:]deftake(self,n):#\u83b7\u53d6\u524dN\u4e2a\u5143\u7d20returnself.values[:n]123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#-*-coding:utf-8-*-classFunctionalList:\u00a0\u00a0\u00a0\u00a0'''\u5b9e\u73b0\u4e86\u5185\u7f6e\u7c7b\u578blist\u7684\u529f\u80fd,\u5e76\u4e30\u5bcc\u4e86\u4e00\u4e9b\u5176\u4ed6\u65b9\u6cd5:head,tail,init,last,drop,take'''\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,values=None):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifvaluesisNone:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.values=[]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.values=values\u00a0\u00a0\u00a0\u00a0\u00a0def__len__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnlen(self.values)\u00a0\u00a0\u00a0\u00a0\u00a0def__getitem__(self,key):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[key]\u00a0\u00a0\u00a0\u00a0\u00a0def__setitem__(self,key,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.values[key]=value\u00a0\u00a0\u00a0\u00a0\u00a0def__delitem__(self,key):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0delself.values[key]\u00a0\u00a0\u00a0\u00a0\u00a0def__iter__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returniter(self.values)\u00a0\u00a0\u00a0\u00a0\u00a0def__reversed__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnFunctionalList(reversed(self.values))\u00a0\u00a0\u00a0\u00a0\u00a0defappend(self,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.values.append(value)\u00a0\u00a0\u00a0\u00a0defhead(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u7b2c\u4e00\u4e2a\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[0]\u00a0\u00a0\u00a0\u00a0deftail(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e4b\u540e\u7684\u6240\u6709\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[1:]\u00a0\u00a0\u00a0\u00a0definit(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e4b\u524d\u7684\u6240\u6709\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[:-1]\u00a0\u00a0\u00a0\u00a0deflast(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[-1]\u00a0\u00a0\u00a0\u00a0defdrop(self,n):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u6240\u6709\u5143\u7d20\uff0c\u9664\u4e86\u524dN\u4e2a\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[n:]\u00a0\u00a0\u00a0\u00a0deftake(self,n):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u83b7\u53d6\u524dN\u4e2a\u5143\u7d20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.values[:n]\u5176\u5b9e\u5728collections\u6a21\u5757\u4e2d\u5df2\u7ecf\u6709\u4e86\u5f88\u591a\u7c7b\u4f3c\u7684\u5b9e\u73b0\uff0c\u6bd4\u5982Counter\u3001OrderedDict\u7b49\u7b49\u3002\u53cd\u5c04\u4f60\u4e5f\u53ef\u4ee5\u63a7\u5236\u600e\u4e48\u4f7f\u7528\u5185\u7f6e\u5728\u51fd\u6570sisinstance()\u548cissubclass()\u65b9\u6cd5\u53cd\u5c04\u5b9a\u4e49\u9b54\u672f\u65b9\u6cd5.\u8fd9\u4e2a\u9b54\u672f\u65b9\u6cd5\u662f:Python__instancecheck__(self,instance)1__instancecheck__(self,instance)\u68c0\u67e5\u4e00\u4e2a\u5b9e\u4f8b\u662f\u4e0d\u662f\u4f60\u5b9a\u4e49\u7684\u7c7b\u7684\u5b9e\u4f8bPython__subclasscheck__(self,subclass)1__subclasscheck__(self,subclass)\u68c0\u67e5\u4e00\u4e2a\u7c7b\u662f\u4e0d\u662f\u4f60\u5b9a\u4e49\u7684\u7c7b\u7684\u5b50\u7c7b\u8fd9\u4e9b\u9b54\u672f\u65b9\u6cd5\u7684\u7528\u4f8b\u770b\u8d77\u6765\u5f88\u5c0f,\u5e76\u4e14\u786e\u5b9e\u975e\u5e38\u5b9e\u7528.\u5b83\u4eec\u53cd\u5e94\u4e86\u5173\u4e8e\u9762\u5411\u5bf9\u8c61\u7a0b\u5e8f\u4e0a\u4e00\u4e9b\u91cd\u8981\u7684\u4e1c\u897f\u5728Python\u4e0a,\u5e76\u4e14\u603b\u7684\u6765\u8bf4Python:\u603b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u65b9\u6cd5\u53bb\u627e\u67d0\u4e9b\u4e8b\u60c5,\u5373\u4f7f\u662f\u6ca1\u6709\u5fc5\u8981\u7684.\u8fd9\u4e9b\u9b54\u6cd5\u65b9\u6cd5\u53ef\u80fd\u770b\u8d77\u6765\u4e0d\u662f\u5f88\u6709\u7528,\u4f46\u662f\u4e00\u65e6\u4f60\u9700\u8981\u5b83\u4eec\uff0c\u4f60\u4f1a\u611f\u5230\u5e86\u5e78\u5b83\u4eec\u7684\u5b58\u5728\u3002\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\u4f60\u4e5f\u8bb8\u5df2\u7ecf\u77e5\u9053\uff0c\u5728Python\u4e2d\uff0c\u65b9\u6cd5\u662f\u6700\u9ad8\u7ea7\u7684\u5bf9\u8c61\u3002\u8fd9\u610f\u5473\u7740\u4ed6\u4eec\u4e5f\u53ef\u4ee5\u88ab\u4f20\u9012\u5230\u65b9\u6cd5\u4e2d\uff0c\u5c31\u50cf\u5176\u4ed6\u5bf9\u8c61\u4e00\u6837\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u60ca\u4eba\u7684\u7279\u6027\u3002\u5728Python\u4e2d\uff0c\u4e00\u4e2a\u7279\u6b8a\u7684\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u7c7b\u7684\u5b9e\u4f8b\u7684\u884c\u4e3a\u8868\u73b0\u7684\u50cf\u51fd\u6570\u4e00\u6837\uff0c\u4f60\u53ef\u4ee5\u8c03\u7528\u5b83\u4eec\uff0c\u5c06\u4e00\u4e2a\u51fd\u6570\u5f53\u505a\u4e00\u4e2a\u53c2\u6570\u4f20\u5230\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\u4e2d\u7b49\u7b49\u3002\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u7279\u6027\uff0c\u5176\u8ba9Python\u7f16\u7a0b\u66f4\u52a0\u8212\u9002\u751c\u7f8e\u3002Python__call__(self,[args...])1__call__(self,[args...])\u5141\u8bb8\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u50cf\u51fd\u6570\u4e00\u6837\u88ab\u8c03\u7528\u3002\u5b9e\u8d28\u4e0a\u8bf4\uff0c\u8fd9\u610f\u5473\u7740x()\u4e0ex.__call__()\u662f\u76f8\u540c\u7684\u3002\u6ce8\u610f__call__\u7684\u53c2\u6570\u53ef\u53d8\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5b9a\u4e49__call__\u4e3a\u5176\u4ed6\u4f60\u60f3\u8981\u7684\u51fd\u6570\uff0c\u65e0\u8bba\u6709\u591a\u5c11\u4e2a\u53c2\u6570\u3002__call__\u5728\u90a3\u4e9b\u7c7b\u7684\u5b9e\u4f8b\u7ecf\u5e38\u6539\u53d8\u72b6\u6001\u7684\u65f6\u5019\u4f1a\u975e\u5e38\u6709\u6548\u3002\u8c03\u7528\u8fd9\u4e2a\u5b9e\u4f8b\u662f\u4e00\u79cd\u6539\u53d8\u8fd9\u4e2a\u5bf9\u8c61\u72b6\u6001\u7684\u76f4\u63a5\u548c\u4f18\u96c5\u7684\u505a\u6cd5\u3002\u7528\u4e00\u4e2a\u5b9e\u4f8b\u6765\u8868\u8fbe\u6700\u597d\u4e0d\u8fc7\u4e86:Python#-*-coding:UTF-8-*-classEntity:\"\"\"\u8c03\u7528\u5b9e\u4f53\u6765\u6539\u53d8\u5b9e\u4f53\u7684\u4f4d\u7f6e\"\"\"def__init__(self,size,x,y):self.x,self.y=x,yself.size=sizedef__call__(self,x,y):\"\"\"\u6539\u53d8\u5b9e\u4f53\u7684\u4f4d\u7f6e\"\"\"self.x,self.y=x,y1234567891011121314151617#-*-coding:UTF-8-*-\u00a0classEntity:\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u8c03\u7528\u5b9e\u4f53\u6765\u6539\u53d8\u5b9e\u4f53\u7684\u4f4d\u7f6e\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0def__init__(self,size,x,y):\u00a0\u00a0\u00a0\u00a0self.x,self.y=x,y\u00a0\u00a0\u00a0\u00a0self.size=size\u00a0\u00a0def__call__(self,x,y):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u6539\u53d8\u5b9e\u4f53\u7684\u4f4d\u7f6e\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0self.x,self.y=x,y\u4e0a\u4e0b\u6587\u7ba1\u7406with\u58f0\u660e\u662f\u4ecePython2.5\u5f00\u59cb\u5f15\u8fdb\u7684\u5173\u952e\u8bcd\u3002\u4f60\u5e94\u8be5\u9047\u8fc7\u8fd9\u6837\u5b50\u7684\u4ee3\u7801:Pythonwithopen('foo.txt')asbar:#dosomethingwithbar12withopen('foo.txt')asbar:\u00a0\u00a0\u00a0\u00a0#dosomethingwithbar\u5728with\u58f0\u660e\u7684\u4ee3\u7801\u6bb5\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u4e00\u4e9b\u5bf9\u8c61\u7684\u5f00\u59cb\u64cd\u4f5c\u548c\u9000\u51fa\u64cd\u4f5c,\u8fd8\u80fd\u5bf9\u5f02\u5e38\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u9b54\u672f\u65b9\u6cd5:__enter__\u548c__exit__\u3002Python__enter__(self)1__enter__(self)\u5b9a\u4e49\u4e86\u5f53\u4f7f\u7528with\u8bed\u53e5\u7684\u65f6\u5019\uff0c\u4f1a\u8bdd\u7ba1\u7406\u5668\u5728\u5757\u88ab\u521d\u59cb\u521b\u5efa\u65f6\u8981\u4ea7\u751f\u7684\u884c\u4e3a\u3002\u8bf7\u6ce8\u610f\uff0c__enter__\u7684\u8fd4\u56de\u503c\u4e0ewith\u8bed\u53e5\u7684\u76ee\u6807\u6216\u8005as\u540e\u7684\u540d\u5b57\u7ed1\u5b9a\u3002Python__exit__(self,exception_type,exception_value,traceback)1__exit__(self,exception_type,exception_value,traceback)\u5b9a\u4e49\u4e86\u5f53\u4e00\u4e2a\u4ee3\u7801\u5757\u88ab\u6267\u884c\u6216\u8005\u7ec8\u6b62\u540e\uff0c\u4f1a\u8bdd\u7ba1\u7406\u5668\u5e94\u8be5\u505a\u4ec0\u4e48\u3002\u5b83\u53ef\u4ee5\u88ab\u7528\u6765\u5904\u7406\u5f02\u5e38\u3001\u6267\u884c\u6e05\u7406\u5de5\u4f5c\u6216\u505a\u4e00\u4e9b\u4ee3\u7801\u5757\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u7684\u65e5\u5e38\u5de5\u4f5c\u3002\u5982\u679c\u4ee3\u7801\u5757\u6267\u884c\u6210\u529f\uff0cexceptiontype\uff0cexceptionvalue\uff0c\u548ctraceback\u5c06\u4f1a\u4e3aNone\u3002\u5426\u5219\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5904\u7406\u8fd9\u4e2a\u5f02\u5e38\u6216\u8005\u662f\u76f4\u63a5\u4ea4\u7ed9\u7528\u6237\u5904\u7406\u3002\u5982\u679c\u4f60\u60f3\u5904\u7406\u8fd9\u4e2a\u5f02\u5e38\u7684\u8bdd\uff0c\u8bf7\u786e\u4fdd__exit\u5728\u6240\u6709\u8bed\u53e5\u7ed3\u675f\u4e4b\u540e\u8fd4\u56deTrue\u3002\u5982\u679c\u4f60\u60f3\u8ba9\u5f02\u5e38\u88ab\u4f1a\u8bdd\u7ba1\u7406\u5668\u5904\u7406\u7684\u8bdd\uff0c\u90a3\u4e48\u5c31\u8ba9\u5176\u4ea7\u751f\u8be5\u5f02\u5e38\u3002\u521b\u5efa\u5bf9\u8c61\u63cf\u8ff0\u5668\u63cf\u8ff0\u5668\u662f\u901a\u8fc7\u83b7\u53d6\u3001\u8bbe\u7f6e\u4ee5\u53ca\u5220\u9664\u7684\u65f6\u5019\u88ab\u8bbf\u95ee\u7684\u7c7b\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u6539\u53d8\u5176\u5b83\u7684\u5bf9\u8c61\u3002\u63cf\u8ff0\u5668\u5e76\u4e0d\u662f\u72ec\u7acb\u7684\u3002\u76f8\u53cd\uff0c\u5b83\u610f\u5473\u7740\u88ab\u4e00\u4e2a\u6240\u6709\u8005\u7c7b\u6301\u6709\u3002\u5f53\u521b\u5efa\u9762\u5411\u5bf9\u8c61\u7684\u6570\u636e\u5e93\u6216\u8005\u7c7b\uff0c\u91cc\u9762\u542b\u6709\u76f8\u4e92\u4f9d\u8d56\u7684\u5c5e\u76f8\u65f6\uff0c\u63cf\u8ff0\u5668\u5c06\u4f1a\u975e\u5e38\u6709\u7528\u3002\u4e00\u79cd\u5178\u578b\u7684\u4f7f\u7528\u65b9\u6cd5\u662f\u7528\u4e0d\u540c\u7684\u5355\u4f4d\u8868\u793a\u540c\u4e00\u4e2a\u6570\u503c\uff0c\u6216\u8005\u8868\u793a\u67d0\u4e2a\u6570\u636e\u7684\u9644\u52a0\u5c5e\u6027\u3002\u4e3a\u4e86\u6210\u4e3a\u4e00\u4e2a\u63cf\u8ff0\u5668\uff0c\u4e00\u4e2a\u7c7b\u5fc5\u987b\u81f3\u5c11\u6709__get__\uff0c__set__\uff0c__delete__\u65b9\u6cd5\u88ab\u5b9e\u73b0\uff1aPython__get__(self,instance,owner)1__get__(self,instance,owner)\u5b9a\u4e49\u4e86\u5f53\u63cf\u8ff0\u5668\u7684\u503c\u88ab\u53d6\u5f97\u7684\u65f6\u5019\u7684\u884c\u4e3a\u3002instance\u662f\u62e5\u6709\u8be5\u63cf\u8ff0\u5668\u5bf9\u8c61\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002owner\u662f\u62e5\u6709\u8005\u672c\u8eabPython__set__(self,instance,value)1__set__(self,instance,value)\u5b9a\u4e49\u4e86\u5f53\u63cf\u8ff0\u5668\u7684\u503c\u88ab\u6539\u53d8\u7684\u65f6\u5019\u7684\u884c\u4e3a\u3002instance\u662f\u62e5\u6709\u8be5\u63cf\u8ff0\u5668\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002value\u662f\u8981\u8bbe\u7f6e\u7684\u503c\u3002Python__delete__(self,instance)1__delete__(self,instance)\u5b9a\u4e49\u4e86\u5f53\u63cf\u8ff0\u5668\u7684\u503c\u88ab\u5220\u9664\u7684\u65f6\u5019\u7684\u884c\u4e3a\u3002instance\u662f\u62e5\u6709\u8be5\u63cf\u8ff0\u5668\u5bf9\u8c61\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u63cf\u8ff0\u5668\u7684\u5b9e\u4f8b\uff1a\u5355\u4f4d\u8f6c\u6362\u3002Python#-*-coding:UTF-8-*-classMeter(object):\"\"\"\u5bf9\u4e8e\u5355\u4f4d\"\u7c73\"\u7684\u63cf\u8ff0\u5668\"\"\"def__init__(self,value=0.0):self.value=float(value)def__get__(self,instance,owner):returnself.valuedef__set__(self,instance,value):self.value=float(value)classFoot(object):\"\"\"\u5bf9\u4e8e\u5355\u4f4d\"\u82f1\u5c3a\"\u7684\u63cf\u8ff0\u5668\"\"\"def__get__(self,instance,owner):returninstance.meter*3.2808def__set__(self,instance,value):instance.meter=float(value)/3.2808classDistance(object):\"\"\"\u7528\u7c73\u548c\u82f1\u5bf8\u6765\u8868\u793a\u4e24\u4e2a\u63cf\u8ff0\u5668\u4e4b\u95f4\u7684\u8ddd\u79bb\"\"\"meter=Meter(10)foot=Foot()12345678910111213141516171819202122232425262728293031323334#-*-coding:UTF-8-*-classMeter(object):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u5bf9\u4e8e\u5355\u4f4d\"\u7c73\"\u7684\u63cf\u8ff0\u5668\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0def__init__(self,value=0.0):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.value=float(value)\u00a0\u00a0\u00a0\u00a0\u00a0def__get__(self,instance,owner):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnself.value\u00a0\u00a0\u00a0\u00a0\u00a0def__set__(self,instance,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.value=float(value)\u00a0\u00a0classFoot(object):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u5bf9\u4e8e\u5355\u4f4d\"\u82f1\u5c3a\"\u7684\u63cf\u8ff0\u5668\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u00a0def__get__(self,instance,owner):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returninstance.meter*3.2808\u00a0\u00a0\u00a0\u00a0\u00a0def__set__(self,instance,value):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0instance.meter=float(value)/3.2808\u00a0\u00a0classDistance(object):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0\u7528\u7c73\u548c\u82f1\u5bf8\u6765\u8868\u793a\u4e24\u4e2a\u63cf\u8ff0\u5668\u4e4b\u95f4\u7684\u8ddd\u79bb\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0meter=Meter(10)\u00a0\u00a0\u00a0\u00a0foot=Foot()\u4f7f\u7528\u65f6\uff1aPython>>>d=Distance()>>>printd.foot>>>printd.meter32.80810.012345>>>d=Distance()>>>printd.foot>>>printd.meter32.80810.0\u590d\u5236\u6709\u65f6\u5019\uff0c\u5c24\u5176\u662f\u5f53\u4f60\u5728\u5904\u7406\u53ef\u53d8\u5bf9\u8c61\u65f6\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u590d\u5236\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u5bf9\u5176\u505a\u51fa\u4e00\u4e9b\u6539\u53d8\u800c\u4e0d\u5e0c\u671b\u5f71\u54cd\u539f\u6765\u7684\u5bf9\u8c61\u3002\u8fd9\u5c31\u662fPython\u7684copy\u6240\u53d1\u6325\u4f5c\u7528\u7684\u5730\u65b9\u3002Python__copy__(self)1__copy__(self)\u5b9a\u4e49\u4e86\u5f53\u5bf9\u4f60\u7684\u7c7b\u7684\u5b9e\u4f8b\u8c03\u7528copy.copy()\u65f6\u6240\u4ea7\u751f\u7684\u884c\u4e3a\u3002copy.copy()\u8fd4\u56de\u4e86\u4f60\u7684\u5bf9\u8c61\u7684\u4e00\u4e2a\u6d45\u62f7\u8d1d\u2014\u2014\u8fd9\u610f\u5473\u7740\uff0c\u5f53\u5b9e\u4f8b\u672c\u8eab\u662f\u4e00\u4e2a\u65b0\u5b9e\u4f8b\u65f6\uff0c\u5b83\u7684\u6240\u6709\u6570\u636e\u90fd\u88ab\u5f15\u7528\u4e86\u2014\u2014\u4f8b\u5982\uff0c\u5f53\u4e00\u4e2a\u5bf9\u8c61\u672c\u8eab\u88ab\u590d\u5236\u4e86\uff0c\u5b83\u7684\u6570\u636e\u4ecd\u7136\u662f\u88ab\u5f15\u7528\u7684\uff08\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6d45\u62f7\u8d1d\u4e2d\u6570\u636e\u7684\u66f4\u6539\u4ecd\u7136\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u5728\u539f\u59cb\u5bf9\u8c61\u7684\u4e2d\u7684\u6539\u53d8\uff09\u3002Python__deepcopy__(self,memodict={})1__deepcopy__(self,memodict={})\u5b9a\u4e49\u4e86\u5f53\u5bf9\u4f60\u7684\u7c7b\u7684\u5b9e\u4f8b\u8c03\u7528copy.deepcopy()\u65f6\u6240\u4ea7\u751f\u7684\u884c\u4e3a\u3002copy.deepcopy()\u8fd4\u56de\u4e86\u4f60\u7684\u5bf9\u8c61\u7684\u4e00\u4e2a\u6df1\u62f7\u8d1d\u2014\u2014\u5bf9\u8c61\u548c\u5176\u6570\u636e\u90fd\u88ab\u62f7\u8d1d\u4e86\u3002memodict\u662f\u5bf9\u4e4b\u524d\u88ab\u62f7\u8d1d\u7684\u5bf9\u8c61\u7684\u4e00\u4e2a\u7f13\u5b58\u2014\u2014\u8fd9\u4f18\u5316\u4e86\u62f7\u8d1d\u8fc7\u7a0b\u5e76\u4e14\u963b\u6b62\u4e86\u5bf9\u9012\u5f52\u6570\u636e\u7ed3\u6784\u62f7\u8d1d\u65f6\u7684\u65e0\u9650\u9012\u5f52\u3002\u5f53\u4f60\u60f3\u8981\u8fdb\u884c\u5bf9\u4e00\u4e2a\u5355\u72ec\u7684\u5c5e\u6027\u8fdb\u884c\u6df1\u62f7\u8d1d\u65f6\uff0c\u8c03\u7528copy.deepcopy()\uff0c\u5e76\u4ee5memodict\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002\u9644\u5f55\u7528\u4e8e\u6bd4\u8f83\u7684\u9b54\u672f\u65b9\u6cd5Magicmethodexplain__cmp__(self,other)\u662f\u6bd4\u8f83\u65b9\u6cd5\u91cc\u9762\u6700\u57fa\u672c\u7684\u7684\u9b54\u6cd5\u65b9\u6cd5__eq__(self,other)\u5b9a\u4e49\u76f8\u7b49\u7b26\u53f7\u7684\u884c\u4e3a\uff0c==__ne__(self,other)\u5b9a\u4e49\u4e0d\u7b49\u7b26\u53f7\u7684\u884c\u4e3a\uff0c\uff01=__lt__(self,other)\u5b9a\u4e49\u5c0f\u4e8e\u7b26\u53f7\u7684\u884c\u4e3a\uff0c<__gt__(self,other)\u5b9a\u4e49\u5927\u4e8e\u7b26\u53f7\u7684\u884c\u4e3a\uff0c>__le__(self,other)\u5b9a\u4e49\u5c0f\u4e8e\u7b49\u4e8e\u7b26\u53f7\u7684\u884c\u4e3a\uff0c<=__ge__(self,other)\u5b9a\u4e49\u5927\u4e8e\u7b49\u4e8e\u7b26\u53f7\u7684\u884c\u4e3a\uff0c>=\u6570\u503c\u8ba1\u7b97\u7684\u9b54\u672f\u65b9\u6cd5\u5355\u76ee\u8fd0\u7b97\u7b26\u548c\u51fd\u6570Magicmethodexplain__pos__(self)\u5b9e\u73b0\u4e00\u4e2a\u53d6\u6b63\u6570\u7684\u64cd\u4f5c__neg__(self)\u5b9e\u73b0\u4e00\u4e2a\u53d6\u8d1f\u6570\u7684\u64cd\u4f5c__abs__(self)\u5b9e\u73b0\u4e00\u4e2a\u5185\u5efa\u7684abs()\u51fd\u6570\u7684\u884c\u4e3a__invert__(self)\u5b9e\u73b0\u4e00\u4e2a\u53d6\u53cd\u64cd\u4f5c\u7b26\uff08\uff5e\u64cd\u4f5c\u7b26\uff09\u7684\u884c\u4e3a__round__(self,n)\u5b9e\u73b0\u4e00\u4e2a\u5185\u5efa\u7684round\uff08\uff09\u51fd\u6570\u7684\u884c\u4e3a__floor__(self)\u5b9e\u73b0math.floor()\u7684\u51fd\u6570\u884c\u4e3a__ceil__(self)\u5b9e\u73b0math.ceil()\u7684\u51fd\u6570\u884c\u4e3a__trunc__(self)\u5b9e\u73b0math.trunc()\u7684\u51fd\u6570\u884c\u4e3a\u53cc\u76ee\u8fd0\u7b97\u7b26\u6216\u51fd\u6570Magicmethodexplain__add__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u52a0\u6cd5__sub__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u51cf\u6cd5__mul__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u4e58\u6cd5__floordiv__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u201c//\u201d\u64cd\u4f5c\u7b26\u4ea7\u751f\u7684\u6574\u9664\u64cd\u4f5c\uff08\uff09__div__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u201c/\u201d\u64cd\u4f5c\u7b26\u4ee3\u8868\u7684\u9664\u6cd5\u64cd\u4f5c__truediv__(self,other)\u5b9e\u73b0\u771f\u5b9e\u9664\u6cd5__mod__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u201c%\u201d\u64cd\u4f5c\u7b26\u4ee3\u8868\u7684\u53d6\u6a21\u64cd\u4f5c__divmod__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u5185\u5efa\u51fd\u6570divmod\uff08\uff09__pow__\u5b9e\u73b0\u4e00\u4e2a\u6307\u6570\u64cd\u4f5c(\u201c**\u201d\u64cd\u4f5c\u7b26\uff09\u7684\u884c\u4e3a__lshift__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u4f4d\u5de6\u79fb\u64cd\u4f5c\uff08<<\uff09\u7684\u529f\u80fd__rshift__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u4f4d\u53f3\u79fb\u64cd\u4f5c\uff08>>\uff09\u7684\u529f\u80fd__and__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u6309\u4f4d\u8fdb\u884c\u4e0e\u64cd\u4f5c\uff08&\uff09\u7684\u884c\u4e3a__or__(self,other)\u5b9e\u73b0\u4e00\u4e2a\u6309\u4f4d\u8fdb\u884c\u6216\u64cd\u4f5c\u7684\u884c\u4e3a__xor__(self,other)__xor__(self,other)\u589e\u91cf\u8fd0\u7b97Magicmethodexplain__iadd__(self,other)\u52a0\u6cd5\u8d4b\u503c__isub__(self,other)\u51cf\u6cd5\u8d4b\u503c__imul__(self,other)\u4e58\u6cd5\u8d4b\u503c__ifloordiv__(self,other)\u6574\u9664\u8d4b\u503c\uff0c\u5730\u677f\u9664\uff0c\u76f8\u5f53\u4e8e//=\u8fd0\u7b97\u7b26__idiv__(self,other)\u9664\u6cd5\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e/=\u8fd0\u7b97\u7b26__itruediv__(self,other)\u771f\u9664\u8d4b\u503c__imod_(self,other)\u6a21\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e%=\u8fd0\u7b97\u7b26__ipow__\u4e58\u65b9\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e**=\u8fd0\u7b97\u7b26__ilshift__(self,other)\u5de6\u79fb\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e<<=\u8fd0\u7b97\u7b26__irshift__(self,other)\u5de6\u79fb\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e>>=\u8fd0\u7b97\u7b26__iand__(self,other)\u4e0e\u8d4b\u503c\uff0c\u76f8\u5f53\u4e8e&=\u8fd0\u7b97\u7b26__ior__(self,other)\u6216\u8d4b\u503c__ixor__(self,other)\u5f02\u6216\u8fd0\u7b97\u7b26\uff0c\u76f8\u5f53\u4e8e^=\u8fd0\u7b97\u7b26\u7c7b\u578b\u8f6c\u6362Magicmethodexplain__int__(self)\u8f6c\u6362\u6210\u6574\u578b__long__(self)\u8f6c\u6362\u6210\u957f\u6574\u578b__float__(self)\u8f6c\u6362\u6210\u6d6e\u70b9\u578b__complex__(self)\u8f6c\u6362\u6210\u590d\u6570\u578b__oct__(self)\u8f6c\u6362\u6210\u516b\u8fdb\u5236__hex__(self)\u8f6c\u6362\u6210\u5341\u516d\u8fdb\u5236__index__(self)\u5982\u679c\u4f60\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53ef\u80fd\u88ab\u7528\u6765\u505a\u5207\u7247\u64cd\u4f5c\u7684\u6570\u503c\u578b\uff0c\u4f60\u5c31\u5e94\u8be5\u5b9a\u4e49index__trunc__(self)\u5f53math.trunc(self)\u4f7f\u7528\u65f6\u88ab\u8c03\u7528__trunc__\u8fd4\u56de\u81ea\u8eab\u7c7b\u578b\u7684\u6574\u578b\u622a\u53d6__coerce__(self,other)\u6267\u884c\u6df7\u5408\u7c7b\u578b\u7684\u8fd0\u7b971\u8d5e6\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u4e00\u884c Python \u4ee3\u7801\u641e\u5b9a\u4e00\u68f5\u6811"], "art_url": ["http://python.jobbole.com/18159/"], "art_create_time": ["2012/04/24"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "art_content": ["\u82f1\u6587\u539f\u6587\uff1aGithub\uff0c\u7ffb\u8bd1\uff1aoschina\u4f7f\u7528Python\u5185\u5efa\u7684\u00a0defaultdict\u00a0\u65b9\u6cd5\u53ef\u4ee5\u8f7b\u677e\u5b9a\u4e49\u4e00\u4e2a\u6811\u7684\u6570\u636e\u7ed3\u6784\u3002\u7b80\u5355\u7684\u8bf4\u6811\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u5178\u6570\u636e\u7ed3\u6784Pythondeftree():returndefaultdict(tree)1deftree():returndefaultdict(tree)\u8fd9\u5c31\u662f\u5168\u90e8\uff0c\u5c31\u4e00\u884c\u4ee3\u7801\u3002\u5982\u679c\u4f60\u7ee7\u7eed\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u9700\u8981\u5148\u5f15\u5165Pythonfromcollectionsimportdefaultdict1fromcollectionsimportdefaultdict\u5b9e\u4f8bJSON-esque\u73b0\u5728\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u00a0JSON-esque\u5d4c\u5957\u5b57\u5178\u65e0\u9700\u663e\u5f0f\u7684\u521b\u5efa\u5b50\u5b57\u5178\uff1aPythonusers=tree()users['harold']['username']='hrldcpr'users['handler']['username']='matthandlersux'123users=tree()users['harold']['username']='hrldcpr'users['handler']['username']='matthandlersux'\u7136\u540e\u53ef\u901a\u8fc7\u00a0<code>print(json.dumps(users))</code>\u00a0\u6765\u6253\u5370JSON\u6570\u636e\uff0c\u7ed3\u679c\u5982\u4e0b\uff1aPython{\"harold\":{\"username\":\"hrldcpr\"},\"handler\":{\"username\":\"matthandlersux\"}}1{\"harold\":{\"username\":\"hrldcpr\"},\"handler\":{\"username\":\"matthandlersux\"}}\u65e0\u9700\u8d4b\u503c\u6211\u4eec\u4e0d\u9700\u8981\u901a\u8fc7\u8d4b\u503c\u5c31\u53ef\u4ee5\u521b\u5efa\u7ed3\u6784\uff1aPythontaxonomy=tree()taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Felidae']['Felis']['cat']taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Felidae']['Panthera']['lion']taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Canidae']['Canis']['dog']taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Canidae']['Canis']['coyote']taxonomy['Plantae']['Solanales']['Solanaceae']['Solanum']['tomato']taxonomy['Plantae']['Solanales']['Solanaceae']['Solanum']['potato']taxonomy['Plantae']['Solanales']['Convolvulaceae']['Ipomoea']['sweetpotato']12345678taxonomy=tree()taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Felidae']['Felis']['cat']taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Felidae']['Panthera']['lion']taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Canidae']['Canis']['dog']taxonomy['Animalia']['Chordata']['Mammalia']['Carnivora']['Canidae']['Canis']['coyote']taxonomy['Plantae']['Solanales']['Solanaceae']['Solanum']['tomato']taxonomy['Plantae']['Solanales']['Solanaceae']['Solanum']['potato']taxonomy['Plantae']['Solanales']['Convolvulaceae']['Ipomoea']['sweetpotato']\u8981\u6253\u5370\u6709\u597d\u7684\u4fe1\u606f\uff0c\u9700\u8981\u8f6c\u6210\u6807\u51c6\u7684\u5b57\u5178\u5bf9\u8c61\uff1aPythondefdicts(t):return{k:dicts(t[k])forkint}1defdicts(t):return{k:dicts(t[k])forkint}\u73b0\u5728\u53ef\u901a\u8fc7\u00a0pprint(dicts(taxonomy))\u8fdb\u884c\u6253\u5370\u4e86:Python{'Animalia':{'Chordata':{'Mammalia':{'Carnivora':{'Canidae':{'Canis':{'coyote':{},'dog':{}}},'Felidae':{'Felis':{'cat':{}},'Panthera':{'lion':{}}}}}}},'Plantae':{'Solanales':{'Convolvulaceae':{'Ipomoea':{'sweetpotato':{}}},'Solanaceae':{'Solanum':{'potato':{},'tomato':{}}}}}}1234567{'Animalia':{'Chordata':{'Mammalia':{'Carnivora':{'Canidae':{'Canis':{'coyote':{},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'dog':{}}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Felidae':{'Felis':{'cat':{}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Panthera':{'lion':{}}}}}}},'Plantae':{'Solanales':{'Convolvulaceae':{'Ipomoea':{'sweetpotato':{}}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Solanaceae':{'Solanum':{'potato':{},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'tomato':{}}}}}}\u5b50\u7ed3\u6784\u4e5f\u88ab\u5f53\u4f5c\u662f\u5b57\u5178\u5bf9\u8c61\u4e86\uff0c\u800c\u53f6\u5b50\u8282\u70b9\u662f\u4e00\u4e2a\u7a7a\u7684\u5b57\u5178\u5bf9\u8c61\u8fed\u4ee3\u53ef\u4ee5\u4f7f\u7528\u6709\u8da3\u7684\u65b9\u6cd5\u5bf9\u6811\u8fdb\u884c\u8fed\u4ee3\u3002\u4f8b\u5982\u6211\u4eec\u89e3\u6790\u4e00\u4e2a\u52a8\u7269\u7684\u5217\u8868\u5e76\u6dfb\u52a0\u5230\u4e4b\u524d\u5b9a\u4e49\u7684taxonomy\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\uff1aPythonadd(taxonomy,'Animalia,Chordata,Mammalia,Cetacea,Balaenopteridae,Balaenoptera,bluewhale'.split(','))12add(taxonomy,\u00a0\u00a0\u00a0\u00a0'Animalia,Chordata,Mammalia,Cetacea,Balaenopteridae,Balaenoptera,bluewhale'.split(','))\u7b80\u5316\u5b9e\u73b0\uff1aPythondefadd(t,keys):forkeyinkeys:t=t[key]123defadd(t,keys):\u00a0\u00a0forkeyinkeys:\u00a0\u00a0\u00a0\u00a0t=t[key]\u6211\u4eec\u4ecd\u7136\u65e0\u9700\u8d4b\u503c\uff1aPython{'Animalia':{'Chordata':{'Mammalia':{'Carnivora':{'Canidae':{'Canis':{'coyote':{},'dog':{}}},'Felidae':{'Felis':{'cat':{}},'Panthera':{'lion':{}}}},'Cetacea':{'Balaenopteridae':{'Balaenoptera':{'bluewhale':{}}}}}}},'Plantae':{'Solanales':{'Convolvulaceae':{'Ipomoea':{'sweetpotato':{}}},'Solanaceae':{'Solanum':{'potato':{},'tomato':{}}}}}}12345678{'Animalia':{'Chordata':{'Mammalia':{'Carnivora':{'Canidae':{'Canis':{'coyote':{},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'dog':{}}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Felidae':{'Felis':{'cat':{}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Panthera':{'lion':{}}}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Cetacea':{'Balaenopteridae':{'Balaenoptera':{'bluewhale':{}}}}}}},'Plantae':{'Solanales':{'Convolvulaceae':{'Ipomoea':{'sweetpotato':{}}},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'Solanaceae':{'Solanum':{'potato':{},\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'tomato':{}}}}}}\u7ed3\u8bba\u4e0a\u9762\u63d0\u53ca\u7684\u8fd9\u4e9b\u53ef\u80fd\u7528\u5904\u4e0d\u5927\uff0c\u53ea\u662f\u505a\u4e86\u4e00\u4e9b\u6709\u610f\u601d\u7684\u4ee3\u7801\u3002\u5982\u679c\u4f60\u559c\u6b22Python\u7684\u8bdd\uff0c\u628a\u8fd9\u4e2a\u5f53\u6210\u662f\u4e50\u8da3\u6765\u7406\u89e3\u30021\u8d5e1\u6536\u85cf1\u8bc4\u8bba"]},
{"art_title": ["\u975e\u5178\u578b\u6027\u5410\u69fd\uff1a\u4eb2\u7231\u7684Python\uff0c\u4f60\u4e3a\u4f55\u5982\u6b64\u4e11\u964b"], "art_url": ["http://python.jobbole.com/18629/"], "art_create_time": ["2012/05/07"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/05/py-vs-ruby.jpg"], "art_content": ["\u4eb2\u7231\u7684Python\uff0c\u6709\u4e9b\u4e8b\u60c5\u5df2\u7ecf\u56f0\u6270\u6211\u4e00\u6bb5\u65f6\u95f4\u4e86\uff0c\u6069\uff0c\u662f\u8fd9\u6837\u7684\uff0c\u5176\u5b9e\u4f60\u2026\u6709\u70b9\u4e11\u3002\u77a7\uff0c\u4f60\u7684\u5185\u5728\u662f\u5982\u6b64\u7f8e\u4e3d\uff1aPython\u662f\u4e00\u79cd\u4f18\u7f8e\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u800c\u4e14Python\u793e\u533a\u4e5f\u662f\u5f00\u653e\u548c\u53d7\u6b22\u8fce\u7684\u3002\u4f46Python\u7684\u4e00\u4e9b\u76f8\u5173\u8d44\u6e90\u5df2\u7ecf\u4e11\u5230\u4e00\u5b9a\u7a0b\u5ea6\u4e86\uff0c\u8db3\u4ee5\u5f71\u54cd\u5176\u53ef\u7528\u6027\u548c\u63a5\u53d7\u7a0b\u5ea6\u4e86\u3002\u8fd9\u5bf9\u6574\u4e2aPython\u793e\u533a\u90fd\u662f\u6709\u5bb3\u7684\u3002\u4e00\u4e9b\u6587\u6863\u548c\u6559\u7a0b\u5e38\u5e38\u96be\u4ee5\u5bfc\u822a\uff0c\u7528Python\u6784\u5efa\u8d77\u6765\u7684\u4ea7\u54c1\u538b\u6839\u513f\u90fd\u6ca1\u6709\u601d\u8003\u8fc7\u5982\u4f55\u505a\u8bbe\u8ba1\uff08\u8fd9\u91cc\u4e0d\u662f\u6307\u7a0b\u5e8f\u7684\u8bbe\u8ba1\uff0c\u800c\u662f\u6307UI\uff09\uff0c\u7528Python\u5199\u7684\u535a\u5ba2\u7a0b\u5e8f\u53ea\u4f1a\u5e2e\u52a9\u4ea7\u51fa\u66f4\u591a\u4e11\u964b\u7684\u6709\u5173Python\u7684\u535a\u5ba2\u3002Pythonist\uff08\u5bf9Python\u7a0b\u5e8f\u5458\u7684\u5c0a\u79f0\uff09\u6839\u672c\u4e0d\u5173\u5fc3\u4ea7\u54c1\u7684\u6f14\u793a\u6548\u679c\u3002\u8ba9\u6211\u4eec\u6765\u5bf9\u4e00\u4e9bPython\u548cRuby\u7684\u7ad9\u70b9\u5c31\u53ef\u7528\u6027\u548cUI\u8bbe\u8ba1\u7684\u89d2\u5ea6\u505a\u4e00\u4e0b\u6bd4\u8f83\u3002\u540cPython\u76f8\u6bd4\uff0cRuby\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u53c2\u7167\u7269\uff0c\u56e0\u4e3a\u5b83\u4eec\u6709\u7740\u76f8\u4f3c\u7684\u5e74\u7eaa\uff0c\u800c\u4e14\u5728\u7f16\u7a0b\u8bed\u8a00\u7684\u751f\u6001\u7cfb\u7edf\u4e2d\u90fd\u5360\u636e\u76f8\u4f3c\u7684\u5730\u4f4d\u3002\u4ee5\u4e0a\u5206\u522b\u662fPython\u548cRuby\u7684\u5728\u7ebf\u4ea4\u4e92\u5f0f\u5b66\u4e60\u7f51\u7ad9\u7684\u5bf9\u6bd4\u3002learnpython.org\u5176\u5b9e\u4e00\u70b9\u4e5f\u4e0d\u4e11\uff0c\u53ea\u662fTryRuby\u771f\u7684\u662f\u66f4\u52a0\u5b8c\u7f8e\u3002\u5f88\u660e\u663e\uff0cTryRuby\u662f\u7531\u4e13\u4e1a\u7684\u8bbe\u8ba1\u5e08\u6253\u9020\u7684\uff0c\u800clearnpython.org\u7684\u8bbe\u8ba1\u53ea\u662f\u7531\u67d0\u4e2a\u7a0b\u5e8f\u5458\u62fc\u51d1\u800c\u6210\uff0c\u6700\u540e\u518d\u52a0\u4e0a\u4e00\u4e9b\u5e7f\u544a\u5c31\u7b97\u5927\u529f\u544a\u6210\u4e86\u3002\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u4f60\u66f4\u613f\u610f\u7528\u54ea\u4e2a\u6559\u7a0b\u5462\uff1f\u4ee5\u4e0a\u5206\u522b\u662fDjango\u548cRubyonRails\u7684\u4e3b\u9875\uff0c\u5b83\u4eec\u90fd\u662f\u6d41\u884c\u7684Web\u6846\u67b6\u3002Django\u7684\u4e3b\u9875\u89c4\u5212\u7684\u76f8\u5f53\u7a00\u70c2\uff0c\u6574\u4e2a\u9875\u9762\u5c31\u662f\u4e00\u5806\u6742\u4e71\u7684\u94fe\u63a5\uff0c\u800c\u4e14\u5e76\u6ca1\u6709\u4efb\u4f55\u660e\u786e\u7684\u91cd\u70b9\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0cRubyonRails\u7684\u4e3b\u9875\u5c31\u505a\u7684\u5f88\u597d\uff0c\u80fd\u591f\u5f88\u597d\u7684\u5f15\u5bfc\u4eba\u4eec\u63a5\u89e6Rails\u6846\u67b6\uff0c\u5e76\u5c06\u4eba\u4eec\u5bfc\u5411\u7ad9\u70b9\u7684\u4e0d\u540c\u533a\u57df\u3002\u4ee5\u4e0a\u662fDjango\u7684\u5171\u540c\u521b\u59cb\u4eba\u4e4b\u4e00\u7684AdrianHolovaty\u540cRubyonRails\u7684\u521b\u59cb\u4ebaDavidHeinemeierHansson\u7684\u4e3b\u9875\u5bf9\u6bd4\u3002\u4e24\u4e2a\u4e3b\u9875\u90fd\u89c4\u5212\u7684\u5f88\u597d\uff0c\u4f46\u4e00\u773c\u770b\u53bb\u5f88\u660e\u663e\u5c31\u4f1a\u53d1\u73b0\u8c01\u7684\u8bbe\u8ba1\u66f4\u52a0\u4e13\u4e1a\u3002\u4e91\u6258\u7ba1\u670d\u52a1\uff1aGoogleAppEngine\u5bf9\u6bd4Heroku\u3002\u518d\u4e00\u6b21\uff0cRuby\u8fd9\u8fb9\u663e\u5f97\u66f4\u52a0\u6027\u611f\u3002Python\u548cRuby\u7684\u535a\u5ba2\u7a0b\u5e8f\u5bf9\u6bd4\u3002Python\u7684\u535a\u5ba2\u8bbe\u8ba1\u663e\u5f97\u5f88\u5e73\u6de1\uff0c\u4e0d\u5438\u5f15\u4eba\uff0c\u800cRuby\u535a\u5ba2\u7684\u5916\u89c2\u8bbe\u8ba1\u5219\u5f88\u7ed9\u529b\u3002\u8c01\u4e0d\u559c\u6b22\u4e00\u4e2a\u53ef\u7231\u7684\u5c0f\u7ae0\u9c7c\u5462\uff1f\uff08OCTOPRESS\u7684\u6807\u5fd7\uff09\u4ee5\u4e0a\u662f\u5728Google\u4e2d\u641c\u7d22\u201cpythonconsulting\u201d\u548c\u201crubyconsulting\u201d\u7684\u7ed3\u679c\u5bf9\u6bd4\uff0c\u6211\u4eec\u53d6\u5404\u81ea\u7ed3\u679c\u7684\u524d\u51e0\u540d\u6765\u8003\u5bdf\u3002Python\u5f97\u5230\u7684\u7ed3\u679c\u770b\u8d77\u6765\u5df2\u7ecfN\u5e74\u6ca1\u6709\u66f4\u65b0\u8fc7\u4e86\u3002\u00a0Ruby\u770b\u8d77\u6765\u53c8\u8d62\u4e86\uff0c\u4e5f\u8bb8\u662f\u56e0\u4e3aRuby\u66f4\u805a\u7126\u4e8eWeb\u7f16\u7a0b\uff1f\u8fd9\u5f88\u53ef\u80fd\u662f\u56e0\u4e3aWebapp\u6bd4\u4e00\u822c\u6027\u7684\u4e3b\u9898\u6bd4\u5982\u8bf4\u79d1\u5b66\u6709\u7740\u66f4\u597d\u770b\u7684\u7f51\u9875\u5916\u89c2\u3002\u8981\u6d88\u9664\u8fd9\u4e9b\u4e0d\u516c\u5e73\uff0c\u90a3\u4e48\u4e0b\u9762\u7684\u56fe\u53d6\u81eaGoogle\u641c\u7d22\u201cdjangoconsulting\u201d\u4ee5\u53ca\u201crubyonrailsconsulting\u201d\u7684\u7ed3\u679c\u3002\u597d\u5427\uff0c\u65e0\u6240\u8c13\u4e86\uff0cPython\u4ecd\u7136\u662f\u4e2a\u4e11\u5c0f\u9e2d\u3002\u8fd9\u4e2a\u6bd4\u8f83\u5e76\u4e0d\u79d1\u5b66\u2014\u2014\u4f60\u53ef\u4ee5\u8bd5\u7740\u9009\u62e9\u4e00\u4e9b\u4e0d\u540c\u96c6\u5408\u7684\u7ad9\u70b9\u4ee5\u6b64\u83b7\u5f97\u5b8c\u5168\u76f8\u53cd\u7684\u7ed3\u679c\u3002\u4f46\u6211\u8ba4\u4e3a\u6211\u8d34\u51fa\u6765\u7684\u622a\u56fe\u8fd8\u662f\u5f88\u6709\u4ee3\u8868\u6027\u7684\u3002\u6211\u4e5f\u76f8\u4fe1\uff0c\u5927\u591a\u6570\u4eba\u53ea\u8981\u82b1\u4e00\u70b9\u70b9\u65f6\u95f4\u540c\u65f6\u5728Python\u548cRuby\u793e\u533a\u4e2d\u5f85\u8fc7\u7684\u8bdd\uff0c\u90fd\u4f1a\u540c\u610f\u8fd9\u4e2a\u89c2\u70b9\u2014\u2014\u7528Python\u505a\u7684\u7f51\u7ad9\u6bd4Ruby\u8981\u4e11\u3002\u00a0\u600e\u4e48\u4f1a\u8fd9\u6837\u5462\uff1f\u8981\u4e48\u662f\u56e0\u4e3aPythonist\u4e2d\u7684\u8bbe\u8ba1\u5e08\u4e0d\u50cfRubyist\u4e2d\u90a3\u4e48\u5e38\u89c1\uff0cPythonist\u901a\u5e38\u7f3a\u4e4f\u4e00\u4e9b\u8bbe\u8ba1\u624d\u80fd\u3002\u53c8\u6216\u8005\u662f\u56e0\u4e3aPythonist\u6839\u672c\u4e0d\u5728\u4e4e\u8bbe\u8ba1\uff0c\u4ed6\u4eec\u4e0d\u60f3\u4e3a\u6b64\u82b1\u8d39\u65f6\u95f4\u53bb\u505a\u3002\u6211\u81ea\u5df1\u4e5f\u4e0d\u786e\u5b9a\u5230\u5e95\u662f\u56e0\u4e3a\u4ec0\u4e48\u3002\u00a0\u8fd9\u5f88\u91cd\u8981\u5417\uff1f\u662f\u7684\uff01\u8fd9\u4e1c\u897f\u975e\u5e38\u91cd\u8981\u3002\u8fd9\u5e76\u4e0d\u662f\u8bf4\u7528Python\u505a\u7684\u7f51\u7ad9\u5c31\u90fd\u5f88\u4e11\uff08\u5c3d\u7ba1\u4e8b\u5b9e\u4e0a\u5b83\u4eec\u786e\u5b9e\u5f88\u4e11\uff09\u3002\u5173\u952e\u5728\u4e8e\u8fd9\u79cd\u4e11\u964b\u4f7f\u5f97\u7f51\u7ad9\u96be\u4ee5\u5bfc\u822a\uff0c\u96be\u4ee5\u4f7f\u7528\u3002\u6ca1\u6709\u4eba\u4f1a\u89c9\u5f97\u4e11\u964b\u597d\uff0c\u5f53\u6709\u66f4\u597d\u7684\u9009\u62e9\u65f6\uff0c\u6ca1\u6709\u4eba\u4f1a\u613f\u610f\u4f7f\u7528\u4e00\u4e2a\u4e11\u964b\u7684\u4ea7\u54c1\u3002\u6ca1\u4eba\u613f\u610f\u96c7\u4f63\u4e00\u4e2a\u53ea\u80fd\u6784\u5efa\u4e11\u964bwebapp\u7684\u7a0b\u5e8f\u5458\u3002\u4e11\u964b\uff0c\u6f66\u8349\uff0c\u8fd9\u90fd\u662f\u4e0d\u4e13\u4e1a\u7684\u8868\u73b0\u3002\u8fd9\u4e00\u5207\u90fd\u4f1a\u5bf9Python\u793e\u533a\u7684\u7e41\u8363\u9020\u6210\u4f24\u5bb3\u3002\u00a0\u6211\u4eec\u8be5\u5982\u4f55\u6539\u8fdb\uff1f\u5982\u679c\u4f60\u662f\u4e00\u540dPython\u7a0b\u5e8f\u5458\uff08\u6216\u8005\u4efb\u4f55\u4e00\u79cd\u8bed\u8a00\u7684\u4f7f\u7528\u8005\uff0c\u53cd\u6b63\u5c31\u662f\u5bf9\u8bbe\u8ba1\u4e0d\u592a\u611f\u5192\uff09\uff0c\u591a\u82b1\u4e9b\u65f6\u95f4\u5b66\u4e60\u4e00\u4e9b\u57fa\u672c\u7684\u8bbe\u8ba1\u539f\u5219\u5427\u3002\u8bd5\u8bd5\u8fd9\u51e0\u672c\u4e66\u5427\uff1a\u300aDesignforHackers\u300b\u3001\u300aBootstrappingDesign\u300b\u6216\u8005\u300aStepbyStepUIDesign\u300b\u3002\u3010\u6ce8\uff1a\u4e5f\u53ef\u4ee5\u770b\u770b\u8fd9\u7bc7\u8bbf\u8c08attractingdesignerstoyourproject\u00a0(\u9700\u68af\u5b50)\u3011\u7136\u540e\u8bd5\u7740\u548c\u8bbe\u8ba1\u5e08\u4ea4\u670b\u53cb\uff0c\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u6c42\u52a9\u4e8e\u4ed6\u4eec\u3002\u00a0\u82f1\u6587\u539f\u6587\uff1aJessJohnson\u00a0\u00a0\u00a0\u7f16\u8bd1\uff1a\u4f2f\u4e50\u5728\u7ebf\u2014\u00a0\u9648\u8238\u3010\u5982\u9700\u8f6c\u8f7d\uff0c\u8bf7\u6807\u6ce8\u5e76\u4fdd\u7559\u539f\u6587\u94fe\u63a5\u3001\u8bd1\u6587\u94fe\u63a5\u548c\u8bd1\u8005\u7b49\u4fe1\u606f\uff0c\u8c22\u8c22\u5408\u4f5c\uff01\u30111\u8d5e\u6536\u85cf11\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1abigship\u7b80\u4ecb\u8fd8\u6ca1\u6765\u5f97\u53ca\u5199:\uff09\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b79"]},
{"art_title": ["Python\u4e4b\u7236\u4eceGoogle\u79bb\u804c\uff0c\u52a0\u5165Dropbox"], "art_url": ["http://python.jobbole.com/31146/"], "art_create_time": ["2012/12/08"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/12/ungood-guido-van-rossum-python.jpg"], "art_content": ["Python\u4e4b\u7236\uff0c\u9996\u4f4d\u201c\u4ec1\u6148\u72ec\u88c1\u8005\uff08BenevolentDictatorForLife\uff09\u201d\u8363\u8a89\u83b7\u5f97\u8005\u00a0GuidovanRossum\uff0c\u4eceGoogle\u8df3\u69fd\u5230Dropbox\u3002VanRossum\u4e8e2005\u5e74\u52a0\u5165Google\u3002\u4ed6\u52a0\u76dfDropbox\uff0c\u5e94\u5bf9Dropbox\u4f1a\u6709\u5de8\u5927\u5e2e\u52a9\uff0c\u56e0\u4e3aDropbox\u8f6f\u4ef6\u5c31\u662fPython\u7f16\u5199\u7684\u3002Dropbox\u8fd9\u4e2a\u4e91\u5b58\u50a8\u521b\u4e1a\u516c\u53f8\u6700\u8fd1\u8fce\u6765\u4e86\u7b2c1\u4ebf\u4f4d\u7528\u6237\uff0c\u5e73\u5747\u6bcf\u5929\u4fdd\u5b58\u8d85\u8fc710\u4ebf\u4e2a\u6587\u4ef6\u3002\u53e6\u5916\uff0cVanRossum\u53d1\u63a8\u8bf4\u6628\u65e5\uff087\u65e5\uff09\u662f\u4ed6\u5728Google\u7684\u6700\u540e\u4e00\u5929\uff0c2013\u5e741\u6708\u5c06\u5728Dropbox\u5f00\u59cb\u5de5\u4f5c\u3002\u57281991\u5e74\u521b\u9020Python\u540e\uff0cVanRossum\u662f\u00a0BDFL\uff08BenevolentDictatorForLife\uff09\u00a0\u8363\u8a89\u9996\u4f4d\u83b7\u5f97\u8005\uff0c\u8be5\u8363\u8a89\u540e\u6765\u6388\u4e88\u4e86\u5176\u4ed6\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u9886\u57df\u7684\u4f20\u5947\u4eba\u7269\uff0c\u6bd4\u5982Linux\u4e4b\u7236LinusTorvalds\uff0cROR\u6846\u67b6\u7684\u5f00\u53d1\u4ebaDavidHeinemeierHansson\u3002\uff08\u4f2f\u4e50\u5728\u7ebf\u6ce8\uff1a\u7ef4\u57fa\u767e\u79d1\u00a0BDFL\u00a0\u8bcd\u6761\u4e2d\u6ca1\u6709DHH\uff0c\u4f46TechCrunch\u7684\u5374\u8bf4\u662f\uff1f\uff1f\uff1f\uff09\u00a0Dropbox\u5b98\u7f51\u6628\u65e5\u5df2\u53d1\u4e00\u6587\uff0c\u6b22\u8fceGuidovanRossum\u7684\u52a0\u76df\u3002\u00a0\u4f2f\u4e50\u5728\u7ebf\u8865\u5145\uff1a\u201c\u4ec1\u6148\u72ec\u88c1\u8005\uff08BenevolentDictatorForLife\uff09\u201d\u8363\u8a89\u83b7\u5f97\u8005\u540d\u5355\uff1a\uff08Wikipedia\u7248\uff09\u25cfGuidovanRossum\uff0cPython\u4e4b\u7236\u25cfLinusTorvalds\uff0cLinux\u4e4b\u7236\u25cfYukihiro\u201cMatz\u201dMatsumoto\uff0cRuby\u4e4b\u7236\u25cfMarkShuttleworth\u00a0\uff0c\u65e9\u671fDebian\u5f00\u53d1\u8005\u4e4b\u4e00\uff0cUbuntu\u5e55\u540e\u516c\u53f8Canonical\u7684\u521b\u59cb\u4eba\u3002\u4ed6\u81ea\u79f0\u662f\u201c\u81ea\u5c01\u7684\u4ec1\u6148\u72ec\u88c1\u8005Self-AppointedBenevolentDictatorforLife\uff08SABDFL\uff09\u201d\uff0cUbuntu\u793e\u533a\u7ecf\u5e38\u7528SABDFL\u4ee3\u6307\u4ed6\u3002\u25cfAlexandreJulliard\uff0cWine\u00a0\u7684\u7ef4\u62a4\u8005\u25cfRasmusLerdorf\uff0cPHP\u4e4b\u7236\u25cfLarryWall\uff0cPerl\u4e4b\u7236\u25cfPatrickVolkerding\uff0cLinux\u53d1\u884c\u7248Slackware\u00a0\u7684\u521b\u9020\u8005\u3002\u25cfDanielRobbins\uff0cLinux\u53d1\u884c\u7248\u00a0Gentoo\u00a0\u548c\u00a0Funtoo\u00a0\u7684\u521b\u9020\u8005\u3002\u4ed6\u73b0\u5728\u8fd8\u662f\u00a0Funtoo\u00a0Linux\u7684\u9996\u5e2d\u67b6\u6784\u5e08\u3002\u00a0\u00a0\u82f1\u6587\uff1aTC&Dropbox\u00a0&wikipedia\uff0c\u7f16\u8bd1\uff1a\u4f2f\u4e50\u5728\u7ebf\u2014\u2014\u9ec4\u5229\u6c11\u8bd1\u6587\u94fe\u63a5\uff1ahttp://blog.jobbole.com/31146/\u3010\u5982\u9700\u8f6c\u8f7d\uff0c\u8bf7\u5728\u6b63\u6587\u4e2d\u6807\u6ce8\u5e76\u4fdd\u7559\u539f\u6587\u94fe\u63a5\u3001\u8bd1\u6587\u94fe\u63a5\u548c\u8bd1\u8005\u7b49\u4fe1\u606f\uff0c\u8c22\u8c22\u5408\u4f5c\uff01\u30111\u8d5e\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u9ec4\u5229\u6c11\u4f2f\u4e50\u5728\u7ebf\u8054\u5408\u53d1\u8d77\u4eba\uff0c\u5173\u6ce8IT\u548c\u4e92\u8054\u7f51\u3002\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b799\u00b7"]},
{"art_title": ["\u597d\u5947\u53f7\u706b\u661f\u8f66\u7684\u4e00\u4e9b\u8ba1\u7b97\u673a\u8f6f\u786c\u4ef6\u4fe1\u606f"], "art_url": ["http://python.jobbole.com/25037/"], "art_create_time": ["2012/08/08"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/08/curiosity-rover-in-desert.jpg"], "art_content": ["\u81ea\u4ece\u597d\u5947\u53f7\u706b\u661f\u8f66\u57288\u67086\u65e513\u70b931\u5206\uff08\u5317\u4eac\u65f6\u95f4\uff09\u7740\u9646\u706b\u661f\u540e\uff0c\u8fd9\u51e0\u5929\u6709\u5173\u5b83\u7684\u6d88\u606f\u5a92\u4f53\u4e00\u76f4\u6709\u62a5\u9053\u3002\u672c\u6587\u5c06\u7efc\u5408\u6574\u7406\u7f51\u4e0a\u8ba8\u8bba\u201c\u597d\u5947\u53f7\u201d\u5f15\u51fa\u7684\u4e00\u4e9b\u8f6f\u786c\u4ef6\u4fe1\u606f\u3002\u201c\u597d\u5947\u53f7\u201d\u706b\u661f\u8f66\u7b80\u4ecb\u201c\u597d\u5947\u53f7\u201d\u706b\u661f\u8f66\uff08Curiosity\uff09\uff0c\u662f\u7f8e\u56fd\u56fd\u5bb6\u822a\u7a7a\u822a\u5929\u5c40\u8fc4\u4eca(2012\u5e74)\u6700\u6602\u8d35\u7684\u706b\u661f\u63a2\u6d4b\u9879\u76ee\u3002\u4e8e2011\u5e7411\u670826\u65e515\u70b902\u5206\u53d1\u5c04\uff0c\u57282012\u5e748\u67086\u65e5\u4e2d\u534813\u70b931\u5206\uff08\u5317\u4eac\u65f6\u95f4\uff09\u964d\u843d\u706b\u661f\u3002\u8fd9\u8f86\u63a2\u6d4b\u8f66\u6bd42004\u5e74\u767b\u9646\u7684\u201c\u673a\u9047\u53f7\u201d\u706b\u661f\u63a2\u6d4b\u5668\u548c\u201c\u7cbe\u795e\u53f7\u201d\u706b\u661f\u63a2\u6d4b\u5668\u5927\u5f97\u591a\uff0c\u643a\u5e26\u66f4\u591a\u5148\u8fdb\u79d1\u5b66\u4eea\u5668\u3002\u9884\u8ba1\u5c06\u8fd0\u4f5c\u81f3\u5c11\u4e00\u4e2a\u706b\u661f\u5e74\uff08\u7ea62\u4e2a\u5730\u7403\u5e74\uff09\uff0c\u8c03\u67e5\u706b\u661f\u4ee5\u524d\u6216\u73b0\u5728\u5b58\u5728\u751f\u547d\u7684\u53ef\u80fd\u6027\u3002\uff08\u6458\u81ea\u4e92\u52a8\u767e\u79d1\uff09\u00a0\u201c\u597d\u5947\u53f7\u201d\u7684\u201c\u5927\u8111\u201d\u786c\u4ef6\u4e0e2004\u5e74\u53d1\u5c04\u7684\u4e0a\u4e00\u4ee3\u6f2b\u6e38\u8f66\u201c\u7cbe\u795e\u53f7\u201d\u548c\u201c\u673a\u9047\u53f7\u201d\u6709\u4f55\u5dee\u522b\uff1f\u4e00\u4e2a\u663e\u800c\u6613\u89c1\u7684\u5dee\u5f02\u662f\u5b83\u4eec\u5f7c\u6b64\u7684\u786c\u4ef6\uff1a\u201c\u7cbe\u795e\u53f7\u201d\u548c\u201c\u673a\u9047\u53f7\u201d\u5305\u542b3MBEEPROM\uff0c128MB\u5185\u5b58\u548c256MB\u95ea\u5b58\uff0c\u5904\u7406\u5668\u662fRAD6000\uff08110\u4e07\u4e2a\u6676\u4f53\u7ba1\uff09\uff0c\u8fd0\u7b97\u901f\u5ea635MIPS\uff1b\u201c\u597d\u5947\u53f7\u201d\u7684RoverComputeElement\u5305\u542b\u4e24\u5957\u76f8\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\uff0c\u4e00\u4e2a\u53d1\u751f\u6545\u969c\u540e\u53e6\u4e00\u4e2a\u4f1a\u81ea\u52a8\u914d\u7f6e\u63a5\u7ba1\uff0c\u5b83\u5305\u542b256KBEEPROM\uff0c256MB\u5185\u5b58\uff0c2GB\u95ea\u5b58\u3002\u6297\u8f90\u5c04\u5904\u7406\u5668\u662fBAE\u7cfb\u7edf\u516c\u53f8\u7684\u00a0RAD750\u00a0(1040\u4e07\u6676\u4f53\u7ba1\uff0c\u6838\u5fc3\u9891\u7387110\u5230200MHz)\uff0c\u57fa\u4e8eIBM\u7684PowerPC750\u8bbe\u8ba1\uff0c\u901f\u5ea6400MIPS\u3002\uff08\u6458\u81ea\u00a0Solidot\u00a0\uff0c\u82f1\u6587\u5168\u6587\uff1aextremetech\u3002NASA\u5b98\u7f51\u4e5f\u6709\u7b80\u8981\u4ecb\u7ecd\u3002\uff09\u00a0\u201c\u597d\u5947\u53f7\u201d\u7684\u8f6f\u4ef6\u4fe1\u606f\uff1f\uff1f\uff1f\u5173\u4e8e\u8fd9\u65b9\u9762\uff0c\u4f3c\u4e4e\u6ca1\u770b\u5230\u8fc7NASA\u5b98\u65b9\u6216\u5176\u4ed6\u5a92\u4f53\u7684\u6b63\u5f0f\u6d88\u606f\u3002\uff08\u6ce8\uff1a\u53ef\u80fd\u6709\uff0c\u4f46\u7b14\u8005\u6ca1\u770b\u5230\u3002\uff09\u4eca\u5e746\u6708\u5e95\u6709\u4e00\u5219\u7b80\u8baf\u63d0\u5230\uff1a\u201c50\u4e07\u884c\u4ee3\u7801\u51b3\u5b9a\u201c\u597d\u5947\u53f7\u201d\u767b\u9646\u706b\u661f\u6700\u540e\u60ca\u5fc3\u52a8\u9b44\u76847\u5206\u949f\u3002\u201d\u4f46\u5176\u4e2d\u5e76\u672a\u8bf4\u8fd950\u4e07\u884c\u4ee3\u7801\u90fd\u662f\u54ea\u79cd\u7f16\u7a0b\u8bed\u8a00\u3002\u5728\u201c\u597d\u5947\u53f7\u201d\u7740\u9646\u706b\u661f\u540e\uff0cStackExchange\u4e0a\u6709\u4e2a\u8ba8\u8bba\u5e16\uff1aWhatistheMarsCuriosityRover\u2019ssoftwarebuiltin?\u00a0TheMarsCuriosityroverhaslandedsuccessfully,andoneofthepromovideos\u201c7minutesofterror\u201dbragsabouttherebeing500,000linesofcode.It\u2019sacomplicatedproblem,nodoubt.Butthatisalotofcode,surelytherewasaprettybigprogrammingeffortbehindit.Doesanyoneknowanythingaboutthisproject?Icanonlyimagineit\u2019ssomekindofembeddedC.\u00a0\u5728\u8fd9\u4e2a\u8ba8\u8bba\u5e16\u7684\u56de\u7b54\u4e2d\uff0cWorldEngineer\u00a0\u56de\u590d\u8bf4\uff1aIt\u2019srunning2.5millionlinesofConaRAD750processormanufacturedbyBAE.TheJPLhasabitmoreinformationbutIdosuspectmanyofthedetailsarenotpublicized.ItdoesappearthatthetestingscriptswerewritteninPython.\u201c\u597d\u5947\u53f7\u201d\u5728BAE\u7cfb\u7edf\u516c\u53f8\u5236\u9020\u7684RAD750\u5904\u7406\u5668\u4e0a\u8fd0\u884c\u7740250\u4e07\u884cC\u4ee3\u7801\uff08\u57fa\u4e8e\u4e00\u4efd2009\u5e74\u7684PDF\u6587\u6863\uff09\u3002NASA\u55b7\u6c14\u63a8\u8fdb\u5b9e\u9a8c\u5ba4\uff08JPL\uff09\u4e0a\u6709\u4e9b\u4fe1\u606f\uff0c\u4f46\u6211\u6000\u7591\u5f88\u591a\u7ec6\u8282\u4fe1\u606f\u90fd\u6ca1\u6709\u516c\u5e03\u3002\u201c\u597d\u5947\u53f7\u201d\u7684\u6d4b\u8bd5\u811a\u672c\u4f3c\u4e4e\u662f\u7528Python\u7f16\u5199\u7684\u3002\u00a0\u6839\u636eWorldEngineer\u63d0\u5230\u7684\u90a3\u4efd\u6765\u81ea\u55b7\u6c14\u63a8\u8fdb\u5b9e\u9a8c\u5ba4\uff08JPL\uff09\u7684\u6587\u6863\u300aMonitoringtheExecutionofSpaceCraftFlightSoftware|\u98de\u8239\u98de\u884c\u8f6f\u4ef6\u6267\u884c\u76d1\u63a7\u300b\uff08\u6ce8\u610f\u6587\u6863\u9875\u7709\u4e0a\u7684Copyright2009\u5e74\u5b57\u6837\uff09\uff0c\u5176\u4e2d\u63d0\u5230\u4e86\u201cMarsScienceLaboratory\uff08\u706b\u661f\u79d1\u5b66\u5b9e\u9a8c\u5ba4\uff09\u4efb\u52a1\u201d\u5f53\u65f6\u7684\u4e00\u4e9b\u57fa\u672c\u4fe1\u606f\uff1a\u2022programmerteamof30\u00a0|\u670930\u4f4d\u7a0b\u5e8f\u5458\u2022testingteamof10+people|\u6d4b\u8bd5\u56e2\u961f\u5927\u4e8e10\u4eba\u2022programminglanguageisC,2.5MLOC|\u00a0250\u4e07\u884cC\u4ee3\u7801\u00a0\u5728StackExchange\u90a3\u4e2a\u8ba8\u8bba\u5e16\u7684\u56de\u7b54\u4e2d\uff0cNateParsons\u00a0\u63d0\u4f9b\u4e86\u53e6\u5916\u4e00\u4e9b\u4fe1\u606f\uff1a\uff08\u4e0b\u9762\u6458\u8bd1\u4e86\u90e8\u5206\u56de\u590d\uff0c\u53e6\u5916NateParsons\u00a0\u7279\u522b\u5f3a\u8c03\u4ed6\u4e0d\u662fJPL\u5458\u5de5\uff09ThecodeisbasedonthatofMER(SpiritandOpportunity),whichwerebasedoffoftheirfirstlander,MPF(Sojourner).It\u2019s3.5millionlinesofC(muchofitautogenerated),runningonaRA50processormanufacturedbyBAEandtheVxWorksOperatingsystem.Overamillionlineswerehandcoded.\u201c\u597d\u5947\u53f7\u201d\u7684\u4ee3\u7801\u57fa\u4e8eMER\uff08\u201c\u7cbe\u795e\u53f7\u201d\u548c\u201c\u673a\u9047\u53f7\u201d\uff09\uff0cMER\u90fd\u662f\u57fa\u4e8e\u7b2c\u4e00\u4ee3\u767b\u9646\u5668MPF\uff08\u201c\u7d22\u6770\u7eb3\u53f7\u201d\uff09\u3002\u6709350\u4e07\u884cC\u4ee3\u7801\uff08\u5927\u90e8\u5206\u662f\u81ea\u52a8\u751f\u6210\u7684\uff09\uff0c\u8fd0\u884c\u5728BAE\u516c\u53f8\u5236\u9020\u7684RA50\u5904\u7406\u5668\u548cVxWorks\u64cd\u4f5c\u7cfb\u7edf\u3002\u8d85\u8fc71\u767e\u4e07\u884c\u4ee3\u7801\u662f\u624b\u5199\u3002Thecodeisimplementedas150separatemodules,eachperformingadifferentfunction.HighlycoupledmodulesareorganizedintoComponentsthatabstractthemodulestheycontain,and\u201cspecifyeitheraspecificfunction,activity,orbehavior.\u201dThesecomponentsarefutherorganizedintolayers,andthereare\u201cnomorethan10top-levelcomponents.\u201d\u6574\u4e2a\u4ee3\u7801\u7531150\u4e2a\u72ec\u7acb\u6a21\u5757\u5b9e\u73b0\uff0c\u6bcf\u4e2a\u6a21\u5757\u6267\u884c\u4e0d\u540c\u7684\u529f\u80fd\u3002\u9ad8\u5ea6\u8026\u5408\u7684\u6a21\u5757\u7ec4\u7ec7\u6210\u90e8\u4ef6\uff08\u63d0\u53d6\u4ed6\u4eec\u6240\u5305\u542b\u7684\u6a21\u5757\uff0c\u7ed9\u5404\u4e2a\u6a21\u5757\u6307\u5b9a\u5177\u4f53\u7684\u529f\u80fd\u3001\u52a8\u4f5c\u6216\u884c\u4e3a\uff09\u3002\u8fd9\u4e9b\u90e8\u4ef6\u518d\u8fdb\u4e00\u6b65\u7ec4\u7ec7\u5206\u5c42\uff0c\u9876\u5c42\u90e8\u4ef6\u4e0d\u8d85\u8fc710\u4e2a\u3002Source:KeynotetalkbyBenjaminCichyat2010WorkshoponSpacecraftFlightSoftware(FSW-10),slides,audio,andvideo(startswithmissionoverview,architecturediscussionatslide80).\u6765\u6e90\uff1aBenjaminCichy\u00a0\u57282010\u5e74\u98de\u8239\u98de\u884c\u8f6f\u4ef6\u7814\u8ba8\u4f1a\uff08FSW-10\uff09\u4e0a\u7684\u6f14\u8bb2\u3002\uff08\u5f00\u59cb\u662f\u4efb\u52a1\u6982\u8ff0\uff0c\u67b6\u6784\u8ba8\u8bba\u4ece\u7b2c80\u9875\u5f00\u59cb\uff09\u00a0\u8bd1\u6ce8\uff1a\u2460\u00a0BenjaminCichy\u00a0\u662f\u55b7\u6c14\u63a8\u8fdb\u5b9e\u9a8c\u5ba4\uff08JPL\uff09\u7684\u9ad8\u7ea7\u8f6f\u4ef6\u7cfb\u7edf\u5de5\u7a0b\u5e08\uff0c\u4e8e2002\u5e74\u52a0\u5165JPL\uff1b\u2461\u98de\u8239\u98de\u884c\u8f6f\u4ef6\u7814\u8ba8\u4f1a\uff08FSW\uff09\u7531\u7f8e\u56fd\u822a\u5929\u5de5\u4e1a\u603b\u516c\u53f8\u4e3b\u529e\uff0c\u55b7\u6c14\u63a8\u8fdb\u5b9e\u9a8c\u5ba4\uff08JPL\uff09\u548c\u7ea6\u7ff0\u00b7\u970d\u666e\u91d1\u65af\u5927\u5b66\u5e94\u7528\u7269\u7406\u5b9e\u9a8c\u5ba4\u534f\u529e\u3002\u00a0\u6ce8\u610f\uff0c\u4e0a\u9762\u8fd9\u4e24\u4e2a\u56de\u7b54\u5e76\u4e0d\u662fNASA\u5b98\u65b9\u53d1\u5e03\u7684\u6d88\u606f\uff0c\u53ea\u662f\u6839\u636e\u4ee5\u524d\u7684\u8d44\u6599\uff082009\u5e74\u548c2010\u5e74\uff09\u63a8\u65ad\u5f97\u51fa\u7684\u3002\u00a0\u8865\u5145\u4fe1\u606f\uff1a\u2460\u00a0\u300a\uff08NASA\uff09JPLInstitutionalCodingStandardfortheCProgrammingLanguage|\u55b7\u6c14\u63a8\u8fdb\u5b9e\u9a8c\u5ba4\u4e4bC\u8bed\u8a00\u7f16\u7801\u6807\u51c6\u300b33\u6761\u89c4\u5219\u6982\u8981\u89c1\u9644\u56fe\u3002\u5fae\u76d8\u4e0b\u8f7d\uff1ahttp://t.cn/zWOyWu7\u2461\u6700\u540e\u53ef\u4ee5\u56de\u987e\u4e00\u4e0b\u201c\u597d\u5947\u53f7\u201d\u706b\u661f\u8f66\u7684\u5168\u7a0b\u767b\u9646\u6a21\u62df\u52a8\u753b\uff1a[youkuid=\u201dXMzI2ODg5Mjk2\u2033w=\u201d500\u2033h=\u201d400\u2033]\u00a0\u6587\u7ae0\u6574\u7406\uff1a\u4f2f\u4e50\u5728\u7ebf\u2013\u9ec4\u5229\u6c11\u6587\u7ae0\u94fe\u63a5\uff1ahttp://blog.jobbole.com/25037/\u3010\u5982\u9700\u8f6c\u8f7d\uff0c\u8bf7\u6807\u6ce8\u5e76\u4fdd\u7559\u539f\u6587\u94fe\u63a5\u3001\u8bd1\u6587\u94fe\u63a5\u548c\u8bd1\u8005\u7b49\u4fe1\u606f\uff0c\u8c22\u8c22\u5408\u4f5c\uff01\u30111\u8d5e\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u9ec4\u5229\u6c11\u4f2f\u4e50\u5728\u7ebf\u8054\u5408\u53d1\u8d77\u4eba\uff0c\u5173\u6ce8IT\u548c\u4e92\u8054\u7f51\u3002\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b799\u00b7"]},
{"art_title": ["\u6df1\u523b\u7406\u89e3Python\u4e2d\u7684\u5143\u7c7b(metaclass)"], "art_url": ["http://python.jobbole.com/21351/"], "art_create_time": ["2012/06/11"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2012/06/python-icon.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-bigship\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1astackoverflow\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u8bd1\u6ce8\uff1a\u8fd9\u662f\u4e00\u7bc7\u5728Stackoverflow\u4e0a\u5f88\u70ed\u7684\u5e16\u5b50\u3002\u63d0\u95ee\u8005\u81ea\u79f0\u5df2\u7ecf\u638c\u63e1\u4e86\u6709\u5173PythonOOP\u7f16\u7a0b\u4e2d\u7684\u5404\u79cd\u6982\u5ff5\uff0c\u4f46\u59cb\u7ec8\u89c9\u5f97\u5143\u7c7b(metaclass)\u96be\u4ee5\u7406\u89e3\u3002\u4ed6\u77e5\u9053\u8fd9\u80af\u5b9a\u548c\u81ea\u7701\u6709\u5173\uff0c\u4f46\u4ecd\u7136\u89c9\u5f97\u4e0d\u592a\u660e\u767d\uff0c\u5e0c\u671b\u5927\u5bb6\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e9b\u5b9e\u9645\u7684\u4f8b\u5b50\u548c\u4ee3\u7801\u7247\u6bb5\u4ee5\u5e2e\u52a9\u7406\u89e3\uff0c\u4ee5\u53ca\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u9700\u8981\u8fdb\u884c\u5143\u7f16\u7a0b\u3002\u4e8e\u662fe-satis\u540c\u5b66\u7ed9\u51fa\u4e86\u795e\u4e00\u822c\u7684\u56de\u590d\uff0c\u8be5\u56de\u590d\u83b7\u5f97\u4e86985\u70b9\u7684\u8d5e\u540c\u70b9\u6570\uff0c\u66f4\u6709\u4eba\u8bc4\u8bba\u8bf4\u8fd9\u6bb5\u56de\u590d\u5e94\u8be5\u52a0\u5165\u5230Python\u7684\u5b98\u65b9\u6587\u6863\u4e2d\u53bb\u3002\u800ce-satis\u540c\u5b66\u672c\u4eba\u5728StackOverflow\u4e2d\u7684\u58f0\u671b\u79ef\u5206\u4e5f\u9ad8\u8fbe64271\u5206\u3002\u4ee5\u4e0b\u5c31\u662f\u8fd9\u7bc7\u7cbe\u5f69\u7684\u56de\u590d\uff08\u63d0\u793a\uff1a\u975e\u5e38\u957f\uff09\u7c7b\u4e5f\u662f\u5bf9\u8c61\u5728\u7406\u89e3\u5143\u7c7b\u4e4b\u524d\uff0c\u4f60\u9700\u8981\u5148\u638c\u63e1Python\u4e2d\u7684\u7c7b\u3002Python\u4e2d\u7c7b\u7684\u6982\u5ff5\u501f\u9274\u4e8eSmalltalk\uff0c\u8fd9\u663e\u5f97\u6709\u4e9b\u5947\u7279\u3002\u5728\u5927\u591a\u6570\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u7c7b\u5c31\u662f\u4e00\u7ec4\u7528\u6765\u63cf\u8ff0\u5982\u4f55\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\u7684\u4ee3\u7801\u6bb5\u3002\u5728Python\u4e2d\u8fd9\u4e00\u70b9\u4ecd\u7136\u6210\u7acb\uff1aPython>>>classObjectCreator(object):\u2026pass\u2026>>>my_object=ObjectCreator()>>>printmy_object<__main__.ObjectCreatorobjectat0x8974f2c>123456>>>classObjectCreator(object):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u2026>>>my_object=ObjectCreator()>>>printmy_object<__main__.ObjectCreatorobjectat0x8974f2c>\u4f46\u662f\uff0cPython\u4e2d\u7684\u7c7b\u8fd8\u8fdc\u4e0d\u6b62\u5982\u6b64\u3002\u7c7b\u540c\u6837\u4e5f\u662f\u4e00\u79cd\u5bf9\u8c61\u3002\u662f\u7684\uff0c\u6ca1\u9519\uff0c\u5c31\u662f\u5bf9\u8c61\u3002\u53ea\u8981\u4f60\u4f7f\u7528\u5173\u952e\u5b57class\uff0cPython\u89e3\u91ca\u5668\u5728\u6267\u884c\u7684\u65f6\u5019\u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u6bb5\uff1aPython>>>classObjectCreator(object):\u2026pass\u2026123>>>classObjectCreator(object):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u2026\u5c06\u5728\u5185\u5b58\u4e2d\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\uff0c\u540d\u5b57\u5c31\u662fObjectCreator\u3002\u8fd9\u4e2a\u5bf9\u8c61\uff08\u7c7b\uff09\u81ea\u8eab\u62e5\u6709\u521b\u5efa\u5bf9\u8c61\uff08\u7c7b\u5b9e\u4f8b\uff09\u7684\u80fd\u529b\uff0c\u800c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5b83\u662f\u4e00\u4e2a\u7c7b\u7684\u539f\u56e0\u3002\u4f46\u662f\uff0c\u5b83\u7684\u672c\u8d28\u4ecd\u7136\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4e8e\u662f\u4e4e\u4f60\u53ef\u4ee5\u5bf9\u5b83\u505a\u5982\u4e0b\u7684\u64cd\u4f5c\uff1a1)\u00a0\u00a0\u4f60\u53ef\u4ee5\u5c06\u5b83\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf2)\u00a0\u00a0\u4f60\u53ef\u4ee5\u62f7\u8d1d\u5b833)\u00a0\u00a0\u4f60\u53ef\u4ee5\u4e3a\u5b83\u589e\u52a0\u5c5e\u60274)\u00a0\u00a0\u4f60\u53ef\u4ee5\u5c06\u5b83\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u8fdb\u884c\u4f20\u9012\u4e0b\u9762\u662f\u793a\u4f8b\uff1aPython>>>printObjectCreator#\u4f60\u53ef\u4ee5\u6253\u5370\u4e00\u4e2a\u7c7b\uff0c\u56e0\u4e3a\u5b83\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61<class'__main__.ObjectCreator'>>>>defecho(o):\u2026printo\u2026>>>echo(ObjectCreator)#\u4f60\u53ef\u4ee5\u5c06\u7c7b\u505a\u4e3a\u53c2\u6570\u4f20\u7ed9\u51fd\u6570<class'__main__.ObjectCreator'>>>>printhasattr(ObjectCreator,'new_attribute')Fasle>>>ObjectCreator.new_attribute='foo'#\u4f60\u53ef\u4ee5\u4e3a\u7c7b\u589e\u52a0\u5c5e\u6027>>>printhasattr(ObjectCreator,'new_attribute')True>>>printObjectCreator.new_attributefoo>>>ObjectCreatorMirror=ObjectCreator#\u4f60\u53ef\u4ee5\u5c06\u7c7b\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf>>>printObjectCreatorMirror()<__main__.ObjectCreatorobjectat0x8997b4c>1234567891011121314151617>>>printObjectCreator\u00a0\u00a0\u00a0\u00a0#\u4f60\u53ef\u4ee5\u6253\u5370\u4e00\u4e2a\u7c7b\uff0c\u56e0\u4e3a\u5b83\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61<class'__main__.ObjectCreator'>>>>defecho(o):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printo\u2026>>>echo(ObjectCreator)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4f60\u53ef\u4ee5\u5c06\u7c7b\u505a\u4e3a\u53c2\u6570\u4f20\u7ed9\u51fd\u6570<class'__main__.ObjectCreator'>>>>printhasattr(ObjectCreator,'new_attribute')Fasle>>>ObjectCreator.new_attribute='foo'#\u00a0\u00a0\u4f60\u53ef\u4ee5\u4e3a\u7c7b\u589e\u52a0\u5c5e\u6027>>>printhasattr(ObjectCreator,'new_attribute')True>>>printObjectCreator.new_attributefoo>>>ObjectCreatorMirror=ObjectCreator#\u4f60\u53ef\u4ee5\u5c06\u7c7b\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf>>>printObjectCreatorMirror()<__main__.ObjectCreatorobjectat0x8997b4c>\u00a0\u52a8\u6001\u5730\u521b\u5efa\u7c7b\u56e0\u4e3a\u7c7b\u4e5f\u662f\u5bf9\u8c61\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u7684\u521b\u5efa\u5b83\u4eec\uff0c\u5c31\u50cf\u5176\u4ed6\u4efb\u4f55\u5bf9\u8c61\u4e00\u6837\u3002\u9996\u5148\uff0c\u4f60\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u521b\u5efa\u7c7b\uff0c\u4f7f\u7528class\u5173\u952e\u5b57\u5373\u53ef\u3002Python>>>defchoose_class(name):\u2026ifname=='foo':\u2026classFoo(object):\u2026pass\u2026returnFoo#\u8fd4\u56de\u7684\u662f\u7c7b\uff0c\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b\u2026else:\u2026classBar(object):\u2026pass\u2026returnBar\u2026>>>MyClass=choose_class('foo')>>>printMyClass#\u51fd\u6570\u8fd4\u56de\u7684\u662f\u7c7b\uff0c\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b<class'__main__'.Foo>>>>printMyClass()#\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u7c7b\u521b\u5efa\u7c7b\u5b9e\u4f8b\uff0c\u4e5f\u5c31\u662f\u5bf9\u8c61<__main__.Fooobjectat0x89c6d4c>123456789101112131415>>>defchoose_class(name):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifname=='foo':\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0classFoo(object):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnFoo\u00a0\u00a0\u00a0\u00a0#\u8fd4\u56de\u7684\u662f\u7c7b\uff0c\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else:\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0classBar(object):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnBar\u2026>>>MyClass=choose_class('foo')>>>printMyClass\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u51fd\u6570\u8fd4\u56de\u7684\u662f\u7c7b\uff0c\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b<class'__main__'.Foo>>>>printMyClass()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u7c7b\u521b\u5efa\u7c7b\u5b9e\u4f8b\uff0c\u4e5f\u5c31\u662f\u5bf9\u8c61<__main__.Fooobjectat0x89c6d4c>\u4f46\u8fd9\u8fd8\u4e0d\u591f\u52a8\u6001\uff0c\u56e0\u4e3a\u4f60\u4ecd\u7136\u9700\u8981\u81ea\u5df1\u7f16\u5199\u6574\u4e2a\u7c7b\u7684\u4ee3\u7801\u3002\u7531\u4e8e\u7c7b\u4e5f\u662f\u5bf9\u8c61\uff0c\u6240\u4ee5\u5b83\u4eec\u5fc5\u987b\u662f\u901a\u8fc7\u4ec0\u4e48\u4e1c\u897f\u6765\u751f\u6210\u7684\u624d\u5bf9\u3002\u5f53\u4f60\u4f7f\u7528class\u5173\u952e\u5b57\u65f6\uff0cPython\u89e3\u91ca\u5668\u81ea\u52a8\u521b\u5efa\u8fd9\u4e2a\u5bf9\u8c61\u3002\u4f46\u5c31\u548cPython\u4e2d\u7684\u5927\u591a\u6570\u4e8b\u60c5\u4e00\u6837\uff0cPython\u4ecd\u7136\u63d0\u4f9b\u7ed9\u4f60\u624b\u52a8\u5904\u7406\u7684\u65b9\u6cd5\u3002\u8fd8\u8bb0\u5f97\u5185\u5efa\u51fd\u6570type\u5417\uff1f\u8fd9\u4e2a\u53e4\u8001\u4f46\u5f3a\u5927\u7684\u51fd\u6570\u80fd\u591f\u8ba9\u4f60\u77e5\u9053\u4e00\u4e2a\u5bf9\u8c61\u7684\u7c7b\u578b\u662f\u4ec0\u4e48\uff0c\u5c31\u50cf\u8fd9\u6837\uff1aPython>>>printtype(1)<type'int'>>>>printtype(\"1\")<type'str'>>>>printtype(ObjectCreator)<type'type'>>>>printtype(ObjectCreator())<class'__main__.ObjectCreator'>12345678>>>printtype(1)<type'int'>>>>printtype(\"1\")<type'str'>>>>printtype(ObjectCreator)<type'type'>>>>printtype(ObjectCreator())<class'__main__.ObjectCreator'>\u8fd9\u91cc\uff0ctype\u6709\u4e00\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u80fd\u529b\uff0c\u5b83\u4e5f\u80fd\u52a8\u6001\u7684\u521b\u5efa\u7c7b\u3002type\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u7c7b\u7684\u63cf\u8ff0\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u7c7b\u3002\uff08\u6211\u77e5\u9053\uff0c\u6839\u636e\u4f20\u5165\u53c2\u6570\u7684\u4e0d\u540c\uff0c\u540c\u4e00\u4e2a\u51fd\u6570\u62e5\u6709\u4e24\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u7528\u6cd5\u662f\u4e00\u4ef6\u5f88\u50bb\u7684\u4e8b\u60c5\uff0c\u4f46\u8fd9\u5728Python\u4e2d\u662f\u4e3a\u4e86\u4fdd\u6301\u5411\u540e\u517c\u5bb9\u6027\uff09type\u53ef\u4ee5\u50cf\u8fd9\u6837\u5de5\u4f5c\uff1aPythontype(\u7c7b\u540d,\u7236\u7c7b\u7684\u5143\u7ec4\uff08\u9488\u5bf9\u7ee7\u627f\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u4e3a\u7a7a\uff09\uff0c\u5305\u542b\u5c5e\u6027\u7684\u5b57\u5178\uff08\u540d\u79f0\u548c\u503c\uff09)1type(\u7c7b\u540d,\u7236\u7c7b\u7684\u5143\u7ec4\uff08\u9488\u5bf9\u7ee7\u627f\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u4e3a\u7a7a\uff09\uff0c\u5305\u542b\u5c5e\u6027\u7684\u5b57\u5178\uff08\u540d\u79f0\u548c\u503c\uff09)\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\uff1aPython>>>classMyShinyClass(object):\u2026pass12>>>classMyShinyClass(object):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u53ef\u4ee5\u624b\u52a8\u50cf\u8fd9\u6837\u521b\u5efa\uff1aPython>>>MyShinyClass=type('MyShinyClass',(),{})#\u8fd4\u56de\u4e00\u4e2a\u7c7b\u5bf9\u8c61>>>printMyShinyClass<class'__main__.MyShinyClass'>>>>printMyShinyClass()#\u521b\u5efa\u4e00\u4e2a\u8be5\u7c7b\u7684\u5b9e\u4f8b<__main__.MyShinyClassobjectat0x8997cec>12345>>>MyShinyClass=type('MyShinyClass',(),{})\u00a0\u00a0#\u8fd4\u56de\u4e00\u4e2a\u7c7b\u5bf9\u8c61>>>printMyShinyClass<class'__main__.MyShinyClass'>>>>printMyShinyClass()\u00a0\u00a0#\u00a0\u00a0\u521b\u5efa\u4e00\u4e2a\u8be5\u7c7b\u7684\u5b9e\u4f8b<__main__.MyShinyClassobjectat0x8997cec>\u4f60\u4f1a\u53d1\u73b0\u6211\u4eec\u4f7f\u7528\u201cMyShinyClass\u201d\u4f5c\u4e3a\u7c7b\u540d\uff0c\u5e76\u4e14\u4e5f\u53ef\u4ee5\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u53d8\u91cf\u6765\u4f5c\u4e3a\u7c7b\u7684\u5f15\u7528\u3002\u7c7b\u548c\u53d8\u91cf\u662f\u4e0d\u540c\u7684\uff0c\u8fd9\u91cc\u6ca1\u6709\u4efb\u4f55\u7406\u7531\u628a\u4e8b\u60c5\u5f04\u7684\u590d\u6742\u3002type\u63a5\u53d7\u4e00\u4e2a\u5b57\u5178\u6765\u4e3a\u7c7b\u5b9a\u4e49\u5c5e\u6027\uff0c\u56e0\u6b64Python>>>classFoo(object):\u2026bar=True12>>>classFoo(object):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0bar=True\u53ef\u4ee5\u7ffb\u8bd1\u4e3a\uff1aPython>>>Foo=type('Foo',(),{'bar':True})1>>>Foo=type('Foo',(),{'bar':True})\u5e76\u4e14\u53ef\u4ee5\u5c06Foo\u5f53\u6210\u4e00\u4e2a\u666e\u901a\u7684\u7c7b\u4e00\u6837\u4f7f\u7528\uff1aPython>>>printFoo<class'__main__.Foo'>>>>printFoo.barTrue>>>f=Foo()>>>printf<__main__.Fooobjectat0x8a9b84c>>>>printf.barTrue123456789>>>printFoo<class'__main__.Foo'>>>>printFoo.barTrue>>>f=Foo()>>>printf<__main__.Fooobjectat0x8a9b84c>>>>printf.barTrue\u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u5411\u8fd9\u4e2a\u7c7b\u7ee7\u627f\uff0c\u6240\u4ee5\uff0c\u5982\u4e0b\u7684\u4ee3\u7801\uff1aPython>>>classFooChild(Foo):\u2026pass12>>>classFooChild(Foo):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u5c31\u53ef\u4ee5\u5199\u6210\uff1aPython>>>FooChild=type('FooChild',(Foo,),{})>>>printFooChild<class'__main__.FooChild'>>>>printFooChild.bar#bar\u5c5e\u6027\u662f\u7531Foo\u7ee7\u627f\u800c\u6765True12345>>>FooChild=type('FooChild',(Foo,),{})>>>printFooChild<class'__main__.FooChild'>>>>printFooChild.bar\u00a0\u00a0#bar\u5c5e\u6027\u662f\u7531Foo\u7ee7\u627f\u800c\u6765True\u6700\u7ec8\u4f60\u4f1a\u5e0c\u671b\u4e3a\u4f60\u7684\u7c7b\u589e\u52a0\u65b9\u6cd5\u3002\u53ea\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u6709\u7740\u6070\u5f53\u7b7e\u540d\u7684\u51fd\u6570\u5e76\u5c06\u5176\u4f5c\u4e3a\u5c5e\u6027\u8d4b\u503c\u5c31\u53ef\u4ee5\u4e86\u3002Python>>>defecho_bar(self):\u2026printself.bar\u2026>>>FooChild=type('FooChild',(Foo,),{'echo_bar':echo_bar})>>>hasattr(Foo,'echo_bar')False>>>hasattr(FooChild,'echo_bar')True>>>my_foo=FooChild()>>>my_foo.echo_bar()True1234567891011>>>defecho_bar(self):\u2026\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printself.bar\u2026>>>FooChild=type('FooChild',(Foo,),{'echo_bar':echo_bar})>>>hasattr(Foo,'echo_bar')False>>>hasattr(FooChild,'echo_bar')True>>>my_foo=FooChild()>>>my_foo.echo_bar()True\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u5728Python\u4e2d\uff0c\u7c7b\u4e5f\u662f\u5bf9\u8c61\uff0c\u4f60\u53ef\u4ee5\u52a8\u6001\u7684\u521b\u5efa\u7c7b\u3002\u8fd9\u5c31\u662f\u5f53\u4f60\u4f7f\u7528\u5173\u952e\u5b57class\u65f6Python\u5728\u5e55\u540e\u505a\u7684\u4e8b\u60c5\uff0c\u800c\u8fd9\u5c31\u662f\u901a\u8fc7\u5143\u7c7b\u6765\u5b9e\u73b0\u7684\u3002\u00a0\u5230\u5e95\u4ec0\u4e48\u662f\u5143\u7c7b\uff08\u7ec8\u4e8e\u5230\u4e3b\u9898\u4e86\uff09\u5143\u7c7b\u5c31\u662f\u7528\u6765\u521b\u5efa\u7c7b\u7684\u201c\u4e1c\u897f\u201d\u3002\u4f60\u521b\u5efa\u7c7b\u5c31\u662f\u4e3a\u4e86\u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4e0d\u662f\u5417\uff1f\u4f46\u662f\u6211\u4eec\u5df2\u7ecf\u5b66\u4e60\u5230\u4e86Python\u4e2d\u7684\u7c7b\u4e5f\u662f\u5bf9\u8c61\u3002\u597d\u5427\uff0c\u5143\u7c7b\u5c31\u662f\u7528\u6765\u521b\u5efa\u8fd9\u4e9b\u7c7b\uff08\u5bf9\u8c61\uff09\u7684\uff0c\u5143\u7c7b\u5c31\u662f\u7c7b\u7684\u7c7b\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\u4e3a\uff1aPythonMyClass=MetaClass()MyObject=MyClass()12MyClass=MetaClass()MyObject=MyClass()\u4f60\u5df2\u7ecf\u770b\u5230\u4e86type\u53ef\u4ee5\u8ba9\u4f60\u50cf\u8fd9\u6837\u505a\uff1aPythonMyClass=type('MyClass',(),{})1MyClass=type('MyClass',(),{})\u8fd9\u662f\u56e0\u4e3a\u51fd\u6570type\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5143\u7c7b\u3002type\u5c31\u662fPython\u5728\u80cc\u540e\u7528\u6765\u521b\u5efa\u6240\u6709\u7c7b\u7684\u5143\u7c7b\u3002\u73b0\u5728\u4f60\u60f3\u77e5\u9053\u90a3\u4e3a\u4ec0\u4e48type\u4f1a\u5168\u90e8\u91c7\u7528\u5c0f\u5199\u5f62\u5f0f\u800c\u4e0d\u662fType\u5462\uff1f\u597d\u5427\uff0c\u6211\u731c\u8fd9\u662f\u4e3a\u4e86\u548cstr\u4fdd\u6301\u4e00\u81f4\u6027\uff0cstr\u662f\u7528\u6765\u521b\u5efa\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u7c7b\uff0c\u800cint\u662f\u7528\u6765\u521b\u5efa\u6574\u6570\u5bf9\u8c61\u7684\u7c7b\u3002type\u5c31\u662f\u521b\u5efa\u7c7b\u5bf9\u8c61\u7684\u7c7b\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5__class__\u5c5e\u6027\u6765\u770b\u5230\u8fd9\u4e00\u70b9\u3002Python\u4e2d\u6240\u6709\u7684\u4e1c\u897f\uff0c\u6ce8\u610f\uff0c\u6211\u662f\u6307\u6240\u6709\u7684\u4e1c\u897f\u2014\u2014\u90fd\u662f\u5bf9\u8c61\u3002\u8fd9\u5305\u62ec\u6574\u6570\u3001\u5b57\u7b26\u4e32\u3001\u51fd\u6570\u4ee5\u53ca\u7c7b\u3002\u5b83\u4eec\u5168\u90e8\u90fd\u662f\u5bf9\u8c61\uff0c\u800c\u4e14\u5b83\u4eec\u90fd\u662f\u4ece\u4e00\u4e2a\u7c7b\u521b\u5efa\u800c\u6765\u3002Python>>>age=35>>>age.__class__<type'int'>>>>name='bob'>>>name.__class__<type'str'>>>>deffoo():pass>>>foo.__class__<type'function'>>>>classBar(object):pass>>>b=Bar()>>>b.__class__<class'__main__.Bar'>12345678910111213>>>age=35>>>age.__class__<type'int'>>>>name='bob'>>>name.__class__<type'str'>>>>deffoo():pass>>>foo.__class__<type'function'>>>>classBar(object):pass>>>b=Bar()>>>b.__class__<class'__main__.Bar'>\u73b0\u5728\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a__class__\u7684__class__\u5c5e\u6027\u53c8\u662f\u4ec0\u4e48\u5462\uff1fPython>>>a.__class__.__class__<type'type'>>>>age.__class__.__class__<type'type'>>>>foo.__class__.__class__<type'type'>>>>b.__class__.__class__<type'type'>12345678>>>a.__class__.__class__<type'type'>>>>age.__class__.__class__<type'type'>>>>foo.__class__.__class__<type'type'>>>>b.__class__.__class__<type'type'>\u56e0\u6b64\uff0c\u5143\u7c7b\u5c31\u662f\u521b\u5efa\u7c7b\u8fd9\u79cd\u5bf9\u8c61\u7684\u4e1c\u897f\u3002\u5982\u679c\u4f60\u559c\u6b22\u7684\u8bdd\uff0c\u53ef\u4ee5\u628a\u5143\u7c7b\u79f0\u4e3a\u201c\u7c7b\u5de5\u5382\u201d\uff08\u4e0d\u8981\u548c\u5de5\u5382\u7c7b\u641e\u6df7\u4e86:D\uff09type\u5c31\u662fPython\u7684\u5185\u5efa\u5143\u7c7b\uff0c\u5f53\u7136\u4e86\uff0c\u4f60\u4e5f\u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u5143\u7c7b\u3002\u00a0__metaclass__\u5c5e\u6027\u4f60\u53ef\u4ee5\u5728\u5199\u4e00\u4e2a\u7c7b\u7684\u65f6\u5019\u4e3a\u5176\u6dfb\u52a0__metaclass__\u5c5e\u6027\u3002PythonclassFoo(object):__metaclass__=something\u2026[\u2026]123classFoo(object):__metaclass__=something\u2026[\u2026]\u5982\u679c\u4f60\u8fd9\u4e48\u505a\u4e86\uff0cPython\u5c31\u4f1a\u7528\u5143\u7c7b\u6765\u521b\u5efa\u7c7bFoo\u3002\u5c0f\u5fc3\u70b9\uff0c\u8fd9\u91cc\u9762\u6709\u4e9b\u6280\u5de7\u3002\u4f60\u9996\u5148\u5199\u4e0bclassFoo(object)\uff0c\u4f46\u662f\u7c7b\u5bf9\u8c61Foo\u8fd8\u6ca1\u6709\u5728\u5185\u5b58\u4e2d\u521b\u5efa\u3002Python\u4f1a\u5728\u7c7b\u7684\u5b9a\u4e49\u4e2d\u5bfb\u627e__metaclass__\u5c5e\u6027\uff0c\u5982\u679c\u627e\u5230\u4e86\uff0cPython\u5c31\u4f1a\u7528\u5b83\u6765\u521b\u5efa\u7c7bFoo\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u4f1a\u7528\u5185\u5efa\u7684type\u6765\u521b\u5efa\u8fd9\u4e2a\u7c7b\u3002\u628a\u4e0b\u9762\u8fd9\u6bb5\u8bdd\u53cd\u590d\u8bfb\u51e0\u6b21\u3002\u5f53\u4f60\u5199\u5982\u4e0b\u4ee3\u7801\u65f6:PythonclassFoo(Bar):pass12classFoo(Bar):\u00a0\u00a0\u00a0\u00a0passPython\u505a\u4e86\u5982\u4e0b\u7684\u64cd\u4f5c\uff1aFoo\u4e2d\u6709__metaclass__\u8fd9\u4e2a\u5c5e\u6027\u5417\uff1f\u5982\u679c\u662f\uff0cPython\u4f1a\u5728\u5185\u5b58\u4e2d\u901a\u8fc7__metaclass__\u521b\u5efa\u4e00\u4e2a\u540d\u5b57\u4e3aFoo\u7684\u7c7b\u5bf9\u8c61\uff08\u6211\u8bf4\u7684\u662f\u7c7b\u5bf9\u8c61\uff0c\u8bf7\u7d27\u8ddf\u6211\u7684\u601d\u8def\uff09\u3002\u5982\u679cPython\u6ca1\u6709\u627e\u5230__metaclass__\uff0c\u5b83\u4f1a\u7ee7\u7eed\u5728Bar\uff08\u7236\u7c7b\uff09\u4e2d\u5bfb\u627e__metaclass__\u5c5e\u6027\uff0c\u5e76\u5c1d\u8bd5\u505a\u548c\u524d\u9762\u540c\u6837\u7684\u64cd\u4f5c\u3002\u5982\u679cPython\u5728\u4efb\u4f55\u7236\u7c7b\u4e2d\u90fd\u627e\u4e0d\u5230__metaclass__\uff0c\u5b83\u5c31\u4f1a\u5728\u6a21\u5757\u5c42\u6b21\u4e2d\u53bb\u5bfb\u627e__metaclass__\uff0c\u5e76\u5c1d\u8bd5\u505a\u540c\u6837\u7684\u64cd\u4f5c\u3002\u5982\u679c\u8fd8\u662f\u627e\u4e0d\u5230__metaclass__,Python\u5c31\u4f1a\u7528\u5185\u7f6e\u7684type\u6765\u521b\u5efa\u8fd9\u4e2a\u7c7b\u5bf9\u8c61\u3002\u73b0\u5728\u7684\u95ee\u9898\u5c31\u662f\uff0c\u4f60\u53ef\u4ee5\u5728__metaclass__\u4e2d\u653e\u7f6e\u4e9b\u4ec0\u4e48\u4ee3\u7801\u5462\uff1f\u7b54\u6848\u5c31\u662f\uff1a\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7c7b\u7684\u4e1c\u897f\u3002\u90a3\u4e48\u4ec0\u4e48\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u4e00\u4e2a\u7c7b\u5462\uff1ftype\uff0c\u6216\u8005\u4efb\u4f55\u4f7f\u7528\u5230type\u6216\u8005\u5b50\u7c7b\u5316type\u7684\u4e1c\u4e1c\u90fd\u53ef\u4ee5\u3002\u00a0\u81ea\u5b9a\u4e49\u5143\u7c7b\u5143\u7c7b\u7684\u4e3b\u8981\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u5f53\u521b\u5efa\u7c7b\u65f6\u80fd\u591f\u81ea\u52a8\u5730\u6539\u53d8\u7c7b\u3002\u901a\u5e38\uff0c\u4f60\u4f1a\u4e3aAPI\u505a\u8fd9\u6837\u7684\u4e8b\u60c5\uff0c\u4f60\u5e0c\u671b\u53ef\u4ee5\u521b\u5efa\u7b26\u5408\u5f53\u524d\u4e0a\u4e0b\u6587\u7684\u7c7b\u3002\u5047\u60f3\u4e00\u4e2a\u5f88\u50bb\u7684\u4f8b\u5b50\uff0c\u4f60\u51b3\u5b9a\u5728\u4f60\u7684\u6a21\u5757\u91cc\u6240\u6709\u7684\u7c7b\u7684\u5c5e\u6027\u90fd\u5e94\u8be5\u662f\u5927\u5199\u5f62\u5f0f\u3002\u6709\u597d\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u529e\u5230\uff0c\u4f46\u5176\u4e2d\u4e00\u79cd\u5c31\u662f\u901a\u8fc7\u5728\u6a21\u5757\u7ea7\u522b\u8bbe\u5b9a__metaclass__\u3002\u91c7\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e2d\u7684\u6240\u6709\u7c7b\u90fd\u4f1a\u901a\u8fc7\u8fd9\u4e2a\u5143\u7c7b\u6765\u521b\u5efa\uff0c\u6211\u4eec\u53ea\u9700\u8981\u544a\u8bc9\u5143\u7c7b\u628a\u6240\u6709\u7684\u5c5e\u6027\u90fd\u6539\u6210\u5927\u5199\u5f62\u5f0f\u5c31\u4e07\u4e8b\u5927\u5409\u4e86\u3002\u5e78\u8fd0\u7684\u662f\uff0c__metaclass__\u5b9e\u9645\u4e0a\u53ef\u4ee5\u88ab\u4efb\u610f\u8c03\u7528\uff0c\u5b83\u5e76\u4e0d\u9700\u8981\u662f\u4e00\u4e2a\u6b63\u5f0f\u7684\u7c7b\uff08\u6211\u77e5\u9053\uff0c\u67d0\u4e9b\u540d\u5b57\u91cc\u5e26\u6709\u2018class\u2019\u7684\u4e1c\u897f\u5e76\u4e0d\u9700\u8981\u662f\u4e00\u4e2aclass\uff0c\u753b\u753b\u56fe\u7406\u89e3\u4e0b\uff0c\u8fd9\u5f88\u6709\u5e2e\u52a9\uff09\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u8fd9\u91cc\u5c31\u5148\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u4f5c\u4e3a\u4f8b\u5b50\u5f00\u59cb\u3002Python#\u5143\u7c7b\u4f1a\u81ea\u52a8\u5c06\u4f60\u901a\u5e38\u4f20\u7ed9\u2018type\u2019\u7684\u53c2\u6570\u4f5c\u4e3a\u81ea\u5df1\u7684\u53c2\u6570\u4f20\u5165defupper_attr(future_class_name,future_class_parents,future_class_attr):'''\u8fd4\u56de\u4e00\u4e2a\u7c7b\u5bf9\u8c61\uff0c\u5c06\u5c5e\u6027\u90fd\u8f6c\u4e3a\u5927\u5199\u5f62\u5f0f'''#\u9009\u62e9\u6240\u6709\u4e0d\u4ee5'__'\u5f00\u5934\u7684\u5c5e\u6027attrs=((name,value)forname,valueinfuture_class_attr.items()ifnotname.startswith('__'))12345#\u5143\u7c7b\u4f1a\u81ea\u52a8\u5c06\u4f60\u901a\u5e38\u4f20\u7ed9\u2018type\u2019\u7684\u53c2\u6570\u4f5c\u4e3a\u81ea\u5df1\u7684\u53c2\u6570\u4f20\u5165defupper_attr(future_class_name,future_class_parents,future_class_attr):\u00a0\u00a0\u00a0\u00a0'''\u8fd4\u56de\u4e00\u4e2a\u7c7b\u5bf9\u8c61\uff0c\u5c06\u5c5e\u6027\u90fd\u8f6c\u4e3a\u5927\u5199\u5f62\u5f0f'''\u00a0\u00a0\u00a0\u00a0#\u00a0\u00a0\u9009\u62e9\u6240\u6709\u4e0d\u4ee5'__'\u5f00\u5934\u7684\u5c5e\u6027\u00a0\u00a0\u00a0\u00a0attrs=((name,value)forname,valueinfuture_class_attr.items()ifnotname.startswith('__'))Python#\u5c06\u5b83\u4eec\u8f6c\u4e3a\u5927\u5199\u5f62\u5f0fuppercase_attr=dict((name.upper(),value)forname,valueinattrs)#\u901a\u8fc7'type'\u6765\u505a\u7c7b\u5bf9\u8c61\u7684\u521b\u5efareturntype(future_class_name,future_class_parents,uppercase_attr)__metaclass__=upper_attr#\u8fd9\u4f1a\u4f5c\u7528\u5230\u8fd9\u4e2a\u6a21\u5757\u4e2d\u7684\u6240\u6709\u7c7bclassFoo(object):#\u6211\u4eec\u4e5f\u53ef\u4ee5\u53ea\u5728\u8fd9\u91cc\u5b9a\u4e49__metaclass__\uff0c\u8fd9\u6837\u5c31\u53ea\u4f1a\u4f5c\u7528\u4e8e\u8fd9\u4e2a\u7c7b\u4e2dbar='bip'1234567891011\u00a0\u00a0\u00a0\u00a0#\u5c06\u5b83\u4eec\u8f6c\u4e3a\u5927\u5199\u5f62\u5f0f\u00a0\u00a0\u00a0\u00a0uppercase_attr=dict((name.upper(),value)forname,valueinattrs)\u00a0\u00a0\u00a0\u00a0\u00a0#\u901a\u8fc7'type'\u6765\u505a\u7c7b\u5bf9\u8c61\u7684\u521b\u5efa\u00a0\u00a0\u00a0\u00a0returntype(future_class_name,future_class_parents,uppercase_attr)\u00a0__metaclass__=upper_attr\u00a0\u00a0#\u00a0\u00a0\u8fd9\u4f1a\u4f5c\u7528\u5230\u8fd9\u4e2a\u6a21\u5757\u4e2d\u7684\u6240\u6709\u7c7b\u00a0classFoo(object):\u00a0\u00a0\u00a0\u00a0#\u6211\u4eec\u4e5f\u53ef\u4ee5\u53ea\u5728\u8fd9\u91cc\u5b9a\u4e49__metaclass__\uff0c\u8fd9\u6837\u5c31\u53ea\u4f1a\u4f5c\u7528\u4e8e\u8fd9\u4e2a\u7c7b\u4e2d\u00a0\u00a0\u00a0\u00a0bar='bip'Pythonprinthasattr(Foo,'bar')#\u8f93\u51fa:Falseprinthasattr(Foo,'BAR')#\u8f93\u51fa:Truef=Foo()printf.BAR#\u8f93\u51fa:'bip'12345678printhasattr(Foo,'bar')#\u8f93\u51fa:Falseprinthasattr(Foo,'BAR')#\u8f93\u51fa:True\u00a0f=Foo()printf.BAR#\u8f93\u51fa:'bip'\u73b0\u5728\u8ba9\u6211\u4eec\u518d\u505a\u4e00\u6b21\uff0c\u8fd9\u4e00\u6b21\u7528\u4e00\u4e2a\u771f\u6b63\u7684class\u6765\u5f53\u505a\u5143\u7c7b\u3002Python#\u8bf7\u8bb0\u4f4f\uff0c'type'\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u7c7b\uff0c\u5c31\u50cf'str'\u548c'int'\u4e00\u6837#\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u4ecetype\u7ee7\u627fclassUpperAttrMetaClass(type):#__new__\u662f\u5728__init__\u4e4b\u524d\u88ab\u8c03\u7528\u7684\u7279\u6b8a\u65b9\u6cd5#__new__\u662f\u7528\u6765\u521b\u5efa\u5bf9\u8c61\u5e76\u8fd4\u56de\u4e4b\u7684\u65b9\u6cd5#\u800c__init__\u53ea\u662f\u7528\u6765\u5c06\u4f20\u5165\u7684\u53c2\u6570\u521d\u59cb\u5316\u7ed9\u5bf9\u8c61#\u4f60\u5f88\u5c11\u7528\u5230__new__\uff0c\u9664\u975e\u4f60\u5e0c\u671b\u80fd\u591f\u63a7\u5236\u5bf9\u8c61\u7684\u521b\u5efa#\u8fd9\u91cc\uff0c\u521b\u5efa\u7684\u5bf9\u8c61\u662f\u7c7b\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u81ea\u5b9a\u4e49\u5b83\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u6539\u5199__new__#\u5982\u679c\u4f60\u5e0c\u671b\u7684\u8bdd\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728__init__\u4e2d\u505a\u4e9b\u4e8b\u60c5#\u8fd8\u6709\u4e00\u4e9b\u9ad8\u7ea7\u7684\u7528\u6cd5\u4f1a\u6d89\u53ca\u5230\u6539\u5199__call__\u7279\u6b8a\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u8fd9\u91cc\u4e0d\u7528def__new__(upperattr_metaclass,future_class_name,future_class_parents,future_class_attr):attrs=((name,value)forname,valueinfuture_class_attr.items()ifnotname.startswith('__'))uppercase_attr=dict((name.upper(),value)forname,valueinattrs)returntype(future_class_name,future_class_parents,uppercase_attr)1234567891011121314#\u8bf7\u8bb0\u4f4f\uff0c'type'\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u7c7b\uff0c\u5c31\u50cf'str'\u548c'int'\u4e00\u6837#\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u4ecetype\u7ee7\u627fclassUpperAttrMetaClass(type):\u00a0\u00a0\u00a0\u00a0#__new__\u662f\u5728__init__\u4e4b\u524d\u88ab\u8c03\u7528\u7684\u7279\u6b8a\u65b9\u6cd5\u00a0\u00a0\u00a0\u00a0#__new__\u662f\u7528\u6765\u521b\u5efa\u5bf9\u8c61\u5e76\u8fd4\u56de\u4e4b\u7684\u65b9\u6cd5\u00a0\u00a0\u00a0\u00a0#\u800c__init__\u53ea\u662f\u7528\u6765\u5c06\u4f20\u5165\u7684\u53c2\u6570\u521d\u59cb\u5316\u7ed9\u5bf9\u8c61\u00a0\u00a0\u00a0\u00a0#\u4f60\u5f88\u5c11\u7528\u5230__new__\uff0c\u9664\u975e\u4f60\u5e0c\u671b\u80fd\u591f\u63a7\u5236\u5bf9\u8c61\u7684\u521b\u5efa\u00a0\u00a0\u00a0\u00a0#\u8fd9\u91cc\uff0c\u521b\u5efa\u7684\u5bf9\u8c61\u662f\u7c7b\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u81ea\u5b9a\u4e49\u5b83\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u6539\u5199__new__\u00a0\u00a0\u00a0\u00a0#\u5982\u679c\u4f60\u5e0c\u671b\u7684\u8bdd\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728__init__\u4e2d\u505a\u4e9b\u4e8b\u60c5\u00a0\u00a0\u00a0\u00a0#\u8fd8\u6709\u4e00\u4e9b\u9ad8\u7ea7\u7684\u7528\u6cd5\u4f1a\u6d89\u53ca\u5230\u6539\u5199__call__\u7279\u6b8a\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u8fd9\u91cc\u4e0d\u7528\u00a0\u00a0\u00a0\u00a0def__new__(upperattr_metaclass,future_class_name,future_class_parents,future_class_attr):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs=((name,value)forname,valueinfuture_class_attr.items()ifnotname.startswith('__'))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0uppercase_attr=dict((name.upper(),value)forname,valueinattrs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype(future_class_name,future_class_parents,uppercase_attr)\u4f46\u662f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5176\u5b9e\u4e0d\u662fOOP\u3002\u6211\u4eec\u76f4\u63a5\u8c03\u7528\u4e86type\uff0c\u800c\u4e14\u6211\u4eec\u6ca1\u6709\u6539\u5199\u7236\u7c7b\u7684__new__\u65b9\u6cd5\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u8fd9\u6837\u53bb\u5904\u7406:PythonclassUpperAttrMetaclass(type):def__new__(upperattr_metaclass,future_class_name,future_class_parents,future_class_attr):attrs=((name,value)forname,valueinfuture_class_attr.items()ifnotname.startswith('__'))uppercase_attr=dict((name.upper(),value)forname,valueinattrs)#\u590d\u7528type.__new__\u65b9\u6cd5#\u8fd9\u5c31\u662f\u57fa\u672c\u7684OOP\u7f16\u7a0b\uff0c\u6ca1\u4ec0\u4e48\u9b54\u6cd5returntype.__new__(upperattr_metaclass,future_class_name,future_class_parents,uppercase_attr)12345678classUpperAttrMetaclass(type):\u00a0\u00a0\u00a0\u00a0def__new__(upperattr_metaclass,future_class_name,future_class_parents,future_class_attr):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs=((name,value)forname,valueinfuture_class_attr.items()ifnotname.startswith('__'))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0uppercase_attr=dict((name.upper(),value)forname,valueinattrs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u590d\u7528type.__new__\u65b9\u6cd5\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8fd9\u5c31\u662f\u57fa\u672c\u7684OOP\u7f16\u7a0b\uff0c\u6ca1\u4ec0\u4e48\u9b54\u6cd5\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(upperattr_metaclass,future_class_name,future_class_parents,uppercase_attr)\u4f60\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u4e86\u6709\u4e2a\u989d\u5916\u7684\u53c2\u6570upperattr_metaclass\uff0c\u8fd9\u5e76\u6ca1\u6709\u4ec0\u4e48\u7279\u522b\u7684\u3002\u7c7b\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u603b\u662f\u8868\u793a\u5f53\u524d\u7684\u5b9e\u4f8b\uff0c\u5c31\u50cf\u5728\u666e\u901a\u7684\u7c7b\u65b9\u6cd5\u4e2d\u7684self\u53c2\u6570\u4e00\u6837\u3002\u5f53\u7136\u4e86\uff0c\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\uff0c\u8fd9\u91cc\u7684\u540d\u5b57\u6211\u8d77\u7684\u6bd4\u8f83\u957f\u3002\u4f46\u662f\u5c31\u50cfself\u4e00\u6837\uff0c\u6240\u6709\u7684\u53c2\u6570\u90fd\u6709\u5b83\u4eec\u7684\u4f20\u7edf\u540d\u79f0\u3002\u56e0\u6b64\uff0c\u5728\u771f\u5b9e\u7684\u4ea7\u54c1\u4ee3\u7801\u4e2d\u4e00\u4e2a\u5143\u7c7b\u5e94\u8be5\u662f\u50cf\u8fd9\u6837\u7684\uff1aPythonclassUpperAttrMetaclass(type):def__new__(cls,name,bases,dct):attrs=((name,value)forname,valueindct.items()ifnotname.startswith('__')uppercase_attr=dict((name.upper(),value)forname,valueinattrs)returntype.__new__(cls,name,bases,uppercase_attr)12345classUpperAttrMetaclass(type):\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,dct):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs=((name,value)forname,valueindct.items()ifnotname.startswith('__')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0uppercase_attr\u00a0\u00a0=dict((name.upper(),value)forname,valueinattrs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returntype.__new__(cls,name,bases,uppercase_attr)\u5982\u679c\u4f7f\u7528super\u65b9\u6cd5\u7684\u8bdd\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u5b83\u53d8\u5f97\u66f4\u6e05\u6670\u4e00\u4e9b\uff0c\u8fd9\u4f1a\u7f13\u89e3\u7ee7\u627f\uff08\u662f\u7684\uff0c\u4f60\u53ef\u4ee5\u62e5\u6709\u5143\u7c7b\uff0c\u4ece\u5143\u7c7b\u7ee7\u627f\uff0c\u4ecetype\u7ee7\u627f\uff09PythonclassUpperAttrMetaclass(type):def__new__(cls,name,bases,dct):attrs=((name,value)forname,valueindct.items()ifnotname.startswith('__'))uppercase_attr=dict((name.upper(),value)forname,valueinattrs)returnsuper(UpperAttrMetaclass,cls).__new__(cls,name,bases,uppercase_attr)12345classUpperAttrMetaclass(type):\u00a0\u00a0\u00a0\u00a0def__new__(cls,name,bases,dct):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0attrs=((name,value)forname,valueindct.items()ifnotname.startswith('__'))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0uppercase_attr=dict((name.upper(),value)forname,valueinattrs)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0returnsuper(UpperAttrMetaclass,cls).__new__(cls,name,bases,uppercase_attr)\u5c31\u662f\u8fd9\u6837\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u5173\u4e8e\u5143\u7c7b\u771f\u7684\u6ca1\u6709\u522b\u7684\u53ef\u8bf4\u7684\u4e86\u3002\u4f7f\u7528\u5230\u5143\u7c7b\u7684\u4ee3\u7801\u6bd4\u8f83\u590d\u6742\uff0c\u8fd9\u80cc\u540e\u7684\u539f\u56e0\u5012\u5e76\u4e0d\u662f\u56e0\u4e3a\u5143\u7c7b\u672c\u8eab\uff0c\u800c\u662f\u56e0\u4e3a\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u5143\u7c7b\u53bb\u505a\u4e00\u4e9b\u6666\u6da9\u7684\u4e8b\u60c5\uff0c\u4f9d\u8d56\u4e8e\u81ea\u7701\uff0c\u63a7\u5236\u7ee7\u627f\u7b49\u7b49\u3002\u786e\u5b9e\uff0c\u7528\u5143\u7c7b\u6765\u641e\u4e9b\u201c\u9ed1\u6697\u9b54\u6cd5\u201d\u662f\u7279\u522b\u6709\u7528\u7684\uff0c\u56e0\u800c\u4f1a\u641e\u51fa\u4e9b\u590d\u6742\u7684\u4e1c\u897f\u6765\u3002\u4f46\u5c31\u5143\u7c7b\u672c\u8eab\u800c\u8a00\uff0c\u5b83\u4eec\u5176\u5b9e\u662f\u5f88\u7b80\u5355\u7684\uff1a1)\u00a0\u00a0\u62e6\u622a\u7c7b\u7684\u521b\u5efa2)\u00a0\u4fee\u6539\u7c7b3)\u00a0\u8fd4\u56de\u4fee\u6539\u4e4b\u540e\u7684\u7c7b\u00a0\u4e3a\u4ec0\u4e48\u8981\u7528metaclass\u7c7b\u800c\u4e0d\u662f\u51fd\u6570?\u7531\u4e8e__metaclass__\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u53ef\u8c03\u7528\u7684\u5bf9\u8c61\uff0c\u90a3\u4e3a\u4f55\u8fd8\u8981\u4f7f\u7528\u7c7b\u5462\uff0c\u56e0\u4e3a\u5f88\u663e\u7136\u4f7f\u7528\u7c7b\u4f1a\u66f4\u52a0\u590d\u6742\u554a\uff1f\u8fd9\u91cc\u6709\u597d\u51e0\u4e2a\u539f\u56e0\uff1a1\uff09\u00a0\u610f\u56fe\u4f1a\u66f4\u52a0\u6e05\u6670\u3002\u5f53\u4f60\u8bfb\u5230UpperAttrMetaclass(type)\u65f6\uff0c\u4f60\u77e5\u9053\u63a5\u4e0b\u6765\u8981\u53d1\u751f\u4ec0\u4e48\u30022\uff09\u4f60\u53ef\u4ee5\u4f7f\u7528OOP\u7f16\u7a0b\u3002\u5143\u7c7b\u53ef\u4ee5\u4ece\u5143\u7c7b\u4e2d\u7ee7\u627f\u800c\u6765\uff0c\u6539\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u5143\u7c7b\u751a\u81f3\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5143\u7c7b\u30023\uff09\u00a0\u4f60\u53ef\u4ee5\u628a\u4ee3\u7801\u7ec4\u7ec7\u7684\u66f4\u597d\u3002\u5f53\u4f60\u4f7f\u7528\u5143\u7c7b\u7684\u65f6\u5019\u80af\u5b9a\u4e0d\u4f1a\u662f\u50cf\u6211\u4e0a\u9762\u4e3e\u7684\u8fd9\u79cd\u7b80\u5355\u573a\u666f\uff0c\u901a\u5e38\u90fd\u662f\u9488\u5bf9\u6bd4\u8f83\u590d\u6742\u7684\u95ee\u9898\u3002\u5c06\u591a\u4e2a\u65b9\u6cd5\u5f52\u603b\u5230\u4e00\u4e2a\u7c7b\u4e2d\u4f1a\u5f88\u6709\u5e2e\u52a9\uff0c\u4e5f\u4f1a\u4f7f\u5f97\u4ee3\u7801\u66f4\u5bb9\u6613\u9605\u8bfb\u30024\uff09\u4f60\u53ef\u4ee5\u4f7f\u7528__new__,__init__\u4ee5\u53ca__call__\u8fd9\u6837\u7684\u7279\u6b8a\u65b9\u6cd5\u3002\u5b83\u4eec\u80fd\u5e2e\u4f60\u5904\u7406\u4e0d\u540c\u7684\u4efb\u52a1\u3002\u5c31\u7b97\u901a\u5e38\u4f60\u53ef\u4ee5\u628a\u6240\u6709\u7684\u4e1c\u897f\u90fd\u5728__new__\u91cc\u5904\u7406\u6389\uff0c\u6709\u4e9b\u4eba\u8fd8\u662f\u89c9\u5f97\u7528__init__\u66f4\u8212\u670d\u4e9b\u30025\uff09\u54c7\u54e6\uff0c\u8fd9\u4e1c\u897f\u7684\u540d\u5b57\u662fmetaclass\uff0c\u80af\u5b9a\u975e\u5584\u7c7b\uff0c\u6211\u8981\u5c0f\u5fc3\uff01\u00a0\u7a76\u7adf\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u5143\u7c7b\uff1f\u73b0\u5728\u56de\u5230\u6211\u4eec\u7684\u5927\u4e3b\u9898\u4e0a\u6765\uff0c\u7a76\u7adf\u662f\u4e3a\u4ec0\u4e48\u4f60\u4f1a\u53bb\u4f7f\u7528\u8fd9\u6837\u4e00\u79cd\u5bb9\u6613\u51fa\u9519\u4e14\u6666\u6da9\u7684\u7279\u6027\uff1f\u597d\u5427\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u4f60\u6839\u672c\u5c31\u7528\u4e0d\u4e0a\u5b83\uff1a\u201c\u5143\u7c7b\u5c31\u662f\u6df1\u5ea6\u7684\u9b54\u6cd5\uff0c99%\u7684\u7528\u6237\u5e94\u8be5\u6839\u672c\u4e0d\u5fc5\u4e3a\u6b64\u64cd\u5fc3\u3002\u5982\u679c\u4f60\u60f3\u641e\u6e05\u695a\u7a76\u7adf\u662f\u5426\u9700\u8981\u7528\u5230\u5143\u7c7b\uff0c\u90a3\u4e48\u4f60\u5c31\u4e0d\u9700\u8981\u5b83\u3002\u90a3\u4e9b\u5b9e\u9645\u7528\u5230\u5143\u7c7b\u7684\u4eba\u90fd\u975e\u5e38\u6e05\u695a\u5730\u77e5\u9053\u4ed6\u4eec\u9700\u8981\u505a\u4ec0\u4e48\uff0c\u800c\u4e14\u6839\u672c\u4e0d\u9700\u8981\u89e3\u91ca\u4e3a\u4ec0\u4e48\u8981\u7528\u5143\u7c7b\u3002\u201d\u00a0\u2014\u2014Python\u754c\u7684\u9886\u8896TimPeters\u5143\u7c7b\u7684\u4e3b\u8981\u7528\u9014\u662f\u521b\u5efaAPI\u3002\u4e00\u4e2a\u5178\u578b\u7684\u4f8b\u5b50\u662fDjangoORM\u3002\u5b83\u5141\u8bb8\u4f60\u50cf\u8fd9\u6837\u5b9a\u4e49\uff1aPythonclassPerson(models.Model):name=models.CharField(max_length=30)age=models.IntegerField()123classPerson(models.Model):\u00a0\u00a0\u00a0\u00a0name=models.CharField(max_length=30)\u00a0\u00a0\u00a0\u00a0age=models.IntegerField()\u4f46\u662f\u5982\u679c\u4f60\u50cf\u8fd9\u6837\u505a\u7684\u8bdd\uff1aPythonguy=Person(name='bob',age='35')printguy.age12guy\u00a0\u00a0=Person(name='bob',age='35')printguy.age\u8fd9\u5e76\u4e0d\u4f1a\u8fd4\u56de\u4e00\u4e2aIntegerField\u5bf9\u8c61\uff0c\u800c\u662f\u4f1a\u8fd4\u56de\u4e00\u4e2aint\uff0c\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u51fa\u6570\u636e\u3002\u8fd9\u662f\u6709\u53ef\u80fd\u7684\uff0c\u56e0\u4e3amodels.Model\u5b9a\u4e49\u4e86__metaclass__\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u4e00\u4e9b\u9b54\u6cd5\u80fd\u591f\u5c06\u4f60\u521a\u521a\u5b9a\u4e49\u7684\u7b80\u5355\u7684Person\u7c7b\u8f6c\u53d8\u6210\u5bf9\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u590d\u6742hook\u3002Django\u6846\u67b6\u5c06\u8fd9\u4e9b\u770b\u8d77\u6765\u5f88\u590d\u6742\u7684\u4e1c\u897f\u901a\u8fc7\u66b4\u9732\u51fa\u4e00\u4e2a\u7b80\u5355\u7684\u4f7f\u7528\u5143\u7c7b\u7684API\u5c06\u5176\u5316\u7b80\uff0c\u901a\u8fc7\u8fd9\u4e2aAPI\u91cd\u65b0\u521b\u5efa\u4ee3\u7801\uff0c\u5728\u80cc\u540e\u5b8c\u6210\u771f\u6b63\u7684\u5de5\u4f5c\u3002\u00a0\u7ed3\u8bed\u9996\u5148\uff0c\u4f60\u77e5\u9053\u4e86\u7c7b\u5176\u5b9e\u662f\u80fd\u591f\u521b\u5efa\u51fa\u7c7b\u5b9e\u4f8b\u7684\u5bf9\u8c61\u3002\u597d\u5427\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u7c7b\u672c\u8eab\u4e5f\u662f\u5b9e\u4f8b\uff0c\u5f53\u7136\uff0c\u5b83\u4eec\u662f\u5143\u7c7b\u7684\u5b9e\u4f8b\u3002Python>>>classFoo(object):pass>>>id(Foo)142630324123>>>classFoo(object):pass>>>id(Foo)142630324Python\u4e2d\u7684\u4e00\u5207\u90fd\u662f\u5bf9\u8c61\uff0c\u5b83\u4eec\u8981\u4e48\u662f\u7c7b\u7684\u5b9e\u4f8b\uff0c\u8981\u4e48\u662f\u5143\u7c7b\u7684\u5b9e\u4f8b\uff0c\u9664\u4e86type\u3002type\u5b9e\u9645\u4e0a\u662f\u5b83\u81ea\u5df1\u7684\u5143\u7c7b\uff0c\u5728\u7eafPython\u73af\u5883\u4e2d\u8fd9\u53ef\u4e0d\u662f\u4f60\u80fd\u591f\u505a\u5230\u7684\uff0c\u8fd9\u662f\u901a\u8fc7\u5728\u5b9e\u73b0\u5c42\u9762\u800d\u4e00\u4e9b\u5c0f\u624b\u6bb5\u505a\u5230\u7684\u3002\u5176\u6b21\uff0c\u5143\u7c7b\u662f\u5f88\u590d\u6742\u7684\u3002\u5bf9\u4e8e\u975e\u5e38\u7b80\u5355\u7684\u7c7b\uff0c\u4f60\u53ef\u80fd\u4e0d\u5e0c\u671b\u901a\u8fc7\u4f7f\u7528\u5143\u7c7b\u6765\u5bf9\u7c7b\u505a\u4fee\u6539\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5176\u4ed6\u4e24\u79cd\u6280\u672f\u6765\u4fee\u6539\u7c7b\uff1a1\uff09Monkeypatching2)\u00a0classdecorators\u5f53\u4f60\u9700\u8981\u52a8\u6001\u4fee\u6539\u7c7b\u65f6\uff0c99%\u7684\u65f6\u95f4\u91cc\u4f60\u6700\u597d\u4f7f\u7528\u4e0a\u9762\u8fd9\u4e24\u79cd\u6280\u672f\u3002\u5f53\u7136\u4e86\uff0c\u5176\u5b9e\u572899%\u7684\u65f6\u95f4\u91cc\u4f60\u6839\u672c\u5c31\u4e0d\u9700\u8981\u52a8\u6001\u4fee\u6539\u7c7b:D2\u8d5e30\u6536\u85cf15\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1abigship\u7b80\u4ecb\u8fd8\u6ca1\u6765\u5f97\u53ca\u5199:\uff09\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b79"]},
{"art_title": ["\u5b66\u4e60\u7528 Python \u7f16\u7a0b\u65f6\u8981\u907f\u514d\u7684 3 \u4e2a\u9519\u8bef"], "art_url": ["http://python.jobbole.com/88376/"], "art_create_time": ["2017/08/21"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aPeteSavage\u00a0\u00a0\u00a0\u8bd1\u6587\u51fa\u5904\uff1apolebug\u00a0\u00a0\u00a0\u8fd9\u4e9b\u9519\u8bef\u4f1a\u9020\u6210\u5f88\u9ebb\u70e6\u7684\u95ee\u9898\uff0c\u9700\u8981\u6570\u5c0f\u65f6\u624d\u80fd\u89e3\u51b3\u3002\u5f53\u4f60\u505a\u9519\u4e8b\u65f6\uff0c\u627f\u8ba4\u9519\u8bef\u5e76\u4e0d\u662f\u4e00\u4ef6\u5bb9\u6613\u7684\u4e8b\uff0c\u4f46\u662f\u72af\u9519\u662f\u4efb\u4f55\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u65e0\u8bba\u662f\u5b66\u4e60\u8d70\u8def\uff0c\u8fd8\u662f\u5b66\u4e60\u4e00\u79cd\u65b0\u7684\u7f16\u7a0b\u8bed\u8a00\u90fd\u662f\u8fd9\u6837\uff0c\u6bd4\u5982\u5b66\u4e60Python\u3002\u4e3a\u4e86\u8ba9\u521d\u5b66Python\u7684\u7a0b\u5e8f\u5458\u907f\u514d\u72af\u540c\u6837\u7684\u9519\u8bef\uff0c\u4ee5\u4e0b\u5217\u51fa\u4e86\u6211\u5b66\u4e60Python\u65f6\u72af\u7684\u4e09\u79cd\u9519\u8bef\u3002\u8fd9\u4e9b\u9519\u8bef\u8981\u4e48\u662f\u6211\u957f\u671f\u4ee5\u6765\u7ecf\u5e38\u72af\u7684\uff0c\u8981\u4e48\u662f\u9020\u6210\u4e86\u9700\u8981\u51e0\u4e2a\u5c0f\u65f6\u89e3\u51b3\u7684\u9ebb\u70e6\u3002\u5e74\u8f7b\u7684\u7a0b\u5e8f\u5458\u4eec\u53ef\u8981\u6ce8\u610f\u4e86\uff0c\u8fd9\u4e9b\u9519\u8bef\u662f\u4f1a\u6d6a\u8d39\u4e00\u4e0b\u5348\u7684\uff011\u3001\u53ef\u53d8\u6570\u636e\u7c7b\u578b\u4f5c\u4e3a\u51fd\u6570\u5b9a\u4e49\u4e2d\u7684\u9ed8\u8ba4\u53c2\u6570\u8fd9\u4f3c\u4e4e\u662f\u5bf9\u7684\uff1f\u4f60\u5199\u4e86\u4e00\u4e2a\u5c0f\u51fd\u6570\uff0c\u6bd4\u5982\uff0c\u641c\u7d22\u5f53\u524d\u9875\u9762\u4e0a\u7684\u94fe\u63a5\uff0c\u5e76\u53ef\u9009\u5c06\u5176\u9644\u52a0\u5230\u53e6\u4e00\u4e2a\u63d0\u4f9b\u7684\u5217\u8868\u4e2d\u3002Pythondefsearch_for_links(page,add_to=[]):new_links=page.search_for_links()add_to.extend(new_links)returnadd_to1234defsearch_for_links(page,add_to=[]):\u00a0\u00a0\u00a0\u00a0new_links=page.search_for_links()\u00a0\u00a0\u00a0\u00a0add_to.extend(new_links)\u00a0\u00a0\u00a0\u00a0returnadd_to\u4ece\u8868\u9762\u770b\uff0c\u8fd9\u50cf\u662f\u5341\u5206\u6b63\u5e38\u7684Python\u4ee3\u7801\uff0c\u4e8b\u5b9e\u4e0a\u5b83\u4e5f\u662f\uff0c\u800c\u4e14\u662f\u53ef\u4ee5\u8fd0\u884c\u7684\u3002\u4f46\u662f\uff0c\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\u3002\u5982\u679c\u6211\u4eec\u7ed9add_to\u53c2\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5217\u8868\uff0c\u5b83\u5c06\u6309\u7167\u6211\u4eec\u9884\u671f\u7684\u90a3\u6837\u5de5\u4f5c\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u8ba9\u5b83\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e9b\u795e\u5947\u7684\u4e8b\u60c5\u3002\u8bd5\u8bd5\u4e0b\u9762\u7684\u4ee3\u7801\uff1aPythondeffn(var1,var2=[]):var2.append(var1)printvar2fn(3)fn(4)fn(5)123456deffn(var1,var2=[]):\u00a0\u00a0\u00a0\u00a0var2.append(var1)\u00a0\u00a0\u00a0\u00a0printvar2fn(3)fn(4)fn(5)\u53ef\u80fd\u4f60\u8ba4\u4e3a\u6211\u4eec\u5c06\u770b\u5230\uff1aPython[3][4][5]123[3][4][5]\u4f46\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u770b\u5230\u7684\u5374\u662f\uff1aPython[3][3,4][3,4,5]123[3][3,4][3,4,5]\u4e3a\u4ec0\u4e48\u5462\uff1f\u5982\u4f60\u6240\u89c1\uff0c\u6bcf\u6b21\u90fd\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a\u5217\u8868\uff0c\u8f93\u51fa\u4e3a\u4ec0\u4e48\u4f1a\u662f\u8fd9\u6837\uff1f\u5728Python\u4e2d\uff0c\u5f53\u6211\u4eec\u7f16\u5199\u8fd9\u6837\u7684\u51fd\u6570\u65f6\uff0c\u8fd9\u4e2a\u5217\u8868\u88ab\u5b9e\u4f8b\u5316\u4e3a\u51fd\u6570\u5b9a\u4e49\u7684\u4e00\u90e8\u5206\u3002\u5f53\u51fd\u6570\u8fd0\u884c\u65f6\uff0c\u5b83\u5e76\u4e0d\u662f\u6bcf\u6b21\u90fd\u88ab\u5b9e\u4f8b\u5316\u3002\u8fd9\u610f\u5473\u7740\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u4e00\u76f4\u4f7f\u7528\u5b8c\u5168\u4e00\u6837\u7684\u5217\u8868\u5bf9\u8c61\uff0c\u9664\u975e\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff1aPythonfn(3,[4])1fn(3,[4])Python[4,3]1[4,3]\u7b54\u6848\u6b63\u5982\u6211\u4eec\u6240\u60f3\u7684\u90a3\u6837\u3002\u8981\u60f3\u5f97\u5230\u8fd9\u79cd\u7ed3\u679c\uff0c\u6b63\u786e\u7684\u65b9\u6cd5\u662f\uff1aPythondeffn(var1,var2=None):ifnotvar2:var2=[]var2.append(var1)1234deffn(var1,var2=None):\u00a0\u00a0\u00a0\u00a0ifnotvar2:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0var2=[]\u00a0\u00a0\u00a0\u00a0var2.append(var1)\u6216\u662f\u5728\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff1aPythondefsearch_for_links(page,add_to=None):ifnotadd_to:add_to=[]new_links=page.search_for_links()add_to.extend(new_links)returnadd_to123456defsearch_for_links(page,add_to=None):\u00a0\u00a0\u00a0\u00a0ifnotadd_to:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0add_to=[]\u00a0\u00a0\u00a0\u00a0new_links=page.search_for_links()\u00a0\u00a0\u00a0\u00a0add_to.extend(new_links)\u00a0\u00a0\u00a0\u00a0returnadd_to\u8fd9\u5c06\u5728\u6a21\u5757\u52a0\u8f7d\u7684\u65f6\u5019\u79fb\u8d70\u5b9e\u4f8b\u5316\u7684\u5185\u5bb9\uff0c\u4ee5\u4fbf\u6bcf\u6b21\u8fd0\u884c\u51fd\u6570\u65f6\u90fd\u4f1a\u53d1\u751f\u5217\u8868\u5b9e\u4f8b\u5316\u3002\u8bf7\u6ce8\u610f\uff0c\u5bf9\u4e8e\u4e0d\u53ef\u53d8\u6570\u636e\u7c7b\u578b\uff0c\u6bd4\u5982\u5143\u7ec4\u3001\u5b57\u7b26\u4e32\u3001\u6574\u578b\uff0c\u662f\u4e0d\u9700\u8981\u8003\u8651\u8fd9\u79cd\u60c5\u51b5\u7684\u3002\u8fd9\u610f\u5473\u7740\uff0c\u50cf\u4e0b\u9762\u8fd9\u6837\u7684\u4ee3\u7801\u662f\u975e\u5e38\u53ef\u884c\u7684\uff1aPythondeffunc(message=\"mymessage\"):printmessage12deffunc(message=\"mymessage\"):\u00a0\u00a0\u00a0\u00a0printmessage2\u3001\u53ef\u53d8\u6570\u636e\u7c7b\u578b\u4f5c\u4e3a\u7c7b\u53d8\u91cf\u8fd9\u548c\u4e0a\u9762\u63d0\u5230\u7684\u6700\u540e\u4e00\u4e2a\u9519\u8bef\u5f88\u76f8\u50cf\u3002\u601d\u8003\u4ee5\u4e0b\u4ee3\u7801\uff1aPythonclassURLCatcher(object):urls=[]defadd_url(self,url):self.urls.append(url)1234classURLCatcher(object):\u00a0\u00a0\u00a0\u00a0urls=[]\u00a0\u00a0\u00a0\u00a0defadd_url(self,url):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.urls.append(url)\u8fd9\u6bb5\u4ee3\u7801\u770b\u8d77\u6765\u975e\u5e38\u6b63\u5e38\u3002\u6211\u4eec\u6709\u4e00\u4e2a\u50a8\u5b58URL\u7684\u5bf9\u8c61\u3002\u5f53\u6211\u4eec\u8c03\u7528add_url\u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u7ed9\u5b9a\u7684URL\u5230\u5b58\u50a8\u4e2d\u3002\u770b\u8d77\u6765\u975e\u5e38\u6b63\u786e\u5427\uff1f\u8ba9\u6211\u4eec\u770b\u770b\u5b9e\u9645\u662f\u600e\u6837\u7684\uff1aPythona=URLCatcher()a.add_url('http://www.google.com')b=URLCatcher()b.add_url('http://www.bbc.co.hk')1234a=URLCatcher()a.add_url('http://www.google.com')b=URLCatcher()b.add_url('http://www.bbc.co.hk')b.urls\uff1aPython['http://www.google.com','http://www.bbc.co.uk']1['http://www.google.com','http://www.bbc.co.uk']a.urls\uff1aPython['http://www.google.com','http://www.bbc.co.uk']1['http://www.google.com','http://www.bbc.co.uk']\u7b49\u7b49\uff0c\u600e\u4e48\u56de\u4e8b\uff1f\uff01\u6211\u4eec\u60f3\u7684\u4e0d\u662f\u8fd9\u6837\u554a\u3002\u6211\u4eec\u5b9e\u4f8b\u5316\u4e86\u4e24\u4e2a\u5355\u72ec\u7684\u5bf9\u8c61a\u548cb\u3002\u628a\u4e00\u4e2aURL\u7ed9\u4e86a\uff0c\u53e6\u4e00\u4e2a\u7ed9\u4e86b\u3002\u8fd9\u4e24\u4e2a\u5bf9\u8c61\u600e\u4e48\u4f1a\u90fd\u6709\u8fd9\u4e24\u4e2aURL\u5462\uff1f\u8fd9\u548c\u7b2c\u4e00\u4e2a\u9519\u4f8b\u662f\u540c\u6837\u7684\u95ee\u9898\u3002\u521b\u5efa\u7c7b\u5b9a\u4e49\u65f6\uff0cURL\u5217\u8868\u5c06\u88ab\u5b9e\u4f8b\u5316\u3002\u8be5\u7c7b\u6240\u6709\u7684\u5b9e\u4f8b\u4f7f\u7528\u76f8\u540c\u7684\u5217\u8868\u3002\u5728\u6709\u4e9b\u65f6\u5019\u8fd9\u79cd\u60c5\u51b5\u662f\u6709\u7528\u7684\uff0c\u4f46\u5927\u591a\u6570\u65f6\u5019\u4f60\u5e76\u4e0d\u60f3\u8fd9\u6837\u505a\u3002\u4f60\u5e0c\u671b\u6bcf\u4e2a\u5bf9\u8c61\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u50a8\u5b58\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u4fee\u6539\u4ee3\u7801\u4e3a\uff1aPythonclassURLCatcher(object):def__init__(self):self.urls=[]defadd_url(self,url):self.urls.append(url)12345classURLCatcher(object):\u00a0\u00a0\u00a0\u00a0def__init__(self):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.urls=[]\u00a0\u00a0\u00a0\u00a0defadd_url(self,url):\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.urls.append(url)\u73b0\u5728\uff0c\u5f53\u521b\u5efa\u5bf9\u8c61\u65f6\uff0cURL\u5217\u8868\u88ab\u5b9e\u4f8b\u5316\u3002\u5f53\u6211\u4eec\u5b9e\u4f8b\u5316\u4e24\u4e2a\u5355\u72ec\u7684\u5bf9\u8c61\u65f6\uff0c\u5b83\u4eec\u5c06\u5206\u522b\u4f7f\u7528\u4e24\u4e2a\u5355\u72ec\u7684\u5217\u8868\u30023\u3001\u53ef\u53d8\u7684\u5206\u914d\u9519\u8bef\u8fd9\u4e2a\u95ee\u9898\u56f0\u6270\u4e86\u6211\u4e00\u6bb5\u65f6\u95f4\u3002\u8ba9\u6211\u4eec\u505a\u51fa\u4e00\u4e9b\u6539\u53d8\uff0c\u5e76\u4f7f\u7528\u53e6\u4e00\u79cd\u53ef\u53d8\u6570\u636e\u7c7b\u578b\u2013\u5b57\u5178\u3002Pythona={'1':\"one\",'2':'two'}1a={'1':\"one\",'2':'two'}\u73b0\u5728\uff0c\u5047\u8bbe\u6211\u4eec\u60f3\u628a\u8fd9\u4e2a\u5b57\u5178\u7528\u5728\u522b\u7684\u5730\u65b9\uff0c\u4e14\u4fdd\u6301\u5b83\u7684\u521d\u59cb\u6570\u636e\u5b8c\u6574\u3002Pythonb=ab['3']='three'123b=a\u00a0b['3']='three'\u7b80\u5355\u5427\uff1f\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u539f\u6765\u90a3\u4e2a\u6211\u4eec\u4e0d\u60f3\u6539\u53d8\u7684\u5b57\u5178a\uff1aPython'1':\"one\",'2':'two','3':'three'}1'1':\"one\",'2':'two','3':'three'}\u54c7\u7b49\u4e00\u4e0b\uff0c\u6211\u4eec\u518d\u770b\u770bb\uff1fPython{'1':\"one\",'2':'two','3':'three'}1{'1':\"one\",'2':'two','3':'three'}\u7b49\u7b49\uff0c\u4ec0\u4e48\uff1f\u6709\u70b9\u4e71\u2026\u2026\u8ba9\u6211\u4eec\u56de\u60f3\u4e00\u4e0b\uff0c\u770b\u770b\u5176\u5b83\u4e0d\u53ef\u53d8\u7c7b\u578b\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f1a\u53d1\u751f\u4ec0\u4e48\uff0c\u4f8b\u5982\u4e00\u4e2a\u5143\u7ec4\uff1aPythonc=(2,3)d=cd=(4,5)123c=(2,3)d=cd=(4,5)\u73b0\u5728c\u662f(2,3)\uff0c\u800cd\u662f(4,5)\u3002\u8fd9\u4e2a\u51fd\u6570\u7ed3\u679c\u5982\u6211\u4eec\u6240\u6599\u3002\u90a3\u4e48\uff0c\u5728\u4e4b\u524d\u7684\u4f8b\u5b50\u4e2d\u5230\u5e95\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f\u5f53\u4f7f\u7528\u53ef\u53d8\u7c7b\u578b\u65f6\uff0c\u5176\u884c\u4e3a\u6709\u70b9\u50cfC\u8bed\u8a00\u7684\u4e00\u4e2a\u6307\u9488\u3002\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4ee4b=a\uff0c\u6211\u4eec\u771f\u6b63\u8868\u8fbe\u7684\u610f\u601d\u662f\uff1ab\u6210\u4e3aa\u7684\u4e00\u4e2a\u5f15\u7528\u3002\u5b83\u4eec\u90fd\u6307\u5411Python\u5185\u5b58\u4e2d\u7684\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002\u542c\u8d77\u6765\u6709\u4e9b\u719f\u6089\uff1f\u90a3\u662f\u56e0\u4e3a\u8fd9\u4e2a\u95ee\u9898\u4e0e\u5148\u524d\u7684\u76f8\u4f3c\u3002\u5176\u5b9e\uff0c\u8fd9\u7bc7\u6587\u7ae0\u5e94\u8be5\u88ab\u79f0\u4e3a\u300c\u53ef\u53d8\u5f15\u53d1\u7684\u9ebb\u70e6\u300d\u3002\u5217\u8868\u4e5f\u4f1a\u53d1\u751f\u540c\u6837\u7684\u4e8b\u5417\uff1f\u662f\u7684\u3002\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u89e3\u51b3\u5462\uff1f\u8fd9\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002\u5982\u679c\u6211\u4eec\u771f\u7684\u9700\u8981\u590d\u5236\u4e00\u4e2a\u5217\u8868\u8fdb\u884c\u5904\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u505a\uff1aPythonb=a[:]1b=a[:]\u8fd9\u5c06\u904d\u5386\u5e76\u590d\u5236\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5e76\u4e14\u628a\u5b83\u653e\u5728\u4e00\u4e2a\u65b0\u7684\u5217\u8868\u4e2d\u3002\u4f46\u662f\u8981\u6ce8\u610f\uff1a\u5982\u679c\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u662f\u53ef\u53d8\u7684\uff0c\u6211\u4eec\u5c06\u518d\u6b21\u83b7\u5f97\u5b83\u4eec\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u662f\u5b8c\u6574\u7684\u526f\u672c\u3002\u5047\u8bbe\u5728\u4e00\u5f20\u7eb8\u4e0a\u5217\u6e05\u5355\u3002\u5728\u539f\u6765\u7684\u4f8b\u5b50\u4e2d\u76f8\u5f53\u4e8e\uff0cA\u67d0\u548cB\u67d0\u6b63\u5728\u770b\u7740\u540c\u4e00\u5f20\u7eb8\u3002\u5982\u679c\u6709\u4e2a\u4eba\u4fee\u6539\u4e86\u8fd9\u4e2a\u6e05\u5355\uff0c\u4e24\u4e2a\u4eba\u90fd\u5c06\u770b\u5230\u76f8\u540c\u7684\u53d8\u5316\u3002\u5f53\u6211\u4eec\u590d\u5236\u5f15\u7528\u65f6\uff0c\u6bcf\u4e2a\u4eba\u73b0\u5728\u6709\u4e86\u4ed6\u4eec\u81ea\u5df1\u7684\u6e05\u5355\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5047\u8bbe\u8fd9\u4e2a\u6e05\u5355\u5305\u62ec\u5bfb\u627e\u98df\u7269\u7684\u5730\u65b9\u3002\u5982\u679c\u201c\u51b0\u7bb1\u201d\u662f\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\uff0c\u5373\u4f7f\u5b83\u88ab\u590d\u5236\uff0c\u4e24\u4e2a\u5217\u8868\u4e2d\u7684\u6761\u76ee\u4e5f\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u51b0\u7bb1\u3002\u6240\u4ee5\uff0c\u5982\u679c\u51b0\u7bb1\u88abA\u4fee\u6539\uff0c\u5403\u6389\u4e86\u91cc\u9762\u7684\u5927\u86cb\u7cd5\uff0cB\u4e5f\u5c06\u770b\u5230\u8fd9\u4e2a\u86cb\u7cd5\u7684\u6d88\u5931\u3002\u8fd9\u91cc\u6ca1\u6709\u7b80\u5355\u7684\u65b9\u6cd5\u89e3\u51b3\u5b83\u3002\u53ea\u8981\u4f60\u8bb0\u4f4f\u5b83\uff0c\u5e76\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u4e0d\u4f1a\u9020\u6210\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u5f0f\u3002\u5b57\u5178\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u5de5\u4f5c\uff0c\u5e76\u4e14\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u6602\u8d35\u526f\u672c\uff1aPythonb=a.copy()1b=a.copy()\u518d\u6b21\u8bf4\u660e\uff0c\u8fd9\u53ea\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u5178\uff0c\u6307\u5411\u539f\u6765\u5b58\u5728\u7684\u76f8\u540c\u7684\u6761\u76ee\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e24\u4e2a\u76f8\u540c\u7684\u5217\u8868\uff0c\u5e76\u4e14\u6211\u4eec\u4fee\u6539\u5b57\u5178a\u7684\u4e00\u4e2a\u952e\u6307\u5411\u7684\u53ef\u53d8\u5bf9\u8c61\uff0c\u90a3\u4e48\u5728\u5b57\u5178b\u4e2d\u4e5f\u5c06\u770b\u5230\u8fd9\u4e9b\u53d8\u5316\u3002\u53ef\u53d8\u6570\u636e\u7c7b\u578b\u7684\u9ebb\u70e6\u4e5f\u662f\u5b83\u4eec\u5f3a\u5927\u7684\u5730\u65b9\u3002\u4ee5\u4e0a\u90fd\u4e0d\u662f\u5b9e\u9645\u4e2d\u7684\u95ee\u9898\uff1b\u5b83\u4eec\u662f\u4e00\u4e9b\u8981\u6ce8\u610f\u9632\u6b62\u51fa\u73b0\u7684\u95ee\u9898\u3002\u5728\u7b2c\u4e09\u4e2a\u9879\u76ee\u4e2d\u4f7f\u7528\u6602\u8d35\u590d\u5236\u64cd\u4f5c\u4f5c\u4e3a\u89e3\u51b3\u65b9\u6848\u572899%\u7684\u65f6\u5019\u662f\u6ca1\u6709\u5fc5\u8981\u7684\u3002\u4f60\u7684\u7a0b\u5e8f\u6216\u8bb8\u5e94\u8be5\u88ab\u6539\u6539\uff0c\u6240\u4ee5\u5728\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u8fd9\u4e9b\u526f\u672c\u751a\u81f3\u662f\u4e0d\u9700\u8981\u7684\u3002\u7f16\u7a0b\u5feb\u4e50\uff01\u5728\u8bc4\u8bba\u4e2d\u53ef\u4ee5\u968f\u65f6\u63d0\u95ee\u3002\u4f5c\u8005\u7b80\u4ecb\uff1aPeteSavage\u2013Peter\u662f\u4e00\u4f4d\u5145\u6ee1\u6fc0\u60c5\u7684\u5f00\u6e90\u7231\u597d\u8005\uff0c\u5728\u8fc7\u53bb\u5341\u5e74\u91cc\u4e00\u76f4\u5728\u63a8\u5e7f\u548c\u4f7f\u7528\u5f00\u6e90\u4ea7\u54c1\u3002\u4ed6\u4eceUbuntu\u793e\u533a\u5f00\u59cb\uff0c\u5728\u8bb8\u591a\u4e0d\u540c\u7684\u9886\u57df\u81ea\u613f\u53c2\u4e0e\u97f3\u9891\u5236\u4f5c\u9886\u57df\u7684\u7814\u7a76\u5de5\u4f5c\u3002\u5728\u804c\u4e1a\u7ecf\u5386\u65b9\u9762\uff0c\u4ed6\u8d77\u521d\u4f5c\u4e3a\u516c\u53f8\u7684\u7cfb\u7edf\u7ba1\u7406\u5458\uff0c\u5927\u90e8\u5206\u65f6\u95f4\u5728\u7ba1\u7406\u548c\u5efa\u7acb\u6570\u636e\u4e2d\u5fc3\uff0c\u4e4b\u540e\u5728RedHat\u62c5\u4efbCloudForms\u4ea7\u54c1\u7684\u4e3b\u8981\u6d4b\u8bd5\u5de5\u7a0b\u5e08\u30021\u8d5e4\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python \u6807\u51c6\u5e93\u7b14\u8bb0(1) \u2014 String\u6a21\u5757"], "art_url": ["http://python.jobbole.com/88379/"], "art_create_time": ["2017/08/21"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2014/12/6da94dec8f6f96417f14c8291e634580.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aj_hao104\u00a0\u00a0\u00a0String\u6a21\u5757\u5305\u542b\u5927\u91cf\u5b9e\u7528\u5e38\u91cf\u548c\u7c7b\uff0c\u4ee5\u53ca\u4e00\u4e9b\u8fc7\u65f6\u7684\u9057\u7559\u529f\u80fd\uff0c\u5e76\u8fd8\u53ef\u7528\u4f5c\u5b57\u7b26\u4e32\u64cd\u4f5c\u30021.\u5e38\u7528\u65b9\u6cd5\u5e38\u7528\u65b9\u6cd5\u63cf\u8ff0str.capitalize()\u628a\u5b57\u7b26\u4e32\u7684\u9996\u5b57\u6bcd\u5927\u5199str.center(width)\u5c06\u539f\u5b57\u7b26\u4e32\u7528\u7a7a\u683c\u586b\u5145\u6210\u4e00\u4e2a\u957f\u5ea6\u4e3awidth\u7684\u5b57\u7b26\u4e32\uff0c\u539f\u5b57\u7b26\u4e32\u5185\u5bb9\u5c45\u4e2dstr.count(s)\u8fd4\u56de\u5b57\u7b26\u4e32s\u5728str\u4e2d\u51fa\u73b0\u7684\u6b21\u6570str.decode(encoding=\u2019UTF-8\u2019,errors=\u2019strict\u2019)\u4ee5\u6307\u5b9a\u7f16\u7801\u683c\u5f0f\u89e3\u7801\u5b57\u7b26\u4e32str.encode(encoding=\u2019UTF-8\u2019,errors=\u2019strict\u2019)\u4ee5\u6307\u5b9a\u7f16\u7801\u683c\u5f0f\u7f16\u7801\u5b57\u7b26\u4e32str.endswith(s)\u5224\u65ad\u5b57\u7b26\u4e32str\u662f\u5426\u4ee5\u5b57\u7b26\u4e32s\u7ed3\u5c3estr.find(s)\u8fd4\u56de\u5b57\u7b26\u4e32s\u5728\u5b57\u7b26\u4e32str\u4e2d\u7684\u4f4d\u7f6e\u7d22\u5f15\uff0c\u6ca1\u6709\u5219\u8fd4\u56de-1str.index(s)\u548cfind()\u65b9\u6cd5\u4e00\u6837\uff0c\u4f46\u662f\u5982\u679cs\u4e0d\u5b58\u5728\u4e8estr\u4e2d\u5219\u4f1a\u629b\u51fa\u5f02\u5e38str.isalnum()\u5982\u679cstr\u81f3\u5c11\u6709\u4e00\u4e2a\u5b57\u7b26\u5e76\u4e14\u90fd\u662f\u5b57\u6bcd\u6216\u6570\u5b57\u5219\u8fd4\u56deTrue,\u5426\u5219\u8fd4\u56deFalsestr.isalpha()\u5982\u679cstr\u81f3\u5c11\u6709\u4e00\u4e2a\u5b57\u7b26\u5e76\u4e14\u90fd\u662f\u5b57\u6bcd\u5219\u8fd4\u56deTrue,\u5426\u5219\u8fd4\u56deFalsestr.isdigit()\u5982\u679cstr\u53ea\u5305\u542b\u6570\u5b57\u5219\u8fd4\u56deTrue\u5426\u5219\u8fd4\u56deFalsestr.islower()\u5982\u679cstr\u5b58\u5728\u533a\u5206\u5927\u5c0f\u5199\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u90fd\u662f\u5c0f\u5199\u5219\u8fd4\u56deTrue\u5426\u5219\u8fd4\u56deFalsestr.isspace()\u5982\u679cstr\u4e2d\u53ea\u5305\u542b\u7a7a\u683c\uff0c\u5219\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalsestr.istitle()\u5982\u679cstr\u662f\u6807\u9898\u5316\u7684(\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199)\u5219\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalsestr.isupper()\u5982\u679cstr\u5b58\u5728\u533a\u5206\u5927\u5c0f\u5199\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u90fd\u662f\u5927\u5199\u5219\u8fd4\u56deTrue\u5426\u5219\u8fd4\u56deFalsestr.ljust(width)\u8fd4\u56de\u4e00\u4e2a\u539f\u5b57\u7b26\u4e32\u5de6\u5bf9\u9f50\u7684\u5e76\u4f7f\u7528\u7a7a\u683c\u586b\u5145\u81f3\u957f\u5ea6width\u7684\u65b0\u5b57\u7b26\u4e32str.lower()\u8f6c\u6362str\u4e2d\u6240\u6709\u5927\u5199\u5b57\u7b26\u4e3a\u5c0f\u5199str.lstrip()\u53bb\u6389str\u5de6\u8fb9\u7684\u4e0d\u53ef\u89c1\u5b57\u7b26str.partition(s)\u7528s\u5c06str\u5207\u5206\u6210\u4e09\u4e2a\u503cstr.replace(a,b)\u5c06\u5b57\u7b26\u4e32str\u4e2d\u7684a\u66ff\u6362\u6210bstr.rfind(s)\u7c7b\u4f3c\u4e8efind()\u51fd\u6570\uff0c\u4e0d\u8fc7\u662f\u4ece\u53f3\u8fb9\u5f00\u59cb\u67e5\u627estr.rindex(s)\u7c7b\u4f3c\u4e8eindex()\uff0c\u4e0d\u8fc7\u662f\u4ece\u53f3\u8fb9\u5f00\u59cbstr.rjust(width)\u8fd4\u56de\u4e00\u4e2a\u539f\u5b57\u7b26\u4e32\u53f3\u5bf9\u9f50\u7684\u5e76\u4f7f\u7528\u7a7a\u683c\u586b\u5145\u81f3\u957f\u5ea6width\u7684\u65b0\u5b57\u7b26\u4e32str.rpartition(s)\u7c7b\u4f3c\u4e8epartition()\u51fd\u6570,\u4e0d\u8fc7\u662f\u4ece\u53f3\u8fb9\u5f00\u59cb\u67e5\u627estr.rstrip()\u53bb\u6389str\u53f3\u8fb9\u7684\u4e0d\u53ef\u89c1\u5b57\u7b26str.split(s)\u4ee5s\u4e3a\u5206\u9694\u7b26\u5207\u7247strstr.splitlines()\u6309\u7167\u884c\u5206\u9694\uff0c\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u5404\u884c\u4f5c\u4e3a\u5143\u7d20\u7684\u5217\u8868str.startswith(s)\u68c0\u67e5\u5b57\u7b26\u4e32str\u662f\u5426\u662f\u4ee5s\u5f00\u5934\uff0c\u662f\u5219\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalsestr.strip()\u7b49\u4e8e\u540c\u65f6\u6267\u884crstrip()\u548clstrip()str.title()\u8fd4\u56de\u201d\u6807\u9898\u5316\u201d\u7684str,\u6240\u6709\u5355\u8bcd\u90fd\u662f\u4ee5\u5927\u5199\u5f00\u59cb\uff0c\u5176\u4f59\u5b57\u6bcd\u5747\u4e3a\u5c0f\u5199str.upper()\u8fd4\u56destr\u6240\u6709\u5b57\u7b26\u4e3a\u5927\u5199\u7684\u5b57\u7b26\u4e32str.zfill(width)\u8fd4\u56de\u957f\u5ea6\u4e3awidth\u7684\u5b57\u7b26\u4e32\uff0c\u539f\u5b57\u7b26\u4e32str\u53f3\u5bf9\u9f50\uff0c\u524d\u9762\u586b\u514502.\u5b57\u7b26\u4e32\u5e38\u91cf\u5e38\u6570\u542b\u4e49string.ascii_lowercase\u5c0f\u5199\u5b57\u6bcd\u2019abcdefghijklmnopqrstuvwxyz\u2019string.ascii_uppercase\u5927\u5199\u7684\u5b57\u6bcd\u2019ABCDEFGHIJKLMNOPQRSTUVWXYZ\u2019string.ascii_lettersascii_lowercase\u548cascii_uppercase\u5e38\u91cf\u7684\u8fde\u63a5\u4e32string.digits\u6570\u5b570\u52309\u7684\u5b57\u7b26\u4e32:\u20190123456789\u2019string.hexdigits\u5b57\u7b26\u4e32\u20190123456789abcdefABCDEF\u2019string.letters\u5b57\u7b26\u4e32\u2019abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\u2019string.lowercase\u5c0f\u5199\u5b57\u6bcd\u7684\u5b57\u7b26\u4e32\u2019abcdefghijklmnopqrstuvwxyz\u2019string.octdigits\u5b57\u7b26\u4e32\u201901234567\u2019string.punctuation\u6240\u6709\u6807\u70b9\u5b57\u7b26string.printable\u53ef\u6253\u5370\u7684\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\u3002\u5305\u542b\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u6807\u70b9\u7b26\u53f7\u548c\u7a7a\u683cstring.uppercase\u5927\u5b66\u5b57\u6bcd\u7684\u5b57\u7b26\u4e32\u2019ABCDEFGHIJKLMNOPQRSTUVWXYZ\u2019string.whitespace\u7a7a\u767d\u5b57\u7b26\u2018\\t\\n\\x0b\\x0c\\r\u20183.\u5b57\u7b26\u4e32\u6a21\u677fTemplate\u901a\u8fc7string.Template\u53ef\u4ee5\u4e3aPython\u5b9a\u5236\u5b57\u7b26\u4e32\u7684\u66ff\u6362\u6807\u51c6,\u4e0b\u9762\u662f\u5177\u4f53\u5217\u5b50\uff1aPython>>>fromstringimportTemplate>>>s=Template('$wholike$what')>>>prints.substitute(who='i',what='python')ilikepython>>>prints.safe_substitute(who='i')#\u7f3a\u5c11key\u65f6\u4e0d\u4f1a\u629b\u9519ilike$what>>>Template('${who}LikePython').substitute(who='I')#\u5728\u5b57\u7b26\u4e32\u5185\u65f6\u4f7f\u7528{}'ILikePython'12345678910>>>fromstringimportTemplate>>>s=Template('$wholike$what')>>>prints.substitute(who='i',what='python')ilikepython\u00a0>>>prints.safe_substitute(who='i')#\u7f3a\u5c11key\u65f6\u4e0d\u4f1a\u629b\u9519ilike$what\u00a0>>>Template('${who}LikePython').substitute(who='I')#\u5728\u5b57\u7b26\u4e32\u5185\u65f6\u4f7f\u7528{}'ILikePython'Template\u8fd8\u6709\u66f4\u52a0\u9ad8\u7ea7\u7684\u7528\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627fstring.Template,\u91cd\u5199\u53d8\u91cfdelimiter(\u5b9a\u754c\u7b26)\u548cidpattern(\u66ff\u6362\u683c\u5f0f),\u5b9a\u5236\u4e0d\u540c\u5f62\u5f0f\u7684\u6a21\u677f\u3002Pythonimportstringtemplate_text='''Delimiter:$deReplaced:%with_underscoreIngored:%notunderscored'''d={'de':'notreplaced','with_underscore':'replaced','notunderscored':'notreplaced'}classMyTemplate(string.Template):#\u91cd\u5199\u6a21\u677f\u5b9a\u754c\u7b26(delimiter)\u4e3a\"%\",\u66ff\u6362\u6a21\u5f0f(idpattern)\u5fc5\u987b\u5305\u542b\u4e0b\u5212\u7ebf(_)delimiter='%'idpattern='[a-z]+_[a-z]+'printstring.Template(template_text).safe_substitute(d)#\u91c7\u7528\u539f\u6765\u7684Template\u6e32\u67d3printMyTemplate(template_text).safe_substitute(d)#\u4f7f\u7528\u91cd\u5199\u540e\u7684MyTemplate\u6e32\u67d312345678910111213141516importstring\u00a0template_text='''Delimiter:$deReplaced:%with_underscoreIngored:%notunderscored'''\u00a0d={'de':'notreplaced',\u00a0\u00a0\u00a0\u00a0'with_underscore':'replaced',\u00a0\u00a0\u00a0\u00a0'notunderscored':'notreplaced'}\u00a0classMyTemplate(string.Template):\u00a0\u00a0\u00a0\u00a0#\u91cd\u5199\u6a21\u677f\u5b9a\u754c\u7b26(delimiter)\u4e3a\"%\",\u66ff\u6362\u6a21\u5f0f(idpattern)\u5fc5\u987b\u5305\u542b\u4e0b\u5212\u7ebf(_)\u00a0\u00a0\u00a0\u00a0delimiter='%'\u00a0\u00a0\u00a0\u00a0idpattern='[a-z]+_[a-z]+'\u00a0printstring.Template(template_text).safe_substitute(d)\u00a0\u00a0#\u91c7\u7528\u539f\u6765\u7684Template\u6e32\u67d3\u00a0printMyTemplate(template_text).safe_substitute(d)\u00a0\u00a0#\u4f7f\u7528\u91cd\u5199\u540e\u7684MyTemplate\u6e32\u67d3\u8f93\u51fa\uff1aPythonDelimiter:notreplacedReplaced:%with_underscoreIngored:%notunderscoredDelimiter:$deReplaced:replacedIngored:%notunderscored1234567Delimiter:notreplaced\u00a0\u00a0\u00a0\u00a0Replaced:%with_underscore\u00a0\u00a0\u00a0\u00a0Ingored:%notunderscored\u00a0\u00a0\u00a0\u00a0\u00a0Delimiter:$de\u00a0\u00a0\u00a0\u00a0Replaced:replaced\u00a0\u00a0\u00a0\u00a0Ingored:%notunderscored\u539f\u751f\u7684Template\u53ea\u4f1a\u6e32\u67d3\u754c\u5b9a\u7b26\u4e3a$\u7684\u60c5\u51b5\uff0c\u91cd\u5199\u540e\u7684MyTemplate\u4f1a\u6e32\u67d3\u754c\u5b9a\u7b26\u4e3a%\u4e14\u66ff\u6362\u683c\u5f0f\u5e26\u6709\u4e0b\u5212\u7ebf\u7684\u60c5\u51b5\u30024.\u5e38\u7528\u5b57\u7b26\u4e32\u6280\u5de71.\u53cd\u8f6c\u5b57\u7b26\u4e32Python>>>s='1234567890'>>>prints[::-1]0987654321123>>>s='1234567890'>>>prints[::-1]09876543212.\u5173\u4e8e\u5b57\u7b26\u4e32\u94fe\u63a5\u5c3d\u91cf\u4f7f\u7528join()\u94fe\u63a5\u5b57\u7b26\u4e32\uff0c\u56e0\u4e3a\u2019+\u2019\u53f7\u8fde\u63a5n\u4e2a\u5b57\u7b26\u4e32\u9700\u8981\u7533\u8bf7n-1\u6b21\u5185\u5b58,\u4f7f\u7528join()\u9700\u8981\u7533\u8bf71\u6b21\u5185\u5b58\u30023.\u56fa\u5b9a\u957f\u5ea6\u5206\u5272\u5b57\u7b26\u4e32Python>>>importre>>>s='1234567890'>>>re.findall(r'.{1,3}',s)#\u5df2\u4e09\u4e2a\u957f\u5ea6\u5206\u5272\u5b57\u7b26\u4e32['123','456','789','0']1234>>>importre>>>s='1234567890'>>>re.findall(r'.{1,3}',s)\u00a0\u00a0#\u5df2\u4e09\u4e2a\u957f\u5ea6\u5206\u5272\u5b57\u7b26\u4e32['123','456','789','0']4.\u4f7f\u7528()\u62ec\u53f7\u751f\u6210\u5b57\u7b26\u4e32Pythonsql=('SELECTcount()FROMtable''WHEREid=\"10\"''GROUPBYsex')printsqlSELECTcount()FROMtableWHEREid=\"10\"GROUPBYsex1234567sql=('SELECTcount()FROMtable'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'WHEREid=\"10\"'\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'GROUPBYsex')\u00a0printsql\u00a0SELECTcount()FROMtableWHEREid=\"10\"GROUPBYsex5.\u5c06print\u7684\u5b57\u7b26\u4e32\u5199\u5230\u6587\u4ef6Python>>>print>>open(\"somefile.txt\",\"w+\"),\"HelloWorld\"#HelloWorld\u5c06\u5199\u5165\u6587\u4ef6somefile.txt1>>>print>>open(\"somefile.txt\",\"w+\"),\"HelloWorld\"\u00a0\u00a0#HelloWorld\u5c06\u5199\u5165\u6587\u4ef6somefile.txt1\u8d5e4\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["\u7528 Python \u505a\u80a1\u5e02\u6570\u636e\u5206\u6790\uff082\uff09"], "art_url": ["http://python.jobbole.com/88256/"], "art_create_time": ["2017/08/21"], "art_img": ["http://wx1.sinaimg.cn/mw690/6941baebly1firhyecbjvj20iw0bawen.jpg"], "art_content": ["\u672c\u6587\u7531\u4f2f\u4e50\u5728\u7ebf-\u5c0f\u7c73\u4e91\u8c46\u7ca5\u7ffb\u8bd1\u3002\u672a\u7ecf\u8bb8\u53ef\uff0c\u7981\u6b62\u8f6c\u8f7d\uff01\u82f1\u6587\u51fa\u5904\uff1aCurtisMiller\u3002\u6b22\u8fce\u52a0\u5165\u7ffb\u8bd1\u7ec4\u3002\u8fd9\u7bc7\u535a\u6587\u662f\u7528Python\u5206\u6790\u80a1\u5e02\u6570\u636e\u7cfb\u5217\u4e24\u90e8\u4e2d\u7684\u7b2c\u4e8c\u90e8\uff0c\u5185\u5bb9\u57fa\u4e8e\u6211\u5728\u72b9\u4ed6\u5927\u5b66\u6570\u5b663900(\u6570\u636e\u79d1\u5b66)\u7684\u8bfe\u7a0b\uff08\u9605\u8bfb\u7b2c\u4e00\u90e8\u5206\uff09\u3002\u5728\u8fd9\u4e24\u7bc7\u535a\u6587\u4e2d\uff0c\u6211\u4f1a\u8ba8\u8bba\u4e00\u4e9b\u57fa\u7840\u77e5\u8bc6\uff0c\u5305\u62ec\u6bd4\u5982\u5982\u4f55\u7528pandas\u4ece\u96c5\u864e\u8d22\u7ecf\u83b7\u5f97\u6570\u636e\uff0c\u53ef\u89c6\u5316\u80a1\u5e02\u6570\u636e\uff0c\u5e73\u5747\u6570\u6307\u6807\u7684\u5b9a\u4e49\uff0c\u8bbe\u8ba1\u79fb\u52a8\u5e73\u5747\u4ea4\u6c47\u70b9\u5206\u6790\u79fb\u52a8\u5e73\u5747\u7ebf\u7684\u65b9\u6cd5\uff0c\u56de\u6eaf\u6d4b\u8bd5\u548c\u57fa\u51c6\u5206\u6790\u6cd5\u3002\u8fd9\u7bc7\u6587\u7ae0\u4f1a\u8ba8\u8bba\u5982\u4f55\u8bbe\u8ba1\u7528\u79fb\u52a8\u5e73\u5747\u4ea4\u6c47\u70b9\u5206\u6790\u79fb\u52a8\u5e73\u5747\u7ebf\u7684\u7cfb\u7edf\uff0c\u5982\u4f55\u505a\u56de\u6eaf\u6d4b\u8bd5\u548c\u57fa\u51c6\u5206\u6790\uff0c\u6700\u540e\u7559\u6709\u4e00\u4e9b\u7ec3\u4e60\u9898\u4ee5\u98e8\u8bfb\u8005\u3002\u6ce8\u610f\uff1a\u672c\u6587\u4ec5\u4ee3\u8868\u4f5c\u8005\u672c\u4eba\u7684\u89c2\u70b9\u3002\u6587\u4e2d\u7684\u5185\u5bb9\u4e0d\u5e94\u8be5\u88ab\u5f53\u505a\u7ecf\u6d4e\u5efa\u8bae\u3002\u6211\u4e0d\u5bf9\u6587\u4e2d\u4ee3\u7801\u8d1f\u8d23\uff0c\u53d6\u7528\u8005\u81ea\u5df1\u8d1f\u8d23\u4ea4\u6613\u7b56\u7565\u5728\u7279\u5b9a\u7684\u9884\u671f\u6761\u4ef6\u8fbe\u6210\u65f6\u4e00\u4e2a\u5f00\u653e\u5934\u5bf8\u4f1a\u88ab\u5173\u95ed\u3002\u591a\u5934\u5934\u5bf8\u8868\u793a\u4ea4\u6613\u4e2d\u9700\u8981\u91d1\u878d\u5546\u54c1\u4ef7\u683c\u4e0a\u5347\u624d\u80fd\u4ea7\u751f\u76c8\u5229\uff0c\u7a7a\u5934\u5934\u5bf8\u8868\u793a\u4ea4\u6613\u4e2d\u9700\u8981\u91d1\u878d\u5546\u54c1\u4ef7\u683c\u4e0b\u964d\u624d\u80fd\u4ea7\u751f\u76c8\u5229\u3002\u5728\u80a1\u7968\u4ea4\u6613\u4e2d\uff0c\u591a\u5934\u5934\u5bf8\u662f\u725b\u5e02\uff0c\u7a7a\u5934\u5934\u5bf8\u662f\u718a\u5e02\uff0c\u53cd\u4e4b\u5219\u4e0d\u6210\u7acb\u3002\uff08\u80a1\u7968\u671f\u6743\u4ea4\u6613\u4e2d\u8fd9\u4e2a\u975e\u5e38\u5178\u578b\uff09\u4f8b\u5982\u4f60\u5728\u9884\u8ba1\u80a1\u4ef7\u4e0a\u6da8\u7684\u60c5\u51b5\u4e0b\u8d2d\u5165\u80a1\u7968\uff0c\u5e76\u8ba1\u5212\u5728\u80a1\u7968\u4ef7\u683c\u4e0a\u6da8\u9ad8\u4e8e\u8d2d\u5165\u4ef7\u65f6\u629b\u51fa\uff0c\u8fd9\u5c31\u662f\u591a\u5934\u5934\u5bf8\u3002\u5c31\u662f\u8bf4\u4f60\u6301\u6709\u4e00\u5b9a\u7684\u91d1\u878d\u4ea7\u54c1\uff0c\u5982\u679c\u5b83\u4eec\u4ef7\u683c\u4e0a\u6da8\uff0c\u4f60\u5c06\u4f1a\u83b7\u5229\uff0c\u5e76\u4e14\u6ca1\u6709\u4e0a\u9650\uff1b\u5982\u679c\u5b83\u4eec\u4ef7\u683c\u4e0b\u964d\uff0c\u4f60\u4f1a\u4e8f\u635f\u3002\u7531\u4e8e\u80a1\u7968\u4ef7\u683c\u4e0d\u4f1a\u4e3a\u8d1f\uff0c\u4e8f\u635f\u662f\u6709\u9650\u5ea6\u7684\u3002\u76f8\u53cd\u7684\uff0c\u5982\u679c\u4f60\u9884\u8ba1\u80a1\u4ef7\u4f1a\u4e0b\u8dcc\uff0c\u5c31\u4ece\u4ea4\u6613\u516c\u53f8\u501f\u8d37\u80a1\u7968\u7136\u540e\u5356\u51fa\uff0c\u540c\u65f6\u671f\u5f85\u672a\u6765\u80a1\u7968\u4ef7\u683c\u4e0b\u964d\u540e\u518d\u4f4e\u4ef7\u4e70\u5165\u8fd8\u8d37\u6765\u8d5a\u53d6\u5dee\u989d\uff0c\u8fd9\u5c31\u662f\u7a7a\u5934\u80a1\u7968\u3002\u5982\u679c\u80a1\u4ef7\u4e0b\u8dcc\u4f60\u4f1a\u83b7\u5229\u3002\u7a7a\u5934\u5934\u5bf8\u7684\u83b7\u5229\u989d\u5ea6\u53d7\u80a1\u4ef7\u6240\u9650\uff08\u6700\u4f73\u60c5\u51b5\u5c31\u662f\u80a1\u7968\u53d8\u5f97\u4e00\u6587\u4e0d\u503c\uff0c\u4f60\u4e0d\u7528\u82b1\u94b1\u5c31\u80fd\u5c06\u5b83\u4eec\u4e70\u56de\u6765\uff09\uff0c\u800c\u635f\u5931\u5374\u6ca1\u6709\u4e0b\u9650\uff0c\u56e0\u4e3a\u4f60\u6709\u53ef\u80fd\u9700\u8981\u82b1\u5f88\u591a\u94b1\u624d\u80fd\u4e70\u56de\u80a1\u7968\u3002\u6240\u4ee5\u4ea4\u6362\u6240\u53ea\u4f1a\u5728\u786e\u5b9a\u6295\u8d44\u8005\u6709\u5f88\u597d\u7684\u7ecf\u6d4e\u57fa\u7840\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u8ba9\u4ed6\u4eec\u7a7a\u5934\u501f\u8d37\u80a1\u7968\u3002\u6240\u6709\u80a1\u6c11\u90fd\u5e94\u8be5\u51b3\u5b9a\u4ed6\u5728\u6bcf\u4e00\u80a1\u4e0a\u53ef\u4ee5\u5192\u591a\u5927\u7684\u98ce\u9669\u3002\u6bd4\u5982\u6709\u4eba\u51b3\u5b9a\u65e0\u8bba\u4ec0\u4e48\u60c5\u51b5\u4ed6\u90fd\u4e0d\u4f1a\u5728\u67d0\u4e00\u6b21\u4ea4\u6613\u4e2d\u6295\u5165\u603b\u989d\u768410%\u53bb\u5192\u9669\u3002\u540c\u65f6\u5728\u4ea4\u6613\u4e2d\uff0c\u80a1\u6c11\u8981\u6709\u4e00\u4e2a\u64a4\u51fa\u7b56\u7565\uff0c\u8fd9\u662f\u8ba9\u80a1\u6c11\u9000\u51fa\u5934\u5bf8\u7684\u5404\u79cd\u6761\u4ef6\u3002\u80a1\u6c11\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u76ee\u6807\uff0c\u8fd9\u662f\u5bfc\u81f4\u80a1\u6c11\u9000\u51fa\u5934\u5bf8\u7684\u6700\u5c0f\u76c8\u5229\u989d\u3002\u540c\u6837\u7684\uff0c\u80a1\u6c11\u4e5f\u9700\u8981\u6709\u4e00\u4e2a\u4ed6\u80fd\u627f\u53d7\u7684\u6700\u5927\u635f\u5931\u989d\u5ea6\u3002\u5f53\u9884\u8ba1\u635f\u5931\u5927\u4e8e\u53ef\u627f\u53d7\u989d\u5ea6\u65f6\uff0c\u80a1\u6c11\u5e94\u8be5\u9000\u51fa\u5934\u5bf8\u4ee5\u907f\u514d\u66f4\u5927\u635f\u5931\uff08\u8fd9\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u505c\u6b62\u635f\u5931\u59d4\u6258\u6765\u907f\u514d\u672a\u6765\u7684\u635f\u5931\uff09\u3002\u6211\u4eec\u8981\u8bbe\u8ba1\u4e00\u4e2a\u4ea4\u6613\u7b56\u7565\uff0c\u5b83\u5305\u542b\u7528\u4e8e\u5feb\u901f\u4ea4\u6613\u7684\u4ea4\u6613\u6fc0\u53d1\u4fe1\u53f7\u3001\u51b3\u5b9a\u4ea4\u6613\u989d\u5ea6\u7684\u89c4\u5219\u548c\u5b8c\u6574\u7684\u9000\u51fa\u7b56\u7565\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u8bbe\u8ba1\u5e76\u8bc4\u4f30\u8be5\u4ea4\u6613\u7b56\u7565\u3002\u5047\u8bbe\u6bcf\u6b21\u4ea4\u6613\u91d1\u989d\u5360\u603b\u989d\u7684\u6bd4\u4f8b\u662f\u56fa\u5b9a\u7684\uff0810%\uff09\u3002\u540c\u65f6\u8bbe\u5b9a\u5728\u6bcf\u4e00\u6b21\u4ea4\u6613\u4e2d\uff0c\u5982\u679c\u635f\u5931\u8d85\u8fc7\u4e8620%\u7684\u4ea4\u6613\u503c\uff0c\u6211\u4eec\u5c31\u9000\u51fa\u5934\u5bf8\u3002\u73b0\u5728\u6211\u4eec\u8981\u51b3\u5b9a\u4ec0\u4e48\u65f6\u5019\u8fdb\u5165\u5934\u5bf8\uff0c\u4ec0\u4e48\u65f6\u5019\u9000\u51fa\u4ee5\u4fdd\u8bc1\u76c8\u5229\u3002\u8fd9\u91cc\u6211\u8981\u6f14\u793a\u79fb\u52a8\u5e73\u5747\u4ea4\u6c47\u70b9\u5206\u6790\u79fb\u52a8\u5e73\u5747\u7ebf\u7684\u65b9\u6cd5\u3002\u6211\u4f1a\u4f7f\u7528\u4e24\u6761\u79fb\u52a8\u5e73\u5747\u7ebf\uff0c\u4e00\u6761\u5feb\u901f\u7684\uff0c\u53e6\u4e00\u6761\u662f\u6162\u901f\u7684\u3002\u6211\u4eec\u7684\u7b56\u7565\u662f\uff1a\u5f53\u5feb\u901f\u79fb\u52a8\u5e73\u5747\u7ebf\u548c\u6162\u901f\u79fb\u52a8\u7ebf\u4ea4\u6c47\u65f6\u5f00\u59cb\u4ea4\u6613\u5f53\u5feb\u901f\u79fb\u52a8\u5e73\u5747\u7ebf\u548c\u6162\u901f\u79fb\u52a8\u7ebf\u518d\u6b21\u4ea4\u6c47\u65f6\u505c\u6b62\u4ea4\u6613\u505a\u591a\u662f\u6307\u5728\u5feb\u901f\u5e73\u5747\u7ebf\u4e0a\u5347\u5230\u6162\u901f\u5e73\u5747\u7ebf\u4e4b\u4e0a\u65f6\u5f00\u59cb\u4ea4\u6613\uff0c\u5f53\u5feb\u901f\u5e73\u5747\u7ebf\u4e0b\u964d\u5230\u6162\u901f\u5e73\u5747\u7ebf\u4e4b\u4e0b\u65f6\u505c\u6b62\u4ea4\u6613\u3002\u5356\u7a7a\u6b63\u597d\u76f8\u53cd\uff0c\u5b83\u662f\u6307\u5728\u5feb\u901f\u5e73\u5747\u7ebf\u4e0b\u964d\u5230\u6162\u901f\u5e73\u5747\u7ebf\u4e4b\u4e0b\u65f6\u5f00\u59cb\u4ea4\u6613\uff0c\u5feb\u901f\u5e73\u5747\u7ebf\u4e0a\u5347\u5230\u6162\u901f\u5e73\u5747\u7ebf\u4e4b\u4e0a\u65f6\u505c\u6b62\u4ea4\u6613\u3002\u73b0\u5728\u6211\u4eec\u6709\u4e00\u6574\u5957\u7b56\u7565\u4e86\u3002\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\u6211\u4eec\u9700\u8981\u5148\u505a\u4e00\u4e0b\u6d4b\u8bd5\u3002\u56de\u6eaf\u6d4b\u8bd5\u662f\u4e00\u4e2a\u5e38\u7528\u7684\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u5b83\u4f7f\u7528\u5386\u53f2\u6570\u636e\u6765\u770b\u7b56\u7565\u662f\u5426\u4f1a\u76c8\u5229\u3002\u4f8b\u5982\u8fd9\u5f20\u82f9\u679c\u516c\u53f8\u7684\u80a1\u7968\u4ef7\u503c\u56fe\uff0c\u5982\u679c20\u5929\u7684\u79fb\u52a8\u5e73\u5747\u662f\u5feb\u901f\u7ebf\uff0c50\u5929\u7684\u79fb\u52a8\u5e73\u5747\u662f\u6162\u901f\u7ebf\uff0c\u90a3\u4e48\u6211\u4eec\u8fd9\u4e2a\u7b56\u7565\u4e0d\u662f\u5f88\u6323\u94b1\uff0c\u81f3\u5c11\u5728\u4f60\u4e00\u76f4\u505a\u591a\u5934\u5934\u5bf8\u7684\u65f6\u5019\u3002\u4e0b\u9762\u8ba9\u6211\u4eec\u6765\u81ea\u52a8\u5316\u56de\u6eaf\u6d4b\u8bd5\u7684\u8fc7\u7a0b\u3002\u9996\u5148\u6211\u4eec\u8981\u8bc6\u522b\u4ec0\u4e48\u65f6\u501920\u5929\u5e73\u5747\u7ebf\u572850\u5929\u4e4b\u4e0b\uff0c\u4ee5\u53ca\u4e4b\u4e0a\u3002Pythonapple['20d-50d']=apple['20d']-apple['50d']apple.tail()12apple['20d-50d']=apple['20d']-apple['50d']apple.tail()OpenHighLowCloseVolumeAdjClose20d50d200d20d-50dDate2016-08-26107.410004107.949997106.309998106.94000227766300106.940002107.87101.51102.736.362016-08-29106.620003107.440002106.290001106.82000024970300106.820000107.91101.74102.686.172016-08-30105.800003106.500000105.500000106.00000024863900106.000000107.98101.96102.636.022016-08-31105.660004106.570000105.639999106.09999829662400106.099998108.00102.16102.605.842016-09-01106.139999106.800003105.620003106.73000326643600106.730003108.04102.39102.565.65\u6211\u4eec\u5c06\u5dee\u5f02\u7684\u7b26\u53f7\u79f0\u4e3a\u72b6\u6001\u8f6c\u6362\u3002\u5feb\u901f\u79fb\u52a8\u5e73\u5747\u7ebf\u5728\u6162\u901f\u79fb\u52a8\u5e73\u5747\u7ebf\u4e4b\u4e0a\u4ee3\u8868\u725b\u5e02\u72b6\u6001\uff1b\u76f8\u53cd\u5219\u4e3a\u718a\u5e02\u3002\u4ee5\u4e0b\u7684\u4ee3\u7801\u7528\u4e8e\u8bc6\u522b\u72b6\u6001\u8f6c\u6362\u3002Python#np.where()isavectorizedif-elsefunction,whereaconditionischeckedforeachcomponentofavector,andthefirstargumentpassedisusedwhentheconditionholds,andtheotherpassedifitdoesnotapple[\"Regime\"]=np.where(apple['20d-50d']>0,1,0)#Wehave1'sforbullishregimesand0'sforeverythingelse.BelowIreplacebearishregimes'svalueswith-1,andtomaintaintherestofthevector,thesecondargumentisapple[\"Regime\"]apple[\"Regime\"]=np.where(apple['20d-50d']<0,-1,apple[\"Regime\"])apple.loc['2016-01-01':'2016-08-07',\"Regime\"].plot(ylim=(-2,2)).axhline(y=0,color=\"black\",lw=2)12345#np.where()isavectorizedif-elsefunction,whereaconditionischeckedforeachcomponentofavector,andthefirstargumentpassedisusedwhentheconditionholds,andtheotherpassedifitdoesnotapple[\"Regime\"]=np.where(apple['20d-50d']>0,1,0)#Wehave1'sforbullishregimesand0'sforeverythingelse.BelowIreplacebearishregimes'svalueswith-1,andtomaintaintherestofthevector,thesecondargumentisapple[\"Regime\"]apple[\"Regime\"]=np.where(apple['20d-50d']<0,-1,apple[\"Regime\"])apple.loc['2016-01-01':'2016-08-07',\"Regime\"].plot(ylim=(-2,2)).axhline(y=0,color=\"black\",lw=2)Pythonapple[\"Regime\"].plot(ylim=(-2,2)).axhline(y=0,color=\"black\",lw=2)1apple[\"Regime\"].plot(ylim=(-2,2)).axhline(y=0,color=\"black\",lw=2)Pythonapple[\"Regime\"].value_counts()1apple[\"Regime\"].value_counts()Python1966-1663050Name:Regime,dtype:int6412341\u00a0\u00a0\u00a0\u00a0966-1\u00a0\u00a0\u00a0\u00a06630\u00a0\u00a0\u00a0\u00a050Name:Regime,dtype:int64\u4ece\u4e0a\u9762\u7684\u66f2\u7ebf\u53ef\u4ee5\u770b\u5230\u6709966\u5929\u82f9\u679c\u516c\u53f8\u7684\u80a1\u7968\u662f\u725b\u5e02\uff0c663\u5929\u662f\u718a\u5e02\uff0c\u670954\u5929\u6ca1\u6709\u503e\u5411\u6027\u3002\uff08\u539f\u6587\u4e2d\u725b\u5e02\u548c\u718a\u5e02\u8bf4\u53cd\u4e86\uff0c\u8bd1\u6587\u4e2d\u66f4\u6b63\uff1b\u539f\u6587\u6570\u5b57\u8ddf\u4ee3\u7801\u7ed3\u679c\u5bf9\u4e0d\u4e0a\uff0c\u8bd1\u6587\u6309\u7167\u4ee3\u7801\u7ed3\u679c\u66f4\u6b63\uff09\u4ea4\u6613\u4fe1\u53f7\u51fa\u73b0\u5728\u72b6\u6001\u8f6c\u6362\u4e4b\u65f6\u3002\u725b\u5e02\u51fa\u73b0\u65f6\uff0c\u4e70\u5165\u4fe1\u53f7\u88ab\u6fc0\u6d3b\uff1b\u725b\u5e02\u5b8c\u7ed3\u65f6\uff0c\u5356\u51fa\u4fe1\u53f7\u88ab\u6fc0\u6d3b\u3002\u540c\u6837\u7684\uff0c\u718a\u5e02\u51fa\u73b0\u65f6\u5356\u51fa\u4fe1\u53f7\u88ab\u6fc0\u6d3b\uff0c\u718a\u5e02\u7ed3\u675f\u65f6\uff0c\u4e70\u5165\u4fe1\u53f7\u88ab\u6fc0\u6d3b\u3002\uff08\u53ea\u6709\u5728\u4f60\u7a7a\u5934\u80a1\u7968\uff0c\u6216\u8005\u4f7f\u7528\u4e00\u4e9b\u5176\u4ed6\u7684\u65b9\u6cd5\u4f8b\u5982\u7528\u80a1\u7968\u671f\u6743\u8d4c\u5e02\u573a\u7684\u65f6\u5019\u8fd9\u79cd\u60c5\u51b5\u624d\u5bf9\u4f60\u6709\u5229\uff09Python#Toensurethatalltradescloseout,Itemporarilychangetheregimeofthelastrowto0regime_orig=apple.ix[-1,\"Regime\"]apple.ix[-1,\"Regime\"]=0apple[\"Signal\"]=np.sign(apple[\"Regime\"]-apple[\"Regime\"].shift(1))#Restoreoriginalregimedataapple.ix[-1,\"Regime\"]=regime_origapple.tail()1234567#Toensurethatalltradescloseout,Itemporarilychangetheregimeofthelastrowto0regime_orig=apple.ix[-1,\"Regime\"]apple.ix[-1,\"Regime\"]=0apple[\"Signal\"]=np.sign(apple[\"Regime\"]-apple[\"Regime\"].shift(1))#Restoreoriginalregimedataapple.ix[-1,\"Regime\"]=regime_origapple.tail()OpenHighLowCloseVolumeAdjClose20d50d200d20d-50dRegimeSignalDate2016-08-26107.410004107.949997106.309998106.94000227766300106.940002107.87101.51102.736.361.00.02016-08-29106.620003107.440002106.290001106.82000024970300106.820000107.91101.74102.686.171.00.02016-08-30105.800003106.500000105.500000106.00000024863900106.000000107.98101.96102.636.021.00.02016-08-31105.660004106.570000105.639999106.09999829662400106.099998108.00102.16102.605.841.00.02016-09-01106.139999106.800003105.620003106.73000326643600106.730003108.04102.39102.565.651.0-1.0Pythonapple[\"Signal\"].plot(ylim=(-2,2))1apple[\"Signal\"].plot(ylim=(-2,2))Pythonapple[\"Signal\"].value_counts()1apple[\"Signal\"].value_counts()Python0.01637-1.0211.020Name:Signal,dtype:int6412340.0\u00a0\u00a0\u00a0\u00a01637-1.0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0211.0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a020Name:Signal,dtype:int64\u6211\u4eec\u4f1a\u4e70\u5165\u82f9\u679c\u516c\u53f8\u7684\u80a1\u796820\u6b21\uff0c\u629b\u51fa21\u6b21\uff08\u539f\u6587\u6570\u5b57\u8ddf\u4ee3\u7801\u7ed3\u679c\u4e0d\u7b26\uff0c\u8bd1\u6587\u6839\u636e\u4ee3\u7801\u7ed3\u679c\u66f4\u6b63\uff09\u3002\u5982\u679c\u6211\u4eec\u53ea\u9009\u4e86\u82f9\u679c\u516c\u53f8\u7684\u80a1\u7968\uff0c\u516d\u5e74\u5185\u53ea\u670921\u6b21\u4ea4\u6613\u53d1\u751f\u3002\u5982\u679c\u6bcf\u6b21\u591a\u5934\u8f6c\u7a7a\u5934\u7684\u65f6\u5019\u6211\u4eec\u90fd\u91c7\u53d6\u884c\u52a8\uff0c\u6211\u4eec\u5c06\u4f1a\u53c2\u4e0e21\u6b21\u4ea4\u6613\u3002\uff08\u8bf7\u8bb0\u4f4f\u4ea4\u6613\u6b21\u6570\u4e0d\u662f\u8d8a\u591a\u8d8a\u597d\uff0c\u6bd5\u7adf\u4ea4\u6613\u4e0d\u662f\u514d\u8d39\u7684\uff09\u4f60\u4e5f\u8bb8\u6ce8\u610f\u5230\u4e86\u8fd9\u4e2a\u7cfb\u7edf\u4e0d\u662f\u5f88\u7a33\u5b9a\u3002\u5feb\u901f\u5e73\u5747\u7ebf\u5728\u6162\u901f\u5e73\u5747\u7ebf\u4e4b\u4e0a\u5c31\u6fc0\u53d1\u4ea4\u6613\uff0c\u5373\u4f7f\u8fd9\u4e2a\u72b6\u6001\u53ea\u662f\u77ed\u77ed\u4e00\u77ac\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u4ea4\u6613\u9a6c\u4e0a\u7ec8\u6b62\uff08\u8fd9\u6837\u5e76\u4e0d\u597d\u56e0\u4e3a\u73b0\u5b9e\u4e2d\u6bcf\u6b21\u4ea4\u6613\u90fd\u8981\u4ed8\u8d39\uff0c\u8fd9\u4e2a\u8d39\u7528\u4f1a\u5f88\u5feb\u6d88\u8017\u6389\u6536\u76ca\uff09\u3002\u540c\u65f6\u6240\u6709\u7684\u725b\u5e02\u77ac\u95f4\u8f6c\u4e3a\u718a\u5e02\uff0c\u5982\u679c\u4f60\u5141\u8bb8\u540c\u65f6\u62bc\u718a\u5e02\u548c\u725b\u5e02\uff0c\u90a3\u5c31\u4f1a\u51fa\u73b0\u6bcf\u6b21\u4ea4\u6613\u7ed3\u675f\u5c31\u81ea\u52a8\u6fc0\u53d1\u53e6\u4e00\u573a\u62bc\u76f8\u53cd\u65b9\u5411\u4ea4\u6613\u7684\u8be1\u5f02\u60c5\u51b5\u3002\u66f4\u597d\u7684\u7cfb\u7edf\u4f1a\u8981\u6c42\u6709\u66f4\u591a\u7684\u8bc1\u636e\u6765\u8bc1\u660e\u5e02\u573a\u7684\u53d1\u5c55\u65b9\u5411\uff0c\u4f46\u662f\u8fd9\u91cc\u6211\u4eec\u4e0d\u53bb\u8ffd\u7a76\u90a3\u4e2a\u7ec6\u8282\u3002\u4e0b\u9762\u6211\u4eec\u6765\u770b\u770b\u6bcf\u6b21\u4e70\u5165\u5356\u51fa\u65f6\u5019\u7684\u80a1\u7968\u4ef7\u683c\u3002Pythonapple.loc[apple[\"Signal\"]==1,\"Close\"]1apple.loc[apple[\"Signal\"]==1,\"Close\"]PythonDate2010-03-16224.4499972010-06-18274.0700112010-09-20283.2300072011-05-12346.5699882011-07-14357.7700042011-12-28402.6400032012-06-25570.7700202013-05-17433.2600102013-07-31452.5299842013-10-16501.1100012014-03-26539.7799912014-04-25571.9399802014-08-1899.1600042014-10-28106.7399982015-02-05119.9400022015-04-28130.5599982015-10-27114.5500032016-03-11102.2600022016-07-0195.8899992016-07-2597.339996Name:Close,dtype:float6412345678910111213141516171819202122Date2010-03-16\u00a0\u00a0\u00a0\u00a0224.4499972010-06-18\u00a0\u00a0\u00a0\u00a0274.0700112010-09-20\u00a0\u00a0\u00a0\u00a0283.2300072011-05-12\u00a0\u00a0\u00a0\u00a0346.5699882011-07-14\u00a0\u00a0\u00a0\u00a0357.7700042011-12-28\u00a0\u00a0\u00a0\u00a0402.6400032012-06-25\u00a0\u00a0\u00a0\u00a0570.7700202013-05-17\u00a0\u00a0\u00a0\u00a0433.2600102013-07-31\u00a0\u00a0\u00a0\u00a0452.5299842013-10-16\u00a0\u00a0\u00a0\u00a0501.1100012014-03-26\u00a0\u00a0\u00a0\u00a0539.7799912014-04-25\u00a0\u00a0\u00a0\u00a0571.9399802014-08-18\u00a0\u00a0\u00a0\u00a099.1600042014-10-28\u00a0\u00a0\u00a0\u00a0106.7399982015-02-05\u00a0\u00a0\u00a0\u00a0119.9400022015-04-28\u00a0\u00a0\u00a0\u00a0130.5599982015-10-27\u00a0\u00a0\u00a0\u00a0114.5500032016-03-11\u00a0\u00a0\u00a0\u00a0102.2600022016-07-01\u00a0\u00a0\u00a0\u00a095.8899992016-07-25\u00a0\u00a0\u00a0\u00a097.339996Name:Close,dtype:float64Pythonapple.loc[apple[\"Signal\"]==-1,\"Close\"]1apple.loc[apple[\"Signal\"]==-1,\"Close\"]PythonDate2010-06-11253.5099952010-07-22259.0200002011-03-30348.6300092011-03-31348.5100062011-05-27337.4099922011-11-17377.4100002012-05-09569.1800232012-10-17644.6100012013-06-26398.0699922013-10-03483.4099962014-01-28506.4999772014-04-22531.7000202014-06-1193.8600012014-10-1797.6699982015-01-05106.2500002015-04-16126.1699982015-06-25127.5000002015-12-18106.0299992016-05-0593.2399982016-07-0896.6800002016-09-01106.730003Name:Close,dtype:float641234567891011121314151617181920212223Date2010-06-11\u00a0\u00a0\u00a0\u00a0253.5099952010-07-22\u00a0\u00a0\u00a0\u00a0259.0200002011-03-30\u00a0\u00a0\u00a0\u00a0348.6300092011-03-31\u00a0\u00a0\u00a0\u00a0348.5100062011-05-27\u00a0\u00a0\u00a0\u00a0337.4099922011-11-17\u00a0\u00a0\u00a0\u00a0377.4100002012-05-09\u00a0\u00a0\u00a0\u00a0569.1800232012-10-17\u00a0\u00a0\u00a0\u00a0644.6100012013-06-26\u00a0\u00a0\u00a0\u00a0398.0699922013-10-03\u00a0\u00a0\u00a0\u00a0483.4099962014-01-28\u00a0\u00a0\u00a0\u00a0506.4999772014-04-22\u00a0\u00a0\u00a0\u00a0531.7000202014-06-11\u00a0\u00a0\u00a0\u00a093.8600012014-10-17\u00a0\u00a0\u00a0\u00a097.6699982015-01-05\u00a0\u00a0\u00a0\u00a0106.2500002015-04-16\u00a0\u00a0\u00a0\u00a0126.1699982015-06-25\u00a0\u00a0\u00a0\u00a0127.5000002015-12-18\u00a0\u00a0\u00a0\u00a0106.0299992016-05-05\u00a0\u00a0\u00a0\u00a093.2399982016-07-08\u00a0\u00a0\u00a0\u00a096.6800002016-09-01\u00a0\u00a0\u00a0\u00a0106.730003Name:Close,dtype:float64Python#CreateaDataFramewithtrades,includingthepriceatthetradeandtheregimeunderwhichthetradeismade.apple_signals=pd.concat([pd.DataFrame({\"Price\":apple.loc[apple[\"Signal\"]==1,\"Close\"],\"Regime\":apple.loc[apple[\"Signal\"]==1,\"Regime\"],\"Signal\":\"Buy\"}),pd.DataFrame({\"Price\":apple.loc[apple[\"Signal\"]==-1,\"Close\"],\"Regime\":apple.loc[apple[\"Signal\"]==-1,\"Regime\"],\"Signal\":\"Sell\"}),])apple_signals.sort_index(inplace=True)apple_signals1234567891011#CreateaDataFramewithtrades,includingthepriceatthetradeandtheregimeunderwhichthetradeismade.apple_signals=pd.concat([\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pd.DataFrame({\"Price\":apple.loc[apple[\"Signal\"]==1,\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Regime\":apple.loc[apple[\"Signal\"]==1,\"Regime\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Signal\":\"Buy\"}),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pd.DataFrame({\"Price\":apple.loc[apple[\"Signal\"]==-1,\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Regime\":apple.loc[apple[\"Signal\"]==-1,\"Regime\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Signal\":\"Sell\"}),\u00a0\u00a0\u00a0\u00a0])apple_signals.sort_index(inplace=True)apple_signalsPriceRegimeSignalDate2010-03-16224.4499971.0Buy2010-06-11253.509995-1.0Sell2010-06-18274.0700111.0Buy2010-07-22259.020000-1.0Sell2010-09-20283.2300071.0Buy2011-03-30348.6300090.0Sell2011-03-31348.510006-1.0Sell2011-05-12346.5699881.0Buy2011-05-27337.409992-1.0Sell2011-07-14357.7700041.0Buy2011-11-17377.410000-1.0Sell2011-12-28402.6400031.0Buy2012-05-09569.180023-1.0Sell2012-06-25570.7700201.0Buy2012-10-17644.610001-1.0Sell2013-05-17433.2600101.0Buy2013-06-26398.069992-1.0Sell2013-07-31452.5299841.0Buy2013-10-03483.409996-1.0Sell2013-10-16501.1100011.0Buy2014-01-28506.499977-1.0Sell2014-03-26539.7799911.0Buy2014-04-22531.700020-1.0Sell2014-04-25571.9399801.0Buy2014-06-1193.860001-1.0Sell2014-08-1899.1600041.0Buy2014-10-1797.669998-1.0Sell2014-10-28106.7399981.0Buy2015-01-05106.250000-1.0Sell2015-02-05119.9400021.0Buy2015-04-16126.169998-1.0Sell2015-04-28130.5599981.0Buy2015-06-25127.500000-1.0Sell2015-10-27114.5500031.0Buy2015-12-18106.029999-1.0Sell2016-03-11102.2600021.0Buy2016-05-0593.239998-1.0Sell2016-07-0195.8899991.0Buy2016-07-0896.680000-1.0Sell2016-07-2597.3399961.0Buy2016-09-01106.7300031.0SellPython#Let'sseetheprofitabilityoflongtradesapple_long_profits=pd.DataFrame({\"Price\":apple_signals.loc[(apple_signals[\"Signal\"]==\"Buy\")&apple_signals[\"Regime\"]==1,\"Price\"],\"Profit\":pd.Series(apple_signals[\"Price\"]-apple_signals[\"Price\"].shift(1)).loc[apple_signals.loc[(apple_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_signals[\"Regime\"].shift(1)==1)].index].tolist(),\"EndDate\":apple_signals[\"Price\"].loc[apple_signals.loc[(apple_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_signals[\"Regime\"].shift(1)==1)].index].index})apple_long_profits123456789101112#Let'sseetheprofitabilityoflongtradesapple_long_profits=pd.DataFrame({\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Price\":apple_signals.loc[(apple_signals[\"Signal\"]==\"Buy\")&\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0apple_signals[\"Regime\"]==1,\"Price\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Profit\":pd.Series(apple_signals[\"Price\"]-apple_signals[\"Price\"].shift(1)).loc[\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0apple_signals.loc[(apple_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_signals[\"Regime\"].shift(1)==1)].index\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0].tolist(),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndDate\":apple_signals[\"Price\"].loc[\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0apple_signals.loc[(apple_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_signals[\"Regime\"].shift(1)==1)].index\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0].index\u00a0\u00a0\u00a0\u00a0})apple_long_profitsEndDatePriceProfitDate2010-03-162010-06-11224.44999729.0599982010-06-182010-07-22274.070011-15.0500112010-09-202011-03-30283.23000765.4000022011-05-122011-05-27346.569988-9.1599962011-07-142011-11-17357.77000419.6399962011-12-282012-05-09402.640003166.5400202012-06-252012-10-17570.77002073.8399812013-05-172013-06-26433.260010-35.1900182013-07-312013-10-03452.52998430.8800122013-10-162014-01-28501.1100015.3899762014-03-262014-04-22539.779991-8.0799712014-04-252014-06-11571.939980-478.0799792014-08-182014-10-1799.160004-1.4900062014-10-282015-01-05106.739998-0.4899982015-02-052015-04-16119.9400026.2299962015-04-282015-06-25130.559998-3.0599982015-10-272015-12-18114.550003-8.5200042016-03-112016-05-05102.260002-9.0200042016-07-012016-07-0895.8899990.7900012016-07-252016-09-0197.3399969.390007\u4ece\u4e0a\u8868\u53ef\u4ee5\u770b\u51fa2013\u5e745\u670817\u65e5\u90a3\u5929\u82f9\u679c\u516c\u53f8\u80a1\u7968\u4ef7\u683c\u5927\u8dcc\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4f1a\u8868\u73b0\u5f88\u5dee\u3002\u4f46\u662f\u90a3\u4e2a\u4ef7\u683c\u4e0b\u964d\u4e0d\u662f\u56e0\u4e3a\u82f9\u679c\u9047\u5230\u4e86\u4ec0\u4e48\u5927\u5371\u673a\uff0c\u800c\u4ec5\u4ec5\u662f\u4e00\u6b21\u5206\u80a1\u3002\u7531\u4e8e\u5206\u7ea2\u4e0d\u5982\u5206\u80a1\u90a3\u4e48\u663e\u8457\uff0c\u8fd9\u4e5f\u8bb8\u4f1a\u5f71\u54cd\u7cfb\u7edf\u884c\u4e3a\u3002Python#Let'sseetheresultoverthewholeperiodforwhichwehaveAppledatapandas_candlestick_ohlc(apple,stick=45,otherseries=[\"20d\",\"50d\",\"200d\"])12#Let'sseetheresultoverthewholeperiodforwhichwehaveAppledatapandas_candlestick_ohlc(apple,stick=45,otherseries=[\"20d\",\"50d\",\"200d\"])\u6211\u4eec\u4e0d\u5e0c\u671b\u6211\u4eec\u7684\u4ea4\u6613\u7cfb\u7edf\u7684\u8868\u73b0\u53d7\u5230\u5206\u7ea2\u548c\u5206\u80a1\u7684\u5f71\u54cd\u3002\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\u662f\u5229\u7528\u5386\u53f2\u7684\u5206\u7ea2\u5206\u80a1\u6570\u636e\u6765\u8bbe\u8ba1\u4ea4\u6613\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u6570\u636e\u53ef\u4ee5\u771f\u5b9e\u5730\u53cd\u6620\u80a1\u5e02\u7684\u884c\u4e3a\u4ece\u800c\u5e2e\u52a9\u6211\u4eec\u627e\u5230\u6700\u4f73\u89e3\u51b3\u65b9\u6848\uff0c\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u8981\u66f4\u590d\u6742\u4e00\u4e9b\u3002\u53e6\u4e00\u4e2a\u65b9\u6848\u5c31\u662f\u6839\u636e\u5206\u7ea2\u548c\u5206\u80a1\u6765\u8c03\u6574\u80a1\u7968\u7684\u4ef7\u683c\u3002\u96c5\u864e\u8d22\u7ecf\u53ea\u63d0\u4f9b\u8c03\u6574\u4e4b\u540e\u7684\u80a1\u7968\u95ed\u5e02\u4ef7\u683c\uff0c\u4e0d\u8fc7\u8fd9\u4e9b\u5bf9\u4e8e\u6211\u4eec\u8c03\u6574\u5f00\u5e02\uff0c\u9ad8\u4ef7\u548c\u4f4e\u4ef7\u5df2\u7ecf\u8db3\u591f\u4e86\u3002\u8c03\u6574\u95ed\u5e02\u80a1\u4ef7\u662f\u8fd9\u6837\u5b9e\u73b0\u7684\uff1a\u8ba9\u6211\u4eec\u56de\u5230\u5f00\u59cb\uff0c\u5148\u8c03\u6574\u80a1\u7968\u4ef7\u683c\uff0c\u7136\u540e\u518d\u6765\u8bc4\u4ef7\u6211\u4eec\u7684\u4ea4\u6613\u7cfb\u7edf\u3002Pythondefohlc_adj(dat):\"\"\":paramdat:pandasDataFramewithstockdata,including\"Open\",\"High\",\"Low\",\"Close\",and\"AdjClose\",with\"AdjClose\"containingadjustedclosingprices:return:pandasDataFramewithadjustedstockdataThisfunctionadjustsstockdataforsplits,dividends,etc.,returningadataframewith\"Open\",\"High\",\"Low\"and\"Close\"columns.TheinputDataFrameissimilartothatreturnedbypandasYahoo!FinanceAPI.\"\"\"returnpd.DataFrame({\"Open\":dat[\"Open\"]*dat[\"AdjClose\"]/dat[\"Close\"],\"High\":dat[\"High\"]*dat[\"AdjClose\"]/dat[\"Close\"],\"Low\":dat[\"Low\"]*dat[\"AdjClose\"]/dat[\"Close\"],\"Close\":dat[\"AdjClose\"]})apple_adj=ohlc_adj(apple)#Thisnextcoderepeatsalltheearlieranalysiswedidontheadjusteddataapple_adj[\"20d\"]=np.round(apple_adj[\"Close\"].rolling(window=20,center=False).mean(),2)apple_adj[\"50d\"]=np.round(apple_adj[\"Close\"].rolling(window=50,center=False).mean(),2)apple_adj[\"200d\"]=np.round(apple_adj[\"Close\"].rolling(window=200,center=False).mean(),2)apple_adj['20d-50d']=apple_adj['20d']-apple_adj['50d']#np.where()isavectorizedif-elsefunction,whereaconditionischeckedforeachcomponentofavector,andthefirstargumentpassedisusedwhentheconditionholds,andtheotherpassedifitdoesnotapple_adj[\"Regime\"]=np.where(apple_adj['20d-50d']>0,1,0)#Wehave1'sforbullishregimesand0'sforeverythingelse.BelowIreplacebearishregimes'svalueswith-1,andtomaintaintherestofthevector,thesecondargumentisapple[\"Regime\"]apple_adj[\"Regime\"]=np.where(apple_adj['20d-50d']<0,-1,apple_adj[\"Regime\"])#Toensurethatalltradescloseout,Itemporarilychangetheregimeofthelastrowto0regime_orig=apple_adj.ix[-1,\"Regime\"]apple_adj.ix[-1,\"Regime\"]=0apple_adj[\"Signal\"]=np.sign(apple_adj[\"Regime\"]-apple_adj[\"Regime\"].shift(1))#Restoreoriginalregimedataapple_adj.ix[-1,\"Regime\"]=regime_orig#CreateaDataFramewithtrades,includingthepriceatthetradeandtheregimeunderwhichthetradeismade.apple_adj_signals=pd.concat([pd.DataFrame({\"Price\":apple_adj.loc[apple_adj[\"Signal\"]==1,\"Close\"],\"Regime\":apple_adj.loc[apple_adj[\"Signal\"]==1,\"Regime\"],\"Signal\":\"Buy\"}),pd.DataFrame({\"Price\":apple_adj.loc[apple_adj[\"Signal\"]==-1,\"Close\"],\"Regime\":apple_adj.loc[apple_adj[\"Signal\"]==-1,\"Regime\"],\"Signal\":\"Sell\"}),])apple_adj_signals.sort_index(inplace=True)apple_adj_long_profits=pd.DataFrame({\"Price\":apple_adj_signals.loc[(apple_adj_signals[\"Signal\"]==\"Buy\")&apple_adj_signals[\"Regime\"]==1,\"Price\"],\"Profit\":pd.Series(apple_adj_signals[\"Price\"]-apple_adj_signals[\"Price\"].shift(1)).loc[apple_adj_signals.loc[(apple_adj_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_adj_signals[\"Regime\"].shift(1)==1)].index].tolist(),\"EndDate\":apple_adj_signals[\"Price\"].loc[apple_adj_signals.loc[(apple_adj_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_adj_signals[\"Regime\"].shift(1)==1)].index].index})pandas_candlestick_ohlc(apple_adj,stick=45,otherseries=[\"20d\",\"50d\",\"200d\"])123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657defohlc_adj(dat):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0:paramdat:pandasDataFramewithstockdata,including\"Open\",\"High\",\"Low\",\"Close\",and\"AdjClose\",with\"AdjClose\"containingadjustedclosingprices\u00a0\u00a0\u00a0\u00a0:return:pandasDataFramewithadjustedstockdata\u00a0\u00a0\u00a0\u00a0Thisfunctionadjustsstockdataforsplits,dividends,etc.,returningadataframewith\u00a0\u00a0\u00a0\u00a0\"Open\",\"High\",\"Low\"and\"Close\"columns.TheinputDataFrameissimilartothatreturned\u00a0\u00a0\u00a0\u00a0bypandasYahoo!FinanceAPI.\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0returnpd.DataFrame({\"Open\":dat[\"Open\"]*dat[\"AdjClose\"]/dat[\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"High\":dat[\"High\"]*dat[\"AdjClose\"]/dat[\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Low\":dat[\"Low\"]*dat[\"AdjClose\"]/dat[\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Close\":dat[\"AdjClose\"]})apple_adj=ohlc_adj(apple)#Thisnextcoderepeatsalltheearlieranalysiswedidontheadjusteddataapple_adj[\"20d\"]=np.round(apple_adj[\"Close\"].rolling(window=20,center=False).mean(),2)apple_adj[\"50d\"]=np.round(apple_adj[\"Close\"].rolling(window=50,center=False).mean(),2)apple_adj[\"200d\"]=np.round(apple_adj[\"Close\"].rolling(window=200,center=False).mean(),2)apple_adj['20d-50d']=apple_adj['20d']-apple_adj['50d']#np.where()isavectorizedif-elsefunction,whereaconditionischeckedforeachcomponentofavector,andthefirstargumentpassedisusedwhentheconditionholds,andtheotherpassedifitdoesnotapple_adj[\"Regime\"]=np.where(apple_adj['20d-50d']>0,1,0)#Wehave1'sforbullishregimesand0'sforeverythingelse.BelowIreplacebearishregimes'svalueswith-1,andtomaintaintherestofthevector,thesecondargumentisapple[\"Regime\"]apple_adj[\"Regime\"]=np.where(apple_adj['20d-50d']<0,-1,apple_adj[\"Regime\"])#Toensurethatalltradescloseout,Itemporarilychangetheregimeofthelastrowto0regime_orig=apple_adj.ix[-1,\"Regime\"]apple_adj.ix[-1,\"Regime\"]=0apple_adj[\"Signal\"]=np.sign(apple_adj[\"Regime\"]-apple_adj[\"Regime\"].shift(1))#Restoreoriginalregimedataapple_adj.ix[-1,\"Regime\"]=regime_orig#CreateaDataFramewithtrades,includingthepriceatthetradeandtheregimeunderwhichthetradeismade.apple_adj_signals=pd.concat([\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pd.DataFrame({\"Price\":apple_adj.loc[apple_adj[\"Signal\"]==1,\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Regime\":apple_adj.loc[apple_adj[\"Signal\"]==1,\"Regime\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Signal\":\"Buy\"}),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pd.DataFrame({\"Price\":apple_adj.loc[apple_adj[\"Signal\"]==-1,\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Regime\":apple_adj.loc[apple_adj[\"Signal\"]==-1,\"Regime\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Signal\":\"Sell\"}),\u00a0\u00a0\u00a0\u00a0])apple_adj_signals.sort_index(inplace=True)apple_adj_long_profits=pd.DataFrame({\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Price\":apple_adj_signals.loc[(apple_adj_signals[\"Signal\"]==\"Buy\")&\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0apple_adj_signals[\"Regime\"]==1,\"Price\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Profit\":pd.Series(apple_adj_signals[\"Price\"]-apple_adj_signals[\"Price\"].shift(1)).loc[\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0apple_adj_signals.loc[(apple_adj_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_adj_signals[\"Regime\"].shift(1)==1)].index\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0].tolist(),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndDate\":apple_adj_signals[\"Price\"].loc[\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0apple_adj_signals.loc[(apple_adj_signals[\"Signal\"].shift(1)==\"Buy\")&(apple_adj_signals[\"Regime\"].shift(1)==1)].index\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0].index\u00a0\u00a0\u00a0\u00a0})pandas_candlestick_ohlc(apple_adj,stick=45,otherseries=[\"20d\",\"50d\",\"200d\"])Pythonapple_adj_long_profits1apple_adj_long_profitsEndDatePriceProfitDate2010-03-162010-06-1029.3556673.4083712010-06-182010-07-2235.845436-1.9683812010-09-202011-03-3037.0434668.5536232011-05-122011-05-2745.327660-1.1980302011-07-142011-11-1746.7925032.5687022011-12-282012-05-0952.66102021.7816592012-06-252012-10-1774.65063410.0194592013-05-172013-06-2657.882798-4.7013262013-07-312013-10-0460.4572344.5008352013-10-162014-01-2867.3894731.1225232014-03-112014-03-1772.948554-1.2722982014-03-242014-04-2273.370393-1.0192032014-04-252014-10-1777.82685116.1913712014-10-282015-01-05102.749105-0.0281852015-02-052015-04-16116.4138466.0468382015-04-282015-06-26126.721620-3.1841172015-10-272015-12-18112.152083-7.8972882016-03-102016-05-05100.015950-7.2783312016-06-232016-06-2795.582210-4.0381232016-06-302016-07-1195.0849041.3725692016-07-252016-09-0196.8155269.914477\u53ef\u4ee5\u770b\u5230\u6839\u636e\u5206\u7ea2\u548c\u5206\u80a1\u8c03\u6574\u4e4b\u540e\u7684\u4ef7\u683c\u56fe\u53d8\u5f97\u5f88\u4e0d\u4e00\u6837\u4e86\u3002\u4e4b\u540e\u7684\u5206\u6790\u6211\u4eec\u90fd\u4f1a\u7528\u5230\u8fd9\u4e2a\u8c03\u6574\u4e4b\u540e\u7684\u6570\u636e\u3002\u5047\u8bbe\u6211\u4eec\u5728\u80a1\u5e02\u6709\u4e00\u767e\u4e07\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u770b\u6839\u636e\u4e0b\u9762\u7684\u6761\u4ef6\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u4f1a\u5982\u4f55\u53cd\u5e94\uff1a\u6bcf\u6b21\u7528\u603b\u989d\u768410%\u6765\u8fdb\u884c\u4ea4\u6613\u9000\u51fa\u5934\u5bf8\u5982\u679c\u4e8f\u635f\u8fbe\u5230\u4e86\u4ea4\u6613\u989d\u768420%\u6a21\u62df\u7684\u65f6\u5019\u8981\u8bb0\u4f4f\uff1a\u6bcf\u6b21\u4ea4\u6613\u6709100\u652f\u80a1\u7968\u6211\u4eec\u7684\u907f\u635f\u89c4\u5219\u662f\u5f53\u80a1\u7968\u4ef7\u683c\u4e0b\u964d\u5230\u4e00\u5b9a\u6570\u503c\u65f6\u5c31\u629b\u51fa\u3002\u6211\u4eec\u9700\u8981\u68c0\u67e5\u8fd9\u6bb5\u65f6\u95f4\u5185\u7684\u4f4e\u4ef7\u662f\u5426\u4f4e\u5230\u53ef\u4ee5\u51fa\u53d1\u907f\u635f\u89c4\u5219\u3002\u73b0\u5b9e\u4e2d\u9664\u975e\u6211\u4eec\u4e70\u5165\u770b\u7a7a\u671f\u6743\uff0c\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u6211\u4eec\u80fd\u4ee5\u8bbe\u5b9a\u4f4e\u503c\u4ef7\u683c\u5356\u51fa\u80a1\u7968\u3002\u8fd9\u91cc\u4e3a\u4e86\u7b80\u6d01\u6211\u4eec\u5c06\u8bbe\u5b9a\u503c\u4f5c\u4e3a\u5356\u51fa\u503c\u3002\u6bcf\u6b21\u4ea4\u6613\u90fd\u4f1a\u4ed8\u7ed9\u4e2d\u4ecb\u4e00\u5b9a\u7684\u4f63\u91d1\u3002\u8fd9\u91cc\u6211\u4eec\u6ca1\u6709\u8003\u8651\u8fd9\u4e2a\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u6f14\u793a\u4e86\u5982\u4f55\u5b9e\u73b0\u56de\u6eaf\u6d4b\u8bd5\uff1aPython#Weneedtogetthelowofthepriceduringeachtrade.tradeperiods=pd.DataFrame({\"Start\":apple_adj_long_profits.index,\"End\":apple_adj_long_profits[\"EndDate\"]})apple_adj_long_profits[\"Low\"]=tradeperiods.apply(lambdax:min(apple_adj.loc[x[\"Start\"]:x[\"End\"],\"Low\"]),axis=1)apple_adj_long_profits12345#Weneedtogetthelowofthepriceduringeachtrade.tradeperiods=pd.DataFrame({\"Start\":apple_adj_long_profits.index,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"End\":apple_adj_long_profits[\"EndDate\"]})apple_adj_long_profits[\"Low\"]=tradeperiods.apply(lambdax:min(apple_adj.loc[x[\"Start\"]:x[\"End\"],\"Low\"]),axis=1)apple_adj_long_profitsEndDatePriceProfitLowDate2010-03-162010-06-1029.3556673.40837126.0597752010-06-182010-07-2235.845436-1.96838131.3371272010-09-202011-03-3037.0434668.55362335.9670682011-05-122011-05-2745.327660-1.19803043.0846262011-07-142011-11-1746.7925032.56870246.1712512011-12-282012-05-0952.66102021.78165952.3824382012-06-252012-10-1774.65063410.01945973.9757592013-05-172013-06-2657.882798-4.70132652.8595022013-07-312013-10-0460.4572344.50083560.0430802013-10-162014-01-2867.3894731.12252367.1366512014-03-112014-03-1772.948554-1.27229871.1673352014-03-242014-04-2273.370393-1.01920369.5793352014-04-252014-10-1777.82685116.19137176.7409712014-10-282015-01-05102.749105-0.028185101.4110762015-02-052015-04-16116.4138466.046838114.9482372015-04-282015-06-26126.721620-3.184117119.7332992015-10-272015-12-18112.152083-7.897288104.0384772016-03-102016-05-05100.015950-7.27833191.3459942016-06-232016-06-2795.582210-4.03812391.0069962016-06-302016-07-1195.0849041.37256993.7919132016-07-252016-09-0196.8155269.91447795.900485Python#Nowwehavealltheinformationneededtosimulatethisstrategyinapple_adj_long_profitscash=1000000apple_backtest=pd.DataFrame({\"StartPort.Value\":[],\"EndPort.Value\":[],\"EndDate\":[],\"Shares\":[],\"SharePrice\":[],\"TradeValue\":[],\"ProfitperShare\":[],\"TotalProfit\":[],\"Stop-LossTriggered\":[]})port_value=.1#Maxproportionofportfoliobetonanytradebatch=100#Numberofsharesboughtperbatchstoploss=.2#%oftradelossthatwouldtriggerastoplossforindex,rowinapple_adj_long_profits.iterrows():batches=np.floor(cash*port_value)//np.ceil(batch*row[\"Price\"])#Maximumnumberofbatchesofstocksinvestedintrade_val=batches*batch*row[\"Price\"]#Howmuchmoneyisputonthelinewitheachtradeifrow[\"Low\"]<(1-stoploss)*row[\"Price\"]:#Accountforthestop-lossshare_profit=np.round((1-stoploss)*row[\"Price\"],2)stop_trig=Trueelse:share_profit=row[\"Profit\"]stop_trig=Falseprofit=share_profit*batches*batch#Computeprofits#Addarowtothebacktestdataframecontainingtheresultsofthetradeapple_backtest=apple_backtest.append(pd.DataFrame({\"StartPort.Value\":cash,\"EndPort.Value\":cash+profit,\"EndDate\":row[\"EndDate\"],\"Shares\":batch*batches,\"SharePrice\":row[\"Price\"],\"TradeValue\":trade_val,\"ProfitperShare\":share_profit,\"TotalProfit\":profit,\"Stop-LossTriggered\":stop_trig},index=[index]))cash=max(0,cash+profit)apple_backtest123456789101112131415161718192021222324252627282930313233343536373839#Nowwehavealltheinformationneededtosimulatethisstrategyinapple_adj_long_profitscash=1000000apple_backtest=pd.DataFrame({\"StartPort.Value\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndPort.Value\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndDate\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Shares\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"SharePrice\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TradeValue\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"ProfitperShare\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TotalProfit\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Stop-LossTriggered\":[]})port_value=.1#Maxproportionofportfoliobetonanytradebatch=100#Numberofsharesboughtperbatchstoploss=.2#%oftradelossthatwouldtriggerastoplossforindex,rowinapple_adj_long_profits.iterrows():\u00a0\u00a0\u00a0\u00a0batches=np.floor(cash*port_value)//np.ceil(batch*row[\"Price\"])#Maximumnumberofbatchesofstocksinvestedin\u00a0\u00a0\u00a0\u00a0trade_val=batches*batch*row[\"Price\"]#Howmuchmoneyisputonthelinewitheachtrade\u00a0\u00a0\u00a0\u00a0ifrow[\"Low\"]<(1-stoploss)*row[\"Price\"]:\u00a0\u00a0#Accountforthestop-loss\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0share_profit=np.round((1-stoploss)*row[\"Price\"],2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0stop_trig=True\u00a0\u00a0\u00a0\u00a0else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0share_profit=row[\"Profit\"]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0stop_trig=False\u00a0\u00a0\u00a0\u00a0profit=share_profit*batches*batch#Computeprofits\u00a0\u00a0\u00a0\u00a0#Addarowtothebacktestdataframecontainingtheresultsofthetrade\u00a0\u00a0\u00a0\u00a0apple_backtest=apple_backtest.append(pd.DataFrame({\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"StartPort.Value\":cash,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndPort.Value\":cash+profit,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndDate\":row[\"EndDate\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Shares\":batch*batches,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"SharePrice\":row[\"Price\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TradeValue\":trade_val,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"ProfitperShare\":share_profit,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TotalProfit\":profit,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Stop-LossTriggered\":stop_trig\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},index=[index]))\u00a0\u00a0\u00a0\u00a0cash=max(0,cash+profit)apple_backtestEndDateEndPort.ValueProfitperShareSharePriceSharesStartPort.ValueStop-LossTriggeredTotalProfitTradeValue2010-03-162010-06-101.011588e+063.40837129.3556673400.01.000000e+060.011588.461499809.26782010-06-182010-07-221.006077e+06-1.96838135.8454362800.01.011588e+060.0-5511.4668100367.22082010-09-202011-03-301.029172e+068.55362337.0434662700.01.006077e+060.023094.7821100017.35822011-05-122011-05-271.026536e+06-1.19803045.3276602200.01.029172e+060.0-2635.666099720.85202011-07-142011-11-171.031930e+062.56870246.7925032100.01.026536e+060.05394.274298264.25632011-12-282012-05-091.073316e+0621.78165952.6610201900.01.031930e+060.041385.1521100055.93802012-06-252012-10-171.087343e+0610.01945974.6506341400.01.073316e+060.014027.2426104510.88762013-05-172013-06-261.078880e+06-4.70132657.8827981800.01.087343e+060.0-8462.3868104189.03642013-07-312013-10-041.086532e+064.50083560.4572341700.01.078880e+060.07651.4195102777.29782013-10-162014-01-281.088328e+061.12252367.3894731600.01.086532e+060.01796.0368107823.15682014-03-112014-03-171.086547e+06-1.27229872.9485541400.01.088328e+060.0-1781.2172102127.97562014-03-242014-04-221.085120e+06-1.01920373.3703931400.01.086547e+060.0-1426.8842102718.55022014-04-252014-10-171.106169e+0616.19137177.8268511300.01.085120e+060.021048.7823101174.90632014-10-282015-01-051.106140e+06-0.028185102.7491051000.01.106169e+060.0-28.1850102749.10502015-02-052015-04-161.111582e+066.046838116.413846900.01.106140e+060.05442.1542104772.46142015-04-282015-06-261.109035e+06-3.184117126.721620800.01.111582e+060.0-2547.2936101377.29602015-10-272015-12-181.101928e+06-7.897288112.152083900.01.109035e+060.0-7107.5592100936.87472016-03-102016-05-051.093921e+06-7.278331100.0159501100.01.101928e+060.0-8006.1641110017.54502016-06-232016-06-271.089480e+06-4.03812395.5822101100.01.093921e+060.0-4441.9353105140.43102016-06-302016-07-111.090989e+061.37256995.0849041100.01.089480e+060.01509.8259104593.39442016-07-252016-09-011.101895e+069.91447796.8155261100.01.090989e+060.010905.9247106497.0786Pythonapple_backtest[\"EndPort.Value\"].plot()1apple_backtest[\"EndPort.Value\"].plot()\u6211\u4eec\u7684\u8d22\u4ea7\u603b\u989d\u516d\u5e74\u589e\u52a0\u4e8610%\u3002\u8003\u8651\u5230\u6bcf\u6b21\u4ea4\u6613\u989d\u53ea\u6709\u603b\u989d\u768410%\uff0c\u8fd9\u4e2a\u6210\u7ee9\u4e0d\u7b97\u5dee\u3002\u540c\u65f6\u6211\u4eec\u4e5f\u6ce8\u610f\u5230\u8fd9\u4e2a\u7b56\u7565\u5e76\u6ca1\u6709\u5f15\u53d1\u505c\u6b62\u635f\u5931\u59d4\u6258\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u4e0d\u9700\u8981\u5b83\u4e48\uff1f\u8fd9\u4e2a\u96be\u8bf4\u3002\u6bd5\u7adf\u8fd9\u4e2a\u6fc0\u53d1\u4e8b\u4ef6\u5b8c\u5168\u53d6\u51b3\u4e8e\u6211\u4eec\u7684\u8bbe\u5b9a\u503c\u3002\u505c\u6b62\u635f\u5931\u59d4\u6258\u662f\u88ab\u81ea\u52a8\u6fc0\u6d3b\u7684\uff0c\u5b83\u5e76\u4e0d\u4f1a\u8003\u8651\u80a1\u5e02\u6574\u4f53\u8d70\u52bf\u3002\u4e5f\u5c31\u662f\u8bf4\u4e0d\u8bba\u662f\u80a1\u5e02\u771f\u6b63\u7684\u8d70\u4f4e\u8fd8\u662f\u6682\u65f6\u7684\u6ce2\u52a8\u90fd\u4f1a\u6fc0\u53d1\u505c\u6b62\u635f\u5931\u59d4\u6258\u3002\u800c\u540e\u8005\u662f\u6211\u4eec\u9700\u8981\u6ce8\u610f\u7684\u56e0\u4e3a\u5728\u73b0\u5b9e\u4e2d\uff0c\u7531\u4ef7\u683c\u6ce2\u52a8\u6fc0\u53d1\u505c\u6b62\u635f\u5931\u59d4\u6258\u4e0d\u4ec5\u8ba9\u4f60\u652f\u51fa\u4e00\u7b14\u4ea4\u6613\u8d39\u7528\uff0c\u540c\u65f6\u8fd8\u65e0\u6cd5\u4fdd\u8bc1\u6700\u7ec8\u7684\u5356\u51fa\u4ef7\u683c\u662f\u4f60\u8bbe\u5b9a\u7684\u4ef7\u683c\u3002\u4e0b\u9762\u7684\u94fe\u63a5\u5206\u522b\u652f\u6301\u548c\u53cd\u5bf9\u4f7f\u7528\u505c\u6b62\u635f\u5931\u59d4\u6258\uff0c\u4f46\u662f\u4e4b\u540e\u7684\u5185\u5bb9\u6211\u4e0d\u4f1a\u8981\u6c42\u6211\u4eec\u7684\u56de\u6eaf\u6d4b\u8bd5\u7cfb\u7edf\u4f7f\u7528\u5b83\u3002\u8fd9\u6837\u53ef\u4ee5\u7b80\u5316\u7cfb\u7edf\uff0c\u4f46\u4e0d\u662f\u5f88\u7b26\u5408\u5b9e\u9645\uff08\u6211\u76f8\u4fe1\u5de5\u4e1a\u7cfb\u7edf\u5e94\u8be5\u6709\u505c\u6b62\u635f\u5931\u59d4\u6258\uff09\u3002\u73b0\u5b9e\u4e2d\u6211\u4eec\u4e0d\u4f1a\u53ea\u7528\u603b\u989d\u768410%\u53bb\u62bc\u4e00\u652f\u80a1\u7968\u800c\u662f\u6295\u8d44\u591a\u79cd\u80a1\u7968\u3002\u5728\u7ed9\u5b9a\u7684\u65f6\u95f4\u53ef\u4ee5\u8ddf\u4e0d\u540c\u516c\u53f8\u540c\u65f6\u4ea4\u6613\uff0c\u800c\u4e14\u5927\u90e8\u5206\u8d22\u4ea7\u5e94\u8be5\u5728\u80a1\u7968\u4e0a\uff0c\u800c\u4e0d\u662f\u73b0\u91d1\u3002\u73b0\u5728\u6211\u4eec\u5f00\u59cb\u6295\u8d44\u591a\u652f\u80a1\u7968\uff08\u539f\u6587\u662fstops\uff0c\u611f\u89c9\u662ftypo\uff0c\u8bd1\u6587\u6309\u7167stocks\u7ffb\u8bd1\uff09\uff0c\u5e76\u4e14\u5728\u4e24\u6761\u79fb\u52a8\u5e73\u5747\u7ebf\u4ea4\u53c9\u7684\u65f6\u5019\u9000\u5e02\uff08\u4e0d\u4f7f\u7528\u6b62\u635f\uff09\u3002\u6211\u4eec\u9700\u8981\u6539\u53d8\u56de\u6eaf\u6d4b\u8bd5\u7684\u4ee3\u7801\u3002\u6211\u4eec\u4f1a\u7528\u4e00\u4e2apandas\u7684DataFrame\u6765\u5b58\u50a8\u6240\u6709\u80a1\u7968\u7684\u4e70\u5356\uff0c\u4e0a\u4e00\u5c42\u7684\u5faa\u73af\u4e5f\u9700\u8981\u8bb0\u5f55\u66f4\u591a\u7684\u4fe1\u606f\u3002\u4e0b\u9762\u7684\u51fd\u6570\u7528\u4e8e\u4ea7\u751f\u4e70\u5356\u8ba2\u5355\uff0c\u4ee5\u53ca\u53e6\u4e00\u56de\u6eaf\u6d4b\u8bd5\u51fd\u6570\u3002Pythondefma_crossover_orders(stocks,fast,slow):\"\"\":paramstocks:Alistoftuples,thefirstargumentineachtuplebeingastringcontainingthetickersymbolofeachstock(orhoweveryouwantthestockrepresented,solongasit'sunique),andthesecondbeingapandasDataFramecontainingthestocks,witha\"Close\"columnandindexingbydate(likethedataframesreturnedbytheYahoo!FinanceAPI):paramfast:Integerforthenumberofdaysusedinthefastmovingaverage:paramslow:Integerforthenumberofdaysusedintheslowmovingaverage:return:pandasDataFramecontainingstockordersThisfunctiontakesalistofstocksanddetermineswheneachstockwouldbeboughtorsolddependingonamovingaveragecrossoverstrategy,returningadataframewithinformationaboutwhenthestocksintheportfolioareboughtorsoldaccordingtothestrategy\"\"\"fast_str=str(fast)+'d'slow_str=str(slow)+'d'ma_diff_str=fast_str+'-'+slow_strtrades=pd.DataFrame({\"Price\":[],\"Regime\":[],\"Signal\":[]})forsinstocks:#Getthemovingaverages,bothfastandslow,alongwiththedifferenceinthemovingaveragess[1][fast_str]=np.round(s[1][\"Close\"].rolling(window=fast,center=False).mean(),2)s[1][slow_str]=np.round(s[1][\"Close\"].rolling(window=slow,center=False).mean(),2)s[1][ma_diff_str]=s[1][fast_str]-s[1][slow_str]#np.where()isavectorizedif-elsefunction,whereaconditionischeckedforeachcomponentofavector,andthefirstargumentpassedisusedwhentheconditionholds,andtheotherpassedifitdoesnots[1][\"Regime\"]=np.where(s[1][ma_diff_str]>0,1,0)#Wehave1'sforbullishregimesand0'sforeverythingelse.BelowIreplacebearishregimes'svalueswith-1,andtomaintaintherestofthevector,thesecondargumentisapple[\"Regime\"]s[1][\"Regime\"]=np.where(s[1][ma_diff_str]<0,-1,s[1][\"Regime\"])#Toensurethatalltradescloseout,Itemporarilychangetheregimeofthelastrowto0regime_orig=s[1].ix[-1,\"Regime\"]s[1].ix[-1,\"Regime\"]=0s[1][\"Signal\"]=np.sign(s[1][\"Regime\"]-s[1][\"Regime\"].shift(1))#Restoreoriginalregimedatas[1].ix[-1,\"Regime\"]=regime_orig#Getsignalssignals=pd.concat([pd.DataFrame({\"Price\":s[1].loc[s[1][\"Signal\"]==1,\"Close\"],\"Regime\":s[1].loc[s[1][\"Signal\"]==1,\"Regime\"],\"Signal\":\"Buy\"}),pd.DataFrame({\"Price\":s[1].loc[s[1][\"Signal\"]==-1,\"Close\"],\"Regime\":s[1].loc[s[1][\"Signal\"]==-1,\"Regime\"],\"Signal\":\"Sell\"}),])signals.index=pd.MultiIndex.from_product([signals.index,[s[0]]],names=[\"Date\",\"Symbol\"])trades=trades.append(signals)trades.sort_index(inplace=True)trades.index=pd.MultiIndex.from_tuples(trades.index,names=[\"Date\",\"Symbol\"])returntradesdefbacktest(signals,cash,port_value=.1,batch=100):\"\"\":paramsignals:pandasDataFramecontainingbuyandsellsignalswithstockpricesandsymbols,likethatreturnedbyma_crossover_orders:paramcash:integerforstartingcashvalue:paramport_value:maximumproportionofportfoliotoriskonanysingletrade:parambatch:Tradingbatchsizes:return:pandasDataFramewithbacktestingresultsThisfunctionbacktestsstrategies,withthesignalsgeneratedbythestrategiesbeingpassedinthesignalsDataFrame.Afictitiousportfolioissimulatedandthereturnsgeneratedbythisportfolioarereported.\"\"\"SYMBOL=1#Constantforwhichelementinindexrepresentssymbolportfolio=dict()#Willcontainhowmanystocksareintheportfolioforagivensymbolport_prices=dict()#Tracksoldtradepricesfordeterminingprofits#Dataframethatwillcontainbacktestingreportresults=pd.DataFrame({\"StartCash\":[],\"EndCash\":[],\"PortfolioValue\":[],\"Type\":[],\"Shares\":[],\"SharePrice\":[],\"TradeValue\":[],\"ProfitperShare\":[],\"TotalProfit\":[]})forindex,rowinsignals.iterrows():#Thesefirstfewlinesaredoneforanytradeshares=portfolio.setdefault(index[SYMBOL],0)trade_val=0batches=0cash_change=row[\"Price\"]*shares#Sharescouldpotentiallybeapositiveornegativenumber(cash_changewillbeaddedintheend;negativesharesindicateashort)portfolio[index[SYMBOL]]=0#Foragivensymbol,apositioniseffectivelyclearedold_price=port_prices.setdefault(index[SYMBOL],row[\"Price\"])portfolio_val=0forkey,valinportfolio.items():portfolio_val+=val*port_prices[key]ifrow[\"Signal\"]==\"Buy\"androw[\"Regime\"]==1:#Enteringalongpositionbatches=np.floor((portfolio_val+cash)*port_value)//np.ceil(batch*row[\"Price\"])#Maximumnumberofbatchesofstocksinvestedintrade_val=batches*batch*row[\"Price\"]#Howmuchmoneyisputonthelinewitheachtradecash_change-=trade_val#Wearebuyingsharessocashwillgodownportfolio[index[SYMBOL]]=batches*batch#Recordinghowmanysharesarecurrentlyinvestedinthestockport_prices[index[SYMBOL]]=row[\"Price\"]#Recordpriceold_price=row[\"Price\"]elifrow[\"Signal\"]==\"Sell\"androw[\"Regime\"]==-1:#Enteringashortpass#Donothing;canweprovideamethodforshortingthemarket?#else:#raiseValueError(\"Idon'tknowwhattodowithsignal\"+row[\"Signal\"])pprofit=row[\"Price\"]-old_price#Computeprofitpershare;old_priceissetinsuchawaythatenteringapositionresultsinaprofitofzero#Updatereportresults=results.append(pd.DataFrame({\"StartCash\":cash,\"EndCash\":cash+cash_change,\"PortfolioValue\":cash+cash_change+portfolio_val+trade_val,\"Type\":row[\"Signal\"],\"Shares\":batch*batches,\"SharePrice\":row[\"Price\"],\"TradeValue\":abs(cash_change),\"ProfitperShare\":pprofit,\"TotalProfit\":batches*batch*pprofit},index=[index]))cash+=cash_change#Finalchangetocashbalanceresults.sort_index(inplace=True)results.index=pd.MultiIndex.from_tuples(results.index,names=[\"Date\",\"Symbol\"])returnresults#Getmorestocksmicrosoft=web.DataReader(\"MSFT\",\"yahoo\",start,end)google=web.DataReader(\"GOOG\",\"yahoo\",start,end)facebook=web.DataReader(\"FB\",\"yahoo\",start,end)twitter=web.DataReader(\"TWTR\",\"yahoo\",start,end)netflix=web.DataReader(\"NFLX\",\"yahoo\",start,end)amazon=web.DataReader(\"AMZN\",\"yahoo\",start,end)yahoo=web.DataReader(\"YHOO\",\"yahoo\",start,end)sony=web.DataReader(\"SNY\",\"yahoo\",start,end)nintendo=web.DataReader(\"NTDOY\",\"yahoo\",start,end)ibm=web.DataReader(\"IBM\",\"yahoo\",start,end)hp=web.DataReader(\"HPQ\",\"yahoo\",start,end)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135defma_crossover_orders(stocks,fast,slow):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0:paramstocks:Alistoftuples,thefirstargumentineachtuplebeingastringcontainingthetickersymbolofeachstock(orhoweveryouwantthestockrepresented,solongasit'sunique),andthesecondbeingapandasDataFramecontainingthestocks,witha\"Close\"columnandindexingbydate(likethedataframesreturnedbytheYahoo!FinanceAPI)\u00a0\u00a0\u00a0\u00a0:paramfast:Integerforthenumberofdaysusedinthefastmovingaverage\u00a0\u00a0\u00a0\u00a0:paramslow:Integerforthenumberofdaysusedintheslowmovingaverage\u00a0\u00a0\u00a0\u00a0:return:pandasDataFramecontainingstockorders\u00a0\u00a0\u00a0\u00a0Thisfunctiontakesalistofstocksanddetermineswheneachstockwouldbeboughtorsolddependingonamovingaveragecrossoverstrategy,returningadataframewithinformationaboutwhenthestocksintheportfolioareboughtorsoldaccordingtothestrategy\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0fast_str=str(fast)+'d'\u00a0\u00a0\u00a0\u00a0slow_str=str(slow)+'d'\u00a0\u00a0\u00a0\u00a0ma_diff_str=fast_str+'-'+slow_str\u00a0\u00a0\u00a0\u00a0trades=pd.DataFrame({\"Price\":[],\"Regime\":[],\"Signal\":[]})\u00a0\u00a0\u00a0\u00a0forsinstocks:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Getthemovingaverages,bothfastandslow,alongwiththedifferenceinthemovingaverages\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1][fast_str]=np.round(s[1][\"Close\"].rolling(window=fast,center=False).mean(),2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1][slow_str]=np.round(s[1][\"Close\"].rolling(window=slow,center=False).mean(),2)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1][ma_diff_str]=s[1][fast_str]-s[1][slow_str]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#np.where()isavectorizedif-elsefunction,whereaconditionischeckedforeachcomponentofavector,andthefirstargumentpassedisusedwhentheconditionholds,andtheotherpassedifitdoesnot\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1][\"Regime\"]=np.where(s[1][ma_diff_str]>0,1,0)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Wehave1'sforbullishregimesand0'sforeverythingelse.BelowIreplacebearishregimes'svalueswith-1,andtomaintaintherestofthevector,thesecondargumentisapple[\"Regime\"]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1][\"Regime\"]=np.where(s[1][ma_diff_str]<0,-1,s[1][\"Regime\"])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Toensurethatalltradescloseout,Itemporarilychangetheregimeofthelastrowto0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0regime_orig=s[1].ix[-1,\"Regime\"]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1].ix[-1,\"Regime\"]=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1][\"Signal\"]=np.sign(s[1][\"Regime\"]-s[1][\"Regime\"].shift(1))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Restoreoriginalregimedata\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0s[1].ix[-1,\"Regime\"]=regime_orig\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Getsignals\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0signals=pd.concat([\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pd.DataFrame({\"Price\":s[1].loc[s[1][\"Signal\"]==1,\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Regime\":s[1].loc[s[1][\"Signal\"]==1,\"Regime\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Signal\":\"Buy\"}),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pd.DataFrame({\"Price\":s[1].loc[s[1][\"Signal\"]==-1,\"Close\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Regime\":s[1].loc[s[1][\"Signal\"]==-1,\"Regime\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Signal\":\"Sell\"}),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0signals.index=pd.MultiIndex.from_product([signals.index,[s[0]]],names=[\"Date\",\"Symbol\"])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0trades=trades.append(signals)\u00a0\u00a0\u00a0\u00a0trades.sort_index(inplace=True)\u00a0\u00a0\u00a0\u00a0trades.index=pd.MultiIndex.from_tuples(trades.index,names=[\"Date\",\"Symbol\"])\u00a0\u00a0\u00a0\u00a0returntradesdefbacktest(signals,cash,port_value=.1,batch=100):\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0:paramsignals:pandasDataFramecontainingbuyandsellsignalswithstockpricesandsymbols,likethatreturnedbyma_crossover_orders\u00a0\u00a0\u00a0\u00a0:paramcash:integerforstartingcashvalue\u00a0\u00a0\u00a0\u00a0:paramport_value:maximumproportionofportfoliotoriskonanysingletrade\u00a0\u00a0\u00a0\u00a0:parambatch:Tradingbatchsizes\u00a0\u00a0\u00a0\u00a0:return:pandasDataFramewithbacktestingresults\u00a0\u00a0\u00a0\u00a0Thisfunctionbacktestsstrategies,withthesignalsgeneratedbythestrategiesbeingpassedinthesignalsDataFrame.Afictitiousportfolioissimulatedandthereturnsgeneratedbythisportfolioarereported.\u00a0\u00a0\u00a0\u00a0\"\"\"\u00a0\u00a0\u00a0\u00a0SYMBOL=1#Constantforwhichelementinindexrepresentssymbol\u00a0\u00a0\u00a0\u00a0portfolio=dict()\u00a0\u00a0\u00a0\u00a0#Willcontainhowmanystocksareintheportfolioforagivensymbol\u00a0\u00a0\u00a0\u00a0port_prices=dict()\u00a0\u00a0#Tracksoldtradepricesfordeterminingprofits\u00a0\u00a0\u00a0\u00a0#Dataframethatwillcontainbacktestingreport\u00a0\u00a0\u00a0\u00a0results=pd.DataFrame({\"StartCash\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndCash\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"PortfolioValue\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Type\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Shares\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"SharePrice\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TradeValue\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"ProfitperShare\":[],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TotalProfit\":[]})\u00a0\u00a0\u00a0\u00a0forindex,rowinsignals.iterrows():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Thesefirstfewlinesaredoneforanytrade\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0shares=portfolio.setdefault(index[SYMBOL],0)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0trade_val=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0batches=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cash_change=row[\"Price\"]*shares\u00a0\u00a0#Sharescouldpotentiallybeapositiveornegativenumber(cash_changewillbeaddedintheend;negativesharesindicateashort)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0portfolio[index[SYMBOL]]=0#Foragivensymbol,apositioniseffectivelycleared\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0old_price=port_prices.setdefault(index[SYMBOL],row[\"Price\"])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0portfolio_val=0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0forkey,valinportfolio.items():\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0portfolio_val+=val*port_prices[key]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifrow[\"Signal\"]==\"Buy\"androw[\"Regime\"]==1:\u00a0\u00a0#Enteringalongposition\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0batches=np.floor((portfolio_val+cash)*port_value)//np.ceil(batch*row[\"Price\"])#Maximumnumberofbatchesofstocksinvestedin\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0trade_val=batches*batch*row[\"Price\"]#Howmuchmoneyisputonthelinewitheachtrade\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cash_change-=trade_val\u00a0\u00a0#Wearebuyingsharessocashwillgodown\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0portfolio[index[SYMBOL]]=batches*batch\u00a0\u00a0#Recordinghowmanysharesarecurrentlyinvestedinthestock\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0port_prices[index[SYMBOL]]=row[\"Price\"]\u00a0\u00a0#Recordprice\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0old_price=row[\"Price\"]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0elifrow[\"Signal\"]==\"Sell\"androw[\"Regime\"]==-1:#Enteringashort\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pass\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Donothing;canweprovideamethodforshortingthemarket?\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#else:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#raiseValueError(\"Idon'tknowwhattodowithsignal\"+row[\"Signal\"])\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0pprofit=row[\"Price\"]-old_price\u00a0\u00a0#Computeprofitpershare;old_priceissetinsuchawaythatenteringapositionresultsinaprofitofzero\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#Updatereport\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0results=results.append(pd.DataFrame({\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"StartCash\":cash,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"EndCash\":cash+cash_change,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"PortfolioValue\":cash+cash_change+portfolio_val+trade_val,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Type\":row[\"Signal\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Shares\":batch*batches,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"SharePrice\":row[\"Price\"],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TradeValue\":abs(cash_change),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"ProfitperShare\":pprofit,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"TotalProfit\":batches*batch*pprofit\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},index=[index]))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0cash+=cash_change\u00a0\u00a0#Finalchangetocashbalance\u00a0\u00a0\u00a0\u00a0results.sort_index(inplace=True)\u00a0\u00a0\u00a0\u00a0results.index=pd.MultiIndex.from_tuples(results.index,names=[\"Date\",\"Symbol\"])\u00a0\u00a0\u00a0\u00a0returnresults#Getmorestocksmicrosoft=web.DataReader(\"MSFT\",\"yahoo\",start,end)google=web.DataReader(\"GOOG\",\"yahoo\",start,end)facebook=web.DataReader(\"FB\",\"yahoo\",start,end)twitter=web.DataReader(\"TWTR\",\"yahoo\",start,end)netflix=web.DataReader(\"NFLX\",\"yahoo\",start,end)amazon=web.DataReader(\"AMZN\",\"yahoo\",start,end)yahoo=web.DataReader(\"YHOO\",\"yahoo\",start,end)sony=web.DataReader(\"SNY\",\"yahoo\",start,end)nintendo=web.DataReader(\"NTDOY\",\"yahoo\",start,end)ibm=web.DataReader(\"IBM\",\"yahoo\",start,end)hp=web.DataReader(\"HPQ\",\"yahoo\",start,end)Pythonsignals=ma_crossover_orders([(\"AAPL\",ohlc_adj(apple)),(\"MSFT\",ohlc_adj(microsoft)),(\"GOOG\",ohlc_adj(google)),(\"FB\",ohlc_adj(facebook)),(\"TWTR\",ohlc_adj(twitter)),(\"NFLX\",ohlc_adj(netflix)),(\"AMZN\",ohlc_adj(amazon)),(\"YHOO\",ohlc_adj(yahoo)),(\"SNY\",ohlc_adj(yahoo)),(\"NTDOY\",ohlc_adj(nintendo)),(\"IBM\",ohlc_adj(ibm)),(\"HPQ\",ohlc_adj(hp))],fast=20,slow=50)signals1234567891011121314signals=ma_crossover_orders([(\"AAPL\",ohlc_adj(apple)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"MSFT\",\u00a0\u00a0ohlc_adj(microsoft)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"GOOG\",\u00a0\u00a0ohlc_adj(google)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"FB\",\u00a0\u00a0\u00a0\u00a0ohlc_adj(facebook)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"TWTR\",\u00a0\u00a0ohlc_adj(twitter)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"NFLX\",\u00a0\u00a0ohlc_adj(netflix)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"AMZN\",\u00a0\u00a0ohlc_adj(amazon)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"YHOO\",\u00a0\u00a0ohlc_adj(yahoo)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"SNY\",\u00a0\u00a0ohlc_adj(yahoo)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"NTDOY\",ohlc_adj(nintendo)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"IBM\",\u00a0\u00a0ohlc_adj(ibm)),\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(\"HPQ\",\u00a0\u00a0ohlc_adj(hp))],\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fast=20,slow=50)signalsPriceRegimeSignalDateSymbol2010-03-16AAPL29.3556671.0BuyAMZN131.7899931.0BuyGOOG282.318173-1.0SellHPQ20.7223161.0BuyIBM110.5632401.0BuyMSFT24.677580-1.0SellNFLX10.0900001.0BuyNTDOY37.0999981.0BuySNY16.360001-1.0SellYHOO16.360001-1.0Sell2010-03-17SNY16.5000001.0BuyYHOO16.5000001.0Buy2010-03-22GOOG278.4720041.0Buy2010-03-23MSFT25.1060961.0Buy2010-05-03GOOG265.035411-1.0Sell2010-05-10HPQ19.435830-1.0Sell2010-05-14NTDOY35.799999-1.0Sell2010-05-17SNY16.270000-1.0SellYHOO16.270000-1.0Sell2010-05-19AMZN124.589996-1.0SellMSFT23.835187-1.0Sell2010-05-21IBM108.322991-1.0Sell2010-06-10AAPL32.7640380.0Sell2010-06-11AAPL33.156405-1.0Sell2010-06-18AAPL35.8454361.0Buy2010-06-28IBM111.3976971.0Buy2010-07-01IBM105.861499-1.0Sell2010-07-06IBM106.6301751.0Buy2010-07-09NTDOY36.9500011.0Buy2010-07-20IBM109.298956-1.0Sell\u2026\u2026\u2026\u2026\u20262016-06-23AAPL95.5822101.0BuyTWTR17.0400011.0Buy2016-06-27AAPL91.544087-1.0SellFB108.970001-1.0Sell2016-06-28SNY36.040001-1.0SellYHOO36.040001-1.0Sell2016-06-30AAPL95.0849041.0BuyNFLX91.4800030.0Sell2016-07-01NFLX96.669998-1.0SellSNY37.9900021.0BuyYHOO37.9900021.0Buy2016-07-11AAPL96.457473-1.0SellNTDOY27.7000011.0Buy2016-07-14MSFT53.4071331.0Buy2016-07-25AAPL96.8155261.0BuyFB121.6299971.0Buy2016-07-26GOOG738.4199831.0Buy2016-08-18NFLX96.1600041.0Buy2016-09-01AAPL106.7300031.0Sell2016-09-02AMZN772.4400021.0SellFB126.5100021.0SellGOOG771.4600221.0SellHPQ14.4900001.0SellIBM159.5500031.0SellMSFT57.6699981.0SellNFLX97.3799971.0SellNTDOY28.8400001.0SellSNY43.2799991.0SellTWTR19.5499991.0SellYHOO43.2799991.0Sell475rows\u00d73columnsPythonbk=backtest(signals,1000000)bk12bk=backtest(signals,1000000)bkEndCashPortfolioValueProfitperShareSharePriceSharesStartCashTotalProfitTradeValueTypeDateSymbol2010-03-16AAPL9.001907e+051.000000e+060.00000029.3556673400.01.000000e+060.099809.2678BuyAMZN8.079377e+051.000000e+060.000000131.789993700.09.001907e+050.092252.9951BuyGOOG8.079377e+051.000000e+060.000000282.3181730.08.079377e+050.00.0000SellHPQ7.084706e+051.000000e+060.00000020.7223164800.08.079377e+050.099467.1168BuyIBM6.089637e+051.000000e+060.000000110.563240900.07.084706e+050.099506.9160BuyMSFT6.089637e+051.000000e+060.00000024.6775800.06.089637e+050.00.0000SellNFLX5.090727e+051.000000e+060.00000010.0900009900.06.089637e+050.099891.0000BuyNTDOY4.126127e+051.000000e+060.00000037.0999982600.05.090727e+050.096459.9948BuySNY4.126127e+051.000000e+060.00000016.3600010.04.126127e+050.00.0000SellYHOO4.126127e+051.000000e+060.00000016.3600010.04.126127e+050.00.0000Sell2010-03-17SNY3.136127e+051.000000e+060.00000016.5000006000.04.126127e+050.099000.0000BuyYHOO2.146127e+051.000000e+060.00000016.5000006000.03.136127e+050.099000.0000Buy2010-03-22GOOG1.310711e+051.000000e+060.000000278.472004300.02.146127e+050.083541.6012Buy2010-03-23MSFT3.315733e+041.000000e+060.00000025.1060963900.01.310711e+050.097913.7744Buy2010-05-03GOOG1.126680e+059.959690e+05-13.436593265.0354110.03.315733e+04-0.079510.6233Sell2010-05-10HPQ2.059599e+059.897939e+05-1.28648619.4358300.01.126680e+05-0.093291.9840Sell2010-05-14NTDOY2.990399e+059.864139e+05-1.29999935.7999990.02.059599e+05-0.093079.9974Sell2010-05-17SNY3.966599e+059.850339e+05-0.23000016.2700000.02.990399e+05-0.097620.0000SellYHOO4.942799e+059.836539e+05-0.23000016.2700000.03.966599e+05-0.097620.0000Sell2010-05-19AMZN5.814929e+059.786139e+05-7.199997124.5899960.04.942799e+05-0.087212.9972SellMSFT6.744502e+059.736573e+05-1.27090923.8351870.05.814929e+05-0.092957.2293Sell2010-05-21IBM7.719409e+059.716411e+05-2.240249108.3229910.06.744502e+05-0.097490.6919Sell2010-06-10AAPL8.833386e+059.832296e+053.40837132.7640380.07.719409e+050.0111397.7292Sell2010-06-11AAPL8.833386e+059.832296e+053.80073833.1564050.08.833386e+050.00.0000Sell2010-06-18AAPL7.865559e+059.832296e+050.00000035.8454362700.08.833386e+050.096782.6772Buy2010-06-28IBM6.974378e+059.832296e+050.000000111.397697800.07.865559e+050.089118.1576Buy2010-07-01IBM7.821270e+059.788006e+05-5.536198105.8614990.06.974378e+05-0.084689.1992Sell2010-07-06IBM6.861598e+059.788006e+050.000000106.630175900.07.821270e+050.095967.1575Buy2010-07-09NTDOY5.900898e+059.788006e+050.00000036.9500012600.06.861598e+050.096070.0026Buy2010-07-20IBM6.884589e+059.812025e+052.668781109.2989560.05.900898e+050.098369.0604Sell\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u20262016-06-23AAPL3.951693e+051.863808e+060.00000095.5822101900.05.767755e+050.0181606.1990BuyTWTR2.094333e+051.863808e+060.00000017.04000110900.03.951693e+050.0185736.0109Buy2016-06-27AAPL3.833670e+051.856135e+06-4.03812391.5440870.02.094333e+05-0.0173933.7653SellFB5.795130e+051.862921e+063.770004108.9700010.03.833670e+050.0196146.0018Sell2016-06-28SNY7.885450e+051.880959e+063.11000136.0400010.05.795130e+050.0209032.0058SellYHOO9.975770e+051.898997e+063.11000136.0400010.07.885450e+050.0209032.0058Sell2016-06-30AAPL8.169157e+051.898997e+060.00000095.0849041900.09.975770e+050.0180661.3176BuyNFLX9.907277e+051.893981e+06-2.64000091.4800030.08.169157e+05-0.0173812.0057Sell2016-07-01NFLX9.907277e+051.893981e+062.54999596.6699980.09.907277e+050.00.0000SellSNY8.045767e+051.893981e+060.00000037.9900024900.09.907277e+050.0186151.0098BuyYHOO6.184257e+051.893981e+060.00000037.9900024900.08.045767e+050.0186151.0098Buy2016-07-11AAPL8.016949e+051.896589e+061.37256996.4574730.06.184257e+050.0183269.1987SellNTDOY6.133349e+051.896589e+060.00000027.7000016800.08.016949e+050.0188360.0068Buy2016-07-14MSFT4.264099e+051.896589e+060.00000053.4071333500.06.133349e+050.0186924.9655Buy2016-07-25AAPL2.424604e+051.896589e+060.00000096.8155261900.04.264099e+050.0183949.4994BuyFB6.001543e+041.896589e+060.000000121.6299971500.02.424604e+050.0182444.9955Buy2016-07-26GOOG-8.766857e+041.896589e+060.000000738.419983200.06.001543e+040.0147683.9966Buy2016-08-18NFLX-2.703726e+051.896589e+060.00000096.1600041900.0-8.766857e+040.0182704.0076Buy2016-09-01AAPL-6.758557e+041.915427e+069.914477106.7300030.0-2.703726e+050.0202787.0057Sell2016-09-02AMZN1.641464e+051.979327e+06213.000000772.4400020.0-6.758557e+040.0231732.0006SellFB3.539114e+051.986647e+064.880005126.5100020.01.641464e+050.0189765.0030SellGOOG5.082034e+051.993255e+0633.040039771.4600220.03.539114e+050.0154292.0044SellHPQ7.081654e+052.006030e+060.92574614.4900000.05.082034e+050.0199962.0000SellIBM8.996254e+052.015652e+068.018727159.5500030.07.081654e+050.0191460.0036SellMSFT1.101470e+062.030572e+064.26286557.6699980.08.996254e+050.0201844.9930SellNFLX1.286492e+062.032890e+061.21999397.3799970.01.101470e+060.0185021.9943SellNTDOY1.482604e+062.040642e+061.13999928.8400000.01.286492e+060.0196112.0000SellSNY1.694676e+062.066563e+065.28999743.2799990.01.482604e+060.0212071.9951SellTWTR1.907771e+062.093922e+062.50999819.5499990.01.694676e+060.0213094.9891SellYHOO2.119843e+062.119843e+065.28999743.2799990.01.907771e+060.0212071.9951Sell475rows\u00d79columnsPythonbk[\"PortfolioValue\"].groupby(level=0).apply(lambdax:x[-1]).plot()1bk[\"PortfolioValue\"].groupby(level=0).apply(lambdax:x[-1]).plot()\u66f4\u4e3a\u73b0\u5b9e\u7684\u6295\u8d44\u7ec4\u5408\u53ef\u4ee5\u6295\u8d44\u4efb\u4f5512\u652f\u80a1\u7968\u800c\u8fbe\u5230100%\u7684\u6536\u76ca\u3002\u8fd9\u4e2a\u770b\u4e0a\u53bb\u4e0d\u9519\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u3002\u57fa\u51c6\u5206\u6790\u6cd5\u57fa\u51c6\u5206\u6790\u6cd5\u53ef\u4ee5\u5206\u6790\u4ea4\u6613\u7b56\u7565\u6548\u7387\u7684\u597d\u574f\u3002\u6240\u8c13\u57fa\u51c6\u5206\u6790\uff0c\u5c31\u662f\u5c06\u7b56\u7565\u548c\u5176\u4ed6\uff08\u8457\u540d\uff09\u7b56\u7565\u8fdb\u884c\u6bd4\u8f83\u4ece\u800c\u8bc4\u4ef7\u8be5\u7b56\u7565\u7684\u8868\u73b0\u597d\u574f\u3002\u6bcf\u6b21\u4f60\u8bc4\u4ef7\u4ea4\u6613\u7cfb\u7edf\u7684\u65f6\u5019\uff0c\u90fd\u8981\u8ddf\u4e70\u5165\u6301\u6709\u7b56\u7565\uff08SPY\uff09\u8fdb\u884c\u6bd4\u8f83\u3002\u9664\u4e86\u4e00\u4e9b\u4fe1\u6258\u57fa\u91d1\u548c\u5c11\u6570\u6295\u8d44\u7ecf\u7406\u6ca1\u6709\u4f7f\u7528\u5b83\uff0c\u8be5\u7b56\u7565\u5728\u5927\u591a\u65f6\u5019\u90fd\u662f\u65e0\u654c\u7684\u3002\u6709\u6548\u5e02\u573a\u5047\u8bf4\u5f3a\u8c03\u6ca1\u6709\u4eba\u80fd\u6218\u80dc\u80a1\u7968\u5e02\u573a\uff0c\u6240\u4ee5\u6bcf\u4e2a\u4eba\u90fd\u5e94\u8be5\u8d2d\u5165\u6307\u6570\u57fa\u91d1\uff0c\u56e0\u4e3a\u5b83\u80fd\u53cd\u5e94\u6574\u4e2a\u5e02\u573a\u7684\u6784\u6210\u3002SPY\u662f\u4e00\u4e2a\u4ea4\u6613\u578b\u5f00\u653e\u5f0f\u6307\u6570\u57fa\u91d1\uff08\u4e00\u79cd\u53ef\u4ee5\u50cf\u80a1\u7968\u4e00\u6837\u4ea4\u6613\u7684\u4fe1\u6258\u57fa\u91d1\uff09\uff0c\u5b83\u7684\u4ef7\u683c\u6709\u6548\u53cd\u6620\u4e86S&P500\u4e2d\u7684\u80a1\u7968\u4ef7\u683c\u3002\u4e70\u5165\u5e76\u6301\u6709SPY\uff0c\u8bf4\u660e\u4f60\u53ef\u4ee5\u6709\u6548\u5730\u5339\u914d\u5e02\u573a\u56de\u62a5\u7387\u800c\u4e0d\u662f\u6218\u80dc\u5b83\u3002\u4e0b\u9762\u662fSPY\u7684\u6570\u636e\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u7b80\u5355\u4e70\u5165\u6301\u6709SPY\u80fd\u5f97\u5230\u7684\u56de\u62a5\uff1aPythonspyder=web.DataReader(\"SPY\",\"yahoo\",start,end)spyder.iloc[[0,-1],:]12spyder=web.DataReader(\"SPY\",\"yahoo\",start,end)spyder.iloc[[0,-1],:]OpenHighLowCloseVolumeAdjCloseDate2010-01-04112.370003113.389999111.510002113.33000211894460099.2922992016-09-01217.369995217.729996216.029999217.38999993859000217.389999Pythonbatches=1000000//np.ceil(100*spyder.ix[0,\"AdjClose\"])#Maximumnumberofbatchesofstocksinvestedintrade_val=batches*batch*spyder.ix[0,\"AdjClose\"]#HowmuchmoneyisusedtobuySPYfinal_val=batches*batch*spyder.ix[-1,\"AdjClose\"]+(1000000-trade_val)#Finalvalueoftheportfoliofinal_val1234batches=1000000//np.ceil(100*spyder.ix[0,\"AdjClose\"])#Maximumnumberofbatchesofstocksinvestedintrade_val=batches*batch*spyder.ix[0,\"AdjClose\"]#HowmuchmoneyisusedtobuySPYfinal_val=batches*batch*spyder.ix[-1,\"AdjClose\"]+(1000000-trade_val)#Finalvalueoftheportfoliofinal_valPython2180977.012180977.0Python#Weseethatthebuy-and-holdstrategybeatsthestrategywedevelopedearlier.Iwouldalsoliketoseeaplot.ax_bench=(spyder[\"AdjClose\"]/spyder.ix[0,\"AdjClose\"]).plot(label=\"SPY\")ax_bench=(bk[\"PortfolioValue\"].groupby(level=0).apply(lambdax:x[-1])/1000000).plot(ax=ax_bench,label=\"Portfolio\")ax_bench.legend(ax_bench.get_lines(),[l.get_label()forlinax_bench.get_lines()],loc='best')ax_bench12345#Weseethatthebuy-and-holdstrategybeatsthestrategywedevelopedearlier.Iwouldalsoliketoseeaplot.ax_bench=(spyder[\"AdjClose\"]/spyder.ix[0,\"AdjClose\"]).plot(label=\"SPY\")ax_bench=(bk[\"PortfolioValue\"].groupby(level=0).apply(lambdax:x[-1])/1000000).plot(ax=ax_bench,label=\"Portfolio\")ax_bench.legend(ax_bench.get_lines(),[l.get_label()forlinax_bench.get_lines()],loc='best')ax_bench\u4e70\u5165\u6301\u6709SPY\u6bd4\u6211\u4eec\u5f53\u524d\u7684\u4ea4\u6613\u7cfb\u7edf\u597d\u2014\u2014\u6211\u4eec\u7684\u7cfb\u7edf\u8fd8\u6ca1\u6709\u8003\u8651\u4e0d\u83f2\u7684\u4ea4\u6613\u8d39\u7528\u3002\u8003\u8651\u5230\u673a\u4f1a\u6210\u672c\u548c\u8be5\u7b56\u7565\u7684\u6d88\u8017\uff0c\u6211\u4eec\u4e0d\u5e94\u8be5\u7528\u5b83\u3002\u600e\u6837\u624d\u80fd\u6539\u8fdb\u6211\u4eec\u7684\u7cfb\u7edf\u5462\uff1f\u5bf9\u4e8e\u521d\u5b66\u8005\u6765\u5c3d\u91cf\u591a\u6837\u5316\u662f\u4e00\u4e2a\u9009\u62e9\u3002\u76ee\u524d\u6211\u4eec\u6240\u6709\u7684\u80a1\u7968\u90fd\u6765\u81ea\u6280\u672f\u516c\u53f8\uff0c\u8fd9\u610f\u5473\u7740\u6280\u672f\u578b\u516c\u53f8\u7684\u4e0d\u666f\u6c14\u4f1a\u53cd\u6620\u5728\u6211\u4eec\u7684\u6295\u8d44\u7ec4\u5408\u4e0a\u3002\u6211\u4eec\u5e94\u8be5\u8bbe\u8ba1\u4e00\u4e2a\u53ef\u4ee5\u5229\u7528\u7a7a\u5934\u5934\u5bf8\u548c\u718a\u5e02\u7684\u7cfb\u7edf\uff0c\u8fd9\u6837\u4e0d\u7ba1\u5e02\u573a\u5982\u4f55\u53d8\u52a8\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u76c8\u5229\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bfb\u6c42\u66f4\u597d\u7684\u65b9\u6cd5\u9884\u6d4b\u80a1\u7968\u7684\u6700\u9ad8\u671f\u671b\u4ef7\u683c\u3002\u4f46\u662f\u4e0d\u8bba\u5982\u4f55\u6211\u4eec\u90fd\u9700\u8981\u505a\u5f97\u6bd4SPY\u66f4\u597d\uff0c\u4e0d\u7136\u7531\u4e8e\u6211\u4eec\u7684\u7cfb\u7edf\u4f1a\u81ea\u5e26\u673a\u4f1a\u6210\u672c\uff0c\u662f\u6ca1\u7528\u7684\u3002\u5176\u4ed6\u7684\u57fa\u51c6\u7b56\u7565\u4e5f\u662f\u5b58\u5728\u7684\u3002\u5982\u679c\u6211\u4eec\u7684\u7cfb\u7edf\u6bd4\u201c\u4e70\u5165\u6301\u6709SPY\u201d\u66f4\u597d\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u4e00\u6b65\u8ddf\u5176\u4ed6\u7684\u7cfb\u7edf\u6bd4\u8f83\uff0c\u4f8b\u5982\uff1a\uff08\u6211\u6700\u521d\u5728\u8fd9\u91cc\u63a5\u89e6\u5230\u8fd9\u4e9b\u7b56\u7565\uff09\u57fa\u672c\u51c6\u5219\u4ecd\u7136\u662f\uff1a\u4e0d\u8981\u4f7f\u7528\u4e00\u4e2a\u590d\u6742\u7684\uff0c\u5305\u542b\u5927\u91cf\u4ea4\u6613\u7684\u7cfb\u7edf\u5982\u679c\u5b83\u8d62\u4e0d\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u4ea4\u6613\u4e0d\u9891\u7e41\u7684\u6307\u6570\u57fa\u91d1\u6a21\u578b\u3002\uff08\u4e8b\u5b9e\u4e0a\u8fd9\u4e2a\u6807\u51c6\u633a\u96be\u5b9e\u73b0\u7684\uff09\u6700\u540e\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u5047\u8bbe\u4f60\u7684\u4ea4\u6613\u7cfb\u7edf\u5728\u56de\u6eaf\u6d4b\u8bd5\u4e2d\u6253\u8d25\u4e86\u6240\u6709\u7684\u57fa\u51c6\u7cfb\u7edf\uff0c\u4e5f\u4e0d\u610f\u5473\u7740\u5b83\u80fd\u591f\u51c6\u786e\u5730\u9884\u6d4b\u672a\u6765\u3002\u56e0\u4e3a\u56de\u6eaf\u6d4b\u8bd5\u5bb9\u6613\u8fc7\u62df\u5408\uff0c\u5b83\u4e0d\u80fd\u7528\u4e8e\u9884\u6d4b\u672a\u6765\u3002\u7ed3\u8bba\u867d\u7136\u8bb2\u5ea7\u6700\u540e\u7684\u7ed3\u8bba\u4e0d\u662f\u90a3\u4e48\u4e50\u89c2\uff0c\u4f46\u8bb0\u4f4f\u6709\u6548\u5e02\u573a\u7406\u8bba\u4e5f\u6709\u7f3a\u9677\u3002\u6211\u4e2a\u4eba\u7684\u89c2\u70b9\u662f\u5f53\u4ea4\u6613\u66f4\u591a\u4f9d\u8d56\u4e8e\u7b97\u6cd5\u7684\u65f6\u5019\uff0c\u5c31\u66f4\u96be\u6218\u80dc\u5e02\u573a\u3002\u6709\u4e00\u4e2a\u8bf4\u6cd5\u662f\uff1a\u4fe1\u6258\u57fa\u91d1\u90fd\u4e0d\u592a\u53ef\u80fd\u6218\u80dc\u5e02\u573a\uff0c\u4f60\u7684\u7cfb\u7edf\u80fd\u6218\u80dc\u5e02\u573a\u4ec5\u4ec5\u662f\u4e00\u4e2a\u53ef\u80fd\u6027\u800c\u5df2\u3002\uff08\u5f53\u7136\u4fe1\u6258\u57fa\u91d1\u8868\u73b0\u5f88\u5dee\u7684\u539f\u56e0\u662f\u6536\u8d39\u592a\u9ad8\uff0c\u800c\u6307\u6570\u57fa\u91d1\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\u3002\uff09\u672c\u8bb2\u5ea7\u53ea\u7b80\u5355\u5730\u8bf4\u660e\u4e86\u4e00\u79cd\u57fa\u4e8e\u79fb\u52a8\u5e73\u5747\u7684\u4ea4\u6613\u7b56\u7565\u3002\u8fd8\u6709\u8bb8\u591a\u522b\u7684\u4ea4\u6613\u7b56\u7565\u8fd9\u91cc\u5e76\u6ca1\u6709\u63d0\u5230\u3002\u800c\u4e14\u6211\u4eec\u4e5f\u6ca1\u6709\u6df1\u5165\u63a2\u8ba8\u7a7a\u5934\u80a1\u7968\u548c\u8d27\u5e01\u4ea4\u6613\u3002\u7279\u522b\u662f\u80a1\u7968\u671f\u6743\u6709\u5f88\u591a\u4e1c\u897f\u53ef\u4ee5\u8bb2\uff0c\u5b83\u4e5f\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u9884\u6d4b\u80a1\u7968\u7684\u8d70\u5411\u3002\u4f60\u53ef\u4ee5\u5728DerivativesAnalyticswithPython:DataAnalysis,Models,Simulation,CalibrationandHedging\u4e66\u4e2d\u8bfb\u5230\u66f4\u591a\u7684\u76f8\u5173\u5185\u5bb9\u3002\uff08\u72b9\u4ed6\u5927\u5b66\u7684\u56fe\u4e66\u9986\u6709\u8fd9\u672c\u4e66\uff09\u53e6\u4e00\u4e2a\u8d44\u6e90\u662fO\u2019Reilly\u51fa\u7684PythonforFinance\uff0c\u72b9\u4ed6\u5927\u5b66\u7684\u56fe\u4e66\u9986\u91cc\u4e5f\u6709\u3002\u8bb0\u4f4f\u5728\u80a1\u7968\u91cc\u9762\u4e8f\u94b1\u662f\u5f88\u6b63\u5e38\u7684\uff0c\u540c\u6837\u80a1\u5e02\u4e5f\u80fd\u63d0\u4f9b\u5176\u4ed6\u65b9\u6cd5\u65e0\u6cd5\u63d0\u4f9b\u7684\u9ad8\u56de\u62a5\uff0c\u6bcf\u4e00\u4e2a\u6295\u8d44\u7b56\u7565\u90fd\u5e94\u8be5\u662f\u7ecf\u8fc7\u6df1\u601d\u719f\u8651\u7684\u3002\u8fd9\u4e2a\u8bb2\u5ea7\u65e8\u5728\u629b\u7816\u5f15\u7389\uff0c\u5e0c\u671b\u540c\u5b66\u4eec\u81ea\u5df1\u8fdb\u4e00\u6b65\u63a2\u8ba8\u8fd9\u4e2a\u8bdd\u9898\u3002\u4f5c\u4e1a\u95ee\u98981\u5efa\u7acb\u4e00\u4e2a\u57fa\u4e8e\u79fb\u52a8\u5e73\u5747\u7684\u4ea4\u6613\u7cfb\u7edf\uff08\u4e0d\u9700\u8981\u6b62\u635f\u6761\u4ef6\uff09\u3002\u9009\u62e915\u652f2010\u5e741\u67081\u65e5\u4e4b\u524d\u4e0a\u5e02\u7684\u80a1\u7968\uff0c\u5229\u7528\u56de\u6eaf\u6d4b\u8bd5\u68c0\u9a8c\u4f60\u7684\u7cfb\u7edf\uff0c\u5e76\u4e14SPY\u57fa\u51c6\u4f5c\u6bd4\u8f83\uff0c\u4f60\u7684\u7cfb\u7edf\u80fd\u6218\u80dc\u5e02\u573a\u5417\uff1f\u95ee\u98982\u5728\u73b0\u5b9e\u4e2d\u6bcf\u4e00\u7b14\u4ea4\u6613\u90fd\u8981\u652f\u4ed8\u4e00\u7b14\u4f63\u91d1\u3002\u5f04\u660e\u767d\u5982\u4f55\u8ba1\u7b97\u4f63\u91d1\uff0c\u7136\u540e\u4fee\u6539\u4f60\u7684backtes()\u51fd\u6570\uff0c\u4f7f\u4e4b\u80fd\u591f\u8ba1\u7b97\u4e0d\u540c\u7684\u4f63\u91d1\u6a21\u5f0f\uff08\u56fa\u5b9a\u8d39\u7528\uff0c\u6309\u6bd4\u4f8b\u6536\u8d39\u7b49\u7b49\uff09\u3002\u00a0\u6211\u4eec\u73b0\u5728\u7684\u79fb\u52a8\u5e73\u5747\u4ea4\u6c47\u70b9\u5206\u6790\u7cfb\u7edf\u5728\u4e24\u6761\u5e73\u5747\u7ebf\u4ea4\u53c9\u7684\u65f6\u5019\u89e6\u53d1\u4ea4\u6613\u3002\u4fee\u6539\u7cfb\u7edf\u4ee4\u5176\u66f4\u51c6\u786e\uff1a\u5f53\u4f60\u5b8c\u6210\u4fee\u6539\u4e4b\u540e\uff0c\u91cd\u590d\u95ee\u98981\uff0c\u4f7f\u7528\u4e00\u4e2a\u771f\u5b9e\u7684\u4f63\u91d1\u7b56\u7565\uff08\u4ece\u4ea4\u6613\u6240\u67e5\uff09\u6765\u6a21\u62df\u4f60\u7684\u7cfb\u7edf\uff0c\u540c\u65f6\u8981\u6c42\u79fb\u52a8\u5e73\u5747\u5dee\u5f02\u8fbe\u5230\u4e00\u5b9a\u7684\u79fb\u52a8\u6807\u51c6\u5dee\u518d\u6fc0\u53d1\u4ea4\u6613\u3002\u95ee\u98983\u6211\u4eec\u7684\u4ea4\u6613\u7cfb\u7edf\u65e0\u6cd5\u5904\u7406\u7a7a\u5934\u80a1\u7968\u3002\u7a7a\u5934\u4e70\u5356\u7684\u590d\u6742\u6027\u5728\u4e8e\u635f\u5931\u662f\u6ca1\u6709\u4e0b\u9650\u7684\uff08\u591a\u5934\u5934\u5bf8\u7684\u6700\u5927\u635f\u5931\u7b49\u4e8e\u8d2d\u5165\u80a1\u7968\u7684\u603b\u4ef7\u683c\uff09\u3002\u5b66\u4e60\u5982\u4f55\u5904\u7406\u7a7a\u5934\u5934\u5bf8\uff0c\u7136\u540e\u4fee\u6539backtest()\u4f7f\u5176\u80fd\u591f\u5904\u7406\u7a7a\u5934\u4ea4\u6613\u3002\u601d\u8003\u8981\u5982\u4f55\u5b9e\u73b0\u7a7a\u5934\u4ea4\u6613\uff0c\u5305\u62ec\u5141\u8bb8\u591a\u5c11\u7a7a\u5934\u4ea4\u6613\uff1f\u5728\u8fdb\u884c\u5176\u4ed6\u4ea4\u6613\u7684\u65f6\u5019\u5982\u4f55\u5904\u7406\u7a7a\u5934\u4ea4\u6613\uff1f\u63d0\u793a\uff1a\u7a7a\u5934\u4ea4\u6613\u7684\u91cf\u5728\u51fd\u6570\u4e2d\u53ef\u4ee5\u7528\u4e00\u4e2a\u8d1f\u6570\u6765\u8868\u793a\u3002\u5b8c\u6210\u4e4b\u540e\u91cd\u590d\u95ee\u98981\uff0c\u4e5f\u53ef\u4ee5\u540c\u65f6\u8003\u8651\u95ee\u98982\u4e2d\u63d0\u5230\u7684\u56e0\u7d20\u3002\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u6253\u8d4f\u8bd1\u8005\u6253\u8d4f\u652f\u6301\u6211\u7ffb\u8bd1\u66f4\u591a\u597d\u6587\u7ae0\uff0c\u8c22\u8c22\uff01\u4efb\u9009\u4e00\u79cd\u652f\u4ed8\u65b9\u5f0f2\u8d5e5\u6536\u85cf\u8bc4\u8bba\u5173\u4e8e\u4f5c\u8005\uff1a\u5c0f\u7c73\u4e91\u8c46\u7ca5\u6570\u636e\u79d1\u5b66\u8fdb\u4fee\u4e2d\uff0cPython\u5c0f\u7801\u519c\u3002\u4e0d\u7528QQ\uff0c\u6709\u4e8b\u7ad9\u5185\u4fe1\u8054\u7cfb\u3002\u4e2a\u4eba\u4e3b\u9875\u00b7\u6211\u7684\u6587\u7ae0\u00b731\u00b7"]},
{"art_title": ["\u4e00\u4e2a Reentrant Error \u5f15\u53d1\u7684\u5bf9 Python \u4fe1\u53f7\u673a\u5236\u7684\u63a2\u7d22\u548c\u601d\u8003"], "art_url": ["http://python.jobbole.com/88384/"], "art_create_time": ["2017/08/21"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/08/704f4a290960c2c282be35fa9586df4b.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1ahsfzxjy\u00a0\u00a0\u00a0\u5199\u5728\u524d\u9762\u524d\u51e0\u5929\u5de5\u4f5c\u65f6\u9047\u5230\u4e86\u4e00\u4e2a\u532a\u5937\u6240\u601d\u7684\u95ee\u9898\u3002\u7ecf\u8fc7\u51e0\u6b21\u5c1d\u8bd5\u540e\u95ee\u9898\u5f97\u4ee5\u89e3\u51b3\uff0c\u4f46\u95ee\u9898\u4ea7\u751f\u7684\u539f\u56e0\u5374\u4ecd\u4ee4\u4eba\u8d39\u89e3\u3002\u67e5\u627eSO\u65e0\u679c\uff0c\u6211\u51b3\u5b9a\u7ffb\u770bPython\u7684\u6e90\u7801\u3002\u65ad\u65ad\u7eed\u7eed\u5730\u7814\u7a76\u4e86\u51e0\u5929\uff0c\u7ec8\u4e8e\u604d\u7136\u5927\u609f\u3002\u64b0\u6b64\u6587\u4ee5\u8bb0\u3002\u672c\u6587\u73af\u5883\uff1aUbuntu16.04(64bit)Python3.6.2\u4f7f\u7528\u7684C\u6e90\u7801\u53ef\u4ee5\u4ecePython\u5b98\u7f51\u83b7\u53d6\u3002\u8d77\u56e0\u5de5\u4f5c\u65f6\u7528\u5230\u4e86celery\u4f5c\u4e3a\u5f02\u6b65\u4efb\u52a1\u961f\u5217\uff0c\u4e3a\u65b9\u4fbf\u8c03\u8bd5\uff0c\u6211\u5199\u4e86\u4e00\u4e2a\u811a\u672c\u7528\u4ee5\u542f\u52a8/\u5173\u95edcelery\u4e3b\u8fdb\u7a0b\u3002\u4ee3\u7801\u7b80\u5316\u540e\u5982\u4e0b\uff1aPythonimportsysimportsubprocess#...celery_process=subprocess.Popen(['celery','-A','XXX','worker'],stdout=subprocess.PIPE,stderr=sys.stderr)try:#StartandwaitforserverprocessexceptKeyboardInterrupt:#Ctrl+Cpressedcelery_process.terminate()celery_process.wait()1234567891011121314importsysimportsubprocess#...celery_process=subprocess.Popen(\u00a0\u00a0\u00a0\u00a0['celery','-A','XXX','worker'],\u00a0\u00a0\u00a0\u00a0stdout=subprocess.PIPE,\u00a0\u00a0\u00a0\u00a0stderr=sys.stderr)try:\u00a0\u00a0\u00a0\u00a0#StartandwaitforserverprocessexceptKeyboardInterrupt:\u00a0\u00a0\u00a0\u00a0#Ctrl+Cpressed\u00a0\u00a0\u00a0\u00a0celery_process.terminate()\u00a0\u00a0\u00a0\u00a0celery_process.wait()\u4ee3\u7801\u542f\u52a8\u4e86celeryworker\uff0c\u5e76\u5c1d\u8bd5\u5728\u6355\u83b7\u5230KeyboardInterrupt\u5f02\u5e38\u65f6\u5c06\u5176\u70ed\u5173\u95ed\u3002\u521d\u770b\u4e0a\u53bb\u6ca1\u4ec0\u4e48\u95ee\u9898\u3002\u7136\u800c\u5b9e\u9645\u6d4b\u8bd5\u65f6\u5374\u53d1\u751f\u4e86\u5341\u5206\u8be1\u5f02\u7684\u4e8b\u60c5\uff1a\u6309\u4e0bCtrl+C\u540e\uff0c\u7a0b\u5e8f\u5076\u5c14\u4f1a\u629b\u51fa\u8fd9\u6837\u7684\u5f02\u5e38\uff1aRuntimeError:reentrantcallinside<_io.BufferedWritername='<stdout>\u2019>\u3002\u8be1\u5f02\u4e4b\u5904\u6709\u4e24\u70b9\uff1a\u5f02\u5e38\u53d1\u751f\u7684\u65f6\u673a\u6709\u968f\u673a\u6027\u5f02\u5e38\u7684traceback\u6307\u5411celery\u5305\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u662f\u5728celery\u4e3b\u8fdb\u7a0b\u5185\u90e8\u53d1\u751f\u7684\u5f02\u5e38\u8fd9\u4e2a\u7ed3\u679c\u5927\u5927\u51fa\u4e4e\u4e86\u6211\u7684\u610f\u6599\u3002\u968f\u673a\u6027\u5f02\u5e38\u662f\u4f17\u591a\u6700\u96be\u7f20\u7684\u95ee\u9898\u4e4b\u4e00\uff0c\u56e0\u4e3a\u8fd9\u5e38\u5e38\u610f\u5473\u7740\u5e76\u53d1\u95ee\u9898\uff0c\u6d89\u53ca\u5e95\u5c42\u77e5\u8bc6\uff0c\u75c5\u7076\u9690\u853d\uff0c\u8c03\u8bd5\u96be\u5ea6\u5927\uff0c\u540c\u65f6\u6ca1\u6709\u6709\u6548\u7684\u624b\u6bb5\u5224\u65ad\u95ee\u9898\u662f\u5426\u5f7b\u5e95\u89e3\u51b3\uff08\u53ef\u80fd\u53ea\u662f\u964d\u4f4e\u4e86\u9891\u7387\uff09\u3002\u89e3\u51b3\u5f02\u5e38\u4fe1\u606f\u4e2d\u6709\u4e24\u4e2a\u8bcd\u5f88\u5173\u952e\uff1areentrant\u548cstdout\u3002reentrantcall\u8bf4\u660e\u6709\u4e00\u4e2a\u4e0d\u53ef\u91cd\u5165\u7684\u51fd\u6570\u88ab\u9012\u5f52\u8c03\u7528\u4e86\uff1bstdout\u5219\u6307\u660e\u4e86\u53d1\u751f\u7684\u5730\u70b9\u548c\u65f6\u673a\u3002\u521d\u6b65\u53ef\u4ee5\u5224\u5b9a\uff1a\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u6709\u4e24\u80a1\u63a7\u5236\u6d41\u5728\u540c\u65f6\u64cd\u63a7stdout\u3002\u201c\u53ef\u91cd\u5165\u201d\u662f\u4ec0\u4e48\uff1f\u6839\u636eWikipedia\u7684\u5b9a\u4e49\uff1a\u5982\u679c\u4e00\u4e2a\u5b50\u7a0b\u5e8f\u80fd\u5728\u6267\u884c\u65f6\u88ab\u4e2d\u65ad\u5e76\u5728\u4e4b\u540e\u88ab\u6b63\u786e\u5730\u3001\u5b89\u5168\u5730\u5524\u8d77\uff0c\u5b83\u5c31\u88ab\u79f0\u4e3a\u53ef\u91cd\u5165\u7684\u3002\u4f9d\u8d56\u4e8e\u5168\u5c40\u6570\u636e\u7684\u8fc7\u7a0b\u662f\u4e0d\u53ef\u91cd\u5165\u7684\uff0c\u5982printf\uff08\u4f9d\u8d56\u4e8e\u5168\u5c40\u6587\u4ef6\u63cf\u8ff0\u7b26\uff09\u3001malloc\uff08\u4f9d\u8d56\u4e0e\u548c\u5806\u76f8\u5173\u7684\u4e00\u7cfb\u5217\u6570\u636e\u7ed3\u6784\uff09\u7b49\u51fd\u6570\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ef\u91cd\u5165\u6027\uff08reentrant\uff09\u4e0e\u7ebf\u7a0b\u5b89\u5168\u6027\uff08thread-safe\uff09\u5e76\u4e0d\u7b49\u4ef7\uff0c\u751a\u81f3\u4e0d\u5b58\u5728\u5305\u542b\u5173\u7cfb\uff0cWikipedia\u4e2d\u7ed9\u51fa\u4e86\u76f8\u5173\u7684\u53cd\u4f8b\u3002\u591a\u6b21\u5c1d\u8bd5\u540e\uff0c\u51fa\u73b0\u4e86\u4e00\u6761\u7ebf\u7d22\uff1a\u6709\u65f6\u5019worker:Warmshutdown(MainProcess)\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4f1a\u88ab\u4e8c\u6b21\u6253\u5370\uff0c\u65f6\u673a\u4e0d\u786e\u5b9a\u3002\u8fd9\u53e5\u8bdd\u662fcelery\u5c06\u8981\u70ed\u5173\u95ed\u65f6\u7684\u63d0\u793a\u8bed\uff0c\u4e8c\u6b21\u51fa\u73b0\u53ea\u53ef\u80fd\u662f\u4e3b\u8fdb\u7a0b\u6536\u5230\u4e86\u7b2c\u4e8c\u4e2a\u4fe1\u53f7\u3002\u9605\u8bfbcelery\u7684\u6587\u6863\u53ef\u77e5\uff0cSIGINT\u548cSIGTERM\u4fe1\u53f7\u53ef\u4ee5\u5f15\u53d1\u70ed\u5173\u95ed\u3002\u56de\u5934\u6d4f\u89c8\u6211\u7684\u4ee3\u7801\uff0c\u5176\u4e2d\u53ea\u6709\u4e00\u5904\u53d1\u9001\u4e86SIGTERM\u4fe1\u53f7\uff08celery_process.terminate()\uff09\uff0c\u81f3\u4e8e\u53e6\u4e00\u4e2a\u795e\u79d8\u7684\u4fe1\u53f7\uff0c\u6211\u6000\u7591\u662fSIGINT\u3002SO\u4e00\u4e0b\uff0c\u7ed3\u679c\u5370\u8bc1\u4e86\u6211\u7684\u731c\u60f3\uff1aIfyouaregeneratingtheSIGINTwithCtrl-ConaUnixsystem,thenthesignalisbeingsenttotheentireprocessgroup.\u2014viaStackOverflowSIGINT\u4fe1\u53f7\u4e0d\u4ec5\u4f1a\u53d1\u9001\u5230\u7236\u8fdb\u7a0b\uff0c\u800c\u662f\u4f1a\u53d1\u5230\u6574\u4e2a\u8fdb\u7a0b\u7ec4\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5305\u62ec\u4e86\u6240\u6709\u5b50\u8fdb\u7a0b\u3002\u4e5f\u5c31\u662f\u8bf4\u2014\u2014\u5728\u62e6\u622a\u4e86KeyboardInterrupt\u4e4b\u540e\u6267\u884c\u7684celery_process.terminate()\u662f\u591a\u6b64\u4e00\u4e3e\uff0c\u56e0\u4e3aSIGINT\u4fe1\u53f7\u4e5f\u4f1a\u88ab\u53d1\u9001\u81f3celery\u4e3b\u8fdb\u7a0b\uff0c\u540c\u6837\u4f1a\u5f15\u8d77\u70ed\u5173\u95ed\u3002\u4ee3\u7801\u7a0d\u4f5c\u4fee\u6539\u5373\u53ef\u6b63\u5e38\u8fd0\u884c\uff1aPython#...try:#StartandwaitforserverprocessexceptKeyboardInterrupt:#Ctrl+Cpressedpasselse:#SignalSIGTERMifnoexceptionraisedcelery_process.terminate()finally:#Waitforittoavoiditbecomingorphancelery_process.wait()123456789101112#...try:\u00a0\u00a0\u00a0\u00a0#StartandwaitforserverprocessexceptKeyboardInterrupt:\u00a0\u00a0\u00a0\u00a0#Ctrl+Cpressed\u00a0\u00a0\u00a0\u00a0passelse:\u00a0\u00a0\u00a0\u00a0#SignalSIGTERMifnoexceptionraised\u00a0\u00a0\u00a0\u00a0celery_process.terminate()finally:\u00a0\u00a0\u00a0\u00a0#Waitforittoavoiditbecomingorphan\u00a0\u00a0\u00a0\u00a0celery_process.wait()\u731c\u6d4bUNIX\u4fe1\u53f7\u5904\u7406\u662f\u4e00\u4e2a\u76f8\u5f53\u5947\u8469\u7684\u8fc7\u7a0b\u2014\u2014\u5f53\u8fdb\u7a0b\u6536\u5230\u4e00\u4e2a\u4fe1\u53f7\u65f6\uff0c\u5185\u6838\u4f1a\u9009\u62e9\u4e00\u6761\u7ebf\u7a0b\uff08\u4ee5\u4e00\u5b9a\u7684\u89c4\u5219\uff09\uff0c\u4e2d\u65ad\u5176\u5f53\u524d\u63a7\u5236\u6d41\uff0c\u5c06\u63a7\u5236\u6d41\u5f3a\u884c\u8f6c\u7ed9\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff0c\u5f85\u5176\u6267\u884c\u5b8c\u6bd5\u540e\u518d\u5c06\u63a7\u5236\u6d41\u4ea4\u8fd8\u7ed9\u539f\u7ebf\u7a0b\u3002\u65f6\u5e8f\u56fe\u5982\u4e0b\uff1a\u7531\u4e8e\u63a7\u5236\u6d41\u8f6c\u6362\u53d1\u751f\u5728\u540c\u4e00\u6761\u7ebf\u7a0b\u4e0a\uff0c\u8bb8\u591a\u7ebf\u7a0b\u95f4\u540c\u6b65\u673a\u5236\u4f1a\u5931\u6548\u751a\u81f3\u62a5\u9519\u3002\u56e0\u6b64\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u7684\u7f16\u5199\u8981\u6bd4\u7ebf\u7a0b\u51fd\u6570\u66f4\u52a0\u4e25\u683c\uff0c\u5bf9\u540c\u4e00\u4e2a\u6587\u4ef6\u8f93\u51fa\u662f\u88ab\u7981\u6b62\u5e76\u4e14\u65e0\u89e3\u7684\uff0c\u56e0\u4e3a\u5f88\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u6837\u7684\u4e8b\u60c5\uff1a\u800c\u4e14\u8fd9\u4e2a\u95ee\u9898\u4e0d\u80fd\u901a\u8fc7\u52a0\u9501\u6765\u89e3\u51b3\uff08\u56e0\u4e3a\u662f\u5728\u540c\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\uff0c\u4f1a\u6b7b\u9501\uff09\u3002\u56e0\u6b64\uff0c\u6211\u731c\u6d4b\u5f02\u5e38\u53d1\u751f\u65f6\u7684\u4e8b\u4ef6\u65f6\u5e8f\u662f\u8fd9\u6837\u7684\uff1a\u5728print\u672a\u6267\u884c\u5b8c\u65f6\u4e2d\u65ad\uff0c\u53c8\u5728\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u4e2d\u8c03\u7528print\uff0c\u89e6\u53d1\u4e86\u91cd\u5165\u68c0\u6d4b\uff0c\u5f15\u8d77RuntimeError\uff1a\u7591\u4e91\u53c8\u8d77\u4e0d\u5e78\u7684\u662f\uff0c\u6211\u7684\u731c\u60f3\u5f88\u5feb\u88ab\u63a8\u7ffb\u4e86\u3002\u5728\u7ffb\u770bPythonsignal\u6a21\u5757\u7684\u5b98\u65b9\u6587\u6863\uff0c\u6211\u770b\u5230\u4e86\u5982\u4e0b\u53d9\u8ff0\uff1aAPythonsignalhandlerdoesnotgetexecutedinsidethelow-level(C)signalhandler.Instead,thelow-levelsignalhandlersetsaflagwhichtellsthevirtualmachinetoexecutethecorrespondingPythonsignalhandleratalaterpoint(forexampleatthenextbytecodeinstruction).\u2014viaPythonDocumentation\u4e5f\u5c31\u662f\u8bf4\uff0cPython\u4e2d\u4f7f\u7528signal.signal\u6ce8\u518c\u7684\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u5e76\u4e0d\u4f1a\u5728\u6536\u5230\u4fe1\u53f7\u65f6\u7acb\u5373\u6267\u884c\uff0c\u800c\u53ea\u662f\u7b80\u5355\u505a\u4e00\u4e2a\u6807\u8bb0\uff0c\u5c06\u5176\u5ef6\u8fdf\u81f3\u4e4b\u540e\u7684\u67d0\u4e2a\u65f6\u673a\u3002\u8fd9\u4e48\u505a\u53ef\u4ee5\u5c3d\u91cf\u5feb\u5730\u7ed3\u675f\u5f02\u5e38\u63a7\u5236\u6d41\uff0c\u51cf\u5c11\u5176\u5bf9\u88ab\u963b\u65ad\u8fdb\u7a0b\u7684\u5f71\u54cd\u3002\u8fd9\u756a\u8868\u8ff0\u53ef\u4ee5\u8bf4\u662f\u63a8\u7ffb\u4e86\u6211\u7684\u731c\u60f3\uff0c\u56e0\u4e3aSignalHandler\u4e2d\u7684print\u5e76\u6ca1\u6709\u5728\u5f02\u5e38\u63a7\u5236\u6d41\u4e2d\u6267\u884c\u3002\u90a3\u5f02\u5e38\u53c8\u662f\u600e\u4e48\u4ea7\u751f\u7684\u5462\uff1f\u6587\u6863\u8bf4PythonSignalHandler\u4f1a\u88ab\u5ef6\u540e\u81f3\u67d0\u4e2a\u65f6\u673a\u8fdb\u884c\uff0c\u4f46\u5e76\u6ca1\u6709\u660e\u793a\u662f\u4ec0\u4e48\u65f6\u5019\u3002\u5bf9\u4e8e\u8fd9\u4e2a\u7591\u95ee\uff0c\u8fd9\u4e2a\u63d0\u95ee\u7684\u88ab\u91c7\u7eb3\u56de\u7b54\u5219\u65a9\u9489\u622a\u94c1\u5730\u5c06\u5176\u5177\u4f53\u5316\u5230\u4e86\u201c\u67d0\u4e24\u4e2aPython\u5b57\u8282\u7801\u4e4b\u95f4\u201d\u3002\u6211\u4eec\u77e5\u9053\uff0cPython\u7a0b\u5e8f\u5728\u6267\u884c\u524d\u4f1a\u88ab\u7f16\u8bd1\u6210Python\u5185\u5b9a\u7684\u5b57\u8282\u7801\uff08bytecode\uff09,Python\u865a\u62df\u673a\u5b9e\u9645\u6267\u884c\u7684\u6b63\u662f\u8fd9\u4e9b\u5b57\u8282\u7801\u3002\u5018\u82e5\u8be5\u56de\u7b54\u662f\u6b63\u786e\u7684\uff0c\u5219\u7acb\u5373\u6709\u5982\u4e0b\u63a8\u8bba\uff1a\u5728\u5904\u7406\u4fe1\u53f7\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5b57\u8282\u7801\u5177\u6709\u539f\u5b50\u6027\uff08atomic\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e3b\u7ebf\u7a0b\u603b\u662f\u5728\u4e24\u4e2a\u5b57\u8282\u7801\u4e4b\u95f4\u51b3\u5b9a\u662f\u5426\u8f6c\u79fb\u63a7\u5236\u6d41\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u60c5\u51b5\uff1a\u8fd9\u5f88\u663e\u7136\u4e0e\u6211\u7684\u7a0b\u5e8f\u7ed3\u679c\u76f8\u6096\uff1aprint\u4e0eprint\u6240\u8c03\u7528\u7684io.BufferedWriter.write\u548cio.BufferedWriter.flush\u90fd\u662f\u7528\u7eafC\u4ee3\u7801\u7f16\u5199\u7684\uff0c\u5bf9\u5176\u7684\u8c03\u7528\u53ea\u6d88\u8017\u4e00\u6761\u5b57\u8282\u7801\uff08CALL_FUNCTION\u6216CALL_FUNCTION_KW\uff09\uff0c\u5728\u4fe1\u53f7\u4e2d\u65ad\u7684\u5f71\u54cd\u4e0b\uff0c\u8fd9\u51e0\u4e2a\u51fd\u6570\u4ecd\u4fdd\u6301\u539f\u5b50\u6027\uff0c\u5728\u65f6\u5e8f\u56fe\u4e0a\u4e92\u4e0d\u91cd\u53e0\uff0c\u66f4\u4e0d\u4f1a\u53d1\u751f\u91cd\u5165\u3002\u56e0\u6b64\uff0c\u9664\u4e86\u5728\u4e24\u4e2a\u5b57\u8282\u7801\u4e4b\u95f4\uff0c\u5e94\u8be5\u8fd8\u6709\u5176\u4ed6\u65f6\u673a\u5524\u8d77\u4e86PythonSignalHandler\u3002\u81f3\u6b64\uff0c\u95ee\u9898\u5df2\u89e6\u53caPython\u7684\u5730\u677f\u4e86\uff0c\u9700\u5411\u66f4\u5e95\u5c42\u6316\u6398\u624d\u80fd\u627e\u5230\u7b54\u6848\u3002\u6df1\u5165\u6e90\u7801\u4fe1\u53f7\u6ce8\u518c\u903b\u8f91\u4f4d\u4e8eModules/signalmodule.c\u6587\u4ef6\u4e2d\u3002313\u884c\u7684signal_handler\u662f\u4fe1\u53f7\u5904\u7406\u51fd\u6570\u7684\u6700\u5916\u5c42\u5305\u88c5\uff0c\u7531\u7cfb\u7edf\u8c03\u7528signal\u6216sigaction\u6ce8\u518c\u81f3\u5185\u6838\uff0c\u5e76\u5728\u4fe1\u53f7\u53d1\u751f\u65f6\u88ab\u5185\u6838\u56de\u8c03\uff0c\u662f\u5f02\u5e38\u63a7\u5236\u6d41\u7684\u5165\u53e3\u3002signal_handler\u4e3b\u8981\u8c03\u7528\u4e86239\u884c\u5904\u7684trip_signal\u51fd\u6570\uff0c\u5176\u4e2d\u6709\u8fd9\u6837\u4e00\u6bb5\u4ee3\u7801\uff1aPythonHandlers[sig_num].tripped=1;if(!is_tripped){is_tripped=1;Py_AddPendingCall(checksignals_witharg,NULL);}123456Handlers[sig_num].tripped=1;\u00a0if(!is_tripped){\u00a0\u00a0\u00a0\u00a0is_tripped=1;\u00a0\u00a0\u00a0\u00a0Py_AddPendingCall(checksignals_witharg,NULL);}\u8fd9\u6bb5\u4ee3\u7801\u4fbf\u662f\u6587\u6863\u4e2d\u6240\u8bf4\u7684\u903b\u8f91\uff1a\u505a\u6807\u8bb0\u5e76\u5ef6\u540ePythonSignalHandler\u3002\u5176\u4e2dchecksignals_witharg\u5373\u4e3a\u88ab\u5ef6\u540e\u8c03\u7528\u7684\u51fd\u6570\uff0c\u4f4d\u4e8e192\u884c\uff0c\u6838\u5fc3\u4ee3\u7801\u53ea\u6709\u4e00\u53e5\uff1aPythonstaticintchecksignals_witharg(void*unused){returnPyErr_CheckSignals();}12345staticintchecksignals_witharg(void*unused){\u00a0\u00a0\u00a0\u00a0returnPyErr_CheckSignals();}PyErr_CheckSignals\u4f4d\u4e8e1511\u884c\uff1aPythonintPyErr_CheckSignals(void){inti;PyObject*f;if(!is_tripped)return0;#ifdefWITH_THREADif(PyThread_get_thread_ident()!=main_thread)return0;#endifis_tripped=0;if(!(f=(PyObject*)PyEval_GetFrame()))f=Py_None;for(i=1;i<NSIG;i++){if(Handlers[i].tripped){PyObject*result=NULL;PyObject*arglist=Py_BuildValue(\"(iO)\",i,f);Handlers[i].tripped=0;if(arglist){result=PyEval_CallObject(Handlers[i].func,arglist);Py_DECREF(arglist);}if(!result)return-1;Py_DECREF(result);}}return0;}123456789101112131415161718192021222324252627282930313233343536373839intPyErr_CheckSignals(void){\u00a0\u00a0\u00a0\u00a0inti;\u00a0\u00a0\u00a0\u00a0PyObject*f;\u00a0\u00a0\u00a0\u00a0\u00a0if(!is_tripped)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return0;\u00a0#ifdefWITH_THREAD\u00a0\u00a0\u00a0\u00a0if(PyThread_get_thread_ident()!=main_thread)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return0;#endif\u00a0\u00a0\u00a0\u00a0\u00a0is_tripped=0;\u00a0\u00a0\u00a0\u00a0\u00a0if(!(f=(PyObject*)PyEval_GetFrame()))\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0f=Py_None;\u00a0\u00a0\u00a0\u00a0\u00a0for(i=1;i<NSIG;i++){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(Handlers[i].tripped){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0PyObject*result=NULL;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0PyObject*arglist=Py_BuildValue(\"(iO)\",i,f);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Handlers[i].tripped=0;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(arglist){\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result=PyEval_CallObject(Handlers[i].func,\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0arglist);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Py_DECREF(arglist);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if(!result)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return-1;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Py_DECREF(result);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0}\u00a0\u00a0\u00a0\u00a0\u00a0return0;}\u53ef\u89c1\uff0c\u8fd9\u4e2a\u51fd\u6570\u4fbf\u662f\u5f02\u6b65\u56de\u8c03\u7684\u6700\u91cc\u5c42\uff0c\u5305\u542b\u4e86\u6267\u884cPythonSignalHandler\u7684\u903b\u8f91\u3002\u81f3\u6b64\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6574\u4e2aPython\u4e2d\u6709\u4e24\u4e2a\u529e\u6cd5\u53ef\u4ee5\u5524\u8d77PythonSignalHandler\uff0c\u4e00\u4e2a\u662f\u8c03\u7528checksignals_witharg\uff0c\u53e6\u4e00\u4e2a\u662f\u8c03\u7528PyErr_CheckSignals\u3002\u524d\u8005\u53ea\u662f\u540e\u8005\u7684\u7b80\u5355\u5c01\u5305\u3002checksignals_witharg\u5728Python\u6e90\u7801\u4e2d\u53ea\u51fa\u73b0\u4e86\u4e00\u6b21\uff08\u4e0d\u5305\u62ec\u5b9a\u4e49\uff0c\u4e0b\u540c\uff09\uff0c\u6ca1\u6709\u88ab\u76f4\u63a5\u8c03\u7528\u7684\u8ff9\u8c61\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cchecksignals_witharg\u66fe\u88ab\u5f53\u505aPy_AddPendingCall\u7684\u53c2\u6570\uff0cPy_AddPendingCall\u6240\u505a\u7684\u5de5\u4f5c\u65f6\u5c06\u5176\u52a0\u5165\u5230\u4e00\u4e2a\u5168\u5c40\u961f\u5217\u4e2d\u3002\u4e0e\u4e4b\u5bf9\u5e94\u7684\u51fa\u961f\u64cd\u4f5c\u662fPy_MakePendingCalls\uff0c\u4f4d\u4e8ePython/ceval.c\u7684464\u884c\u3002\u6b64\u51fd\u6570\u4f1a\u95f4\u63a5\u8c03\u7528checksignals_witharg\uff0c\u5728Python\u6e90\u7801\u4e2d\u88ab\u8c03\u7528\u4e863\u6b21\uff1aModules/_threadmodule.c52\u884c\u7684acquire_timedModules/main.c310\u884c\u7684run_filePython/ceval.c722\u884c\u7684_PyEval_EvalFrameDefault\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c_PyEval_EvalFrameDefault\u662f\u4e00\u4e2a\u957f\u8fbe2600\u591a\u884c\u7684\u72b6\u6001\u673a\uff0c\u662f\u89e3\u6790\u5b57\u8282\u7801\u7684\u6838\u5fc3\u903b\u8f91\u6240\u5728\u3002\u6b64\u5904\u8c03\u7528\u51fa\u73b0\u4e8e\u72b6\u6001\u673a\u4e3b\u5faa\u73af\u5f00\u59cb\u5904\u2014\u2014\u8fd9\u5370\u8bc1\u4e86\u4e0a\u9762\u56de\u7b54\u4e2d\u7684\u90e8\u5206\u8bf4\u6cd5\uff0c\u5373Python\u4f1a\u5728\u4e24\u4e2a\u5b57\u8282\u7801\u4e2d\u95f4\u5524\u8d77PythonSignalHanlder\u3002\u800cPyErr_CheckSignals\u5728Python\u6e90\u7801\u4e2d\u51fa\u73b0\u4e8680\u591a\u5904\uff0c\u904d\u5e03Python\u7684\u5404\u4e2a\u6a21\u5757\u4e2d\u2014\u2014\u8fd9\u8bf4\u660e\u8be5\u56de\u7b54\u7684\u53e6\u4e00\u534a\u8bf4\u6cd5\u662f\u9519\u8bef\u7684\uff1a\u9664\u4e86\u5728\u4e24\u4e2a\u5b57\u8282\u7801\u4e4b\u95f4\uff0cPython\u8fd8\u53ef\u80fd\u5728\u5176\u4ed6\u89d2\u843d\u5524\u8d77PythonSignalHandler\u3002\u5176\u4e2d\u6709\u4e24\u5904\u503c\u5f97\u6ce8\u610f\uff0c\u5b83\u4eec\u90fd\u4f4d\u4e8eModules/_io/bufferedio.c\u4e2d\uff1a1884\u884c\u7684_bufferedwriter_flush_unlocked1939\u884c\u7684_io_BufferedWriter_write_impl\u8fd9\u4e24\u4e2a\u51fd\u6570\u662fio.BufferedWriter\u7c7b\u7684\u5e95\u5c42\u5b9e\u73b0\uff0c\u4f1a\u88abprint\u95f4\u63a5\u8c03\u7528\u3002\u4ed4\u7ec6\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\uff0c\u5b83\u4eec\u90fd\u6709\u7740\u76f8\u4f3c\u7684\u7ed3\u6784\uff1aPythonENTER_BUFFERED(self)//...PyErr_CheckSignals();//...LEAVE_BUFFERED(self)12345ENTER_BUFFERED(self)//...PyErr_CheckSignals();//...LEAVE_BUFFERED(self)ENTER_BUFFERED\u662f\u4e00\u4e2a\u5b8f\uff0c\u4f1a\u5c1d\u8bd5\u7533\u8bf7\u65e0\u963b\u585e\u7ebf\u7a0b\u9501\u4ee5\u4fdd\u8bc1\u51fd\u6570\u4e0d\u4f1a\u88ab\u91cd\u5165\uff1aPython#defineENTER_BUFFERED(self)\\((PyThread_acquire_lock(self->lock,0)?\\1:_enter_buffered_busy(self))\\&&(self->owner=PyThread_get_thread_ident(),1))1234#defineENTER_BUFFERED(self)\\\u00a0\u00a0\u00a0\u00a0((PyThread_acquire_lock(self->lock,0)?\\\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01:_enter_buffered_busy(self))\\\u00a0\u00a0\u00a0\u00a0&&(self->owner=PyThread_get_thread_ident(),1))\u81f3\u6b64\uff0c\u771f\u76f8\u5df2\u7ecf\u5927\u767d\u4e86\u3002\u771f\u76f8\u5f53\u4fe1\u53f7\u4e2d\u65ad\u53d1\u751f\u5728_bufferedwriter_flush_unlocked\u6216_io_BufferedWriter_write_impl\u4e2d\u65f6\uff0c\u8fd9\u4e24\u4e2a\u51fd\u6570\u4e2d\u7684PyErr_CheckSignals\u4f1a\u76f4\u63a5\u5524\u8d77PythonSignalHandler\uff0c\u800c\u6b64\u65f6\u7531ENTER_BUFFERED\u4e0a\u7684\u9501\u5c1a\u672a\u89e3\u5f00\uff0c\u82e5PythonSignalHandler\u4e2d\u53c8\u6709print\u51fd\u6570\u8c03\u7528\uff0c\u5219\u4f1a\u5bfc\u81f4\u518d\u6b21ENTER_BUFFERED\u4e0a\u9501\u5931\u8d25\uff0c\u4ece\u800c\u629b\u51fa\u5f02\u5e38\u3002\u65f6\u5e8f\u56fe\u5982\u4e0b\uff1a\u601d\u8003\u4e3a\u4ec0\u4e48\u4e0d\u5c06PythonSignalHandler\u8c03\u7528\u7684\u5730\u70b9\u7edf\u4e00\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u800c\u662f\u6563\u5e03\u5728\u7a0b\u5e8f\u7684\u5404\u5904\u5462\uff1f\u9605\u8bfb\u76f8\u5173\u4ee3\u7801\uff0c\u6211\u8ba4\u4e3a\u6709\u4e24\u70b9\u539f\u56e0\uff1a\u4fe1\u53f7\u4e2d\u65ad\u4f1a\u4f7f\u67d0\u4e9b\u7cfb\u7edf\u8c03\u7528\u884c\u4e3a\u5f02\u5e38\uff0c\u4ece\u800c\u4f7f\u7cfb\u7edf\u8c03\u7528\u7684\u8c03\u7528\u8005\u4e0d\u77e5\u5982\u4f55\u5904\u7406\uff0c\u6b64\u65f6\u9700\u8981\u8c03\u7528SignalHandler\u8fdb\u884c\u53ef\u80fd\u7684\u72b6\u6001\u6062\u590d\u3002\u4e00\u4e2a\u4f8b\u5b50\u662fwrite\u7cfb\u7edf\u8c03\u7528\uff0c\u4fe1\u53f7\u4e2d\u65ad\u4f1a\u5bfc\u81f4\u6570\u636e\u90e8\u5206\u5199\u56de\uff0c\u4e0e\u6b64\u76f8\u5173\u7684\u4e00\u5927\u6279I/O\u51fd\u6570\uff08\u5305\u62ec\u51fa\u95ee\u9898\u7684_bufferedwriter_flush_unlocked\u548c_io_BufferedWriter_write_impl\uff09\u4fbf\u53ea\u80fd\u76f8\u5e94\u5730\u8c03\u7528PyErr_CheckSignals\u3002\u67d0\u4e9b\u51fd\u6570\u9700\u8981\u505a\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u4e3a\u4e86\u9632\u6b62PythonSignalHandler\u7684\u8c03\u7528\u88ab\u8fc7\u957f\u5730\u5ef6\u540e\uff08\u5176\u5b9e\u4e3b\u8981\u662f\u4e3a\u4e86\u53ca\u65f6\u54cd\u5e94\u952e\u76d8\u4e2d\u65ad\uff0c\u9632\u6b62\u7a0b\u5e8f\u65e0\u6cd5\u4ece\u524d\u53f0\u7ed3\u675f\uff09\uff0c\u5fc5\u987b\u9002\u65f6\u5730\u68c0\u67e5\u5e76\u8c03\u7528PythonSignalHandler\u3002\u4e00\u4e2a\u4f8b\u5b50\u662fObjects/longobject.c\u4e2d\u7684\u8bf8\u51fd\u6570\uff0clongobject.c\u5b9a\u4e49\u4e86Python\u7279\u6709\u7684\u65e0\u9650\u957f\u6574\u578b\uff0c\u5176\u76f8\u5173\u7684\u8fd0\u7b97\u53ef\u80fd\u8017\u65f6\u76f8\u5f53\u957f\uff0c\u5fc5\u987b\u505a\u8fd9\u6837\u7684\u5904\u7406\u3002\u603b\u7ed3PythonSignalHandler\u7684\u8c03\u7528\u4f1a\u88ab\u5ef6\u540e\uff0c\u4f46\u65f6\u673a\u4e0d\u6b62\u5728\u4e24\u4e2a\u5b57\u8282\u7801\u4e4b\u95f4\uff0c\u800c\u662f\u53ef\u80fd\u51fa\u73b0\u5728\u4efb\u4f55\u5730\u65b9\u3002\u7531\u4e8e\u7b2c\u4e00\u6761\uff0cPythonSignalHandler\u4e2d\u5c3d\u91cf\u90fd\u4f7f\u7528\u53ef\u91cd\u5165\u7684\u7684\u51fd\u6570\uff0c\u4ee5\u907f\u514d\u5947\u602a\u7684\u95ee\u9898\u3002\u53ef\u91cd\u5165\u6027\u53ef\u4ee5\u4ece\u6587\u6863\u83b7\u77e5\uff0c\u4e5f\u53ef\u4ee5\u7ed3\u5408\u5b9a\u4e49\u7531\u6e90\u7801\u63a8\u65ad\u51fa\u6765\u3002\u6709\u7591\u95ee\uff0c\u7ffb\u6e90\u7801\u3002\u4eba\u4f1a\u8bf4\u8c0e\uff0c\u4ee3\u7801\u4e0d\u4f1a\u30021\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python \u722c\u866b (\u4e09) - Socket \u7f51\u7edc\u7f16\u7a0b"], "art_url": ["http://python.jobbole.com/88396/"], "art_create_time": ["2017/08/25"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2017/08/e9fe0c92fbce827c80d976dd417a8a82.png"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aAndrew_liu\u00a0\u00a0\u00a0python\u7684\u7f51\u7edc\u53d8\u6210\u6bd4c\u8bed\u8a00\u7b80\u5355\u8bb8\u591a,\u5c01\u88c5\u8bb8\u591a\u5e95\u5c42\u7684\u5b9e\u73b0\u7ec6\u8282,\u65b9\u4fbf\u7a0b\u5e8f\u5458\u4f7f\u7528\u7684\u540c\u65f6,\u4e5f\u4f7f\u7a0b\u5e8f\u5458\u6bd4\u8f83\u96be\u4e86\u89e3\u4e00\u4e9b\u5e95\u5c42\u7684\u4e1c\u897f,\u6211\u89c9\u5f97\u5b66\u7f51\u7edc\u7f16\u7a0b\u8fd8\u662f\u7528c\u8bed\u8a00\u66f4\u597d\u4e00\u70b9.\u5199\u8fd9\u7bc7\u535a\u6587,\u4e5f\u5e0c\u671b\u56de\u987e\u5e76\u6574\u7406\u4e00\u4e0b\u4ee5\u524d\u5b66\u8fc7\u7684c\u8bed\u8a00\u548clinux\u4e0b\u4e00\u4e9b\u4e1c\u897f,\u4f1a\u5c06\u4e00\u4e9bLinux\u7f51\u7edc\u7f16\u7a0b\u7684\u51fd\u6570\u548cPython\u7f51\u7edc\u53d8\u6210\u51fd\u6570\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u5bf9\u7167,\u65b9\u4fbf\u8bb0\u5fc61.Socket\u5957\u63a5\u5b57\u7684\u6982\u5ff5Socket(\u7ffb\u8bd1\u4e3a\u5957\u63a5\u5b57,\u6211\u89c9\u5f97\u5f88\u632b),\u662f\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4e2d\u7684\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u662f\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u8fdb\u884c\u76f8\u4e92\u901a\u4fe1\u7684\u95e8\u6237\u3002\u5b83\u662f\u7f51\u7edc\u8fdb\u7a0b\u7684ID\u3002\u7f51\u7edc\u901a\u4fe1\uff0c\u5f52\u6839\u5230\u5e95\u8fd8\u662f\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\uff08\u4e0d\u540c\u8ba1\u7b97\u673a\u4e0a\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1,\u53c8\u79f0\u8fdb\u7a0b\u95f4\u901a\u4fe1,IP\u534f\u8bae\u8fdb\u884c\u7684\u4e3b\u8981\u662f\u7aef\u5230\u7aef\u901a\u4fe1\uff09\u3002\u5728\u7f51\u7edc\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u8282\u70b9\uff08\u8ba1\u7b97\u673a\u6216\u8def\u7531\uff09\u90fd\u6709\u4e00\u4e2a\u7f51\u7edc\u5730\u5740\uff0c\u4e5f\u5c31\u662fIP\u5730\u5740\u3002\u4e24\u4e2a\u8fdb\u7a0b\u901a\u4fe1\u65f6\uff0c\u9996\u5148\u8981\u786e\u5b9a\u5404\u81ea\u6240\u5728\u7684\u7f51\u7edc\u8282\u70b9\u7684\u7f51\u7edc\u5730\u5740\u3002\u4f46\u662f\uff0c\u7f51\u7edc\u5730\u5740\u53ea\u80fd\u786e\u5b9a\u8fdb\u7a0b\u6240\u5728\u7684\u8ba1\u7b97\u673a\uff0c\u800c\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0a\u5f88\u53ef\u80fd\u540c\u65f6\u8fd0\u884c\u7740\u591a\u4e2a\u8fdb\u7a0b\uff0c\u6240\u4ee5\u4ec5\u51ed\u7f51\u7edc\u5730\u5740\u8fd8\u4e0d\u80fd\u786e\u5b9a\u5230\u5e95\u662f\u548c\u7f51\u7edc\u4e2d\u7684\u54ea\u4e00\u4e2a\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\uff0c\u56e0\u6b64\u5957\u63a5\u53e3\u4e2d\u8fd8\u9700\u8981\u5305\u62ec\u5176\u4ed6\u7684\u4fe1\u606f\uff0c\u4e5f\u5c31\u662f\u7aef\u53e3\u53f7\uff08PORT\uff09\u3002\u5728\u4e00\u53f0\u8ba1\u7b97\u673a\u4e2d\uff0c\u4e00\u4e2a\u7aef\u53e3\u53f7\u4e00\u6b21\u53ea\u80fd\u5206\u914d\u7ed9\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u4e00\u53f0\u8ba1\u7b97\u673a\u4e2d\uff0c\u7aef\u53e3\u53f7\u548c\u8fdb\u7a0b\u4e4b\u95f4\u662f\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u3002\u6240\u4ee5\uff0c\u4f7f\u7528\u7aef\u53e3\u53f7\u548c\u7f51\u7edc\u5730\u5740\u7684\u7ec4\u5408\u53ef\u4ee5\u552f\u4e00\u7684\u786e\u5b9a\u6574\u4e2a\u7f51\u7edc\u4e2d\u7684\u4e00\u4e2a\u7f51\u7edc\u8fdb\u7a0b.\u7aef\u53e3\u53f7\u7684\u8303\u56f4\u4ece0~65535\uff0c\u4e00\u7c7b\u662f\u7531\u4e92\u8054\u7f51\u6307\u6d3e\u540d\u5b57\u548c\u53f7\u7801\u516c\u53f8ICANN\u8d1f\u8d23\u5206\u914d\u7ed9\u4e00\u4e9b\u5e38\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\u56fa\u5b9a\u4f7f\u7528\u7684\u201c\u5468\u77e5\u7684\u7aef\u53e3\u201d\uff0c\u5176\u503c\u4e00\u822c\u4e3a0~1023,\u7528\u6237\u81ea\u5b9a\u4e49\u7aef\u53e3\u53f7\u4e00\u822c\u5927\u4e8e\u7b49\u4e8e1024,\u6211\u6bd4\u8f83\u559c\u6b22\u75288888\u6bcf\u4e00\u4e2asocket\u90fd\u7528\u4e00\u4e2a\u534a\u76f8\u5173\u63cf\u8ff0{\u534f\u8bae\u3001\u672c\u5730\u5730\u5740\u3001\u672c\u5730\u7aef\u53e3}\u6765\u8868\u793a\uff1b\u4e00\u4e2a\u5b8c\u6574\u7684\u5957\u63a5\u5b57\u5219\u7528\u4e00\u4e2a\u76f8\u5173\u63cf\u8ff0{\u534f\u8bae\u3001\u672c\u5730\u5730\u5740\u3001\u672c\u5730\u7aef\u53e3\u3001\u8fdc\u7a0b\u5730\u5740\u3001\u8fdc\u7a0b\u7aef\u53e3}\u6765\u8868\u793a\u3002socket\u4e5f\u6709\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u6253\u5f00\u6587\u4ef6\u7684\u51fd\u6570\u8c03\u7528\uff0c\u8be5\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u6574\u578b\u7684socket\u63cf\u8ff0\u7b26\uff0c\u968f\u540e\u7684\u8fde\u63a5\u5efa\u7acb\u3001\u6570\u636e\u4f20\u8f93\u7b49\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7socket\u6765\u5b9e\u73b0\u76841.1.Socket\u7c7b\u578bsocket\u7c7b\u578b\u5728Liunx\u548cPython\u662f\u4e00\u6837\u7684,\u53ea\u662fPython\u4e2d\u7684\u7c7b\u578b\u90fd\u5b9a\u4e49\u5728socket\u6a21\u5757\u4e2d,\u8c03\u7528\u65b9\u5f0fsocket.SOCK_XXXX\u6d41\u5f0fsocket\uff08SOCK_STREAM\uff09\u7528\u4e8eTCP\u901a\u4fe1\u6d41\u5f0f\u5957\u63a5\u5b57\u63d0\u4f9b\u53ef\u9760\u7684\u3001\u9762\u5411\u8fde\u63a5\u7684\u901a\u4fe1\u6d41\uff1b\u5b83\u4f7f\u7528TCP\u534f\u8bae\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u6570\u636e\u4f20\u8f93\u7684\u6b63\u786e\u6027\u548c\u987a\u5e8f\u6027\u6570\u636e\u62a5socket\uff08SOCK_DGRAM\uff09\u7528\u4e8eUDP\u901a\u4fe1\u6570\u636e\u62a5\u5957\u63a5\u5b57\u5b9a\u4e49\u4e86\u4e00\u79cd\u65e0\u8fde\u63a5\u7684\u670d\u52a1\uff0c\u6570\u636e\u901a\u8fc7\u76f8\u4e92\u72ec\u7acb\u7684\u62a5\u6587\u8fdb\u884c\u4f20\u8f93\uff0c\u662f\u65e0\u5e8f\u7684\uff0c\u5e76\u4e14\u4e0d\u4fdd\u8bc1\u662f\u53ef\u9760\u3001\u65e0\u5dee\u9519\u7684\u3002\u5b83\u4f7f\u7528\u6570\u636e\u62a5\u534f\u8baeUDP\u539f\u59cbsocket\uff08SOCK_RAW\uff09\u7528\u4e8e\u65b0\u7684\u7f51\u7edc\u534f\u8bae\u5b9e\u73b0\u7684\u6d4b\u8bd5\u7b49\u539f\u59cb\u5957\u63a5\u5b57\uff0c\u666e\u901a\u7684\u5957\u63a5\u5b57\u65e0\u6cd5\u5904\u7406ICMP\u3001IGMP\u7b49\u7f51\u7edc\u62a5\u6587\uff0c\u800cSOCK_RAW\u53ef\u4ee5,\u5176\u6b21\uff0cSOCK_RAW\u4e5f\u53ef\u4ee5\u5904\u7406\u7279\u6b8a\u7684IPv4\u62a5\u6587\uff1b\u6b64\u5916\uff0c\u5229\u7528\u539f\u59cb\u5957\u63a5\u5b57\uff0c\u53ef\u4ee5\u901a\u8fc7IP_HDRINCL\u5957\u63a5\u5b57\u9009\u9879\u7531\u7528\u6237\u6784\u9020IP\u5934\u30022.Socket\u7f16\u7a0b2.1.TCP\u901a\u4fe1TCP\u901a\u4fe1\u7684\u57fa\u672c\u6b65\u9aa4\u5982\u4e0b\uff1a\u670d\u52a1\u7aef\uff1asocket\u2014bind\u2014listen\u2014while(True){\u2014accept\u2014recv\u2014send\u2014-}\u2014close\u5ba2\u6237\u7aef\uff1asocket\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-connect\u2014send\u2014recv\u2014\u2014-closeTCPsocket\u51fd\u6570\u4f7f\u7528\u7ed9\u5b9a\u7684\u5730\u5740\u65cf\u3001\u5957\u63a5\u5b57\u7c7b\u578b\u3001\u534f\u8bae\u7f16\u53f7\uff08\u9ed8\u8ba4\u4e3a0\uff09\u6765\u521b\u5efa\u5957\u63a5\u5b57Python#Linuxintsocket(intdomain,inttype,intprotocol);domain\uff1aAF_INET\uff1aIpv4\u7f51\u7edc\u534f\u8baeAF_INET6\uff1aIPv6\u7f51\u7edc\u534f\u8baetype:tcp\uff1aSOCK_STREAMudp\uff1aSOCK_DGRAMprotocol:\u6307\u5b9asocket\u6240\u4f7f\u7528\u7684\u4f20\u8f93\u534f\u8bae\u7f16\u53f7\u3002\u901a\u5e38\u4e3a0.\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u5957\u63a5\u53e3\u63cf\u8ff0\u7b26\uff0c\u5931\u8d25\u8fd4\u56de-1\u3002#pythonsocket.socket([family[,type[,proto]]])family:AF_INET(\u9ed8\u8ba4ipv4),AF_INET6(ipv6)orAF_UNIX(Unix\u7cfb\u7edf\u8fdb\u7a0b\u95f4\u901a\u4fe1).type:SOCK_STREAM(TCP),SOCK_DGRAM(UDP).protocol:\u4e00\u822c\u4e3a0\u6216\u8005\u9ed8\u8ba4\u5982\u679csocket\u521b\u5efa\u5931\u8d25\u4f1a\u629b\u51fa\u4e00\u4e2asocket.error\u5f02\u5e381234567891011121314#Linuxintsocket(intdomain,inttype,intprotocol);domain\uff1aAF_INET\uff1aIpv4\u7f51\u7edc\u534f\u8baeAF_INET6\uff1aIPv6\u7f51\u7edc\u534f\u8baetype:tcp\uff1aSOCK_STREAM\u00a0\u00a0udp\uff1aSOCK_DGRAMprotocol:\u6307\u5b9asocket\u6240\u4f7f\u7528\u7684\u4f20\u8f93\u534f\u8bae\u7f16\u53f7\u3002\u901a\u5e38\u4e3a0.\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u5957\u63a5\u53e3\u63cf\u8ff0\u7b26\uff0c\u5931\u8d25\u8fd4\u56de-1\u3002\u00a0#pythonsocket.socket([family[,type[,proto]]])family:AF_INET(\u9ed8\u8ba4ipv4),AF_INET6(ipv6)orAF_UNIX(Unix\u7cfb\u7edf\u8fdb\u7a0b\u95f4\u901a\u4fe1).type:SOCK_STREAM(TCP),SOCK_DGRAM(UDP).protocol:\u4e00\u822c\u4e3a0\u6216\u8005\u9ed8\u8ba4\u00a0\u5982\u679csocket\u521b\u5efa\u5931\u8d25\u4f1a\u629b\u51fa\u4e00\u4e2asocket.error\u5f02\u5e382.1.1.\u670d\u52a1\u5668\u7aef\u51fd\u6570bind\u51fd\u6570\u5c06\u5957\u63a5\u5b57\u7ed1\u5b9a\u5230\u5730\u5740,python\u4e0b,\u4ee5\u5143\u7ec4\uff08host,port\uff09\u7684\u5f62\u5f0f\u8868\u793a\u5730\u5740,Linux\u4e0b\u4f7f\u7528sockaddr_in\u7ed3\u6784\u4f53\u6307\u9488Python#Linuxintbind(intsockfd,structsockaddr*my_addr,intaddrlen);sockfd:\u524d\u9762socket()\u7684\u8fd4\u56de\u503cmy_addr:\u7ed3\u6784\u4f53\u6307\u9488\u53d8\u91cf#####structsockaddr_in//\u5e38\u7528\u7684\u7ed3\u6784\u4f53{unsignedshortintsin_family;//\u5373\u4e3asa_familyAF_INETuint16_tsin_port;//\u4e3a\u4f7f\u7528\u7684port\u7f16\u53f7structin_addrsin_addr;//\u4e3aIP\u5730\u5740unsignedcharsin_zero[8];//\u672a\u4f7f\u7528};structin_addr{uint32_ts_addr;};####addrlen:sockaddr\u7684\u7ed3\u6784\u4f53\u957f\u5ea6\u3002\u901a\u5e38\u662f\u8ba1\u7b97sizeof(structsockaddr);\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1#pythons.bind(address)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61address\u4e3a\u5143\u7ec4\uff08host,port\uff09host:ip\u5730\u5740,\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32post:\u81ea\u5b9a\u4e49\u4e3b\u673a\u53f7,\u4e3a\u6574\u578b12345678910111213141516171819202122232425262728#Linuxintbind(intsockfd,structsockaddr*my_addr,intaddrlen);sockfd:\u524d\u9762socket()\u7684\u8fd4\u56de\u503cmy_addr:\u7ed3\u6784\u4f53\u6307\u9488\u53d8\u91cf#####structsockaddr_in\u00a0\u00a0//\u5e38\u7528\u7684\u7ed3\u6784\u4f53{unsignedshortintsin_family;\u00a0\u00a0//\u5373\u4e3asa_familyAF_INETuint16_tsin_port;\u00a0\u00a0//\u4e3a\u4f7f\u7528\u7684port\u7f16\u53f7structin_addrsin_addr;\u00a0\u00a0//\u4e3aIP\u5730\u5740unsignedcharsin_zero[8];\u00a0\u00a0//\u672a\u4f7f\u7528};structin_addr{uint32_ts_addr;};####addrlen:sockaddr\u7684\u7ed3\u6784\u4f53\u957f\u5ea6\u3002\u901a\u5e38\u662f\u8ba1\u7b97sizeof(structsockaddr);\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1\u00a0\u00a0\u00a0#pythons.bind(address)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61address\u4e3a\u5143\u7ec4\uff08host,port\uff09host:ip\u5730\u5740,\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32post:\u81ea\u5b9a\u4e49\u4e3b\u673a\u53f7,\u4e3a\u6574\u578blisten\u51fd\u6570\u4f7f\u670d\u52a1\u5668\u7684\u8fd9\u4e2a\u7aef\u53e3\u548cIP\u5904\u4e8e\u76d1\u542c\u72b6\u6001\uff0c\u7b49\u5f85\u7f51\u7edc\u4e2d\u67d0\u4e00\u5ba2\u6237\u673a\u7684\u8fde\u63a5\u8bf7\u6c42\u3002\u5982\u679c\u5ba2\u6237\u7aef\u6709\u8fde\u63a5\u8bf7\u6c42\uff0c\u7aef\u53e3\u5c31\u4f1a\u63a5\u53d7\u8fd9\u4e2a\u8fde\u63a5Python#Linuxintlisten(intsockfd,intbacklog);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.backlog:\u6307\u5b9a\u540c\u65f6\u80fd\u5904\u7406\u7684\u6700\u5927\u8fde\u63a5\u8981\u6c42\uff0c\u901a\u5e38\u4e3a10\u6216\u80055\u3002\u6700\u5927\u503c\u53ef\u8bbe\u81f3128\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1#pythons.listen(backlog)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61backlog:\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u6302\u8d77\u7684\u6700\u5927\u8fde\u63a5\u6570\u91cf\u3002\u8be5\u503c\u81f3\u5c11\u4e3a1\uff0c\u5927\u90e8\u5206\u5e94\u7528\u7a0b\u5e8f\u8bbe\u4e3a5\u5c31\u53ef\u4ee5\u4e8612345678910#Linuxintlisten(intsockfd,intbacklog);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.backlog:\u6307\u5b9a\u540c\u65f6\u80fd\u5904\u7406\u7684\u6700\u5927\u8fde\u63a5\u8981\u6c42\uff0c\u901a\u5e38\u4e3a10\u6216\u80055\u3002\u6700\u5927\u503c\u53ef\u8bbe\u81f3128\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1\u00a0#pythons.listen(backlog)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61backlog:\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u6302\u8d77\u7684\u6700\u5927\u8fde\u63a5\u6570\u91cf\u3002\u8be5\u503c\u81f3\u5c11\u4e3a1\uff0c\u5927\u90e8\u5206\u5e94\u7528\u7a0b\u5e8f\u8bbe\u4e3a5\u5c31\u53ef\u4ee5\u4e86accept\u51fd\u6570\u63a5\u53d7\u8fdc\u7a0b\u8ba1\u7b97\u673a\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u5efa\u7acb\u8d77\u4e0e\u5ba2\u6237\u673a\u4e4b\u95f4\u7684\u901a\u4fe1\u8fde\u63a5\u3002\u670d\u52a1\u5668\u5904\u4e8e\u76d1\u542c\u72b6\u6001\u65f6\uff0c\u5982\u679c\u67d0\u65f6\u523b\u83b7\u5f97\u5ba2\u6237\u673a\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u6b64\u65f6\u5e76\u4e0d\u662f\u7acb\u5373\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u800c\u662f\u5c06\u8fd9\u4e2a\u8bf7\u6c42\u653e\u5728\u7b49\u5f85\u961f\u5217\u4e2d\uff0c\u5f53\u7cfb\u7edf\u7a7a\u95f2\u65f6\u518d\u5904\u7406\u5ba2\u6237\u673a\u7684\u8fde\u63a5\u8bf7\u6c42\u3002Python#Linuxintaccept(ints,structsockaddr*addr,int*addrlen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.addr:\u4e3a\u7ed3\u6784\u4f53\u6307\u9488\u53d8\u91cf\uff0c\u548cbind\u7684\u7ed3\u6784\u4f53\u662f\u540c\u79cd\u7c7b\u578b\u7684\uff0c\u7cfb\u7edf\u4f1a\u628a\u8fdc\u7a0b\u4e3b\u673a\u7684\u4fe1\u606f\uff08\u8fdc\u7a0b\u4e3b\u673a\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u4fe1\u606f\uff09\u4fdd\u5b58\u5230\u8fd9\u4e2a\u6307\u9488\u6240\u6307\u7684\u7ed3\u6784\u4f53\u4e2d\u3002addrlen:\u8868\u793a\u7ed3\u6784\u4f53\u7684\u957f\u5ea6\uff0c\u4e3a\u6574\u578b\u6307\u9488\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u65b0\u7684socket\u5904\u7406\u4ee3\u7801new_fd\uff0c\u5931\u8d25\u8fd4\u56de-1#pythons.accept()s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61\u8fd4\u56de\uff08conn,address\uff09,\u5176\u4e2dconn\u662f\u65b0\u7684\u5957\u63a5\u5b57\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u6765\u63a5\u6536\u548c\u53d1\u9001\u6570\u636e\u3002address\u662f\u8fde\u63a5\u5ba2\u6237\u7aef\u7684\u5730\u57401234567891011#Linuxintaccept(ints,structsockaddr*addr,int*addrlen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.addr:\u4e3a\u7ed3\u6784\u4f53\u6307\u9488\u53d8\u91cf\uff0c\u548cbind\u7684\u7ed3\u6784\u4f53\u662f\u540c\u79cd\u7c7b\u578b\u7684\uff0c\u7cfb\u7edf\u4f1a\u628a\u8fdc\u7a0b\u4e3b\u673a\u7684\u4fe1\u606f\uff08\u8fdc\u7a0b\u4e3b\u673a\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u4fe1\u606f\uff09\u4fdd\u5b58\u5230\u8fd9\u4e2a\u6307\u9488\u6240\u6307\u7684\u7ed3\u6784\u4f53\u4e2d\u3002addrlen:\u8868\u793a\u7ed3\u6784\u4f53\u7684\u957f\u5ea6\uff0c\u4e3a\u6574\u578b\u6307\u9488\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u65b0\u7684socket\u5904\u7406\u4ee3\u7801new_fd\uff0c\u5931\u8d25\u8fd4\u56de-1\u00a0#pythons.accept()s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61\u8fd4\u56de\uff08conn,address\uff09,\u5176\u4e2dconn\u662f\u65b0\u7684\u5957\u63a5\u5b57\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u6765\u63a5\u6536\u548c\u53d1\u9001\u6570\u636e\u3002address\u662f\u8fde\u63a5\u5ba2\u6237\u7aef\u7684\u5730\u57402.1.2.\u5ba2\u6237\u7aef\u51fd\u6570connect\u51fd\u6570\u7528\u6765\u8bf7\u6c42\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u5668Python#Linuxintconnect(intsockfd,structsockaddr*serv_addr,intaddrlen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.serv_addr:\u4e3a\u7ed3\u6784\u4f53\u6307\u9488\u53d8\u91cf\uff0c\u5b58\u50a8\u7740\u8fdc\u7a0b\u670d\u52a1\u5668\u7684IP\u4e0e\u7aef\u53e3\u53f7\u4fe1\u606faddrlen:\u8868\u793a\u7ed3\u6784\u4f53\u53d8\u91cf\u7684\u957f\u5ea6\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1#pythons.connect(address)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61address:\u683c\u5f0f\u4e3a\u5143\u7ec4\uff08hostname,port\uff09\uff0c\u5982\u679c\u8fde\u63a5\u51fa\u9519\uff0c\u8fd4\u56desocket.error\u9519\u8bef1234567891011#Linuxintconnect(intsockfd,structsockaddr*serv_addr,intaddrlen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.serv_addr:\u4e3a\u7ed3\u6784\u4f53\u6307\u9488\u53d8\u91cf\uff0c\u5b58\u50a8\u7740\u8fdc\u7a0b\u670d\u52a1\u5668\u7684IP\u4e0e\u7aef\u53e3\u53f7\u4fe1\u606faddrlen:\u8868\u793a\u7ed3\u6784\u4f53\u53d8\u91cf\u7684\u957f\u5ea6\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1\u00a0#pythons.connect(address)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61address:\u683c\u5f0f\u4e3a\u5143\u7ec4\uff08hostname,port\uff09\uff0c\u5982\u679c\u8fde\u63a5\u51fa\u9519\uff0c\u8fd4\u56desocket.error\u9519\u8bef2.1.3.\u901a\u7528\u51fd\u6570\u63a5\u6536\u8fdc\u7aef\u4e3b\u673a\u4f20\u6765\u7684\u6570\u636erecv\u51fd\u6570Python#Linuxintrecv(intsockfd,void*buf,intlen,unsignedintflags);sockfd:\u4e3a\u524d\u9762accept\u7684\u8fd4\u56de\u503c.\u4e5f\u5c31\u662f\u65b0\u7684\u5957\u63a5\u5b57\u3002buf:\u8868\u793a\u7f13\u51b2\u533alen:\u8868\u793a\u7f13\u51b2\u533a\u7684\u957f\u5ea6flags:\u901a\u5e38\u4e3a0\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u5b9e\u9645\u63a5\u6536\u5230\u7684\u5b57\u7b26\u6570\uff0c\u53ef\u80fd\u4f1a\u5c11\u4e8e\u4f60\u6240\u6307\u5b9a\u7684\u63a5\u6536\u957f\u5ea6\u3002\u5931\u8d25\u8fd4\u56de-1#pythons.recv(bufsize[,flag])s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61bufsize:\u6307\u5b9a\u8981\u63a5\u6536\u7684\u6570\u636e\u5927\u5c0fflag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u8fd4\u56de\u503c\u4e3a\u6570\u636e\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f123456789101112131415#Linuxintrecv(intsockfd,void*buf,intlen,unsignedintflags);sockfd:\u4e3a\u524d\u9762accept\u7684\u8fd4\u56de\u503c.\u4e5f\u5c31\u662f\u65b0\u7684\u5957\u63a5\u5b57\u3002buf:\u8868\u793a\u7f13\u51b2\u533alen:\u8868\u793a\u7f13\u51b2\u533a\u7684\u957f\u5ea6flags:\u901a\u5e38\u4e3a0\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u5b9e\u9645\u63a5\u6536\u5230\u7684\u5b57\u7b26\u6570\uff0c\u53ef\u80fd\u4f1a\u5c11\u4e8e\u4f60\u6240\u6307\u5b9a\u7684\u63a5\u6536\u957f\u5ea6\u3002\u5931\u8d25\u8fd4\u56de-1\u00a0\u00a0#pythons.recv(bufsize[,flag])s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61bufsize:\u6307\u5b9a\u8981\u63a5\u6536\u7684\u6570\u636e\u5927\u5c0fflag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u8fd4\u56de\u503c\u4e3a\u6570\u636e\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0fsend\u51fd\u6570\u53d1\u9001\u6570\u636e\u7ed9\u6307\u5b9a\u7684\u8fdc\u7aef\u4e3b\u673aPython#Linuxintsend(ints,constvoid*msg,intlen,unsignedintflags);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.msg:\u4e00\u822c\u4e3a\u5e38\u91cf\u5b57\u7b26\u4e32len:\u8868\u793a\u957f\u5ea6flags:\u901a\u5e38\u4e3a0\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u5b9e\u9645\u4f20\u9001\u51fa\u53bb\u7684\u5b57\u7b26\u6570\uff0c\u53ef\u80fd\u4f1a\u5c11\u4e8e\u4f60\u6240\u6307\u5b9a\u7684\u53d1\u9001\u957f\u5ea6\u3002\u5931\u8d25\u8fd4\u56de-1#pythons.send(string[,flag])s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61string:\u8981\u53d1\u9001\u7684\u5b57\u7b26\u4e32\u6570\u636eflag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u8fd4\u56de\u503c\u662f\u8981\u53d1\u9001\u7684\u5b57\u8282\u6570\u91cf\uff0c\u8be5\u6570\u91cf\u53ef\u80fd\u5c0f\u4e8estring\u7684\u5b57\u8282\u5927\u5c0f\u3002s.sendall(string[,flag])#\u5b8c\u6574\u53d1\u9001TCP\u6570\u636e\u3002\u5c06string\u4e2d\u7684\u6570\u636e\u53d1\u9001\u5230\u8fde\u63a5\u7684\u5957\u63a5\u5b57\uff0c\u4f46\u5728\u8fd4\u56de\u4e4b\u524d\u4f1a\u5c1d\u8bd5\u53d1\u9001\u6240\u6709\u6570\u636e\u3002\u8fd4\u56de\u503c:\u6210\u529f\u8fd4\u56deNone\uff0c\u5931\u8d25\u5219\u629b\u51fa\u5f02\u5e38\u30021234567891011121314151617#Linuxintsend(ints,constvoid*msg,intlen,unsignedintflags);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.msg:\u4e00\u822c\u4e3a\u5e38\u91cf\u5b57\u7b26\u4e32len:\u8868\u793a\u957f\u5ea6flags:\u901a\u5e38\u4e3a0\u8fd4\u56de\u503c\uff1a\u6210\u529f\u5219\u8fd4\u56de\u5b9e\u9645\u4f20\u9001\u51fa\u53bb\u7684\u5b57\u7b26\u6570\uff0c\u53ef\u80fd\u4f1a\u5c11\u4e8e\u4f60\u6240\u6307\u5b9a\u7684\u53d1\u9001\u957f\u5ea6\u3002\u5931\u8d25\u8fd4\u56de-1\u00a0#pythons.send(string[,flag])s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61string:\u8981\u53d1\u9001\u7684\u5b57\u7b26\u4e32\u6570\u636eflag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u8fd4\u56de\u503c\u662f\u8981\u53d1\u9001\u7684\u5b57\u8282\u6570\u91cf\uff0c\u8be5\u6570\u91cf\u53ef\u80fd\u5c0f\u4e8estring\u7684\u5b57\u8282\u5927\u5c0f\u3002s.sendall(string[,flag])#\u5b8c\u6574\u53d1\u9001TCP\u6570\u636e\u3002\u5c06string\u4e2d\u7684\u6570\u636e\u53d1\u9001\u5230\u8fde\u63a5\u7684\u5957\u63a5\u5b57\uff0c\u4f46\u5728\u8fd4\u56de\u4e4b\u524d\u4f1a\u5c1d\u8bd5\u53d1\u9001\u6240\u6709\u6570\u636e\u3002\u8fd4\u56de\u503c:\u6210\u529f\u8fd4\u56deNone\uff0c\u5931\u8d25\u5219\u629b\u51fa\u5f02\u5e38\u3002close\u51fd\u6570\u5173\u95ed\u5957\u63a5\u5b57Python#Linuxintclose(intfd);fd:\u4e3a\u524d\u9762\u7684sockfd\u8fd4\u56de\u503c\uff1a\u82e5\u6587\u4ef6\u987a\u5229\u5173\u95ed\u5219\u8fd4\u56de0\uff0c\u53d1\u751f\u9519\u8bef\u65f6\u8fd4\u56de-1#pythons.close()s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c6112345678#Linuxintclose(intfd);fd:\u4e3a\u524d\u9762\u7684sockfd\u8fd4\u56de\u503c\uff1a\u82e5\u6587\u4ef6\u987a\u5229\u5173\u95ed\u5219\u8fd4\u56de0\uff0c\u53d1\u751f\u9519\u8bef\u65f6\u8fd4\u56de-1\u00a0#pythons.close()s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c612.2.\u7b80\u5355\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u5668TCP\u8fde\u63a5\u4e00\u4e2a\u7b80\u5355\u7684\u56de\u663e\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u6a21\u578b,\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u6570\u636e,\u670d\u52a1\u5668\u4f1a\u56de\u663e\u5230\u5ba2\u6237\u7aef\u7684\u7ec8\u7aef\u4e0a(\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u578b,\u6ca1\u8003\u8651\u9519\u8bef\u5904\u7406\u7b49\u95ee\u9898)Python#\u670d\u52a1\u5668\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-importsocket#socket\u6a21\u5757importcommands#\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u6a21\u5757BUF_SIZE=1024#\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0fserver_addr=('127.0.0.1',8888)#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740server=socket.socket(socket.AF_INET,socket.SOCK_STREAM)#\u751f\u6210\u4e00\u4e2a\u65b0\u7684socket\u5bf9\u8c61server.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)#\u8bbe\u7f6e\u5730\u5740\u590d\u7528server.bind(server_addr)#\u7ed1\u5b9a\u5730\u5740server.listen(5)#\u76d1\u542c,\u6700\u5927\u76d1\u542c\u6570\u4e3a5whileTrue:client,client_addr=server.accept()#\u63a5\u6536TCP\u8fde\u63a5,\u5e76\u8fd4\u56de\u65b0\u7684\u5957\u63a5\u5b57\u548c\u5730\u5740print'Connectedby',client_addrwhileTrue:data=client.recv(BUF_SIZE)#\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636eprintdataclient.sendall(data)#\u53d1\u9001\u6570\u636e\u5230\u5ba2\u6237\u7aefserver.close()12345678910111213141516171819202122#\u670d\u52a1\u5668\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-\u00a0importsocket\u00a0\u00a0#socket\u6a21\u5757importcommands\u00a0\u00a0#\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u6a21\u5757\u00a0\u00a0BUF_SIZE=1024\u00a0\u00a0#\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0fserver_addr=('127.0.0.1',8888)\u00a0\u00a0#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740server=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\u00a0\u00a0#\u751f\u6210\u4e00\u4e2a\u65b0\u7684socket\u5bf9\u8c61server.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)\u00a0\u00a0#\u8bbe\u7f6e\u5730\u5740\u590d\u7528server.bind(server_addr)\u00a0\u00a0#\u7ed1\u5b9a\u5730\u5740server.listen(5)\u00a0\u00a0#\u76d1\u542c,\u6700\u5927\u76d1\u542c\u6570\u4e3a5whileTrue:\u00a0\u00a0\u00a0\u00a0client,client_addr=server.accept()\u00a0\u00a0#\u63a5\u6536TCP\u8fde\u63a5,\u5e76\u8fd4\u56de\u65b0\u7684\u5957\u63a5\u5b57\u548c\u5730\u5740\u00a0\u00a0\u00a0\u00a0print'Connectedby',client_addr\u00a0\u00a0\u00a0\u00a0whileTrue:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0data=client.recv(BUF_SIZE)\u00a0\u00a0#\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636e\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printdata\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0client.sendall(data)\u00a0\u00a0#\u53d1\u9001\u6570\u636e\u5230\u5ba2\u6237\u7aefserver.close()Python#\u5ba2\u6237\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-importsysimportsocketBUF_SIZE=1024#\u8bbe\u7f6e\u7f13\u51b2\u533a\u7684\u5927\u5c0fserver_addr=('127.0.0.1',8888)#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740try:client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)#\u8fd4\u56de\u65b0\u7684socket\u5bf9\u8c61exceptsocket.error,msg:print\"CreatingSocketFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]sys.exit()client.connect(server_addr)#\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740whileTrue:data=raw_input(\"Pleaseinputsomestring>\")ifnotdata:print\"inputcan'tempty,Pleaseinputagain..\"continueclient.sendall(data)#\u53d1\u9001\u6570\u636e\u5230\u670d\u52a1\u5668data=client.recv(BUF_SIZE)#\u4ece\u670d\u52a1\u5668\u7aef\u63a5\u6536\u6570\u636eprintdataclient.close()12345678910111213141516171819202122232425#\u5ba2\u6237\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-\u00a0importsysimportsocket\u00a0\u00a0BUF_SIZE=1024\u00a0\u00a0#\u8bbe\u7f6e\u7f13\u51b2\u533a\u7684\u5927\u5c0fserver_addr=('127.0.0.1',8888)\u00a0\u00a0#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740try:\u00a0\u00a0\u00a0\u00a0client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\u00a0\u00a0#\u8fd4\u56de\u65b0\u7684socket\u5bf9\u8c61exceptsocket.error,msg:\u00a0\u00a0\u00a0\u00a0print\"CreatingSocketFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]\u00a0\u00a0\u00a0\u00a0sys.exit()client.connect(server_addr)\u00a0\u00a0#\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740whileTrue:\u00a0\u00a0\u00a0\u00a0data=raw_input(\"Pleaseinputsomestring>\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnotdata:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\"inputcan'tempty,Pleaseinputagain..\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0client.sendall(data)\u00a0\u00a0#\u53d1\u9001\u6570\u636e\u5230\u670d\u52a1\u5668\u00a0\u00a0\u00a0\u00a0data=client.recv(BUF_SIZE)\u00a0\u00a0#\u4ece\u670d\u52a1\u5668\u7aef\u63a5\u6536\u6570\u636e\u00a0\u00a0\u00a0\u00a0printdataclient.close()2.2.1.\u5e26\u9519\u8bef\u5904\u7406\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u5668TCP\u8fde\u63a5\u5728\u8fdb\u884c\u7f51\u7edc\u7f16\u7a0b\u65f6,\u6700\u597d\u4f7f\u7528\u5927\u91cf\u7684\u9519\u8bef\u5904\u7406,\u80fd\u591f\u5c3d\u91cf\u7684\u53d1\u73b0\u9519\u8bef,\u4e5f\u80fd\u591f\u4f7f\u4ee3\u7801\u663e\u5f97\u66f4\u52a0\u4e25\u8c28Python#\u670d\u52a1\u5668\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-importsysimportsocket#socket\u6a21\u5757BUF_SIZE=1024#\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0fserver_addr=('127.0.0.1',8888)#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740try:server=socket.socket(socket.AF_INET,socket.SOCK_STREAM)#\u751f\u6210\u4e00\u4e2a\u65b0\u7684socket\u5bf9\u8c61exceptsocket.error,msg:print\"CreatingSocketFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]sys.exit()print\"SocketCreated!\"server.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)#\u8bbe\u7f6e\u5730\u5740\u590d\u7528try:server.bind(server_addr)#\u7ed1\u5b9a\u5730\u5740exceptsocket.error,msg:print\"BindingFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]sys.exit()print\"SocketBind!\"server.listen(5)#\u76d1\u542c,\u6700\u5927\u76d1\u542c\u6570\u4e3a5print\"Socketlistening\"whileTrue:client,client_addr=server.accept()#\u63a5\u6536TCP\u8fde\u63a5,\u5e76\u8fd4\u56de\u65b0\u7684\u5957\u63a5\u5b57\u548c\u5730\u5740,\u963b\u585e\u51fd\u6570print'Connectedby',client_addrwhileTrue:data=client.recv(BUF_SIZE)#\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636eprintdataclient.sendall(data)#\u53d1\u9001\u6570\u636e\u5230\u5ba2\u6237\u7aefserver.close()1234567891011121314151617181920212223242526272829303132#\u670d\u52a1\u5668\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-\u00a0importsysimportsocket\u00a0\u00a0#socket\u6a21\u5757\u00a0BUF_SIZE=1024\u00a0\u00a0#\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0fserver_addr=('127.0.0.1',8888)\u00a0\u00a0#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740try:\u00a0\u00a0server=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\u00a0\u00a0#\u751f\u6210\u4e00\u4e2a\u65b0\u7684socket\u5bf9\u8c61exceptsocket.error,msg:\u00a0\u00a0\u00a0\u00a0print\"CreatingSocketFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]\u00a0\u00a0\u00a0\u00a0sys.exit()print\"SocketCreated!\"server.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)\u00a0\u00a0#\u8bbe\u7f6e\u5730\u5740\u590d\u7528try:\u00a0\u00a0\u00a0\u00a0server.bind(server_addr)\u00a0\u00a0#\u7ed1\u5b9a\u5730\u5740exceptsocket.error,msg:\u00a0\u00a0print\"BindingFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]\u00a0\u00a0sys.exit()print\"SocketBind!\"server.listen(5)\u00a0\u00a0#\u76d1\u542c,\u6700\u5927\u76d1\u542c\u6570\u4e3a5print\"Socketlistening\"whileTrue:\u00a0\u00a0\u00a0\u00a0client,client_addr=server.accept()\u00a0\u00a0#\u63a5\u6536TCP\u8fde\u63a5,\u5e76\u8fd4\u56de\u65b0\u7684\u5957\u63a5\u5b57\u548c\u5730\u5740,\u963b\u585e\u51fd\u6570\u00a0\u00a0\u00a0\u00a0print'Connectedby',client_addr\u00a0\u00a0\u00a0\u00a0whileTrue:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0data=client.recv(BUF_SIZE)\u00a0\u00a0#\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636e\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printdata\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0client.sendall(data)\u00a0\u00a0#\u53d1\u9001\u6570\u636e\u5230\u5ba2\u6237\u7aefserver.close()Python#\u5ba2\u6237\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-importsysimportsocketBUF_SIZE=1024#\u8bbe\u7f6e\u7f13\u51b2\u533a\u7684\u5927\u5c0fserver_addr=('127.0.0.1',8888)#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740try:client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)#\u8fd4\u56de\u65b0\u7684socket\u5bf9\u8c61exceptsocket.error,msg:print\"CreatingSocketFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]sys.exit()client.connect(server_addr)#\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740whileTrue:data=raw_input(\"Pleaseinputsomestring>\")ifnotdata:print\"inputcan'tempty,Pleaseinputagain..\"continueclient.sendall(data)#\u53d1\u9001\u6570\u636e\u5230\u670d\u52a1\u5668data=client.recv(BUF_SIZE)#\u4ece\u670d\u52a1\u5668\u7aef\u63a5\u6536\u6570\u636eprintdataclient.close()12345678910111213141516171819202122232425#\u5ba2\u6237\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-\u00a0importsysimportsocket\u00a0\u00a0BUF_SIZE=1024\u00a0\u00a0#\u8bbe\u7f6e\u7f13\u51b2\u533a\u7684\u5927\u5c0fserver_addr=('127.0.0.1',8888)\u00a0\u00a0#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740try:\u00a0\u00a0\u00a0\u00a0client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\u00a0\u00a0#\u8fd4\u56de\u65b0\u7684socket\u5bf9\u8c61exceptsocket.error,msg:\u00a0\u00a0\u00a0\u00a0print\"CreatingSocketFailure.ErrorCode:\"+str(msg[0])+\"Message:\"+msg[1]\u00a0\u00a0\u00a0\u00a0sys.exit()client.connect(server_addr)\u00a0\u00a0#\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740whileTrue:\u00a0\u00a0\u00a0\u00a0data=raw_input(\"Pleaseinputsomestring>\")\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ifnotdata:\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0print\"inputcan'tempty,Pleaseinputagain..\"\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u00a0\u00a0\u00a0\u00a0client.sendall(data)\u00a0\u00a0#\u53d1\u9001\u6570\u636e\u5230\u670d\u52a1\u5668\u00a0\u00a0\u00a0\u00a0data=client.recv(BUF_SIZE)\u00a0\u00a0#\u4ece\u670d\u52a1\u5668\u7aef\u63a5\u6536\u6570\u636e\u00a0\u00a0\u00a0\u00a0printdataclient.close()2.3.UDP\u901a\u4fe1UDP\u901a\u4fe1\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a\u670d\u52a1\u7aef\uff1asocket\u2014bind\u2014recvfrom\u2014sendto\u2014close\u5ba2\u6237\u7aef\uff1asocket\u2014\u2014\u2014-sendto\u2014recvfrom\u2014closeUDPsendto()\u51fd\u6570\u53d1\u9001UDP\u6570\u636e,\u5c06\u6570\u636e\u53d1\u9001\u5230\u5957\u63a5\u5b57Python#Linuxintsendto(intsockfd,constvoid*msg,intlen,unsignedintflags,conststructsockaddr*to,inttolen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.msg:\u4e00\u822c\u4e3a\u5e38\u91cf\u5b57\u7b26\u4e32len:\u8868\u793a\u957f\u5ea6flags:\u901a\u5e38\u4e3a0to:\u8868\u793a\u76ee\u5730\u673a\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7\u4fe1\u606f,\u8868\u793a\u5730\u5740\u7684\u7ed3\u6784\u4f53tolen:\u5e38\u5e38\u88ab\u8d4b\u503c\u4e3asizeof(structsockaddr)\u8fd4\u56de\u503c:\u3000\u8fd4\u56de\u5b9e\u9645\u53d1\u9001\u7684\u6570\u636e\u5b57\u8282\u957f\u5ea6\u6216\u5728\u51fa\u73b0\u53d1\u9001\u9519\u8bef\u65f6\u8fd4\u56de-1\u3002#Pythons.sendto(string[,flag],address)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61address:\u6307\u5b9a\u8fdc\u7a0b\u5730\u5740,\u5f62\u5f0f\u4e3a\uff08ipaddr\uff0cport\uff09\u7684\u5143\u7ec4flag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u8fd4\u56de\u503c:\u53d1\u9001\u7684\u5b57\u8282\u6570\u30021234567891011121314151617#Linuxintsendto(intsockfd,constvoid*msg,intlen,unsignedintflags,conststructsockaddr*to,inttolen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.msg:\u4e00\u822c\u4e3a\u5e38\u91cf\u5b57\u7b26\u4e32len:\u8868\u793a\u957f\u5ea6flags:\u901a\u5e38\u4e3a0to:\u8868\u793a\u76ee\u5730\u673a\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7\u4fe1\u606f,\u8868\u793a\u5730\u5740\u7684\u7ed3\u6784\u4f53tolen:\u5e38\u5e38\u88ab\u8d4b\u503c\u4e3asizeof(structsockaddr)\u8fd4\u56de\u503c:\u3000\u8fd4\u56de\u5b9e\u9645\u53d1\u9001\u7684\u6570\u636e\u5b57\u8282\u957f\u5ea6\u6216\u5728\u51fa\u73b0\u53d1\u9001\u9519\u8bef\u65f6\u8fd4\u56de-1\u3002\u00a0\u00a0#Pythons.sendto(string[,flag],address)s\u4e3asocket.socket()\u8fd4\u56de\u7684\u5957\u63a5\u5b57\u5bf9\u8c61address:\u6307\u5b9a\u8fdc\u7a0b\u5730\u5740,\u5f62\u5f0f\u4e3a\uff08ipaddr\uff0cport\uff09\u7684\u5143\u7ec4flag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565\u8fd4\u56de\u503c:\u53d1\u9001\u7684\u5b57\u8282\u6570\u3002recvfrom()\u51fd\u6570\u63a5\u53d7UDP\u5957\u63a5\u5b57\u7684\u6570\u636e,\u4e0erecv()\u7c7b\u4f3cPython#Linuxintrecvfrom(intsockfd,void*buf,intlen,unsignedintflags,structsockaddr*from,int*fromlen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.msg:\u4e00\u822c\u4e3a\u5e38\u91cf\u5b57\u7b26\u4e32len:\u8868\u793a\u957f\u5ea6flags:\u901a\u5e38\u4e3a0from:\u662f\u4e00\u4e2astructsockaddr\u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u8be5\u53d8\u91cf\u4fdd\u5b58\u8fde\u63a5\u673a\u7684IP\u5730\u5740\u53ca\u7aef\u53e3\u53f7fromlen:\u5e38\u7f6e\u4e3asizeof(structsockaddr)\u3002\u8fd4\u56de\u503c:\u8fd4\u56de\u63a5\u6536\u5230\u7684\u5b57\u8282\u6570\u6216\u5f53\u51fa\u73b0\u9519\u8bef\u65f6\u8fd4\u56de-1\uff0c\u5e76\u7f6e\u76f8\u5e94\u7684errno\u3002#Pythons.recvfrom(bufsize[.flag])\u8fd4\u56de\u503c:\uff08data,address\uff09\u5143\u7ec4,\u5176\u4e2ddata\u662f\u5305\u542b\u63a5\u6536\u6570\u636e\u7684\u5b57\u7b26\u4e32\uff0caddress\u662f\u53d1\u9001\u6570\u636e\u7684\u5957\u63a5\u5b57\u5730\u5740bufsize:\u6307\u5b9a\u8981\u63a5\u6536\u7684\u6570\u636e\u5927\u5c0fflag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u7565123456789101112131415#Linuxintrecvfrom(intsockfd,void*buf,intlen,unsignedintflags,structsockaddr*from,int*fromlen);sockfd:\u4e3a\u524d\u9762socket\u7684\u8fd4\u56de\u503c.msg:\u4e00\u822c\u4e3a\u5e38\u91cf\u5b57\u7b26\u4e32len:\u8868\u793a\u957f\u5ea6flags:\u901a\u5e38\u4e3a0from:\u662f\u4e00\u4e2astructsockaddr\u7c7b\u578b\u7684\u53d8\u91cf\uff0c\u8be5\u53d8\u91cf\u4fdd\u5b58\u8fde\u63a5\u673a\u7684IP\u5730\u5740\u53ca\u7aef\u53e3\u53f7fromlen:\u5e38\u7f6e\u4e3asizeof(structsockaddr)\u3002\u8fd4\u56de\u503c:\u8fd4\u56de\u63a5\u6536\u5230\u7684\u5b57\u8282\u6570\u6216\u5f53\u51fa\u73b0\u9519\u8bef\u65f6\u8fd4\u56de-1\uff0c\u5e76\u7f6e\u76f8\u5e94\u7684errno\u3002\u00a0#Pythons.recvfrom(bufsize[.flag])\u8fd4\u56de\u503c:\uff08data,address\uff09\u5143\u7ec4,\u5176\u4e2ddata\u662f\u5305\u542b\u63a5\u6536\u6570\u636e\u7684\u5b57\u7b26\u4e32\uff0caddress\u662f\u53d1\u9001\u6570\u636e\u7684\u5957\u63a5\u5b57\u5730\u5740bufsize:\u6307\u5b9a\u8981\u63a5\u6536\u7684\u6570\u636e\u5927\u5c0fflag:\u63d0\u4f9b\u6709\u5173\u6d88\u606f\u7684\u5176\u4ed6\u4fe1\u606f\uff0c\u901a\u5e38\u53ef\u4ee5\u5ffd\u75652.4.\u7b80\u5355\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u5668UDP\u8fde\u63a5Python#\u670d\u52a1\u5668\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-importsocketBUF_SIZE=1024#\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0fserver_addr=('127.0.0.1',8888)#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740server=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)#\u751f\u6210\u65b0\u7684\u5957\u63a5\u5b57\u5bf9\u8c61server.bind(server_addr)#\u5957\u63a5\u5b57\u7ed1\u5b9aIP\u548c\u7aef\u53e3whileTrue:print\"waittingfordata\"data,client_addr=server.recvfrom(BUF_SIZE)#\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636eprint'Connectedby',client_addr,'ReceiveData:',dataserver.sendto(data,client_addr)#\u53d1\u9001\u6570\u636e\u7ed9\u5ba2\u6237\u7aefserver.close()12345678910111213141516#\u670d\u52a1\u5668\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-\u00a0importsocket\u00a0BUF_SIZE=1024\u00a0\u00a0#\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0fserver_addr=('127.0.0.1',8888)\u00a0\u00a0#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740server=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)\u00a0\u00a0#\u751f\u6210\u65b0\u7684\u5957\u63a5\u5b57\u5bf9\u8c61server.bind(server_addr)\u00a0\u00a0#\u5957\u63a5\u5b57\u7ed1\u5b9aIP\u548c\u7aef\u53e3whileTrue:\u00a0\u00a0\u00a0\u00a0print\"waittingfordata\"\u00a0\u00a0\u00a0\u00a0data,client_addr=server.recvfrom(BUF_SIZE)\u00a0\u00a0#\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u6570\u636e\u00a0\u00a0\u00a0\u00a0print'Connectedby',client_addr,'ReceiveData:',data\u00a0\u00a0\u00a0\u00a0server.sendto(data,client_addr)\u00a0\u00a0#\u53d1\u9001\u6570\u636e\u7ed9\u5ba2\u6237\u7aefserver.close()Python#\u5ba2\u6237\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-importsocketimportstructBUF_SIZE=1024#\u8bbe\u7f6e\u7f13\u51b2\u533aserver_addr=('127.0.0.1',8888)#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740client=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)#\u751f\u6210\u65b0\u7684\u5957\u63a5\u5b57\u5bf9\u8c61whileTrue:data=raw_input('PleaseInputdata>')client.sendto(data,server_addr)#\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636edata,addr=client.recvfrom(BUF_SIZE)#\u4ece\u670d\u52a1\u5668\u63a5\u6536\u6570\u636eprint\"Data:\",dataclient.close()1234567891011121314151617#\u5ba2\u6237\u7aef#!/usr/bin/envpython#-*-coding:utf-8-*-\u00a0importsocketimportstruct\u00a0BUF_SIZE=1024\u00a0\u00a0#\u8bbe\u7f6e\u7f13\u51b2\u533aserver_addr=('127.0.0.1',8888)\u00a0\u00a0#IP\u548c\u7aef\u53e3\u6784\u6210\u8868\u793a\u5730\u5740client=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)\u00a0\u00a0#\u751f\u6210\u65b0\u7684\u5957\u63a5\u5b57\u5bf9\u8c61\u00a0whileTrue:\u00a0\u00a0\u00a0\u00a0data=raw_input('PleaseInputdata>')\u00a0\u00a0\u00a0\u00a0client.sendto(data,server_addr)\u00a0\u00a0#\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u00a0\u00a0\u00a0\u00a0data,addr=client.recvfrom(BUF_SIZE)\u00a0\u00a0#\u4ece\u670d\u52a1\u5668\u63a5\u6536\u6570\u636e\u00a0\u00a0\u00a0\u00a0print\"Data:\",dataclient.close()2.5.\u5176\u4ed6Pythons.getpeername()#\u8fd4\u56de\u8fde\u63a5\u5957\u63a5\u5b57\u7684\u8fdc\u7a0b\u5730\u5740\u3002\u8fd4\u56de\u503c\u901a\u5e38\u662f\u5143\u7ec4\uff08ipaddr,port\uff09\u3002s.getsockname()#\u8fd4\u56de\u5957\u63a5\u5b57\u81ea\u5df1\u7684\u5730\u5740\u3002\u901a\u5e38\u662f\u4e00\u4e2a\u5143\u7ec4(ipaddr,port)s.setsockopt(level,optname,value)#\u8bbe\u7f6e\u7ed9\u5b9a\u5957\u63a5\u5b57\u9009\u9879\u7684\u503c\u3002s.getsockopt(level,optname[.buflen])#\u8fd4\u56de\u5957\u63a5\u5b57\u9009\u9879\u7684\u503c\u3002s.settimeout(timeout)#\u8bbe\u7f6e\u5957\u63a5\u5b57\u64cd\u4f5c\u7684\u8d85\u65f6\u671f\uff0ctimeout\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u503c\u4e3aNone\u8868\u793a\u6ca1\u6709\u8d85\u65f6\u671f\u3002\u4e00\u822c\uff0c\u8d85\u65f6\u671f\u5e94\u8be5\u5728\u521a\u521b\u5efa\u5957\u63a5\u5b57\u65f6\u8bbe\u7f6e\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u7528\u4e8e\u8fde\u63a5\u7684\u64cd\u4f5c\uff08\u5982connect()\uff09s.gettimeout()#\u8fd4\u56de\u5f53\u524d\u8d85\u65f6\u671f\u7684\u503c\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8d85\u65f6\u671f\uff0c\u5219\u8fd4\u56deNone\u3002s.fileno()#\u8fd4\u56de\u5957\u63a5\u5b57\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002s.setblocking(flag)#\u5982\u679cflag\u4e3a0\uff0c\u5219\u5c06\u5957\u63a5\u5b57\u8bbe\u4e3a\u975e\u963b\u585e\u6a21\u5f0f\uff0c\u5426\u5219\u5c06\u5957\u63a5\u5b57\u8bbe\u4e3a\u963b\u585e\u6a21\u5f0f\uff08\u9ed8\u8ba4\u503c\uff09\u3002\u975e\u963b\u585e\u6a21\u5f0f\u4e0b\uff0c\u5982\u679c\u8c03\u7528recv()\u6ca1\u6709\u53d1\u73b0\u4efb\u4f55\u6570\u636e\uff0c\u6216send()\u8c03\u7528\u65e0\u6cd5\u7acb\u5373\u53d1\u9001\u6570\u636e\uff0c\u90a3\u4e48\u5c06\u5f15\u8d77socket.error\u5f02\u5e38\u3002s.makefile()#\u521b\u5efa\u4e00\u4e2a\u4e0e\u8be5\u5957\u63a5\u5b57\u76f8\u5173\u8fde\u7684\u6587\u4ef61234567891011121314151617181920212223242526s.getpeername()#\u8fd4\u56de\u8fde\u63a5\u5957\u63a5\u5b57\u7684\u8fdc\u7a0b\u5730\u5740\u3002\u8fd4\u56de\u503c\u901a\u5e38\u662f\u5143\u7ec4\uff08ipaddr,port\uff09\u3002\u00a0s.getsockname()#\u8fd4\u56de\u5957\u63a5\u5b57\u81ea\u5df1\u7684\u5730\u5740\u3002\u901a\u5e38\u662f\u4e00\u4e2a\u5143\u7ec4(ipaddr,port)\u00a0s.setsockopt(level,optname,value)#\u8bbe\u7f6e\u7ed9\u5b9a\u5957\u63a5\u5b57\u9009\u9879\u7684\u503c\u3002\u00a0s.getsockopt(level,optname[.buflen])#\u8fd4\u56de\u5957\u63a5\u5b57\u9009\u9879\u7684\u503c\u3002\u00a0s.settimeout(timeout)#\u8bbe\u7f6e\u5957\u63a5\u5b57\u64cd\u4f5c\u7684\u8d85\u65f6\u671f\uff0ctimeout\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u503c\u4e3aNone\u8868\u793a\u6ca1\u6709\u8d85\u65f6\u671f\u3002\u4e00\u822c\uff0c\u8d85\u65f6\u671f\u5e94\u8be5\u5728\u521a\u521b\u5efa\u5957\u63a5\u5b57\u65f6\u8bbe\u7f6e\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u7528\u4e8e\u8fde\u63a5\u7684\u64cd\u4f5c\uff08\u5982connect()\uff09\u00a0s.gettimeout()#\u8fd4\u56de\u5f53\u524d\u8d85\u65f6\u671f\u7684\u503c\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8d85\u65f6\u671f\uff0c\u5219\u8fd4\u56deNone\u3002\u00a0s.fileno()#\u8fd4\u56de\u5957\u63a5\u5b57\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u3002\u00a0s.setblocking(flag)#\u5982\u679cflag\u4e3a0\uff0c\u5219\u5c06\u5957\u63a5\u5b57\u8bbe\u4e3a\u975e\u963b\u585e\u6a21\u5f0f\uff0c\u5426\u5219\u5c06\u5957\u63a5\u5b57\u8bbe\u4e3a\u963b\u585e\u6a21\u5f0f\uff08\u9ed8\u8ba4\u503c\uff09\u3002\u975e\u963b\u585e\u6a21\u5f0f\u4e0b\uff0c\u5982\u679c\u8c03\u7528recv()\u6ca1\u6709\u53d1\u73b0\u4efb\u4f55\u6570\u636e\uff0c\u6216send()\u8c03\u7528\u65e0\u6cd5\u7acb\u5373\u53d1\u9001\u6570\u636e\uff0c\u90a3\u4e48\u5c06\u5f15\u8d77socket.error\u5f02\u5e38\u3002\u00a0s.makefile()#\u521b\u5efa\u4e00\u4e2a\u4e0e\u8be5\u5957\u63a5\u5b57\u76f8\u5173\u8fde\u7684\u6587\u4ef63.\u53c2\u8003\u94fe\u63a5python-socket\u5b98\u65b9\u6587\u68631\u8d5e17\u6536\u85cf2\u8bc4\u8bba"]},
{"art_title": ["Python \u7a0b\u5e8f\u5458\u5e94\u8be5\u77e5\u9053\u7684 10 \u4e2a\u5e93"], "art_url": ["http://python.jobbole.com/52355/"], "art_create_time": ["2013/11/30"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2013/11/67668a0fgw1eazlubkzywj20fj094t9b.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aAlbertoGranzotto\u00a0\u00a0\u00a0\u8bd1\u6587\u51fa\u5904\uff1a\u5f20\u4e9a\u6960\uff08@\u5f20\u4e9a\u6960alexkh\uff09\u00a0\u00a0\u00a0Python\u662f\u4f18\u96c5\u7684\uff0c\u4f7f\u7528\u8fd9\u4e9b\u5e93\u53ef\u4ee5\u4f7f\u4f60\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\uff0c\u5e76\u4fdd\u6301\u6301\u4e45\u6027\u3002\u6b22\u8fce\u5404\u4f4d\u8865\u5145\uff0c\u5e76\u63d0\u51fa\u610f\u89c1\uff01Docopt\u3002\u629b\u5f03optparse\u548cargparse\u5427\uff0c\u4f7f\u7528docstrings\u6765\u6784\u5efa\u4f18\u96c5\u7684\uff0c\u53ef\u8bfb\u6027\u5f3a\u7684\uff0c\u5e76\u4e14\u590d\u6742\uff08\u5982\u679c\u4f60\u9700\u8981\u7684\u8bdd\uff09\u7684\u547d\u4ee4\u884c\u754c\u9762\u3002IMO2013\u5e74\u521b\u5efa\u7684\u6700\u597d\u7684\u5e93\u3002Requests\uff0c\u6216\u79f0\u4e3a\u4eba\u7c7b\u4f7f\u7528\u7684HTTP\uff0c\u662f\u4e00\u4e2a\u5904\u7406HTTP\u8bf7\u6c42\u66f4\u4e3apythonic\u7684\u65b9\u6cd5\uff0c\u6bd4urllib2\u66f4\u66f4\u66f4\u597d\u7528\u3002\u53e3\u7891\u53ef\u89c1\uff0c\u4ed6\u5728PyPI\u4e0a\u4e0b\u8f7d\u5df2\u7ecf\u8d85\u8fc75,000,000\u6b21:)\u3002lxml\u662flibxml2\u548clibxslt\u7684\u5408\u4f53\u3002\u5982\u679c\u4f60\u8981\u5904\u7406XML\u6216HTML\uff0clxml\u662f\u6700\u597d\u7684\u9009\u62e9\u3002Bottle\u662f\u4e00\u4e2a\u5feb\u901f\uff0c\u7b80\u5355\uff0c\u8f7b\u91cf\u7ea7\u7684WSGI\u5fae\u578bweb\u6846\u67b6\u3002\u51e0\u79d2\u5185\u5c31\u80fd\u6784\u5efa\u5c0f\u578b\u7ad9\u70b9\u548cAPIs\u3002\u6240\u6709\u7684\u6846\u67b6\u53ea\u6709\u4e00\u4e2apy\u6587\u4ef6\uff0c\u4f60\u751a\u81f3\u53ef\u4ee5\u653e\u8fdb\u4efb\u610f\u76ee\u5f55\u3002sh\u662f\u4e00\u4e2a\u6210\u719f\u7684Python\u5b50\u8fdb\u7a0b\u754c\u9762\u5de5\u5177\uff0c\u5141\u8bb8\u4f60\u50cf\u8fd0\u884c\u51fd\u6570\u4e00\u6837\u8fd0\u884c\u4efb\u4f55\u7a0b\u5e8f\u3002\u8d85\u7ea7\u597d\u7528\u3002Structlog\u662f\u4e00\u4e2a\u5148\u8fdb\u7684\u65e5\u5fd7\u8bb0\u5f55\u5904\u7406\u5668\u3002\u4ed6\u96c6\u6210\u4e86\u591a\u4e2a\u73b0\u5b58\u7684\u65e5\u5fd7\u8bb0\u5f55\u5de5\u5177\uff0c\u5305\u542b\u4e86Python\u6807\u51c6\u5e93\u3002\u4f60\u53ef\u4ee5\u521b\u5efa\u666e\u901a\u8bb0\u5f55\u5668\uff0c\u6309\u4f60\u6240\u60f3\u589e\u52a0\u5185\u5bb9\uff0c\u4f7f\u4f60\u7684\u65e5\u5fd7\u62e5\u6709\u6301\u4e45\u6027\u548c\u53ef\u8bfb\u6027\u3002Watchdog\u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\u7684Python\u5e93\u548cshell\u5de5\u5177\uff0c\u53ef\u4ee5\u76d1\u89c6\u6587\u4ef6\u7cfb\u7edf\u4e8b\u4ef6\u3002\u8d85\u7ea7\u597d\u7528\uff0c\u5e76\u4e14\u5bb9\u6613\u4e0a\u624b\u3002Delorean\u53ef\u4ee5\u662f\u4f60\u7528\u975e\u5e38\u65b9\u4fbf\u7684\u65b9\u6cd5\u6765\u5904\u7406\u6570\u636e\u548c\u65f6\u95f4\u3002\u8bbe\u7f6e\u65f6\u533a\uff0c\u622a\u53d6\u5230\u79d2\uff0c\u5206\uff0c\u5c0f\u65f6\uff0c\u6216\u8005\u751a\u81f3\u4f7f\u7528\u7279\u6b8a\u65b9\u6cd5\u4ece\u4e00\u4e2a\u6570\u636e\u8fed\u4ee3\u5230\u53e6\u4e00\u4e2a\u3002\u6d4f\u89c8\u4e0b\u6587\u6863\uff0c\u91cc\u9762\u6709\u5f88\u591a\u793a\u4f8b\u3002\u9644\u8d60PEW.\u6211\u662f\u4e00\u4e2a\u6708\u524d\u53d1\u73b0\u8fd9\u4e2a\u9879\u76ee\uff0c\u5e76\u5df2\u559c\u6b22\u4e0a\u4e86\u3002PEW\u662f\u4e00\u5957\u7ba1\u7406\u591a\u4e2a\u865a\u62df\u73af\u5883\u7684\u5de5\u5177\uff0c\u5728bash\uff0czsh\uff0cfish\u548cpowershell\u4e0a\u5b8c\u7f8e\u8fd0\u884c\u3002\u53bb\u8bd5\u8bd5\u5427\u3002antigravity\u3002\u8fd0\u884c\u4e00\u4e2aPythonshell(\u7248\u672c>=2.7)\uff0c\u7136\u540e\u8f93\u5165importantigravity\u3002\u7531AlbertoGranzotto\u5217\u4e3e\uff0c2013\u5e7411\u670815\u65e5\uff0c\u4fdd\u5b58\u5728/culture\u30021\u8d5e1\u6536\u85cf\u8bc4\u8bba"]},
{"art_title": ["Python \u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\u7684\u4e09\u79cd\u65b9\u6cd5"], "art_url": ["http://python.jobbole.com/88381/"], "art_create_time": ["2017/08/21"], "art_img": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "art_content": ["\u539f\u6587\u51fa\u5904\uff1aj_hao104\u00a0\u00a0\u00a0\u901a\u5e38\u5728\u8bfb\u5199\u6587\u4ef6\u4e4b\u524d\uff0c\u9700\u8981\u5224\u65ad\u6587\u4ef6\u6216\u76ee\u5f55\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u7136\u67d0\u4e9b\u5904\u7406\u65b9\u6cd5\u53ef\u80fd\u4f1a\u4f7f\u7a0b\u5e8f\u51fa\u9519\u3002\u6240\u4ee5\u6700\u597d\u5728\u505a\u4efb\u4f55\u64cd\u4f5c\u4e4b\u524d\uff0c\u5148\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002\u8fd9\u91cc\u5c06\u4ecb\u7ecd\u4e09\u79cd\u5224\u65ad\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728\u7684\u65b9\u6cd5\uff0c\u5206\u522b\u4f7f\u7528os\u6a21\u5757\u3001Try\u8bed\u53e5\u3001pathlib\u6a21\u5757\u30021.\u4f7f\u7528os\u6a21\u5757os\u6a21\u5757\u4e2d\u7684os.path.exists()\u65b9\u6cd5\u7528\u4e8e\u68c0\u9a8c\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728Pythonimportosos.path.exists(test_file.txt)#Trueos.path.exists(no_exist_file.txt)#False123456importosos.path.exists(test_file.txt)#True\u00a0os.path.exists(no_exist_file.txt)#False\u5224\u65ad\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728Pythonimportosos.path.exists(test_dir)#Trueos.path.exists(no_exist_dir)#False123456importosos.path.exists(test_dir)#True\u00a0os.path.exists(no_exist_dir)#False\u53ef\u4ee5\u770b\u51fa\u7528os.path.exists()\u65b9\u6cd5\uff0c\u5224\u65ad\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u662f\u4e00\u6837\u3002\u5176\u5b9e\u8fd9\u79cd\u65b9\u6cd5\u8fd8\u662f\u6709\u4e2a\u95ee\u9898\uff0c\u5047\u8bbe\u4f60\u60f3\u68c0\u67e5\u6587\u4ef6\u201ctest_data\u201d\u662f\u5426\u5b58\u5728\uff0c\u4f46\u662f\u5f53\u524d\u8def\u5f84\u4e0b\u6709\u4e2a\u53eb\u201ctest_data\u201d\u7684\u6587\u4ef6\u5939\uff0c\u8fd9\u6837\u5c31\u53ef\u80fd\u51fa\u73b0\u8bef\u5224\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u8fd9\u6837:\u53ea\u68c0\u67e5\u6587\u4ef6Pythonimportosos.path.isfile(\"test-data\")12importosos.path.isfile(\"test-data\")\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5982\u679c\u6587\u4ef6\u201dtest-data\u201d\u4e0d\u5b58\u5728\u5c06\u8fd4\u56deFalse\uff0c\u53cd\u4e4b\u8fd4\u56deTrue\u3002\u5373\u662f\u6587\u4ef6\u5b58\u5728\uff0c\u4f60\u53ef\u80fd\u8fd8\u9700\u8981\u5224\u65ad\u6587\u4ef6\u662f\u5426\u53ef\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u5224\u65ad\u6587\u4ef6\u662f\u5426\u53ef\u505a\u8bfb\u5199\u64cd\u4f5c\u4f7f\u7528os.access()\u65b9\u6cd5\u5224\u65ad\u6587\u4ef6\u662f\u5426\u53ef\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u8bed\u6cd5\uff1aos.access(path,mode)path\u4e3a\u6587\u4ef6\u8def\u5f84\uff0cmode\u4e3a\u64cd\u4f5c\u6a21\u5f0f\uff0c\u6709\u8fd9\u4e48\u51e0\u79cd:os.F_OK:\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728;os.R_OK:\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u53ef\u8bfb;os.W_OK:\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u53ef\u4ee5\u5199\u5165;os.X_OK:\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u53ef\u4ee5\u6267\u884c\u8be5\u65b9\u6cd5\u901a\u8fc7\u5224\u65ad\u6587\u4ef6\u8def\u5f84\u662f\u5426\u5b58\u5728\u548c\u5404\u79cd\u8bbf\u95ee\u6a21\u5f0f\u7684\u6743\u9650\u8fd4\u56deTrue\u6216\u8005False\u3002Pythonimportosifos.access(\"/file/path/foo.txt\",os.F_OK):print\"Givenfilepathisexist.\"ifos.access(\"/file/path/foo.txt\",os.R_OK):print\"Fileisaccessibletoread\"ifos.access(\"/file/path/foo.txt\",os.W_OK):print\"Fileisaccessibletowrite\"ifos.access(\"/file/path/foo.txt\",os.X_OK):print\"Fileisaccessibletoexecute\"123456789101112importosifos.access(\"/file/path/foo.txt\",os.F_OK):\u00a0\u00a0\u00a0\u00a0print\"Givenfilepathisexist.\"\u00a0ifos.access(\"/file/path/foo.txt\",os.R_OK):\u00a0\u00a0\u00a0\u00a0print\"Fileisaccessibletoread\"\u00a0ifos.access(\"/file/path/foo.txt\",os.W_OK):\u00a0\u00a0\u00a0\u00a0print\"Fileisaccessibletowrite\"\u00a0ifos.access(\"/file/path/foo.txt\",os.X_OK):\u00a0\u00a0\u00a0\u00a0print\"Fileisaccessibletoexecute\"2.\u4f7f\u7528Try\u8bed\u53e5\u53ef\u4ee5\u5728\u7a0b\u5e8f\u4e2d\u76f4\u63a5\u4f7f\u7528open()\u65b9\u6cd5\u6765\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728\u548c\u53ef\u8bfb\u5199\u3002\u8bed\u6cd5\uff1aopen(<file/path>)\u5982\u679c\u4f60open\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u7a0b\u5e8f\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u4f7f\u7528try\u8bed\u53e5\u6765\u6355\u83b7\u8fd9\u4e2a\u9519\u8bef\u3002\u7a0b\u5e8f\u65e0\u6cd5\u8bbf\u95ee\u6587\u4ef6\uff0c\u53ef\u80fd\u6709\u5f88\u591a\u539f\u56e0\uff1a\u5982\u679c\u4f60open\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5c06\u629b\u51fa\u4e00\u4e2aFileNotFoundError\u7684\u5f02\u5e38;\u6587\u4ef6\u5b58\u5728\uff0c\u4f46\u662f\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2aPersmissionError\u7684\u5f02\u5e38\u3002\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728:Pythontry:f=open()f.close()exceptFileNotFoundError:print\"Fileisnotfound.\"exceptPersmissionError:print\"Youdon'thavepermissiontoaccessthisfile.\"1234567try:\u00a0\u00a0\u00a0\u00a0f=open()\u00a0\u00a0\u00a0\u00a0f.close()exceptFileNotFoundError:\u00a0\u00a0\u00a0\u00a0print\"Fileisnotfound.\"exceptPersmissionError:\u00a0\u00a0\u00a0\u00a0print\"Youdon'thavepermissiontoaccessthisfile.\"\u5176\u5b9e\u6ca1\u6709\u5fc5\u8981\u53bb\u8fd9\u4e48\u7ec6\u81f4\u7684\u5904\u7406\u6bcf\u4e2a\u5f02\u5e38\uff0c\u4e0a\u9762\u7684\u8fd9\u4e24\u4e2a\u5f02\u5e38\u90fd\u662fIOError\u7684\u5b50\u7c7b\u3002\u6240\u4ee5\u53ef\u4ee5\u5c06\u7a0b\u5e8f\u7b80\u5316\u4e00\u4e0b:Pythontry:f=open()f.close()exceptIOError:print\"Fileisnotaccessible.\"12345try:\u00a0\u00a0\u00a0\u00a0f=open()\u00a0\u00a0\u00a0\u00a0f.close()exceptIOError:\u00a0\u00a0\u00a0\u00a0print\"Fileisnotaccessible.\"\u4f7f\u7528try\u8bed\u53e5\u8fdb\u884c\u5224\u65ad\uff0c\u5904\u7406\u6240\u6709\u5f02\u5e38\u975e\u5e38\u7b80\u5355\u548c\u4f18\u96c5\u7684\u3002\u800c\u4e14\u76f8\u6bd4\u5176\u4ed6\u4e0d\u9700\u8981\u5f15\u5165\u5176\u4ed6\u5916\u90e8\u6a21\u5757\u30023.\u4f7f\u7528pathlib\u6a21\u5757pathlib\u6a21\u5757\u5728Python3\u7248\u672c\u4e2d\u662f\u5185\u5efa\u6a21\u5757\uff0c\u4f46\u662f\u5728Python2\u4e2d\u662f\u9700\u8981\u5355\u72ec\u5b89\u88c5\u4e09\u65b9\u6a21\u5757\u3002\u4f7f\u7528pathlib\u9700\u8981\u5148\u4f7f\u7528\u6587\u4ef6\u8def\u5f84\u6765\u521b\u5efapath\u5bf9\u8c61\u3002\u6b64\u8def\u5f84\u53ef\u4ee5\u662f\u6587\u4ef6\u540d\u6216\u76ee\u5f55\u8def\u5f84\u3002\u68c0\u67e5\u8def\u5f84\u662f\u5426\u5b58\u5728Pythonpath=pathlib.Path(\"path/file\")path.exist()12path=pathlib.Path(\"path/file\")path.exist()\u68c0\u67e5\u8def\u5f84\u662f\u5426\u662f\u6587\u4ef6Pythonpath=pathlib.Path(\"path/file\")path.is_file()12path=pathlib.Path(\"path/file\")path.is_file()2\u8d5e8\u6536\u85cf\u8bc4\u8bba"]}
]